!function t(n,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("heartbeat",[],e):"object"==typeof exports?exports["heartbeat"]=e():n["heartbeat"]=e()}(window,function(){return r={},o.m=e=[function(t,n,e){"use strict";function i(){return function t(n){var e=window.location.search;"?"===e[0]&&(e=e.substring(1));var o,r=e.split("&");for(o=0;o<r.length;o+=1){var i=r[o].split("=");if(i[0]===n)return i[1]}return""}("plid")}function a(){return window.location.hostname.split(".").slice(-2).join(".")}function o(){var t=function t(){var n=window.location.hostname,e=a();return n.replace(".".concat(e),"")}(),n=a(),e=function t(){return encodeURIComponent(window.location.pathname+window.location.search)}(),o=function t(){return window.location.port}(),r=window.ux.data.privateLabelId,i="https://sso.".concat(n,"/logout?realm=idp&app=").concat(t,"&path=").concat(e,"&to_generic=true");return o&&(i+="&port=".concat(o)),1!==r&&(i+="&plid=".concat(r)),i}function c(t){for(var n=document.cookie.split(";"),e=0;e<n.length;e++){var o=n[e].split("=");if(o[0].trim()===t)return decodeURIComponent(o[1])}return""}function r(t){if(401!==t.status)return t;var n=o();return window.location.assign(n),t}function u(){var t=c("info_idp");if(t){var n=JSON.parse(t).vat;if(240<=Math.floor(Date.now()/1e3)-n){var e={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({infotoken:"true",realm:"idp"}),credentials:"include"},o=a();return fetch("https://sso.".concat(o,"/v1/api/token/ui_heartbeat"),e).then(function(t){r(t)})}}}function d(){var t=c("info_idp");if(t){var n=JSON.parse(t);if("basic"===n.auth)if("idp"===n.typ){var e=!0,o=n.plid,r=i();if(r&&+o!=+r&&(e=!1),e){return setInterval(u,6e4),u()}}}}e.r(n),e.d(n,"handleVatResult",function(){return r}),e.d(n,"checkVat",function(){return u}),e.d(n,"main",function(){return d}),window.ux=window.ux||{},window.ux.eldorado&&("function"==typeof window.ux.eldorado.ready?window.ux.eldorado.ready(function(){d()}):d())}],o.c=r,o.d=function(t,n,e){o.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:e})},o.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},o.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(n,"a",n),n},o.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},o.p="",o(o.s=0);function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}var e,r});
//# sourceMappingURL=heartbeat.min.js.map