YUI.add("global-nav-view",function(e,t){e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){var i,n;if(void 0===t.enableBrowserUpgradeBanner&&(t.enableBrowserUpgradeBanner=!0),this.set("showBrowserUpgradeBanner",!1),YUI.Env.isServer&&t.enableBrowserUpgradeBanner){var o=this.appContext.request.headers["user-agent"],a=e.BrowserSupport.isUnsupportedBrowser(o),s=e.BrowserSupport.isBot(o),r=e.BrowserSupport.isSharingBot(o);!a||s||r||this.set("showBrowserUpgradeBanner",!0)}if(!YUI.Env.isServer){var l=e.StorageHelper.getItem("hasDismissedBrowserUpgradeBanner",!0);l&&"true"===l&&this.set("showBrowserUpgradeBanner",!1)}return""===this.get("container").get("innerHTML")&&this.setContainerHTML('<div class="global-nav-content"></div>'),this.appStateParams=t,this.themeClass=t.theme||"default-theme",i=this.appContext.getLocation(),n=t.modelParams&&t.modelParams.apiParams?t.modelParams.apiParams:i.href,this.searchUrl=new e.SearchUrl(n,this.appContext,t.searchType),this.appContext.flipper.isFlipped("enable-signed-out-cta-test")&&(this.signedOutTest=!0),this.appContext.flipper.isFlipped("enable-sign-up-interstitial-test")&&"en-us"===this.appContext.lang.toLowerCase()&&(this.signUpInterstitialTest=!0),!this.appContext.flipper.isFlipped("enable-sign-up-rail-test")||"en-us"!==this.appContext.lang.toLowerCase()||this.appContext.getViewer().signedIn||t.isSOHP||(this.signUpRailTest=!0),this.isSOHP=t.isSOHP,this.disableMobileNav=t.disableMobileNav,this.hideBanner=t.isSearchResults,this.isRefencingAnnouncementPage=t.isRefencingAnnouncementPage,t.featuredToastConfig={id:"upload-limit-warning-toast",showOnActivate:!1},this.uploadLimitDismissHours=48,this.photoPrintsHelper=new e.PhotoPrintsHelper(this.appContext),this.mathHelper=new e.MathHelper,this},subviewConfig:{"search-autosuggest-field-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,isSOHP:this.isSOHP},"account-menu-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"notifications-menu-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,disabled:function(){return!this.appContext.flipper.isFlipped("notifications-menu")}},"browser-upgrade-banner-view":{requiredToShowOnServer:!0,requiredToShowOnClient:!1,dealbreaker:!1,disabled:function(){return!this.get("showBrowserUpgradeBanner")}},"person-menu-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,containerSelector:"#content",excludeSelectors:[".c-account-menu"],disabled:function(){return!(this.appContext.flipper.isFlipped("enable-hover-account-menu")&&this.appContext.flipper.isFlipped("rebootify-group-discussions-list"))}},"group-menu-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,containerSelector:"#content",excludeSelectors:[".c-account-menu"],disabled:function(){return!(this.appContext.flipper.isFlipped("enable-hover-account-menu")&&this.appContext.flipper.isFlipped("rebootify-group-discussions-list"))}},"signup-rail-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,additionalViewClasses:["collapsed"],disabled:function(e){return e.isMobile||!this.signUpRailTest}},"flickr-chat-center-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,disabled:function(e){return!this.appContext.flipper.isFlipped("flickr-chat")||!this.appContext.getViewer().signedIn}},"partner-account-banner-view":{requiredToShowOnServer:!1,requiredToShowOnClient:!1},"featured-toast-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1},"mega-limit-overlay-view":{requiredToShowOnServer:!1,requiredToShowOnClient:!1}},loadState:function(){var t=this,i=this.appContext.getViewer(),n=[];return i.signedIn?(n.push(this.appContext.getModel("person-models",i.nsid).then(function(e){t.set("viewer",e),t.elementStates=t.setElementStates(t.appStateParams)})),n.push(this.appContext.getModel("person-profile-models",i.nsid).then(function(e){t.profileModel=e}))):this.elementStates=this.setElementStates(this.appStateParams),e.Promise.all(n).then(function(){t.get("viewer")&&!YUI.Env.isServer&&t.appContext.flipper.isFlipped("enable-feedback-modal")&&t.appContext.getViewer().signedIn&&"en-US"===t.appContext.lang&&e.config.flickr&&e.config.flickr.geo&&"US"===e.config.flickr.geo.countryCode&&!localStorage.getItem("feedbackmodalseen8_19")&&"photostream-route"!==this.appContext.routeConfig.module&&(t.meetsFeedbackCriteria=!0)})},buildContainer:function(){var t,i={},n=this.appContext.getViewer().signedIn;return this.get("viewer")&&(i=e.merge(this.get("viewer").toJSON(),{urls:e.URLHelper.generatePersonUrls(this.get("viewer"))})),t={theme:this.themeClass,disableMobileNav:this.disableMobileNav,"show-browser-upgrade-banner":this.get("showBrowserUpgradeBanner"),showNotificationsMenu:!1,viewer:i,isSignedIn:n,elements:this.elementStates,isRefencingAnnouncementPage:this.isRefencingAnnouncementPage,showFeaturedToast:(this.appContext.flipper.isFlipped("enable-upload-limit-warning")||this.appContext.flipper.isFlipped("enable-upload-limit-messages"))&&this.appContext.getViewer().signedIn},this.appContext.flipper.isFlipped("notifications-menu")&&n&&(t["notifications-menu-view"]=this.subviews["notifications-menu-view"].get("container"),t.showNotificationsMenu=!0),this.photoPrintsHelper.isPrintsEnabled()&&(t.printCartUrl=this.photoPrintsHelper.getCartUrl()),this.setContainerWithTemplate("global-nav",t),this},activate:function(){var i,n,o=this,a=this.get("container");if(n=["photo-page-ad-scrappy-view","sohp-view"],i=this.appContext.flapp.get("activeView").name,this.contentContainer=a.one(".global-nav"),a.one(".mobile-nav-toggle")&&(this.navDrawer=a.one(".mobile-nav-drawer"),this.navDrawerOverlay=a.one(".mobile-nav-drawer-overlay"),this.registerEventHandler(a.one(".mobile-nav-toggle").on("click",function(e){o.navDrawerShown?o.hideMobileNavDrawer():o.showMobileNavDrawer()})),this.registerEventHandler(this.navDrawer.delegate("click",this.handleDrawerItemClick.bind(this),".mobile-nav-menu-item"))),a.one(".mobile-search-button")?(this.registerEventHandler(a.one(".mobile-search-button").on("click",function(t){e.rapidTracker.beacon(o.name,"mobile-nav-search");var i=o.get("container");o.contentContainer.addClass("search-open"),o.fire("parentViewEvent","focus-search-field"),i.one(".flickr-logo-container").addClass("hidden")}.bind(this))),this.registerEventHandler(e.on("add-context-to-search-field",function(e){o.contentContainer.addClass("search-open"),o.fire("parentViewEvent","focus-search-field")},this))):this.registerEventHandler(e.globalEvents.subscribe("window:resize",function(t){var i=e.config.win.innerWidth<=700,n=i?this.appContext.viewportData.getWidth():0,s=i?46:0;i||(o.contentContainer.removeClass("search-open"),a.one(".flickr-logo-container").removeClass("hidden")),o.fire("parentViewEvent","resize-search-field",n-s)}.bind(this))),a.one(".mobile-search-close-button")&&this.registerEventHandler(a.one(".mobile-search-close-button").on("click",function(e){o.contentContainer.removeClass("search-open"),a.one(".flickr-logo-container").removeClass("hidden"),o.fire("parentViewEvent","clear-search-field")}.bind(this))),this.appContext.getViewer().signedIn||(this.signedOutTest&&a.one(".gn-upload .gn-title")&&this.registerEventHandler(a.one(".gn-upload .gn-title").on("click",this.signUpAndUpload.bind(this))),n.indexOf(i)<0&&!this.isMobile&&this.signUpInterstitialTest&&this.startInterstitialTimer()),e.AnchorRepositioner.addOffset(t,a),this.registerEventHandler(a.delegate("keydown",this.toggleSubmenu.bind(this),"a[aria-haspopup=true]")),this.registerEventHandler(a.delegate("keydown",this.enterSubmenu.bind(this),"a[aria-haspopup=true]")),this.registerEventHandler(a.on("keydown",this.goToSubmenuHeading.bind(this),"ul.gn-submenu")),this.registerEventHandler(a.delegate("keydown",this.keyboardNavigation.bind(this),"ul.nav-menu")),this.registerEventHandler(a.delegate("mouseup",this.toggleAriaExpanded.bind(this),"a[aria-haspopup=true]")),this.showFeedbackModal(),this.toastSubview=this.subviews["featured-toast-view"],this.toastSubview.isActivated?o.setupToast():this.toastSubview.on("activated",function(){o.setupToast()}),e.on("accountCard:overLimitLearnMoreClick",function(){o.setupToast(!0)}),e.on("printsPage:choosePhotosClicked",function(){o.handlePrintClick()}),this.photoPrintsHelper.isPrintsEnabled()&&(this.printsButton=a.one(".gn-create .prints-button"),this.mobilePrintsButton=a.one(".mobile-nav-drawer .prints-button"),this.cartLink=a.one(".gn-create .cart-link"),this.mobileCartLink=a.one(".mobile-nav-drawer .cart-link"),this.registerEventHandler(this.printsButton.on("click",this.handlePrintClick.bind(this))),this.registerEventHandler(this.mobilePrintsButton.on("click",this.handlePrintClick.bind(this))),this.photoPrintsHelper.fetchCartCount().then(function(e){var t=e?e.count:0,i=o.intlMessage({intlName:"prints.VIEW_CART_WITH_COUNT",count:void 0!==t?t.toString():"0"});t>0&&(o.cartLink.removeClass("disabled"),o.mobileCartLink.removeClass("disabled")),o.cartLink.set("innerHTML",i),o.mobileCartLink.set("innerHTML",i)}).catch(function(e){var t=o.intlMessage({intlName:"prints.VIEW_CART_WITH_COUNT",count:"0"});o.cartLink.set("innerHTML",t),o.mobileCartLink.set("innerHTML",t)}),this.prepareOrderConfirmationModal()),this.appContext.flipper.isFlipped("enable-outage-banner")&&!this.appContext.getCookie(e.config.flickr.outage.dismiss_outage_banner_cookie_name))this.createOutageWarningBanner();else{var s=this.appContext.getViewer();if(s.signedIn){if(this.get("viewer")&&this.get("viewer").getValue("isPro"))return this.appContext.getModel("subscription-history-list-models",s.nsid).then(function(t){(new e.SubscriptionsHelper).isUserPastDue(t)?this.createPastDueBanner():this.createLoginMigrationBanner()}.bind(this));this.createLoginMigrationBanner()}else this.createLoginMigrationBanner()}return this},showFeedbackModal:function(){var t=this,i=e.QueryString.parse(e.config.win.location.search.replace("?","")),n=e.config.win.location.href;if(t.appContext.flipper.isFlipped("enable-feedback-modal")&&i&&void 0!==i.survey&&(n=n.replace("?survey",""),e.config.win.history.replaceState({},"",n),this.meetsFeedbackCriteria=!0),this.meetsFeedbackCriteria){var o,a=this.templates("feedback-modal-view")({}),s=[],r=!0;return this.appContext.getViewer().signedIn&&(this.get("viewer").getValue("isPro")&&s.push(this.appContext.getModel("person-proStatus-models",t.get("viewer").id).then(function(e){t.proStatusModel=e,r=1e3*e.toJSON().firstStart-new Date("November 1, 2018").getTime()>0})),s.push(this.appContext.getModel("person-profile-models",t.get("viewer").id).then(function(e){t.profileModel=e}))),e.Promise.all(s).then(function(){var i;t.get("viewer").getValue("isPro")&&!r||((i=new e.Views.FluidModal({appContext:t.appContext,noScroll:!0,hideModalOverlay:!1,maxHeight:!1,showFooter:!1,classList:"modal-restyle",width:560,htmlMessage:a})).show(),i.on("activated",function(){o=i.get("container").one(".accept-button"),i.get("container").one(".cancel-button").on("click",function(e){i.close()}),o.on("click",function(e){var n,a,s,r,l="https://selfserve.decipherinc.com/survey/selfserve/2225/170601?list=3",p="no";o.setAttribute("disabled"),t.appContext.getViewer().signedIn&&(a=t.appContext.getViewer().nsid,n=t.get("viewer").getValue("isPro")?"pro":"free",r=t.get("viewer").getValue("dateCreated").year()),t.proStatusModel&&(p=1e3*t.proStatusModel.toJSON().firstStart-new Date("November 1, 2018").getTime()>0?"yes":"no"),t.profileModel&&(s=t.profileModel.getValue("photoCount")),s&&(l+="&nop="+encodeURIComponent(s)),n&&(l+="&at="+encodeURIComponent(n)),p&&(l+="&np="+encodeURIComponent(p)),r&&(l+="&y="+encodeURIComponent(r)),a&&(l+="&id="+encodeURIComponent(a)),window.open(l,"_blank"),i.close()})}),i.on("close",function(){localStorage.setItem("feedbackmodalseen8_19",!0)}))})}},clearKeyboardFocus:function(e){this.get("container").all(".has-keyboard-focus").removeClass("has-keyboard-focus"),this.get("container").all(".nav-menu a[aria-expanded=true]").setAttribute("aria-expanded","false")},toggleAriaExpanded:function(e){e.target.setAttribute("aria-expanded","false"===e.target.getAttribute("aria-expanded")?"true":"false")},enterSubmenu:function(e){if(40===e.keyCode){e.preventDefault();var t=e.target.next("ul");t&&t.hasClass("has-keyboard-focus")&&t.one(":first-child").one(":first-child").focus()}},toggleSubmenu:function(e){var t=e.keyCode;if(13===t||32===t){e.preventDefault();var i=e.target.next("ul");i&&(i.hasClass("has-keyboard-focus")?this.clearKeyboardFocus():(i.addClass("has-keyboard-focus"),e.target.setAttribute("aria-expanded","true")))}},goToSubmenuHeading:function(e,t){var i;(t||27===e.keyCode)&&(t||this.clearKeyboardFocus(),e.target.hasClass("gn-submenu")?i=e.target.previous("a"):e.target.ancestor("ul.gn-submenu")&&(i=e.target.ancestor("ul.gn-submenu").previous("a")),i&&i.focus())},keyboardNavigation:function(e){var t=e.keyCode,i=9===t&&e.shiftKey,n=9===t&&!e.shiftKey;e.target.hasClass("gn-title")?(i=(37===t||i)&&e.target.ancestor("li").previous("li"),n=(39===t||n)&&!!e.target.ancestor("li").next("li"),i?(this.clearKeyboardFocus(),this.focusOnPreviousItem(e)):!n||e.target.next("ul")&&e.target.next("ul").hasClass("has-keyboard-focus")||(this.clearKeyboardFocus(),this.focusOnNextItem(e))):38===t||i?this.focusOnPreviousItem(e):(40===t||n)&&this.focusOnNextItem(e)},focusOnPreviousItem:function(e){e.preventDefault();var t=e.target.ancestor("li").previous("li:not(.divider)");t?t.one(":first-child").focus():e.target.ancestor("ul.gn-submenu")&&this.goToSubmenuHeading(e,!0)},focusOnNextItem:function(e){e.preventDefault();var t=e.target.ancestor("li").next("li:not(.divider)");t&&t.one(":first-child").focus()},startInterstitialTimer:function(){var t,i=this,n=!1;(t=e.StorageHelper.getItem("signUpInterstitialSeen"))?(t=e.moment(t,"x"),e.moment().subtract(2,"days")>t&&(n=!0)):n=!0,n&&(this.signUpInterstitialTimer=setTimeout(function(){if(!e.OverlayManager.hasOverlay()&&e.config.win.innerWidth>700){new e.Views.SignUpInterstitial({appContext:i.appContext}).show(),e.StorageHelper.setItem("signUpInterstitialSeen",e.moment().format("x"))}},4e3))},signUpAndUpload:function(t){var i,n=e.url("/upload/"),o=this.intlMessage({intlName:"global-nav.UPLOAD_MODAL_SIGNUP_TITLE"}),a=this.intlMessage({intlName:"global-nav.UPLOAD_MODAL_SIGNUP_MESSAGE"});t.halt(),e.rapidTracker.beacon(this.name,"uploadButtonClick"),(i=new e.Views.SignUpModal({appContext:this.appContext,signUpHeaderClass:"signup-upload",signUpTitle:o,signUpMessage:a,beaconPrefix:"upload"})).on("signUpClick",function(t){e.SigninHelper._redirectToSignUp("upload",{postLoginUrl:n})}),i.on("signInClick",function(t){e.SigninHelper._redirectToSignin("upload",{postLoginUrl:n})}),i.show()},executeSearch:function(e){var t,i=this.get("container").one("#gn-search-field").getDOMNode();t=this.searchUrl.createNewSearch(i.value).getURL(),e.halt(),this.appContext.flapp.navigate(t)},setElementStates:function(e){var t=this.appContext.getViewer(),i={you_link:!1,you_menu:!1,contacts_menu:!1,groups_menu:!1,explore_menu:!1,weekly_flickr:!1,create_link:!0,get_pro_link:!0,upload_icon:!1,account_menu:!1,search_bar:!1,signup_link:!1,signin_link:!1,right_side_signup:!1,vr_link:!0};return e.isSOHP&&!t.signedIn?(i.search_bar=!0,i.signin_link=!0,i.signup_link=!0,i.create_link=!1,i.get_pro_link=!1):t.signedIn?(i.you_menu=!0,i.explore_menu=!0,i.upload_icon=!0,i.search_bar=!0,i.account_menu=!0):(i.signup_link=!0,i.explore_menu=!0,i.upload_icon=!0,i.search_bar=!0,i.signin_link=!0),this.get("viewer")&&this.get("viewer").getValue("isPro")&&(i.stats=!0,i.get_pro_link=!1),"en-us"===this.appContext.lang.toLowerCase()&&(i.weekly_flickr=!0),this.signedOutTest&&(i.right_side_signup=!0),this.photoPrintsHelper.isPrintsEnabled()&&(i.create_link=!1,i.prints_menu=!0),this.appContext.flipper.isFlipped("enable-events-page")&&(i.events_link=!0,i.weekly_flickr=!1,i.vr_link=!1),i},isExpiringPartnerAccount:function(){var e=this.get("viewer").getValue("expiringPartner");return this.appContext.flipper.isFlipped("enable-partner-account-banner")&&e&&-1===["embedr-route","site-key-route","browser-upgrade-interstitial-route","products-marketplace-eol-route","products-account-payouts-route","error-route"].indexOf(this.appContext.routeConfig.module)},handleToastPrimaryActionClick:function(t){var i=t&&t.clickEvent?t.clickEvent.target.getAttribute("href"):null;this.setToastDismissCookie(),i?e.config.win.location.href=i:this.toastSubview.dismiss()},handleToastSecondaryActionClick:function(t){var i=t&&t.clickEvent?t.clickEvent.target.getAttribute("href"):null;this.setToastDismissCookie(),i?e.config.win.location.href=i:this.toastSubview.dismiss()},setToastDismissCookie:function(){var e=new Date;e.setTime(e.getTime()+60*this.uploadLimitDismissHours*60*1e3),this.dontSetUploadLimitDismissCookie||this.appContext.setCookie({cookieName:this.toastDismissCookieName,cookieValue:1,expires:e,path:"/"})},setupToast:function(t){var i=!1,n=!1;this.toastSubview&&(this.appContext.flipper.isFlipped("enable-upload-limit-messages")?e.UserLimitsHelper.isOverARRLimit(this.profileModel,this.appContext)?(n=!0,!t&&this.appContext.flipper.isFlipped("enable-photo-limit-overlay")&&(n="photostream-route"!==this.appContext.routeConfig.module&&"photo-route"!==this.appContext.routeConfig.module&&"products-flickrpro-route"!==this.appContext.routeConfig.module&&!this.appContext.getCookie(e.config.flickr.upload_blocking.dismiss_photo_limit_overlay_cookie_name)),!t&&this.appContext.flipper.isFlipped("enable-mega-limit-overlay")&&(n=this.appContext.getCookie(e.config.flickr.upload_blocking.dismiss_photo_limit_overlay_cookie_name)),n&&(this.toastSubview.setup({htmlContent:this.templates("upload-limit-message")({title:this.intlMessage({intlName:"upload-blocking.OVER_UPLOAD_LIMIT_HEAD_FINAL"}),description:this.intlMessage({intlName:"upload-blocking.OVER_UPLOAD_LIMIT_COPY_FINAL",limitCount:e.config.flickr.account.photo_limit.toLocaleString(this.appContext.lang,{maximumFractionDigits:0})}),primaryActionText:this.intlMessage({intlName:"common.GET_PRO"}),secondaryActionText:t?this.intlMessage({intlName:"common.DISMISS"}):this.intlMessage({intlName:"common.REMIND_ME_LATER"})}),classList:["urgent"]}),this.dontSetUploadLimitDismissCookie=t,this.uploadLimitDismissHours=e.config.flickr.upload_blocking.dismiss_over_upload_limit_message_cookie_hours,this.toastDismissCookieName=e.config.flickr.upload_blocking.dismiss_over_upload_limit_message_cookie_name,i=!0)):e.UserLimitsHelper.hasReachedUploadLimit(this.profileModel,this.appContext)?(this.toastSubview.setup({htmlContent:this.templates("upload-limit-message")({title:this.intlMessage({intlName:"upload-blocking.AT_UPLOAD_LIMIT_HEAD"}),description:this.intlMessage({intlName:"upload-blocking.AT_UPLOAD_LIMIT_COPY_SHORT",limitCount:e.config.flickr.account.photo_limit.toLocaleString(this.appContext.lang,{maximumFractionDigits:0}),limitedImagesUrl:"https://blog.flickr.net/en/2018/12/17/important-service-updates-and-dates-to-remember/?utm_campaign=flickr-launch-15&utm_source=Flickr&utm_medium=product&utm_content=big-blue",upgradeToProUrl:"/account/upgrade/pro"}),primaryActionText:this.intlMessage({intlName:"common.GET_PRO"}),secondaryActionText:this.intlMessage({intlName:"common.REMIND_ME_LATER"})})}),this.uploadLimitDismissHours=e.config.flickr.upload_blocking.dismiss_at_upload_limit_message_cookie_hours,this.toastDismissCookieName=e.config.flickr.upload_blocking.dismiss_at_upload_limit_message_cookie_name,i=!0):e.UserLimitsHelper.isNearUploadLimit(this.profileModel,this.appContext)&&(this.toastSubview.setup({htmlContent:this.templates("upload-limit-message")({title:this.intlMessage({intlName:"upload-blocking.UPLOADS_LOCKED_SOON_HEAD"}),description:this.intlMessage({intlName:"upload-blocking.UPLOADS_LOCKED_SOON_COPY",limitCount:e.config.flickr.account.photo_limit.toLocaleString(this.appContext.lang,{maximumFractionDigits:0}),limitedImagesUrl:"https://blog.flickr.net/en/2018/12/17/important-service-updates-and-dates-to-remember/?utm_campaign=flickr-launch-15&utm_source=Flickr&utm_medium=product&utm_content=big-blue",upgradeToProUrl:"/account/upgrade/pro"}),primaryActionText:this.intlMessage({intlName:"common.GET_PRO"}),secondaryActionText:this.intlMessage({intlName:"common.REMIND_ME_LATER"})})}),this.uploadLimitDismissHours=e.config.flickr.upload_blocking.dismiss_near_upload_limit_message_cookie_hours,this.toastDismissCookieName=e.config.flickr.upload_blocking.dismiss_near_upload_limit_message_cookie_name,i=!0):this.appContext.flipper.isFlipped("enable-upload-limit-warning")&&e.UserLimitsHelper.isNearUploadLimit(this.profileModel,this.appContext)&&(this.templates("upload-limit-warning")({}),this.toastSubview.setup({htmlContent:this.templates("upload-limit-warning")({})}),this.uploadLimitDismissHours=e.config.flickr.upload_blocking.dismiss_upload_limit_warning_cookie_hours,this.toastDismissCookieName=e.config.flickr.upload_blocking.dismiss_upload_limit_warning_cookie_name,i=!0),i&&this.toastDismissCookieName&&(t||!this.appContext.getCookie(this.toastDismissCookieName))&&(this.toastSubview.show(),this.toastSubview.on("primaryActionClicked",this.handleToastPrimaryActionClick.bind(this)),this.toastSubview.on("secondaryActionClicked",this.handleToastSecondaryActionClick.bind(this))))},handlePrintClick:function(){"en-us"===this.appContext.lang.toLowerCase()?this.appContext.getCookie(e.config.flickr.flickrprints.dismiss_intro_to_prints_cookie_name)?this.showPrintSelector():this.showIntroToPrintsModal():this.showEnglishPrintWarningModal()},showPrintSelector:function(){var t=this,i=this.intlMessage({intlName:"prints.CHOOSE_PHOTO_TO_GET_PRINTS"})+" "+this.intlHTMLMessage({intlName:"prints.LEARN_MORE_THEN_FEEDBACK",learnUrl:"/prints",feedbackUrl:"/help/forum/en-us/72157710589626091/"}),n=[{id:"photostream",name:this.intlMessage({intlName:"common.PHOTOSTREAM"}),value:"photostream",selected:!0},{id:"sets",name:this.intlMessage({intlName:"common.ALBUMS"}),value:"sets"},{id:"upload",name:this.intlMessage({intlName:"global-nav.UPLOAD"}),value:"upload"}],o=[{id:"photostream",name:this.intlMessage({intlName:"common.PHOTOSTREAM"}),value:"photostream",selected:!0},{id:"sets",name:this.intlMessage({intlName:"common.ALBUMS"}),value:"sets"},{id:"upload",name:this.intlMessage({intlName:"global-nav.UPLOAD"}),value:"upload"}],a=[{id:"photostream",name:this.intlMessage({intlName:"common.PHOTOSTREAM"}),value:"photostream",selected:!0},{id:"sets",name:this.intlMessage({intlName:"common.ALBUMS"}),value:"sets"}],s={appContext:this.appContext,searchable:{yours:!0,contacts:!1,everyone:!1,marketplace:!1}};this.printSelector=new e.Views["photo-selector-view"](s),this.printSelectorModal=new e.Views.FluidModal({appContext:this.appContext,dismissOnOverlayClick:!0,dismissOnActionClick:!1,showBodyLines:!0,showCancelButton:!1,showCancelX:!0,title:"",navBarView:new e.Views["fluid-modal-nav-bar-view"]({appContext:this.appContext,links:n,enableSearch:!0,breakpointConfig:[{maxWidth:700,links:o,enableSearch:!1},{maxWidth:500,links:a,enableSearch:!1}]}),actionButtonLabel:this.intlMessage({intlName:"prints.BUY_PRINTS"}),actionButtonDisabled:!0,subview:this.printSelector,width:Math.round(.8*Math.max(1280,e.config.win.innerWidth)),height:Math.round(e.config.win.innerHeight-60),fullWindow:!0,classList:"photo-selector",hideModalOverlay:!1,buttonFlavorText:i,flexLayout:!0}),this.printSelectorModal.show(),this.printSelectorModal.registerEventHandler(e.on("photoSelector:selected",function(e){t.printSelectorModal.enableActionButton(),t.printSelectorModal.setFlavorText(i)})),this.printSelectorModal.registerEventHandler(e.on("photoSelector:unselected",function(e){t.printSelectorModal.disableActionButton()})),this.printSelectorModal.on("actionClick",this.handleBuyPrintClick.bind(t))},handleBuyPrintClick:function(){var t=this,i=this.printSelector.get("selected");e.config.win.location.href;this.printSelectorModal.disableActionButton(!0),this.appContext.getModel("photo-models",i).then(function(i){return t.photoPrintsHelper.canPrintPhoto(i)?t.photoPrintsHelper.registerPrint(i,e.config.win.location.href):e.Promise.reject({message:"Error: Can’t print photo."})}).then(function(t){e.config.win.location.href=t.redirectURL}).catch(function(e){t.printSelectorModal.enableActionButton(),t.printSelectorModal.setFlavorText(e.message||t.intlMessage({intlName:"prints.SOMETHING_WRONG_PREPARING_PRINT"}),!0)})},showEnglishPrintWarningModal:function(t){var i=this;this.englishPrintWarningModal=new e.Views.FluidModal({appContext:this.appContext,dismissOnOverlayClick:!1,showActionButton:!0,actionButtonLabel:this.intlMessage({intlName:"prints.CONTINUE_IN_ENGLISH"}),showCancelButton:!0,cancelButtonLabel:"en-us"===this.appContext.lang.toLowerCase()?this.intlMessage({intlName:"common.GO_BACK_BUTTON"}):this.intlMessage({intlName:"common.CANCEL"}),showCancelX:!1,showHeader:!0,showFooter:!0,title:this.intlMessage({intlName:"prints.ENGLISH_LANGUAGE_AHEAD"}),message:this.intlMessage({intlName:"prints.ORDERING_IS_ENGLISH_ONLY"}),hideModalOverlay:!1}),this.englishPrintWarningModal.show(),this.englishPrintWarningModal.on("actionClick",function(){setTimeout(function(){i.appContext.getCookie(e.config.flickr.flickrprints.dismiss_intro_to_prints_cookie_name)?i.showPrintSelector():i.showIntroToPrintsModal()},0)}),this.englishPrintWarningModal.on("close",function(){})},handleDrawerPageMouseDown:function(e){var t=e.target;t.ancestor(".mobile-nav-drawer",!0)||t.ancestor(".mobile-nav-toggle",!0)||this.hideMobileNavDrawer()},handleDrawerItemClick:function(e){this.hideMobileNavDrawer()},showMobileNavDrawer:function(){var t=this;this.get("container");this.contentContainer.addClass("drawer-open"),this.navDrawerShown=!0,this.navDrawer.addClass("shown"),clearTimeout(this.navDrawerOverlayHideTimeout),this.navDrawerOverlay&&(this.navDrawerOverlay.addClass("displayed"),setTimeout(function(){t.navDrawerOverlay.addClass("shown")},10)),this.drawerPageClickHandler||setTimeout(function(){t.drawerPageClickHandler=e.on(["mousedown","touchstart"],t.handleDrawerPageMouseDown.bind(t)),t.registerEventHandler(t.drawerPageClickHandler)},10)},hideMobileNavDrawer:function(){var e=this;this.get("container");this.contentContainer.removeClass("drawer-open"),this.navDrawerShown=!1,this.navDrawer.removeClass("shown"),this.navDrawerOverlay&&(this.navDrawerOverlay.removeClass("shown"),this.navDrawerOverlayHideTimeout=setTimeout(function(){e.navDrawerOverlay.removeClass("displayed")},500)),this.drawerPageClickHandler&&(this.detachRegisteredEvent(this.drawerPageClickHandler),this.drawerPageClickHandler=void 0)},createOutageWarningBanner:function(){var e=this;this.appContext.getView("outage-banner-view",{appContext:this.appContext}).then(function(t){e.createBanner(t)})},createPastDueBanner:function(){var e=this;this.appContext.getView("past-due-banner-view",{appContext:this.appContext}).then(function(t){e.createBanner(t)})},createLoginMigrationBanner:function(){var e=this;this.appContext.getView("login-migration-banner-view",{appContext:this.appContext}).then(function(t){e.createBanner(t)})},createBanner:function(t){var i=this,n=this.get("container").one(".nav-banner-container");this.appContext.getView("banner-view",{appContext:this.appContext,subview:t}).then(function(t){return i.bannerView=t,i.bannerView.on("subviewActivated",function(){e.fire("globalNav:bannerSubviewActivated")}),i.bannerView.on("dismissed",function(){i.bannerView.get("container").remove(),i.bannerView.destroy(),e.fire("globalNav:bannerDismissed")}),i.bannerView.initialize()}).then(function(){var e=i.bannerView.get("container");return n.empty(),n.appendChild(e),i.bannerView.activate()})},prepareOrderConfirmationModal:function(){var t,i=this,n=e.QueryString.parse(e.config.win.location.search.replace("?",""));e.config.win.location.href;this.photoPrintsHelper.isPrintsEnabled()&&n&&void 0!==n.OrderID&&(t=n.OrderID,this.photoPrintsHelper.fetchOrder(t).then(function(e){i.showOrderConfirmationModal({orderId:e.orderId,orderUrl:e.orderUrl,email:e.email})}).catch(function(e){i.showOrderConfirmationModal({})}))},showOrderConfirmationModal:function(t){var i=this,n=this.templates("print-order-confirmation")({orderNum:t.orderId,orderUrl:t.orderUrl,email:t.email,helpUrl:"https://help.flickr.com/",feedbackUrl:"/help/forum"}),o=new e.Views.FluidModal({appContext:this.appContext,noScroll:!0,hideModalOverlay:!1,maxHeight:!1,showHeader:!1,showFooter:!1,showCancelX:!1,width:460,htmlMessage:n});o.show(),o.on("activated",function(){i.registerEventHandler(o.get("container").one("button.accept-button").on("click",function(){o.close()}))})},showIntroToPrintsModal:function(){var t=this,i=this.templates("intro-to-prints")({}),n=new e.Views.FluidModal({appContext:this.appContext,noScroll:!0,hideModalOverlay:!1,dismissOnOverlayClick:!0,maxHeight:!1,showHeader:!1,showFooter:!1,width:450,contentPadding:0,showCancelX:!0,htmlMessage:i});n.show(),n.on("activated",function(){n.get("container").one(".accept-button").on("click",function(e){n.close()})}),n.on("close",function(){var i=new Date;i.setTime(i.getTime()+36e10),t.appContext.setCookie({cookieName:e.config.flickr.flickrprints.dismiss_intro_to_prints_cookie_name,cookieValue:1,expires:i,path:"/"}),setTimeout(function(){t.showPrintSelector()},0)})},destructor:function(){clearTimeout(this.signUpInterstitialTimer),e.AnchorRepositioner.removeOffset(t)}})},"@VERSION@",{
requires:["flickr-view","hermes-template-global-nav","hermes-template-feedback-modal-view","hermes-template-back-online-modal-view","hermes-template-upload-limit-warning","hermes-template-upload-limit-message","hermes-template-print-order-confirmation","hermes-template-intro-to-prints","search-url","search-autosuggest-field-view","querystring-parse-simple","querystring-stringify-simple","notifications-menu-view","url-helper","person-menu-view","group-menu-view","browser-support","fluid-modal-view","signup-modal-view","signup-interstitial-view","signin-helper","storage-helper","partner-account-banner-view","featured-toast-view","user-limits-helper","photo-selector-view","fluid-modal-nav-bar-view","mega-limit-overlay-view","banner-view","login-migration-banner-view","past-due-banner-view","photo-prints-helper","math-helper"],langBundles:["global-nav","common","search","migration-outage","upload-blocking","prints","blurb","thanks"]});YUI.add("hermes-lang-global-nav",function(o,e){o.Intl.add("hermes/global-nav","en-US",{FLICKR_LOGO_ALT:["Flickr logo. If you click it, you'll go home"],YOUR_PHOTOSTREAM:["Your Photostream"],FOLLOWING:["Following"],PHOTOS_OF:["Photos of"],PHOTOS_FROM:["Photos from"],LIST:["List"],COMMUNITIES:["Communities"],GROUPS_LIST:["Groups List"],SEARCH_GROUPS:["Search Groups"],RECENT_DISCUSSIONS:["Recent Discussions"],CREATE_A_GROUP:["Create a Group"],RECENT_PHOTOS:["Recent Photos"],THE_COMMONS:["The Commons"],GETTY_COLLECTION:["Getty Collection"],GALLERIES:["Galleries"],FLICKR_GALLERIES:["Flickr Galleries"],WORLD_MAP:["World Map"],APP_GARDEN:["App Garden"],THE_WEEKLY_FLICKR:["The Weekly Flickr"],FLICKR_BLOG:["Flickr Blog"],UPLOAD:["Upload"],SIGN_IN:["Sign In"],SEARCH:["Search"],CAMERA_FINDER:["Camera Finder"],RECENT_ACTIVITY:["Recent Activity"],STATS:["Stats"],ORGANIZE:["Organize"],CREATIONS:["Creations"],FIND_FRIENDS:["Find Friends"],GROUPS:["Groups"],PEOPLE:["People"],CAMERAROLL:["Camera Roll"],CREATE:["Create"],CREATE_NEW:["New Creation"],CREATE_MY_WALLART:["My Wall Art"],CREATE_MY_PHOTOS_BOOKS:["My Photo Books"],CREATE_ORDER_HISTORY:["My Order History"],UPLOAD_MODAL_SIGNUP_TITLE:["Upload your photos securely and privately!"],UPLOAD_MODAL_SIGNUP_MESSAGE:["Join Flickr to unlock 1,000GB of free photo storage."],HOME:["Home"],LOG_IN:["Log In"]})},"@VERSION@",{requires:["intl"]});YUI.add("hermes-lang-migration-outage",function(e,a){e.Intl.add("hermes/migration-outage","en-US",{MAY_UNAVAILABLE_FOR_MAINTENANCE:["On May ","${dateNumber}"," at ","${time}"," Flickr will be unavailable for maintenance."],LEARN_MORE_HERE:["Learn more here."],PANDA_DOWNTIME_HEADLINE:["Flickr is temporarily down for scheduled maintenance."],PANDA_DOWNTIME_DESCRIPTION_1:["Sad, sad panda wants photos!"],PANDA_DOWNTIME_DESCRIPTION_2:['<a class="announcement-link" href="',"${announcementUrl}",'">As we previously announced</a>, Flickr will be down for a few hours while we move a huge piece of infrastructure to our new hosting platform, but that’s no reason to frown. Go out and take some photos, then join the Flickr Good Panda <a class="contest-link"  href="',"${contestUrl}",'">photo contest</a>.'],PANDA_DOWNTIME_DESCRIPTION_3:['Print out this page and cut out the panda. Then take a photo of the panda on an adventure somewhere. When the site is back up, upload your photo to <a href="',"${groupUrl}",'">Good Panda photo contest group</a> and tag it with "',"${contestTag}",'".'],PANDA_DOWNTIME_DESCRIPTION_4:["Team Flickr will pick ten winners in the next few days and each winner will get a free year of Pro."],PANDA_DOWNTIME_DESCRIPTION_5:['You can also check <a href="https://status.flickr.net/">https://status.flickr.net/</a> for updates.'],BACK_ONLINE:["We’re back online"],BACK_ONLINE_DESCRIPTION:['We just finished re-engineering Flickr’s underlying infrastructure. You may come across a few parts of the site that aren’t working perfectly, but we will be addressing them soon. You can always share your feedback with us on the <a class="help-forum-link" href="',"${helpForumUrl}",'">Help Forum</a> or at the <a class="help-center-link" href="',"${helpCenterUrl}",'">Flickr Help Center</a>.'],CAMERAROLL_DOWN_HEADLINE:["Camera Roll isn’t feeling so great."],CAMERAROLL_DOWN_DESCRIPTION_1:['<a class="announcement-link" href="',"${announcementUrl}",'">As we previously announced</a>, our beloved Camera Roll needed a little rest and relaxation. We’ve sent it on a vacation of sorts to an all-inclusive, luxurious Camera Roll-only getaway to get it back to full steam. You can stay updated on the progress <a class="progress-link" href="',"${progressUrl}",'">here</a>.'],CAMERAROLL_DOWN_DESCRIPTION_2:['We’ve temporarily replaced Camera Roll with the Photostream Edit view. For batch photo edits and organization, you can use <a href="/photos/organize">Organizr</a>.'],CAMERAROLL_WANT_TO_SHARE:["Want to share your work with the greatest community of photographers in the world?"],WHERES_CAMERAROLL:["Where’s Camera Roll?"],BATCH_EDIT_IN_ORGANIZR:["Batch edit in Organizr"]})},"@VERSION@",{requires:["intl"]});YUI.add("hermes-lang-prints",function(o,e){o.Intl.add("hermes/prints","en-US",{PRINTS:["Prints"],SIGNUP_MODAL_TITLE:["Get amazing prints!"],SIGNUP_MODAL_MESSAGE:["Join Flickr to gain access to our amazing print labs for all of your photos."],GET_STARTED:["Get started"],PRINTS_AND_GIFTS:["Prints & Wall Art"],VIEW_CART:["View Cart"],VIEW_CART_WITH_COUNT:["View Cart (","${count}",")"],BUY_PRINTS:["Buy prints"],PHOTO_BOOKS_MENU_TEXT:["Photo Books"],CHOOSE_PHOTO_TO_GET_PRINTS:["Choose a photo to get prints and wall art."],BUY_PRINTS_MENU_TEXT:["Buy Prints"],CHOOSE_YOUR_PHOTO_TO_GET_PRINTS:["Choose one of your photos to get prints and wall art."],LEARN_MORE_THEN_FEEDBACK:['<a class="learn-link" href="',"${learnUrl}",'" target="_blank">Learn more</a> then <a class="feedback-link" href="',"${feedbackUrl}",'" target="_blank">tell us what you think!</a>'],GET_PRINTS:["Get prints"],THANKS_FOR_YOUR_ORDER:["Thanks for your order!"],YOUR_ORDER_NUMBER_IS:['Your order number is <a class="order-link" href="',"${orderUrl}",'" target="_blank">',"${orderNum}","</a>."],YOULL_RECEIVE_ORDER_EMAIL:['You’ll receive an email with your order details at <span class="email-span">',"${email}","</span>."],HAVE_QUESTIONS_LINE:['Have questions? Check out <a class="help-link" href="',"${helpUrl}",'" target="_blank">our Help Center</a>.'],WE_WELCOME_FEEDBACK_HERE:['We welcome <a class="feedback-link" href="',"${feedbackUrl}",'" target="_blank">your feedback here</a>.'],PRINT_TOOLTIP_TEXT:["You can now get prints and wall art of your own photos. (This is only available to you for your photos)"],PRINT_TOOLTIP_TEXT_1:["You can now get prints and wall art of your own photos."],PRINT_TOOLTIP_TEXT_2:["This service is only available to you for your photos."],GET_PRINTS_WALL_ART_TITLE:["Get prints and wall art of your photos"],GET_PRINTS_WALL_ART_DESCRIPTION:["Choose from metal, canvas, or paper prints in many sizes and styles."],SELECT_FROM_YOUR_PHOTOS:["Select from your photos"],ENGLISH_LANGUAGE_AHEAD:["English language ahead!"],ORDERING_IS_ENGLISH_ONLY:["Our ordering process is English-only at the moment. Please proceed if you’re comfortable reading English."],CONTINUE_IN_ENGLISH:["Continue in English"],PRINTS_AND_WALL_ART:["Prints & Wall Art"],GET_STUNNING_WALL_ART:["Get stunning wall art and high-quality prints of your photos"],CHOOSE_PHOTOS:["Choose photos"],METAL_PRINTS:["Metal prints"],METAL_PRINTS_DESCRIPTION:["Metal prints deliver unparalleled color and vibrance to produce a depth and clarity unlike any other photographic wall art. If you want a print as bold as your most epic photos, look no further than metal prints."],PAPER_PRINTS:["Paper prints"],PAPER_PRINTS_DESCRIPTION:["Paper prints are a time-honored way to show off and share your favorite photos. From stacks of 4x6s to frameable statement pieces, you'll be able to find the perfect size and paper finish for any  photo."],CANVAS_PRINTS:["Canvas prints"],CANVAS_PRINTS_DESCRIPTION:["Add a little class to your home, office, or whatever other space needs  a classic canvas print. With shapes and sizes perfect for wherever you want to hang your photos, your images will look outstanding."],WHO_CAN_PRINT_PHOTOS_QUESTION:["Who can print my photos?"],WHO_CAN_PRINT_PHOTOS_ANSWER:["Only you can print your photos through Flickr. Visitors to your account will not see the option to buy prints of your photos."],WHO_MAKES_PRINTS_QUESTION:["Who makes the prints and wall art?"],WHO_MAKES_PRINTS_ANSWER:["Flickr Prints benefit from years of experience that SmugMug has in printing beautiful imagery. Depending on your location, your prints will come from Bay Photo, White House Custom Colour, or Loxley Colour. All the labs we use have excellent color reproduction and fantastic reputations."],HOW_LONG_SHIP_QUESTION:["How long does shipping take?"],HOW_LONG_SHIP_ANSWER:["We ship all over the world, including more than 160 countries. No matter where you are, we'll get your prints to you as fast as we can. Expedited shipping is available to get your prints even faster."],WHAT_IF_WRONG_ORDER_QUESTION:["What if something is wrong with my order?"],WHAT_IF_WRONG_ORDER_ANSWER:['If you\'re ever unhappy with your prints or wall art, Flickr will make it right. Simply send us an email within 30 days of receiving your order and we\'ll help you out. If you have any issues, <a class="support-link" href="',"${supportUrl}",'" target="_blank">reach out to our Support Heroes</a>.'],WHERE_PHOTO_BOOK_QUESTION:["Where can I make a photo book?"],WHERE_PHOTO_BOOK_ANSWER:["We partner with Blurb and Chatbooks for both hard-cover and soft-cover photo books. Your Flickr photo stream and albums are seamlessly integrated into the book-making process. Check out photo books."],WHERE_PHOTO_BOOK_ANSWER_WITH_LINKS:['We partner with <a class="blurb-link" href="',"${blurbUrl}",'" target="_blank">Blurb</a> and <a class="chatbooks-link" href="',"${chatbooksUrl}",'" target="_blank">Chatbooks</a> for both hard-cover and soft-cover photo books. Your Flickr photo stream and albums are seamlessly integrated into the book-making process. <a class="photo-books-link" href="',"${photoBooksUrl}",'" target="_blank">Check out photo books.</a>'],MORE_QUESTIONS_QUESTION:["More questions?"],MORE_QUESTIONS_ANSWER:['Please visit the <a class="help-link" href="',"${helpUrl}",'" target="_blank">Flickr Help Center</a> for more information or to connect with a Support Hero.'],PREPARING_YOUR_PHOTO:["Preparing your photo..."],SOMETHING_WRONG_PREPARING_PRINT:["Something went wrong while preparing your photo for prints."],MID_PAGE_PHOTO_ATTRIBUTION:["Photo by ","${photoOwner}","."],UNSUPPORTED_FILE_TYPE_PLEASE_JPG:["This is an unsupported file type. Please use JPG files for prints."],PRINT_PHOTOS_WITH_EASE:["Print your favorite photos from the best labs with ease."]})},"@VERSION@",{requires:["intl"]});YUI.add("hermes-lang-blurb",function(o,r){o.Intl.add("hermes/blurb","en-US",{ALL_NEW_BOOKS_HEADER:["All-new photos books from Blurb"],ALL_NEW_BOOKS_SUBHEADER_PRO:["Get $35 off your Blurb® purchase.* Use your discount code below at checkout."],ALL_NEW_BOOKS_SUBHEADER_NONPRO:['Get $35 off your Blurb® purchase.* <a href="',"${url}",'">Learn more</a>'],GET_DISCOUNT_WITH_PRO:["Get $35 off with your Flickr Pro subscription"],PRINT_WITH_BLURB:["Print your photo books with Blurb®."],ASTERIX:["* With minimum purchase of $70. Offer available for 1-year and 2-year Flickr Pro subscriptions. Discount available once per year."],ASTERIX_V2:["* Get $35 dollars off your Photo Book purchase up to 4 times a year! Valid for orders of $70 or more when you're on an annual Flickr Pro plan."],ASTERIX_MINIMUM:["* With minimum purchase of $70."],ALL_NEW_BOOKS_SUBHEADER_2:["Use your discount code below at checkout."],LAUNCH_BlURB_BOOKIFY:["Launch Blurb Bookify"],CUSTOMIZE_BOOK_HEADER:["Customize your book."],MAKE_A_BOOK:["Make a book"],COLUMNS_CREATE:["Create."],COLUMNS_CREATE_TEXT:["Connect your Flickr account to Blurb and start your book. You can easily import your photostream and albums into the book layout."],COLUMNS_PRINT:["Print."],COLUMNS_PRINT_TEXT:["Get all the options you need for your project, including digital output, print on demand, and offset printing. Plus, choose from a wide range of paper options. It’s all up to you."],COLUMNS_SELL:["Sell."],COLUMNS_SELL_TEXT:['Choose from a range of distribution options, including Amazon, Ingram, and the Blurb Bookstore. As a Flickr Pro, you can now promote your books on Flickr as well. <a href="',"${url}",'">Learn more</a>'],COLUMNS_CUSTOMIZE:["Customize."],COLUMNS_CUSTOMIZE_TEXT:["Take advantage of Blurb’s many sizes, paper choices, and styles. Unleash your creativity with captions, text, and countless photo layouts."],ANOTHER_STUNNING_SHOT:["Another stunning photo shoot!"],WANT_MORE_CREATIVE:["Want more creative control?"],USE_FAVORITE_TOOLS:["Use your favorite Adobe & PDF tools."],CREATIVE_TEXT:['Lay out your book, magazine, or ebook with your favorite tools. Get easy print setup with Blurb’s plug-in for Adobe InDesign and Adobe Lightroom Book Module. Or, design with any app and use Blurb’s PDF uploader. <a href="',"${url}",'">Learn more</a>'],BLURB_SHARE:["Share."],BLURB_SHARE_TEXT:["Once you receive your Blurb book, share it with the Flickr community. Join the official Blurb Books group on Flickr and inspire others with your creations."],BLURB_BULLET_LIST_ONE:["1"],BLURB_BULLET_LIST_SECOND:["2"],BLURB_BULLET_LIST_THIRD:["3"],UPGRADE_TO_PRO_BTN:["Upgrade to Pro"],UPGRADE_YOUR_PRO_BTN:["Upgrade your Pro"],COPY_BLURB_CODE:["Copy"],COPY_COPIED:["Copied!"],PHOTO_BOOKS:["Photo Books"],PRO_BLURB_SECTION_TEXT:["Use Blurb's free book-creation tools for complete creative control. Get $35 off your first Blurb purchase with a yearly Pro subscription (minimum $70 Blurb purchase)."],BLURB_PRODUCT_PROMO_DESCRIPTION_TEXT:["Use Blurb's free book-creation tools for complete creative control. Get $35 dollars off your Photo Book purchase up to 4 times a year. Valid for orders of $70 or more."]})},"@VERSION@",{requires:["intl"]});YUI.add("hermes-lang-thanks",function(a,e){a.Intl.add("hermes/thanks","en-US",{THANK_YOU_USER:['<span class="thank-you-text">Thank you,</span> <span class="thank-you-name">',"${displayName}","</span>"],THANK_YOU_MESSAGE:["You've helped make Flickr a special place for so many years. We hope to delight you for many more."],PS_HAVE_A_WISH:["P.S. — Have a wish for Flickr?"],LET_US_KNOW:["Let us know!"]})},"@VERSION@",{requires:["intl"]});YUI.add("hermes-template-adobe-analytics",function(e,a){var n=e.Template.Handlebars.revive({1:function(e,a,n,l,s){var r,t=null!=a?a:{},i=n.helperMissing,c=e.escapeExpression;return'<script nonce="'+c("function"==typeof(r=null!=(r=n.cspNonce||(null!=a?a.cspNonce:a))?r:i)?r.call(t,{name:"cspNonce",hash:{},data:s}):r)+'" src="'+c("function"==typeof(r=null!=(r=n.adobeAnalyticsUrl||(null!=a?a.adobeAnalyticsUrl:a))?r:i)?r.call(t,{name:"adobeAnalyticsUrl",hash:{},data:s}):r)+'" async><\/script>\n'},compiler:[7,">= 4.0.0"],main:function(e,a,n,l,s){var r;return null!=(r=(n.isFlipped||a&&a.isFlipped||n.helperMissing).call(null!=a?a:{},"enable-adobe-analytics",{name:"isFlipped",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?r:""},useData:!0}),l={};e.Array.each([],function(a){var n=e.Template.get("hermes/"+a);n&&(l[a]=n)}),e.Template.register("hermes/adobe-analytics",function(a,s){return s=s||{},s.partials=s.partials?e.merge(l,s.partials):l,n(a,s)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-footer-full",function(t,l){var n=t.Template.Handlebars.revive({1:function(t,l,n,a,e){var s,o=null!=l?l:{};return'\t\t<div class="foot-top-row desktop-layout">\n\t\t\t<ul class="foot-nav-ul">\n'+(null!=(s=n.if.call(o,null!=(s=null!=l?l.elements:l)?s.top_about:s,{name:"if",hash:{},fn:t.program(2,e,0),inverse:t.noop,data:e}))?s:"")+(null!=(s=n.if.call(o,null!=(s=null!=l?l.elements:l)?s.top_jobs:s,{name:"if",hash:{},fn:t.program(4,e,0),inverse:t.noop,data:e}))?s:"")+(null!=(s=n.if.call(o,null!=(s=null!=l?l.elements:l)?s.top_blog:s,{name:"if",hash:{},fn:t.program(6,e,0),inverse:t.noop,data:e}))?s:"")+(null!=(s=n.if.call(o,null!=(s=null!=l?l.elements:l)?s.top_developers:s,{name:"if",hash:{},fn:t.program(8,e,0),inverse:t.noop,data:e}))?s:"")+(null!=(s=n.if.call(o,null!=(s=null!=l?l.elements:l)?s.top_guidelines:s,{name:"if",hash:{},fn:t.program(10,e,0),inverse:t.noop,data:e}))?s:"")+(null!=(s=n.if.call(o,null!=(s=null!=l?l.elements:l)?s.top_privacy:s,{name:"if",hash:{},fn:t.program(12,e,0),inverse:t.noop,data:e}))?s:"")+(null!=(s=n.if.call(o,null!=(s=null!=l?l.elements:l)?s.top_terms:s,{name:"if",hash:{},fn:t.program(14,e,0),inverse:t.noop,data:e}))?s:"")+(null!=(s=n.if.call(o,null!=(s=null!=l?l.elements:l)?s.top_help:s,{name:"if",hash:{},fn:t.program(16,e,0),inverse:t.noop,data:e}))?s:"")+(null!=(s=n.if.call(o,null!=(s=null!=l?l.elements:l)?s.top_report_abuse:s,{name:"if",hash:{},fn:t.program(18,e,0),inverse:t.noop,data:e}))?s:"")+(null!=(s=n.if.call(o,null!=(s=null!=l?l.elements:l)?s.top_help_forum:s,{name:"if",hash:{},fn:t.program(20,e,0),inverse:t.noop,data:e}))?s:"")+(null!=(s=n.if.call(o,null!=(s=null!=l?l.elements:l)?s.top_language:s,{name:"if",hash:{},fn:t.program(22,e,0),inverse:t.noop,data:e}))?s:"")+'\t\t\t</ul>\n\t\t</div>\n\t\t<div class="foot-top-row mobile-layout">\n\t\t\t<ul class="foot-nav-ul">\n'+(null!=(s=n.if.call(o,null!=(s=null!=l?l.elements:l)?s.top_about:s,{name:"if",hash:{},fn:t.program(2,e,0),inverse:t.noop,data:e}))?s:"")+(null!=(s=n.if.call(o,null!=(s=null!=l?l.elements:l)?s.top_jobs:s,{name:"if",hash:{},fn:t.program(4,e,0),inverse:t.noop,data:e}))?s:"")+(null!=(s=n.if.call(o,null!=(s=null!=l?l.elements:l)?s.top_blog:s,{name:"if",hash:{},fn:t.program(6,e,0),inverse:t.noop,data:e}))?s:"")+(null!=(s=n.if.call(o,null!=(s=null!=l?l.elements:l)?s.top_developers:s,{name:"if",hash:{},fn:t.program(8,e,0),inverse:t.noop,data:e}))?s:"")+(null!=(s=n.if.call(o,null!=(s=null!=l?l.elements:l)?s.top_guidelines:s,{name:"if",hash:{},fn:t.program(10,e,0),inverse:t.noop,data:e}))?s:"")+(null!=(s=n.if.call(o,null!=(s=null!=l?l.elements:l)?s.top_report_abuse:s,{name:"if",hash:{},fn:t.program(18,e,0),inverse:t.noop,data:e}))?s:"")+(null!=(s=n.if.call(o,null!=(s=null!=l?l.elements:l)?s.top_privacy:s,{name:"if",hash:{},fn:t.program(12,e,0),inverse:t.noop,data:e}))?s:"")+(null!=(s=n.if.call(o,null!=(s=null!=l?l.elements:l)?s.top_terms:s,{name:"if",hash:{},fn:t.program(14,e,0),inverse:t.noop,data:e}))?s:"")+(null!=(s=n.if.call(o,null!=(s=null!=l?l.elements:l)?s.top_help_mobile:s,{name:"if",hash:{},fn:t.program(16,e,0),inverse:t.noop,data:e}))?s:"")+(null!=(s=n.if.call(o,null!=(s=null!=l?l.elements:l)?s.top_help_forum:s,{name:"if",hash:{},fn:t.program(20,e,0),inverse:t.noop,data:e}))?s:"")+(null!=(s=n.if.call(o,null!=(s=null!=l?l.elements:l)?s.top_language:s,{name:"if",hash:{},fn:t.program(22,e,0),inverse:t.noop,data:e}))?s:"")+"\t\t\t</ul>\n\t\t</div>\n"},2:function(t,l,n,a,e){return'\t\t\t\t<li class="foot-li"><a href="/about" data-track="footer-about">'+t.escapeExpression((n.intlMessage||l&&l.intlMessage||n.helperMissing).call(null!=l?l:{},{name:"intlMessage",hash:{intlName:"common.ABOUT"},data:e}))+"</a></li>\n"},4:function(t,l,n,a,e){return'\t\t\t\t<li class="foot-li"><a href="/jobs" data-track="footer-jobs">'+t.escapeExpression((n.intlMessage||l&&l.intlMessage||n.helperMissing).call(null!=l?l:{},{name:"intlMessage",hash:{intlName:"common.JOBS"},data:e}))+"</a></li>\n"},6:function(t,l,n,a,e){return'\t\t\t\t<li class="foot-li"><a href="//blog.flickr.net/en" data-track="footer-blog">'+t.escapeExpression((n.intlMessage||l&&l.intlMessage||n.helperMissing).call(null!=l?l:{},{name:"intlMessage",hash:{intlName:"common.BLOG"},data:e}))+"</a></li>\n"},8:function(t,l,n,a,e){return'\t\t\t\t<li class="foot-li"><a href="/services/developer" data-track="footer-developers">'+t.escapeExpression((n.intlMessage||l&&l.intlMessage||n.helperMissing).call(null!=l?l:{},{name:"intlMessage",hash:{intlName:"common.DEVELOPERS"},data:e}))+"</a></li>\n"},10:function(t,l,n,a,e){return'\t\t\t\t<li class="foot-li"><a href="/help/guidelines" data-track="footer-guidelines">'+t.escapeExpression((n.intlMessage||l&&l.intlMessage||n.helperMissing).call(null!=l?l:{},{name:"intlMessage",hash:{intlName:"common.GUIDELINES"},data:e}))+"</a></li>\n"},12:function(t,l,n,a,e){return'\t\t\t\t<li class="foot-li"><a href="/help/privacy" data-track="footer-privacy">'+t.escapeExpression((n.intlMessage||l&&l.intlMessage||n.helperMissing).call(null!=l?l:{},{name:"intlMessage",hash:{intlName:"common.PRIVACY"},data:e}))+"</a></li>\n"},14:function(t,l,n,a,e){return'\t\t\t\t<li class="foot-li"><a href="/help/terms" data-track="footer-terms">'+t.escapeExpression((n.intlMessage||l&&l.intlMessage||n.helperMissing).call(null!=l?l:{},{name:"intlMessage",hash:{intlName:"common.TERMS"},data:e}))+"</a></li>\n"},16:function(t,l,n,a,e){return'\t\t\t\t<li class="foot-li"><a href="//help.flickr.com" data-track="footer-help">'+t.escapeExpression((n.intlMessage||l&&l.intlMessage||n.helperMissing).call(null!=l?l:{},{name:"intlMessage",hash:{intlName:"common.HELP"},data:e}))+"</a></li>\n"},18:function(t,l,n,a,e){return'\t\t\t\t<li class="foot-li"><a href="/abuse" data-track="footer-abuse">'+t.escapeExpression((n.intlMessage||l&&l.intlMessage||n.helperMissing).call(null!=l?l:{},{name:"intlMessage",hash:{intlName:"common.REPORT_ABUSE"},data:e}))+"</a></li>\n"},20:function(t,l,n,a,e){return'\t\t\t\t<li class="foot-li"><a href="/help/forum" data-track="footer-forum">'+t.escapeExpression((n.intlMessage||l&&l.intlMessage||n.helperMissing).call(null!=l?l:{},{name:"intlMessage",hash:{intlName:"common.HELP_FORUM"},data:e}))+"</a></li>\n"},22:function(t,l,n,a,e){var s,o=t.lambda,i=t.escapeExpression;return'\t\t\t\t<li class="foot-li lang-switcher">\n\t\t\t\t\t<a href="/change_language.gne?lang='+i(o(null!=(s=null!=l?l.selectedLang:l)?s.code:s,l))+"&csrf="+i(o(null!=(s=null!=l?l.selectedLang:l)?s.csrf:s,l))+'" data-track="footer-language">'+i(o(null!=(s=null!=l?l.selectedLang:l)?s.name:s,l))+'</a>\n\t\t\t\t\t<span class="arrow"></span>\n\t\t\t\t</li>\n'},24:function(t,l,n,a,e){var s,o=null!=l?l:{};return'\t\t<div class="foot-bottom-row">\n\t\t\t<div class="foot-row-content">\n\t\t\t\t<ul class="foot-nav-ul">\n'+(null!=(s=n.if.call(o,null!=(s=null!=l?l.elements:l)?s.bottom_privacy:s,{name:"if",hash:{},fn:t.program(25,e,0),inverse:t.noop,data:e}))?s:"")+(null!=(s=n.if.call(o,null!=(s=null!=l?l.elements:l)?s.bottom_terms:s,{name:"if",hash:{},fn:t.program(27,e,0),inverse:t.noop,data:e}))?s:"")+(null!=(s=n.if.call(o,null!=(s=null!=l?l.elements:l)?s.bottom_help:s,{name:"if",hash:{},fn:t.program(30,e,0),inverse:t.noop,data:e}))?s:"")+"\t\t\t\t</ul>\n\t\t\t</div>\n\n"+(null!=(s=n.if.call(o,null!=(s=null!=l?l.elements:l)?s.bottom_company:s,{name:"if",hash:{},fn:t.program(32,e,0),inverse:t.program(34,e,0),data:e}))?s:"")+'\n\t\t\t<div class="foot-social">\n\t\t\t\t<ul class="foot-nav-ul">\n'+(null!=(s=n.if.call(o,null!=(s=null!=l?l.elements:l)?s.bottom_facebook:s,{name:"if",hash:{},fn:t.program(36,e,0),inverse:t.noop,data:e}))?s:"")+(null!=(s=n.if.call(o,null!=(s=null!=l?l.elements:l)?s.bottom_twitter:s,{name:"if",hash:{},fn:t.program(38,e,0),inverse:t.noop,data:e}))?s:"")+(null!=(s=n.if.call(o,null!=(s=null!=l?l.elements:l)?s.bottom_instagram:s,{name:"if",hash:{},fn:t.program(40,e,0),inverse:t.noop,data:e}))?s:"")+"\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n"},25:function(t,l,n,a,e){return'\t\t\t\t\t<li class="foot-li"><a href="/help/privacy" data-track="footer-privacy">'+t.escapeExpression((n.intlMessage||l&&l.intlMessage||n.helperMissing).call(null!=l?l:{},{name:"intlMessage",hash:{intlName:"common.PRIVACY"},data:e}))+"</a></li>\n"},27:function(t,l,n,a,e){var s,o=null!=l?l:{};return'\t\t\t\t\t<li class="foot-li"><a href="/help/terms" data-track="footer-terms"'+(null!=(s=n.if.call(o,null!=l?l.highlightTerms:l,{name:"if",hash:{},fn:t.program(28,e,0),inverse:t.noop,data:e}))?s:"")+">"+t.escapeExpression((n.intlMessage||l&&l.intlMessage||n.helperMissing).call(o,{name:"intlMessage",hash:{intlName:"common.TERMS"},data:e}))+"</a></li>\n"},28:function(t,l,n,a,e){return' class="highlighted"'},30:function(t,l,n,a,e){return'\t\t\t\t\t<li class="foot-li"><a href="//help.flickr.com" data-track="footer-help">'+t.escapeExpression((n.intlMessage||l&&l.intlMessage||n.helperMissing).call(null!=l?l:{},{name:"intlMessage",hash:{intlName:"common.HELP"},data:e}))+"</a></li>\n"},32:function(t,l,n,a,e){var s=null!=l?l:{},o=n.helperMissing,i=t.escapeExpression;return'\t\t\t\t<div class="foot-company">\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t'+i((n.intlHTMLMessage||l&&l.intlHTMLMessage||o).call(s,{name:"intlHTMLMessage",hash:{flickrUrl:"/",smugUrl:"https://www.smugmug.com/",intlName:"common.SMUG_FLICKR_FOOTER_ATTRIBUTION"},data:e}))+"\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t"+i((n.intlMessage||l&&l.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"common.CONNECTING_PEOPLE_THROUGH_PHOTOGRAPHY"},data:e}))+"\n\t\t\t\t\t\t</span>\n\t\t\t\t</div>\n"},34:function(t,l,n,a,e){return'\t\t\t\t<div class="foot-company empty">\n\t\t\t\t\t&nbsp;\n\t\t\t\t</div>\n'},36:function(t,l,n,a,e){return'\t\t\t\t\t<li><a target="_blank" href="https://www.facebook.com/flickr" aria-label="Facebook" data-track="footer-facebook">\n\t\t\t\t\t\t<svg class="ft-icon ft-facebook"><use xlink:href="#icon-facebook"></use></svg>\n\t\t\t\t\t</a></li>\n'},38:function(t,l,n,a,e){return'\t\t\t\t\t<li><a target="_blank" href="https://twitter.com/flickr" aria-label="Twitter" data-track="footer-twitter">\n\t\t\t\t\t\t<svg class="ft-icon ft-twitter"><use xlink:href="#icon-twitter"></use></svg>\n\t\t\t\t\t</a></li>\n'},40:function(t,l,n,a,e){return'\t\t\t\t\t<li><a target="_blank" href="https://www.instagram.com/flickr/" aria-label="Instagram" data-track="footer-instagram">\n\t\t\t\t\t\t<svg class="ft-icon ft-instagram"><use xlink:href="#icon-instagram"></use></svg>\n\t\t\t\t\t</a></li>\n'},compiler:[7,">= 4.0.0"],main:function(t,l,n,a,e){var s,o=null!=l?l:{};return'<div class="foot-banner-container"></div>\n\n<footer class="foot">\n\t<div class="foot-container" role="contentinfo">\n'+(null!=(s=n.if.call(o,null!=(s=null!=l?l.elements:l)?s.top_row:s,{name:"if",hash:{},fn:t.program(1,e,0),inverse:t.noop,data:e}))?s:"")+(null!=(s=n.if.call(o,null!=(s=null!=l?l.elements:l)?s.bottom_row:s,{name:"if",hash:{},fn:t.program(24,e,0),inverse:t.noop,data:e}))?s:"")+"\t</div>\n</footer>\n\n"+(null!=(s=t.invokePartial(a["adobe-analytics"],l,{name:"adobe-analytics",data:e,helpers:n,partials:a,decorators:t.decorators}))?s:"")},usePartial:!0,useData:!0}),a={};t.Array.each(["adobe-analytics"],function(l){var n=t.Template.get("hermes/"+l);n&&(a[l]=n)}),t.Template.register("hermes/footer-full",function(l,e){return e=e||{},e.partials=e.partials?t.merge(a,e.partials):a,n(l,e)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-adobe-analytics"]});YUI.add("dropdown",function(e){"use strict";var t;t={css:{closed:"ui-dropdown-closed",shim:"ui-dropdown-shim",label:'span[data-action="toggle"]',items:"[data-value]",itemSelected:"ui-dropdown-item-selected",hasDialogArrow:"ui-dropdown-has-dialog-arrow",dialogArrow:"ui-dialog-arrow",useCheckMarks:"ui-dropdown-use-checkboxes"},options:{hasDialogArrow:!1,useCheckMarks:!1}},e.namespace("Views").Dropdown=e.Base.create("Dropdown",e.FlickrView,[],{initializer:function(e){!1!==e.activate&&this.activate()},activate:function(){var s,i=this,a=this.get("container");if(this.close(),this._items={},e.Lang.isArray(this.get("selected"))||this.set("selected",[this.get("selected")]),a.all(t.css.items).each(function(e){var t=e.getData();i._items[t.value]={text:t.text||'no data-text for "'+t.value+'"',sub:t.sub,node:e}}),this.labelEl=a.one(t.css.label),this.labelEl||(this.labelEl=e.Node.create('<span class="truncate" data-action="toggle" tabindex="0" aria-haspopup="true" aria-expanded="false" />'),a.insert(this.labelEl,0)),(s=this.get("staticLabel")||this.get("defaultLabel"))&&(!0===s?this.labelEl.set("text","set staticLabel/defaultLabel to a string, not `true`"):this.labelEl.set("text",s)),this.get("hasDialogArrow")&&!a.hasClass(t.css.hasDialogArrow)&&a.addClass(t.css.hasDialogArrow),a.hasClass(t.css.hasDialogArrow)&&(this.dialogArrowEl=a.one(t.css.dialogArrow),this.dialogArrowEl||(this.dialogArrowEl=e.Node.create('<span class="ui-dialog-arrow" />'),a.insert(this.dialogArrowEl,1))),this.get("useCheckMarks")&&!a.hasClass(t.css.useCheckMarks)&&a.addClass(t.css.useCheckMarks),this.select(),this.get("disabled"))return this.disable();this.attachEvents({":toggle":this.toggle.bind(this),":set":this.setData.bind(this)}),this.registerEventHandler(this.labelEl.on("key",this.toggle,"down:13",this)),this.registerEventHandler(this.labelEl.on("key",this.enterDropdown,"down:40",this));var l=this.labelEl.next("ul");l&&(this.registerEventHandler(l.on("keydown",this.keyboardNavigation,this)),this.registerEventHandler(l.delegate("key",function(e){document.activeElement.dataset&&this.setData(e,document.activeElement.dataset)},"down:13","li",this)))},setData:function(t,s){if(t.halt(),!this.get("multiSelect")&&!this.get("multiSelectSub")&&e.Array.indexOf(this.get("selected"),s.value)>=0)return this.close();this.select(s.value,s)},select:function(s,i,a){var l,n=this,h=s?this._items[s]:null,o=!0,c=[];h&&e.Array.indexOf(this.get("selected"),s)>=0&&(this.get("multiSelect")||this.get("multiSelectSub"))?(c=this.get("selected"),!h.sub&&this.get("multiSelect")&&c.length>this.get("minimumSelected")?(c.splice(e.Array.indexOf(this.get("selected"),s),1),o=!1):h.sub&&(c.splice(e.Array.indexOf(this.get("selected"),s),1),o=!1),this.set("selected",c)):h&&(h.sub?(c.push(s),this.get("selectParent")&&c.push(h.sub),e.Array.each(this.get("selected"),function(e){n._items[e].sub===h.sub?c.push(e):n.get("multiSelect")&&!n._items[e].sub&&c.push(e)})):this.get("multiSelect")?(c=this.get("selected")).push(s):c.push(s),this.set("selected",c)),a||this.close(),l={clicked:h?{text:h.text,value:s,sub:h.sub,itemEl:h.node,isChecked:o}:null,data:i,selections:c},this.fire("selected",l),this.update(s,l,t)},update:function(t,s,i){var a=this,l=s.clicked,n=this.get("selected"),h=this.get("defaultLabel")||"[Unable to select a default item]";this.get("staticLabel")||(this.get("labelFunction")?h=this.get("labelFunction").apply(this,[t]):l?h=s.data&&s.data.text&&s.data.text!==l.text?s.data.text:l.text:n.length>0&&a._items[n[0]]&&(h=a._items[n[0]].text),this.labelEl.set("textContent",h||"[!empty data-text!]")),this.get("container").all(i.css.items).removeClass(i.css.itemSelected),e.Array.each(n,function(e){a._items[e]&&a._items[e].node.addClass(i.css.itemSelected)})},toggle:function(e){e&&e.halt(),this._open?this.close(e):this.open(e)},open:function(e){var s=this.get("container"),i=0;this._open=!0,this.get("shouldCreateShim")&&this._shimUp(),s.removeClass(t.css.closed),this.get("autoSizeMenu")&&(i=parseInt(this.labelEl.getComputedStyle("width"),10))+30>parseInt(s.one("ul").getComputedStyle("width"),10)&&s.one("ul").setStyles({width:i+30}),e&&e.silent||this.fire("open",e);var a=s.one("span:first-child");a&&a.setAttribute("aria-expanded","true")},close:function(e){var s=this.get("container");e&&e.halt(),this._open=!1,this._shimUp(!1),this.fire("close",e),s.addClass(t.css.closed);var i=this.labelEl;i&&i.setAttribute("aria-expanded","false")},enterDropdown:function(e){e.preventDefault();var t=this.labelEl.next("ul").one("li");t&&t.focus()},keyboardNavigation:function(e){var t=e.keyCode,s=38===t||9===t&&e.shiftKey,i=40===t||9===t&&!e.shiftKey,a=e.target.ancestor("li",!0);s&&a&&a.previous("li")?(e.preventDefault(),this.focusOnPreviousItem(e)):i?(e.preventDefault(),a&&a.next("li")&&this.focusOnNextItem(e)):(27===t||s)&&(e.preventDefault(),this.labelEl&&(this.labelEl.focus(),this.close()))},focusOnPreviousItem:function(e){var t=e.target.ancestor("li",!0);if(t){var s=t.previous("li");s&&(s.one("a")?s.one("a").focus():s.focus())}},focusOnNextItem:function(e){var t=e.target.ancestor("li",!0);if(t){var s=t.next("li");s&&(s.one("a")?s.one("a").focus():s.focus())}},_shimUp:function(s){if(!1===s){if(!this._shim)return;return this._shim.detach("click").remove(),void(this._shim=null)}this._shim=e.Node.create("<div />"),this._shim.addClass(t.css.shim),this._shim.on("click",this.close.bind(this)),this.get("container").appendChild(this._shim)},disable:function(){var e=this.get("container");this.set("disabled",!0),this.close(),e.addClass(t.css.disabled),e.detach()},destructor:function(){this._shimUp(!1),this._items=null,this.labelEl=null,this.set("selected",null),this.detachAll()}},{ATTRS:{selected:{value:[]},disabled:{value:!1},hasDialogArrow:{value:!1},useCheckMarks:{value:!1},multiSelect:{value:!1},multiSelectSub:{value:!1},selectParent:{value:!0},minimumSelected:{value:0},staticLabel:{value:!1},defaultLabel:{value:!1},labelFunction:function(){},shouldCreateShim:{value:!0},autoSizeMenu:{value:!0}}})},"@VERSION@",{requires:["flickr-view"]});