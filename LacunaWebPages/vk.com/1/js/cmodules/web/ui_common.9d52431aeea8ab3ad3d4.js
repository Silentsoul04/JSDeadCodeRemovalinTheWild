!function(e){function t(t){for(var s,l,n=t[0],r=t[1],a=t[2],c=0,u=[];c<n.length;c++)l=n[c],o[l]&&u.push(o[l][0]),o[l]=0;for(s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s]);for(h&&h(t);u.length;)u.shift()();return _.push.apply(_,a||[]),i()}function i(){for(var e,t=0;t<_.length;t++){for(var i=_[t],s=!0,n=1;n<i.length;n++){var r=i[n];0!==o[r]&&(s=!1)}s&&(_.splice(t--,1),e=l(l.s=i[0]))}return e}var s={},o={"web/ui_common":0},_=[];function l(t){if(s[t])return s[t].exports;var i=s[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,l),i.l=!0,i.exports}l.m=e,l.c=s,l.d=function(e,t,i){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(l.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)l.d(i,s,function(t){return e[t]}.bind(null,s));return i},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/js/cmodules/";var n=window.webpackJsonp=window.webpackJsonp||[],r=n.push.bind(n);n.push=t,n=n.slice();for(var a=0;a<n.length;a++)t(n[a]);var h=r;_.push([198,"bundles/common","bundles/a0695912ff27d00306b79cb1d9e5a7be","bundles/cd736fe34acb680ee846b48dbacd00f8"]),i()}({198:function(e,t,i){e.exports=i("MpaO")},MpaO:function(e,t,i){"use strict";i.r(t);var s=i("hmKL"),o=i("qrY5"),_=i("59zB"),l=i("qUi/"),n=i("zxIV"),r=i("lXE5"),a={showSaved:function(e){var t=ge(e),i=t&&Object(n.gpeByClass)("page_block",t),s=i&&geByClass1("page_block_saved",i);if(t&&i&&s){var o=animate.pbind(s,{opacity:1},200,animate.pbind(s,{opacity:0},2e3));a.scrollToStart(i,o)}},scrollToStart:function(e,t){var i=Object(n.getXY)(e)[1];Object(r.scrollGetY)()>i-60?(Object(r.scrollToY)(i-60,200),t&&setTimeout(t,200)):t&&t()}},h=a,c=i("btP0"),u=i("zmTt"),d=i("gdug"),b=i("t7n3"),p=i("Egk5"),m={over:function(e,t,i){if(!d.browser.mobile&&!vk.widget){hasClass(e,"ui_zoom_wrap")||addClass(e,"ui_zoom_wrap"),cur.bigphCache=cur.bigphCache||{},i=i||{};var s=Object(n.domFC)(e),o=cur.bigphCache[t];if("A"!=s.tagName||!hasClass(s,"ui_zoom_outer")){var _=o&&o._id?"/photo"+o._id+"?all=1":"/albums"+t;(s=e.insertBefore(Object(n.se)(`<a class="ui_zoom_outer" href="${_}" aria-label="${Object(b.clean)(getLang("global_photo_full_size"))}"><div class="ui_zoom_inner"><div class="ui_zoom"><div class="ui_zoom_icon"></div></div></div></a>`),Object(n.domFC)(e)))._uid=t,s.offsetHeight,addClass(s,"ui_zoom_added")}s.onclick=m.click.pbind(e,t,i),i.fastLoad&&m.load(e,t,i)}},click:function(e,t,i,s){if(!s||!1===Object(p.checkEvent)(s)){i.fastLoad||m.load(e,t,i);var o=cur.bigphCache[t];if(o)return"load"==o||"show"==o?(cur.bigphCache[t]="show",Object(p.cancelEvent)(s)):(i.onBeforeShow&&i.onBeforeShow(),extend(o,extend({jumpTo:{z:"albums"+t}},i.showOpts||{})),showPhoto(o._id,"album"+t+"_0/rev",o,s))}},load:function(e,t,i){var s=Object(n.domFC)(e);void 0===cur.bigphCache[t]&&(cur.bigphCache[t]="load",ajax.post("al_photos.php",{act:"fast_get_photo",oid:t},{onDone:function(o){if(!o)return e.onmouseover=function(){},void Object(n.re)(s);var _="show"==cur.bigphCache[t];cur.bigphCache[t]=o,s.href="/photo"+o._id+"?all=1",_&&m.click(e,t,i)},onFail:function(){return e.onmouseover=function(){},Object(n.re)(Object(n.domFC)(e)),!0}}))}},E=m,O=(i("a1Th"),i("Btvt"),i("7jxN"));function v(e,t){var i=this.wheel.bind(this);this.obj=e=ge(e),this.options=extend({nomargin:!1,horizontal:!1,top:0,bottom:0,padding:3,prefix:"",hidden:0},t||{}),this.isHorizontal=this.options.horizontal,this.scrollProp=this.isHorizontal?"scrollLeft":"scrollTop",this.scrollDimensionProp=this.isHorizontal?"scrollWidth":"scrollHeight",this.topShadow=!1,this.bottomShadow=!1,this[this.scrollProp+"Last"]=this.obj[this.scrollProp],this.destroyList=[],this.mouseDown=function(e){return!!this.inited&&(this.moveY||Object(p.checkEvent)(e)?void 0:(e||(e=window.event),addEvent(document,"mousemove",this.mouseMove),addEvent(document,"mouseup",this.mouseUp),setStyle(document.body,"cursor","pointer"),setStyle(this.obj,{pointerEvents:"none"}),this.isHorizontal?this.moveX=e.screenX-(this.inner.offsetLeft||0):this.moveY=e.screenY-(this.inner.offsetTop||0),addClass(this.inner,"scrollbar_hovered"),Object(b.isFunction)(this.options.startDrag)&&this.options.startDrag(),Object(b.isFunction)(this.options.onHold)&&this.options.onHold(!0),this.isDown=!0,Object(p.cancelEvent)(e)))}.bind(this),this.mouseMove=function(e){if(!this.inited)return!1;if(e||(e=window.event),this.isHorizontal){var t=Math.floor((this.contWidth()-this.scrollWidth)*Math.min(1,(e.screenX-this.moveX)/(this.scrollbarSize-this.innerWidth-6)));Object(b.isFunction)(this.options.onScroll)&&this.options.onScroll(this.obj.scrollLeft-t,this),this.obj.scrollLeft=t}else{var i=Math.floor((this.contHeight()-this.scrollHeight)*Math.min(1,(e.screenY-this.moveY)/(this.scrollbarSize-this.innerHeight-6)));Object(b.isFunction)(this.options.onScroll)&&this.options.onScroll(this.obj.scrollTop-i,this),this.obj.scrollTop=i}return this.update(!0),!1}.bind(this),this.mouseUp=function(){return!!this.inited&&(this.moveY=this.moveX=this.isDown=!1,this.isOut&&this.contOut(),removeEvent(document,"mousemove",this.mouseMove),removeEvent(document,"mouseup",this.mouseUp),setStyle(document.body,"cursor","default"),setStyle(this.obj,{pointerEvents:""}),removeClass(this.inner,"scrollbar_hovered"),Object(b.isFunction)(this.options.stopDrag)&&this.options.stopDrag(),Object(b.isFunction)(this.options.onHold)&&this.options.onHold(!1),!1)}.bind(this),this.initObjMouseWheel=function(){addEvent(e,d.browserFeatures.wheelEvent,i)},this.destroyObjMouseWheel=function(){removeEvent(e,d.browserFeatures.wheelEvent,i)},this.initScrollBarMouseWheel=function(){addEvent(this.scrollbar,d.browserFeatures.wheelEvent,i)}.bind(this),this.destroyScrollBarMouseWheel=function(){removeEvent(this.scrollbar,d.browserFeatures.wheelEvent,i)}.bind(this),setTimeout(function(){setStyle(e,{overflow:"hidden"}),this.scrollbar=ce("div",{className:(this.options.prefix?this.options.prefix+"scrollbar_cont ":"")+"scrollbar_cont"+(this.isHorizontal?" scrollbar_cont_horiz":"")+(this.options.hidden?" scrollbar_hidden":"")}),this.inner=ce("div",{className:(this.options.prefix?this.options.prefix+"scrollbar_inner ":"")+"scrollbar_inner"}),this.scrollbar.appendChild(this.inner);var t=this.widthUpdated();this.options.shadows&&(e.parentNode.insertBefore(this.topShadowDiv=ce("div",{className:(this.options.prefix?this.options.prefix+"scrollbar_top ":"")+"scrollbar_top"},{width:t[0]}),e),e.parentNode.insertBefore(this.bottomShadowDiv=ce("div",{className:(this.options.prefix?this.options.prefix+"scrollbar_bottom ":"")+"scrollbar_bottom"},{width:t[0]}),e.nextSibling)),e.parentNode.insertBefore(this.scrollbar,e);var s=function(e){switch(e||(e=window.event),e.keyCode){case 40:this.obj[this.scrollProp]+=40;break;case 38:this.obj[this.scrollProp]-=40;break;case 34:this.obj[this.scrollProp]+=this[this.scrollDimensionProp];break;case 33:this.obj[this.scrollProp]-=this[this.scrollDimensionProp];break;default:return!0}return this.update(!0),Object(p.cancelEvent)(e)}.bind(this),o=function(){this.initObjMouseWheel(),removeEvent(e,"mousemove",o)}.bind(this);if(addEvent(e,"mouseleave",this.destroyObjMouseWheel),addEvent(e,"mouseenter",this.initObjMouseWheel),addEvent(e,"mousemove",o),addEvent(this.scrollbar,"mouseenter",this.initScrollBarMouseWheel),addEvent(this.scrollbar,"mouseleave",this.destroyScrollBarMouseWheel),this.options.scrollElements&&each(this.options.scrollElements,function(e,t){addEvent(t,d.browserFeatures.wheelEvent,i)}),addEvent(this.scrollbar,"mouseover",this.contOver.bind(this)),addEvent(this.scrollbar,"mouseout",this.contOut.bind(this)),addEvent(this.scrollbar,"mousedown",this.contDown.bind(this)),d.browser.safari_mobile){var _=function(e){this.isHorizontal?cur.touchX=e.touches[0].pageX:cur.touchY=e.touches[0].pageY}.bind(this),l=function(t){return this.isHorizontal?(cur.touchDiff=cur.touchX-(cur.touchX=t.touches[0].pageX),e.scrollLeft+=cur.touchDiff,e.scrollLeft>0&&!1!==this.shown&&this.update(!0)):(cur.touchDiff=cur.touchY-(cur.touchY=t.touches[0].pageY),e.scrollTop+=cur.touchDiff,e.scrollTop>0&&!1!==this.shown&&this.update(!0)),Object(p.cancelEvent)(t)}.bind(this),r=function(){cur.animateInt=setInterval(function(){cur.touchDiff=.9*cur.touchDiff,cur.touchDiff<1&&cur.touchDiff>-1?clearInterval(cur.animateInt):(e[self.scrollProp]+=cur.touchDiff,this.update(!0))}.bind(this),0)}.bind(this);addEvent(e,"touchstart",_),addEvent(e,"touchmove",l),addEvent(e,"touchend",r),this.destroyList.push(function(){removeEvent(e,"touchstart",_),removeEvent(e,"touchmove",l),removeEvent(e,"touchend",r)})}addEvent(this.inner,"mousedown",this.mouseDown),this.options.nokeys?this.onkeydown=s:addEvent(window,"keydown",s),this.destroyList.push(function(){removeEvent(e,d.browserFeatures.wheelEvent,i),this.options.scrollElements&&each(this.options.scrollElements,function(e,t){removeEvent(t,d.browserFeatures.wheelEvent,i)}),removeEvent(this.inner,"mousedown",this.mouseDown),removeEvent(window,"keydown",s),removeEvent(e,"mousemove",o),Object(n.re)(this.scrollbar)}.bind(this)),this.isHorizontal||(this.contHeight()<=this.scrollHeight?hide(this.bottomShadowDiv):this.bottomShadow=!0),this.options.onInit&&this.options.onInit(),this.inited=!0,this.update(!0),this.options.global||cur.destroy.push(this.destroy.bind(this))}.bind(this),0)}v.prototype={wheel:function(e){if(!this.disabled){e||(e=window.event);var t=0,i=this.obj[this.scrollProp],s=void 0!==e.deltaMode?e.deltaMode:"MozMousePixelScroll"==e.type?0:1;if("wheel"==e.type?t=-(this.isHorizontal?e.deltaX:e.deltaY):void 0!==e.wheelDeltaX&&void 0!==e.wheelDeltaY?(t=.025*(this.isHorizontal?e.wheelDeltaX:e.wheelDeltaY),d.browser.mac&&d.browser.opera&&(t*=.1)):void 0!==e.wheelDelta?t=.025*e.wheelDelta:e.detail&&e.axis===(this.isHorizontal?1:2)&&(t=-e.detail),t=1*t*(1==s?15:2==s?450:1))return this.obj[this.scrollProp]-=t,Object(b.isFunction)(this.options.onScroll)&&this.options.onScroll(t,this),i!=this.obj[this.scrollProp]&&!1!==this.shown&&(this.update(!0),addClass(this.inner,"scrollbar_hovered"),clearTimeout(this.moveTimeout),this.moveTimeout=setTimeout(function(){removeClass(this.inner,"scrollbar_hovered")}.bind(this),300)),!!(!this.shown&&!this.options.forceCancelEvent||this.isHorizontal&&i==this.obj[this.scrollProp])&&void 0}},setOptions:function(e){extend(this.options,e)},widthUpdated:function(){var e,t=Object(n.getSize)(this.obj);return e=this.isHorizontal?{marginLeft:this.options.top+"px",marginTop:t[1]+3+"px",width:t[0]-this.options.top-this.options.bottom+"px"}:{marginTop:this.options.top+"px",marginLeft:this.options.nomargin?0:t[0]-(this.options.mlDiff||7)+"px",height:t[1]-this.options.top-this.options.bottom+"px"},this.options.nomargin&&(void 0!==this.options.right&&"auto"!==this.options.right?(e.right=this.options.right,e.left="auto"):void 0!==this.options.left&&(e.right="auto",e.left=this.options.left)),this.scrollWidth=t[0],this.scrollHeight=t[1],this.scrollbarSize=t[this.isHorizontal?0:1]-this.options.top-this.options.bottom,setStyle(this.scrollbar,e),setTimeout(function(){removeClass(this.scrollbar,"no_transition")}.bind(this)),t},contOver:function(){this.isOut=!1,this.shown&&addClass(this.scrollbar,"scrollbar_c_overed")},contOut:function(){this.isOut=!0,this.isDown||removeClass(this.scrollbar,"scrollbar_c_overed")},contDown:function(e){if(e||(e=window.event),this.isHorizontal){var t=e.offsetX-this.innerWidth/2+5,i=this.scrollbarSize-this.innerWidth;this.obj.scrollLeft=Math.floor((this.contWidth()-this.scrollWidth)*Math.min(1,t/i))}else{var s=e.offsetY-this.innerHeight/2+5,o=this.scrollbarSize-this.innerHeight;this.obj.scrollTop=Math.floor((this.contHeight()-this.scrollHeight)*Math.min(1,s/o))}this.update(!0),this.mouseDown(e)},hide:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){hide(this.topShadowDiv,this.bottomShadowDiv,this.scrollbar),this.hidden=!0}),show:function(){Object(n.show)(this.topShadowDiv,this.bottomShadowDiv,this.scrollbar),this.hidden=!1},disable:function(){this.hide(),this[this.scrollProp](0),this.disabled=!0},enable:function(){this.show(),this.update(),this.disabled=!1},getScrollHeight:function(){return this.scrollHeight},scrollTop:function(e){if(void 0===e)return this.obj.scrollTop;this.obj.scrollTop=parseInt(e),this.update(!1,!0)},scrollBottom:function(e){if(void 0===e)return this.contHeight()-this.scrollHeight-this.obj.scrollTop;this.obj.scrollTop=this.contHeight(!0)-this.scrollHeight-e,this.update(!0,!0)},smoothScroll:function(e,t,i){var s=this.obj.scrollTop+e;void 0===i&&(i=300);var o=this;new O.Fx.Base({scrollTop:this.obj.scrollTop},{transition:O.Fx.Transitions.easeOutCubic,onStep:function(e){o.obj.scrollTop=e.scrollTop,o.update(!0)},duration:i,onComplete:function(){t&&t(scroll)}}).start({scrollTop:this.obj.scrollTop},{scrollTop:s})},scrollLeft:function(e){this.obj.scrollLeft=parseInt(e),this.update(!1,!0)},destroy:function(){each(this.destroyList||[],function(e,t){t()})},contHeight:function(){return Math.round(this.options.contHeight||this.obj.scrollHeight)},contWidth:function(){return Math.round(this.options.contWidth||this.obj.scrollWidth)},val:function(e){return e&&(this.obj[this.scrollProp]=e,this.update(!0,!0)),this.obj[this.scrollProp]},update:function(e,t){if(this.inited&&!this.hidden){if(!e&&(this.isHorizontal?this.moveX:this.moveY))return!0;var i,s;if(t&&(i=Object(n.getSize)(this.obj),this.isHorizontal?(this.scrollWidth=i[0],i=Math.round(this.scrollWidth-this.options.top-this.options.bottom),this.scrollbarSize!==i&&(this.scrollbar.style.width=i+"px")):(this.scrollHeight=i[1],i=Math.round(this.scrollHeight-this.options.top-this.options.bottom),this.scrollbarSize!==i&&(this.scrollbar.style.height=i+"px")),this.scrollbarSize=i),this.isHorizontal?(i=this.contWidth())<=Math.round(this.scrollWidth):(i=this.contHeight())<=Math.round(this.scrollHeight))return hide(this.inner,this.bottomShadowDiv,this.topShadowDiv),this.scrollbar.style.pointerEvents="none",this.topShadow=this.bottomShadow=this.shown=!1,Object(b.isFunction)(this.options.more)&&i-this.obj[this.scrollProp]<2*this[this.scrollDimensionProp]&&this.options.more(this),void(this[this.scrollProp+"Last"]=this.obj[this.scrollProp]);this.shown||(Object(n.show)(this.inner),this.scrollbar.style.pointerEvents="",this.shown=!0);var o=this.val();Object(b.isFunction)(this.options.scrollChange)&&this.options.scrollChange(o),this.lastProgress=Math.min(1,o/(i-(this.isHorizontal?this.scrollWidth:this.scrollHeight))),this.lastProgress>0!=this.topShadow&&((this.topShadow=!this.topShadow)?n.show:hide)(this.topShadowDiv),this.lastProgress<1!=this.bottomShadow&&((this.bottomShadow=!this.bottomShadow)?n.show:hide)(this.bottomShadowDiv),this.isHorizontal?((s=Math.max(40,Math.floor(this.scrollbarSize*this.scrollWidth/i)))!==this.innerWidth&&(this.inner.style.width=(this.innerWidth=s)+"px"),this.inner.style.marginLeft=(this.scrollbarSize-s-2*this.options.padding)*this.lastProgress+this.options.padding+"px"):((s=Math.max(40,Math.floor(this.scrollbarSize*this.scrollHeight/i)))!==this.innerHeight&&(this.inner.style.height=(this.innerHeight=s)+"px"),this.inner.style.marginTop=(this.scrollbarSize-s-2*this.options.padding)*this.lastProgress+this.options.padding+"px"),Object(b.isFunction)(this.options.more)&&i-this.obj[this.scrollProp]<2*this[this.scrollDimensionProp]&&this.options.more(this),this[this.scrollProp+"Last"]=this.obj[this.scrollProp]}},restore:function(){this.obj[this.scrollProp]=this[this.scrollProp+"Last"]}};var g=v,w=(i("KKXr"),i("Oyvg"),i("OG14"),i("pIFo"),i("SRfc"),i("4+be"));var f=class{constructor(e,t,i,o){0===i.length&&(i={}),o=o||{},this.indexer=new vkIndexer(t,o.getName?o.getName:function(e){var t=e[1];if(o.nameClass){var i=Object(n.se)(t);i&&(t=val(geByClass1(o.nameClass,i))||t)}return t}),this.owners=t,this.tpl=o.tpl,this.rsTpl=o.rsTpl,this.idIndex=o.idIndex||0,this.selected=i,this.getUnsorted=o.getUnsorted,this.unsortedIndex=o.unsortedIndex||0,this.box=e,this.filter=o.filter,o.onTabUpdate&&(this.onTabUpdate=o.onTabUpdate),o.onListClick&&(this.onListClick=o.onListClick),e.setButtons(getLang("global_save"),function(i){var s={},l=[],n=[];Object(b.each)(t,function(){!_.invertedSelection&&_.selected[this[_.idIndex]]||_.invertedSelection&&!_.selected[this[_.idIndex]]?(s[this[_.idIndex]]=this,l.push(this[_.idIndex])):n.push(this[_.idIndex])}),!1!==cur.onOListSave(l,n,s,o.ret||{},i)&&e.hide(200)},getLang("global_cancel")),o.box_options&&e.setOptions(o.box_options);var _=this;this.scrollNode=geByClass1("privacy_olist",e.bodyNode),this.moreEl=geByClass1("olist_more",e.bodyNode,"a"),this.olistEl=geByClass1("olist",e.bodyNode,"div"),this.olistFilter=ge("olist_filter_actions"),this.sel=o.sel||0,this.tabs=geByClass1("ui_tabs",e.bodyNode),this.noSelMsg=o.noSelMsg||getLang("friends_no_user_selected"),this.invertedSelection=!1;var l=geByClass1("olist_tab_sel",this.tabs);this.selCnt=Object(b.intval)(val(geByClass1("ui_tab_count",l)));var r=this.filter?this.filter:this.filter=ge("olist_filter");setTimeout(elfocus.pbind(r),100),this.moreEl&&(Object(n.isVisible)(this.moreEl)?this.moreEl.onclick=function(e){return _.renderList("",60),Object(p.cancelEvent)(e)}:(Object(n.re)(this.moreEl),Object(n.show)(this.moreEl))),addEvent(this.olistEl,"click",this.onMouseEvent.bind(this)),addEvent(this.scrollNode,"scroll",this.onScroll.bind(this));var a=_.sel?_.sel>0?"sel":"unsel":"all",h=geByClass1("olist_tab_"+a,_.tabs);h=h&&geByClass1("ui_tab",h),(cur.onOListTabChange=function(e,t){e&&s.default.switchTab(e),void 0===t&&(t=void 0===_.selPrev?0:_.selPrev),_.selPrev=_.sel,_.sel=t,_.renderList(val(r),0,t),setTimeout(elfocus.pbind(r),100)})(h,_.sel),cur.onOlistChange=_.renderList.bind(this),cur.onOlistSelect=_.onOlistSelect.bind(this),cur.onOlistFilters=_.onOlistFilters.bind(this)}onScroll(){var e=Object(n.domPN)(this.box.bodyNode),t=this.moreEl,i=this.scrollNode,s=i.scrollHeight,o=i.scrollTop,_=i.offsetHeight||i.clientHeight;Object(n.toggleClass)(e,"olist_topsh",o>0),Object(n.toggleClass)(e,"olist_botsh",o+_<s),t&&t.offsetTop&&t.onclick&&o+_+200>=s&&t.onclick()}onMouseEvent(e){var t=e.originalTarget||e.target;if(hasClass(t,"olist_item_wrap")||(t=Object(n.gpeByClass)("olist_item_wrap",t)),t&&t!=bodyNode){if(hasClass(t,"olist_item_loading"))return Object(p.cancelEvent)(e);if(Object(p.checkEvent)(e))return!0;this.box.changed=!0;var i=t.id.match(/-?\d+/)[0],s=!this.invertedSelection&&this.selected[i]||this.invertedSelection&&!this.selected[i];if(Object(n.toggleClass)(t,"olist_item_wrap_on",!s),this.selected[i]=!s||this.invertedSelection,this.selCnt+=!s||this.invertedSelection?1:-1,this.selTabUpdate(),this.onListClick&&this.onListClick(t,s),this.scrollNode.scrollTop<50){var o=this.filter;setTimeout(elfocus.pbind(o),100)}return Object(p.cancelEvent)(e)}}onOlistSelect(e,t){o.default.toggle(this.olistFilter,!1);var i=this.selCnt,s=this.selected;switch(t.ctrlKey||t.metaKey||t.shiftKey||(s={},i=0),e){case"all":s={},i=0,Object(b.each)(this.owners,function(){s[this[0]]=1,i++});break;case"none":s={},i=0;break;case"people":Object(b.each)(this.owners,function(){this[0]>0&&!s[this[0]]&&(s[this[0]]=1,i++)});break;case"groups":Object(b.each)(this.owners,function(){this[0]<0&&!s[this[0]]&&(s[this[0]]=1,i++)});break;default:var _=1<<Object(b.intval)(e.replace("list",""));Object(b.each)(this.owners,function(){this[4]&_&&!s[this[0]]&&(s[this[0]]=1,i++)})}return this.selCnt=i,this.selected=s,this.selTabUpdate(),this.renderList(),!1}onOlistFilters(e,t){o.default.show(e,t);var i=t=>{o.default.toggle(e,!1),removeEvent(document,"mousedown",i)};return addEvent(document,"mousedown",i),t&&Object(p.cancelEvent)(t)}selTabUpdate(){if(this.isAlbumEdit)this.onTabUpdate&&this.onTabUpdate();else if(this.tabs){var e=this.selCnt,t=this.owners.length-e,i=geByClass1("olist_tab_sel",this.tabs),s=geByClass1("olist_tab_unsel",this.tabs);val(geByClass1("ui_tab_count",i),e||""),val(geByClass1("ui_tab_count",s),t||""),this.onTabUpdate&&this.onTabUpdate()}}renderList(e,t,i){t=t||0,i=i||this.sel;var s=t?60:120,o=this;e&&(e=e.replace(/\u2013|\u2014/g,"-"));var _=e?this.indexer.search(e):this.owners;o.unsortedIndex==i&&o.getUnsorted&&(_=o.getUnsorted(_));var l=this.selected,r=o.invertedSelection?!(this.sel<0):this.sel<0,a=o.tpl;if(i&&o.unsortedIndex!=i){var h=[];Object(b.each)(_,function(){var e=this[o.idIndex];if((!r&&l[e]||r&&!l[e])&&(h.push(this),h.length>t+s))return!1}),_=h}var c=_.length;_=_.slice(t,t+s);var u,d=[];if(e){e=Object(b.clean)(e);var m=Object(b.escapeRE)(e),E=Object(w.parseLatin)(e);null!=E&&(m=m+"|"+Object(b.escapeRE)(E)),u=new RegExp("(?![^&;]+;)(?!<[^<>]*)((\\(*)("+m+"))(?![^<>]*>)(?![^&;]+;)","gi")}var O=o.rsTpl?o.rsTpl:function(e,t,i,s,o){var _=!i&&s[e[0]]||i&&!s[e[0]],l=e[1];if(t){l=-1==t.indexOf(" ")?l.split(" "):[l];var n="";for(var r in l)l.hasOwnProperty(r)&&(n+=(r>0?" ":"")+l[r].replace(o,"$2<em>$3</em>"));l=n}return{id:e[0],name:l,photo:e[2],classname:_?" olist_item_wrap_on":"",link:e[3]||(e[0]>0?"id"+e[0]:"club"+-e[0])}};Object(b.each)(_,function(){d.push(Object(n.rs)(a,O(this,e,o.invertedSelection,l,u)))}),t||d.length||d.push('<div class="no_rows">'+(e?getLang("global_search_not_found").replace("{search}",e):o.noSelMsg)+"</div>"),Object(n.re)(this.moreEl),d=d.join(" "),t?this.olistEl.appendChild(Object(n.cf)(d)):val(this.olistEl,d),c>t+s&&(this.olistEl.appendChild(this.moreEl),this.moreEl.onclick=function(i){return o.renderList(e,t+s),Object(p.cancelEvent)(i)}),o.box&&o.box.scroll&&o.box.scroll.update(!1,!0),o.onScroll()}},M=i("gUSy");window.uiTabs=s.default,window.uiActionsMenu=o.default,window.uiRightMenu=l.default,window.uiPageBlock=h,window.uiSearch=c.default,window.uiScrollBox=u.default,window.uiPhotoZoom=E,window.Scrollbar=window.Scrollbar||g,window.OList=f,window.UiScroll=_.default,window.uiScroll=_.default,window.Slider=M.default;try{stManager.done("ui_common.js")}catch(e){}},gUSy:function(e,t,i){"use strict";i.r(t);var s=i("zxIV"),o=i("Egk5");function _(e,t){if(this.constructor!=_)throw new Error("Slider was called without 'new' operator");if(!e)throw new Error("No element was provided for Slider");e=ge(e),this.options=t||{size:1},this.options.backValue=this.options.backValue||0;var i=100*this.options.backValue,o=`<div class="slider_slide"><div class="slider_loading_bar" style="opacity: 0; display: none;"></div> ${this.options.withBackLine?'<div class="slider_back" style="width:'+i+'%"></div>':""} <div class="slider_amount"></div> <div class="slider_handler"></div> </div>`;this._el=ce("div",{innerHTML:o,className:"slider",id:e.getAttribute("id")||""});for(var l=e.classList||[],n=this,r=0,a=l.length;r<a;r++)addClass(this._el,l[r]);each(this._el.attributes,function(e,t){"id"==t.name&&"class"==t.name||n._el.setAttribute(t.name,t.value)}),e.parentNode.replaceChild(this._el,e),Object(s.data)(this._el,"slider",this),this._amountEl=geByClass1("slider_amount",this._el),this._handlerEl=geByClass1("slider_handler",this._el),this._slideEl=geByClass1("slider_slide",this._el),this._backEl=geByClass1("slider_back",this._el),this._progressEl=geByClass1("slider_loading_bar",this._el),this.options.color&&(setStyle(this._amountEl,{backgroundColor:this.options.color}),setStyle(this._handlerEl,{backgroundColor:this.options.color})),this.options.handlerColor&&setStyle(this._handlerEl,{backgroundColor:this.options.handlerColor}),this.options.backColor&&setStyle(this._slideEl,{backgroundColor:this.options.backColor}),addClass(this._el,"slider_size_"+this.options.size),this.options.debounce&&(this._onValueChangeDebounced=debounce(this._onValueChange,this.options.debounce)),t.formatHint&&(addEvent(this._el,"mousemove",this._ev_onMouseOver=this._onMouseOver.bind(this)),addEvent(this._el,"mouseleave",this._ev_onMouseLeave=this._onMouseLeave.bind(this))),addEvent(this._el,"mousedown",this._ev_onMouseDown=this._onMouseDown.bind(this)),this.setValue(this.options.value||0,!this.options.fireChangeEventOnInit,!1),this.setBackValue(this.options.backValue)}_.prototype.toggleAdState=function(e){this._adState=!!e,Object(s.toggleClass)(this._el,"slider_ad_mode",!!e)},_.prototype.toggleAdMarker=function(e){e=!!e;var t=geByClass1("slider_ad_marker",this._el);if(e){if(!t){var i="onmouseover=\"showTooltip(this, {text: '"+getLang("global_audio_ad")+"', black: 1, shift: [16, 9, 10]})\"";t=Object(s.se)('<div class="slider_ad_marker_wrap" '+i+'><div class="slider_ad_marker"></div></div>'),Object(s.domPN)(this._slideEl).insertBefore(t,this._slideEl),delete this._width,addClass(this._el,"slider_ad_marker_shown")}}else Object(s.re)(t),delete this._width,removeClass(this._el,"slider_ad_marker_shown")},_.prototype.showAdMarker=function(e){var t=Object(s.se)('<div class="slider_ad_marker"></div>');Object(s.domPN)(this._slideEl).insertBefore(t,this._slideEl),delete this._width,addClass(this._el,"slider_ad_marker_shown")},_.prototype.isAdMode=function(){return hasClass(this._el,"slider_ad_mode")},_.prototype.toggleLoading=function(e){e=!!e,Object(s.toggle)(this._progressEl,e),setStyle(this._progressEl,"opacity",e?1:0)},_.prototype.destroy=function(e){this.options.formatHint&&(removeEvent(this._el,"mousemove",this._ev_onMouseOver),removeEvent(this._el,"mouseleave",this._ev_onMouseLeave),removeEvent(this._el,"mousedown",this._ev_onMouseDown)),Object(s.re)(this._el),Object(s.re)(this._currHintEl)},_.prototype._updateHint=function(e,t){this._currHintEl||(this._currHintEl=Object(s.se)('<div class="slider_hint" id="slider_hint"></div>'),this.options.hintClass&&addClass(this._currHintEl,this.options.hintClass),this._el.appendChild(this._currHintEl)),this._width=this._width||getSize(this._slideEl)[0];var i=this._getPos(),o=Math.round(e.pageX-i[0]),_=this._width;if((o=t?Math.min(Math.max(0,o),_):o)>=0&&o<=_){var l=o/_;this._currHintEl.innerHTML=this.options.formatHint?this.options.formatHint.call(this,l):l;var n=getSize(this._currHintEl);setStyle(this._currHintEl,{left:this._slideEl.offsetLeft+o-n[0]/2,top:this._slideEl.offsetTop-n[1]-10}),!t&&this._toggleHint(!0)}else!t&&this._toggleHint(!1);this.options.formatHint||this._toggleHint(!1)},_.prototype._toggleHint=function(e){this.isAdMode()&&(e=!1),Object(s.toggleClass)(this._currHintEl,"visible",e)},_.prototype._onMouseOver=function(e){_._currenSliderDrag||hasClass(this._el,"active")||this._updateHint(e)},_.prototype._onMouseLeave=function(e){hasClass(this._el,"active")||this._toggleHint(!1)},_.prototype._onMouseDown=function(e){0==e.button&&(delete cur._sliderMouseUpNowEl,this._adState||(addEvent(window,"mousemove",this._ev_onMouseMove=this._onMouseMove.bind(this)),addEvent(window,"mouseup",this._ev_onMouseUp=this._onMouseUp.bind(this)),this._width=getSize(this._slideEl)[0],this._onMouseMove(e),_._currenSliderDrag=this,addClass(this._el,"active"),Object(o.cancelEvent)(e)))},_.prototype._onMouseUp=function(e){cur._sliderMouseUpNowEl=this._el,removeEvent(window,"mousemove",this._ev_onMouseMove),removeEvent(window,"mouseup",this._ev_onMouseUp),clearTimeout(this._debounceto),this._onValueChange(),removeClass(this._el,"active"),_._currenSliderDrag=!1,this._toggleHint(!1),this.options.onEndDragging&&this.options.onEndDragging(this._currValue)},_.prototype._onMouseMove=function(e){var t=this._getPos(),i=Math.max(e.pageX,t[0]);i=Math.min(i,t[0]+this._width),i-=t[0],this.setValue(i/this._width,!0,!0),this._onValueChangeDebounced?this._onValueChangeDebounced():this._onValueChange(),this._toggleHint(!0),this._updateHint(e,!0),Object(o.cancelEvent)(e)},_.prototype._getPos=function(){return this._slidePos=getXY(this._slideEl)},_.LOGFBASE=35,_.prototype._logf=function(e){if(!this.options.log)return e;var t=_.LOGFBASE;return(Math.pow(t,e)-1)/(t-1)},_.prototype._unlogf=function(e){if(!this.options.log)return e;var t,i,s=_.LOGFBASE;return t=s,i=1+e*(s-1),Math.log(i)/Math.log(t)},_.prototype.setValue=function(e,t,i){if(!hasClass(this._el,"active")||i){var s=i?this._logf(e):e;if(this._currValue!=s){this._currValue=s;var o=i?e:this._unlogf(e);o=100*o+"%",setStyle(this._amountEl,{width:o}),setStyle(this._handlerEl,{left:o}),!t&&this._onValueChange()}}},_.prototype.setBackValue=function(e){Object(s.toggleClass)(this._backEl,"slider_back_transition",e>this._backValue),this._backValue=e;var t=100*e+"%";setStyle(this._backEl,{width:t})},_.prototype._onValueChange=function(){this._lastValue=this._lastValue||0,this._lastValue!=this._currValue&&(this._lastValue=this._currValue,this.options.onChange&&this.options.onChange(this._currValue))},t.default=_},"qUi/":function(__webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _web_lib_browser__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("gdug"),_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("t7n3"),_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("zxIV"),_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("Egk5"),_web_lib_ui__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("v+DW"),_web_lib_fx__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("7jxN"),_web_lib_layout_utils__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("El3O"),_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("98sY"),uiRightMenu={initMenu:function(e,t){if(!(_web_lib_browser__WEBPACK_IMPORTED_MODULE_0__.browser.msie&&Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_1__.intval)(_web_lib_browser__WEBPACK_IMPORTED_MODULE_0__.browser.version)<10||_web_lib_browser__WEBPACK_IMPORTED_MODULE_0__.browser.opera&&Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_1__.intval)(_web_lib_browser__WEBPACK_IMPORTED_MODULE_0__.browser.version)<15||hasClass(e,"ui_rmenu_sliding"))){var i=geByClass1("ui_rmenu_item",e),s=geByClass1("ui_rmenu_item_sel",e),o=s||i,_=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.getSize)(o)[1],l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.getXY)(o)[1]-Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.getXY)(e)[1],n=geByClass1("_ui_rmenu_slider",e);if(!t)setStyle(n,{height:_,top:s?l:0}),addClass(e,"ui_rmenu_sliding")}},go:function(e,t,i,s){if(Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_3__.checkEvent)(t))return!0;var o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.gpeByClass)("ui_rmenu",e);return!(!(s||{}).ignoreSelected&&geByClass1("ui_rmenu_item_sel",o)==e)&&(uiRightMenu.switchMenu(e),uiRightMenu.showProgress(e),!1!==i&&nav.go(i||e,t,extend({fromMenu:!0},s||{})))},switchMenu:function(e,t){var i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.gpeByClass)("ui_rmenu",e),s=geByClass1("ui_rmenu_item_sel",i);if(e==s&&!t)return!1;uiRightMenu.initMenu(i);var o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.getSize)(e)[1],_=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.getXY)(e)[1]-Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.getXY)(i)[1],l=[],n=[];if(hasClass(i,"_ui_rmenu_auto_expand")){var r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.geByClass)("_ui_rmenu_sublist",i),a=hasClass(e,"_ui_rmenu_subitem")?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.gpeByClass)("_ui_rmenu_sublist",e):!!hasClass(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.domNS)(e),"_ui_rmenu_sublist")&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.domNS)(e);each(r,function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.isVisible)(this)&&this!==a&&(l.push(this),hide(this))}),a&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.isVisible)(a)&&(n.push(a),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.show)(a)),_=e.offsetTop,each(l,function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.show)(this)}),each(n,function(){hide(this)})}var h=geByClass1("_ui_rmenu_slider",i),c=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_1__.intval)(h.style.top),u={height:o};return _web_lib_browser__WEBPACK_IMPORTED_MODULE_0__.browser.msie_edge?u.marginTop=_-c+"px":u[cssTransformProp]="translateY("+(_-c)+"px)",setStyle(h,u),removeClass(s,"ui_rmenu_item_sel"),addClass(e,"ui_rmenu_item_sel"),hasClass(i,"_ui_rmenu_auto_expand")?each(l.concat(n),function(){uiRightMenu.toggleSubmenu(this)}):hasClass(e,"_ui_rmenu_subitem")&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.isVisible)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.domPN)(e))&&uiRightMenu.toggleSubmenu(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.domPN)(e)),!1},fixScroller:function(e){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.gpeByClass)("ui_rmenu",e);if(t&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.isVisible)(e)){var i=hasClass(t,"ui_rmenu_sliding"),s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.getSize)(e)[1];i&&uiRightMenu.hideSliding(t);var o=e.offsetTop,_=geByClass1("_ui_rmenu_slider",t),l=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_1__.intval)(_.style.top),n={height:s};_web_lib_browser__WEBPACK_IMPORTED_MODULE_0__.browser.msie_edge?n.marginTop=o-l+"px":n[cssTransformProp]="translateY("+(o-l)+"px)",setStyle(_,n),e.offsetLeft,i&&uiRightMenu.showSliding(t)}},unselectAll:function(e){removeClass(e,"ui_rmenu_sliding"),removeClass(geByClass1("ui_rmenu_item_sel",e),"ui_rmenu_item_sel")},hideSliding:function(e){removeClass(e,"ui_rmenu_sliding")},showSliding:function(e){addClass(e,"ui_rmenu_sliding")},showProgress:function(e){hasClass(e,"ui_rmenu")||(e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.gpeByClass)("ui_rmenu",e));var t=geByClass1("ui_rmenu_loading_item",e);t&&removeClass(t,"ui_rmenu_loading_item");var i=geByClass1("ui_rmenu_item_sel",e);Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_4__.hideProgress)(e),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_4__.showProgress)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.domFC)(i).parentNode,"","",!1),addClass(e,"ui_rmenu_loading"),addClass(i,"ui_rmenu_loading_item")},hideProgress:function(e){hasClass(e,"ui_rmenu")||(e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.gpeByClass)("ui_rmenu",e)),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_4__.hideProgress)(e);var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.gpeByClass)("ui_rmenu",e);removeClass(e,"ui_rmenu_loading"),uiRightMenu.hideSliding(t);var i=geByClass1("ui_rmenu_loading_item",t);i&&removeClass(i,"ui_rmenu_loading_item")},toggleSubmenu:function toggleSubmenu(name,ref){var menu=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.gpeByClass)("ui_rmenu",ref),el,submenu;if("string"==typeof name?submenu=geByClass1("_ui_rmenu_"+name+"_list",menu):(submenu=name,name=submenu.getAttribute("data-sublist-id")),el=geByClass1("_ui_rmenu_"+name+"_toggle",menu),!submenu)return!1;void 0!==ref&&uiRightMenu.hideSliding(menu),el&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.toggleClass)(el,"ui_rmenu_item_expanded",!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.isVisible)(submenu)),Object(_web_lib_fx__WEBPACK_IMPORTED_MODULE_5__.slideToggle)(submenu,submenu&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.getSize)(submenu)[1]?100:0),setTimeout(_web_lib_layout_utils__WEBPACK_IMPORTED_MODULE_6__.updateNarrow,100);var onToggle=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.domData)(el,"on-toggle");return onToggle&&setTimeout(function(){try{eval(onToggle)}catch(e){Object(_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_7__.logEvalError)(e,onToggle)}},150),!1}};__webpack_exports__.default=uiRightMenu},qrY5:function(__webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("pIFo"),_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("Egk5"),_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("zxIV"),_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("t7n3"),_web_lib_browser__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("gdug"),_web_lib_scroll__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("lXE5"),_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("98sY"),_web_legacy_ui_ui_scroll__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("59zB"),uiActionsMenu={keyToggle:function(e,t){if(!Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_1__.checkKeyboardEvent)(t))return!1;var i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.domClosest)("_ui_menu_wrap",e);i&&uiActionsMenu.toggle(i,!hasClass(i,"shown"))},toggle:function toggle(el,s,options){var dummyMenu=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(el,"dummyMenu");dummyMenu&&(el=dummyMenu),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.toggleClass)(el,"shown",s);var onhide=attr(el,"onHide");if(onhide&&!hasClass(el,"shown"))try{eval(onhide)}catch(e){Object(_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_6__.logEvalError)(e,onhide)}if(options&&options.onToggle){var script=options.onToggle.replace("{isShow}",""+s);try{eval(script)}catch(e){Object(_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_6__.logEvalError)(e,script)}}},show:function(e,t,i){var s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(e,"hidetimer");s&&(clearTimeout(s),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(e,"hidetimer",0));var o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(e,"origMenu");if(o&&(s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(o,"hidetimer"))&&(clearTimeout(s),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(e,"hidetimer",0)),i&&i.delay){cur.uiActionsMenuShowTimeout&&clearTimeout(cur.uiActionsMenuShowTimeout);var _=i.delay;return delete i.delay,void(cur.uiActionsMenuShowTimeout=setTimeout(uiActionsMenu.show.pbind(e,t,i),_))}if(cur.uiActionsMenuShowTimeout&&(clearTimeout(cur.uiActionsMenuShowTimeout),delete cur.uiActionsMenuShowTimeout),i&&i.appendParentCls){var l,n,r=geByClass1("_ui_menu",e);if(r){n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.domClosest)(i.appendParentCls,r),l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.domClosest)("_ui_menu_wrap",e);var a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.se)(`<div class="${l.className} ui_actions_menu_dummy_wrap" onmouseover="uiActionsMenu.show(this);" onmouseout="uiActionsMenu.hide(this);"></div>`);if(a.appendChild(r),n.appendChild(a),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(e,"dummyMenu",a),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(a,"origMenu",e),e=a,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(r,"top",Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__.intval)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.getStyle)(r,"top"))),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(r,"left",Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__.intval)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.getStyle)(r,"left"))),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(r,"right",Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__.intval)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.getStyle)(r,"right"))),i.processHoverCls){var h=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.domClosest)(i.processHoverCls,l);addEvent(e,"mouseover",addClass.pbind(h,"hover")),addEvent(e,"mouseout",removeClass.pbind(h,"hover"))}}else e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(e,"dummyMenu");var c=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(e,"origMenu");r=geByClass1("_ui_menu",e),l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.domClosest)("_ui_menu_wrap",c),n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.domClosest)(i.appendParentCls,r),setStyle(r,{display:"block"});var u=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.getXY)(n),d=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.getXY)(l),b=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(r,"top"),p=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(r,"left"),m=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(r,"right"),E={top:d[1]-u[1]+b};m?E.right=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.getSize)(n)[0]+u[0]-d[0]-Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.getSize)(l)[0]+m:E.left=d[0]-u[0]+p,setStyle(r,E)}var O=geByClass1("_ui_menu",e);if(i&&i.autopos&&O&&!hasClass(e,"shown")){removeClass(e,"ui_actions_menu_left");var v=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.getXY)(e)[1],g=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.getSize)(e)[1],w=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.getSize)(O)[1],f=i.dy||10,M=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.getXY)(O)[0];removeClass(e,"ui_actions_menu_top"),addClass(e,"no_transition"),v+g+f+w>(_web_lib_browser__WEBPACK_IMPORTED_MODULE_4__.browser.mozilla?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.getSize)("page_wrap")[1]:Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_5__.scrollGetY)()+(window.lastWindowHeight||0))&&addClass(e,"ui_actions_menu_top"),v-f-w<Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_5__.scrollGetY)()+Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.getSize)("page_header_wrap")[1]&&removeClass(e,"ui_actions_menu_top"),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.toggleClass)(e,"ui_actions_menu_left",M<0),removeClass(e,"no_transition")}i&&i.scroll&&i.maxHeight&&(O.style.maxHeight=(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__.intval)(i.maxHeight)||200)+"px",O.__uiScroll__||new _web_legacy_ui_ui_scroll__WEBPACK_IMPORTED_MODULE_7__.default(O)),uiActionsMenu.toggle(e,!0,i)},hide:function(e,t,i){cur.uiActionsMenuShowTimeout&&(clearTimeout(cur.uiActionsMenuShowTimeout),delete cur.uiActionsMenuShowTimeout);var s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(e,"hidedelay");s?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(e,"hidedelay",!1):s=200,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(e,"hidetimer")||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(e,"hidetimer",setTimeout(function(){uiActionsMenu.toggle(e,!1,i),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(e,"hidetimer",0)},s))},hideDelay:function(e,t){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(e,"hidedelay",t)}};__webpack_exports__.default=uiActionsMenu},zmTt:function(e,t,i){"use strict";i.r(t);i("a1Th"),i("Btvt");var s=i("zxIV"),o=i("Egk5"),_=i("lXE5"),l={init:function(e,t){cur.lSTL&&Object(s.re)(cur.lSTL);var i=(t=t||{}).parent=t.parent||boxLayerWrap;extend(cur,{lSTLWrap:i,lSTL:i.appendChild(ce("div",{id:"layer_stl",innerHTML:`<div id="layer_stl_bg" class="fixed"></div><div id="layer_stl_cl"></div><nobr id="layer_stl_text" class="fixed">${getLang("global_to_top")}</nobr>`,el:e.bodyNode,onclick:o.cancelEvent,onmousedown:l.lSTLDown,sc:l.onScroll})),lSTLText:ge("layer_stl_text",i),lSTLShown:0,lSTLWas:0,lSTLWasSet:0,lSTLOpts:t}),e&&e.setOptions({onShow:l.show,onHide:l.hide}),e&&e.scrollInited||(addEvent(i,"scroll",l.onScroll),e&&(e.scrollInited=!0)),onBodyResize(),l.onScroll()},hide:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=cur.lSTLOpts;e&&e.parent&&(removeEvent(e.parent,"scroll",l.onScroll),hide(cur.lSTL),cur.lSTLShown=0,e.onHide&&e.onHide())}),show:function(){var e=cur.lSTLOpts;e&&e.parent&&(addEvent(e.parent,"scroll",l.onScroll),setTimeout(l.onScroll,0),e.onShow&&e.onShow())},lSTLDown:function(e){if(e=e||window.event,!Object(o.checkEvent)(e)){var t=cur.lSTLWrap;if(!__afterFocus){var i=0,s=t.scrollTop;cur.lSTLWasSet&&cur.lSTLWas?(i=cur.lSTLWas,cur.lSTLWas=0):cur.lSTLWas=s,t.scrollTop=i}return Object(o.cancelEvent)(e)}},onScroll:function(){if(cur.lSTL){var e=cur.lSTLWrap.scrollTop,t=cur.lSTLWas||e>200,i=0;if(cur.lSTL.style.marginTop=Math.min(e,boxLayer.scrollHeight-cur.lSTL.scrollHeight-1)+"px",vk.staticheader){var o=Object(s.getSize)("page_header_wrap")[1];cur.lSTLText.style.marginTop=Math.max(-Math.min(Object(_.scrollGetY)(),bodyNode.clientHeight-(window.lastWindowHeight||0)),-o)+"px"}t?(1!==cur.lSTLShown&&(Object(s.show)(cur.lSTL),cur.lSTLShown=1),cur.lSTLWas&&e>500&&(cur.lSTLWas=0),e>200?(i=(e-200)/200,cur.lSTLWasSet&&(cur.lSTLWasSet=0,val(Object(s.domLC)(cur.lSTL),getLang("global_to_top")),removeClass(Object(s.domLC)(cur.lSTL),"down"))):(i=(200-e)/200,cur.lSTLWas&&(cur.lSTLWasSet||(cur.lSTLWasSet=1,val(Object(s.domLC)(cur.lSTL),""),addClass(Object(s.domLC)(cur.lSTL),"down"))))):0!==cur.lSTLShown&&(hide(cur.lSTL),cur.lSTLShown=0),setStyle(cur.lSTL,{opacity:Math.min(Math.max(i,0),1)})}}};t.default=l}});