! function(e) {
    function t(t) {
        for (var i, o, s = t[0], l = t[1], c = t[2], d = 0, f = []; d < s.length; d++) o = s[d], a[o] && f.push(a[o][0]), a[o] = 0;
        for (i in l) Object.prototype.hasOwnProperty.call(l, i) && (e[i] = l[i]);
        for (u && u(t); f.length;) f.shift()();
        return r.push.apply(r, c || []), n()
    }

    function n() {
        for (var e, t = 0; t < r.length; t++) {
            for (var n = r[t], i = !0, s = 1; s < n.length; s++) {
                var l = n[s];
                0 !== a[l] && (i = !1)
            }
            i && (r.splice(t--, 1), e = o(o.s = n[0]))
        }
        return e
    }
    var i = {},
        a = {
            common: 0
        },
        r = [];

    function o(t) {
        if (i[t]) return i[t].exports;
        var n = i[t] = {
            i: t,
            l: !1,
            exports: {}
        };
        return e[t].call(n.exports, n, n.exports, o), n.l = !0, n.exports
    }
    o.m = e, o.c = i, o.d = function(e, t, n) {
        o.o(e, t) || Object.defineProperty(e, t, {
            enumerable: !0,
            get: n
        })
    }, o.r = function(e) {
        "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {
            value: "Module"
        }), Object.defineProperty(e, "__esModule", {
            value: !0
        })
    }, o.t = function(e, t) {
        if (1 & t && (e = o(e)), 8 & t) return e;
        if (4 & t && "object" == typeof e && e && e.__esModule) return e;
        var n = Object.create(null);
        if (o.r(n), Object.defineProperty(n, "default", {
                enumerable: !0,
                value: e
            }), 2 & t && "string" != typeof e)
            for (var i in e) o.d(n, i, function(t) {
                return e[t]
            }.bind(null, i));
        return n
    }, o.n = function(e) {
        var t = e && e.__esModule ? function() {
            return e.default
        } : function() {
            return e
        };
        return o.d(t, "a", t), t
    }, o.o = function(e, t) {
        return Object.prototype.hasOwnProperty.call(e, t)
    }, o.p = "/js/cmodules/mobile/";
    var s = window.webpackJsonp = window.webpackJsonp || [],
        l = s.push.bind(s);
    s.push = t, s = s.slice();
    for (var c = 0; c < s.length; c++) t(s[c]);
    var u = l;
    r.push([6, "vendors", "b-2048c0308699da552418c348dad19b7a", "b-e24174c948c4d0e8bce37c4717cc3761"]), n()
}({
    "+4eP": function(e, t, n) {
        "use strict";
        var i = n("UxAg"),
            a = n("OcsD"),
            r = s(n("o+0k")),
            o = s(n("HQL/"));

        function s(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        var l = (0, a.need)("Slider");
        window.VotingForm = {}, VotingForm._onInit = _, VotingForm._onAddOptionClick = m, VotingForm._onExpireChange = g, VotingForm._onOptionRemoveClick = y, VotingForm._onTitleKeyDown = h, VotingForm._onTitleInput = p, VotingForm._onOptionKeyDown = A, mediaUpload.onComplete(k), mediaUpload.onStart(E), mediaUpload.onError(S);
        var c = {
                uploading: "VotingForm_uploading",
                withExpire: "VotingForm_withExpire",
                maxOptions: "VotingForm_maxOptions"
            },
            u = {
                form: ".VotingForm",
                maxOptions: ".VotingForm_maxOptions",
                option: ".VotingForm__option",
                options: ".VotingForm__options",
                upload: ".VotingForm__upload",
                bcg: ".VotingForm__bcg",
                bcgRadioChecked: ".VotingForm__bcgRadio:checked"
            },
            d = 13,
            f = 8;

        function h(e) {
            e.keyCode === d && e.preventDefault()
        }

        function p(e) {
            var t = +attr(e, "maxlength"),
                n = (0, i.$)(".VotingForm__count");
            t - e.value.length <= 20 ? n.innerHTML = "".concat(e.value.length, "/").concat(t) : n.innerHTML = ""
        }

        function A(e) {
            if (h(e), e.keyCode === d) {
                if (!(0, i.$)(u.maxOptions))
                    if ((0, i.$)(".VotingForm__option:last-child input") === document.activeElement) return v(), void(0, i.$)(".VotingForm__option:last-child input").focus();
                if (document.activeElement) {
                    var t = document.activeElement.closest(".VotingForm__option"),
                        n = t.nextElementSibling && t.nextElementSibling.$("input");
                    n && (n.focus(), n.selectionStart = n.value.length, n.selectionEnd = n.value.length)
                }
            } else if (e.keyCode === f) {
                if (1 === (0, i.$$)(".VotingForm__option").length) return;
                var a = e.target;
                a.value || setTimeout(function() {
                    var e = a.closest(".VotingForm__option"),
                        t = e.previousElementSibling;
                    if (e.outerHTML = "", w(), t) {
                        var n = t.$("input");
                        n.focus(), n.selectionStart = n.value.length, n.selectionEnd = n.value.length
                    }
                })
            }
        }

        function m() {
            v(), (0, i.$)(".VotingForm__option:last-child input").focus()
        }

        function _() {
            var e = (0, i.$)(u.bcgRadioChecked).closest(u.bcg);
            l.scrollToElem(e)
        }

        function v() {
            var e = (0, i.$)(u.options),
                t = (0, o.default)({});
            e.insertAdjacentHTML("beforeend", Wd.html(t)), b(), w()
        }

        function g(e) {
            var t = e.$control,
                n = e.checked;
            t.closest(u.form).classList.toggle(c.withExpire, n)
        }

        function y(e) {
            e.closest(u.option).outerHTML = "", b(), w()
        }

        function b() {
            Array.from((0, i.$$)('.VotingForm__option[data-created="0"] input')).forEach(function(e, t) {
                e.setAttribute("name", "answers[".concat(t, "]"))
            })
        }

        function w() {
            var e = (0, i.$)(u.form),
                t = Number(e.getAttribute("data-max-options")),
                n = (0, i.$$)(u.option).length;
            e.classList.toggle(c.maxOptions, n === t)
        }

        function k(e) {
            if ((0, i.$)(u.form)) {
                var t = (0, i.$)(u.upload),
                    n = Wd.html((0, r.default)("poll_background_id", {
                        id: "photo_".concat(e.photo_id),
                        type: "photo",
                        photo: e.src,
                        color: e.color,
                        checked: !0
                    }));
                t.insertAdjacentHTML("beforebegin", n), C()
            }
        }

        function E() {
            var e = (0, i.$)(u.upload);
            e && e.classList.add(c.uploading)
        }

        function S(e) {
            var t = (0, i.$)(u.form);
            if (t) {
                var n = t.getAttribute("data-upload-error-msg");
                C(), alert(n)
            }
        }

        function C() {
            var e = (0, i.$)(u.form);
            (0, i.$)(u.upload).outerHTML = e.getAttribute("data-upload-html")
        }
    },
    "+CUd": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("bZ/P")) && i.__esModule ? i : {
            default: i
        };

        function r() {
            var e = s(['\n    <button type="', '" class="', '" ', ">\n      ", "\n    </button>\n  "]);
            return r = function() {
                return e
            }, e
        }

        function o() {
            var e = s(['\n      <a class="', '" href=', ' target="', '" ', ">\n        ", "\n      </a>\n    "]);
            return o = function() {
                return e
            }, e
        }

        function s(e, t) {
            return t || (t = e.slice(0)), Object.freeze(Object.defineProperties(e, {
                raw: {
                    value: Object.freeze(t)
                }
            }))
        }
        var l = function(e) {
            var t = e.class ? " ".concat(e.class) : "";
            if (t = "MailButton".concat(t), "link" === e.type && e.link) {
                var n = e.link.href,
                    i = e.link.target || "_blank";
                return a.default.html(o(), t, n, i, e.onClick, e.text)
            }
            var s = e.type;
            "button" === s && "submit" === s || (s = "button");
            return a.default.html(r(), s, t, e.onClick, e.text)
        };
        t.default = l
    },
    "+YbT": function(e, t, n) {
        "use strict";
        var i = window,
            a = i.removeClass,
            r = i.addClass,
            o = i.geByClass1,
            s = {
                obj: null,
                highlight: !1,
                start: function(e) {
                    e.touches && 1 == e.touches.length && (s.clear(), s.end(e), s.obj = this || null, s.obj && (s.highlight = !0, r("hover", s.obj), r("_thover", s.obj)))
                },
                cancel: function(e) {
                    s.obj && (s.highlight = !1, s.end(e))
                },
                end: function() {
                    s.obj && (a("hover", s.obj), s.highlight && (s.clear(), r("active", s.obj)), s.obj = null, s.highlight = !1)
                },
                clear: function() {
                    a("active", o("active", "vk_wrap")), a("active", $(".Popup .active._thover"))
                }
            };
        window.thover = s
    },
    "+jUy": function(e, t, n) {
        "use strict";
        var i = r(n("+cqQ")),
            a = r(n("TYsd"));

        function r(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        var o = window,
            s = o.ge,
            l = o.each,
            c = o.geByTag,
            u = o.intval,
            d = o.gpeByClass,
            f = o.geByTag1,
            h = o.attr,
            p = o.val,
            A = o.geByClass,
            m = o.isUndefined,
            _ = o.geByClass1,
            v = o.toggle,
            g = o.isVisible,
            y = o.toggleClass,
            b = o.show,
            w = o.cancelEvent,
            k = o.ce,
            E = o.setStyle,
            S = o.parseJSON,
            C = o.replace,
            M = o.reflow,
            P = o.after,
            T = o.addClass,
            D = o.clog,
            I = o.uploadFile,
            x = o.bind,
            O = o.readFile,
            L = o.append,
            B = o.before,
            R = o.srand,
            N = o.extend,
            j = o.canUploadFile,
            F = o.gpeByTag,
            H = o.submitBtn,
            V = o.removeEvent,
            U = o.addEvent,
            z = o.clone,
            W = o.remove,
            q = o.getImageOrientation,
            G = window.ajax,
            Q = {
                isUploading: !1,
                onBeforeRemove: (0, i.default)(),
                onRemove: (0, i.default)("removeElem"),
                onStart: (0, i.default)(),
                onError: (0, i.default)("response"),
                onComplete: (0, i.default)("response"),
                _uploadData: {},
                _uploadQueue: [],
                _readerQueue: [],
                _processUploadQueue: !1,
                _processReaderQueue: !1,
                fallback: function(e, t) {
                    var n = window.post;
                    return e && n.add_attach(e, t), !1
                },
                getLastAttachId: function() {
                    if (!s("attached_wrap")) return 0;
                    var e, t = 0;
                    return l(c("input"), function() {
                        if (e = this.name.match(/^attach(\d+)_type$/i)) {
                            var n = u(e[1]);
                            t < n && (t = n)
                        }
                    }), t
                },
                refreshAttachIds: function(e) {
                    var t = s("attached_wrap");
                    if (t) {
                        var n, i = d("mr_x_wrap", e),
                            a = f("input", i),
                            r = u((a && a.name.match(/^attach(\d+)(_type)?$/i) || [])[1]);
                        if (d("mr_timer", e)) {
                            var o = h("add_post_btn", "data-value");
                            o && p("add_post_btn", o)
                        } else r && l(c("input", t), function() {
                            if (n = this.name.match(/^attach(\d+)(_type)?$/i)) {
                                var e = u(n[1]);
                                e == r ? this.disabled = !0 : e > r && (this.name = "attach" + (e - 1) + (n[2] || ""))
                            }
                        })
                    }
                },
                getAttachesCount: function() {
                    var e = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0],
                        t = 0;
                    return window.ThumbsEdit && window.ThumbsEdit.initialized && e && (t = ThumbsEdit.getThumbsCount()), t += A("mr_x_wrap", "attached_wrap").length
                },
                refreshUploadState: function(e) {
                    m(e) && (e = Q.getAttachesCount(!0));
                    var t = s("attached_wrap"),
                        n = _("mr_timer", t),
                        i = _("pi_medias", t),
                        a = s("attach_photo_btn");
                    if (v(i, e > 0 || g(n)), y("attached_wrap_empty", t, e <= 0), a) {
                        y("cp_attachBtnEl_sel", a, e > 0);
                        var r = _("inline_upload", a);
                        if (r || (r = _("inline_upload", a.parentNode)), r) {
                            var o = h(r, "data-max-attaches") || 10;
                            r.disabled = e >= o
                        }
                    }
                    b("attached_options"), b("attached_flush")
                },
                checkUploading: function(e) {
                    return !Q._processUploadQueue || w(e)
                },
                attachedPhotoTpl: function(e) {
                    var t = [{
                        id: "upload_item_".concat(e),
                        class: "medias_thumb thumb_item mr_x_wrap thumb_upload",
                        inner: [{
                            id: "upload_image_".concat(e),
                            class: "tu_img"
                        }, {
                            id: "item_progress_wrap_".concat(e),
                            class: "tu_progress_wrap",
                            inner: [{
                                id: "item_progress_".concat(e),
                                class: "tu_progress"
                            }]
                        }, {
                            id: "item_cancel_wrap_".concat(e),
                            class: "tu_cancel_wrap",
                            onclick: "return mediaUpload.reset(this, event, '".concat(e, "');"),
                            inner: [{
                                id: "item_cancel_".concat(e),
                                class: "tu_progress"
                            }]
                        }]
                    }];
                    return ceFromString(a.default.html(t))
                },
                onUploadProgress: function(e) {
                    var t = s("item_progress_" + this.id);
                    window.ThumbsEdit && ThumbsEdit.initialized ? ThumbsEdit.onUploadProgress(this.id, e.loaded / e.total * 100) : E(t, {
                        width: e.loaded / e.total * 100 + "%",
                        visibility: "visible"
                    })
                },
                onUploadComplete: function(e) {
                    var t = this,
                        n = e.target.responseText,
                        i = !1;
                    try {
                        i = S(n)
                    } catch (e) {
                        i = {
                            error: "ERR_CLIENT_BAD_RESPONSE: bad request response"
                        }
                    }
                    if (i.error) Q.onUploadError.call(t, e);
                    else {
                        var a = ThumbsEdit.initialized;
                        t.xhr = G.post(t.done_url, {
                            _ajax: 1,
                            _query: n,
                            te: u(a)
                        }, {
                            onDone: function(e) {
                                var n, i = s("item_progress_wrap_" + t.id),
                                    r = Q.getLastAttachId() + 1;
                                if (a ? (ThumbsEdit.replaceTemp(t.id, e.photo_raw, e.list || "", e.sizes), n = $('[data-media="phototemp_'.concat(t.id, '"]'))) : n = s("upload_image_" + t.id), n && e.src) var o = k("img", {
                                    id: "upload_image_" + t.id,
                                    className: "ph_img",
                                    onload: function() {
                                        if (a && (n.src = e.src, n.classList.remove("Thumb__wrap--temp"), n.setAttribute("data-media", "photo" + e.photo_raw), n.setAttribute("data-upload", t.id)), C(o, n), t.iw && t.ih) {
                                            if (t.iw > t.ih == o.width > o.height) var i = Math.min(130, Math.floor(75 / t.ih * t.iw));
                                            else i = Math.min(130, Math.floor(75 / t.iw * t.ih));
                                            E(o, "width", i)
                                        }
                                        M(o), E(o, "opacity", 1)
                                    },
                                    src: e.src
                                });
                                P(k("input", {
                                    type: "hidden",
                                    name: "attach" + r,
                                    value: e.photo_raw
                                }), n), P(k("input", {
                                    type: "hidden",
                                    name: "attach" + r + "_type",
                                    value: "photo"
                                }), n), E(i, "opacity", 0), t.attached = !0, t.delete_url = e.delete_url, Q._processUploadQueue || (Q.isUploading = !1, Q.onComplete(e))
                            }
                        }), T("tu_progress_request", "item_progress_wrap_" + t.id), t.uploaded = !0, Q.uploadQueueNext()
                    }
                },
                onUploadError: function(e) {
                    D("upload error.", e.target.responseText), Q.uploadQueueNext(), Q.onError(e.target.responseText)
                },
                uploadFile: function(e) {
                    e.xhr = I(e.upload_url, {
                        photo: e.file
                    }, {
                        onProgress: x(Q.onUploadProgress, e),
                        onComplete: x(Q.onUploadComplete, e),
                        onError: x(Q.onUploadError, e)
                    })
                },
                readFile: function(e) {
                    O(e.file, function(t) {
                        var n = s("upload_image_" + e.id);
                        if (n) var i = k("img", {
                            id: "upload_image_" + e.id,
                            className: "ph_img",
                            onload: function() {
                                C(i, n), e.iw = i.width, e.ih = i.height
                            },
                            src: t
                        });
                        Q.readerQueueNext()
                    })
                },
                addFile: function(e) {
                    var t = s("attached_wrap"),
                        n = _("pi_medias", t),
                        i = n ? A("medias_thumb", n) : [],
                        a = n ? _("medias_row", n) : null,
                        r = i[i.length - 1],
                        o = Q.attachedPhotoTpl(e.id);
                    if (t) {
                        if (!n) {
                            var l = _("AddedAttach", t);
                            n = k("div", {
                                className: "pi_medias"
                            }), L(n, l || t)
                        }
                        window.ThumbsEdit && ThumbsEdit.initialized ? O(e.file, function(t) {
                            var n = k("img");
                            n.src = t, n.onload = function() {
                                var i = n.width,
                                    a = n.height;
                                window.fakeImg = n;
                                var r = q(t);
                                t = "/images/blank.gif";
                                var o = !1;
                                r > 4 && r < 9 && (o = !0);
                                var s = ["photo", e.id, {
                                    sizes: {
                                        temp: [t, o ? a : i, o ? i : a]
                                    }
                                }, {
                                    remove: e.id
                                }];
                                ThumbsEdit.addTempPreview(s), CreatePost.checkAttaches()
                            }
                        }) : r ? P(o, r) : a ? B(o, a) : L(o, n), Q._processReaderQueue || Q.readerQueueNext()
                    }
                },
                uploadQueueNext: function() {
                    D("next upload"), Q._processUploadQueue = !0;
                    var e = Q.uploadQueueRemove();
                    if (!e) return D("empty upload"), Q._processUploadQueue = !1, void(Q.isUploading = !1);
                    Q.uploadFile(e)
                },
                readerQueueNext: function() {
                    D("next reader"), Q._processReaderQueue = !0;
                    var e = Q.readerQueueRemove();
                    if (!e) return D("empty reader"), void(Q._processReaderQueue = !1);
                    Q.readFile(e)
                },
                queueInsert: function(e) {
                    var t = R();
                    return Q.getUploadDataById(t) ? Q.queueInsert(e) : (Q._uploadData[t] = N(e, {
                        id: t
                    }), Q._uploadQueue.push(t), Q._readerQueue.push(t), Q._uploadData[t])
                },
                uploadQueueRemove: function() {
                    var e = Q._uploadQueue.shift();
                    return !!e && Q.getUploadDataById(e)
                },
                readerQueueRemove: function() {
                    var e = Q._readerQueue.shift();
                    return !!e && Q.getUploadDataById(e)
                },
                getUploadDataById: function(e) {
                    return Q._uploadData[e] || !1
                },
                delUploadDataById: function(e) {
                    delete Q._uploadData[e]
                },
                start: function(e, t) {
                    if (!e || !j()) return Q.fallback(e, t);
                    var n = e.files,
                        i = e.form || F("form", e),
                        a = H(i),
                        r = s("attach_photo_btn"),
                        o = h(e, "data-upload-url"),
                        c = h(e, "data-done-url"),
                        u = h(e, "data-max-attaches") || 10,
                        d = Q.getAttachesCount();
                    return o && c ? (l(n, function() {
                        var e = {
                            upload_url: o,
                            done_url: c,
                            file: this,
                            uploaded: !1,
                            attached: !1
                        };
                        if (d >= u) return !1;
                        Q.queueInsert(e), Q.addFile(e), d++
                    }), V(i, "submit", Q.checkUploading), U(i, "submit", Q.checkUploading), V(a, "click", Q.checkUploading), U(a, "click", Q.checkUploading), V(r, "click", Q.checkUploading), U(r, "click", Q.checkUploading), Q.refreshUploadState(d), C(z(e), e), Q._processUploadQueue || Q.uploadQueueNext(), window.isNewMail && Q.onStart(), Q.isUploading = !0, !1) : Q.fallback(e, t)
                },
                reset: function(e, t, n, i) {
                    if (w(t), window.isNewMail && Q.onBeforeRemove(e), "/" == n[0]) {
                        G.post(n, {
                            _ajax: 1
                        }), Q.refreshAttachIds(e);
                        var a = d("mr_x_wrap", e) || d("mr_timer", e);
                        i ? i() : W(a)
                    } else {
                        var r = n,
                            o = Q.getUploadDataById(r);
                        if (!o) return !1;
                        o.attached ? o.delete_url && (G.post(o.delete_url, {
                            _ajax: 1
                        }), Q.refreshAttachIds(e)) : (o.xhr && o.xhr.abort && o.xhr.abort(), o.loaded || Q.uploadQueueNext()), i ? i() : W("upload_item_" + r), Q.delUploadDataById(r)
                    }
                    return Q.refreshUploadState(), window.isNewMail && Q.onRemove(e), !1
                }
            };
        window.mediaUpload = Q
    },
    "/8IX": function(e, t) {
        function n(e, t) {
            if (!e) throw new Error(t || "AssertionError")
        }
        n.notEqual = function(e, t, i) {
            n(e != t, i)
        }, n.notOk = function(e, t) {
            n(!e, t)
        }, n.equal = function(e, t, i) {
            n(e == t, i)
        }, n.ok = n, e.exports = n
    },
    "/Id8": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), Object.defineProperty(t, "Msg__restoreInner", {
            enumerable: !0,
            get: function() {
                return i.Msg__restoreInner
            }
        }), Object.defineProperty(t, "Msg__reply", {
            enumerable: !0,
            get: function() {
                return i.Msg__reply
            }
        }), Object.defineProperty(t, "Msg__authorName", {
            enumerable: !0,
            get: function() {
                return i.Msg__authorName
            }
        }), Object.defineProperty(t, "Msg__replyAttach", {
            enumerable: !0,
            get: function() {
                return i.Msg__replyAttach
            }
        }), Object.defineProperty(t, "Msg__replyLink", {
            enumerable: !0,
            get: function() {
                return i.Msg__replyLink
            }
        }), Object.defineProperty(t, "Msg__textPreview", {
            enumerable: !0,
            get: function() {
                return i.Msg__textPreview
            }
        }), Object.defineProperty(t, "Msg__attachPreview", {
            enumerable: !0,
            get: function() {
                return i.Msg__attachPreview
            }
        }), Object.defineProperty(t, "Msg_makeReplyLink", {
            enumerable: !0,
            get: function() {
                return i.Msg_makeReplyLink
            }
        }), Object.defineProperty(t, "Msg_detailed", {
            enumerable: !0,
            get: function() {
                return i.Msg_detailed
            }
        }), t.default = void 0;
        var i = function(e) {
            if (e && e.__esModule) return e;
            var t = a();
            if (t && t.has(e)) return t.get(e);
            var n = {};
            if (null != e) {
                var i = Object.defineProperty && Object.getOwnPropertyDescriptor;
                for (var r in e)
                    if (Object.prototype.hasOwnProperty.call(e, r)) {
                        var o = i ? Object.getOwnPropertyDescriptor(e, r) : null;
                        o && (o.get || o.set) ? Object.defineProperty(n, r, o) : n[r] = e[r]
                    }
            }
            n.default = e, t && t.set(e, n);
            return n
        }(n("ti65"));

        function a() {
            if ("function" != typeof WeakMap) return null;
            var e = new WeakMap;
            return a = function() {
                return e
            }, e
        }
        n("C45x");
        var r = i.default;
        t.default = r, window.Msg = i.default
    },
    "/Rzu": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), Object.defineProperty(t, "uConvo_getLastMsgId", {
            enumerable: !0,
            get: function() {
                return i.uConvo_getLastMsgId
            }
        }), t.default = void 0;
        var i = function(e) {
            if (e && e.__esModule) return e;
            var t = a();
            if (t && t.has(e)) return t.get(e);
            var n = {};
            if (null != e) {
                var i = Object.defineProperty && Object.getOwnPropertyDescriptor;
                for (var r in e)
                    if (Object.prototype.hasOwnProperty.call(e, r)) {
                        var o = i ? Object.getOwnPropertyDescriptor(e, r) : null;
                        o && (o.get || o.set) ? Object.defineProperty(n, r, o) : n[r] = e[r]
                    }
            }
            n.default = e, t && t.set(e, n);
            return n
        }(n("YDEi"));

        function a() {
            if ("function" != typeof WeakMap) return null;
            var e = new WeakMap;
            return a = function() {
                return e
            }, e
        }
        n("BKxg");
        var r = i.default;
        t.default = r, window.uConvo = i.default
    },
    "/T2O": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i = function(e) {
            return {
                class: ["Slider", e.class || e.mix],
                inner: {
                    class: ["Slider__scroll", "_preventMenuOpen"],
                    attrs: e.attrs,
                    onwheel: ["Slider._onWheel", "event", "this"],
                    inner: {
                        class: "Slider__line",
                        inner: e.inner
                    }
                }
            }
        };
        t.default = i
    },
    "/nhM": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i = function(e) {
            return {
                tag: "a",
                attrs: {
                    "data-is-fave": e.isFave ? "fave" : ""
                },
                class: "PhotoMarketItem__fave ".concat(e.isFave ? "PhotoMarketItem__fave--added" : ""),
                onclick: ["ItemsList._toggleFave", "event", "this", e.type, e.typeInt, e.ownerId, e.itemId, e.href, e.faveHash]
            }
        };
        t.default = i
    },
    "/xuI": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.stylesObjectToString = function(e) {
            return Object.keys(e).map(function(t) {
                return "".concat(t, ":").concat(e[t], ";")
            }).join("")
        }, t.getRandomId = function(e) {
            return "".concat(e, "-").concat(Date.now(), "-").concat(Math.round(999999 * Math.random()))
        }, t.applyAnimation = function(e) {
            i.push(e), a()
        }, t.HEADER_HEIGHT = void 0;
        t.HEADER_HEIGHT = 48;
        var i = [];
        var a = debounce(function() {
            var e = i.map(function(e) {
                return $("#".concat(e))
            }).filter(function(e) {
                return e
            }).map(function(e) {
                var t = Math.round(e.getBoundingClientRect().left),
                    n = "skeleton-gradient-slide-".concat(t);
                return function(e, t) {
                    if (o[e]) return;
                    var n = function(e, t) {
                        return ["@".concat(r(), "keyframes ").concat(e, " {"), t.map(function(e, n) {
                            return ["\t".concat(n / (t.length - 1) * 100, "% {"), Object.keys(e).map(function(t) {
                                return "\t\t".concat(t, ": ").concat(e[t], ";")
                            }).join("\n"), "\t}"].join("\n")
                        }).join("\n"), "}"].join("\n")
                    }(e, t);
                    o[e] = n, s.appendChild(document.createTextNode(n))
                }(n, [{
                    "background-position-x": "".concat(-600 - t, "px")
                }, {
                    "background-position-x": "".concat(window.innerWidth - t, "px")
                }]), {
                    el: e,
                    prop: "".concat(n, " 1.2s infinite cubic-bezier(0.4, 0.0, 0.2, 1)")
                }
            });
            requestAnimationFrame(function() {
                e.forEach(function(e) {
                    var t = e.el,
                        n = e.prop;
                    t.style["".concat(r(), "animation")] = n
                }), i = []
            })
        }, 100);

        function r() {
            var e = "";
            document && (e = null != (document.documentElement || document.createElement("div")).style.animation ? "" : "-webkit-");
            return e
        }
        var o = {},
            s = document.createElement("style");
        document.head.appendChild(s)
    },
    "/zOt": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.WallBlock = s, t.default = void 0;
        var i = n("n9zS"),
            a = n("80md"),
            r = n("NJ1W"),
            o = n("/xuI");

        function s() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                t = (0, o.stylesObjectToString)({
                    opacity: e.opacity
                });
            return {
                inner: [(0, r.Row)({
                    inner: [(0, r.Col)({
                        inner: [(0, i.Circle)({
                            size: 40,
                            style: t
                        })],
                        auto: !0
                    }), (0, r.Col)({
                        inner: [(0, r.Row)({
                            inner: [(0, r.Col)({
                                inner: [(0, a.Line)({
                                    style: t
                                })],
                                grow: 3
                            }), (0, r.Col)({
                                grow: 4
                            })]
                        }), (0, r.Row)({
                            inner: [(0, r.Col)({
                                inner: [(0, a.Line)({
                                    small: !0,
                                    style: t
                                })]
                            }), (0, r.Col)({
                                grow: 3
                            })]
                        })],
                        flexColumn: !0
                    })]
                }), (0, r.Offset)(), (0, r.Row)({
                    inner: [(0, r.Col)({
                        inner: [(0, a.Line)({
                            style: t
                        })],
                        grow: 4
                    }), (0, r.Col)({
                        inner: [(0, a.Line)({
                            style: t
                        })],
                        grow: 3
                    })]
                }), (0, r.Offset)(), (0, r.Row)({
                    inner: [(0, r.Col)({
                        inner: [(0, a.Line)({
                            style: t
                        })],
                        grow: 4
                    }), (0, r.Col)({
                        grow: 1
                    })]
                }), (0, r.Offset)(), (0, r.Row)({
                    inner: [(0, r.Col)({
                        inner: [(0, a.Line)({
                            style: t
                        })],
                        grow: 4
                    }), (0, r.Col)({
                        grow: 3
                    })]
                }), (0, r.Offset)(), (0, r.Offset)(), (0, r.Row)({
                    inner: [(0, r.Col)({
                        inner: [(0, i.Circle)({
                            size: 20,
                            style: t
                        })],
                        auto: !0
                    }), (0, r.Offset)(), (0, r.Col)({
                        inner: [(0, i.Circle)({
                            size: 20,
                            style: t
                        })],
                        auto: !0
                    }), (0, r.Offset)(), (0, r.Col)({
                        inner: [(0, i.Circle)({
                            size: 20,
                            style: t
                        })],
                        auto: !0
                    }), (0, r.Col)({
                        grow: 1
                    }), (0, r.Col)({
                        inner: [(0, i.Circle)({
                            size: 20,
                            style: t
                        })],
                        auto: !0
                    })]
                })],
                class: "SkeletonWallBlock",
                tag: "div"
            }
        }
        var l = s;
        t.default = l
    },
    "03kU": function(e, t, n) {
        "use strict";
        var i = s(n("OmnB")),
            a = s(n("k9Tn")),
            r = n("sWID"),
            o = s(n("QySK"));

        function s(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        window.NodeList && !NodeList.prototype.forEach && (NodeList.prototype.forEach = Array.prototype.forEach);
        var l, c, u, d, f, h, p, A = window,
            m = A.toggleClass,
            _ = A.geByClass1,
            v = A.ajax,
            g = A.addClass,
            y = A.removeClass,
            b = A.domCreate,
            w = A.geByTag1,
            k = A.domQuery1,
            E = A.domQuery,
            S = A.gpeByClass,
            C = !1,
            M = [],
            P = [],
            T = 20,
            D = .6,
            I = {
                InProgress: 1,
                NotAvailable: 2
            },
            x = {},
            O = {};

        function L(e, t) {
            e = e.split("_");
            for (var n = 0; n < t.length; n++) {
                var i = t[n].split("_");
                if (i[0] == e[0] && i[1] == e[1]) return n
            }
            return -1
        }

        function B() {
            return document
        }

        function R() {
            return (document.scrollingElement || window.scrollNode || document.body).scrollTop
        }

        function N(e) {
            return E('.articleView__social_buttons[data-article-id="'.concat(e, '"] .articleView__footer_btn_bookmark'))
        }

        function j(e) {
            if (h != e.raw_id)
                if (h = e.raw_id, c.isWebView) ! function(e) {
                    i.default.send("articleUpdate", {
                        article: $(e),
                        isSubscribedToOwner: e.is_subscribed_to_owner
                    })
                }(e);
                else {
                    var t = _("articleView__owner"),
                        n = w("img", t);
                    t && n && (n.src = e.owner_photo);
                    var a = w("a", t);
                    t && a && (a.href = e.owner_href);
                    var r = _("articleView__ownerName"),
                        o = w("a", r);
                    r && o && (o.href = e.owner_href, o.innerHTML = e.owner_name);
                    var s = _("articleView__footer"),
                        l = _("articleView__footer_views");
                    l && (l.innerHTML = e.views_formatted);
                    var u = _("articleView__social_buttons", s);
                    s && u && u.setAttribute("data-article-id", e.raw_id);
                    var d = [k('.articleView__content_misc_block[data-article-id="'.concat(e.raw_id, '"] .articleView__footer_btn_share')), s && k(".articleView__footer_btn_share", s)];
                    each(d, function(t, n) {
                        n && (n.href = "/like?act=publish&object=article".concat(e.raw_id, "&list=").concat(e.access_hash))
                    });
                    var f = N(e.raw_id),
                        p = JSON.stringify(e.mailru_stats_data);
                    each(f, function(t, n) {
                        n && (n.setAttribute("onclick", "Article.fave(this, '".concat(e.url, "', '").concat(e.fave_hash, "', ").concat(p, ", '").concat(e.raw_id, "')")), m(n, "_active", e.is_faved))
                    });
                    var A = _("Unfold__item_name_noted");
                    A && (A.href = "/feed?section=search&q=url:https://vk.com".concat(e.url));
                    var v = _("Unfold__item_name_report");
                    v && (v.href = "/reports?act=add&object=article".concat(e.raw_id, "_").concat(e.access_hash, "&refrom=feed"))
                }
        }

        function F(e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
            e.has_more || (M = M.concat(e.audios_list));
            var n = new o.default(e, {
                notFull: !!c.preloadMoreHash,
                isWebView: c.isWebView,
                mobile: !0,
                width: c.width,
                getScrollTop: R,
                getScrollNode: B,
                trackCode: c.trackCode,
                onScroll: function(t) {
                    if (!e.has_more) {
                        var n = P[P.length - 1],
                            i = S("articleView__content", n.getEl());
                        t > D && e.next_article_url && (P.length < T && (V(e.next_article_url), g(i, "articleView_waitNextArticle")), function() {
                            var e = P[P.length - 1];
                            if (e) {
                                var t = S("articleView__content", e.getEl()),
                                    n = _("articleView__social_buttons", t);
                                n && show(n)
                            }
                        }()), t > .99 && e.next_article_url && P.length < T && V(e.next_article_url, function(e, t) {
                            if (e) {
                                for (var n = 0; n < P.length; n++)
                                    if (P[n].getArticle().raw_id == t.raw_id) return;
                                p || (p = setTimeout(function() {
                                    var n = b(e);
                                    f.appendChild(n), y(i, "articleView_waitNextArticle"), g(n, "articleView_nextPrepared"), requestAnimationFrame(function() {
                                        y(n, "articleView_nextPrepared")
                                    }), F(t), p = null
                                }, 400))
                            }
                        }), this.getScreenVisibilityRatio() > .5 && j(e)
                    }
                },
                onImageOpen: function(e, t, n) {
                    if (c.isWebView) {
                        for (var a = [], r = 0; r < e.length; r++) {
                            var o = e[r],
                                s = [];
                            for (var l in o) o.hasOwnProperty(l) && s.push({
                                type: l,
                                src: o[l][0],
                                width: o[l][1],
                                height: o[l][2]
                            });
                            a.push(s)
                        }
                        i.default.send("articlePhotoView", {
                            photos: a,
                            index: n
                        })
                    }
                }
            });
            t || n.ready(), P.push(n), H(e), each(geByTag("video"), function(e, t) {
                domData(t, "auto-pause-inited") || (domData(t, "auto-pause-inited", 1), t.addEventListener("play", function() {
                    each(geByTag("video"), function(e, n) {
                        n != t && n.pause()
                    })
                }))
            }), c.isWebView && each(geByTag("figure", n._els.view), function(e, t) {
                var i = intval(domData(t, "type"));
                n._onObjectView(!1, i, t) && domData(t, "done", 1)
            })
        }

        function H(e) {
            var t = S("articleView__content", ge("article_view_".concat(e.raw_id))),
                n = _("articleView__ads_block", t);
            a.default.init(e, n, c)
        }

        function V(e, t) {
            var n = O[e];
            n !== I.NotAvailable ? isArray(n) ? t && t(n[0], n[1]) : (x[e] = x[e] || [], t && x[e].push(t), n != I.InProgress && (O[e] = I.InProgress, v.post("article.php", {
                act: "view",
                url: e,
                scroll_load: 1,
                wall_owner_id: c.wallOwnerId,
                audio_bridge: intval(c.audioBridge),
                can_infinite_scroll: intval(c.canInfiniteScroll),
                web_view: c.isWebView,
                context: c.context,
                ref: "scroll",
                v: c.clientVersion
            }, {
                onDone: function(t, n) {
                    for (var i = x[e], a = 0; a < i.length; a++) i[a](t, n);
                    O[e] = [t, n]
                }
            }))) : t && t()
        }

        function U(e, t) {
            var n = N(e);
            each(n, function(e, n) {
                m(n, "_active", t)
            })
        }

        function z() {
            var e = (0, r.getUrlParam)("anchor");
            e && function() {
                var t = document.getElementById(e);
                if (t) {
                    "scrollRestoration" in history && (history.scrollRestoration = "manual");
                    var n = c.isWebView ? 0 : 25,
                        i = t.parentNode.parentNode.offsetTop - n;
                    window.setTimeout(function() {
                        var e;
                        e = i, (document.scrollingElement || window.scrollNode || document.body).scrollTop = e
                    }, 0)
                }
            }()
        }

        function W() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
            if (C) z();
            else {
                c.deviceInfo = e.deviceInfo;
                var t = P[0],
                    n = t.getArticle();
                t.ready(), n.has_more ? v.post("article.php", {
                    act: "load_more",
                    rev: n.rev,
                    hash: n.has_more_hash,
                    article_owner_id: n.owner_id,
                    article_id: n.id,
                    audio_bridge: intval(c.audioBridge),
                    no_lazy_images: intval(c.noLazyImages),
                    can_infinite_scroll: intval(c.canInfiniteScroll),
                    wall_owner_id: c.wallOwnerId,
                    context: c.context,
                    client_version: c.clientVersion
                }, {
                    onFail: function() {
                        c.failTries > 0 && (c.failTries--, setTimeout(function() {
                            W(e)
                        }, 2e3))
                    },
                    onDone: function(e, i) {
                        C = !0, n.audios_list = i.audios_list, n.next_article_url = i.next_article_url, n.has_more = !1, n.audios_list && n.audios_list.length && (M = M.concat(n.audios_list));
                        var a = b(e),
                            o = _("article_view", a),
                            s = _("article_view");
                        "figure" !== s.lastElementChild.tagName.toLowerCase() && s.lastChild.remove();
                        for (var l = s.children.length, c = o.children; l < c.length;) s.appendChild(c[l]);
                        var u = _("article_preload_spinner");
                        u && u.parentNode.removeChild(u);
                        var d = _("articleView__content_misc_block", a);
                        s.parentNode.appendChild(d),
                            function() {
                                for (var e = _("article").children, t = 0; t < e.length; t++) {
                                    var n = t > 0 && e[t - 1],
                                        i = e[t],
                                        a = t + 1 < e.length && e[t + 1],
                                        o = n ? "".concat(n.tagName, "_").concat(domData(n, "type")) : "",
                                        s = i ? "".concat(i.tagName, "_").concat(domData(i, "type")) : "",
                                        l = a ? "".concat(a.tagName, "_").concat(domData(a, "type")) : "",
                                        c = !1,
                                        u = !1,
                                        d = !1;
                                    o && s == o || (c = !0), l && s == l || (u = !0), (r.ResizableObjectTypes.includes(+l.type) || l.sep) && (d = !0), m(i, "article_decoration_first", c), m(i, "article_decoration_last", u), m(i, "article_decoration_before", d)
                                }
                            }(), H(n), z(), t.update()
                    }
                }) : v.post("article.php", {
                    act: "next_url",
                    access_hash: n.access_hash,
                    article_owner_id: n.owner_id,
                    article_id: n.id,
                    wall_owner_id: c.wallOwnerId,
                    context: c.context
                }, {
                    onDone: function(e) {
                        e && (n.next_article_url = e, t.update())
                    }
                });
                var i = t.getEl();
                e.paddingTop && setStyle(i, "marginTop", intval(e.paddingTop)), e.paddingBottom && setStyle(i, "marginBottom", intval(e.paddingBottom)), e.noDarkModeTransition && g(i, "article_dark_no_transition")
            }
        }

        function q(e) {
            var t = null;
            return each(P, function(n, i) {
                var a = i.getArticle();
                if (a.raw_id == e) return t = a, !1
            }), t
        }

        function $(e) {
            var t = "https://" + c.devHost + "vk.com" + e.url,
                n = {
                    id: e.id,
                    owner_id: e.owner_id,
                    owner_name: e.owner_name,
                    state: "available",
                    can_report: e.can_report,
                    title: e.title,
                    subtitle: "",
                    views: e.views,
                    shares: e.shares,
                    is_favorite: e.is_faved,
                    url: t,
                    view_url: t,
                    access_key: e.access_hash,
                    published_date: e.published_date
                };
            return e.owner_photo && 0 != e.owner_photo.indexOf("/images/") && (n.owner_photo = e.owner_photo), n
        }

        function G(e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "",
                n = P[P.length - 1];
            if (t)
                for (var i = 0; i < P.length; i++)
                    if (P[i]._article.raw_id === t) {
                        n = P[i];
                        break
                    }
            n.sendStats({
                type: e
            })
        }
        window.ArticleView = o.default, window.Article = {
            init: function(e, t) {
                if ((c = t).mobile = !0, c.failTries = 50, window.cur && (window.cur.lang = window.cur.lang || {}, extend(window.cur.lang, t.lang || {})), f = _("articleView__content_list"), !c.isWebView) {
                    var n, a = R(),
                        o = _("articleView__header"),
                        s = _("articleView__footer"),
                        l = _("articleView__layout");
                    B().addEventListener("scroll", n = function() {
                        var e = l.clientHeight,
                            t = Math.max(0, R()),
                            n = t - a > 0,
                            i = t + window.innerHeight + 20 > e;
                        m(o, "articleView__header--narrow", n), s && m(s, "articleView__footer--hidden", !i && n), a = t
                    }, {
                        passive: !0
                    });
                    var h = _("articleView__close"),
                        p = _("articleView__close_mini");
                    h.addEventListener("click", G.bind(window, r.ArticleStatsEvents.close)), p.addEventListener("click", G.bind(window, r.ArticleStatsEvents.close)), window.cur && cur.destroy.push(function() {
                        document.removeEventListener("scroll", n), y(document.body, "article_body_with_transition")
                    }), c.isStandalone && (window.al = !1)
                }
                if (c.preloadMoreHash || show(_("article_layer_prev_next")), c.isWebView) {
                    var A = _("article");
                    g(A, "article_webview")
                }
                c.isWebView && c.audioBridge && (window.audioplayer = {
                    playPause: function(e, t) {
                        var n = S("audio_item", e.target);
                        if (u && u != n && (y(u, "ai_playing"), u = !1), d && (y(d, "article_object_audioplaylist_playing"), d = !1), hasClass(n, "ai_playing")) i.default.send("audioPause", {}), y(n, "ai_playing");
                        else {
                            var a = L(t, M),
                                r = M; - 1 == a && (r.unshift(t), a = 0), i.default.send("audioPlay", {
                                audioIds: r,
                                pos: a
                            }), g(n, "ai_playing"), u = n
                        }
                    }
                }), c.isWebView ? (i.default.send("articleReady"), window.addEventListener("VKWebAppEvent", function(e) {
                    var t = e.detail || {};
                    switch (t.type) {
                        case "articleOwnerSubscribed":
                            var n = t.ownerId,
                                i = t.isSubscribed;
                            each(P, function(e, t) {
                                var a = t.getArticle();
                                if (a.owner_id == n) return a.is_subscribed_to_owner = i, !1
                            });
                            break;
                        case "articleBookmarked":
                            var a = t.articleOwnerId + "_" + t.articleId,
                                o = q(a);
                            o && (o.is_faved = t.isBookmarked);
                            var s = N(a);
                            each(s, function(e, n) {
                                m(n, "_active", !!t.isBookmarked)
                            });
                            break;
                        case "articleWebViewShow":
                            W(t);
                            break;
                        case "articleWebViewClose":
                            G(r.ArticleStatsEvents.close);
                            break;
                        case "didShareArticle":
                            var l = t.articleRawId,
                                c = t.shareType;
                            if (!c) break;
                            G(c, l);
                            break;
                        case "articleMentionClick":
                            var u = t.articleRawId;
                            G(r.ArticleStatsEvents.clickOnMentions, u)
                    }
                }), F(e, !0)) : F(e, !1)
            },
            fave: function(e, t, n, a, o) {
                var s = !hasClass(e, "_active");
                v.post("article.php", {
                    act: "fave",
                    url: t,
                    add: intval(s),
                    hash: n
                }), P.forEach(function(e) {
                    var n = e.getArticle();
                    n.url == t && (n.is_faved = s)
                }), (0, r.mailruStatsPixel)(s ? "fave" : "unfave", a), U(o, s), c.isWebView ? function(e) {
                    var t = q(e);
                    t && (JSON.stringify({
                        article: $(t)
                    }), i.default.send("articleBookmarked", {
                        article: $(t)
                    }))
                }(o) : Share && Share.setBookmarkState(o, s)
            },
            toggleButton: U,
            share: function(e, t, n) {
                return function(e) {
                    var t = q(e),
                        n = c.clientVersion;
                    if (t)
                        if (n) {
                            var a = {
                                type: "article",
                                data: $(t)
                            };
                            i.default.send("share", a)
                        } else {
                            var r = {
                                article: $(t)
                            };
                            i.default.send("articleShare", r)
                        }
                }(t), !1
            },
            subscribe: function(e, t, n) {
                v.post("article.php", {
                    act: "subscribe",
                    owner_id: t,
                    hash: n
                }, {
                    onDone: function(t, n) {
                        m(e, "articleView__subscribed", t), e.innerHTML = n
                    }
                })
            },
            toggleDarkMode: function(e) {
                l || (l = setTimeout(function() {
                    var t = _("articleView__layout");
                    m(t, "article_dark", e), m(document.body, "article_dark", e);
                    var n = intval(hasClass(t, "article_dark"));
                    l = !1, void 0 !== e || c.isWebView || v.post("article.php", {
                        act: "set_dark_mode",
                        dark: n
                    });
                    var i = _("articleMenu");
                    i && Unfold.setTitle(i, "dark_mode", n ? getLang("mobile_articles_menu_dark_disable") : getLang("mobile_articles_menu_dark")), G(n ? r.ArticleStatsEvents.nightModeOn : r.ArticleStatsEvents.nightModeOff)
                }, e ? 0 : 10))
            },
            onWebViewShow: W,
            sendStats: G,
            audioPlayPlaylist: function(e, t, n) {
                var a = S("article_object_audioplaylist_webview", e);
                if (u && (y(u, "ai_playing"), u = !1), d) {
                    var r = d;
                    if (y(r, "article_object_audioplaylist_playing"), d = !1, r == a) return i.default.send("audioPause", {}), cancelEvent(n)
                }
                var o = L(t, M),
                    s = M;
                return -1 == o && (s.unshift(t), o = 0), i.default.send("audioPlay", {
                    audioIds: s,
                    pos: o
                }), g(a, "article_object_audioplaylist_playing"), d = a, cancelEvent(n)
            },
            onAudioStateChanged: function(e, t) {
                u && (y(u, "ai_playing"), u = !1), d && (y(d, "article_object_audioplaylist_playing"), d = !1), e = (e = e.split("_"))[0] + "_" + e[1];
                var n = ge("audio".concat(e));
                n && m(n, "ai_playing", "play" == t);
                for (var i = geByClass("_article_object_audioplaylist_webview"), a = 0; a < i.length; a++) {
                    if ((domData(i[a], "ids") || "").split(",").indexOf(e) >= 0 && "play" == t) {
                        g(i[a], "article_object_audioplaylist_playing"), d = i[a];
                        break
                    }
                }
            }
        }
    },
    "0Ezr": function(e, t, n) {
        "use strict";
        n("+4eP")
    },
    "0ONw": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.Story = s, t.default = void 0;
        var i = n("NJ1W"),
            a = n("n9zS"),
            r = n("80md"),
            o = n("/xuI");

        function s() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                t = (0, o.stylesObjectToString)({
                    opacity: e.opacity
                });
            return {
                inner: [(0, a.Circle)({
                    class: "SkeletonStory__avatar",
                    size: 56,
                    style: t
                }), (0, i.Offset)({
                    small: !0
                }), (0, i.Row)({
                    inner: [(0, i.Offset)({
                        small: !0
                    }), (0, i.Col)({
                        inner: [(0, r.Line)({
                            small: !0,
                            style: t
                        })]
                    }), (0, i.Offset)({
                        small: !0
                    })]
                })],
                class: "SkeletonStory",
                tag: "div"
            }
        }
        var l = s;
        t.default = l
    },
    "0Zid": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i = function(e, t) {
            cancelEvent(e);
            var n = t.getAttribute("href"),
                i = getLang("mobile_wall_prometheus_edit_warn");
            Confirm(i, 'Popup.close(this); nav.go("'.concat(n, '");'), "", {
                title: getLang("mobile_prometheus_edit_warn_popup_title")
            })
        };
        t.default = i
    },
    "0bdD": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.RestrictionSplash = void 0;
        var i = o(n("Po+v")),
            a = o(n("WDxS")),
            r = n("OcsD");

        function o(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }

        function s(e, t) {
            for (var n = 0; n < t.length; n++) {
                var i = t[n];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        }

        function l(e, t, n) {
            return t && s(e.prototype, t), n && s(e, n), e
        }
        var c = function() {
            function e() {
                ! function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, e), this.initPopup(), this.popup && (this.connectEvents(), this.initSlider(), e.sendStat("show_screen"))
            }
            return l(e, null, [{
                key: "sendStat",
                value: function(e) {
                    (0, r.statlogsValueEvent)("audio_onboarding", e)
                }
            }]), l(e, [{
                key: "initPopup",
                value: function() {
                    var e = document.querySelector(".audioRestrictionSplash");
                    e && (this.popup = i.default.open(e, !0, {
                        forceScrollDisable: !0
                    }))
                }
            }, {
                key: "connectEvents",
                value: function() {
                    var t = this;
                    this.popup.querySelectorAll(".audioRestrictionSplash__closeIcon").forEach(function(n) {
                        n.addEventListener("click", function(n) {
                            gpeByClass("audioRestrictionSplash__firstScreen", n.target) ? e.sendStat("skip_1screen") : gpeByClass("audioRestrictionSplash__secondScreen", n.target) && e.sendStat("skip_2screen"), t.close()
                        })
                    }), this.popup.querySelector(".audioRestrictionSplash__explain").addEventListener("click", function() {
                        return e.sendStat("click_more")
                    }), this.popup.querySelector(".audioRestrictionSplash__continueFreeLink").addEventListener("click", function() {
                        e.sendStat("continue_free"), t.close()
                    }), this.popup.querySelector(".audioRestrictionSplash__continueButton").addEventListener("click", function() {
                        t.slider.next(), e.sendStat("next_1screen")
                    }), this.popup.querySelector(".audioRestrictionSplash__specialLink").addEventListener("click", function() {
                        return e.sendStat("get_offer")
                    })
                }
            }, {
                key: "initSlider",
                value: function() {
                    this.screens = this.popup.querySelector(".audioRestrictionSplash__screens"), this.slider = (0, a.default)(this.screens, {
                        dots: !0,
                        speed: 500
                    })
                }
            }, {
                key: "close",
                value: function() {
                    i.default.close(this.popup)
                }
            }]), e
        }();
        t.RestrictionSplash = c
    },
    "14By": function(e, t, n) {
        "use strict";
        var i;
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var a = ((i = n("5oy5")) && i.__esModule ? i : {
            default: i
        }).default;
        t.default = a
    },
    "1BRX": function(e, t, n) {
        "use strict";

        function i(e) {
            var t = new Date;
            return e.getFullYear() === t.getFullYear() && e.getMonth() === t.getMonth() && e.getDate() === t.getDate()
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.isToday = i, t.isYesterday = function(e) {
            return i(new Date(e.getTime() + 864e5))
        }, t.isTomorrow = function(e) {
            return i(new Date(e.getTime() - 864e5))
        }, t.isSameDate = function(e, t) {
            var n = new Date(e),
                i = new Date(t);
            return n.getFullYear() === i.getFullYear() && n.getMonth() === i.getMonth() && n.getDate() === i.getDate()
        }, t.leadingZero = function(e) {
            return e >= 10 ? e : "0" + e
        }, t.formatTime = function(e, t) {
            var n;
            e = Math.max(e, 0);
            var i = Math.floor(e % 60);
            n = i < 10 ? "0" + i : i;
            var a = (e = Math.floor(e / 60)) % 60;
            n = a + ":" + n, ((e = Math.floor(e / 60)) > 0 || t) && (a < 10 && (n = "0" + n), n = e + ":" + n);
            return n
        }, t.getServerTime = function() {
            return vk.ts + Math.floor(((new Date).getTime() - vk.started) / 1e3)
        }
    },
    "1HYu": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i = n("fdw3");
        var a = function() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "common",
                t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "";
            (0, i.isObject)(e) && (t = e.name ? e.name : "", e = e.sprite ? e.sprite : "");
            var n = e.split("/").join("-");
            return {
                class: "svgIcon svgIcon-".concat(n, " svgIcon-").concat(n, "__").concat(t),
                tag: "div"
            }
        };
        t.default = a
    },
    "1IPy": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("J/W8")) && i.__esModule ? i : {
            default: i
        };
        var r = a.default;
        t.default = r, window.VotingBcg = a.default
    },
    "1Qy5": function(e, t, n) {
        "use strict";
        n("l57W")
    },
    "1V+M": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.wrapAudioPlay = function(e, t) {
            var n = e.play();
            n && n.catch && n.catch(function(e) {
                (0, i.isFunction)(t) && t(e)
            })
        };
        var i = n("t7n3")
    },
    "1dTo": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.MvkPlayerAdapter = void 0;
        var i = n("XLUH");

        function a(e) {
            return (a = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function r(e, t) {
            return function(e) {
                if (Array.isArray(e)) return e
            }(e) || function(e, t) {
                if (!(Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e))) return;
                var n = [],
                    i = !0,
                    a = !1,
                    r = void 0;
                try {
                    for (var o, s = e[Symbol.iterator](); !(i = (o = s.next()).done) && (n.push(o.value), !t || n.length !== t); i = !0);
                } catch (e) {
                    a = !0, r = e
                } finally {
                    try {
                        i || null == s.return || s.return()
                    } finally {
                        if (a) throw r
                    }
                }
                return n
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance")
            }()
        }

        function o(e, t) {
            for (var n = 0; n < t.length; n++) {
                var i = t[n];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        }

        function s(e, t) {
            return !t || "object" !== a(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function l(e, t, n) {
            return (l = "undefined" != typeof Reflect && Reflect.get ? Reflect.get : function(e, t, n) {
                var i = function(e, t) {
                    for (; !Object.prototype.hasOwnProperty.call(e, t) && null !== (e = c(e)););
                    return e
                }(e, t);
                if (i) {
                    var a = Object.getOwnPropertyDescriptor(i, t);
                    return a.get ? a.get.call(n) : a.value
                }
            })(e, t, n || e)
        }

        function c(e) {
            return (c = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function u(e, t) {
            return (u = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var d = window,
            f = d.ge,
            h = d.isFunction,
            p = d.audio,
            A = d.lsGet,
            m = function(e) {
                function t() {
                    return function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, t), s(this, c(t).apply(this, arguments))
                }
                var n, a, d;
                return function(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && u(e, t)
                }(t, i.AudioStatsPlayerAdapter), n = t, (a = [{
                    key: "playerListen",
                    value: function(e, t) {
                        h(this.player[e]) && this.player[e](t)
                    }
                }, {
                    key: "playerUnListen",
                    value: function(e, t) {
                        h(this.player[e]) && this.player[e]("__clear", t)
                    }
                }, {
                    key: "listenPlay",
                    value: function(e, t) {
                        var n = this;
                        this.listen("onPlay", function() {
                            n.updateContext();
                            for (var i = arguments.length, a = new Array(i), r = 0; r < i; r++) a[r] = arguments[r];
                            e.apply(t, a)
                        }, t)
                    }
                }, {
                    key: "listenPause",
                    value: function(e, t) {
                        this.listen("onPause", e, t)
                    }
                }, {
                    key: "listenProgress",
                    value: function(e, t) {
                        this.listen("onProgress", e, t)
                    }
                }, {
                    key: "listenVolume",
                    value: function(e, t) {
                        this.listen("onVolume", e, t)
                    }
                }, {
                    key: "listenSeek",
                    value: function(e, t) {
                        this.listen("onSeek", e, t)
                    }
                }, {
                    key: "listenPlaylistChanged",
                    value: function(e, t) {
                        this.listen("onPlaylistChanged", e, t)
                    }
                }, {
                    key: "listenEnded",
                    value: function(e, t) {
                        this.listen("onEnded", e, t)
                    }
                }, {
                    key: "listenPlayNext",
                    value: function(e, t) {
                        this.listen("onPlayNext", e, t)
                    }
                }, {
                    key: "listenAdCompleted",
                    value: function(e, t) {
                        this.listen("adCompleted", e, t)
                    }
                }, {
                    key: "useNewStats",
                    value: function() {
                        return this.player.useNewStats()
                    }
                }, {
                    key: "getPausedBy",
                    value: function(e) {
                        return f("StoriesView") ? "stories" : null
                    }
                }, {
                    key: "getState",
                    value: function() {
                        var e = l(c(t.prototype), "getState", this).call(this),
                            n = this.getAudioId();
                        return n && f("audio" + n) ? i.FULL_SCREEN_STATE : e
                    }
                }, {
                    key: "getProgress",
                    value: function() {
                        var e = p.getCurrent();
                        return e ? p.getPosition() / e.duration * 100 : 0
                    }
                }, {
                    key: "getProgressInSeconds",
                    value: function() {
                        return Math.round(p.getPosition())
                    }
                }, {
                    key: "getVolume",
                    value: function() {
                        return Math.round(100 * p.volume())
                    }
                }, {
                    key: "getAudioId",
                    value: function() {
                        return p.getCurrentId()
                    }
                }, {
                    key: "getAudioTrackCode",
                    value: function() {
                        try {
                            return document.querySelector("[data-id='" + p.getCurrent().id + "']").getAttribute("data-track-code")
                        } catch (e) {
                            return !1
                        }
                    }
                }, {
                    key: "getPrevAudioId",
                    value: function() {
                        var e = this.getAudioId(),
                            t = this.player.getPlaybackQueue();
                        if (e) {
                            var n = t.lastIndexOf(e);
                            if (-1 !== n) return t[n - 1]
                        }
                    }
                }, {
                    key: "getPlaylistIdFromAudioId",
                    value: function(e) {
                        if (e && isString(e)) {
                            var t = r(e.split("_"), 4),
                                n = t[0],
                                i = t[1],
                                a = t[2],
                                o = t[3];
                            return n && i && a && 0 === a.indexOf("playlist") ? a.replace("playlist", "") + "_" + o : void 0
                        }
                    }
                }, {
                    key: "getPlaylistTypeFromAudioId",
                    value: function(e) {
                        if (e && isString(e)) {
                            var t = r(e.split("_"), 4),
                                n = t[0],
                                i = t[1],
                                a = t[2],
                                o = t[3];
                            return n && i ? a && 0 === a.indexOf("playlist") ? a.replace("playlist", "") + "_" + o : a : void 0
                        }
                    }
                }, {
                    key: "getPrevPlaylistId",
                    value: function() {
                        return this.getPlaylistIdFromAudioId(this.getPrevAudioId())
                    }
                }, {
                    key: "getPlaylistId",
                    value: function() {
                        return this.getPlaylistIdFromAudioId(this.getAudioId())
                    }
                }, {
                    key: "updateContext",
                    value: function() {
                        var e = this.getPlaylistTypeFromAudioId(this.getAudioId());
                        if (e) {
                            var t = this.getContextByType(e);
                            "other" === t && nav.getQuery("from") ? this.context = this.getContextByType(nav.getQuery("from")) : this.context = t
                        } else this.context = "other"
                    }
                }, {
                    key: "getContextByType",
                    value: function() {
                        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "";
                        if (0 === e.indexOf("recoms")) return nav.getQuery("q") ? "search" : "recs";
                        if (0 === e.indexOf("audios")) {
                            var t = intval(e.replace("audios", ""));
                            return t === vk.id ? "my" : t < 0 ? "group_list" : "user_list"
                        }
                        return 0 === e.indexOf("popular") ? "recs_audio" : 0 === e.indexOf("search") ? "search" : 0 === e.indexOf("wall") ? "group_list" : 0 === e.indexOf("mail") ? "im" : 0 === e.indexOf("feed") ? "feed" : "other"
                    }
                }, {
                    key: "getContext",
                    value: function() {
                        return this.context || "other"
                    }
                }, {
                    key: "getSequence",
                    value: function() {
                        return 0
                    }
                }, {
                    key: "getListenedTime",
                    value: function() {
                        var e = Math.round(p.played());
                        return isNaN(e) ? 0 : e || 0
                    }
                }, {
                    key: "getSearchParams",
                    value: function() {
                        return null
                    }
                }, {
                    key: "getType",
                    value: function() {
                        return "html5"
                    }
                }, {
                    key: "isPlaying",
                    value: function() {
                        return p.playing()
                    }
                }, {
                    key: "isAutoPlayed",
                    value: function() {
                        return this.player.isAutoPlayed()
                    }
                }, {
                    key: "isRepeatCurrentAudio",
                    value: function() {
                        return !1
                    }
                }, {
                    key: "isRepeatAll",
                    value: function() {
                        return !1
                    }
                }, {
                    key: "isShuffledPlaylist",
                    value: function() {
                        return !1
                    }
                }, {
                    key: "isPodcast",
                    value: function() {
                        return !1
                    }
                }, {
                    key: "isAdPlaying",
                    value: function() {
                        return !1
                    }
                }, {
                    key: "isRealPlaylist",
                    value: function() {
                        return !0
                    }
                }, {
                    key: "isRealPrevPlaylist",
                    value: function() {
                        return !0
                    }
                }, {
                    key: "isLastTrack",
                    value: function() {
                        var e = p.getCurrent(),
                            t = p.playlist();
                        return !(!e || (!e || t && t.length) && t.indexOf(e) + 1 !== t.length)
                    }
                }, {
                    key: "hasPrevPlaylist",
                    value: function() {
                        return !1
                    }
                }, {
                    key: "hasPlaylist",
                    value: function() {
                        var e = p.playlist();
                        return Boolean(e && e.length > 1)
                    }
                }, {
                    key: "hasPrevAudio",
                    value: function() {
                        var e = this.getAudioId(),
                            t = this.player.getPlaybackQueue();
                        return Boolean(e && t.length > 1)
                    }
                }, {
                    key: "hasSearchParams",
                    value: function() {
                        return !1
                    }
                }, {
                    key: "isDebug",
                    value: function() {
                        return Boolean(A("audio_stats_debug"))
                    }
                }, {
                    key: "sendListenedData",
                    value: function(e) {
                        var t = nav.getQuery("from");
                        ajax.post("/audio", {
                            _ajax: 1,
                            act: "playback",
                            audio: e.audio_id,
                            track_code: e.track_code,
                            prev: e.prev_audio_id,
                            hash: this.player.getAddHash(),
                            state: e.state,
                            from_block: t,
                            listened: e.listened,
                            end_stream_reason: e.end_stream_reason,
                            auto: e.auto
                        })
                    }
                }]) && o(n.prototype, a), d && o(n, d), t
            }();
        t.MvkPlayerAdapter = m
    },
    "21le": function(e, t, n) {
        "use strict";
        var i, a = (i = n("RkGL")) && i.__esModule ? i : {
            default: i
        };
        var r = window,
            o = r.gpeByClass,
            s = r.setStyle,
            l = "-webkit-tap-highlight-color";
        a.default._onMouseDown(function(e) {
            for (var t = e; !(!(t = o("msg_item", t)) || t && attr(t, "data-id")););
            t && (! function(e) {
                s(e, l, "transparent")
            }(t), setTimeout(function() {
                return function(e) {
                    s(e, l, "initial")
                }(t)
            }, 400))
        })
    },
    "29dZ": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i = r(n("UvyM")),
            a = r(n("myok"));

        function r(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        Object.assign(i.default, a.default), window.Btn = i.default;
        var o = i.default;
        t.default = o
    },
    "2IoG": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("bZ/P")) && i.__esModule ? i : {
            default: i
        };

        function r() {
            var e = function(e, t) {
                t || (t = e.slice(0));
                return Object.freeze(Object.defineProperties(e, {
                    raw: {
                        value: Object.freeze(t)
                    }
                }))
            }(["\n    <", ' class="', '" ', " ", ">\n      ", "\n    </", ">\n  "]);
            return r = function() {
                return e
            }, e
        }
        var o = function() {
            var e, t, n = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                i = a.default.list(n.inner);
            n.url ? (e = "a", t = a.default.attr("href", n.url)) : (e = n.tag || "div", t = "");
            return a.default.html(r(), e, n.mix, t, n.attrs, i, e)
        };
        t.default = o
    },
    "2W9W": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.isIPadOS = function() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : window.browser;
            if (e.mac && !e.iphone && !e.ipad && !e.ipod && navigator.maxTouchPoints > 1) return !0;
            return !1
        }
    },
    "2eJH": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("7qNY")) && i.__esModule ? i : {
            default: i
        };
        var r = a.default;
        t.default = r, window.MessageRequestBox = a.default
    },
    "2fRN": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("Y6JH")) && i.__esModule ? i : {
            default: i
        };
        var r = function(e) {
            var t = e.y < .5,
                n = 100 * e.x,
                i = 100 * e.y;
            return {
                class: "Photo__marketTag",
                attrs: {
                    "data-url": e.url,
                    style: "left: ".concat(n, "%; top: ").concat(i, "%")
                },
                inner: [{
                    class: "Photo__marketTagInner ".concat(t ? "Photo__marketTagInner--down" : ""),
                    inner: [{
                        class: "Photo__marketTagTitle",
                        inner: e.title
                    }, {
                        class: "Photo__marketTagPrice",
                        inner: Wd.wrap(e.price)
                    }, {
                        class: "Photo__marketTagIcon",
                        inner: (0, a.default)("market", "goto_arrow_black")
                    }]
                }, {
                    class: "Photo__marketTagArrow ".concat(t ? "Photo__marketTagArrow--down" : "")
                }]
            }
        };
        t.default = r
    },
    "3+oY": function(e, t, n) {
        "use strict";
        var i, a = (i = n("TYsd")) && i.__esModule ? i : {
            default: i
        };
        window.Select = {}, Select._onChange = o;
        var r = {
            optionByValue: function(e) {
                return '.Select__option[value="'.concat(e, '"]')
            }
        };

        function o(e, t) {
            var n = e.value,
                i = e.$(r.optionByValue(n));
            a.default.handle(t, {
                $select: e,
                $option: i,
                value: n,
                name: e.name,
                label: i.textContent
            })
        }
    },
    "3Gnz": function(e, t, n) {
        "use strict";
        var i = n("UxAg"),
            a = (0, n("OcsD").need)("Btn");
        window.PrivacyPolicy = {}, PrivacyPolicy._onAcceptToggle = o;
        var r = {
            submit: ".PrivacyPolicy__submit"
        };

        function o(e) {
            var t = e.checked,
                n = (0, i.$)(r.submit);
            a.setDisabled(n, !t)
        }
    },
    "3JOE": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i = r(n("bZ/P")),
            a = r(n("Mc5h"));

        function r(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        var o = function(e) {
            return (0, a.default)({
                mix: i.default.class(e.mix, "ScrollView"),
                attrs: e.attrs,
                inner: e.inner
            })
        };
        t.default = o
    },
    "3KRu": function(e, t, n) {
        "use strict";
        var i = n("sOYs"),
            a = n("i/qW"),
            r = null;

        function o(e) {
            for (var t = geByClass("audio-msg-track--wave-wrapper", e), n = 0, i = 0; i < t.length; i++) {
                try {
                    n = parseInt(window.getComputedStyle(t[i], null).getPropertyValue("width"))
                } catch (e) {
                    n = parseInt(t[i].currentStyle.width)
                }
                if (n > 0) break
            }
            return n
        }

        function s(e, t) {
            t = Math.round(t), e.length != t && (e = (0, a.fastResample)(e, t));
            for (var n = "", i = 0, r = 0; r < e.length; r++) 0 == (i = Math.floor(10 * e[r] * .95)) && (i = .5), n += "M" + (3 * r + 1) + "," + (10 - i) + "v" + 2 * i + "Z";
            return '<svg class="audio-msg-track--wave" width="'.concat(3 * e.length, 'px"><path d="').concat(n, '"></path></svg>')
        }

        function l() {
            for (var e = geByClass("audio-msg-track"), t = 0; t < e.length; t++) {
                var n = attr(e[t], "data-wave");
                hasClass(e[t], "audio-msg-player") && t > 0 && (n = attr(e[t - 1], "data-wave"));
                var i = o(e[t]);
                if (n && i) {
                    n = n.split(",");
                    for (var a = geByClass("audio-msg-track--wave", e[t]), r = s(n, i / 3), l = 0; l < a.length; l++) {
                        var c = ce("div", {
                            innerHTML: r
                        }).firstChild;
                        a[l].parentNode.replaceChild(c, a[l])
                    }
                }
            }
        }

        function c() {
            return r || (r = new i.VoiceMessagePlayer({
                onListened: function(e) {
                    AudioMessagePlayer.events.emit("listened", e)
                }
            })), r
        }
        addEvent(window, "orientationchange", function() {
            return setTimeout(l, 500)
        }), window.mail && window.mail.onMessagesRepainted && (onDOMReady(l), window.mail.onMessagesRepainted(l)), window.AudioMessagePlayer = {
            loaded: !0,
            events: new EventEmitter,
            togglePlay: function(e, t) {
                var n = c(),
                    i = n.attachTo(e);
                !0 === i ? n.play() : i.then(function() {
                    n.play()
                })
            },
            detachPlayer: function(e) {
                c().detach(e)
            },
            pauseGlobalMedia: function() {
                i.VoiceMessagePlayer.pauseGlobalMedia()
            },
            resumeGlobalMedia: function() {
                i.VoiceMessagePlayer.resumeGlobalMedia()
            },
            redrawWaves: l,
            getWave: s
        };
        try {
            stManager.done("voice_message_player.js")
        } catch (e) {}
    },
    "3Wjs": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("TYsd")) && i.__esModule ? i : {
            default: i
        };

        function r(e, t) {
            for (var n = 0; n < t.length; n++) {
                var i = t[n];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        }
        var o = function() {
            function e(t) {
                ! function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, e), this.store = Stories.getStore(), this.data = t, this.raw_id = t.raw_id, this.can_remove = t.can_remove, this.can_report = t.can_report, this.can_bookmark = t.can_bookmark, this.is_bookmarked = t.is_bookmarked, this.is_narrative = !!t.narrative
            }
            var t, n, i;
            return t = e, (n = [{
                key: "needMenu",
                value: function() {
                    return this.can_remove || this.can_report
                }
            }, {
                key: "render",
                value: function() {
                    var e = window.lang;
                    return a.default.html({
                        class: "StoryMenu",
                        inner: [{
                            class: "StoryMenu__trigger",
                            onclick: "Stories.showMenu();",
                            inner: {
                                class: "Story__icon Story__icon_menu"
                            }
                        }, {
                            class: "StoryMenu__container",
                            inner: [this.can_bookmark ? {
                                class: "StoryMenu__row",
                                inner: {
                                    class: "StoryMenu__button",
                                    onclick: "Stories.toggleBookmark(this);",
                                    inner: this.is_bookmarked ? e.mobile_stories_menu_bookmarked_title : e.mobile_stories_menu_bookmark_title
                                }
                            } : null, this.can_remove ? {
                                class: "StoryMenu__row",
                                inner: {
                                    class: "StoryMenu__button",
                                    onclick: "Stories.removeCurrentStory();",
                                    inner: this.is_narrative ? e.mobile_stories_menu_remove_narrative_title : e.mobile_stories_menu_remove_title
                                }
                            } : null, this.can_report ? {
                                class: "StoryMenu__row",
                                inner: {
                                    class: "StoryMenu__button",
                                    onclick: 'Stories.reportCurrentStory("'.concat(this.raw_id, '");'),
                                    inner: e.mobile_stories_menu_report_title
                                }
                            } : null]
                        }]
                    })
                }
            }]) && r(t.prototype, n), i && r(t, i), e
        }();
        t.default = o
    },
    "3Xw1": function(e, t, n) {
        "use strict";
        var i, a = (i = n("jk6M")) && i.__esModule ? i : {
            default: i
        };
        var r, o = window,
            s = o.qs2obj,
            l = o.preventEvent,
            c = o.im,
            u = o.nav,
            d = o.toggle,
            f = o.attr,
            h = o.ge,
            p = o.val,
            A = o.geByClass1,
            m = o.removeClass,
            _ = o.show,
            v = o.hide,
            g = o.qsearch,
            y = o.toggleClass,
            b = o.intval,
            w = o.mail;

        function k() {
            return s(u.params)
        }

        function E(e) {
            return "dialogs" === e.tab || !e.q
        }

        function S(e) {
            var t = u.getQuery("community");
            return t ? "".concat(e ? "?" : "&", "community=").concat(t) : ""
        }

        function C() {
            var e = window.lang;
            g.init({
                init_once: !0,
                action: "/mail?act=write&fast=1",
                container: h("ma_search_items"),
                field: h("ma_search_field"),
                btn: h("ma_search_btn"),
                top_items: [],
                _cache: {},
                item_tpl: function(e, t, n, i, a) {
                    return this.id > 2e9 || -1 === this.id ? '<a href="' + (e || "") + '" class="simple_item' + (-1 == this.id ? " simple_item_create" : "") + '">' + (t || "") + '<div class="si_body"><span class="si_owner">' + this.highlight(n || "") + "</span>" + (i || "") + (a ? '<div class="si_slabel">' + a + "</div>" : "") + "</div></a>" : '<a href="' + (e || "") + '" class="inline_item"><div class="ii_body">' + (t || "") + '<span class="ii_owner">' + this.highlight(n || "") + "</span>" + (i || "") + "</div></a>"
                },
                null_tpl: function() {
                    return '<div class="service_msg_box"><div class="service_msg service_msg_null">' + e.mobile_mail_no_peers + "</div></div>"
                },
                need_invalid_keys: a.default.desktop,
                onLoaded: function(e) {
                    for (var t in e) w.saveDialog(e[t][e[t].length - 1], t)
                }
            })
        }
        c.clearSearchInput = function(e) {
            if (l(e), E(k())) {
                var t = h("ma_search_field");
                p(t, ""), c.onFilterKeyDown(t)
            } else u.go("/mail" + S(!0))
        }, c.onFilterKeyDown = function(e) {
            setTimeout(function() {
                var t = window.lang,
                    n = encodeURIComponent(e.value),
                    i = k();
                if (d(A("mail_search_clear_button"), n), f(A("tab_dialogs_search"), "href", n ? "/mail?tab=dialogs&q=" + n + S() : "/mail" + S(!0)), f(A("tab_messages_search"), "href", "/mail?q=" + n + S()), E(i)) {
                    var a, o = h("mail_tabs"),
                        s = h("ma_search_items"),
                        l = h("dialogs"),
                        c = i.offset;
                    if (m("mail_show_filtered", A("mail")), r && clearTimeout(r), y("dialogs_filter_without_important", h("dialogs_filter"), n || 0 === b(p(A("dialogs_filter_button_important")))), n) _(o), _(s), v(l), r = setTimeout(function() {
                        a = "/mail?tab=dialogs&q=" + n + (c ? "&offset=" + c : "") + S(), "/mail" !== u.path || k().act || u.go(a, null, {
                            push_only: !0
                        })
                    }, 200);
                    else {
                        if (v(o), v(s), _(l), !u.getQuery("community")) {
                            var g = A("mhb_back"),
                                w = A("mh_header");
                            p(w, t.mobile_mail_head_title), m("mhi_back", w), g.outerHTML = g.outerHTML.replace("<a", "<div").replace("</a>", "</div>")
                        }
                        a = "/mail" + (c ? "?offset=" + c : "") + S(!c), u.go(a, null, {
                            push_only: !0
                        })
                    }
                }
            }, 40)
        }, w.onShowWritePageFromCache(C), w.onShowDialogsPageFromCache(C)
    },
    "3dm1": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.getLastSeenByStatus = function(e, t) {
            var n;
            switch (e) {
                case i.ONLINE_SEEN_RECENTLY:
                    n = getLang("global_online_was_recently", "raw");
                    break;
                case i.ONLINE_SEEN_LAST_WEEK:
                    n = getLang("global_online_was_week", "raw");
                    break;
                case i.ONLINE_SEEN_LAST_MONTH:
                    n = getLang("global_online_this_month", "raw");
                    break;
                case i.ONLINE_SEEN_LONG_AGO:
                    n = getLang("global_online_long_ago", "raw");
                    break;
                default:
                    return ""
            }
            return langSex(t, n)
        };
        var i = n("Kz56")
    },
    "4+be": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.parseLatin = function(e) {
            for (var t = ["yo", "zh", "kh", "ts", "ch", "sch", "shch", "sh", "eh", "yu", "ya", "YO", "ZH", "KH", "TS", "CH", "SCH", "SHCH", "SH", "EH", "YU", "YA", "'"], n = ["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""], i = e, a = 0, r = t.length; a < r; a++) i = i.split(t[a]).join(n[a]);
            for (var o = "abvgdezijklmnoprstufhcyABVGDEZIJKLMNOPRSTUFHCY", s = 0, l = o.length; s < l; s++) i = i.split(o.charAt(s)).join("".charAt(s));
            return i === e ? null : i
        }, t.parseCyr = function(e) {
            for (var t = ["yo", "zh", "kh", "ts", "ch", "sch", "shch", "sh", "eh", "yu", "ya", "YO", "ZH", "KH", "TS", "CH", "SCH", "SHCH", "SH", "EH", "YU", "YA", "'"], n = ["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""], i = "", a = e, r = 0; r < n.length; r++) a = a.split(n[r]).join(t[r]);
            for (var o = 0; o < i.length; o++) a = a.split(i.charAt(o)).join("abvgdezijklmnoprstufhcyABVGDEZIJKLMNOPRSTUFHCY".charAt(o));
            return a === e ? null : a
        }, t.parseLatKeys = function(e) {
            for (var t = "qwertyuiop[]asdfghjkl;'zxcvbnm,./`", n = e, i = 0; i < t.length; i++) n = n.split(t.charAt(i)).join(".".charAt(i));
            return n == e ? null : n
        }, t.langNumeric = o, t.langSex = function(e, t) {
            if (!(0, a.isArray)(t)) return t;
            var n = t[1];
            if (!window.langConfig) return n;
            return (0, a.each)(langConfig.sexRules, function(i, a) {
                return "*" == a[0] ? (n = t[a[1]], !1) : e == a[0] && t[a[1]] ? (n = t[a[1]], !1) : void 0
            }), n
        }, t.langStr = function(e) {
            for (var t = arguments, n = t.length, i = e + "", a = 1; a < n; a += 2) {
                var r = "%" === t[a][0] ? t[a] : "{" + t[a] + "}";
                i = i.replace(r, t[a + 1])
            }
            return i
        }, t.addLangKeys = function(e, t) {
            var n = t ? window : window.cur;
            n.lang ? (0, a.extend)(n.lang, e) : n.lang = e
        }, t.getLang = s, t.langDate = l, t.getShortDate = c, t.getShortDateOrTime = function(e, t, n, a) {
            return (0, i.isToday)(new Date(1e3 * e + 1e3 * t)) ? l(1e3 * e, "{hour}:{minute} {am_pm}", 1e3 * t, [], !n) : c(e, t, n, a)
        }, t.langWordNumeric = u, t.getDateText = function(e, t) {
            e += t;
            var n = parseInt(Date.now() / 1e3) - e,
                i = "";
            if (n < 60) i = s("global_just_now");
            else if (n < 3600) {
                var r = (0, a.intval)(n / 60);
                i = u(r, s("global_word_mins_ago", "raw"), s("global_mins_ago", "raw"))
            } else if (n < 14400) {
                var o = (0, a.intval)(n / 3600);
                i = u(o, s("global_word_hours_ago", "raw"), s("global_hours_ago", "raw"))
            } else i = d(e, 0, !0, "_l");
            return i
        }, t.getBigDateNew = d, t.getSmDate = function(e, t, n) {
            void 0 === n && (n = !0);
            void 0 === t && (t = 0);
            var i = new Date,
                a = i.getFullYear(),
                r = i.getMonth(),
                o = new Date(1e3 * e),
                c = o.getFullYear(),
                u = o.getMonth();
            return l(1e3 * e, s(c < a && (r > 1 || u < 9 || a - c >= 2) ? "global_date" : "global_short_date_time", "raw"), t, s("months_sm_of", "raw"), !n)
        };
        var i = n("1BRX"),
            a = n("t7n3"),
            r = n("98sY");

        function o(e, t, n) {
            if (!t || !window.langConfig) return e;
            var i;
            if ((0, a.isArray)(t) ? (i = t[1], e != Math.floor(e) ? i = t[langConfig.numRules.float] : (0, a.each)(langConfig.numRules.int, function(n, r) {
                    if ("*" == r[0]) return i = t[r[2]], !1;
                    var o = r[0] ? e % r[0] : e;
                    return -1 != (0, a.indexOf)(r[1], o) ? (i = t[r[2]], !1) : void 0
                })) : i = t, n) {
                for (var r = e.toString().split("."), o = [], s = r[0].length - 3; s > -3; s -= 3) o.unshift(r[0].slice(s > 0 ? s : 0, s + 3));
                r[0] = o.join(langConfig.numDel), e = r.join(langConfig.numDec)
            }
            return i = (i || "%s").replace("%s", e)
        }

        function s() {
            try {
                var e = Array.from(arguments),
                    t = e.shift();
                if (!t) return "...";
                var n = window.cur.lang && window.cur.lang[t] || window.lang && window.lang[t] || window.langpack && window.langpack[t] || window[t];
                if (!n) {
                    var i = t.split("_");
                    return i.shift(), i.join(" ")
                }
                return (0, a.isFunction)(n) ? n.apply(null, e) : void 0 === e[0] && !(0, a.isArray)(n) || "raw" === e[0] ? n : o(e[0], n, e[1])
            } catch (e) {
                (0, r.debugLog)("lang error:" + e.message + "(" + Array.from(arguments).join(", ") + ")")
            }
        }

        function l(e, t, n, r, o, s) {
            var l;
            if (s || (s = ""), (0, a.isArray)(t) || (t = ["", t, t, t, t]), "number" == typeof e || "string" == typeof e ? (e > 2147483646e3 && (e = 0), e += n, l = new Date(e)) : l = e, o) t = t[1];
            else {
                var c = "";
                !(c = (0, i.isToday)(l) ? t[3] : (0, i.isYesterday)(l) ? t[2] : (0, i.isTomorrow)(l) ? t[4] : t[1]) && t[1] && (c = t[1]), t = c
            }
            var u = {
                    hours: l.getHours(),
                    minutes: l.getMinutes(),
                    seconds: l.getSeconds(),
                    day: l.getDate(),
                    month: l.getMonth() + 1,
                    year: l.getFullYear()
                },
                d = "";
            switch (3 === vk.lang && (d = l.getHours() > 11 ? "pm" : "am", u.hours = l.getHours() % 12 == 0 ? 12 : l.getHours() % 12), vk.lang) {
                case 1:
                    switch (l.getHours()) {
                        case 11:
                            t = t.replace("  ", "  ");
                            break;
                        case 0:
                            t = t.replace("  ", "  ")
                    }
                    break;
                case 3:
                    !(0, i.isToday)(l) || (0, i.isYesterday)(l) || (0, i.isTomorrow)(l) || (t = s + t);
                    break;
                case 12:
                case 73:
                    1 == l.getHours() && (t = t.replace(" &#224;s ", " &#224; "))
            }
            return 68 === vk.lang && (u.year = u.year + 543), t.replace("{hour}", u.hours).replace("{num_hour}", (0, i.leadingZero)(u.hours)).replace("{minute}", (0, i.leadingZero)(u.minutes)).replace("{day}", u.day).replace("{num_day}", (0, i.leadingZero)(u.day)).replace("{month}", r[u.month]).replace("{year}", u.year).replace("{short_year}", u.year % 100).replace("{second}", (0, i.leadingZero)(u.seconds)).replace("{am_pm}", d)
        }

        function c(e, t, n, i, a) {
            e *= 1e3, void 0 === n && (n = !0), void 0 === i && (i = s("months_of", "raw")), t *= 1e3;
            var r = Date.now(),
                o = new Date(r),
                c = new Date(e + t);
            return !a && e > r && e - r < 864e5 && o.getDate() === c.getDate() ? l(e, "{hour}:{minute} {am_pm}", t, [], !n) : c.getYear() !== o.getYear() || e < r - 157248e5 ? l(e, s("global_date", "raw"), t, i, !n) : l(e, s("global_short_date", "raw"), t, i, !n)
        }

        function u(e, t, n) {
            return (0, a.isArray)(t) && e < t.length ? t[e] : o(e, n)
        }

        function d(e, t, n, i) {
            void 0 === n && (n = !0), void 0 === t && (t = 0), void 0 === i && (i = ""), t *= 1e3;
            var a = new Date(1e3 * e),
                r = new Date;
            return a.getFullYear() !== r.getFullYear() && a.getTime() < r.getTime() - 1728e5 || Math.abs(a.getTime() - r.getTime()) > 157248e5 ? l(1e3 * e, s("global_date", "raw"), t, s("months_sm_of"), !n) : l(1e3 * e, s("global_short_date_time" + i, "raw"), t, s("months_sm_of"), !n)
        }
    },
    "40dl": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.init = p, t.close = m, t.SNACKBAR_TYPE_BOOKMARK = t.SNACKBAR_TYPE_ERROR = t.SNACKBAR_TYPE_SUCCESS = void 0;
        var i = n("OcsD"),
            a = n("UxAg"),
            r = n("zq7H");
        window.Snackbar = {
            init: p,
            close: m,
            _onActionClick: function(e, t) {
                var n = u[t];
                if (!n) return void hide(t);
                var i = n.callback,
                    a = n.url;
                i ? "function" == typeof i ? i.call(null, e, {
                    id: t,
                    url: a
                }) : Wd.handle2(i, e, {
                    id: t,
                    url: a
                }) : hide(t)
            },
            _onRestoreClick: function(e, t) {
                var n = e.closest(".SnackbarItem");
                m(domData(n, "snackbar-id")), ajax.post(t, {
                    _ajax: 1,
                    _snackbar: 1
                })
            }
        };
        var o = "SnackbarItem_",
            s = "SnackbarItem_added",
            l = "SnackbarItem_removed",
            c = 0,
            u = {};
        t.SNACKBAR_TYPE_SUCCESS = 1;
        t.SNACKBAR_TYPE_ERROR = 2;
        t.SNACKBAR_TYPE_BOOKMARK = 3;
        var d = "touchstart",
            f = "touchmove",
            h = "touchcancel touchend";

        function p(e) {
            var t = isFinite(e.duration) ? e.duration : 5e3,
                n = c++,
                a = e.action && e.action.callback,
                r = e.action && e.action.url;
            e.type;
            e.id = n, a && !e.action.onclick && (e.action.onclick = ["Snackbar._onActionClick", "event", n]), e.bottom && (e.style = "bottom: " + e.bottom + "px");
            var o, l = Wd.elem(SnackbarItem(e));
            return function(e) {
                (0, i.append)(e, document.body), setTimeout(function() {
                    e.classList.add(s)
                }, 100)
            }(l), t && (o = A(n, t)), (0, i.addEvent)(l, d, w, {
                passive: !0
            }), (0, i.addEvent)(l, f, k, {
                capture: !1
            }), (0, i.addEvent)(l, h, E, {
                passive: !0
            }), u[n] = {
                id: n,
                timer: o,
                callback: a,
                url: r,
                duration: t
            }, n
        }

        function A(e, t) {
            return setTimeout(function() {
                m(e, !1)
            }, t)
        }

        function m(e, t) {
            var n = u[e],
                r = function(e) {
                    return (0, a.$)("." + o + e)
                }(e);
            n && (n.timer && clearTimeout(n.timer), u[e] = null), r && function(e, t) {
                if ((0, i.removeEvent)(e, d, w, {
                        passive: !0
                    }), (0, i.removeEvent)(e, f, k, {
                        capture: !1
                    }), (0, i.removeEvent)(e, h, E, {
                        passive: !0
                    }), t) return void(0, i.remove)(e);
                if (!e) return;
                e.classList.add(l), setTimeout(function() {
                    (0, i.remove)(e)
                }, 300)
            }(r, t)
        }
        var _ = !1,
            v = null,
            g = 0,
            y = !1,
            b = (0, i.getCw)();

        function w(e) {
            if ((b = (0, i.getCw)()) >= r.DESKTOP_WIDTH && (y = !0), e.touches && e.touches.length > 1) _ = !1;
            else {
                var t = e.target.closest(".SnackbarItem");
                t.classList.add("SnackbarItem--dragging");
                var n = domData(t, "snackbar-id");
                u[n].timer && clearTimeout(u[n].timer), v = e.touches[0], g = e.touches[0].clientX, _ = !0, document.body.style.overflow = "hidden"
            }
        }

        function k(e) {
            if (e.preventDefault(), e.touches && e.touches.length > 1) _ = !1;
            else if (v && _) {
                var t = e.touches[0],
                    n = e.target.closest(".SnackbarItem"),
                    i = -(g - t.clientX);
                y && (i = Math.min(i, 0));
                var a = getX(n),
                    o = (getW(n) + i) / 2 + a,
                    s = b / 2;
                b >= r.DESKTOP_WIDTH && (s = getW(n) / 2);
                var l = o >= .95 * b || o <= b / .95 - b,
                    c = o > s ? (b - o) / 100 : o / s,
                    d = domData(n, "snackbar-id");
                u[d].canClose = l, setStyle(n, {
                    opacity: c
                }), setStyle.transform(n, 1, [i, 0])
            }
        }

        function E(e) {
            var t = e.target.closest(".SnackbarItem");
            t.classList.remove("SnackbarItem--dragging");
            var n = domData(t, "snackbar-id"),
                i = u[n];
            u[n].dragging = !1, document.body.style.overflow = "visible", i.canClose ? m(n, !0) : u[n].timer = A(n, i.duration), t && (setStyle(t, {
                opacity: ""
            }), setStyle.transform(t, 1, [0, 0]))
        }
    },
    "42eR": function(e, t, n) {
        "use strict";
        var i, a = (i = n("JDVM")) && i.__esModule ? i : {
                default: i
            },
            r = n("UxAg");
        var o = {
            getHash: function() {
                var e = (0, r.$)("#feed_add_form"),
                    t = qs2obj(e.action.split("?")[1]);
                return e.getAttribute("data-hash") || t.hash
            },
            openCopyright: function(e, t, n, i) {
                cancelEvent(e);
                var o = !1;
                if ("BUTTON" === e.target.tagName) o = e.target.disabled;
                else if ("LABEL" === e.target.tagName) {
                    o = (0, r.$)("button", e.target).disabled
                }
                o || a.default.open(t, n, i)
            },
            saveSource: function(e, t) {
                if (t.target) {
                    if (13 !== t.keyCode) return;
                    t = t.target
                }
                var n = (0, r.$)(".AddCopyrightPopup__input", t.closest(".AddCopyrightPopup")),
                    i = n.querySelector("input");
                a.default.submit(i.value, e, n)
            },
            deleteSource: function(e, t, n) {
                var i = (0, r.$)(".AddCopyrightPopup__input", t.closest(".AddCopyrightPopup"));
                event && cancelEvent(e), a.default.remove(n, i)
            },
            deleteObject: function(e) {
                e && cancelEvent(e);
                var t = nav.params,
                    n = qs2obj(t);
                delete n.object, delete n.list, n.delete_object = 1, post.saveDraft(null, o.getHash(), "".concat(nav.path).concat(obj2qs(n)))
            }
        };
        window.posting = o
    },
    "4KUl": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.getElem = s, t.setMsgs = function(e) {
            s().innerHTML = e.map(function(e) {
                return (0, r.MailPreSendList__Msg)(e)
            }).join("")
        }, t.addMsg = function(e) {
            s().insertAdjacentHTML("beforeend", (0, r.MailPreSendList__Msg)(e)), MailScrap.peerGoToBottom()
        }, t.removeMsg = function(e) {
            var t = o.default.getElem(e.sendId);
            t && t.remove()
        }, t.getMsg = function(e) {
            return o.default.getElem(e.sendId)
        };
        var i, a = n("UxAg"),
            r = n("E5Ij"),
            o = (i = n("/Id8")) && i.__esModule ? i : {
                default: i
            };

        function s() {
            return (0, a.$)(".MailPreSendList__box")
        }
    },
    "4Oey": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.SearchBlock = a, t.default = void 0;
        var i = n("Q47q");

        function a(e) {
            return {
                inner: [(0, i.Search)()],
                class: "SkeletonSearchBlock",
                tag: "div"
            }
        }
        var r = a;
        t.default = r
    },
    "4azy": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i = n("fdw3");
        var a = function(e) {
            return (0, i.extend)({
                tag: "textarea",
                class: ["Textarea", e.mix],
                name: e.name,
                placeholder: e.placeholder,
                rows: e.rows ? e.rows : 3,
                inner: e.text
            }, e.attrs)
        };
        t.default = a
    },
    "4fRq": function(e, t) {
        var n = "undefined" != typeof crypto && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || "undefined" != typeof msCrypto && "function" == typeof window.msCrypto.getRandomValues && msCrypto.getRandomValues.bind(msCrypto);
        if (n) {
            var i = new Uint8Array(16);
            e.exports = function() {
                return n(i), i
            }
        } else {
            var a = new Array(16);
            e.exports = function() {
                for (var e, t = 0; t < 16; t++) 0 == (3 & t) && (e = 4294967296 * Math.random()), a[t] = e >>> ((3 & t) << 3) & 255;
                return a
            }
        }
    },
    "4qiT": function(e, t, n) {
        "use strict";
        var i = {
            init: function(e) {
                var t = this;
                this.store ? addEvent(window, "scroll touchstart", this._onScrollHandler) : (this.store = extend({}, e), this.loadCount = 20, this.store.offset = this.loadCount, this.isLoading = !1, this.elems = {
                    wrap: geByClass1("author-page"),
                    nav: geByClass1("author-page-nav", this.wrap),
                    header: geByClass1("author-page-header", this.wrap),
                    content: geByClass1("author-page__inner", this.wrap),
                    spinner: geByClass1("author-page__spinner", this.wrap)
                }, this._onScrollHandler = this._onScrollHandler.bind(this), addEvent(window, "scroll touchstart", this._onScrollHandler), e.isStandalone && (window.al = !1), window.cur.destroy.push(function() {
                    removeEvent(window, "scroll touchstart", t._onScrollHandler)
                }))
            },
            _getLoadOffset: function() {
                return this.store.offset
            },
            _showLoader: function() {
                this.isLoading = !0, addClass(this.elems.spinner, "active")
            },
            _hideLoader: function() {
                this.isLoading = !1, removeClass(this.elems.spinner, "active")
            },
            _onScrollHandler: function() {
                var e = this,
                    t = this.elems,
                    n = t.nav,
                    i = t.header,
                    a = t.content,
                    r = this.store.totalCount > this._getLoadOffset();
                toggleClass(n, "author-page-nav_shown", i.getBoundingClientRect().bottom - n.clientHeight < 0), r && window.scrollTop() + 2 * window.innerHeight > a.offsetHeight && this._loadMore(this.store.sortBy, this._getLoadOffset(), function(t) {
                    e.elems.content.innerHTML += t
                })
            },
            _loadMore: function() {
                var e = this,
                    t = arguments.length > 0 && void 0 !== arguments[0] && arguments[0],
                    n = arguments.length > 1 && void 0 !== arguments[1] && arguments[1],
                    i = arguments.length > 2 ? arguments[2] : void 0;
                this.isLoading || (t && (this.store.sortBy = t), isFunction(i) || (i = function() {}), this._showLoader(), ajax.post("author_page.php", {
                    act: "load_more",
                    author_id: this.store.authorId,
                    sort_by: t || this.store.sortBy,
                    count: this.loadCount,
                    offset: void 0 !== n ? n : this._getLoadOffset()
                }, {
                    onFail: function() {
                        e._hideLoader()
                    },
                    onDone: function(t) {
                        e._hideLoader(), e.store.offset += 20, t && i(t)
                    }
                }))
            },
            subscribe: function(e, t, n) {
                ajax.post("author_page.php", {
                    act: "subscribe",
                    author_id: t,
                    hash: n
                }, {
                    onDone: function(t, n) {
                        toggleClass(e, "Btn_theme_secondary", t), e.innerHTML = n
                    }
                })
            },
            sortBy: function(e, t) {
                e.preventDefault(), Unfold.setActive(e.target.parentNode), this._closeUnfold(e), t !== this.store.sortBy && this.updateList(t)
            },
            updateList: function(e) {
                var t = this,
                    n = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
                e = e || this.store.sortBy, addClass(this.elems.content, "loading"), n && Unfold.setActive(geByClass1("Unfold__item")), this._loadMore(e, 0, function(e) {
                    t.elems.content.innerHTML = e, t.store.offset = t.loadCount, removeClass(t.elems.content, "loading")
                })
            },
            _closeUnfold: function(e) {
                if (e) {
                    var t = e.target.closest(".Unfold");
                    t && removeClass(t, "Unfold_open")
                }
            },
            addToBookmark: function(e, t, n, i, a) {
                e.preventDefault(), this._closeUnfold(e);
                var r = +domData(t, "is-bookmarked"),
                    o = r ? "bookmark_remove" : "bookmark_add",
                    s = geByClass1("Unfold__itemText", t);
                ajax.post("bookmarks.php", {
                    _ajax: 1,
                    act: o,
                    item_type: 5,
                    item_oid: n,
                    item_id: i,
                    hash: a
                }, {
                    onDone: function(e, n, i) {
                        domData(t, "is-bookmarked", r ? 0 : 1), r ? s && (s.innerHTML = lang.mobile_bookmarks_actions_add) : s && (s.innerHTML = lang.mobile_bookmarks_actions_remove), i && Bookmarks.showSuccessSnack(i)
                    }
                })
            },
            pinArticle: function(e, t, n, i, a) {
                var r = this;
                e.preventDefault(), this._closeUnfold(e), ajax.post("author_page.php", {
                    act: "pin_article",
                    article_owner_id: t,
                    article_id: n,
                    do_pin: i ? 0 : 1,
                    hash: a
                }, {
                    onDone: function() {
                        r.updateList("date", !0)
                    }
                })
            },
            hideArticle: function(e, t, n, i) {
                var a = this;
                e.preventDefault(), this._closeUnfold(e), ajax.post("author_page.php", {
                    act: "hide_article",
                    article_owner_id: t,
                    article_id: n,
                    hash: i
                }, {
                    onDone: function() {
                        a.updateList()
                    }
                })
            }
        };
        window.AuthorPage = i
    },
    "4rnG": function(e, t, n) {
        "use strict";
        var i, a = (i = n("RkGL")) && i.__esModule ? i : {
            default: i
        };
        var r, o, s = window,
            l = s.preventEvent,
            c = s.cancelEvent,
            u = s.lockButton,
            d = s.attr,
            f = s.ajax,
            h = 1500,
            p = !1,
            A = null;

        function m() {
            A && Btn.setLoading(A, !1), r && (clearInterval(r), r = null), o && (o.abort(), o = null)
        }
        a.default._onCancelClick(function(e, t) {
            var n, i;
            t ? (p = !1, l(e), c(e), u(t)) : (p = !0, t = e.$btn, e = null, A = t, Btn.setLoading(t, !0)), n = {
                cancelUrl: d(t, "href")
            }, i = n.cancelUrl, r = setInterval(function() {
                o = f.post(i, {
                    _ajax: 1
                }, {
                    onDone: function(e) {
                        if (1 === e) {
                            if (p) {
                                var t = arguments[1];
                                return A.closest(".BtnStack").outerHTML = '\n            <div class="notification__tempText">'.concat(t, "</div>\n          "), void m()
                            }
                            var n = window.scrollTop();
                            nav.go(location.pathname + location.search, null, {
                                replace: !0
                            }), cur.destroy.push(function() {
                                window.scrollTop(n)
                            }), m()
                        }
                    }
                })
            }, h), window.cur.destroy.push(m)
        })
    },
    "4uOi": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.PageVisibility = void 0;
        var i, a = (i = n("jk6M")) && i.__esModule ? i : {
            default: i
        };

        function r(e, t) {
            for (var n = 0; n < t.length; n++) {
                var i = t[n];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        }

        function o(e, t, n) {
            return t && r(e.prototype, t), n && r(e, n), e
        }
        var s = function() {
            function e() {
                ! function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, e), this.visibleCallbacks = [], this.hiddenCallbacks = [], this.visibilityPrefix = "", this.hiddenStateName = "hidden", this.isHidden = !1, this.listen()
            }
            return o(e, null, [{
                key: "_supports",
                value: function(e) {
                    return e + "Hidden" in document
                }
            }]), o(e, [{
                key: "onVisible",
                value: function(e) {
                    this.visibleCallbacks.push(e)
                }
            }, {
                key: "onHidden",
                value: function(e) {
                    this.hiddenCallbacks.push(e)
                }
            }, {
                key: "listen",
                value: function() {
                    var e = this,
                        t = arguments;
                    try {
                        var n = a.default.version.split(".")[0];
                        if (a.default.safari_mobile && n <= 7) return window.addEventListener("pagehide", function() {
                            return e._hidden()
                        }), void window.addEventListener("pageshow", function() {
                            return e._visible()
                        });
                        var i = a.default.android && a.default.safari && n < 5,
                            r = !i && this.isSupported();
                        r ? (document.addEventListener(this.visibilityPrefix + "visibilitychange", function() {
                            return e._nativeSwitch(t)
                        }), window.addEventListener(this.visibilityPrefix + "visibilitychange", function() {
                            return e._nativeSwitch(t)
                        })) : document.addEventListener ? (window.addEventListener("focus", function() {
                            return e._visible()
                        }, 1), window.addEventListener("blur", function() {
                            return e._hidden()
                        }, 1)) : (document.attachEvent("onfocusin", function() {
                            return e._visible()
                        }), document.attachEvent("onfocusout", function() {
                            return e._hidden()
                        }))
                    } catch (e) {}
                }
            }, {
                key: "isSupported",
                value: function() {
                    for (var t = 0; t < e.prefixes.length; t++) {
                        var n = e.prefixes[t];
                        if (e._supports(n)) return this.hiddenStateName = (n ? n + "H" : "h") + "idden", this.visibilityPrefix = n, !0
                    }
                    return !1
                }
            }, {
                key: "_visible",
                value: function() {
                    this.isHidden = !1, this.visibleCallbacks.forEach(function(e) {
                        return e()
                    })
                }
            }, {
                key: "_hidden",
                value: function() {
                    this.isHidden = !0, this.hiddenCallbacks.forEach(function(e) {
                        return e()
                    })
                }
            }, {
                key: "_nativeSwitch",
                value: function() {
                    !0 === document[this.hiddenStateName] ? this._hidden() : this._visible()
                }
            }]), e
        }();
        t.PageVisibility = s, s.prefixes = ["webkit", "o", "ms", "moz", ""]
    },
    "4uzI": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("hm4I")) && i.__esModule ? i : {
            default: i
        };
        var r = function e(t) {
            var n = JSON.parse(unescape(t.itemsJSON)),
                i = [],
                r = !0,
                o = !1,
                s = void 0;
            try {
                for (var l, c = n[Symbol.iterator](); !(r = (l = c.next()).done); r = !0) {
                    var u = l.value,
                        d = e._faveCache[u.item_id];
                    void 0 === d && (d = u.is_fave), i.push({
                        onclick: ["ItemsList._goToItem", u],
                        class: "PhotoItemsList__item",
                        inner: (0, a.default)(Object.assign({}, u, {
                            is_fave: d
                        }))
                    })
                }
            } catch (e) {
                o = !0, s = e
            } finally {
                try {
                    r || null == c.return || c.return()
                } finally {
                    if (o) throw s
                }
            }
            for (var f = 0; f < 10; f++) i.push({
                class: "PhotoItemsList__item PhotoItemsList__item--filler"
            });
            return {
                class: "PhotoItemsList",
                inner: [{
                    class: "PhotoItemsList__header",
                    inner: [{
                        class: "PhotoItemsList__closeIcon",
                        onclick: t.onClose
                    }, getLang("mobile_photos_market_items_title")]
                }, {
                    class: "PhotoItemsList__body",
                    inner: i
                }]
            }
        };
        t.default = r
    },
    "5KvX": function(e, t, n) {
        "use strict";

        function i(e) {
            return (i = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function a(e, t) {
            for (var n = 0; n < t.length; n++) {
                var i = t[n];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.PlayerFlash = void 0;
        var r = function() {
            function e(t) {
                ! function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, e), this.opts = t || {}, window._flashVoiceInstance = this
            }
            var t, n, r;
            return t = e, r = [{
                key: "onAudioFinishCallback",
                value: function() {
                    var e = window._flashVoiceInstance;
                    e.opts.onEnd && e.opts.onEnd()
                }
            }, {
                key: "onAudioProgressCallback",
                value: function(e, t) {
                    var n = window._flashVoiceInstance;
                    t && (n._total = t, n._currProgress = e / t, n.opts.onProgressUpdate && n.opts.onProgressUpdate(n._currProgress))
                }
            }, {
                key: "onAudioLoadProgressCallback",
                value: function(e, t) {
                    var n = window._flashVoiceInstance;
                    n._currBuffered = e / t, n.opts.onBufferUpdate && n.opts.onBufferUpdate(n._currBuffered)
                }
            }], (n = [{
                key: "fadeVolume",
                value: function(e, t) {
                    return this.setVolume(e), t()
                }
            }, {
                key: "destroy",
                value: function() {
                    re(e.PLAYER_EL_ID)
                }
            }, {
                key: "onReady",
                value: function(t) {
                    if (this._player) return t(!0);
                    if (!1 === this._player) return t(!1);
                    this._onReady = t, ge(e.PLAYER_EL_ID) || document.body.appendChild(ce("div", {
                        id: e.PLAYER_EL_ID,
                        className: "fixed"
                    }));
                    var n = this;
                    renderFlash(e.PLAYER_EL_ID, {
                        url: "/swf/audio_lite.swf",
                        id: "flash_voice_player",
                        height: 2
                    }, {
                        swliveconnect: "true",
                        allowscriptaccess: "always",
                        wmode: "opaque"
                    }, {
                        onPlayFinish: "VoicePlayerFlash.onAudioFinishCallback",
                        onLoadProgress: "VoicePlayerFlash.onAudioLoadProgressCallback",
                        onPlayProgress: "VoicePlayerFlash.onAudioProgressCallback"
                    }) && setTimeout(function() {
                        n._checkFlashLoaded()
                    }, 50)
                }
            }, {
                key: "setUrl",
                value: function(e, t) {
                    this._trackOptions = {}, t && "object" === i(t) && (this._trackOptions = t, t = t.callback), this._url != e ? (this._url = e, this._player && this._player.loadAudio(e), t && t(!0)) : t && t(!0)
                }
            }, {
                key: "setVolume",
                value: function(e) {
                    this._player && this._player.setVolume && this._player.setVolume(e)
                }
            }, {
                key: "play",
                value: function() {
                    this._player && this._player.playAudio()
                }
            }, {
                key: "seek",
                value: function(e) {
                    var t = (this._total || 0) * e;
                    this._player && this._player.playAudio(t)
                }
            }, {
                key: "pause",
                value: function() {
                    this._player && this._player.pauseAudio()
                }
            }, {
                key: "isFullyLoaded",
                value: function() {
                    return !1
                }
            }, {
                key: "getPlayedTime",
                value: function() {
                    return 0
                }
            }, {
                key: "getCurrentProgress",
                value: function() {
                    return this._currProgress || 0
                }
            }, {
                key: "getCurrentBuffered",
                value: function() {
                    return this._currBuffered || 0
                }
            }, {
                key: "stop",
                value: function() {
                    this._player && this._player.stopAudio()
                }
            }, {
                key: "_checkFlashLoaded",
                value: function() {
                    var e = ge("flash_voice_player");
                    if (this._checks = this._checks || 0, this._checks++, this._checks > 10) return this._player = !1, (t = this._onReady) && t(!1);
                    if (e && e.paused) {
                        var t;
                        this._player = e, (t = this._onReady) && t(!0), this._onReady = null
                    } else {
                        var n = this;
                        setTimeout(function() {
                            n._checkFlashLoaded()
                        }, 100)
                    }
                }
            }, {
                key: "type",
                get: function() {
                    return "flash"
                }
            }, {
                key: "loaded",
                get: function() {
                    return !!this._player
                }
            }]) && a(t.prototype, n), r && a(t, r), e
        }();
        t.PlayerFlash = r, window.VoicePlayerFlash = r, r.PLAYER_EL_ID = "flash_voice"
    },
    "5V+s": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("4uzI")) && i.__esModule ? i : {
            default: i
        };
        n("OFOJ"), window.ItemsList = a.default;
        var r = a.default;
        t.default = r
    },
    "5WJ6": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.initSharePage = function(e, t) {
            var n = ge("SharePageInput__to"),
                i = "";
            n && (i = n.value);
            var r = {};
            "mail" === e && "" !== n.value && (r = i.split(",").reduce(function(e, t) {
                return e[t] = !0, e
            }, {}));
            if ("club" === e) {
                var o = (0, a.$)(".SharePage .qsearch_wrap"),
                    s = (0, a.$)(".hp_block", o);
                show(o), show(s)
            }
            var l = (0, a.$)(".SharePage .SharePanel.MessagePanel"),
                c = (0, a.$)(".SharePage .SharePanel.ActionsPanel");
            extend(cur, {
                publishTo: e,
                refreshSelected: function(e, t) {
                    var i, a = !(arguments.length > 2 && void 0 !== arguments[2]) || arguments[2];
                    isUndefined(e) || (cur.publishSelected = e), t = cur.publishTo, e = cur.publishSelected, "group" === t ? i = ge("club" + e) : "mail" === t && (i = ge("peer" + e));
                    var r = !!cur.selectedMap[e];
                    i && (i.classList.toggle("inline_item_selected", a ? !r : r), cur.like_search.toggleAttach(e, !r), a && (cur.selectedMap[e] = !r), n.value = Object.keys(cur.selectedMap).filter(function(e) {
                        return cur.selectedMap[e]
                    }).join(","));
                    var o = Object.keys(cur.selectedMap).length > 0 && Object.keys(cur.selectedMap).some(function(e) {
                        return !!cur.selectedMap[e]
                    });
                    return l.classList.toggle("SharePanel--active", o), c.classList.toggle("SharePanel--active", !o), !1
                },
                selectedMap: r,
                selectPeer: function(e, t) {
                    return cur.refreshSelected(t, "mail"), !1
                }
            }), Object.keys(r).forEach(function(t) {
                cur.refreshSelected(t, e, !1)
            })
        }, t.updateButtons = function(e) {
            var t = cur.share._els.bookmarkButton,
                n = (0, a.$)(".ActionsPanel-button__icon", t),
                i = (0, a.$)(".ActionsPanel-button__label", t);
            e ? (n.innerHTML = Wd.html((0, r.default)("wall", "favorite_28")), i.innerHTML = getLang("mobile_share_target_bookmark_active")) : (n.innerHTML = Wd.html((0, r.default)("wall", "favorite_outline_28")), i.innerHTML = getLang("mobile_share_target_bookmark"))
        };
        var i, a = n("UxAg"),
            r = (i = n("Y6JH")) && i.__esModule ? i : {
                default: i
            }
    },
    "5aPh": function(e, t, n) {
        "use strict";
        var i;
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var a = ((i = n("BM0n")) && i.__esModule ? i : {
            default: i
        }).default;
        t.default = a
    },
    "5c+v": function(e, t, n) {
        "use strict";
        var i = function(e) {
                if (e && e.__esModule) return e;
                var t = s();
                if (t && t.has(e)) return t.get(e);
                var n = {};
                if (null != e) {
                    var i = Object.defineProperty && Object.getOwnPropertyDescriptor;
                    for (var a in e)
                        if (Object.prototype.hasOwnProperty.call(e, a)) {
                            var r = i ? Object.getOwnPropertyDescriptor(e, a) : null;
                            r && (r.get || r.set) ? Object.defineProperty(n, a, r) : n[a] = e[a]
                        }
                }
                n.default = e, t && t.set(e, n);
                return n
            }(n("jk6M")),
            a = n("UxAg"),
            r = n("MjTa"),
            o = n("OcsD");

        function s() {
            if ("function" != typeof WeakMap) return null;
            var e = new WeakMap;
            return s = function() {
                return e
            }, e
        }
        var l = window.ajax,
            c = window.thover,
            u = window.nav,
            d = function() {
                return !window.al || !window.al.menu || window.isNewNavigation
            },
            f = !1,
            h = {
                enabled: function(e) {
                    return d() ? (window.isNewNavigation || ((0, o.removeClass)("_lm", window.bodyNode), (0, o.removeClass)("_lms", window.bodyNode)), !1) : (void 0 !== e && (e ? (0, o.replaceClass)("_lms", "_lm", window.bodyNode) : ((0, o.replaceClass)("_lm", "_lms", window.bodyNode), h.qsClose())), (0, o.hasClass)("_lm", window.bodyNode))
                },
                opened: function() {
                    return (0, o.hasClass)("lm_opened", window.bodyNode)
                },
                toggle: function(e, t) {
                    return !!(0, o.checkEvent)(e) || (!!d() || (h.opened() ? h.close(e, t) : h.open(e, t), !1))
                },
                open: function(e) {
                    var t = window.zlayer;
                    if ((0, o.checkEvent)(e)) return !0;
                    if (d()) return !0;
                    if (h.opened()) return !1;
                    if (t && t.opened()) return !1;
                    if (!h.enabled()) return u.go("/"), !1;
                    h.clear_hover();
                    var n = (0, o.ce)("div", {
                            id: "m_helper",
                            onclick: h.close
                        }),
                        i = h._st || 0,
                        a = (0, o.scrollTop)(),
                        r = (0, o.ge)("l"),
                        s = (0, o.ge)("m"),
                        c = (0, o.ge)("vk_wrap"),
                        f = ((0, o.geByClass1)("head_search", r), c.offsetWidth),
                        p = s.offsetWidth,
                        A = s.offsetHeight;
                    if (!(f >= 882)) {
                        (0, o.append)(n, "m"), h.fixed ? ((0, o.addClass)("lm_opened", window.bodyNode), (0, o.addClass)("lm_anim_start", c), setTimeout(function() {
                            (0, o.replaceClass)("lm_anim_start", "lm_anim lm_anim_end", c)
                        }, 5), setTimeout(function() {
                            (0, o.removeClass)("lm_anim_end", c), (0, o.removeClass)("lm_anim", c)
                        }, 200), (0, o.addEvent)(s, "touchmove", h.blockScroll)) : (0, o.addClass)("lm_opened", window.bodyNode);
                        var m = r.offsetHeight;
                        return f >= 480 ? i = a <= m - (0, o.getCh)() ? Math.min(a, m - (0, o.getCh)()) : 0 : a < i ? i = a : a - i > A - m && A > m && (i = a - A + m), h._st = Math.max(0, a - i), h._mw = p, h.fix_size(!1), h.fixed || (0, o.scrollTop)(i), l.post("/", {
                            _ajax: 1,
                            act: "ping"
                        }), window.lm_qsearch_counter ? window.lm_qsearch_counter-- : window.lm_qsearch_counter = -1, window.lm_qsearch_counter > 0 && h.cancelSearch(), !1
                    }
                },
                close: function(e) {
                    if ((0, o.checkEvent)(e)) return !0;
                    if (d()) return !0;
                    if (!h.opened()) return !1;
                    (0, o.remove)("m_helper"), h.clear_hover();
                    var t = (0, o.scrollTop)(),
                        n = h._st + t,
                        i = (0, o.ge)("l"),
                        a = (0, o.ge)("m"),
                        r = (0, o.ge)("vk_wrap"),
                        s = ((0, o.geByClass1)("head_search", i), (0, o.ge)("vk_wrap").offsetWidth >= 480);
                    return h.fixed ? ((0, o.addClass)("lm_anim_end", r), setTimeout(function() {
                        (0, o.replaceClass)("lm_anim_end", "lm_anim lm_anim_start", r)
                    }, 5), setTimeout(function() {
                        (0, o.removeClass)("lm_anim_start", r), (0, o.removeClass)("lm_anim", r), (0, o.removeClass)("lm_opened", window.bodyNode)
                    }, 200), (0, o.removeEvent)(a, "touchmove", h.blockScroll)) : (0, o.removeClass)("lm_opened", window.bodyNode), h._st = s ? 0 : t, h.fix_size(!0), h.fixed || (0, o.scrollTop)(n), window.lm_qsearch_focused && h.cancelSearch(), !1
                },
                fix_size: function(e) {
                    var t = (0, o.ge)("l"),
                        n = (0, o.ge)("m"),
                        i = (0, o.ge)("mhead"),
                        a = i && i.offsetHeight || 0,
                        r = h._st || 0;
                    t && n && (e ? n.style.minHeight = "0" : (r = r > a ? r : 0, n.style.minHeight = t.offsetHeight + r + "px"), !h.fixed || (0, o.getCw)() < 320 ? e ? n.style.marginTop = "0" : (t.style.minHeight = (0, o.getCh)() + "px", n.style.marginTop = -r + "px") : t.style.minHeight = "0")
                },
                clear_hover: function() {
                    c.clear()
                },
                refreshCounters: function(e) {
                    if (window.isNewNavigation && (Tabbar.setCounter(Tabbar.TAB_ID_NOTIFICATION, e[2]), Tabbar.setCounter(Tabbar.TAB_ID_MESSAGES, e[3])), !e || !e.length) return !0;
                    if (!window.al || !window.al.menu) return !0;
                    if (e.length != window.al.menu.length) return !1;
                    var t = window.al,
                        n = (0, o.geByClass1)("main_menu", "l"),
                        i = e[2];
                    return "number" == typeof i && isFinite(i) && (Bell.setCount(i), window.store && (store.notificationsCount = i)), (0, o.each)(e, function(e, i) {
                        if (void 0 === i) return !0;
                        var a = t.menu[e],
                            r = (0, o.geByClass1)("mmi_" + a[0], n),
                            s = (0, o.geByClass1)("mm_item", r),
                            c = (0, o.geByClass1)("mmi_wrap", r),
                            u = (0, o.geByClass1)("mm_counter", c);
                        (0, o.attr)(s, "data-href", !1), i ? (a[3] && (0, o.attr)(s, "href", a[3]), u ? (0, o.val)(u, i) : (0, o.append)((0, o.ce)("em", {
                            className: "mm_counter",
                            innerHTML: i
                        }), c)) : (a[2] && (0, o.attr)(s, "href", a[2]), (0, o.remove)(u)), l.prepare_click(s)
                    }), !0
                },
                refresh: function(e) {
                    e = e || {}, l.refreshLinks(e.fv_link, e.app_link), void 0 !== e.pp && !1 !== e.pp && (0, o.val)("lm_prof_panel", e.pp), void 0 !== e.tn && !1 !== e.tn && (0, o.val)("lm_top_notify", e.tn), void 0 !== e.bn && !1 !== e.bn && (0, o.val)("lm_bottom_notify", e.bn), e.lm && (0, o.val)("l", e.lm), e.counters && h.refreshCounters(e.counters), e.tab && Tabbar.setCurrentId(e.tab), e.topbar || (0, o.remove)("vk_topbar")
                },
                initEvents: function() {
                    (0, o.onBodyResize)(function() {
                        var e = (0, o.ge)("vk_wrap").offsetWidth,
                            t = (0, o.hasClass)("_hfixed", window.bodyNode);
                        e >= 882 && h.close(), h.fix_size(!h.opened(), t)
                    })
                },
                init: function() {
                    h.fixed = (0, o.hasClass)("_hfixed", window.bodyNode), h.initEvents(), (0, o.addEvent)(window, "orientationchange", function() {
                        var e = (0, o.ge)("vk_wrap").offsetWidth,
                            t = h._st || 0;
                        e >= 882 && t > 44 && h.close()
                    });
                    var e = (0, a.$)(".leftMenu__content");
                    e && (0, r.setScrollView)(e, {
                        topBanner: !!i.default.ipad && void 0,
                        overscrollY: !1,
                        standalone: !0
                    })
                },
                blockScroll: function(e) {
                    var t = (0, o.ge)("vk_wrap");
                    h.opened() && (0, o.getW)(t) < 882 && (0, o.preventEvent)(e)
                },
                qsOpened: !1,
                qsOpen: function() {
                    h.qsOpened || (h.qs_st = (0, o.scrollTop)(), (0, o.addClass)("qs_opened", "vk_wrap"), (0, o.addClass)("qs_opened", window.bodyNode), (0, o.getW)("vk_wrap") < 882 && (0, o.scrollTop)(0), h.qsOpened = !0)
                },
                qsClose: function() {
                    h.qsOpened && ((0, o.removeClass)("qs_opened", "vk_wrap"), (0, o.removeClass)("qs_opened", window.bodyNode), (0, o.getW)("vk_wrap") < 882 && (0, o.scrollTop)(h.qs_st || 0), h.qsOpened = !1)
                },
                initSearch: function() {
                    f || (f = !0, (0, o.addEvent)("lm_search_items", "mousedown touchstart", function(e) {
                        e.stopPropagation()
                    }, {
                        passive: !0
                    }), (0, o.addEvent)((0, o.geByClass1)("head_search", "l"), "mousedown touchstart", function(e) {
                        e.stopPropagation()
                    }, {
                        passive: !0
                    }), (0, o.addEvent)(document, "mousedown touchstart", function(e) {
                        (0, o.ge)("vk_wrap");
                        h.qsOpened && (h.qsClose(), (0, o.elblur)("lm_search_field"))
                    }, {
                        passive: !0
                    }))
                },
                closeSearch: function() {
                    return !!d() || (window.lm_qsearch && window.lm_qsearch.blur(), h.qsClose(), !1)
                },
                cancelSearch: function() {
                    return !!d() || (window.lm_qsearch && window.lm_qsearch.clear(), h.qsClose(), !1)
                },
                headerAction: function(e, t) {
                    return (0, o.getW)("vk_wrap") >= 882 ? u.go(e, t) : h.toggle()
                }
            };
        window.menu = h
    },
    "5oy5": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("gLrT")) && i.__esModule ? i : {
            default: i
        };
        var r = function(e) {
            var t = window.lang,
                n = Wd.html({
                    tag: "span",
                    class: "Cart__price-total",
                    inner: Wd.wrap((0, a.default)(e.totalPrice, e.priceTemplate))
                }),
                i = langNumeric(e.count, t.mobile_market_cart_total).replace("{items}", e.count).replace("{price}", n);
            return {
                tag: "span",
                class: "Cart__price-inner",
                inner: Wd.wrap(i)
            }
        };
        t.default = r
    },
    "5qQ6": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("CKxJ")) && i.__esModule ? i : {
            default: i
        };
        var r = a.default;
        t.default = r, window.uMsg = a.default
    },
    "5s+S": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.ModalMenuUserListItem = function(e) {
            return {
                class: "ModalMenuUserList__item",
                href: e.href,
                onclick: e.onclick ? e.onclick : null,
                inner: [{
                    tag: "img",
                    class: "ModalMenuUserList__itemAvatar",
                    src: e.image
                }, {
                    class: "ModalMenuUserList__itemName",
                    inner: e.name
                }]
            }
        }, t.default = void 0;
        var i, a = (i = n("v+Uj")) && i.__esModule ? i : {
            default: i
        };
        var r = function(e) {
            return {
                class: "ModalMenuUserList",
                inner: (0, a.default)({
                    inner: e.users
                })
            }
        };
        t.default = r
    },
    6: function(e, t, n) {
        e.exports = n("75Qd")
    },
    "6ng+": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.AudioStats = void 0;
        var i, a, r = n("XLUH"),
            o = n("BJj/");

        function s(e) {
            return function(e) {
                if (Array.isArray(e)) {
                    for (var t = 0, n = new Array(e.length); t < e.length; t++) n[t] = e[t];
                    return n
                }
            }(e) || function(e) {
                if (Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e)) return Array.from(e)
            }(e) || function() {
                throw new TypeError("Invalid attempt to spread non-iterable instance")
            }()
        }

        function l() {
            return (l = Object.assign || function(e) {
                for (var t = 1; t < arguments.length; t++) {
                    var n = arguments[t];
                    for (var i in n) Object.prototype.hasOwnProperty.call(n, i) && (e[i] = n[i])
                }
                return e
            }).apply(this, arguments)
        }

        function c(e, t) {
            return function(e) {
                if (Array.isArray(e)) return e
            }(e) || function(e, t) {
                if (!(Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e))) return;
                var n = [],
                    i = !0,
                    a = !1,
                    r = void 0;
                try {
                    for (var o, s = e[Symbol.iterator](); !(i = (o = s.next()).done) && (n.push(o.value), !t || n.length !== t); i = !0);
                } catch (e) {
                    a = !0, r = e
                } finally {
                    try {
                        i || null == s.return || s.return()
                    } finally {
                        if (a) throw r
                    }
                }
                return n
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance")
            }()
        }

        function u(e, t) {
            for (var n = 0; n < t.length; n++) {
                var i = t[n];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        }

        function d(e, t, n) {
            return t in e ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = n, e
        }
        var f = (d(i = {}, "start", 1), d(i, "stop", 2), d(i, "volume", 3), d(i, "rewind", 4), d(i, "play_further", 5), d(i, "added", 6), d(i, "removed", 7), i),
            h = (d(a = {}, "default", 1), d(a, "next_track", 2), d(a, "prev_track", 3), d(a, "auto", 4), d(a, "interruption", 5), d(a, "pause", 6), d(a, "new", 7), d(a, "close_app", 8), d(a, "queue", 9), d(a, "pause", 10), d(a, "upload", 11), a),
            p = 300,
            A = function() {
                function e(t) {
                    ! function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, e), this.playerAdapter = t, this.listenedData = null, this.sendTimeout = null, this.currentAudioId = null, this.currentAudioTrackCode = null, this.pausedAudioId = null, this.playlistChanged = !1, this.currentPosition = 0, this.currentListened = 0, this.playedTime = 0, this.adsCompleted = !1, this.wasEnded = !1, this.debug = t.isDebug(), this.onVolume = (0, o.debounce)(this.onVolume.bind(this), p), this.playerAdapter.listenPlay(this.onPlay, this), this.playerAdapter.listenPause(this.onPause, this), this.playerAdapter.listenProgress(this.onProgress, this), this.playerAdapter.listenVolume(this.onVolume, this), this.playerAdapter.listenSeek(this.onSeek, this), this.playerAdapter.listenPlaylistChanged(this.onPlaylistChanged, this), this.playerAdapter.listenEnded(this.onEnded, this), this.playerAdapter.listenPlayNext(this.onPlayNext, this), this.playerAdapter.listenAdCompleted(this.onAdCompleted, this), this.onPageClose = this.onPageClose.bind(this), addEvent(window, "beforeunload", this.onPageClose)
                }
                var t, n, i;
                return t = e, (n = [{
                    key: "canOperate",
                    value: function() {
                        return !this.playerAdapter.isPodcast() && !this.playerAdapter.isAdPlaying() && this.playerAdapter.useNewStats()
                    }
                }, {
                    key: "getCurrentAudioParams",
                    value: function() {
                        var e = this.currentAudioId || this.playerAdapter.getAudioId();
                        if (e) {
                            var t = c(e.split("_"), 2);
                            return {
                                ownerId: t[0],
                                audioId: t[1],
                                trackCode: this.currentAudioTrackCode || this.playerAdapter.getAudioTrackCode()
                            }
                        }
                        return {}
                    }
                }, {
                    key: "getEnvParams",
                    value: function() {
                        return {
                            state: this.playerAdapter.getState(),
                            context: this.playerAdapter.getContext(),
                            ref: window.cur && vk.widget ? String(cur.widgetReferrer || "").substring(0, 20) : ""
                        }
                    }
                }, {
                    key: "getListenedTime",
                    value: function() {
                        return Math.round(this.playerAdapter.getListenedTime()) || 0
                    }
                }, {
                    key: "getPlaySubtype",
                    value: function() {
                        if (this.playerAdapter.isAutoPlayed()) return "auto";
                        var e = this.playerAdapter.getSequence();
                        if (e) return e > 0 ? "next_track" : "prev_track";
                        var t = this.pausedAudioId,
                            n = this.playerAdapter.getAudioId();
                        return t && n === t ? "pause" : "new"
                    }
                }, {
                    key: "onAdded",
                    value: function(e) {
                        this.sendCurrentAudioEvent({
                            type: "added",
                            subtype: e.subtype || this.getPlaySubtype(),
                            ownerId: e.ownerId,
                            audioId: e.id,
                            trackCode: e.trackCode,
                            state: this.playerAdapter.getState(),
                            ref: window.cur && vk.widget ? String(cur.widgetReferrer || "").substring(0, 20) : "",
                            context: e.context,
                            playlistId: e.playlistId
                        })
                    }
                }, {
                    key: "onRemoved",
                    value: function(e) {
                        this.sendCurrentAudioEvent({
                            type: "removed",
                            subtype: e.subtype || this.getPlaySubtype(),
                            ownerId: e.ownerId,
                            audioId: e.id,
                            trackCode: e.trackCode,
                            state: this.playerAdapter.getState(),
                            ref: window.cur && vk.widget ? String(cur.widgetReferrer || "").substring(0, 20) : "",
                            context: e.context,
                            playlistId: e.playlistId
                        })
                    }
                }, {
                    key: "onUploaded",
                    value: function(e) {
                        this.sendCurrentAudioEvent({
                            type: "added",
                            subtype: "upload",
                            ownerId: e.ownerId,
                            audioId: e.id,
                            trackCode: e.trackCode,
                            state: this.playerAdapter.getState(),
                            ref: window.cur && vk.widget ? String(cur.widgetReferrer || "").substring(0, 20) : "",
                            context: e.context,
                            playlistId: e.playlistId
                        })
                    }
                }, {
                    key: "onPlay",
                    value: function() {
                        if (this.canOperate()) {
                            var e = this.playerAdapter.getAudioId(),
                                t = this.currentAudioId === e,
                                n = this.playerAdapter.getListenedTime();
                            t || this.onTrackSwitch(this.currentAudioId, this.currentAudioTrackCode, this.currentPlaylistId, e), this.playedTime = vkNow(), this.currentAudioId = e, this.currentAudioTrackCode = this.playerAdapter.getAudioTrackCode(), this.currentPlaylistId = this.playerAdapter.getPlaylistId(), this.wasEnded || this.playerAdapter.hasPrevAudio() && (!this.pausedAudioId || this.playerAdapter.isAutoPlayed()) ? (this.currentPosition = 0, n = 0) : this.currentPosition = this.playerAdapter.getProgressInSeconds(), this.currentListened = n, this.sendCurrentAudioEvent({
                                type: "start",
                                subtype: this.getPlaySubtype(),
                                position: this.currentPosition,
                                listened: n
                            }), this.pausedAudioId = null, this.playlistChanged = !1, this.wasEnded = !1
                        }
                    }
                }, {
                    key: "onPause",
                    value: function() {
                        var e = this;
                        this.canOperate() && (this.pausedAudioId = this.playerAdapter.getAudioId(), this.collectListenedData(), this.sendListenedDataDelayed(1e3), setTimeout(function() {
                            if (!(vkNow() - e.playedTime < 150)) {
                                var t = e.playerAdapter.getPausedBy(e.playedTime);
                                e.sendCurrentAudioEvent({
                                    type: "stop",
                                    subtype: t ? "queue" === t ? "queue" : "interruption" : "pause"
                                })
                            }
                        }))
                    }
                }, {
                    key: "onProgress",
                    value: function() {
                        this.currentPosition = this.playerAdapter.getProgressInSeconds(), this.currentListened = this.playerAdapter.getListenedTime(), !this.pausedAudioId && vkNow() - this.playedTime > 150 && this.collectListenedData(), this.adsCompleted && (this.sendCurrentAudioEvent({
                            type: "start",
                            subtype: this.getPlaySubtype(),
                            position: this.currentPosition
                        }), this.adsCompleted = !1)
                    }
                }, {
                    key: "onVolume",
                    value: function() {
                        this.canOperate() && this.sendCurrentAudioEvent({
                            type: "volume",
                            subtype: "default"
                        })
                    }
                }, {
                    key: "onSeek",
                    value: function() {
                        if (this.canOperate()) {
                            var e = {
                                position: this.currentPosition,
                                positionTo: this.playerAdapter.getProgressInSeconds()
                            };
                            e.position !== e.positionTo && this.sendCurrentAudioEvent(l({
                                type: "rewind",
                                subtype: "default"
                            }, e))
                        }
                    }
                }, {
                    key: "onPlaylistChanged",
                    value: function() {
                        this.canOperate() && (this.playlistChanged = !0)
                    }
                }, {
                    key: "onEnded",
                    value: function() {
                        this.listenedData && this.playerAdapter.isLastTrack() && (this.listenedData.end_stream_reason = "session_end"), this.wasEnded = !0, this.playerAdapter.isRepeatCurrentAudio() ? (this.sendCurrentAudioEvent({
                            type: "stop",
                            subtype: "auto"
                        }), this.collectListenedData(), this.sendListenedData()) : this.sendListenedDataDelayed(150)
                    }
                }, {
                    key: "onPlayNext",
                    value: function(e, t) {
                        if (this.canOperate()) {
                            var n = c(t.split("_"), 2),
                                i = n[0],
                                a = n[1];
                            this.sendAudioEvent({
                                type: "play_further",
                                subtype: "default",
                                ownerId: i,
                                audioId: a
                            })
                        }
                    }
                }, {
                    key: "onAdCompleted",
                    value: function() {
                        this.playerAdapter.useNewStats() && (this.adsCompleted = !0)
                    }
                }, {
                    key: "onTrackSwitch",
                    value: function(e, t, n) {
                        if (e) {
                            var i = "new",
                                a = this.playerAdapter.getSequence(),
                                r = c(e.split("_"), 2),
                                o = r[0],
                                s = r[1];
                            this.playerAdapter.isAutoPlayed() ? i = "auto" : a && (i = a > 0 ? "next_track" : "prev_track"), this.sendCurrentAudioEvent({
                                type: "stop",
                                subtype: i,
                                position: this.currentPosition,
                                listened: this.currentListened,
                                trackCode: t,
                                playlistId: n,
                                ownerId: o,
                                audioId: s
                            })
                        }
                        this.wasEnded = !0, this.collectListenedDataSwitch(), this.sendListenedData()
                    }
                }, {
                    key: "onPageClose",
                    value: function() {
                        this.playerAdapter.isPlaying() && (this.sendCurrentAudioEvent({
                            type: "stop",
                            subtype: "close_app"
                        }), this.sendListenedData())
                    }
                }, {
                    key: "collectListenedDataSwitch",
                    value: function() {
                        if (this.listenedData) {
                            if ("session_end" === this.listenedData.end_stream_reason) return;
                            var e = this.playerAdapter.isAutoPlayed(),
                                t = this.getListenedTime(),
                                n = this.playerAdapter.getSequence(),
                                i = null;
                            n && !e ? i = n > 0 ? "next_btn" : "prev" : this.playlistChanged && (i = "playlist_change"), !i && e && (i = "playlist_next"), this.listenedData.end_stream_reason = i || "new", t && (this.listenedData.listened = t)
                        }
                    }
                }, {
                    key: "collectListenedData",
                    value: function() {
                        if (this.canOperate()) {
                            var e = this.playerAdapter.getAudioId(),
                                t = this.playerAdapter.getAudioTrackCode(),
                                n = this.getListenedTime();
                            if (n) {
                                var i = {
                                    audio_id: e,
                                    listened: n,
                                    context: this.playerAdapter.getContext()
                                };
                                window.cur && vk.widget && (i.ref = cur.widgetReferrer || ""), this.playerAdapter.hasSearchParams() && (i.search_params = JSON.stringify(this.playerAdapter.getSearchParams())), this.playerAdapter.hasPlaylist() && (this.playerAdapter.isRealPlaylist() && (i.playlist_id = this.playerAdapter.getPlaylistId()), this.playerAdapter.isShuffledPlaylist() && (i.shuffled = 1)), t && (i.track_code = t), this.playerAdapter.isRepeatCurrentAudio() ? i.repeat = "one" : this.playerAdapter.isRepeatAll() && (i.repeat = "all"), this.playerAdapter.isAutoPlayed() && (i.auto = 1), this.playerAdapter.hasPrevAudio() && (i.prev_audio_id = this.playerAdapter.getPrevAudioId()), this.playerAdapter.hasPrevPlaylist() && this.playerAdapter.isRealPrevPlaylist() && (i.prev_playlist_id = this.playerAdapter.getPrevPlaylistId()), this.playerAdapter.isPlaying() || (i.end_stream_reason = "stop_btn"), i.state = document.hidden ? "background" : "app", this.listenedData = i, this.sendListenedDataDelayed(1e4)
                            }
                        }
                    }
                }, {
                    key: "sendListenedData",
                    value: function() {
                        clearTimeout(this.sendTimeout);
                        var e = this.listenedData;
                        this.listenedData = null, e && e.listened && this.playerAdapter.sendListenedData(e)
                    }
                }, {
                    key: "sendListenedDataDelayed",
                    value: function() {
                        var e = this,
                            t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0;
                        clearTimeout(this.sendTimeout), this.sendTimeout = setTimeout(function() {
                            return e.sendListenedData()
                        }, t)
                    }
                }, {
                    key: "serializeEvent",
                    value: function(e) {
                        var t = [f[e.type], h[e.subtype], 1];
                        return e.audioId ? t.push(e.ownerId + "_" + e.audioId) : t.push(0), e.trackCode ? t.push(e.trackCode) : t.push(0), e.state ? t.push(e.state) : t.push(r.UNKNOWN_STATE), e.ref ? t.push(e.ref) : t.push(""), e.context ? t.push(e.context) : t.push("other"), e.volume || 0 === e.volume ? t.push(e.volume) : t.push(this.playerAdapter.getVolume()), e.position || 0 === e.position ? t.push(e.position) : t.push(this.playerAdapter.getProgressInSeconds()), e.shuffle ? t.push(e.shuffle ? 1 : 0) : t.push(0), e.repeat ? t.push(e.repeat) : t.push(0), e.listened ? t.push(Math.max(e.listened, 0)) : t.push(0), e.playlistId ? t.push(e.playlistId) : t.push(0), e.positionTo && t.push(e.positionTo), t
                    }
                }, {
                    key: "sendEvent",
                    value: function(e) {
                        this.debug && (console.log("audio stats event", e.type, e.subtype, e), window._statForTest || (window._statForTest = []), window._statForTest.push(e)), statlogsValueEvent.apply(void 0, ["audio_sts"].concat(s(this.serializeEvent(e))))
                    }
                }, {
                    key: "sendCurrentAudioEvent",
                    value: function(e) {
                        this.sendEvent(l({
                            shuffle: this.playerAdapter.isShuffledPlaylist(),
                            repeat: this.playerAdapter.isRepeatCurrentAudio() ? 1 : this.playerAdapter.isRepeatAll() ? 2 : 0,
                            volume: this.playerAdapter.getVolume(),
                            position: this.playerAdapter.getProgressInSeconds(),
                            listened: this.getListenedTime(),
                            playlistId: this.playerAdapter.getPlaylistId()
                        }, this.getEnvParams(), this.getCurrentAudioParams(), e))
                    }
                }, {
                    key: "sendAudioEvent",
                    value: function(e) {
                        this.sendEvent(l({}, e, this.getEnvParams()))
                    }
                }, {
                    key: "destroy",
                    value: function() {
                        this.playerAdapter.unListenAll(), removeEvent(window, "beforeunload", this.onPageClose), this.playerAdapter = null, this.listenedData = null, clearTimeout(this.sendTimeout)
                    }
                }]) && u(t.prototype, n), i && u(t, i), e
            }();
        t.AudioStats = A
    },
    "702z": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.registerQueue = function(e, t) {
            a[e] = {
                pending: [],
                failed: [],
                items: {},
                onSend: t.onSend,
                onStopped: t.onStopped,
                maxFails: 0 | t.maxFails,
                loaded: !1,
                sendingItemId: null,
                backoffTimer: null
            }, r[e] = o
        }, t.queueAddItem = function(e, t, n) {
            var i = {
                    id: t,
                    data: n,
                    fails: 0
                },
                r = a[e];
            l(e, t), r.items[t] = i, r.pending.push(t), u(e), d(e)
        }, t.queueRemoveItem = l, t.queueGetItem = function(e, t) {
            return a[e].items[t] || null
        }, t.queueGetSize = function(e) {
            var t = a[e];
            if (!t) return 0;
            return t.pending.length
        }, t.queueSignalSuccess = function(e) {
            var t = a[e],
                n = t.sendingItemId;
            n && (t.pending[0] === n && t.pending.shift(), delete t.items[n]);
            r[e] = o, t.sendingItemId = null, u(e), d(e)
        }, t.queueSignalFail = function(e) {
            var t = a[e],
                n = t.sendingItemId;
            if (n && t.pending[0] === n) {
                var i = t.items[n];
                if (i && (i.fails += 1, i.fails >= t.maxFails)) return void c(e)
            }
            r[e] = o, t.sendingItemId = null, u(e)
        }, t.queueSignalStop = c, t.queueGetItems = function(e) {
            var t = a[e],
                n = t.pending,
                i = t.failed,
                r = t.items;
            return {
                pending: n,
                failed: i,
                items: r
            }
        }, t.queueWhenReady = function(e) {
            var t = a[e];
            if (t.loaded) return Promise.resolve();
            if (t.retrieving) return t.retrieving;
            return t.retrieving = function(e) {
                return new Promise(function(t) {
                    var n = (0, i.lsGet)("q_".concat(e)) || {
                        items: {},
                        pending: [],
                        failed: []
                    };
                    n.failed = n.failed.concat(n.pending).filter(function(e) {
                        return !!n.items[e]
                    }), n.pending = [], t(n)
                })
            }(e).then(function(t) {
                var n = t.pending,
                    i = t.failed,
                    r = t.items,
                    o = a[e];
                o.retrieving = null, o.loaded = !0, o.pending = n, o.failed = i, o.items = r
            }), t.retrieving
        };
        var i = n("OcsD"),
            a = {},
            r = {},
            o = "idle",
            s = "sending";

        function l(e, t) {
            var n = a[e];
            delete n.items[t];
            var i = n.pending.indexOf(t),
                r = n.failed.indexOf(t); - 1 !== i && n.pending.splice(i, 1), -1 !== r && n.failed.splice(r, 1), d(e)
        }

        function c(e) {
            var t = a[e];
            t.failed = t.failed.concat(t.pending), t.pending = [], r[e] = o, t.sendingItemId = null, t.onStopped(), d(e)
        }

        function u(e, t) {
            if (!1 !== navigator.onLine) {
                var n = a[e];
                if (r[e] !== s && n.pending.length && !n.backoffTimer) {
                    var i = n.pending[0],
                        o = n.items[i];
                    if (!o.fails || t) r[e] = s, n.sendingItemId = i, n.onSend(o.id, o.data);
                    else {
                        var l = Math.pow(2, Math.max(o.fails - 2, 0));
                        n.backoffTimer = setTimeout(function() {
                            n.backoffTimer = null, u(e, !0)
                        }, 1e3 * l)
                    }
                }
            }
        }

        function d(e) {
            var t = a[e],
                n = t.pending,
                r = t.failed,
                o = t.items;
            (0, i.lsSet)("q_".concat(e), {
                pending: n,
                failed: r,
                items: o
            })
        }
        window.addEventListener("online", function() {
            Object.keys(a).forEach(function(e) {
                u(e)
            })
        })
    },
    "75Qd": function(e, t, n) {
        "use strict";
        n("XCiN");
        var i = n("OcsD");
        n("CQvH"), n("a0wW"), n("z9sQ"), n("+cqQ"), n("TYsd");
        var a = f(n("Cbap")),
            r = n("tgcV"),
            o = n("BZzM"),
            s = (d(n("eGQV")), f(n("saGk")));
        n("uQjJ");
        var l = d(n("jk6M"));
        n("wcVR"), n("kr3z"), n("+jUy"), n("GMrv"), n("+YbT"), n("T24x");
        var c = n("W9Tc");

        function u() {
            if ("function" != typeof WeakMap) return null;
            var e = new WeakMap;
            return u = function() {
                return e
            }, e
        }

        function d(e) {
            if (e && e.__esModule) return e;
            var t = u();
            if (t && t.has(e)) return t.get(e);
            var n = {};
            if (null != e) {
                var i = Object.defineProperty && Object.getOwnPropertyDescriptor;
                for (var a in e)
                    if (Object.prototype.hasOwnProperty.call(e, a)) {
                        var r = i ? Object.getOwnPropertyDescriptor(e, a) : null;
                        r && (r.get || r.set) ? Object.defineProperty(n, a, r) : n[a] = e[a]
                    }
            }
            return n.default = e, t && t.set(e, n), n
        }

        function f(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }

        function h(e, t) {
            return function(e) {
                if (Array.isArray(e)) return e
            }(e) || function(e, t) {
                if (!(Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e))) return;
                var n = [],
                    i = !0,
                    a = !1,
                    r = void 0;
                try {
                    for (var o, s = e[Symbol.iterator](); !(i = (o = s.next()).done) && (n.push(o.value), !t || n.length !== t); i = !0);
                } catch (e) {
                    a = !0, r = e
                } finally {
                    try {
                        i || null == s.return || s.return()
                    } finally {
                        if (a) throw r
                    }
                }
                return n
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance")
            }()
        }
        n("wMVj"), n("gUYQ"), n("AeId"), n("Gzds"), n("kYGI"), n("5c+v"), n("tsGB"), n("mOHq"), n("nlPs"), n("gNTM"), n("eoxF"), n("ohv3"), n("giB6"), n("vZUn"), n("9EK6"), n("pBF5"), n("i0zL"), n("ldCb"), n("A+9M"), n("TORN"), n("rulp"), n("K0hv"), n("42eR"), n("wyHI"), n("o3gn"), n("3Xw1"), n("G0UO"), n("Mc5h"), n("BoyB"), n("O5lf"), n("9y81"), n("AXyT"), n("gy8s"), n("KMpi"), n("r/ag"), n("AgBx"), n("TuGt"), n("V1Rh"), n("29dZ"), n("p5n7"), n("7tQU"), n("3+oY"), n("Q8gl"), n("DG1x"), n("v+Uj"), n("9Cbe"), n("lcib"), n("RikE"), n("1Qy5"), n("V4qE"), n("HON1"), n("QQoL"), n("rKUZ"), n("wTbK"), n("sXAB"), n("3Gnz"), n("nj7l"), n("Qg0H"), n("1IPy"), n("0Ezr"), n("OcB7"), n("XlF1"), n("Bqje"), n("gTod"), n("yEBz"), n("r2Pq"), n("9HII"), n("8t6d"), n("LBNP"), n("HDU4"), n("blmJ"), n("i8t0"), n("RVJ9"), n("B9v3"), n("L1lF"), n("GVjC"), n("hb+4"), n("5aPh"), n("GDYn"), n("bRFj"), n("eyw1"), n("iE+E"), n("yuVR"), n("vys4"), n("QcsT"), n("U34x"), n("P+Xc"), n("l51W"), n("BLcx"), n("nXjO"), n("onYX"), n("BQMu"), n("zHNa"), n("zouF"), n("wCFN"), n("sVNd"), n("OGWK"), n("ciqL"), n("zEUu"), n("tqja"), n("yZoT"), n("sZWN"), n("VLMK"), n("KWgi"), n("iN5q"), n("M9zQ"), n("Ny8a"), n("yXty"), n("hxrZ"), n("jLRy"), n("98L6"), n("gunf"), n("m9bs"), n("MzAf"), n("Dh0N"), n("fYoA"), n("h27l"), n("p/K1"), n("03kU"), n("4qiT"), n("Tjn9"), n("tlL+"), n("w1QQ"), n("DVnk"), n("cLcH"), n("uo4j"), n("Fhlr"), n("RHkR"), n("eFmH"), n("aXSb"), n("WeE2"), n("WCKs"), n("XLP4"), n("Ivtq"), n("NBPr"), n("bYEY"), n("MUoB"), n("OnSo"), n("fP8X"), n("LTt1"), n("mXGF"), n("is+u"), n("jXv2"), n("pOpT"), n("T9Df"), n("GLI1"), n("tqgD"), n("HpMb"), n("AkSq"), n("9uOJ"), n("mz6W"), n("EYkR"), n("jMiB"), n("s0Xw"), n("pWCx"), n("VAls"), n("zGVo"), n("HbvZ"), (0, r.initStaticManager)(), window.SpecialEvent = s.default;
        var p = window,
            A = p.onDOMReady;
        p.clog;
        (0, i.addEvent)(window, "scroll touchmove", function() {
            (0, i.onBodyScroll)(!0)
        }, {
            passive: !0
        });
        var m = window,
            _ = m.thover,
            v = m.ajax;

        function g() {
            if ((0, i.lsGet)("custom_opts")) return (0, i.addClass)("_copts", "vk_wrap");
            var e = (0, i.ce)("div", {
                innerHTML: '<input id="copts_test_radio" type="radio" checked="checked"><div id="copts_test_label"></div>'
            });
            (0, i.append)(e, "vk_utils");
            var t = (0, i.ge)("copts_test_label");
            t && Math.abs(t.offsetWidth - 5) < 1 && ((0, i.addClass)("_copts", "vk_wrap"), (0, i.lsSet)("custom_opts", 1)), (0, i.remove)(e)
        }(0, i.addEvent)(document, "touchmove touchcancel", _.cancel), (0, i.addEvent)(document, "touchend", _.end);
        var y = window.page;
        v._init(), v.enabled = !!v._req, v.enabled && (A(function() {
            (0, i.remove)("app_go_frame"), v.prepare_click(), k && k.init(), E && E.initAudio(), (0, i.addClass)("_js", "vk_wrap")
        }), y.clear()), y.onChange(function() {
            return a.default.getRouter().checkRoutes()
        }), A(function() {
            a.default.getRouter().checkRoutes()
        }), A(o.resizePosters), (0, i.addEvent)(window, "resize", o.resizePosters), (0, i.addEvent)(document, "touchstart", function(e) {
            var t = (0, i.checkTouchHover)(e.target);
            _.clear(), t && _.start.call(t, e)
        }), (0, i.addEvent)(document, "click", function(e) {
            var t = window.al;
            if (window.al && t.ver) {
                var n = (0, i.gpeByClass)("al_after", e.target);
                if (n) {
                    var a = (0, i.attr)(n, "data-target"),
                        r = !!a && (0, i.geByClass1)(a, n);
                    if (r && !w.go_after(r, e) || !w.go_after(n, e)) return
                }
                var o = (0, i.checkNav)(e.target, {
                    allow_post_away: !0
                });
                if (o && (w.go(o, e) || (0, i.cancelEvent)(e)), "bookmarks" === cur.module) {
                    var s = e && e.target && (e.target.closest(".BookmarksItem_link") || e.target.closest(".BookmarkSlider__item") || e.target.closest(".OwnerRow"));
                    if (!s) return;
                    var l = h(s.getAttribute("id").match(/^(link|page)(-?\d+)_(-?\d+)?$/) || [], 4),
                        c = l[0],
                        u = l[1],
                        d = l[2],
                        f = l[3];
                    if (!(c && u && d && f)) return;
                    var p = !1;
                    switch (u) {
                        case "link":
                            p = e.target.closest('a[target="_blank"]');
                            break;
                        case "page":
                            p = e.target.closest(".OwnerRow__content") || e.target.closest(".OwnerColumn")
                    }
                    if (!p) return;
                    statlogsValueEvent("bookmarks_product_analytics", {
                        item_type: u,
                        item_owner_id: intval(d),
                        item_id: intval(f),
                        time: vk.ts + Math.floor(((new Date).getTime() - vk.started) / 1e3)
                    })
                }
            }
        }), (0, i.addEvent)(document, "submit", function(e) {
            var t = e.target;
            (0, i.hasClass)("vk_js_yes", geByTag1("html")) && !(0, i.hasClass)("opera_mini_yes", geByTag1("body")) && (0, i.hasClass)("qsearch", t) && (0, i.gpeByClass)("audioPage", t) && (geBySel1('[type="submit"]', t).click(), (0, i.cancelEvent)(e))
        }), (0, i.addEvent)(document, l.isTouch ? "touchstart" : "mousedown", function(e) {
            S.closeByTap(e)
        }), A(g), A(c.calculateTimeOffsets), (0, i.sgFix)();
        var b = window,
            w = b.nav,
            k = b.menu,
            E = b.audioplayer,
            S = b.tooltip,
            C = b.zlayer;
        A(function() {
            var e = window.vk;
            e && !e.id && (0, i.lsCheck)() && localStorage.clear()
        }), window.optionsTest = g, C.isReady = !0;
        try {
            n("3KRu")
        } catch (e) {
            console.error("Catched error: ", e)
        }
        window.isNewMail && (n("sc7o"), n("s0aB"), n("/Id8"), n("DkIl"), n("CkGd"), n("iS9e"), n("fWqt"), n("QBkA"), n("rKp0"), n("u33z"), n("5qQ6"), n("/Rzu"), n("B5sG"), n("M2vk"), n("HPEO"), n("irqS"));
        try {
            stManager.done("/js/cmodules/mobile/common.be7bd6e03a2ec9d62a92.js")
        } catch (e) {}
    },
    "77iS": function(e, t, n) {
        "use strict";

        function i() {
            if ("function" != typeof WeakMap) return null;
            var e = new WeakMap;
            return i = function() {
                return e
            }, e
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var a = function(e) {
            if (e && e.__esModule) return e;
            var t = i();
            if (t && t.has(e)) return t.get(e);
            var n = {};
            if (null != e) {
                var a = Object.defineProperty && Object.getOwnPropertyDescriptor;
                for (var r in e)
                    if (Object.prototype.hasOwnProperty.call(e, r)) {
                        var o = a ? Object.getOwnPropertyDescriptor(e, r) : null;
                        o && (o.get || o.set) ? Object.defineProperty(n, r, o) : n[r] = e[r]
                    }
            }
            n.default = e, t && t.set(e, n);
            return n
        }(n("Xeoq"));
        t.default = a
    },
    "7jQU": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), Object.defineProperty(t, "uTyping_getPeerTyping", {
            enumerable: !0,
            get: function() {
                return i.uTyping_getPeerTyping
            }
        }), Object.defineProperty(t, "uTyping_getNames", {
            enumerable: !0,
            get: function() {
                return i.uTyping_getNames
            }
        });
        var i = n("USu8")
    },
    "7lzo": function(e, t, n) {
        "use strict";
        var i;
        ((i = n("9CLW")) && i.__esModule ? i : {
            default: i
        }).default.onPostMessage(function(e) {
            "waiterStart" !== e && "3dsPage" !== e || document.activeElement && document.activeElement.blur()
        })
    },
    "7qNY": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i = r(n("DiaP")),
            a = r(n("29dZ"));

        function r(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        Object.assign(i.default, {
            accept: function(e, t, n) {
                a.default.setLoading(t, !0), ajaxRequest("/mail", {
                    act: "mrs_accept",
                    peer_id: n,
                    hash: store.mail.hash.mrs
                }, function(e) {
                    e.error && a.default.setLoading(t, !1)
                }, function() {
                    a.default.setLoading(t, !1)
                })
            },
            reject: function(e, t, n) {
                a.default.setLoading(t, !0), ajaxRequest("/mail", {
                    act: "mrs_reject",
                    peer_id: n,
                    hash: store.mail.hash.mrs
                }, function(e) {
                    e.error && a.default.setLoading(t, !1)
                }, function() {
                    a.default.setLoading(t, !1)
                })
            }
        });
        var o = i.default;
        t.default = o
    },
    "7tQU": function(e, t, n) {
        "use strict";
        var i = n("UxAg"),
            a = n("OcsD"),
            r = (0, a.need)("scrollToEl");
        (0, a.need)("page").onChange(s);
        var o = {
            anchorByHash: function(e) {
                return ".Anchor#".concat(e)
            }
        };

        function s(e) {
            if (e) {
                var t = e.split("#")[1],
                    n = t && !~t.indexOf("=") && (0, i.$)(o.anchorByHash(t));
                n && r(n)
            }
        }
    },
    "80md": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.Line = o, t.default = void 0;
        var i, a = n("/xuI"),
            r = (i = n("z9sQ")) && i.__esModule ? i : {
                default: i
            };

        function o() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                t = (0, a.getRandomId)("skeleton-line"),
                n = (0, a.stylesObjectToString)({}) + (e.style || ""),
                i = [r.default.class("SkeletonLine", {
                    small: e.small,
                    header: e.header
                }), e.class].filter(function(e) {
                    return e
                }).join(" ");
            return (0, a.applyAnimation)(t), {
                id: t,
                class: i,
                style: n,
                tag: "div"
            }
        }
        var s = o;
        t.default = s
    },
    "82vK": function(e, t, n) {
        "use strict";
        var i = n("UxAg"),
            a = c(n("+cqQ")),
            r = (n("jk6M"), c(n("AXyT"))),
            o = c(n("rKUZ")),
            s = function(e) {
                if (e && e.__esModule) return e;
                var t = l();
                if (t && t.has(e)) return t.get(e);
                var n = {};
                if (null != e) {
                    var i = Object.defineProperty && Object.getOwnPropertyDescriptor;
                    for (var a in e)
                        if (Object.prototype.hasOwnProperty.call(e, a)) {
                            var r = i ? Object.getOwnPropertyDescriptor(e, a) : null;
                            r && (r.get || r.set) ? Object.defineProperty(n, a, r) : n[a] = e[a]
                        }
                }
                n.default = e, t && t.set(e, n);
                return n
            }(n("NJSj"));

        function l() {
            if ("function" != typeof WeakMap) return null;
            var e = new WeakMap;
            return l = function() {
                return e
            }, e
        }

        function c(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }

        function u(e, t) {
            e.target.closest("a.convo__avatar") || (e.stopPropagation(), e.preventDefault(), s.default.onTap(t))
        }
        Object.assign(s.default, {
            onTap: (0, a.default)("url"),
            setOnline: function(e, t) {
                (0, i.$$)(".convo_id_".concat(e, " .convo__online")).forEach(function(e) {
                    e.outerHTML = (0, s.Convo__online)(t)
                })
            },
            setLastMsg: function(e, t, n) {
                var a = n.dateShort,
                    r = n.pending,
                    o = n.failed;
                (0, i.$$)(".convo_last.convo_id_".concat(e)).forEach(function(e) {
                    e.$(".convo__text").innerHTML = t, e.$(".convo__status").innerHTML = (0, s.Convo__rightStatus)({
                        pending: r,
                        failed: o
                    }), r || o ? (e.$(".convo__date").innerText = "", e.$(".convo__unreadBox").hidden = !0) : (e.$(".convo__date").innerText = a, e.$(".convo__unreadBox").hidden = !1)
                })
            },
            setTyping: function(e, t) {
                (0, i.$$)(".convo_last.convo_id_".concat(e)).forEach(function(e) {
                    var n = e.$(".convo__typing"),
                        i = t.typing;
                    if (t.typingCount && (!0 === i || Array.isArray(i))) {
                        var a = n.$(".typing"),
                            r = a && q.parseClass("typing", a.className);
                        a && r.animation === t.animation ? o.default.setTyping(a, t) : (e.classList.add("convo_typing"), n.innerHTML = (0, o.default)(t))
                    } else n.innerHTML = "", e.classList.remove("convo_typing")
                })
            },
            setUnreadCount: function(e, t) {
                (0, i.$$)(".convo_last.convo_id_".concat(e)).forEach(function(e) {
                    var n = e.$(".Oval");
                    e.classList.toggle("convo_unread", t > 0), e.classList.toggle("convo_unreadOut", t < 0), r.default.setValue(n, t)
                })
            },
            setImportant: function(e, t) {
                (0, i.$$)(".convo_id_".concat(e)).forEach(function(e) {
                    e.classList.toggle("convo_important", t)
                })
            }
        }), s.default._onClick = u
    },
    "8ZMO": function(e, t, n) {
        "use strict";
        var i;
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var a = ((i = n("iDzD")) && i.__esModule ? i : {
            default: i
        }).default;
        t.default = a
    },
    "8kEl": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("Y6JH")) && i.__esModule ? i : {
            default: i
        };
        var r = function(e) {
            return {
                class: "Photo__marketShowMoreButton",
                attrs: {
                    "data-items-json": e.items
                },
                inner: [{
                    class: "Photo__marketShowMoreButtonIcon",
                    inner: (0, a.default)("market", "market_16")
                }, getLang("mobile_photos_show_market_items")]
            }
        };
        t.default = r
    },
    "8mQl": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.AudioQueue = void 0;
        var i, a = n("L9Nh"),
            r = (i = n("r/ag")) && i.__esModule ? i : {
                default: i
            },
            o = n("BFfX");

        function s(e, t) {
            return function(e) {
                if (Array.isArray(e)) return e
            }(e) || function(e, t) {
                if (!(Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e))) return;
                var n = [],
                    i = !0,
                    a = !1,
                    r = void 0;
                try {
                    for (var o, s = e[Symbol.iterator](); !(i = (o = s.next()).done) && (n.push(o.value), !t || n.length !== t); i = !0);
                } catch (e) {
                    a = !0, r = e
                } finally {
                    try {
                        i || null == s.return || s.return()
                    } finally {
                        if (a) throw r
                    }
                }
                return n
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance")
            }()
        }

        function l(e, t) {
            for (var n = 0; n < t.length; n++) {
                var i = t[n];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        }
        var c = null,
            u = null,
            d = 0,
            f = function() {
                function e() {
                    ! function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, e)
                }
                var t, n, i;
                return t = e, i = [{
                    key: "connect",
                    value: function() {
                        var t = arguments.length > 0 && void 0 !== arguments[0] && arguments[0];
                        if (a.QueueManager.initialized) {
                            var n = window.audio.getCurrent(),
                                i = !t && c;
                            if (n && !i) {
                                var r = n.id.split("_"),
                                    o = s(r, 2),
                                    l = o[0],
                                    u = o[1];
                                ajax.post("/audio", {
                                    act: "queue_params",
                                    audio_id: u,
                                    owner_id: l,
                                    hash: n.action_hash
                                }, {
                                    onDone: function(t) {
                                        var n = t && t.queues && t.queues[0];
                                        n && e.subscribe(n)
                                    },
                                    onFail: function() {
                                        return d < 2 && (d++, setTimeout(e.connect, 5e3)), !0
                                    }
                                })
                            }
                        }
                    }
                }, {
                    key: "update",
                    value: function(t, n) {
                        if (t === c)
                            if (n.failed) e.connect(!0);
                            else
                                for (var i = window.audio.playing(), a = 0; a < n.events.length; a++) {
                                    var r = n.events[a].data;
                                    if ("start" === r.type && window.audio.getDeviceId() !== r.uuid && !e.startPlaybackBox && i) {
                                        window.audio.pause(), e.showMultipleStreamPopup(r);
                                        break
                                    }
                                }
                    }
                }, {
                    key: "showMultipleStreamPopup",
                    value: function(t) {
                        var n = e.createPopup(t.device_name);
                        r.default.open(n, !0, {
                            oncloseCallback: function() {
                                return e.startPlaybackBox = !1
                            }
                        }), document.querySelector(".AudioPopup__actionButton").addEventListener("click", function() {
                            r.default.close()
                        }), e.startPlaybackBox = !0
                    }
                }, {
                    key: "subscribe",
                    value: function(t) {
                        u && clearTimeout(u), c = t.key, a.QueueManager.addQueue({
                            key: t.key,
                            ts: t.timestamp
                        }, function(n, i) {
                            return e.update(t.key, i)
                        }), a.QueueManager.start(), u = setTimeout(function() {
                            return e.connect(!0)
                        }, 25e3)
                    }
                }, {
                    key: "createPopup",
                    value: function(e) {
                        return Wd.elem((0, o.AudioPopup)({
                            title: getLang("mobile_audio_start_playback_title"),
                            description: getLang("mobile_audio_start_playback_body").replace("{device_name}", e),
                            action_button: {
                                text: getLang("mobile_audio_continue")
                            }
                        }))
                    }
                }], (n = null) && l(t.prototype, n), i && l(t, i), e
            }();
        t.AudioQueue = f, f.startPlaybackBox = !1
    },
    "8t6d": function(e, t, n) {
        "use strict";
        var i = m(n("TYsd")),
            a = m(n("+cqQ")),
            r = m(n("WDxS")),
            o = m(n("jk6M")),
            s = n("fntf"),
            l = m(n("IXdz")),
            c = m(n("W12k")),
            u = n("LpA2"),
            d = function(e) {
                if (e && e.__esModule) return e;
                var t = A();
                if (t && t.has(e)) return t.get(e);
                var n = {};
                if (null != e) {
                    var i = Object.defineProperty && Object.getOwnPropertyDescriptor;
                    for (var a in e)
                        if (Object.prototype.hasOwnProperty.call(e, a)) {
                            var r = i ? Object.getOwnPropertyDescriptor(e, a) : null;
                            r && (r.get || r.set) ? Object.defineProperty(n, a, r) : n[a] = e[a]
                        }
                }
                n.default = e, t && t.set(e, n);
                return n
            }(n("t7Ww")),
            f = m(n("r/ag")),
            h = m(n("29dZ")),
            p = n("OcsD");

        function A() {
            if ("function" != typeof WeakMap) return null;
            var e = new WeakMap;
            return A = function() {
                return e
            }, e
        }

        function m(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }

        function _(e) {
            return function(e) {
                if (Array.isArray(e)) {
                    for (var t = 0, n = new Array(e.length); t < e.length; t++) n[t] = e[t];
                    return n
                }
            }(e) || function(e) {
                if (Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e)) return Array.from(e)
            }(e) || function() {
                throw new TypeError("Invalid attempt to spread non-iterable instance")
            }()
        }

        function v(e, t) {
            return function(e) {
                if (Array.isArray(e)) return e
            }(e) || function(e, t) {
                if (!(Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e))) return;
                var n = [],
                    i = !0,
                    a = !1,
                    r = void 0;
                try {
                    for (var o, s = e[Symbol.iterator](); !(i = (o = s.next()).done) && (n.push(o.value), !t || n.length !== t); i = !0);
                } catch (e) {
                    a = !0, r = e
                } finally {
                    try {
                        i || null == s.return || s.return()
                    } finally {
                        if (a) throw r
                    }
                }
                return n
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance")
            }()
        }
        var g = window,
            y = g.page,
            b = g.audio,
            w = g.zlayer,
            k = {
                opened: !1,
                init: function(e) {
                    var t = this,
                        n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
                    this.params = extend({
                        replace: !1,
                        reply: !1,
                        replyTo: !1,
                        restore: !1,
                        forceAuthorIndex: !0,
                        isOpenNarrativeFromFeed: !1
                    }, n);
                    var i = this._parseList(e).split("/"),
                        a = v(i, 3),
                        r = a[0],
                        o = a[1],
                        s = a[2],
                        l = r.split("_"),
                        c = v(l, 1),
                        u = c[0];
                    n && n.narrativeId && (u = n.narrativeId.toString()), this.initRaw = e, this.storyOwner = (0, p.intval)(u), this.storyRaw = r, this.storyExtra = s, this.storyList = o, this.extra = this.parseExtra(this.storyExtra), this.needAudioRestore = b.playing(), this.Views = {}, this.popoutOpen = !1, this.slideTimer = null, this.createLayer(), this._initStore(), this.detectAutoplay().then(function() {
                        t.isRestored ? t._init() : t._checkPreloadedList() ? (t._initPreloadedList(), t._init()) : t._requestList().then(function(e) {
                            var n = e.items,
                                i = e.list;
                            n && (t.store.authors = n, t.store.listLoaded = !0, t.store.list = i, t.store.inited = !0, t._init())
                        }, function() {})
                    })
                },
                parseExtra: function(e) {
                    var t = {},
                        n = String(e).split(";");
                    for (var i in n)
                        if (n.hasOwnProperty(i)) {
                            var a = v(n[i].split(":"), 2),
                                r = a[0],
                                o = a[1];
                            r && o && (t[r] = o)
                        }
                    return t
                },
                _checkPreloadedList: function() {
                    return !!(window.store && window.store.storiesLists && window.store.storiesLists[this.storyList])
                },
                _initPreloadedList: function() {
                    var e = window.store.storiesLists[this.storyList];
                    e && (this.store.authors = e, this.store.listLoaded = !0, this.store.list = this.storyList, this.store.inited = !0)
                },
                pushPreloadedList: function(e) {
                    var t = (0, p.parseJSON)(e);
                    window.store || (window.store = {}), window.store.storiesLists || (window.store.storiesLists = {}), extend(window.store.storiesLists, t), window.store.stories || (window.store.stories = {}), Object.keys(t).forEach(function(e) {
                        window.store && window.store.storiesLayers && window.store.storiesLayers.includes(e) || delete window.store.stories[e]
                    })
                },
                _createMetaStory: function() {
                    var e = this;
                    (0, p.each)(this.store.authors, function(t, n) {
                        var i = n.items[n.items.length - 1];
                        i.isNarrativeMetaStory || n.items.push({
                            type: "photo",
                            raw_id: i.raw_id,
                            preview: i.preview,
                            preview_url: i.preview_url,
                            narrative: i.narrative,
                            photo_url: i.photo_url,
                            isNarrativeMetaStory: !0,
                            isOpenNarrativeFromFeed: e.params.isOpenNarrativeFromFeed
                        })
                    })
                },
                _init: function() {
                    var e = this;
                    this.createAuthors(), this.storyList.match(/narrative-?\d+_\d+/) && this._createMetaStory();
                    var t = this.getFirstStoryIndex();
                    this.setCurrentStory(t);
                    var n = this.getCurrentStory();
                    this.params.restore || this.setHistory(n.raw_id, {
                        nav_init: !0,
                        replace: this.params.replace
                    }), this.sliderEl = ge("StoriesSlider"), this.slider = (0, r.default)(this.sliderEl, {
                        speed: 300,
                        startSlide: this.getCurrentAuthorIndex(),
                        onSlideChange: function(t) {
                            t = e.slider && (0, p.intval)(e.slider.getCurrentPos());
                            var n = e.getCurrentAuthorIndex();
                            e.setAllAuthorStoriesReaded(n), clearTimeout(e.slideTimer), void 0 !== t && t !== n && (!1 === e.isTap && (t > n ? e.sendAnalyticsEvent("go_to_next_author") : e.sendAnalyticsEvent("go_to_previous_author")), e.setCurrentAuthor(t), e.slideTimer = setTimeout(function() {
                                e.renderStory()
                            }, 300)), delete e.isTap
                        },
                        onSetup: function() {
                            (0, p.addClass)(e.layer, "Stories_inited"), e.renderStory()
                        }
                    }), this.Authors && 1 === this.Authors.length && ((0, p.addClass)(this.layer, "Stories_inited"), this.renderStory()), this.store.showViews && this.showViews(n.raw_id, !0), this._initViewerSource(), this._sendOpeningEvents()
                },
                _initStore: function() {
                    window.store || (window.store = {
                        stories: {},
                        storiesLayers: []
                    }), window.store.stories || (window.store.stories = {}), window.store.storiesLayers || (window.store.storiesLayers = []), window.store.stories[this.storyList] && window.store.stories[this.storyList].inited ? (this.store = window.store.stories[this.storyList], this.isRestored = !0) : (this.store = {
                        authors: [],
                        listLoaded: !1,
                        readedStories: {},
                        _requests: [],
                        viewers: {},
                        questions: {},
                        viewersState: {},
                        replies: {},
                        showMenu: !1,
                        storyList: this.storyList,
                        initRaw: this.initRaw,
                        storyIndex: 0,
                        authorIndex: 0,
                        isReply: this.params.reply,
                        replyTo: this.params.replyTo,
                        inited: !1
                    }, window.store.stories[this.storyList] = this.store, this.isRestored = !1), this.params.restore || window.store.storiesLayers.push(this.store.storyList)
                },
                _initViewerSource: function() {
                    var e = this._getSource();
                    switch (e) {
                        case "reply":
                            this.viewerSource = "replies_list";
                            break;
                        case "feed":
                            this.viewerSource = cur.module;
                            break;
                        default:
                            this.viewerSource = e
                    }
                },
                _sendOpeningEvents: function() {
                    var e = this._getSource();
                    if (e) {
                        var t;
                        switch (e) {
                            case "narrative_story":
                                t = "narrative_open_stories";
                                break;
                            case "narrative_snippet":
                            case "narrative_link":
                                t = "narrative_open";
                                break;
                            case "narrative_recommendations":
                                t = "narrative_other"
                        }
                        if (t && this._sendNavigationStatEvents(t), "narrative_fave" === e) {
                            var n = (this.getCurrentStory() || {}).narrative || {},
                                i = n.owner_id,
                                a = n.id;
                            if (!i || !a) return;
                            statlogsValueEvent("bookmarks_product_analytics", {
                                item_type: "narrative",
                                item_owner_id: (0, p.intval)(i),
                                item_id: (0, p.intval)(a),
                                time: vk.ts + Math.floor(((new Date).getTime() - vk.started) / 1e3)
                            })
                        }
                    }
                },
                _abortRequests: function() {
                    isArray(this.store._requests) && (0, p.each)(this.store._requests, function(e, t) {
                        t && t.readyState < 4 && t.abort()
                    }), this.store._requests = []
                },
                _saveRequest: function(e) {
                    this.store._requests.push(e)
                },
                getStore: function() {
                    return this.store
                },
                setAllAuthorStoriesReaded: function(e) {
                    var t = this;
                    this.store.authors[e].items.forEach(function(e) {
                        if (e.unread) {
                            var n = e.raw_id;
                            e.track_code && (n += "_" + e.track_code), t.store.readedStories[n] = !0
                        }
                    })
                },
                createAuthors: function() {
                    var e = this,
                        t = "";
                    this.Authors = [];
                    var n = this.getCurrentAuthorIndex();
                    this.isRestored && !this.params.forceAuthorIndex || (n = this.getFirstAuthorIndex());
                    var i = this.store.authors[n],
                        a = i.items[i.items.length - 1].unread;
                    if (this.extra) switch (this.extra.context) {
                        case "new":
                            a = !0;
                            break;
                        case "all":
                            a = !1
                    }(0, p.each)(this.store.authors, function(n, i) {
                        var r = i.items;
                        if (!n || !a || r[r.length - 1].unread) {
                            var o = new s.StoryAuthor(n, i);
                            e.Authors.push(o), t += o.renderEmpty()
                        }
                    }), (0, p.val)((0, p.geByClass1)("Stories__authors", this.layer), t), this.authors = Array.from(geByClass("StoryAuthor", this.layer)), (0, p.each)(this.Authors, function(e, t) {
                        t.updateHeader()
                    }), this.setCurrentAuthor(n)
                },
                getFirstStoryIndex: function() {
                    var e = this,
                        t = this.store.authors[this.getCurrentAuthorIndex()];
                    if (this._hasContext("all")) return 0;
                    if (!this._hasContext("new")) {
                        var n = t.items.findIndex(function(t) {
                            return t.raw_id === e.storyRaw
                        });
                        if (-1 !== n) return n
                    }
                    return this.getCurrentStoryIndex()
                },
                getFirstAuthorIndex: function() {
                    var e = this,
                        t = this.store.authors.findIndex(function(t) {
                            return t.author.index === e.storyOwner
                        });
                    return -1 !== t ? t : 0
                },
                getCurrentAuthorIndex: function() {
                    return this.store.authorIndex
                },
                getCurrentStoryIndex: function() {
                    return this.store.authors[this.getCurrentAuthorIndex()].index
                },
                getCurrentStory: function() {
                    return this.store.authors[this.getCurrentAuthorIndex()].items[this.getCurrentStoryIndex()]
                },
                setCurrentAuthor: function(e) {
                    this.store.authorPrevIndex = this.store.authorIndex, this.store.authorIndex = e, this.updateCurrentAuthor()
                },
                setCurrentStory: function(e) {
                    this.store.authors[this.getCurrentAuthorIndex()].index = e
                },
                drawSiblingPreview: function() {
                    for (var e = this.getCurrentAuthorIndex(), t = -2; t <= 2; t++) {
                        var n = e + t;
                        this.authors[n] && n !== e && this.drawPreview(this.authors[n])
                    }
                },
                drawPreview: function(e) {
                    setStyle(e, "background-image", "url(".concat(attr(e, "data-src"), ")"))
                },
                updateCurrentAuthor: function() {
                    var e = this.authors[this.store.authorIndex];
                    (0, p.each)(this.authors, function(e, t) {
                        (0, p.removeClass)(t, "StoryAuthor_current")
                    }), (0, p.addClass)(e, "StoryAuthor_current")
                },
                getSizes: function() {
                    var e, t, n = window.innerHeight,
                        i = window.innerWidth;
                    return i < 540 ? (e = i, t = n, w.open(), w.onResize = this.onResize.bind(this)) : (e = Math.floor(Math.min(540, Math.max(320, .563 * n))), t = Math.floor(1.78 * e), (0, p.addClass)(document.body, "vk__story_open")), [e, t]
                },
                createLayer: function() {
                    window.innerWidth < 540 ? (w.open(), w.onResize = this.onResize.bind(this)) : (0, p.addClass)(document.body, "vk__story_open"), k.opened = !0;
                    var e = v(this.getSizes(), 2),
                        t = e[0],
                        n = e[1];
                    this.storyW = t;
                    var a = i.default.html({
                        id: "StoriesView",
                        class: "Stories__layer _preventMenuOpen",
                        style: "max-width: ".concat(t, "px; max-height: ").concat(n, "px"),
                        inner: [{
                            class: "Stories__loading",
                            inner: {
                                class: "Stories__loadingInner"
                            }
                        }, {
                            id: "StoriesSlider",
                            class: "Stories__authors peppermint peppermint-inactive",
                            ontouchmove: "Stories.onTouchMove(event);",
                            inner: ""
                        }, {
                            class: "Stories__layerClose",
                            inner: {
                                class: "Story__icon Story__icon_close"
                            },
                            onclick: "return Stories.clickClose();"
                        }, {
                            class: "Stories__popout"
                        }, {
                            class: "Stories__flash",
                            onclick: "Stories.hideFlashPopup()",
                            inner: {
                                class: "Stories__flashText"
                            }
                        }, {
                            class: "Stories__swipeText Stories__swipeText_top"
                        }]
                    });
                    this.layer = (0, p.append)((0, p.ce)("div", {
                        className: "Stories",
                        innerHTML: a
                    }), document.body), attr(this.layer, "ontouchmove", "event.preventDefault();"), this.loader = (0, p.geByClass1)("Stories__loading", this.layer), this.popout = (0, p.geByClass1)("Stories__popout", this.layer), this.swipeTextTop = (0, p.geByClass1)("Stories__swipeText_top", this.layer)
                },
                onResize: function() {
                    var e = ge("StoriesView"),
                        t = v(this.getSizes(), 2),
                        n = t[0],
                        i = t[1];
                    attr(e, "style", "max-width: ".concat(n, "px; max-height: ").concat(i, "px")), this.storyW = n, this.authors.forEach(function(e) {
                        setStyle(e, "width", "".concat(n, "px"))
                    }), this.Authors && this.Authors.length > 1 && this.slider && this.slider.recalcWidth()
                },
                getWidth: function() {
                    return this.storyW
                },
                renderStory: function() {
                    var e = this.store.authorPrevIndex,
                        t = this.getCurrentAuthorIndex(),
                        n = this.authors[t],
                        i = this.Authors[t];
                    if (i.update(), !isNaN(e) && e !== t) {
                        var a = this.Authors[e],
                            r = this.authors[e];
                        a.update();
                        var o = a.renderEmpty(),
                            s = ceFromString(o);
                        replace(s, r)
                    }
                    var l = ceFromString(i.render());
                    replace(l, n), this.authors = Array.from(geByClass("StoryAuthor", this.layer)), this.updateCurrentAuthor(), i.updateHeader(), this.onRender(), this.drawSiblingPreview(), "open" === this.extra.replies && this.showViews(this.getCurrentStory().raw_id)
                },
                getCurrentAuthor: function() {
                    var e = this.getCurrentAuthorIndex();
                    return (this.Authors || [])[e]
                },
                getCurrentAuthorEl: function() {
                    return this.getCurrentAuthor().authorElem
                },
                getAuthorElems: function() {
                    return this.authors
                },
                prevStory: function() {
                    var e = this;
                    this.stopStory(), this.store.isStopped = !1, requestAnimationFrame(function() {
                        var t = e.getCurrentStoryIndex(),
                            n = e.getCurrentAuthorIndex();
                        if (t - 1 < 0)
                            if (n - 1 < 0) e.setCurrentStory(0), e.renderStory();
                            else {
                                e.slider.slideTo(n - 1);
                                var i = e.store.authors[n - 1].items.length - 1;
                                e.setCurrentStory(i)
                            }
                        else e.setCurrentStory(t - 1), e.renderStory()
                    })
                },
                nextStory: function(e) {
                    var t = this;
                    this.stopStory(), this.store.isStopped = !1, requestAnimationFrame(function() {
                        var n = t.store.authors[t.getCurrentAuthorIndex()],
                            i = t.getCurrentStoryIndex(),
                            a = t.getCurrentAuthorIndex(),
                            r = n.items.length,
                            o = t.Authors.length;
                        r - 1 <= i ? o - 1 <= a ? requestAnimationFrame(function() {
                            t.sendAnalyticsEvent("close_auto_by_time"), t.close()
                        }) : (e && t.sendAnalyticsEvent("go_to_next_story_auto_by_time"), t.slider.slideTo(a + 1), t.setCurrentStory(0)) : (e && t.sendAnalyticsEvent("go_to_next_story_auto_by_time"), t.setCurrentStory(i + 1), t.renderStory())
                    })
                },
                stopStory: function() {
                    this.store.isStopped = !0, this.pauseStory()
                },
                pauseStory: function(e) {
                    var t = this.getCurrentAuthor();
                    if (t) {
                        t.getCurrentStory();
                        var n = t.getCountDown();
                        e && (0, p.addClass)(this.layer, "Stories_paused"), n && n.pause()
                    }
                },
                playStory: function(e) {
                    this.store.isStopped = !1;
                    var t = this.getCurrentAuthor();
                    if (t) {
                        t.getCurrentStory();
                        var n = t.getCountDown();
                        (0, p.removeClass)(this.layer, "Stories_paused"), n && n.start()
                    }
                },
                pauseAudio: function() {
                    var e = window.audio;
                    e && e.pause()
                },
                restoreAudio: function() {
                    var e = window.audio;
                    this.needAudioRestore && e && e.play()
                },
                showMenu: function() {
                    this.store.showMenu = !0, this._hideTooltip(), this.stopStory(), (0, p.addClass)(this.layer, "Stories_menuOpened")
                },
                hideMenu: function() {
                    var e = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0];
                    this.store.showMenu = !1, (0, p.removeClass)(this.layer, "Stories_menuOpened"), e && this.playStory()
                },
                showLoading: function() {
                    var e = this;
                    this.loader && (clearTimeout(this.loaderTimer), this.loaderTimer = setTimeout(function() {
                        show(e.loader)
                    }, 100))
                },
                hideLoading: function() {
                    this.loader && (clearTimeout(this.loaderTimer), hide(this.loader))
                },
                onRepliesScroll: function(e, t) {
                    this.Views[t] && (this.store.viewersState[t].repliesScrollLeft = e.target.scrollLeft)
                },
                showViews: function(e) {
                    var t = this,
                        n = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
                    if (this.hideMenu(), this.store.showViews = !0, this.stopStory(), this._hideTooltip(), this.Views[e]) {
                        this.store.viewersState[e];
                        var i = this.Views[e].render();
                        this.popoutOpen = !0, (0, p.val)(this.popout, i);
                        var a = (0, p.geByClass1)("Views__repliesBody", this.popout);
                        a && (a.scrollLeft = 0), n || this.sendAnalyticsEvent("open_replies_list")
                    } else {
                        var r = this.store.viewersState[e],
                            o = this.store.viewers[e];
                        if (r && o) return void this.createViews(e, n);
                        this.showLoading(), this._requestFeedback(e).then(function() {
                            t.markQuestionsAsViewed(), t.createViews(e, n), t.hideLoading()
                        })
                    }
                },
                markQuestionsAsViewed: function() {
                    (this.getCurrentStory() || {}).isNewQuestions = !1, (0, p.removeClass)((0, p.geByClass1)("Story__stats"), "Story__stats_new_questions")
                },
                createViews: function(e) {
                    var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1],
                        n = this.store.viewersState[e],
                        i = new l.default(e),
                        a = i.render();
                    this.popoutOpen = !0, (0, p.val)(this.popout, a), this.Views[e] = i;
                    var r = (0, p.geByClass1)("Views__repliesBody", this.popout);
                    r && (r.scrollLeft = n.repliesScrollLeft), t || this.sendAnalyticsEvent("open_replies_list")
                },
                hideViews: function() {
                    var e = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0];
                    e && this.playStory(), this.store.showViews = !1, this.popoutOpen = !1, (0, p.val)(this.popout, "")
                },
                loadViews: function(e) {
                    var t = this,
                        n = this.store.viewersState[e],
                        i = n.loading,
                        a = n.nextFrom;
                    !i && a && (n.loading = !0, this.showLoading(), this._requestFeedback(e, a).then(function() {
                        var i = new l.default(e),
                            a = i.render();
                        t.popoutOpen = !0;
                        var r = (0, p.geByClass1)("Views__body", t.layer).scrollTop;
                        (0, p.val)(t.popout, a), (0, p.geByClass1)("Views__body", t.layer).scrollTop = r, t.Views[e] = i, t.hideLoading(), n.loading = !1
                    }))
                },
                showComment: function() {
                    var e = this,
                        t = this.authors[this.store.authorIndex],
                        n = (0, p.geByClass1)("Story__commentTextarea", t);
                    this.store.showComment = !0, this.stopStory(), (0, p.addClass)(this.layer, "Stories_commentOpened"), this._hideTooltip(), requestAnimationFrame(function() {
                        e.sendAnalyticsEvent("comment_tap"), n && n.focus()
                    })
                },
                hideComment: function() {
                    var e = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0];
                    this.store.showMenu = !1, (0, p.removeClass)(this.layer, "Stories_commentOpened"), e && this.playStory()
                },
                onInputComment: function(e) {
                    var t = this.authors[this.store.authorIndex],
                        n = (0, p.geByClass1)("Story__commentSend", t),
                        i = (0, p.val)(e);
                    (0, p.toggleClass)("Story__commentSend_active", n, !!i)
                },
                sendComment: function() {
                    var e = this.authors[this.store.authorIndex],
                        t = (0, p.geByClass1)("Story__commentTextarea", e),
                        n = (0, p.geByClass1)("Story__commentSend", e),
                        i = (0, p.val)(t);
                    if (hasClass("Story__commentSend_active", n)) {
                        (0, p.val)(t, ""), (0, p.removeClass)(n, "Story__commentSend_active");
                        var a, r = this.getCurrentAuthorIndex(),
                            o = this.getCurrentStory(),
                            s = o.raw_id,
                            l = o.narrative,
                            c = this.store.authors[r],
                            u = c.send_hash,
                            d = c.author.id;
                        a = l ? "narrative".concat(l.raw_id) : "story".concat(s), this._sendMessage(u, a, i, d), this.hideComment()
                    }
                },
                showFlashPopup: function(e) {
                    var t = this,
                        n = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1],
                        i = 1500;
                    this.stopStory();
                    var a = (0, p.geByClass1)("Stories__flash", this.layer);
                    (0, p.val)((0, p.geByClass1)("Stories__flashText", a), e), setTimeout(function() {
                        (0, p.addClass)(a, "Stories__flash_show")
                    }), clearTimeout(this.flashTimer), clearTimeout(this.flashHideTimer), this.flashTimer = setTimeout(function() {
                        (0, p.removeClass)(a, "Stories__flash_show"), t.flashHideTimer = setTimeout(function() {
                            t.hideFlashPopup(n)
                        }, i)
                    }, i)
                },
                hideFlashPopup: function(e) {
                    e && this.playStory(), clearTimeout(this.flashTimer), clearTimeout(this.flashHideTimer);
                    var t = (0, p.geByClass1)("Stories__flash", this.layer);
                    (0, p.removeClass)(t, "Stories__flash_show")
                },
                removeCurrentStory: function() {
                    var e = this,
                        t = window.lang,
                        n = this.getCurrentAuthor();
                    if (n) {
                        var i = n.getCurrentStory(),
                            a = i.narrative ? t.mobile_stories_delete_narrative : t.mobile_stories_delete_story;
                        if (confirm(a.replace(/(<([^>]+)>)/gi, "\n"))) {
                            var r = n.data.remove_hash,
                                o = i.can_remove,
                                s = i.raw_id;
                            if (o) {
                                this.pauseStory();
                                var l = function() {
                                    e._requestFeedBlock(), i.isNarrativeSlide && e.close(), 0 === e.getCurrentStoryIndex() ? (e.close({
                                        closeAll: !1
                                    }), location.reload()) : (e.store.authors[e.getCurrentAuthorIndex()].items.splice(e.getCurrentStoryIndex(), 1), e.hideMenu(), e.prevStory())
                                };
                                if (i.narrative) {
                                    var c = i.narrative,
                                        u = c.owner_id,
                                        d = c.id,
                                        f = "".concat(u, "_").concat(d);
                                    this._requestRemoveNarrative(f, r).then(function() {
                                        l()
                                    }, function() {})
                                } else this._requestRemoveStory(s, r).then(function() {
                                    e.sendAnalyticsEvent("delete"), l()
                                }, function() {})
                            }
                        }
                    }
                },
                onScrollViews: function(e, t) {
                    var n = this.store.viewersState[t],
                        i = n.loading,
                        a = n.nextFrom;
                    if (!i && a) {
                        e.scrollHeight - e.offsetHeight - 400 <= e.scrollTop && this.loadViews(t)
                    }
                },
                unMute: function(e, t) {
                    var n = this.getCurrentAuthor().story.getVideo();
                    (0, p.cancelEvent)(t), n && n.muted && (n.muted = !1, (0, p.removeClass)(gpeByClass(s.VIDEO_MUTED_CLASS, e), s.VIDEO_MUTED_CLASS))
                },
                onTouchStart: function(e) {
                    var t = this,
                        n = this.getCurrentAuthor().story;
                    if (n && "video" === n.getType()) {
                        var i = n.getVideo();
                        if (i && i.paused) return void(this.preventedTap = !0)
                    }
                    this.pauseStory(!0), this.isTap = !0, "touchstart" === e.type ? (this.tapStartX = e.changedTouches[0].clientX, this.tapStartY = e.changedTouches[0].clientY) : (this.tapStartX = e.clientX, this.tapStartY = e.clientY), clearTimeout(this.isTapTimer), this.isYmove = null, (0, p.removeClass)(this.layer, "Stories_touchMove"), this.isTapTimer = setTimeout(function() {
                        t.isTap = !1, t.sendAnalyticsEvent("pause_long_tap")
                    }, 200)
                },
                onTouchMove: function(e) {
                    var t = 0,
                        n = 0;
                    "touchmove" === e.type && (t = this.tapStartX - e.changedTouches[0].clientX, n = this.tapStartY - e.changedTouches[0].clientY), null === this.isYmove && (this.isYmove = Math.abs(t) < Math.abs(n), this.isYmove && (0, p.addClass)(this.layer, "Stories_touchMove")), this.isYmove ? this.onVerticalSwipe(-n / 1.5) : this.onVerticalSwipe(0)
                },
                onTouchEnd: function(e, t) {
                    clearTimeout(this.isTapTimer);
                    var n = this.getCurrentAuthor().story;
                    this.isTap || this.sendAnalyticsEvent("resume_release");
                    var i, a;
                    if ("touchend" === e.type ? (i = e.changedTouches[0].clientX, a = e.changedTouches[0].clientY) : (i = e.clientX, a = e.clientY), (Math.abs(this.tapStartX - i) > 20 || Math.abs(this.tapStartY - a) > 20) && (this.isTap = !1), (0, p.removeClass)(this.layer, "Stories_touchMove"), setStyle(this.sliderEl, "opacity", 1), setStyle.transform(this.sliderEl, 1, [0, 0]), setStyle.transform((0, p.geByClass1)("Story__moreLink"), 1, [0, 0]), this.needGoToLink) {
                        var r = this.getCurrentAuthor().story;
                        if (this.needGoToLink = !1, r && r.hasLink()) return void this.openCustomButton(e)
                    }
                    if (this.needClose) return this.sendAnalyticsEvent("close_swipe_down"), void this.close();
                    if (this.tooltip) this._hideTooltip();
                    else {
                        if (this.isTap) {
                            if (hasClass(e.target, "Story__sticker")) return (0, p.removeClass)(this.layer, "Stories_paused"), void((0, p.domData)(e.target, "question") ? this.askQuestionBox(e) : this.tooltip ? this._hideTooltip() : this._showTooltip(e, n._createStickerLink(e.target)));
                            t ? (this.sendAnalyticsEvent("go_to_previous_story"), this.prevStory()) : (this.sendAnalyticsEvent("go_to_next_story_tap"), this.nextStory())
                        }
                        this._hideTooltip(!0), this.hideMenu()
                    }
                },
                openCustomButton: function(e) {
                    e.preventDefault(), e.stopPropagation();
                    var t = this.getCurrentAuthor().story,
                        n = t.getLinkUrl(),
                        i = n.match(/\/narrative(-?\d+)_(\d+)/);
                    if (i) {
                        var a = {
                                ownerId: i[1],
                                narrativeId: i[2]
                            },
                            r = a.ownerId,
                            o = a.narrativeId;
                        if (!r || !o) return !1;
                        this.openNarrative("".concat(r, "/narrative").concat(r, "_").concat(o), {
                            source: "narrative_story",
                            isOpenNarrativeFromFeed: !0
                        })
                    } else if (this.stopStory(), this.showLoading(), t.stats && t.stats.url_view) {
                        var s = t.stats.url_view,
                            l = s.event_type,
                            c = s.rhash,
                            u = t.raw_id;
                        this._requestClickStat(u, l, c, function() {
                            nav.go(n)
                        })
                    } else nav.go(n);
                    return !1
                },
                onVerticalSwipe: function(e) {
                    var t = window.lang;
                    if (this.needClose = !1, this.needGoToLink = !1, e) {
                        var n = e > 0,
                            i = this.sliderEl.offsetHeight,
                            a = i / 3.5,
                            r = Math.abs(e) > a;
                        if (n) {
                            var o = r ? t.mobile_zphoto_release_to_close : t.mobile_zphoto_move_to_close,
                                s = r ? "" : n ? "zpv_close_move_down" : "zpv_close_move_up",
                                l = Math.max(1 - .75 * e / i, .6);
                            (0, p.val)(this.swipeTextTop, '<div class="zpv_close_msg '.concat(s, '">').concat(o, "</div>")), setStyle(this.sliderEl, "opacity", l), setStyle.transform(this.sliderEl, 1, [0, e / 1.5]), setStyle(this.swipeTextTop, "opacity", Math.abs(l - 1 - .6)), setStyle.transform(this.swipeTextTop, 1, [0, e / 1.5 * .85]), this.needClose = r
                        } else {
                            var c = Math.min(1 - .5 * e / i, 1.1);
                            setStyle(this.sliderEl, "opacity", 1), setStyle.transform(this.sliderEl, 1, [0, 0]), setStyle.transform((0, p.geByClass1)("Story__moreLink"), c, [0, Math.max(e / (1.5 * 1.6), -90)]), this.needGoToLink = r
                        }
                    } else setStyle(this.sliderEl, "opacity", 1), setStyle.transform(this.sliderEl, 1, [0, 0]), setStyle.transform((0, p.geByClass1)("Story__moreLink"), 1, [0, 0]), this.needClose = !1, this.needGoToLink = !1
                },
                preventScroll: function() {
                    return this.popoutOpen
                },
                _requestRemoveStory: function(e, t) {
                    return new Promise(function(n, i) {
                        ajax.post("stories.php", {
                            _ajax: 1,
                            act: "remove_story",
                            hash: t,
                            story_raw: e
                        }, {
                            onDone: function() {
                                n()
                            },
                            onFail: function() {
                                i()
                            }
                        })
                    })
                },
                _requestRemoveNarrative: function(e, t) {
                    return new Promise(function(n, i) {
                        ajax.post("stories.php", {
                            _ajax: 1,
                            act: "remove_narrative",
                            hash: t,
                            narrative_raw: e
                        }, {
                            onDone: function() {
                                n()
                            },
                            onFail: function() {
                                i()
                            }
                        })
                    })
                },
                _requestList: function() {
                    var e = this;
                    return new Promise(function(t, n) {
                        var i = {
                            storyOwner: e.storyOwner,
                            list: e.storyList,
                            storyRaw: e.storyRaw,
                            extra: e.storyExtra
                        };
                        if (!e.storyRaw) return n();
                        var a = ajax.post("stories.php", {
                            _ajax: 1,
                            act: "get_list",
                            list: i.list,
                            story_raw: i.storyRaw,
                            extra: i.extra
                        }, {
                            onDone: function(e) {
                                if (i.items = e.list, e.recommendations) {
                                    var n = i.list + "_recommendations";
                                    window.store.stories[n] = k._forceSetStore(i.storyRaw, n, e.recommendations)
                                }
                                t(i)
                            },
                            onFail: function() {
                                n()
                            }
                        });
                        e._saveRequest(a)
                    })
                },
                _forceSetStore: function(e, t, n) {
                    return {
                        authors: n,
                        listLoaded: !0,
                        list: t,
                        readedStories: {},
                        viewers: {},
                        viewersState: {},
                        replies: {},
                        showMenu: !1,
                        storyList: t,
                        initRaw: e,
                        storyIndex: 0,
                        authorIndex: 0,
                        isReply: !1,
                        replyTo: !1,
                        inited: !0
                    }
                },
                _requestFeedback: function(e) {
                    var t = this,
                        n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0,
                        i = this.store;
                    return new Promise(function(a, r) {
                        var o = ajax.post("stories.php", {
                            _ajax: 1,
                            act: "feedback",
                            offset: n,
                            story_raw: e
                        }, {
                            onDone: function(t, n, r, o, s, l, c) {
                                var u;
                                (o && o.length && (i.replies[e] = o), i.viewers[e]) ? r && (u = i.viewers[e]).push.apply(u, _(t)): i.viewers[e] = t;
                                i.viewersState[e] ? r && extend(i.viewersState[e], {
                                    count: n,
                                    nextFrom: r
                                }) : i.viewersState[e] = {
                                    count: n,
                                    nextFrom: r,
                                    repliesCountText: s,
                                    authorCountText: l,
                                    repliesScrollLeft: 0
                                }, c.length && (i.questions[e] = c), s && (i.viewersState[e].repliesCountText = s), l && (i.viewersState[e].authorCountText = l), a({
                                    viewers: t,
                                    count: n,
                                    nextFrom: r,
                                    repliesCountText: s,
                                    authorCountText: l,
                                    questions: c
                                })
                            },
                            onFail: function() {
                                r()
                            }
                        });
                        t._saveRequest(o)
                    })
                },
                _requestReadStories: function() {
                    var e = this.store,
                        t = Object.keys(e.readedStories),
                        n = this._getSource();
                    if (t.length) {
                        var i = ajax.post("stories.php", {
                            _ajax: 1,
                            act: "read_stories",
                            hash: this.store.authors[0].read_hash,
                            stories: t.join(","),
                            source: n,
                            navigation_stats: (0, u.serializeNavigationStats)(),
                            loading_stats: (0, u.serializeLoadingStats)(),
                            connection_type: (0, u.getConnectionType)()
                        }, {
                            onDone: function() {
                                e.readedStories = {}, "feed" === n && k._requestFeedBlock()
                            }
                        });
                        this._saveRequest(i)
                    }
                },
                _getSource: function() {
                    if (this.params && this.params.source) return this.params.source;
                    var e = this.store && this.store.list || "",
                        t = "";
                    return e.includes("feed") ? t = "feed" : e.includes("replies") && (t = "reply"), t
                },
                _sendNavigationStatEvents: function(e) {
                    var t = this.getCurrentStory(),
                        n = t && t.raw_id;
                    if (n) {
                        var i = this._getSource();
                        (0, u.saveNavigationStatEvent)({
                            storyRawId: n,
                            source: i,
                            action: e
                        })
                    }
                },
                _sendViewerStartTime: function(e, t) {
                    var n = this.viewerSource;
                    (0, u.saveViewerStartTime)({
                        storyRawId: e,
                        source: n,
                        time: t
                    })
                },
                _requestFeedBlock: function() {
                    var e = nav.getQuery();
                    if (!window.store.storiesLayers.length) ajax.post("stories.php", {
                        _ajax: 1,
                        act: "feed_block",
                        q: e.q
                    }, {
                        onDone: function(e, t) {
                            var n = ge("StoriesFeedBlock");
                            n && replace(ceFromString(e), n), k.pushPreloadedList(t)
                        }
                    })
                },
                _requestClickStat: function(e, t, n, i) {
                    ajax.post("stories.php", {
                        _ajax: 1,
                        act: "stat",
                        source_story: e,
                        event_type: t,
                        rhash: n
                    }, {
                        onDone: function() {
                            i && i()
                        }
                    })
                },
                _requestStickerStat: function(e, t) {
                    var n = this.getCurrentStory(),
                        i = n.raw_id,
                        a = n.clickable_stickers;
                    ajax.post("stories.php", extend({
                        act: "stickers_stat",
                        story_raw_id: i,
                        action: e,
                        hash: a.hash
                    }, t))
                },
                _sendMessage: function(e, t, n, i) {
                    var a = ajax.post("mail.php", {
                        _ajax: 1,
                        act: "send",
                        entrypoint: "stories_comment",
                        hash: e,
                        media: t,
                        message: n,
                        to: i
                    }, {
                        onDone: function() {
                            var e = window.lang;
                            k.showFlashPopup(e.mobile_stories_comment_success), k.sendAnalyticsEvent("comment_send")
                        }
                    });
                    this._saveRequest(a)
                },
                _requestFave: function(e, t, n, i) {
                    ajax.post("bookmarks.php", {
                        _ajax: 1,
                        act: e,
                        item_type: 31,
                        item_oid: t,
                        item_id: n,
                        hash: i,
                        ref: cur.module
                    })
                },
                _parseList: function(e) {
                    var t = (e = decodeURIComponent(e)).match(/^story(-?\d+)_(\d+)(\/([a-z0-9\_\-]+))?(\/([a-z0-9\_\:\;\-]+))?$/i);
                    if (t) {
                        var n = v(t, 7),
                            i = n[1],
                            a = n[2],
                            r = n[4],
                            o = n[6],
                            s = i + "_" + a;
                        return e.match(/from_feed\=1/) ? r = "feed" : e.match(/profile\=1/) ? r = "profile" : r || (r = s), s + "/" + r + "/" + o
                    }
                    return e
                },
                setHistory: function(e) {
                    var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {
                            nav_init: !1,
                            replace: !0
                        },
                        n = window,
                        i = n.nav,
                        a = this.getHistoryURL(e),
                        r = i.getQuery(),
                        o = a.match(/narrative-\d+_\d+/);
                    o && (a = "narrative".concat(this.getCurrentStory().narrative.raw_id)), r.z = a;
                    var s = i.path + obj2qs(r) + i.hash,
                        l = {
                            push_only: !0,
                            replace: t.replace,
                            nav_init: !t.no_open,
                            nav_incr: !0
                        };
                    i.go(s, null, l)
                },
                getFrom: function() {
                    var e = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0],
                        t = window,
                        n = t.nav,
                        i = this.store.list,
                        a = n.getQuery(),
                        r = "z=".concat(a.z),
                        o = "";
                    return "/write" === n.path.substr(0, 6) ? o = "write".concat(n.path.substr(0, 6), "?").concat(r) : "/mail" === n.path ? o = "write".concat(a.peer, "?").concat(r) : "/feed" === n.path ? o = a.section && "notifications" === a.section ? "feed?section=notifications&".concat(r) : "feed?".concat(r) : i.startsWith("archive") ? o = "".concat(n.path, "?act=stories") : a.from && (o = a.from), e ? encodeURIComponent(o) : o
                },
                getHistoryURL: function(e) {
                    var t = this.store.list;
                    return "story" + e + (t ? "/" + t : "")
                },
                getParams: function() {
                    return this.params || {}
                },
                reportCurrentStory: function(e) {
                    var t = window.nav,
                        n = this.getHistoryURL(e),
                        i = (t.getQuery(), this.getFrom()),
                        a = "/reports?act=add&object=".concat(n, "&refrom=").concat(i);
                    t.go(a)
                },
                toggleBookmark: function(e) {
                    var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1],
                        n = this.getCurrentAuthor();
                    if (n) {
                        var i = n.getCurrentStory(),
                            a = i.bookmark_add_hash,
                            r = window,
                            o = r.store,
                            s = i.narrative ? i.narrative : i,
                            l = s.is_bookmarked;
                        Object.keys(o.stories).forEach(function(e) {
                            var t = o.stories[e];
                            if (t.authors) {
                                var n = !1;
                                t.authors.forEach(function(e) {
                                    n || (n = e.items.find(function(e) {
                                        return !!e.narrative && (e.narrative.bookmark_hash === a && e.raw_id === i.raw_id)
                                    }))
                                }), n && (n.narrative ? n.narrative.is_bookmarked = !l : n.is_bookmarked = !l)
                            }
                        }), (0, p.val)(e, l ? lang.mobile_stories_menu_bookmark_title : lang.mobile_stories_menu_bookmarked_title);
                        var c = l ? "bookmark_remove" : "bookmark_add",
                            u = i.narrative,
                            d = u.owner_id,
                            f = u.id;
                        t || this._requestFave(c, d, f, a), i.narrative && Share.setBookmarkState(i.narrative.raw_id, !l)
                    }
                },
                share: function(e, t) {
                    var n = this,
                        i = this.getCurrentAuthor();
                    if (i) {
                        var a = i.getCurrentStory(),
                            r = a.bookmark_add_hash,
                            o = (a.narrative ? a.narrative : a).is_bookmarked;
                        this.stopStory();
                        this.getFrom();
                        var s = t ? "narrative" : "story";
                        this.stopStory(), Share(e, {
                            mail_hash: this.getCurrentStory().share_hash,
                            object: s + e,
                            is_bookmarked: o,
                            bookmark_hash: r,
                            bookmark_type: 31,
                            can_bookmark: t,
                            can_to_own: t,
                            can_to_club: t
                        }), cur.share.onClose(function() {
                            n.playStory()
                        })
                    }
                },
                openReplies: function(e) {
                    var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
                    this.playStory(), t || this.sendAnalyticsEvent("open_parent_story"), this.destroy();
                    var n = e.split("/"),
                        i = v(n, 2),
                        a = i[1];
                    if (a) {
                        var r = window.store.storiesLayers.indexOf(a);
                        if (~r) {
                            var o = this.store.list,
                                s = a;
                            this.restore(o, s)
                        } else this.init(e, {
                            reply: !0,
                            replyTo: t
                        })
                    } else this.close()
                },
                openNarrative: function(e, t) {
                    this.playStory(), this.destroy();
                    var n = v(e.split("/"), 2)[1];
                    if (n)
                        if (~window.store.storiesLayers.indexOf(n)) {
                            var i = this.store.list,
                                a = n;
                            this.restore(i, a)
                        } else this.init(e, t);
                    else this.close()
                },
                clickClose: function() {
                    var e = this;
                    requestAnimationFrame(function() {
                        e.sendAnalyticsEvent("close_tap"), e.close()
                    })
                },
                close: function() {
                    var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
                    if (extend({
                            isPopState: !1,
                            storyRaw: !1,
                            closeAll: !1
                        }, e), this.store && this.store.list && this._getSource().indexOf("narrative") > -1 && this._sendNavigationStatEvents("narrative_close"), !e.isPopState) {
                        var t = window,
                            n = t.nav,
                            i = n.getQuery();
                        if (window.store.storiesLayers[window.store.storiesLayers.length - 1 - 1]) {
                            var a = window.store.storiesLayers[window.store.storiesLayers.length - 1 - 1],
                                r = window.store.stories[a],
                                o = r.authorIndex,
                                s = r.authors[o].index,
                                l = r.authors[o].items[s];
                            i.z = this.getHistoryURL(l.raw_id)
                        } else delete i.z;
                        var c = n.path + obj2qs(i) + (n.hash || "");
                        n.go(c, null, {
                            push_only: !0
                        })
                    }
                    if (this.destroy(), e.isPopState && e.storyRaw) {
                        var u = this._parseList(e.storyRaw).split("/"),
                            d = v(u, 2),
                            f = d[1];
                        this.store ? this.restore(this.store.storyList, f, e.storyRaw, e) : this.init(e.storyRaw, {
                            replace: !0
                        })
                    } else this.store && this.store.storyList && this.restore(this.store.storyList, !1, !1, e)
                },
                hideAllViews: function() {
                    var e = window.store;
                    e && (e.storiesLayers = [], e.stories && Object.keys(e.stories).forEach(function(t) {
                        e.stories[t].showViews = !1, e.stories[t].isStopped = !1
                    }))
                },
                restore: function(e) {
                    var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1],
                        n = arguments.length > 2 && void 0 !== arguments[2] && arguments[2],
                        i = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : {};
                    if (window.store.storiesLayers) {
                        var a = window.store.storiesLayers.indexOf(e);
                        window.store.storiesLayers.splice(a, 1)
                    }
                    if (window.store.storiesLayers.length || t || n) {
                        t = t || window.store.storiesLayers[window.store.storiesLayers.length - 1];
                        var r = window.store.stories[e],
                            o = window.store.stories[t];
                        if (r && o) {
                            var s = Object.keys(r.readedStories);
                            (0, p.each)(s, function(e, t) {
                                var n = v(t.split("_"), 3),
                                    i = n[0],
                                    a = (n[1], n[2], o.replies[r.replyTo]);
                                if (a) {
                                    var s = v(a.filter(function(e) {
                                        return e.owner_id == i
                                    }), 1)[0];
                                    s && (s.has_new = !1)
                                }
                            }), this.init(o.initRaw, {
                                restore: !0,
                                forceAuthorIndex: !1,
                                reply: !0
                            })
                        } else n && this.init(n, {
                            restore: !0,
                            forceAuthorIndex: !1,
                            reply: !0
                        })
                    } else this.hideAllViews();
                    i.closeAll && window.store.storiesLayers.length && this.close(i)
                },
                clearStore: function() {
                    this.store = this._initStore()
                },
                destroy: function() {
                    var e = this;
                    if (this.restoreAudio(), this.store) {
                        this.slider = null, this.hideMenu(!1), this._abortRequests(), this._requestReadStories(), (0, p.removeClass)(this.layer, "Stories_inited");
                        var t = this.getCurrentAuthorIndex();
                        if (void 0 !== t && this.Authors) this.Authors[t].destroy();
                        this.onRender.off(), (0, p.remove)(this.layer), Object.keys(this).forEach(function(t) {
                            "store" !== t && "supportAutoplay" !== t && "function" != typeof e[t] && (e[t] = null, delete e[t])
                        }), w.close(), (0, p.addClass)(ge("StoriesFeedBlock"), "StoriesFeedBlock_been-open"), (0, p.removeClass)(document.body, "vk__story_open"), k.opened = !1;
                        var n = (0, p.geByClass1)("Question__popup"),
                            i = (0, p.geByClass1)("Popup__overlay", n);
                        i && d.default.close(i)
                    }
                },
                isAutoplaySupport: function() {
                    return this.supportAutoplay
                },
                isGoodBrowser: function() {
                    return o.default.ios && o.default.safari_mobile && parseInt(o.default.version, 10) >= 10
                },
                detectAutoplay: function() {
                    var e = this;
                    return new Promise(function(t) {
                        if (e.supportAutoplay) t();
                        else {
                            if (e.isGoodBrowser()) return e.supportAutoplay = !0, void t();
                            e.supportAutoplay = !1;
                            var n = (0, p.ce)("video"),
                                i = (0, p.ce)("source");
                            i.src = "data:video/mp4;base64,AAAAFGZ0eXBNU05WAAACAE1TTlYAAAOUbW9vdgAAAGxtdmhkAAAAAM9ghv7PYIb+AAACWAAACu8AAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAnh0cmFrAAAAXHRraGQAAAAHz2CG/s9ghv4AAAABAAAAAAAACu8AAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAFAAAAA4AAAAAAHgbWRpYQAAACBtZGhkAAAAAM9ghv7PYIb+AAALuAAANq8AAAAAAAAAIWhkbHIAAAAAbWhscnZpZGVBVlMgAAAAAAABAB4AAAABl21pbmYAAAAUdm1oZAAAAAAAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAVdzdGJsAAAAp3N0c2QAAAAAAAAAAQAAAJdhdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAFAAOABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAAEmNvbHJuY2xjAAEAAQABAAAAL2F2Y0MBTUAz/+EAGGdNQDOadCk/LgIgAAADACAAAAMA0eMGVAEABGjuPIAAAAAYc3R0cwAAAAAAAAABAAAADgAAA+gAAAAUc3RzcwAAAAAAAAABAAAAAQAAABxzdHNjAAAAAAAAAAEAAAABAAAADgAAAAEAAABMc3RzegAAAAAAAAAAAAAADgAAAE8AAAAOAAAADQAAAA0AAAANAAAADQAAAA0AAAANAAAADQAAAA0AAAANAAAADQAAAA4AAAAOAAAAFHN0Y28AAAAAAAAAAQAAA7AAAAA0dXVpZFVTTVQh0k/Ou4hpXPrJx0AAAAAcTVREVAABABIAAAAKVcQAAAAAAAEAAAAAAAAAqHV1aWRVU01UIdJPzruIaVz6ycdAAAAAkE1URFQABAAMAAAAC1XEAAACHAAeAAAABBXHAAEAQQBWAFMAIABNAGUAZABpAGEAAAAqAAAAASoOAAEAZABlAHQAZQBjAHQAXwBhAHUAdABvAHAAbABhAHkAAAAyAAAAA1XEAAEAMgAwADAANQBtAGUALwAwADcALwAwADYAMAA2ACAAMwA6ADUAOgAwAAABA21kYXQAAAAYZ01AM5p0KT8uAiAAAAMAIAAAAwDR4wZUAAAABGjuPIAAAAAnZYiAIAAR//eBLT+oL1eA2Nlb/edvwWZflzEVLlhlXtJvSAEGRA3ZAAAACkGaAQCyJ/8AFBAAAAAJQZoCATP/AOmBAAAACUGaAwGz/wDpgAAAAAlBmgQCM/8A6YEAAAAJQZoFArP/AOmBAAAACUGaBgMz/wDpgQAAAAlBmgcDs/8A6YEAAAAJQZoIBDP/AOmAAAAACUGaCQSz/wDpgAAAAAlBmgoFM/8A6YEAAAAJQZoLBbP/AOmAAAAACkGaDAYyJ/8AFBAAAAAKQZoNBrIv/4cMeQ==";
                            var a = (0, p.ce)("source");
                            a.src = "data:video/webm;base64,GkXfo49CgoR3ZWJtQoeBAUKFgQEYU4BnAQAAAAAAF60RTZt0vE27jFOrhBVJqWZTrIIQA027jFOrhBZUrmtTrIIQbE27jFOrhBFNm3RTrIIXmU27jFOrhBxTu2tTrIIWs+xPvwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFUmpZuQq17GDD0JATYCjbGliZWJtbCB2MC43LjcgKyBsaWJtYXRyb3NrYSB2MC44LjFXQY9BVlNNYXRyb3NrYUZpbGVEiYRFnEAARGGIBc2Lz1QNtgBzpJCy3XZ0KNuKNZS4+fDpFxzUFlSua9iu1teBAXPFhL4G+bmDgQG5gQGIgQFVqoEAnIEAbeeBASMxT4Q/gAAAVe6BAIaFVl9WUDiqgQEj44OEE95DVSK1nIN1bmTgkbCBULqBPJqBAFSwgVBUuoE87EQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB9DtnVB4eeBAKC4obaBAAAAkAMAnQEqUAA8AABHCIWFiIWEiAICAAamYnoOC6cfJa8f5Zvda4D+/7YOf//nNefQYACgnKGWgQFNANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgQKbANEBAAEQEAAYABhYL/QACIhgAPuC/rKgnKGWgQPoANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgQU1ANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgQaDANEBAAEQEAAYABhYL/QACIhgAPuC/rKgnKGWgQfQANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgQkdANEBAAEQEBRgAGFgv9AAIiGAAPuC/rOgnKGWgQprANEBAAEQEAAYABhYL/QACIhgAPuC/rKgnKGWgQu4ANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgQ0FANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgQ5TANEBAAEQEAAYABhYL/QACIhgAPuC/rKgnKGWgQ+gANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgRDtANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgRI7ANEBAAEQEAAYABhYL/QACIhgAPuC/rIcU7trQOC7jLOBALeH94EB8YIUzLuNs4IBTbeH94EB8YIUzLuNs4ICm7eH94EB8YIUzLuNs4ID6LeH94EB8YIUzLuNs4IFNbeH94EB8YIUzLuNs4IGg7eH94EB8YIUzLuNs4IH0LeH94EB8YIUzLuNs4IJHbeH94EB8YIUzLuNs4IKa7eH94EB8YIUzLuNs4ILuLeH94EB8YIUzLuNs4INBbeH94EB8YIUzLuNs4IOU7eH94EB8YIUzLuNs4IPoLeH94EB8YIUzLuNs4IQ7beH94EB8YIUzLuNs4ISO7eH94EB8YIUzBFNm3SPTbuMU6uEH0O2dVOsghTM", (0, p.append)(a, n), (0, p.append)(i, n), n.style.position = "fixed", n.style.left = "5000px", attr(n, "id", "base64testvideo"), attr(n, "playsinline", "playsinline"), attr(n, "webkit-playsinline", "webkit-playsinline"), attr(n, "muted", "muted"), attr(n, "autoplay", "autoplay"), attr(n, "loop", "loop"), (0, p.append)(n, document.body);
                            var r = ge("base64testvideo");
                            if (o.default.android && o.default.chrome) return e.supportAutoplay = !0, (0, p.remove)(n), t(), void clearTimeout(e.autoDetectTimeout);
                            if (o.default.mobile && o.default.ios && o.default.ios < 10) return e.supportAutoplay = !1, (0, p.remove)(n), t(), void clearTimeout(e.autoDetectTimeout);
                            if (!o.default.safari_mobile || o.default.safari_mobile && parseInt(o.default.version, 10) >= 10) {
                                var s = n.play();
                                void 0 !== s && s.then(function() {
                                    e.supportAutoplay = !0, (0, p.remove)(n), t(), clearTimeout(e.autoDetectTimeout)
                                }).catch(function(e) {})
                            }
                            r.onplay = function() {
                                e.supportAutoplay = !0, (0, p.remove)(n), t(), clearTimeout(e.autoDetectTimeout)
                            }, e.autoDetectTimeout = setTimeout(function() {
                                r.paused || (e.supportAutoplay = !0), (0, p.remove)(n), t()
                            }, 250)
                        }
                    })
                },
                narrativeReply: function() {
                    this.setCurrentStory(0), this.renderStory(), this._sendNavigationStatEvents("narrative_replay")
                },
                narrativeGoToStories: function() {
                    this.nextStory(), this._sendNavigationStatEvents("narrative_go_to_stories")
                },
                _showTooltip: function(e, t) {
                    if (this.hideMenu(!1), this.hideFlashPopup(!1), e && t)
                        if (this.tooltip) this._hideTooltip();
                        else {
                            var n = this.getCurrentAuthorEl();
                            this.tooltip = (0, p.ce)("div", {
                                className: "StoriesTooltip"
                            }, {
                                top: 0,
                                left: 0
                            }), this.tooltipArrow = (0, p.ce)("span", {
                                className: "StoriesTooltip__arrow"
                            }), this.tooltip.appendChild(t), this.tooltip.appendChild(this.tooltipArrow), n.appendChild(this.tooltip);
                            var i = 0,
                                a = 0;
                            "touchend" === e.type ? (i = e.changedTouches[0].clientX, a = e.changedTouches[0].clientY) : (i = e.clientX, a = e.clientY);
                            var r = n.getBoundingClientRect(),
                                o = r.top,
                                s = r.left,
                                l = r.width,
                                c = v(getSize(this.tooltip), 2),
                                u = c[0],
                                d = a - (o + c[1] + 10),
                                f = i - (s + u / 2);
                            setStyle(this.tooltip, {
                                top: Math.max(d, 2),
                                left: Math.min(Math.max(f, 2), l - u - 2)
                            }), setStyle(this.tooltipArrow, {
                                left: Math.max(Math.min(i - s - Math.min(Math.max(f, 0), l - u), u - 15), 15)
                            }), this.pauseStory()
                        }
                    else this.playStory()
                },
                _hideTooltip: function(e) {
                    this.tooltip && (e || this.playStory(), (0, p.remove)(this.tooltip), delete this.tooltip)
                },
                _createNarrativeTooltipLink: function() {
                    var e = this.getCurrentStory().narrative || {};
                    return (0, p.ce)("div", {
                        className: "Stories__tooltip-link",
                        innerHTML: lang.mobile_stories_narrative_show,
                        onclick: function() {
                            k._hideTooltip(!0), k.openNarrative("".concat(e.owner_id, "/narrative").concat(e.raw_id), {
                                source: "narrative_story",
                                isOpenNarrativeFromFeed: !0
                            })
                        }
                    })
                },
                _hasContext: function(e) {
                    return !(!this.extra || !this.extra.context || this.extra.context !== e)
                },
                sendAnalyticsEvent: function(e) {
                    var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},
                        n = k.getCurrentStory(),
                        i = k.getCurrentAuthor(),
                        a = k.getCurrentStoryIndex(),
                        r = n.raw_id.split("_"),
                        o = v(r, 2),
                        s = o[0],
                        l = o[1],
                        c = k._getSource(),
                        u = {
                            event_type: e,
                            story_owner_id: s,
                            story_id: l,
                            time: vk.ts + Math.floor(((new Date).getTime() - vk.started) / 1e3),
                            view_entry_point: c,
                            nav_screen: cur.module
                        };
                    if (i) {
                        var d = i.data,
                            f = i.getCountDown();
                        f && d && extend(u, {
                            stories_author_before: a,
                            stories_author_after: d.items.length - a,
                            view_event_timeline_position: f.initialTime - f.left
                        })
                    }
                    Object.assign(u, t), statlogsValueEvent("story_product_analytics", u)
                },
                clickAuthor: function() {
                    this.sendAnalyticsEvent("go_to_author")
                },
                askQuestionBox: function(e) {
                    (0, p.cancelEvent)(e);
                    var t = this.getCurrentStory().can_ask;
                    if (this.hideFlashPopup(!1), this.sendAnalyticsEvent("click_on_clickable_sticker"), this._hideTooltip(), !t) return k.showFlashPopup(lang.mobile_stories_ask_question_forbidden), !1;
                    this.stopStory(), (0, p.addClass)(this.layer, "Stories_questionOpened");
                    var n = this.authors[this.store.authorIndex],
                        i = (0, p.geByClass1)("Story__questionTextarea", n);
                    requestAnimationFrame(function() {
                        i && i.focus()
                    })
                },
                changeAskAnonymous: function(e) {
                    e.preventDefault();
                    var t = this.getCurrentStory();
                    if (t) {
                        var n = (0, p.intval)(!(0, p.intval)((0, p.domData)(e.target, "anonymous")));
                        (0, p.domData)(e.target, "anonymous", n), t.isAskAnonymous = n, (0, p.val)(e.target, n ? lang.mobile_stories_ask_question_anonymous : lang.mobile_stories_ask_question_own_name)
                    }
                },
                hideAskQuestion: function() {
                    var e = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0];
                    k.store.showMenu = !1, (0, p.removeClass)(k.layer, "Stories_questionOpened"), e && k.playStory()
                },
                onInputQuestion: function(e) {
                    $(".Story__questionSend").disabled = !(0, p.trim)((0, p.val)(e))
                },
                sendQuestion: function() {
                    var e = k.getCurrentAuthorEl();
                    if (e) {
                        var t = (0, p.geByClass1)("Story__questionTextarea", e),
                            n = (0, p.geByClass1)("Story__questionSend", e),
                            i = k.getCurrentStory(),
                            a = i.raw_id,
                            r = i.askQuestionHash,
                            o = i.accessKey,
                            s = i.isAskAnonymous,
                            l = v(a.split("_"), 2),
                            c = l[0],
                            u = l[1],
                            d = (0, p.trim)((0, p.val)(t));
                        (0, p.val)(t, ""), n.disabled = !0;
                        var f = ajax.post("stories.php", {
                            _ajax: 1,
                            act: "ask_question",
                            story_owner_id: c,
                            story_id: u,
                            question_text: d,
                            is_anonymous: s,
                            hash: r,
                            access_key: o
                        }, {
                            onDone: function(e) {
                                if (!e) return k.showFlashPopup(lang.mobile_stories_question_error), !1;
                                var t = k.getCurrentAuthor().data.author;
                                k.showFlashPopup(lang.mobile_stories_question_sent.replace("{name}", t.first_name_ins)), s ? k.sendAnalyticsEvent("question_reply_anonymous") : k.sendAnalyticsEvent("question_reply")
                            }
                        });
                        k._saveRequest(f), k.hideAskQuestion()
                    }
                },
                getQuestionById: function(e) {
                    var t = this.getCurrentStory();
                    return this.store.questions[t.raw_id].find(function(t) {
                        return t.id === e
                    })
                },
                openQuestionActions: function(e) {
                    var t = this.getQuestionById(e);
                    if (t) {
                        var n = t.canAnswer,
                            a = t.isOwnerBlocked,
                            r = t.canBlocked,
                            o = [(0, d.ModalMenuBtn)({
                                inner: lang.mobile_stories_question_delete,
                                onclick: ["Stories.removeQuestion", "this", t.id]
                            })];
                        r && (o.push((0, d.ModalMenuBtn)({
                            inner: a ? lang.mobile_stories_question_unban : lang.mobile_stories_question_ban,
                            onclick: ["Stories.banQuestion", "this", t.id]
                        })), o.push((0, d.ModalMenuBtn)({
                            inner: lang.mobile_stories_question_report,
                            onclick: ["Stories.reportQuestion", "this", t.id]
                        }))), n && o.unshift((0, d.ModalMenuBtn)({
                            inner: lang.mobile_stories_question_reply,
                            onclick: ["Stories.replyQuestionBox", "this", t.id]
                        }));
                        var s = (0, d.default)({
                            class: "Question__popup",
                            items: o
                        });
                        f.default.open(i.default.elem(s), !0)
                    }
                },
                removeQuestion: function(e, t) {
                    var n = this,
                        i = this.getQuestionById(t),
                        a = i.storyOwnerId,
                        r = i.storyId,
                        o = i.id,
                        s = i.removeHash;
                    ajax.post("stories.php", {
                        _ajax: 1,
                        act: "remove_question",
                        story_owner_id: a,
                        story_id: r,
                        question_id: o,
                        remove_hash: s
                    }, {
                        onDone: function(i) {
                            var s = "".concat(a, "_").concat(r);
                            if (d.default.close(e), !i) return requestAnimationFrame(function() {
                                return n.showFlashPopup(lang.mobile_stories_question_error)
                            }), !1;
                            $$('.Question[data-id="'.concat(t, '"]')).forEach(function(e) {
                                return re(e)
                            }), n.store.questions[s] = n.store.questions[s].filter(function(e) {
                                return e.id !== t
                            }), $$(".Question").length < 1 && re((0, p.geByClass1)("Views__questions")), k.sendAnalyticsEvent("question_delete", {
                                questionId: o
                            })
                        }
                    })
                },
                replyQuestionBox: function(e, t) {
                    var n = this.getCurrentStory(),
                        a = this.getQuestionById(t),
                        r = a.author,
                        o = a.text,
                        s = lang.mobile_stories_question_reply_title.replace("{name}", r.nameGen),
                        l = i.default.elem({
                            class: "QuestionReplyPopup",
                            inner: [{
                                class: "QuestionReplyPopup__inner",
                                inner: [{
                                    class: "QuestionReplyPopup__header",
                                    inner: [{
                                        class: "QuestionReplyPopup__preview",
                                        style: "background-image: url(".concat(n.small_preview, ")")
                                    }, {
                                        class: "QuestionReplyPopup__top",
                                        inner: [{
                                            class: "QuestionReplyPopup__title",
                                            inner: s
                                        }, {
                                            class: "QuestionReplyPopup__question",
                                            inner: o
                                        }]
                                    }]
                                }, {
                                    class: "QuestionReplyPopup__content",
                                    inner: [{
                                        class: "QuestionReplyPopup__textarea",
                                        tag: "textarea",
                                        placeholder: lang.mobile_stories_comment_textarea,
                                        oninput: "Stories.onInputReplyQuestion(this);"
                                    }]
                                }, {
                                    class: "QuestionReplyPopup__footer",
                                    inner: [(0, h.default)({
                                        class: "QuestionReplyPopup__send",
                                        theme: "regular",
                                        inner: lang.mobile_stories_question_reply_to_message,
                                        on_click: ["Stories.sendReplyQuestion", t],
                                        disabled: !0
                                    }), (0, h.default)({
                                        class: "QuestionReplyPopup__cancel",
                                        theme: "link",
                                        inner: lang.mobile_stories_comment_cancel,
                                        on_click: ["Stories.hideReplyQuestion"]
                                    })]
                                }]
                            }]
                        });
                    this.popout.appendChild(l), d.default.close(e)
                },
                hideReplyQuestion: function() {
                    re((0, p.geByClass1)("QuestionReplyPopup", k.popout))
                },
                onInputReplyQuestion: function(e) {
                    $(".QuestionReplyPopup__send").disabled = !(0, p.trim)((0, p.val)(e))
                },
                sendReplyQuestion: function(e) {
                    var t = (0, p.trim)((0, p.val)((0, p.geByClass1)("QuestionReplyPopup__textarea"))),
                        n = k.getQuestionById(e),
                        i = n.id,
                        a = n.ownerId,
                        r = n.storyOwnerId,
                        o = n.storyId,
                        s = n.sendHash,
                        l = "story".concat(r, "_").concat(o),
                        c = "".concat(t, "\n\n ").concat(n.text),
                        u = ajax.post("mail.php", {
                            _ajax: 1,
                            act: "send",
                            hash: s,
                            media: l,
                            message: c,
                            to: a
                        }, {
                            onDone: function(e) {
                                var t = e && e.error ? e.message : lang.mobile_stories_comment_success;
                                k.showFlashPopup(t, !1), k.sendAnalyticsEvent("question_send_message", {
                                    questionId: i
                                })
                            }
                        });
                    k._saveRequest(u), k.hideReplyQuestion()
                },
                showQuestions: function(e) {
                    var t = new c.default(e).render();
                    this.popout.appendChild(t), k.sendAnalyticsEvent("question_show_all")
                },
                hideQuestions: function() {
                    re((0, p.geByClass1)("Questions", this.popout))
                },
                banQuestion: function(e, t) {
                    var n = this.getQuestionById(t),
                        i = n.storyOwnerId,
                        a = n.storyId,
                        r = n.banHash,
                        o = n.isOwnerBlocked;
                    ajax.post("stories.php", {
                        _ajax: 1,
                        act: "ban_question",
                        story_raw: "".concat(i, "_").concat(a),
                        question_id: t,
                        ban_hash: r,
                        is_blocked: +o
                    }, {
                        onDone: function(i) {
                            if (!i) return d.default.close(e), void k.showFlashPopup(lang.mobile_stories_question_error, !1);
                            if (!o) {
                                var a = "question_ban_author";
                                n.isAnonymous && (a = "question_ban_anonymous_author"), k.sendAnalyticsEvent(a, {
                                    questionId: t
                                })
                            }
                            d.default.close(e), n.isOwnerBlocked = !o, k.showFlashPopup(o ? lang.mobile_stories_question_author_unblocked : lang.mobile_stories_question_author_blocked, !1)
                        }
                    })
                },
                reportQuestion: function(e, t) {
                    var n = this.getQuestionById(t),
                        i = this.getFrom();
                    d.default.close(e);
                    var a = "story_question".concat(n.storyOwnerId, "_").concat(n.id);
                    nav.go("/reports?act=add&object=".concat(a, "&refrom=").concat(i))
                },
                toggleQuestionTooltip: function(e, t) {
                    var n = $(".QuestionSupport");
                    (0, p.cancelEvent)(e), n && (t ? (0, p.removeClass)(n, "QuestionSupport--active") : (0, p.toggleClass)(n, "QuestionSupport--active"))
                },
                openMusicStickerActions: function(e, t) {
                    var n = ge("audio".concat(e)),
                        a = hasClass("ai_added", n),
                        r = (0, d.default)({
                            close: !0,
                            items: [(0, d.ModalMenuBtn)({
                                class: "ai_add",
                                inner: a ? lang.global_delete_audio : lang.global_add_to_audio,
                                onclick: 'Stories.addMusic(this, "'.concat(e, '", ').concat(a, ");")
                            }), (0, d.ModalMenuBtn)({
                                class: "ai_add",
                                inner: lang.mobile_stories_music_next,
                                onclick: "Stories.nextMusic(this, ".concat(t, ");")
                            })]
                        }),
                        o = i.default.elem(r);
                    o.setAttribute("id", "ai_menu_".concat(t.id)), f.default.open(o, !0)
                },
                addMusic: function(e, t, n) {
                    audioplayer.add(t), d.default.close(e), k._hideTooltip(!0), k.showFlashPopup(n ? lang.mobile_stories_music_deleted : lang.mobile_stories_music_added)
                },
                nextMusic: function(e, t) {
                    var n = window,
                        i = n.audio,
                        a = n.audioplayer;
                    if (i.getCurrentId()) {
                        var r = i.playlist().map(function(e) {
                            return e.id
                        }).indexOf(i.getCurrentId()) + 1;
                        i.addToPlaylist([t], r)
                    } else a.playPause(!1, t.id, !0), i.pause();
                    d.default.close(e), k._hideTooltip()
                },
                onRender: (0, a.default)()
            };
        y.onChange(function() {
            window.store.storiesLayers = [], window.store.stories = {}
        }), window.Stories = k
    },
    "98L6": function(e, t, n) {
        "use strict";
        window.FeedBlocks = {
            hideReason: function e(t, n) {
                if (e.progress) return !1;
                e.progress = !0;
                var i = "block_" + t,
                    a = ge(i);
                cur.feedBlocksHTML && delete cur.feedBlocksHTML[i], ajax.post("feed.php", {
                    act: "block_hide_reason",
                    block_id: t,
                    reason: 0 | n,
                    hash: attr(a, "data-hash"),
                    pos: attr(a, "data-pos"),
                    ref: attr(a, "data-ref")
                }, {
                    onDone: function(t) {
                        e.progress = !1, t ? val(a, t) : hide(a), e.progress = !1
                    },
                    onFail: function() {
                        e.progress = !1
                    }
                })
            },
            restore: function(e) {
                var t = "block_" + e,
                    n = ge(t);
                cur.feedBlocksHTML && cur.feedBlocksHTML[t] && val(t, cur.feedBlocksHTML[t]), ajax.post("feed.php", {
                    act: "block_restore",
                    block_id: e,
                    hash: attr(n, "data-hash"),
                    pos: attr(n, "data-pos"),
                    ref: attr(n, "data-ref")
                })
            },
            hide: function e(t, n) {
                if (e.progress) return !1;
                e.progress = !0, post.wallActionsHide();
                var i = "block_" + t,
                    a = ge(i);
                return ajax.post("feed.php", {
                    act: "block_hide",
                    block_id: t,
                    hash: attr(a, "data-hash"),
                    pos: attr(a, "data-pos"),
                    ref: attr(a, "data-ref")
                }, {
                    onDone: function(t) {
                        post.wallActionsHide(), cur.feedBlocksHTML || (cur.feedBlocksHTML = {}), cur.feedBlocksHTML[i] = val(a), val(a, t), e.progress = !1
                    },
                    onFail: function() {
                        e.progress = !1
                    }
                }), !1
            }
        }
    },
    "98sY": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.initDebugTools = function() {
            window._logTimer = (new Date).getTime(),
                function() {
                    if ((0, a.partConfigEnabled)("log_fetch_requests")) {
                        var e = function(e, t) {
                            try {
                                if (~e.indexOf("/al_audio") || ~e.indexOf("/like.php")) throw new Error(t)
                            } catch (e) {
                                o(e)
                            }
                        };
                        ! function(e) {
                            var t = window.XMLHttpRequest;
                            window.XMLHttpRequest = function() {
                                var n, i, r = new t,
                                    o = r.open,
                                    s = r.send;
                                return r.open = function() {
                                    var e = Array.prototype.slice.call(arguments);
                                    return i = e[0], n = e[1], o.apply(r, arguments)
                                }, r.send = function() {
                                    var t = arguments[0];
                                    return ("POST" === (i = (i || "").toUpperCase()) || "GET" === i && (0, a.partConfigEnabled)("log_fetch_requests_get")) && e(n, [i, n, t].join(":")), s.apply(r, arguments)
                                }, r
                            }, ["DONE", "HEADERS_RECEIVED", "LOADING", "OPENED", "UNSENT"].forEach(function(e) {
                                Object.defineProperty(window.XMLHttpRequest, e, {
                                    enumerable: !1,
                                    configurable: !1,
                                    writable: !1,
                                    value: t[e]
                                })
                            })
                        }(e), window.fetch && function(e) {
                            var t = window.fetch;
                            window.fetch = function() {
                                for (var n = new Array(arguments.length), i = 0; i < n.length; ++i) n[i] = arguments[i];
                                var a, r = n[0],
                                    o = "GET";
                                "string" == typeof r ? a = r : "Request" in window && r instanceof window.Request ? (a = r.url, r.method && (o = r.method)) : a = "" + r, n[1] && n[1].method && (o = n[1].method);
                                var s = {
                                    method: o,
                                    url: a,
                                    status_code: null
                                };
                                return e(a, a), t.apply(this, n).then(function(e) {
                                    return s.status_code = e.status, e
                                }).catch(function(e) {
                                    throw e
                                })
                            }
                        }(e)
                    }
                }()
        }, t.logEvalError = function(e, t) {
            if (!window.Raven) return;
            if (t && t.length > 350) {
                var n = t.indexOf("; window.TimeSpent && TimeSpent.setTimers && TimeSpent.setTimers(");
                ~n && (t = t.slice(0, n)), t = "".concat(t.slice(0, 200), "...").concat(t.slice(-200))
            }
            e.message += ": ".concat(t), r(e)
        }, t.debugLog = function(e) {
            try {
                window.debuglogClient && debuglogClient(e);
                var t = "[" + ((new Date).getTime() - window._logTimer) / 1e3 + "] ";
                if (window.console && console.log) {
                    var n = Array.prototype.slice.call(arguments);
                    n.unshift(t), i.browser.msie || i.browser.mobile ? console.log(n.join(" ")) : console.log.apply(console, n)
                }
            } catch (e) {}
        }, t.debugEl = function(e) {
            if (!e) return !1;
            var t = e.tagName,
                n = e.id,
                i = e.className,
                a = (t || "").toLowerCase();
            i && (a += "." + e.className.replace(/\s+/g, "."));
            n && !/^__vk/.test(n) && (a += "#".concat(e.id));
            if (!a) return e.toString() || "[NULL]";
            return a
        }, t.logError = r, t.debugBufferLog = o;
        var i = n("gdug"),
            a = n("W9Tc");

        function r(e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},
                n = t.environment,
                i = void 0 !== n && n,
                a = t.breadcrumb,
                r = void 0 !== a && a;
            window.Raven && (r && Raven.captureBreadcrumb({
                message: r.message,
                category: "custom",
                data: r.data
            }), i ? Raven.captureException(e, {
                environment: i
            }) : Raven.captureException(e))
        }

        function o(e) {
            return r(e, {
                environment: "debugLog"
            })
        }
    },
    "9CLW": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("+cqQ")) && i.__esModule ? i : {
            default: i
        };
        var r = window,
            o = r.addEvent,
            s = r.removeEvent,
            l = {
                onIframeReady: (0, a.default)("{ is_api, check_transfer_url, on_success_url }"),
                onPostMessage: (0, a.default)(),
                onAcceptCookieClick: (0, a.default)()
            };

        function c(e) {
            var t;
            if (e.origin.match(/^https?:\/\/([a-zA-Z0-9\-\.]+\.)?money\.mail\.ru$/)) {
                try {
                    t = JSON.parse(e.data)
                } catch (e) {
                    t = {}
                }
                "billing" === t.type && l.onPostMessage(t.action, t.action_params)
            }
        }
        l.onIframeReady(function() {
            o(window, "message", c), window.cur.destroy.push(function() {
                s(window, "message", c)
            })
        }), window.BasisMoneyTransfer = l;
        var u = l;
        t.default = u
    },
    "9Cbe": function(e, t, n) {
        "use strict";
        var i = n("OcsD"),
            a = window,
            r = a.page,
            o = a.onDOMReady,
            s = a.nav;
        window.SliderTabs = {}, SliderTabs._onClick = m, o(A), r.onChange(f), r.onRestore(h);
        var l = {
                container: "SliderTabs",
                scroll: "Slider__scroll",
                active: "SliderTabs__tab_selected"
            },
            c = {
                active: ".SliderTabs__tab_selected",
                tab: ".SliderTabs__tab",
                scroll: ".".concat(l.scroll),
                container: ".".concat(l.container)
            },
            u = "",
            d = 0;

        function f() {
            var e = ge(u),
                t = $(c.container);
            if (e) {
                var n = $(c.scroll, e),
                    a = $(c.active, e);
                n.scrollLeft = d;
                var r = (0, i.getX)(a);
                if (d > r) {
                    n.scrollLeft = r - 16
                }
            } else t ? p() : (u = "", d = 0)
        }

        function h() {
            setTimeout(function() {
                var e = ge(u);
                if (e) {
                    var t = Array.from($$(c.tab, e));
                    if (t) t.some(function(e) {
                        return e.getAttribute("href") === s.cur
                    }) && t.forEach(function(e) {
                        e.getAttribute("href") === s.cur ? e.classList.add(l.active) : e.classList.remove(l.active)
                    })
                }
            })
        }

        function p() {
            var e = $$(c.container),
                t = Math.min((0, i.getCw)(), 882);
            e.forEach(function(e) {
                var n = $(c.scroll, e),
                    a = $(c.active, e);
                if (a) {
                    var r = a.offsetWidth,
                        o = (0, i.getX)(a);
                    o + r > t && (n.scrollLeft = o - t + r)
                }
            })
        }

        function A() {
            p()
        }

        function m(e, t) {
            var n = (0, i.gpeByClass)(l.container, t),
                a = (0, i.gpeByClass)(l.scroll, t),
                r = $(c.active, n);
            return r && r.classList.remove(l.active), t.classList.add(l.active), d = a.scrollLeft, u = attr(n, "id"), !0
        }
    },
    "9EK6": function(e, t, n) {
        "use strict";
        var i = n("tMHi"),
            a = _(n("+cqQ")),
            r = n("jk6M"),
            o = n("lkNA"),
            s = n("fOXz"),
            l = n("XBHu"),
            c = n("uU5W"),
            u = n("W9Tc"),
            d = n("0bdD"),
            f = n("D+pY"),
            h = n("8mQl"),
            p = n("YQfe"),
            A = n("J8bf"),
            m = _(n("xk4V"));

        function _(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        var v = window,
            g = v.cancelEvent,
            y = v.removeEvent,
            b = v.srand,
            w = v.ce,
            k = v.addEvent,
            E = v.ssSet,
            S = v.lsGet,
            C = (v.vkNow, v.onDOMReady),
            M = v.ssGet,
            P = v.se,
            T = v.lsSet,
            D = v.each,
            I = v.HTMLAudioElement,
            x = function() {
                if (!I) return {
                    init: function() {},
                    playing: function() {},
                    onInit: function() {},
                    onSelect: function() {},
                    pause: function() {},
                    onAdStart: function() {},
                    onAdComplete: function() {}
                };
                var e = !1,
                    t = !1,
                    n = !1,
                    s = !1,
                    l = !1,
                    f = function t(n) {
                        (e || !1 !== l) && (e = !1, H && !1 === l || (s = !0, $.pause.call(L))), g(n), y(L, "play", t), y(document, r.isTouch ? "touchstart" : "click", v)
                    },
                    _ = function() {
                        !1 !== l && l()
                    },
                    v = function t() {
                        n && (n = !1, e = !0, G(L), y(document, r.isTouch ? "touchstart" : "click", t))
                    },
                    L = function(t) {
                        var n = window.Audio ? new Audio : w("audio");
                        n.autobuffer = !0, n.muted = !1, n.preload = "none", t && (n.volume = t.volume, y(t, "play", Q), y(t, "pause", Y), y(t, "progress", X), y(t, "timeupdate", K), y(t, "ended", J), y(t, "play", f), y(t, "progress canplaythrough", _), y(document, r.isTouch ? "touchstart" : "click", v), t.muted = !0, t.pause(), t.src = null);
                        return U = !1, V = !1, !1, e = !1, s = !1, l = !1, k(n, "play", Q), k(n, "pause", Y), k(n, "progress", X), k(n, "timeupdate", K), k(n, "ended", J), k(n, "play", f), k(n, "progress canplaythrough", _), k(document, r.isTouch ? "touchstart" : "click", v), n
                    }(),
                    B = b(),
                    R = [],
                    N = null,
                    j = {},
                    F = "",
                    H = !1,
                    V = !1,
                    U = !1,
                    z = null,
                    W = !1,
                    q = !1;
                delete I.prototype.play, delete I.prototype.pause, delete I.prototype.load, delete I.prototype.canPlayType;
                var $ = {
                    play: I.prototype.play,
                    pause: I.prototype.pause,
                    load: I.prototype.load,
                    canPlayType: I.prototype.canPlayType
                };

                function G(e) {
                    var t = $.play.call(e);
                    void 0 !== t && t.catch(function(t) {
                        t.code !== t.ABORT_ERR && e.pause()
                    })
                }

                function Q() {
                    H || (H = !0, x.onPlay(!0), E("audio_play", "1"), clearTimeout(z), z = setTimeout(ne, 100)), audioBackgroundRestriction && audioBackgroundRestriction.isIdle && x.pause()
                }

                function Y() {
                    s ? s = !1 : H && (H = !1, x.onPause(!0), E("audio_play", "0"), clearTimeout(z))
                }

                function X() {
                    x.onProgress(!0)
                }

                function K() {
                    s || (x.onProgress(!0), x.onPositionChanged(!0, x.getPosition(), x.duration()), x.onTimeUpdate(!0), E("audio_pos", x.getPosition()), !U && L.duration - L.currentTime < .5 && (U = !0), V && (V = !1, x.next()))
                }

                function J() {
                    x.onEnded(!0), U ? (U = !1, x.next()) : V = !0
                }

                function Z() {
                    return R[N] || !1
                }

                function ee() {
                    return Z().id || !1
                }

                function te(e, t) {
                    if (e) {
                        var n, a = (0, i.audioUnmaskSource)(e.src),
                            r = function() {
                                return x.onSelect(!0, e)
                            };
                        n = e.src, /\.m3u8/.test((0, i.audioUnmaskSource)(n)) ? function e(t, n, i) {
                            var a = window,
                                r = a.Hls,
                                s = a.browser;
                            var l = function() {
                                isFunction(i) && i()
                            };
                            if (!r) return s.safari && G(L), void(0, o.loadScript)("/js/lib/hls.min.js", {
                                onLoad: function() {
                                    return e(t, n, i)
                                }
                            });
                            if (r.isSupported() && !s.msie_edge) {
                                ae && ae.destroy();
                                var c = new r({
                                    maxBufferHole: 3,
                                    nudgeOffset: .5,
                                    nudgeMaxRetry: 5,
                                    maxBufferLength: 240
                                });
                                c.attachMedia(t), c.loadSource(n), c.on(r.Events.ERROR, function(e, t) {
                                    t.details === r.ErrorDetails.BUFFER_STALLED_ERROR && (c.stopLoad(), c.startLoad())
                                }), c.on(r.Events.MANIFEST_PARSED, function() {
                                    return l()
                                }), ae = c
                            } else t.canPlayType("application/vnd.apple.mpegurl") && (t.src = n, l())
                        }(L, a, r) : (L.src = a, t || $.load.call(L), r())
                    }
                }

                function ne() {
                    if (H) {
                        var e = S("audio_current_player");
                        B != e ? x.pause() : z = setTimeout(ne, 100)
                    }
                }

                function ie() {
                    var e = ee();
                    E("audio_id", e), W && (0, A.setCookie)(W, e, 1)
                }
                var ae = null;
                return {
                    onInit: (0, a.default)(),
                    init: function(e) {
                        if (!q && x.support) {
                            q = !0, e.cookie && (W = e.cookie, e.cookie_path || "/");
                            var t = M("audio_pos"),
                                n = M("audio_vol");
                            C(function() {
                                e.playlist && x.playlist(e.playlist, {
                                    q: e.playlist_q || ""
                                });
                                var i = M("audio_id");
                                if (i) {
                                    L.addEventListener("loadeddata", function e() {
                                        i === ee() && (null !== t && x.setPosition(t), null !== n && x.volume(n)), L.removeEventListener("loadeddata", e)
                                    }), te(R[N]), x.select(i), null !== t && x.onPositionChanged(!0, t, x.duration())
                                }
                                x.onInit()
                            })
                        }
                    },
                    support: L.canPlayType && $.canPlayType.call(L, "audio/mpeg") && "no" != $.canPlayType.call(L, "audio/mpeg") || !1,
                    onPlay: P(ee),
                    onPause: P(ee),
                    onAdStart: P(Z),
                    onAdComplete: P(Z),
                    onDeselect: P(Z),
                    onSelect: P(),
                    onProgress: P(ee, function() {
                        return x.loaded()
                    }, function() {
                        return x.duration()
                    }),
                    onPositionChanged: P(ee),
                    onTimeUpdate: P(ee),
                    onVolumeChanged: P(ee, function() {
                        return L.volume
                    }),
                    onEnded: P(ee),
                    onNotFoundError: P(),
                    onEmptyPlaylistError: P(),
                    getCurrent: Z,
                    getCurrentId: ee,
                    operate: function(e) {
                        if (!x.support) return !1;
                        !e || R[N] && e == R[N].id ? H ? x.pause() : x.play() : x.play(e)
                    },
                    playing: function() {
                        return H
                    },
                    select: function(e) {
                        if (!x.support) return !1;
                        if (e)
                            if (R.length) {
                                if (R[j[e]]) return ee() && x.onDeselect(!0), N = j[e], te(R[N], !0), ie(), !0;
                                x.onNotFoundError(!0, e)
                            } else x.onEmptyPlaylistError(!0, e)
                    },
                    autoplay: function(e) {
                        x.play(e), L.paused && x.pause()
                    },
                    play: function(e) {
                        var t = this;
                        if (!x.support) return !1;
                        if (e) {
                            if (H && x.pause(), !x.select(e)) return;
                            try {
                                L.currentTime = .01
                            } catch (e) {}
                        }
                        if (O.isPlaying()) H ? O.pause() : O.resume();
                        else if (!H)
                            if (L.muted = !1, L.preload = "auto", H = !0, x.onPlay(!0), e && (0, u.partConfigEnabled)("mvk_audio_ads")) {
                                browser.safari && $.load.call(L);
                                var n = c.AdsPlayerAdapter.convertAudioInfo(R[j[e]]);
                                O.startPlay(n, !1, function() {
                                    t._play()
                                })
                            } else this._play()
                    },
                    _play: function() {
                        G(L), E("audio_play", "1"), T("audio_current_player", B), h.AudioQueue.connect()
                    },
                    pause: function() {
                        if (!x.support) return !1;
                        H && ($.pause.call(L), O.isPlaying() && O.pause(), H = !1, x.onPause(!0), E("audio_play", "0"))
                    },
                    getDeviceId: function() {
                        var e = S("audio_player_device_id");
                        return e || (e = (0, m.default)(), T("audio_player_device_id", e)), e
                    },
                    getPosition: function() {
                        return x.isAdsPlaying() ? O.getCurrentProgress() * O.getDuration() : L.currentTime
                    },
                    setPosition: function(e, t) {
                        if (!x.support) return !1;
                        var n;
                        n = e, t && (n = x.duration() * e), n = Math.max(0, Math.min(n, x.duration())), L.currentTime = n, E("audio_pos", n), x.onPositionChanged(!0, n, x.duration())
                    },
                    volume: function(e) {
                        if (!x.support) return !1;
                        if (void 0 === e) return L.volume;
                        try {
                            L.volume = e || 0, O.updateVolume()
                        } catch (e) {}
                        x.onVolumeChanged(!0), E("audio_vol", e || 0)
                    },
                    loaded: function() {
                        return L.buffered && L.buffered.length && L.buffered.end(L.buffered.length - 1) || 0
                    },
                    duration: function() {
                        return this.isAdsPlaying() ? O.getDuration() : L.duration || R[N] && R[N].duration || 0
                    },
                    played: function() {
                        for (var e = L.played, t = 0, n = 0; n < e.length; n++) t += e.end(n) - e.start(n);
                        return t
                    },
                    next: function() {
                        if (!x.support) return !1;
                        H && x.pause(), x.onDeselect(!0), ++N >= R.length && (N = 0), te(R[N]), ie(), n = !0, x.play(ee())
                    },
                    prev: function() {
                        if (!x.support) return !1;
                        H && x.pause(), x.onDeselect(!0), --N <= 0 && (N = R.length - 1), te(R[N]), ie(), n = !0, x.play(ee())
                    },
                    playlist: function(e, t) {
                        return !!x.support && (void 0 === e ? R : (H && x.pause(), Z() && x.onDeselect(!0), R = e, F = t && t.q || "", N = null, j = {}, D(e, function(e, t) {
                                j[t.id] = e
                            }), void
                            function(e) {
                                E("audio_query", e), W && (0, A.setCookie)(W + "q", encodeURIComponent(e), 1)
                            }(F)))
                    },
                    addToPlaylist: function(e, t) {
                        var n = {},
                            i = t || R.length;
                        R.forEach(function(e) {
                            return n[e.id] = !0
                        }), e.forEach(function(e) {
                            n[e.id] || (t ? R.splice(i, 0, e) : R.push(e))
                        })
                    },
                    playlist_q: function() {
                        return F
                    },
                    setIsPlaying: function(e) {
                        H = e
                    },
                    isAdsPlaying: function() {
                        return O.isPlaying()
                    },
                    initSplash: function() {
                        t || (window.audioRestrictionSplash = new d.RestrictionSplash, t = !0)
                    },
                    playNothing: function() {
                        L.src = p.SILENCE, $.load.call(L), G(L)
                    }
                }
            }();
        window.Artist = s.Artist, window.audio = x, window.AudioBackgroundRestriction = f.AudioBackgroundRestriction;
        var O = new l.AudioAds(new c.AdsPlayerAdapter(x), null, !0);
        window.audioBackgroundRestriction = null, document.addEventListener("DOMContentLoaded", function() {
            (0, u.partConfigEnabled)("audio_mvk_background_restriction_enabled") && (window.audioBackgroundRestriction = new f.AudioBackgroundRestriction)
        }), document.addEventListener("DOMContentLoaded", function() {
            "audio" === cur.module && x.initSplash()
        }), window.page.onChange(function() {
            "audio" === cur.module ? x.initSplash() : window.audioRestrictionSplash && window.audioRestrictionSplash.popup && window.audioRestrictionSplash.close()
        })
    },
    "9HII": function(e, t, n) {
        "use strict";
        var i = n("UxAg");
        window.AudioSpecialForYou = {
            selector: ".AudioSpecialForYou",
            setPlaying: function(e) {
                var t = (0, i.$)(a.special);
                t && t.classList.toggle(r.playing, e)
            }
        };
        var a = {
                special: window.AudioSpecialForYou.selector
            },
            r = {
                playing: "AudioSpecialForYou_playing"
            }
    },
    "9Hyc": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i = s(n("bZ/P")),
            a = s(n("Mc5h")),
            r = s(n("9y81")),
            o = s(n("AXyT"));

        function s(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }

        function l() {
            var e = function(e, t) {
                t || (t = e.slice(0));
                return Object.freeze(Object.defineProperties(e, {
                    raw: {
                        value: Object.freeze(t)
                    }
                }))
            }(['\n    <div class="', '" ', ">\n      ", '\n      <div class="Unfold__popup ScrollView ', '">\n        ', "\n      </div>\n    </div>\n  "]);
            return l = function() {
                return e
            }, e
        }
        var c = function(e) {
            var t = i.default.class(e.mix, "Unfold", {
                    position: e.position,
                    asIcon: !!e.icon || !!e.icon_html,
                    open: e.opened,
                    withTitle: !!e.title
                }),
                n = function(e) {
                    var t, n = e.title;
                    if (e.icon) t = (0, r.default)({
                        icon: e.icon
                    });
                    else if (e.icon_html) t = e.icon_html;
                    else {
                        for (var o = e.items, s = o.length, l = "", c = "", u = 0; u < s; u++) {
                            var d = o[u];
                            if (d && d.active) {
                                l = d.text, c = d.activeCount;
                                break
                            }
                        }
                        t = [(0, a.default)({
                            mix: "Unfold__triggerText",
                            tag: "h1",
                            inner: [Wd.html({
                                class: "Unfold__triggerContent",
                                inner: n ? [{
                                    class: "Unfold__triggerContentTitle",
                                    inner: n
                                }, {
                                    class: "Unfold__triggerContentSubTitle",
                                    inner: l
                                }] : [l, c ? Wd.html((0, a.default)({
                                    mix: "Unfold__triggerTextCount",
                                    inner: c
                                })) : ""]
                            })]
                        }), (0, r.default)({
                            mix: "Unfold__triggerIcon",
                            icon: "reveal"
                        })], t = i.default.list(t)
                    }
                    var f = e.opened ? e.close_url : e.open_url;
                    return Wd.html({
                        href: f,
                        class: "Unfold__trigger",
                        onclick: ["Unfold._onTriggerClick", "event"],
                        onmousedown: ["Unfold._onTriggerMouseDown", "this"],
                        attrs: e.trigger_attrs,
                        inner: Wd.wrap(t)
                    })
                }(e),
                o = i.default.list(e.items, u),
                s = e.name && i.default.attr("data-name", e.name);
            return i.default.html(l(), t, s, n, e.popup_class, o)
        };

        function u(e) {
            if (!e) return "";
            var t = "";
            return e.icon && (t = "string" == typeof e.icon ? (0, r.default)({
                mix: "Unfold__itemIcon",
                icon: e.icon
            }) : (0, a.default)({
                mix: i.default.class("Unfold__itemIcon", e.icon.class)
            })), (0, a.default)({
                mix: i.default.class(e.mix, "_touched", "replaceState", "Unfold__item", {
                    active: e.active,
                    name: e.name,
                    disabled: e.disabled
                }),
                url: e.url,
                tag: e.tag,
                attrs: e.attrs,
                inner: [t, (0, a.default)({
                    mix: "Unfold__itemText",
                    inner: [e.text, e.count ? (0, a.default)({
                        mix: "Unfold__itemCountHidden",
                        inner: e.count
                    }) : ""]
                }), e.count ? (0, o.default)({
                    mix: "Unfold__itemCount",
                    gray: !0,
                    value: e.count
                }) : ""]
            })
        }
        t.default = c
    },
    "9M99": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.emojiToHTML = void 0;
        var i = n("yqpO");
        t.emojiToHTML = function(e) {
            return (0, i.emojiToHTML)(e, !0)
        }
    },
    "9RP+": function(e, t, n) {
        "use strict";
        var i, a = (i = n("rKUZ")) && i.__esModule ? i : {
                default: i
            },
            r = function(e) {
                if (e && e.__esModule) return e;
                var t = o();
                if (t && t.has(e)) return t.get(e);
                var n = {};
                if (null != e) {
                    var i = Object.defineProperty && Object.getOwnPropertyDescriptor;
                    for (var a in e)
                        if (Object.prototype.hasOwnProperty.call(e, a)) {
                            var r = i ? Object.getOwnPropertyDescriptor(e, a) : null;
                            r && (r.get || r.set) ? Object.defineProperty(n, a, r) : n[a] = e[a]
                        }
                }
                n.default = e, t && t.set(e, n);
                return n
            }(n("AWn4"));

        function o() {
            if ("function" != typeof WeakMap) return null;
            var e = new WeakMap;
            return o = function() {
                return e
            }, e
        }
        Object.assign(r.default, {
            redraw: function() {
                if (!store.mail.cur.peerId) return;
                var e = a.default.getElem("curConvo"),
                    t = (0, r.uCurConvoTyping_getParams)();
                q.parseClass("typing", e.className).animation === t.animation ? a.default.setTyping(e, t) : e.outerHTML = (0, a.default)(t)
            }
        })
    },
    "9qLg": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("+cqQ")) && i.__esModule ? i : {
                default: i
            },
            r = n("izth");

        function o(e, t) {
            return function(e) {
                if (Array.isArray(e)) return e
            }(e) || function(e, t) {
                if (!(Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e))) return;
                var n = [],
                    i = !0,
                    a = !1,
                    r = void 0;
                try {
                    for (var o, s = e[Symbol.iterator](); !(i = (o = s.next()).done) && (n.push(o.value), !t || n.length !== t); i = !0);
                } catch (e) {
                    a = !0, r = e
                } finally {
                    try {
                        i || null == s.return || s.return()
                    } finally {
                        if (a) throw r
                    }
                }
                return n
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance")
            }()
        }
        var s = window,
            l = s.getNotify,
            c = s.setNotify,
            u = s.ce,
            d = s.onDOMReady,
            f = s.append,
            h = s.clog,
            p = s.extend,
            A = s.parseJSON,
            m = s.intval,
            _ = s.each,
            v = window.ajax,
            g = window.nav,
            y = window.menu,
            b = window.mail,
            w = function() {
                var e = null,
                    t = {},
                    n = 1,
                    i = null,
                    s = !1,
                    k = !1;

                function E() {
                    n < 64 && (n *= 2)
                }

                function S(e, t) {
                    var n = window.al;
                    if (!1 === e && (e = l() + (t || 1)), c(e), window.al && window.al.menu) {
                        var i = new Array(n.menu.length);
                        i[3] = e, y.refreshCounters(i)
                    }
                }

                function C(e) {
                    return Object.keys(e).some(function(e) {
                        return -1 !== e.indexOf("attach")
                    }) || e.fwd || e.emoji || e.geo
                }

                function M(e, t, n) {
                    var i = toInt(e.from_admin) || null,
                        a = toInt(g.getQuery("community"));
                    return i && a ? a : 2 & t ? window.vk.id : toInt(e.from) || n
                }

                function P() {
                    return Number(g.getQuery("offset")) > 0
                }

                function T(e) {
                    try {
                        return JSON.parse(e)
                    } catch (e) {
                        return null
                    }
                }
                return {
                    onNewMsg: (0, a.default)("{ peerId, msgId, authorId, text, date, hasAttachments, flags, isService }"),
                    onEditMsg: (0, a.default)("{ peerId, msgId, authorId, text, date, hasAttachments, flags }"),
                    onMsgReadByMe: (0, a.default)("msgId", "dialogId"),
                    onMsgReadByOther: (0, a.default)("msgId", "dialogId"),
                    onOnlineChange: (0, a.default)("{ userId, isOnline, onlinePlatform, lastActionTime }"),
                    onTyping: (0, a.default)("dialogId", "authorId"),
                    onMultiTyping: (0, a.default)("peerId", "userIds", "totalCount"),
                    onMsgImportantRemove: (0, a.default)("msgId"),
                    onMsgImportantAdd: (0, a.default)("msgId"),
                    onMsgRemove: (0, a.default)("msgId"),
                    onMsgRestore: (0, a.default)("msgId"),
                    onPeerKeyboard: (0, a.default)("peerId"),
                    onPeerBanner: (0, a.default)("peerId"),
                    onDialogImportant: (0, a.default)("peerId", "isImportant"),
                    onUnreadCount: (0, a.default)("count"),
                    onResync: (0, a.default)(),
                    isLongPollingEnabled: function() {
                        return !!s
                    },
                    init: function(t) {
                        e || ((0, r.setDocumentDomain)(), e = u("iframe", {
                            src: t.frameUrl
                        }, {
                            display: "none"
                        }), d(function() {
                            f(e, window.bodyNode), !0
                        })), w.refreshParams(t), setTimeout(w.check, 1e3)
                    },
                    on: function() {
                        h("[longpoll] start"), s = !0, setTimeout(w.check, 1e3)
                    },
                    off: function() {
                        h("[longpoll] pause"), s = !1
                    },
                    refreshParams: function(e) {
                        p(t, e || {}), p(w, t)
                    },
                    getKey: function() {
                        if (i) try {
                            i.abort()
                        } catch (e) {}
                        i = v.post("/mail", {
                            _ajax: 1,
                            act: "im_get_key",
                            community: g.getQuery("community")
                        }, {
                            onDone: function(e) {
                                /[0-9a-f]{40}/i.test(e) ? (w.refreshParams({
                                    key: e
                                }), w.check()) : h("[longpoll] invalid key")
                            },
                            onFail: function(e) {
                                setTimeout(w.getKey, 1e3 * n), h("[longpoll] from getKey delaying getKey for " + n + "secs"), E()
                            }
                        })
                    },
                    check: function() {
                        if (s && !k)
                            if (w.makeRequest) try {
                                w.makeRequest(function(e, t) {
                                    if (k = !1, s)
                                        if (window.vk.__debug) w.checked(A(t)) && (w.check(), n = 1);
                                        else try {
                                            w.checked(A(t)) && (w.check(), n = 1)
                                        } catch (e) {
                                            try {
                                                h("[longpoll] error", e.message || "no message", e.type || "no type", e.stack || "no stack")
                                            } catch (e) {}
                                            setTimeout(w.check, 1e3 * n), E()
                                        }
                                }, function() {
                                    k = !1, setTimeout(w.check, 1e3 * n), E()
                                }), k = !0
                            } catch (e) {
                                h("[longpoll] makeRequest failed")
                            } else setTimeout(w.check, 1e3)
                    },
                    checked: function(e) {
                        var i, a, r, s = e.failed;
                        if (1 == s || t.ts >= e.ts + 256) {
                            if (w.refreshParams({
                                    ts: e.ts
                                }), s) return !0
                        } else {
                            if (2 == s) return h("[longpoll] delaying getKey for " + n + "secs"), setTimeout(w.getKey, 1e3 * n), E(), !1;
                            if (s) return void h("[longpoll]", e)
                        }
                        if (w.refreshParams({
                                ts: e.ts
                            }), e.updates) {
                            var l = [],
                                c = !1;
                            for (var u in e.updates) {
                                if (116 == e.updates[u][0]) var d = e.updates[u][1],
                                    f = [e.updates[u][0], d.id, d.flags, d.peer_id, d.date, d.title || "", d.message, d.kludges, d.random_id];
                                else f = e.updates[u];
                                var A = m(f[0]),
                                    y = m(f[1]),
                                    k = m(f[2]),
                                    D = m(f[3]);
                                if (1 === k) {
                                    if (10 === A) {
                                        b.updateImportantDialog(y, !1);
                                        continue
                                    }
                                    if (12 === A) {
                                        b.updateImportantDialog(y, !0);
                                        continue
                                    }
                                }
                                if (8 & k) {
                                    if (2 === A) {
                                        if (window.isNewMail) {
                                            w.onMsgImportantAdd(y);
                                            continue
                                        }
                                        b.updateImportantMessages(D, y, 1);
                                        continue
                                    }
                                    if (3 === A) {
                                        if (window.isNewMail) {
                                            w.onMsgImportantRemove(y);
                                            continue
                                        }
                                        b.updateImportantMessages(D, y, -1);
                                        continue
                                    }
                                }
                                if (51 != A)
                                    if (61 != A)
                                        if (62 != A)
                                            if (8 != A)
                                                if (9 != A)
                                                    if (6 != A && 7 != A)
                                                        if (80 != A || !y || g.getQuery("community"))
                                                            if (52 != A) {
                                                                if (D)
                                                                    if (4 != A && 5 != A && 116 != A)
                                                                        if (0 != A)
                                                                            if (2 != A);
                                                                            else {
                                                                                if (128 & k) {
                                                                                    if (window.isNewMail) {
                                                                                        w.onMsgRemove(y);
                                                                                        continue
                                                                                    }
                                                                                    b.markAsDeleted(D, y)
                                                                                }
                                                                                window.isNewMail && 64 & k && w.onMsgRemove(y)
                                                                            }
                                                                else {
                                                                    if (window.isNewMail) {
                                                                        w.onMsgRemove(y);
                                                                        continue
                                                                    }
                                                                    b.markAsDeleted(y)
                                                                } else {
                                                                    var I = 5 == A || 116 == A;
                                                                    if (window.isNewMail) {
                                                                        var x = o(f, 9),
                                                                            O = x[1],
                                                                            L = x[3],
                                                                            B = x[4],
                                                                            R = x[6],
                                                                            N = x[7],
                                                                            j = void 0 === N ? {} : N,
                                                                            F = x[8],
                                                                            H = C(j),
                                                                            V = (i = void 0, a = void 0, r = void 0, i = new Date(1e3 * B), a = i.getHours(), r = i.getMinutes(), a + ":" + (r < 10 ? "0" : "") + r),
                                                                            U = toInt(j.from_admin) || null,
                                                                            z = (toInt(g.getQuery("community")), M(j, k, L)),
                                                                            W = !!j.source_act,
                                                                            q = j.keyboard ? T(j.keyboard) : null;
                                                                        if (I) {
                                                                            var $ = {
                                                                                peerId: L,
                                                                                msgId: O,
                                                                                authorId: z,
                                                                                text: R,
                                                                                date: V,
                                                                                hasAttachments: H,
                                                                                flags: k,
                                                                                adminId: U,
                                                                                randomId: F
                                                                            };
                                                                            116 == A ? $.refreshed = 1 : $.edited = Math.floor(Date.now() / 1e3), w.onEditMsg($)
                                                                        } else w.onNewMsg({
                                                                            peerId: L,
                                                                            msgId: O,
                                                                            authorId: z,
                                                                            text: R,
                                                                            date: V,
                                                                            hasAttachments: H,
                                                                            flags: k,
                                                                            adminId: U,
                                                                            randomId: F,
                                                                            isService: W,
                                                                            keyboard: q
                                                                        });
                                                                        continue
                                                                    }
                                                                    var G = window.vk,
                                                                        Q = 2 & k ? G.id : f[7] && f[7].from || D,
                                                                        Y = f[7] && f[7].source_act;
                                                                    c || (c = !!need("PinnedMsg").getByMsgId(y));
                                                                    var X = f[7].from_admin || Y || c ? null : b.getMsgHTML(y, k, D, f[4], f[5], f[6], f[7], 116 != A ? I : "");
                                                                    if (X && (I ? b.replaceMessage(D, y, Q, X) : P() || b.addMessage(D, y, Q, X), 2 & k || g.getQuery("community") || S(!1, 1)), "chat_kick_user" === Y && f[7].source_mid == G.id) {
                                                                        var K = f[3];
                                                                        b.unpinMessage(K)
                                                                    }
                                                                    X && "chat_pin_message" !== Y && "chat_unpin_message" !== Y || l.push({
                                                                        peer: D,
                                                                        msg_id: y,
                                                                        from_id: Q,
                                                                        source_act: Y,
                                                                        edited: I
                                                                    })
                                                                }
                                                            } else {
                                                                var J = o(f, 3),
                                                                    Z = J[1],
                                                                    ee = J[2];
                                                                if (!window.isNewMail) continue;
                                                                11 == Z && w.onPeerKeyboard(ee), 10 == Z && w.onPeerBanner(ee)
                                                            }
                                else S(y);
                                else {
                                    if (window.isNewMail) {
                                        var te = f[1],
                                            ne = f[2];
                                        6 === A ? w.onMsgReadByMe(ne, te) : w.onMsgReadByOther(ne, te);
                                        continue
                                    }
                                    b.markPeerAsRead(y, k, 7 == A)
                                } else {
                                    if (window.isNewMail) {
                                        w.onOnlineChange({
                                            userId: -y,
                                            isOnline: !1,
                                            lastActionTime: D
                                        });
                                        continue
                                    }
                                    b.updateOnline(-y, 0)
                                } else {
                                    if (window.isNewMail) {
                                        w.onOnlineChange({
                                            userId: -y,
                                            isOnline: !0,
                                            onlinePlatform: 7 === (k || 7) ? "desktop" : "mobile"
                                        });
                                        continue
                                    }
                                    b.updateOnline(-y, k || 7)
                                } else {
                                    if (window.isNewMail) {
                                        var ie = 2e9 + k,
                                            ae = y;
                                        w.onTyping(ie, ae);
                                        continue
                                    }
                                    b.typing(2e9 + k, y)
                                } else {
                                    if (window.isNewMail) {
                                        var re = y,
                                            oe = y;
                                        w.onTyping(re, oe);
                                        continue
                                    }
                                    b.typing(y)
                                }
                            }
                            if (l.length) {
                                var se = [];
                                _(l, function(e, t) {
                                    se.push(t.msg_id)
                                });
                                var le = {
                                    _ajax: 1,
                                    act: "get_messages",
                                    msgs: se.join(","),
                                    community: g.getQuery("community")
                                };
                                c && (le.force_pinned = 1), v.post("/mail", le, {
                                    onDone: function(e, t) {
                                        var n = window.cur,
                                            i = P();
                                        _(l, function(t, n) {
                                            var a = e[n.msg_id],
                                                r = n.peer;
                                            a.text && !i && (n.edited ? b.replaceMessage(n.peer, n.msg_id, n.from_id, a.text) : b.addMessage(n.peer, n.msg_id, n.from_id, a.text)), a.unpin && b.unpinMessage(r), a.pinned && b.pinMessage(r, a.pinned)
                                        }), t && (t.play_animation_msg_id && StickersAnimation ? StickersAnimation.loadStickerInMvkIMAndPlay(t.play_animation_msg_id) : (p(n, t), b.updateStickers()))
                                    }
                                })
                            }
                        }
                        return !0
                    }
                }
            }(),
            k = w;
        t.default = k
    },
    "9uOJ": function(e, t, n) {
        "use strict";
        var i = o(n("i5VY")),
            a = n("OcsD"),
            r = o(n("UlUB"));

        function o(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        store.market = store.market || {};
        var s = {
            init: function(e) {
                store.market = extend(store.market || {}, e);
                var t = (0, r.default)(function() {
                    if (!store.market.isLoadMore) return !1;
                    var e = window.innerHeight,
                        t = window.pageYOffset,
                        n = document.body.clientHeight;
                    !store.market.isLoading && t > n - 2 * e && ajax.post("market.php", {
                        act: "orders_load_more",
                        offset: store.market.offset
                    }, {
                        onDone: function(e) {
                            store.market.offset += 10;
                            var t = document.createDocumentFragment();
                            e[0].forEach(function(e) {
                                t.appendChild((0, a.ceFromString)(Wd.html((0, i.default)(e))))
                            });
                            var n = document.querySelector(".OrdersList__onload");
                            document.getElementById("market_orders_list_wrapper").insertBefore(t, n), e[1] || (n.innerHTML = "", store.market.isLoadMore = e[1])
                        }
                    })
                }, 500);
                document.addEventListener("scroll", t), cur.destroy.push(function() {
                    document.removeEventListener("scroll", t)
                })
            }
        };
        window.OrdersList = s
    },
    "9y81": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), Object.defineProperty(t, "IconWd", {
            enumerable: !0,
            get: function() {
                return i.IconWd
            }
        }), t.default = void 0;
        var i = function(e) {
            if (e && e.__esModule) return e;
            var t = a();
            if (t && t.has(e)) return t.get(e);
            var n = {};
            if (null != e) {
                var i = Object.defineProperty && Object.getOwnPropertyDescriptor;
                for (var r in e)
                    if (Object.prototype.hasOwnProperty.call(e, r)) {
                        var o = i ? Object.getOwnPropertyDescriptor(e, r) : null;
                        o && (o.get || o.set) ? Object.defineProperty(n, r, o) : n[r] = e[r]
                    }
            }
            n.default = e, t && t.set(e, n);
            return n
        }(n("EMnU"));

        function a() {
            if ("function" != typeof WeakMap) return null;
            var e = new WeakMap;
            return a = function() {
                return e
            }, e
        }
        n("vfU8");
        var r = i.default;
        t.default = r, window.Icon = i.default
    },
    "A+9M": function(e, t, n) {
        "use strict";
        var i = n("J8bf"),
            a = window,
            r = a.hide,
            o = a.lockButton,
            s = a.gpeByClass,
            l = window.ajax;
        window.FeedNotifications = {
            webActionsAcceptHandlers: {
                reveal_bdya: function(e, t, n, i, a) {
                    var r = s("_block", e);
                    return l.post("profileEdit.php", {
                        act: "reveal_birthday",
                        from: "feed_assistance",
                        hash: a
                    }, {
                        onDone: function(e) {
                            var t = window.Snackbar;
                            t && t.init && t.init({
                                text: e.msg
                            }), remove(r)
                        }
                    }), !0
                }
            },
            webActionsDeclineHandlers: {},
            withoutNavActions: ["enable_browser_notifications", "reveal_bdya"],
            hide: function(e, t, n, a, c, u, d, f) {
                var h = {
                        _ajax: 1,
                        act: "hide_internal_notification",
                        reason: a,
                        id: t,
                        hash: n
                    },
                    p = {},
                    A = s("_block", e),
                    m = !0;
                if ("decline" == a) {
                    var _ = this.webActionsDeclineHandlers[u];
                    m = this.runActionHandler(_, e, h, p, d, n), r(A)
                } else {
                    var v = this.webActionsAcceptHandlers[u];
                    m = this.runActionHandler(v, e, h, p, d, n), o(e), "add_custom_newsfeed" == u && ((0, i.setCookie)("remixcustom_feed_added", d), h.action = u, h.action_section = d.section, h.action_hash = d.hash)
                }
                return p.onDone = function() {
                    "compact" === f && "accept" === a || cur.destroy.push(function() {
                        return remove(A)
                    }), ~this.withoutNavActions.indexOf(u) || nav.go(e, c)
                }.bind(this), p.onFail = function() {
                    unlockButton(e)
                }, Promise.resolve(m).then(function(e) {
                    (e || isUndefined(e)) && l.post("/index.php", h, p)
                }), !1
            },
            runActionHandler: function(e, t, n, i, a, r) {
                return !isFunction(e) || e(t, n, i, a, r)
            },
            addWebActionAcceptHandler: function(e, t) {
                this.webActionsAcceptHandlers[e] = t
            },
            addWebActionDeclineHandler: function(e, t) {
                this.webActionsDeclineHandlers[e] = t
            }
        }
    },
    ACAL: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.open = function(e, t, n) {
            var i = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : {};
            o = a.default.open(e, t, {
                hash: n
            }), f = i, h = (0, r.$)(".Popup__wrap", o), i.swipeDown && window.innerWidth < s && (setStyle.transform(h, 1, [0, 0]), scrollTop(0), addEvent(h, "touchstart", A, {
                passive: !0
            }), addEvent(h, "touchmove", _, {
                capture: !0
            }), addEvent(h, "touchcancel touchend", v, {
                passive: !0
            }))
        }, t.close = p;
        var i, a = (i = n("r/ag")) && i.__esModule ? i : {
                default: i
            },
            r = n("UxAg");
        var o, s = 882,
            l = !1,
            c = null,
            u = 0,
            d = 0,
            f = {},
            h = (0, r.$)(".Popup__wrap", o);

        function p(e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},
                n = e.closest(".ModalMenu");
            innerWidth < s ? (a.default.close(n, {
                smooth: !0
            }), t.onClose && t.onClose()) : setTimeout(function() {
                a.default.close(n), t.onClose && t.onClose()
            }), removeEvent(h, "touchstart", A, {
                passive: !0
            }), removeEvent(h, "touchmove", _, {
                capture: !0
            }), removeEvent(h, "touchcancel touchend", v, {
                passive: !0
            }), c = null, u = 0, m = !1, d = 0, o = null, h = null, f = {}
        }

        function A(e) {
            if (e.touches && e.touches.length > 1) l = !1;
            else {
                var t = e.target.closest(".ScrollView") || (0, r.$)(".ScrollView", e.target);
                (0, r.$)(".ModalMenu").classList.contains("ModalMenu--blocked") || (c = e.touches[0], u = e.touches[0].clientY, l = !(t && t.scrollTop > 1))
            }
        }
        var m = !1;

        function _(e) {
            if (e.touches && e.touches.length > 1) l = !1;
            else if (c && l) {
                var t = e.touches[0],
                    n = -Math.min(0, u - t.clientY);
                0 !== n && (cancelEvent(e), d = n, m || (o.classList.add("ModalMenu--dragging"), m = !0), setStyle.transform(h, 1, [0, n]))
            }
        }

        function v() {
            l && (l = !1, o.classList.remove("ModalMenu--dragging"), d > h.clientHeight / 3 ? p(o, f) : (o.classList.add("ModalMenu--restore"), setStyle.transform(h, 1, [0, 0]), setTimeout(function() {
                o && o.classList.remove("ModalMenu--restore")
            }, 200)))
        }
        addEvent(window, "keydown", function(e) {
            var t = (0, r.$)(".ModalMenu");
            if (t) switch (e.keyCode) {
                case 27:
                    p(t, f)
            }
        })
    },
    AWn4: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.uCurConvoTyping_getParams = s, t.default = void 0;
        var i, a = (i = n("rKUZ")) && i.__esModule ? i : {
                default: i
            },
            r = n("7jQU");
        var o = function() {
            return (0, a.default)(s())
        };

        function s() {
            var e, t, n = store.mail.cur.peerId,
                i = (0, r.uTyping_getPeerTyping)(n);
            return i && ("mixed" === i.type ? (e = "dots", t = "mixed") : "audio" === i.type ? (e = "audio", t = "audio") : "text" === i.type && (e = "dots", t = "")), {
                id: "curConvo",
                typing: (0, r.uTyping_getNames)(i),
                typingCount: i ? i.count : 0,
                dimmed: !0,
                animation: e,
                text: t
            }
        }
        t.default = o
    },
    AXyT: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i = function(e) {
            if (e && e.__esModule) return e;
            var t = a();
            if (t && t.has(e)) return t.get(e);
            var n = {};
            if (null != e) {
                var i = Object.defineProperty && Object.getOwnPropertyDescriptor;
                for (var r in e)
                    if (Object.prototype.hasOwnProperty.call(e, r)) {
                        var o = i ? Object.getOwnPropertyDescriptor(e, r) : null;
                        o && (o.get || o.set) ? Object.defineProperty(n, r, o) : n[r] = e[r]
                    }
            }
            n.default = e, t && t.set(e, n);
            return n
        }(n("WTJf"));

        function a() {
            if ("function" != typeof WeakMap) return null;
            var e = new WeakMap;
            return a = function() {
                return e
            }, e
        }
        n("I/8u");
        var r = i.default;
        t.default = r, Object.assign(window, {
            Oval: i.default,
            Oval_isHidden: i.OvalIsHidden
        })
    },
    AeId: function(e, t, n) {
        "use strict";
        var i = window,
            a = i.ge,
            r = i.attr,
            o = (i.clog, i.lsCheck),
            s = i.isEmpty,
            l = i.vkNow,
            c = i.lsGet,
            u = i.intval,
            d = i.lsSet,
            f = i.extend,
            h = i.hasClass,
            p = i.gpeByClass,
            A = i.each,
            m = i.geByClass,
            _ = i.addClass,
            v = i.checkPostsSeen,
            g = i.hashCode,
            y = window.ajax,
            b = window.nav,
            w = {
                _seen: {},
                _saved: {},
                _saveTimer: null,
                _sendTimer: null,
                _cleanTimer: null,
                LS_ADS_EVENTS: "ads.events",
                postsGetRaws: function(e) {
                    var t, n = (e = a(e)).id || "",
                        i = r(e, "data-copy") || "",
                        o = {};
                    if ("block_" === n.substr(0, 6)) {
                        o[n] = 1, o.block = n.substr(6);
                        var s = r(e, "data-contain");
                        s && (s = s.split(",")).forEach(function(e) {
                            e = e.split(":"), o[e[0]] = u(e[1]) || 1
                        })
                    } else(t = n.match(/^wall(adsite.*)$/)) ? o[t[1]] = 1 : (t = n.match(/^wall(-?\d+_\d+)$/)) && (o[t[1]] = 1, (t = i.match(/^(-?\d+_\d+)$/)) && (o[t[1]] = -1));
                    var l = r(e, "data-ad-view");
                    return l && (o["ad_" + l] = 1), o.height = e.offsetHeight, o.index = indexOf(domPN(e).children, e) - 1, o
                },
                seen: function(e) {
                    var t, n, i, a, r, o, s;
                    window.vk.id && e.length && (window._postsExtras || (window._postsExtras = {}), e.forEach(function(e, l) {
                        r = e.index, s = e.block, o = e.height, Object.keys(e).forEach(function(l) {
                            "index" !== l && "block" !== l && "height" !== l && "viewportHeight" !== l && (n = e[l], i = w._seen[l], -1 === (a = w._saved[l]) || -1 === i || 1 === n && (a || i) || (t = w._seen[l] = n, _postsExtras[l] = {
                                index: r,
                                block: s,
                                height: o,
                                viewportHeight: getCh()
                            }))
                        })
                    }), t && (clearTimeout(w._saveTimer), w._saveTimer = setTimeout(w.save, 2500), clearTimeout(w._sendTimer), w._sendTimer = setTimeout(w.send, 5e3)))
                },
                save: function() {
                    if (!o() || s(w._seen)) return w._seen;
                    var e, t, n, i, a, r = window.vk,
                        f = Math.floor((r.ts + Math.floor((l() - r.started) / 1e3)) / 3600),
                        h = c("posts_sent") || {},
                        p = c("posts_seen") || {},
                        A = c("posts_extras") || {};
                    for (t in window._postsExtras || (window._postsExtras = {}), w._seen) a = w._seen[t], _postsExtras[t] && (A[t] = {
                        index: _postsExtras[t].index,
                        block: _postsExtras[t].block,
                        height: _postsExtras[t].height,
                        viewportHeight: _postsExtras[t].viewportHeight
                    }, delete window._postsExtras[t]), "ad" !== (n = t.split("_"))[0] && "adsite" !== n[0] && "block" !== n[0] && (n[0] = u(n[0]), n[1] = u(n[1])), i = (h[n[0]] || {})[n[1]], n[0] != r.id && (!i || -1 == a && i > 0) && (p[n[0]] || (p[n[0]] = {}), (!p[n[0]][n[1]] || -1 == a && p[n[0]][n[1]] > 0) && (e = p[n[0]][n[1]] = f * a)), w._saved[t] = a;
                    w._seen = {}, e && (d("posts_seen", p), d("posts_extras", A))
                },
                getSeenData: function() {
                    var e, t, n, i = {},
                        s = {},
                        l = [];
                    if (o()) i = c("posts_seen"), s = c("posts_extras") || {};
                    else
                        for (e in n = w.save()) {
                            var d = n[e],
                                f = e.split("_");
                            f[0] = u(f[0]), f[0] && (f[1] = u(f[1])), i[f[0]] || (i[f[0]] = {}), (!i[f[0]][f[1]] || -1 == d && i[f[0]][f[1]] > 0) && (i[f[0]][f[1]] = d)
                        }
                    for (e in i) {
                        for (t in n = [], i[e]) {
                            var h = i[e][t] > 0 ? t : -t,
                                p = s[e + "_" + t],
                                A = "";
                            p ? (A += ":" + (p.index || ""), A += ":" + (p.block || ""), A += ":" + (p.height || ""), A = (A += ":" + (p.viewportHeight || "")).replace(/:+$/, "")) : A = "", "block" !== e || cur._pstatbref || (cur._pstatbref = r(a(e + "_" + t), "data-ref")), n.push(h + A)
                        }
                        n.length && l.push(e + "_" + n.join(","))
                    }
                    return l.length ? {
                        seen: i,
                        data: l.join(";")
                    } : ""
                },
                onSend: function(e) {
                    if (!o()) return f(w._saved, w._seen);
                    var t, n, i = c("posts_seen") || {},
                        a = c("posts_sent") || {};
                    for (t in e) {
                        for (n in e[t]) a[t] || (a[t] = {}), -1 != a[t][n] && (a[t][n] = e[t][n]), (i[t] || {})[n] && delete i[t][n];
                        i[t] && s(i[t]) && delete i[t]
                    }
                    d("posts_seen", i), d("posts_sent", a), clearTimeout(w._cleanTimer), w._cleanTimer = setTimeout(w.clean, 1e4)
                },
                send: function() {
                    var e = window.cur,
                        t = window.vk,
                        n = w.getSeenData();
                    if (n.data) {
                        if (!t.id) return w.clear();
                        var i = "";
                        !b || "/feed?section=podcasts" !== b.cur && "/feed/podcasts" !== b.cur ? e && e.module ? i = e.module : b && "/feed" == b.cur && (i = "feed") : i = "feed_podcasts";
                        var a = {
                            _ajax: 1,
                            act: "ping",
                            _pstat: n.data,
                            _pstatref: i
                        };
                        e._pstatbref && (a._pstatbref = e._pstatbref), y.post("/", a, {
                            onDone: function() {
                                w.onSend(n.seen)
                            }
                        }), delete e._pstatbref
                    }
                },
                clean: function() {
                    var e, t, n, i = window.vk,
                        a = Math.floor((i.ts + Math.floor((l() - i.started) / 1e3)) / 3600),
                        r = c("posts_sent") || {};
                    for (e in r) {
                        for (t in r[e]) a - ((n = r[e][t]) > 0 ? n : -n) > 24 && delete r[e][t];
                        s(r[e]) && delete r[e]
                    }
                    d("posts_sent", r), w.cleanAdsEvents()
                },
                clear: function() {
                    d("posts_seen", {}), d("posts_sent", w._saved = w._seen = {}), d(w.LS_ADS_EVENTS, w._lsAdsEvents = {})
                },
                getStatsObj: function(e) {
                    return e = a(e), h("_stats_cont", e) ? e : p("_stats_cont", e)
                },
                getAdsEvents: function() {
                    var e = w._lsAdsEvents;
                    return e || (e = w._lsAdsEvents = c(w.LS_ADS_EVENTS) || {}), e
                },
                cleanAdsEvents: function() {
                    var e = w.getAdsEvents(),
                        t = (new Date).getTime() / 1e3 | 0,
                        n = !1;
                    A(e, function(i, a) {
                        t - a >= 3600 && (delete e[i], n = !0)
                    }), n && d(w.LS_ADS_EVENTS, e)
                },
                checkPixelEvent: function(e, t) {
                    var n = e.getAttribute("data-ad-block-uid"),
                        i = -1 !== indexOf(["load", "impression"], t);
                    if (!n || !i) return !0;
                    try {
                        var a = g("" + t + n),
                            r = w.getAdsEvents();
                        if (r[a]) return !1;
                        var o = (new Date).getTime() / 1e3 | 0;
                        r[a] = o, d(w.LS_ADS_EVENTS, r)
                    } catch (e) {
                        try {
                            console.log(e.message)
                        } catch (e) {}
                    }
                    return !0
                },
                getPixelElements: function(e, t) {
                    var n = [];
                    return A(m(t, e), function() {
                        r(this, "data-src") && n.push(this)
                    }), n
                },
                sendPixels: function(e) {
                    A(e, function() {
                        r(this, "src", r(this, "data-src")), r(this, "data-src", !1), _("_cntr", this)
                    })
                },
                viewed: function(e) {
                    if (e = w.getStatsObj(e)) {
                        var t = w.getPixelElements(e, "_cntr_view");
                        t.length && w.checkPixelEvent(e, "impression") && w.sendPixels(t)
                    }
                },
                clicked: function(e) {
                    if (e = w.getStatsObj(e)) {
                        r(e, "data-clicked", "1");
                        var t = w.getPixelElements(e, "_cntr_click");
                        t.length && w.sendPixels(t), v()
                    }
                }
            };
        w._sendTimer || (w._sendTimer = setTimeout(w.send, 1e4)), window.pStats = w
    },
    AgBx: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("3JOE")) && i.__esModule ? i : {
            default: i
        };
        n("QMH7");
        var r = a.default;
        t.default = r, window.ScrollView = a.default
    },
    AkSq: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("P3wa")) && i.__esModule ? i : {
                default: i
            },
            r = n("XUaJ");
        var o = a.default;
        t.default = o, window.WarningModal = a.default, extend(a.default, {
            close: r.close,
            leave: r.leave
        })
    },
    Au5b: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("TYsd")) && i.__esModule ? i : {
            default: i
        };
        var r = {
                setChecked: function(e) {
                    var t = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1];
                    c(e).checked = t
                },
                isChecked: function(e) {
                    return c(e).checked
                }
            },
            o = r;
        t.default = o, r._onChange = l;
        var s = {
            control: ".Control",
            native: ".Control__native"
        };

        function l(e, t) {
            a.default.handle(t, {
                $control: e.closest(s.control),
                name: e.name,
                checked: e.checked,
                value: e.value
            })
        }

        function c(e) {
            return e.$(s.native)
        }
    },
    "B+E1": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = function(e, t) {
            return langNumeric((e / 1e3).toFixed(e % 1e3 == 0 ? 0 : 2), t, !0)
        }
    },
    "B+U2": function(e, t, n) {
        "use strict";
        var i;
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var a = ((i = n("sn7E")) && i.__esModule ? i : {
            default: i
        }).default;
        t.default = a
    },
    B34N: function(e, t, n) {
        "use strict";
        var i = l(n("z9sQ")),
            a = n("OcsD"),
            r = l(n("wMVj")),
            o = l(n("29dZ")),
            s = l(n("jk6M"));

        function l(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        var c = {
            onTemplateInput: function(e, t, n, a) {
                var r = $("." + n),
                    o = a - t.value.length;
                r.textContent = o, r.className = i.default.class(n, {
                    error: o <= 0
                })
            },
            onButtonMouseDown: function(e, t) {
                s.default.safari_mobile || e.preventDefault()
            },
            onButtonClick: function(e, t, n) {
                var i = $(".MailTemplatePage__TextTextarea"),
                    a = i.value,
                    r = i.selectionStart,
                    o = i.selectionEnd;
                i.value = a.slice(0, r) + n + a.slice(o);
                var s = r + n.length;
                i.selectionStart = i.selectionEnd = s
            },
            onSave: function(e, t, n, i, s) {
                var l = $(".MailTemplatePage__NameInput .TextInput__native"),
                    c = $(".MailTemplatePage__TextTextarea");
                o.default.setLoading(t, !0), (0, a.ajaxRequest)("/mail", {
                    act: "save_template",
                    name: l.value,
                    text: c.value,
                    hash: i,
                    id: n
                }, function(e) {
                    if (e) {
                        if (e.error) {
                            var i = $(".MailTemplatePage__ErrorRow"),
                                a = $(".MailTemplatePage__ErrorText");
                            return o.default.setLoading(t, !1), i.hidden = !1, void(a.textContent = e.message)
                        }
                        if (store.mail.cur && store.mail.cur.templates) {
                            var l = store.mail.cur.templates,
                                c = n ? l.findIndex(function(e) {
                                    return e.id === n
                                }) : -1; - 1 !== c ? l.splice(c, 1, e.result) : l.push(e.result)
                        }
                        r.default.go(s)
                    }
                }, function() {
                    o.default.setLoading(t, !1)
                })
            },
            onSubmit: function(e) {
                e.preventDefault()
            }
        };
        window.MailTemplatePage = c
    },
    B5sG: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("bYEY")) && i.__esModule ? i : {
                default: i
            },
            r = n("DkIl");
        var o = function() {
            var e = store.mail.cur.peerId,
                t = store.mail.cur.page;
            if (e) return function(e) {
                var t = store.mail,
                    n = t.peers[e],
                    i = e > 2e9,
                    a = {
                        title: n.title,
                        photos: n.avatarImages,
                        actions: s(e),
                        editing: t.cur.editing
                    };
                if (i) {
                    var o = i ? e - 2e9 : null;
                    if (a.url = "/mail?act=info&chat=".concat(o), a.membersCount = n.countMembers, a.hasPinnedMsg = n.hasPinnedMsg, a.isChannel = n.isChannel, a.isChannel) {
                        var l = -n.ownerId;
                        a.url = "/club".concat(l)
                    }
                } else a.url = n.profileUrl, a.isOnline = n.isOnline, a.onlinePlatform = n.onlinePlatform, a.offlineText = n.offlineText;
                return (0, r.MailHat_convo)(a)
            }(e);
            if (t) return function(e) {
                return (0, r.MailHat_page)(e)
            }(t);
            return function() {
                var e = store.mail.cur,
                    t = Math.abs(e.groupId),
                    n = t ? "&community=".concat(t) : "",
                    i = t ? "?community=".concat(t) : "";
                return (0, r.MailHat_main)({
                    folder: e.folder,
                    urls: {
                        all: "/mail".concat(i),
                        unrespond: "/mail?act=unrespond".concat(n),
                        unread: "/mail?act=unread".concat(n),
                        important: "/mail?act=important".concat(n),
                        createChatUrl: "/mail?act=new_chat"
                    },
                    unreadCount: e.countUnread,
                    importantCount: e.countImportant,
                    withUnrespond: !!t,
                    forwarding: !!e.forwardFromId,
                    notifier: (0, a.default)()
                })
            }()
        };

        function s(e) {
            var t = store.mail,
                n = t.peers[e].actionUrls,
                i = t.peers[e].isChannel;
            return e > -2e9 && e < 0 ? [l("showMedias", n.showMedia), l("deleteHistory", n.flushHistory), l("blockCommunity", n.blockCommunity), l("unblockCommunity", n.unblockCommunity), l("blockNotify", n.blockNotify)] : e > 2e9 ? [l("chatInfo", n.chatInfo, "", i), l("chatAdd", n.addToChat), l("inviteLink", n.inviteLink, "", i), l("showMedias", n.showMedia), n.unpinMsg ? l("chatUnpinMsg", n.unpinMsg) : "", n.unpinMsg ? l("chatShowPinnedMsg", null, 'onmousedown="uMessenger.onShowPinnedMsgClick()"') : "", n.unpinMsg ? l("chatHidePinnedMsg", null, 'onmousedown="uMessenger.onHidePinnedMsgClick()"') : "", l("chatDeleteHistory", n.flushHistory), l("chatReturn", n.returnToChat, "", i), l("chatLeave", n.leaveChat, "", i)] : t.cur.groupId ? [l("showMedias", n.showMedia), l("markAsAnswered", n.communityMarkAsAnswered), n.isDialogImportant ? l("removeImportantMark", n.communityToggleImportant) : l("markAsImportant", n.communityToggleImportant), n.isBlacklisted ? l("unbanUser", n.userBan) : l("banUser", n.userBan), l("deleteHistory", n.flushHistory)] : [l("showMedias", n.showMedia), l("deleteHistory", n.flushHistory)]
        }

        function l(e, t) {
            var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : "",
                i = arguments.length > 3 && void 0 !== arguments[3] && arguments[3],
                a = window.lang;
            if (!t && !n) return null;
            var r = {
                    showMedias: [a.mobile_mail_show_medias, "attach"],
                    deleteHistory: [a.mobile_mail_delete_history, "delete"],
                    blockCommunity: [a.mobile_mail_block_community, "block"],
                    blockNotify: [a.mobile_mail_block_community_notify, "block"],
                    unblockCommunity: [a.mobile_mail_unblock_community, "allow"],
                    chatAdd: [a.mobile_mail_add_to_chat, "plus"],
                    chatUnpinMsg: [a.mobile_mail_unpin_msg, "unpin", "unpin"],
                    chatShowPinnedMsg: [a.mobile_mail_pin_show, "show", "showPinned"],
                    chatHidePinnedMsg: [a.mobile_mail_pin_hide, "hide", "hidePinned"],
                    chatInfo: [a.mobile_mail_chat_info, "info"],
                    chatDeleteHistory: [a.mobile_mail_delete_chat_history, "delete"],
                    chatReturn: [i ? a.mobile_mail_return_to_channel : a.mobile_mail_chat_return, "revert", "returnToChat"],
                    chatLeave: [i ? a.mobile_mail_channel_leave : a.mobile_mail_chat_leave, "close16", "leaveChat"],
                    markAsAnswered: [a.mobile_mail_mark_as_answered, "answered"],
                    removeImportantMark: [a.mobile_mail_remove_important_mark, "important"],
                    markAsImportant: [a.mobile_mail_mark_as_important, "important"],
                    unbanUser: [a.mobile_settings_blacklist_unban_user, "allow"],
                    banUser: [a.mobile_settings_blacklist_ban_user, "block"],
                    inviteLink: [i ? a.mobile_mail_channel_invite_link : a.mobile_mail_invite_link, "invite"]
                },
                o = {
                    text: r[e][0],
                    icon: r[e][1],
                    attrs: n,
                    url: t
                };
            return r[e][2] && (o.name = r[e][2]), o
        }
        t.default = o
    },
    B9v3: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), Object.defineProperty(t, "ActionsPanel", {
            enumerable: !0,
            get: function() {
                return i.ActionsPanel
            }
        }), Object.defineProperty(t, "init", {
            enumerable: !0,
            get: function() {
                return a.default
            }
        }), Object.defineProperty(t, "setBookmarkState", {
            enumerable: !0,
            get: function() {
                return a.setBookmarkState
            }
        }), t.default = void 0;
        var i = o(n("JYMJ")),
            a = o(n("qsX6"));

        function r() {
            if ("function" != typeof WeakMap) return null;
            var e = new WeakMap;
            return r = function() {
                return e
            }, e
        }

        function o(e) {
            if (e && e.__esModule) return e;
            var t = r();
            if (t && t.has(e)) return t.get(e);
            var n = {};
            if (null != e) {
                var i = Object.defineProperty && Object.getOwnPropertyDescriptor;
                for (var a in e)
                    if (Object.prototype.hasOwnProperty.call(e, a)) {
                        var o = i ? Object.getOwnPropertyDescriptor(e, a) : null;
                        o && (o.get || o.set) ? Object.defineProperty(n, a, o) : n[a] = e[a]
                    }
            }
            return n.default = e, t && t.set(e, n), n
        }
        window.Share = a.default, extend(window.Share, {
            setBookmarkState: a.setBookmarkState
        });
        var s = i.default;
        t.default = s
    },
    BFfX: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.AudioPopup = function(e) {
            var t = null;
            if (e.action_button) {
                var n = e.action_button,
                    i = n.onclick,
                    r = n.href,
                    o = n.text;
                t = {
                    class: "AudioPopup__actionButtonWrapper",
                    inner: {
                        class: ["AudioPopup__actionButton", "button"],
                        onclick: i,
                        href: r,
                        inner: o
                    }
                }
            }
            var s = ["AudioPopup"];
            e.popupClass && s.push(e.popupClass);
            var l = {
                class: "AudioPopup__content",
                inner: [{
                    class: "AudioPopup__title",
                    inner: e.title
                }, {
                    class: "AudioPopup__description",
                    inner: e.description
                }, t, e.additional_link]
            };
            return new a.default({
                content: l,
                class: s.join(" ")
            })
        };
        var i, a = (i = n("r/ag")) && i.__esModule ? i : {
            default: i
        }
    },
    "BJj/": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.debounce = function(e, t, n) {
            var i;
            return function() {
                var a = this,
                    r = arguments,
                    o = function() {
                        i = null, n || e.apply(a, r)
                    },
                    s = n && !i;
                clearTimeout(i), i = setTimeout(o, t), s && e.apply(this, r)
            }
        }
    },
    BKxg: function(e, t, n) {
        "use strict";
        s(n("+cqQ"));
        var i = s(n("s0aB")),
            a = function(e) {
                if (e && e.__esModule) return e;
                var t = o();
                if (t && t.has(e)) return t.get(e);
                var n = {};
                if (null != e) {
                    var i = Object.defineProperty && Object.getOwnPropertyDescriptor;
                    for (var a in e)
                        if (Object.prototype.hasOwnProperty.call(e, a)) {
                            var r = i ? Object.getOwnPropertyDescriptor(e, a) : null;
                            r && (r.get || r.set) ? Object.defineProperty(n, a, r) : n[a] = e[a]
                        }
                }
                n.default = e, t && t.set(e, n);
                return n
            }(n("YDEi")),
            r = n("7jQU");

        function o() {
            if ("function" != typeof WeakMap) return null;
            var e = new WeakMap;
            return o = function() {
                return e
            }, e
        }

        function s(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        Object.assign(a.default, {
            onTap: i.default.onTap,
            redrawOnline: function(e) {
                var t = store.mail.peers[e];
                if (t) {
                    var n = (0, a.uConvo_getOnline)(t);
                    i.default.setOnline(e, n)
                }
            },
            redrawUnread: function(e) {
                if (!store.mail.peers[e]) return;
                var t = (0, a.uConvo_getUnreadCount)(e);
                i.default.setUnreadCount(e, t)
            },
            redrawLastMsg: function(e) {
                var t = (0, a.uConvo_getLastMsg)(e);
                t && i.default.setLastMsg(e, (0, a.uConvo_msgPreview)(t), {
                    dateShort: t.dateShort,
                    pending: t.pending,
                    failed: t.failed
                })
            },
            redrawTyping: function(e) {
                if (!store.mail.cur) return;
                var t = (0, r.uTyping_getPeerTyping)(e),
                    n = t && 1 === t.count && t.users[0] === e,
                    o = (0, a.uConvo_getTyping)(e, n);
                i.default.setTyping(e, o)
            },
            redrawImportant: function(e, t) {
                i.default.setImportant(e, t)
            }
        })
    },
    BLcx: function(e, t, n) {
        "use strict";
        var i = window,
            a = i.langNumeric,
            r = i.show,
            o = i.hide,
            s = function() {
                var e = document.getElementsByClassName("gift_create_post_counter");
                return {
                    counter: function(t) {
                        var n = e[0];
                        if (n) {
                            var i = t.value.length,
                                s = t.maxLength;
                            if (i > s) t.value = t.value.substr(0, s);
                            else if (i > s / 2) {
                                var l = Math.max(s - i, 0);
                                n.innerText = a(l, lang.text_N_symbols_remain), r(n)
                            } else o(n)
                        }
                    }
                }
            }();
        window.GiftsSendFormCounter = s
    },
    BM0n: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.MainMenu = l, t.default = void 0;
        var i = s(n("vOib")),
            a = s(n("UWnA")),
            r = s(n("9y81")),
            o = s(n("AXyT"));

        function s(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }

        function l() {
            var e = (arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}).items.map(function(e) {
                if (!e) return null;
                var t = {
                    onclick: "nav.onMenuItemClick('".concat(e.url, "'); ").concat(e.onclick),
                    "data-skiponclick": 1
                };
                return (0, a.default)({
                    mix: "MainMenu__menuItem al_menu",
                    url: e.url,
                    attrs: t,
                    style: {
                        no_go_icon: !0
                    },
                    content: [{
                        outerHTML: (0, r.default)({
                            mix: "MainMenu__menuItemIcon",
                            icon: e.icon
                        })
                    }, {
                        class: "MainMenu__menuItemTitle",
                        inner: e.title
                    }, e.count ? {
                        outerHTML: (0, o.default)({
                            mix: "MainMenu__menuItemCount",
                            type: "minor",
                            value: e.count
                        })
                    } : null]
                })
            });
            return (0, i.default)({
                mix: "MainMenu__menu",
                style: {
                    extra_top_padding: !0,
                    extra_bottom_padding: !0
                },
                content: e
            })
        }
        var c = l;
        t.default = c
    },
    BQMu: function(e, t, n) {
        "use strict";
        var i = window,
            a = i.cancelEvent,
            r = i.gpeByClass,
            o = i.geByClass1,
            s = i.getY,
            l = i.getX,
            c = i.getW,
            u = i.addClass,
            d = i.hasClass,
            f = i.append,
            h = i.tooltip,
            p = i.addEvent,
            A = i.removeClass,
            m = i.removeEvent,
            _ = i.before,
            v = i.remove,
            g = i.clone,
            y = i.setStyle,
            b = i.each,
            w = i.getStyle,
            k = function() {
                var e, t, n = "ai_menu_opened",
                    i = !1;

                function k(e) {
                    for (var t = !1; e;) {
                        var n = w(e, "overflow-y");
                        if (("scroll" === n || "auto" === n) && e.offsetHeight < e.scrollHeight) {
                            e === document.documentElement || e === document.body ? e = null : t = !0;
                            break
                        }
                        e = e.parentElement
                    }
                    return {
                        cursor: e,
                        isOverflowYContainer: t
                    }
                }

                function E(e) {
                    for (var t = !1; e;) {
                        var n = w(e, "overflow-x"),
                            i = d(e, "Slider__scroll");
                        if ("scroll" === n || "auto" === n || i) {
                            t = !0;
                            break
                        }
                        e = e.parentElement
                    }
                    return {
                        cursor: e,
                        isOverflowXContainer: t
                    }
                }

                function S() {
                    if (e && t) {
                        var n = o("i_pointer", e);
                        document.body.contains(n) && (k(n).isOverflowYContainer ? y(t, "top", function(e) {
                            return e.getBoundingClientRect().top
                        }(n)) : y(t, "top", s(n)), E(n).isOverflowXContainer ? y(t, "left", function(e) {
                            return e.getBoundingClientRect().left
                        }(n) - c(t)) : y(t, "left", l(n) - c(t)))
                    }
                }

                function C(e) {
                    e && "A" === e.target.tagName && requestAnimationFrame(function() {
                        S()
                    })
                }

                function M(a) {
                    ! function(n) {
                        e = r("ai_menu_wrap", n), t = o("ai_menu", e)
                    }(a), u(n, e), f(t, document.body), i = P, h.addHandler(i), h.show(e, t), p(window, "resize", S), p(t, "click", C);
                    var s = o("i_pointer", e),
                        l = k(s);
                    l.isOverflowYContainer && p(l.cursor, "scroll", S);
                    var c = E(s);
                    c.isOverflowXContainer && p(c.cursor, "scroll", S), S()
                }

                function P() {
                    A(n, e), f(t, e), h.removeHandler(i), h.hide(), m(window, "resize", S), m(t, "click", S);
                    var a = o("i_pointer", e),
                        r = k(a);
                    r.isOverflowYContainer && m(r.cursor, "scroll", S);
                    var s = E(a);
                    s.isOverflowXContainer && m(s.cursor, "scroll", S)
                }
                return {
                    closeMenu: P,
                    toggleMenu: function(t, i) {
                        a(t), d(n, e) ? P() : M(i)
                    },
                    update: function() {
                        ! function() {
                            if (t) {
                                var e = geByClass("wia_item", t);
                                e && b(e, function(e, t) {
                                    var n = g(t);
                                    _(n, t), v(t), u("unhover", n), setTimeout(function() {
                                        A("unhover", n)
                                    }, 100)
                                })
                            }
                        }(), S()
                    }
                }
            }();
        window.ActionMenu = k
    },
    BX0V: function(e, t, n) {
        "use strict";
        var i, a = (i = n("9CLW")) && i.__esModule ? i : {
                default: i
            },
            r = n("OcsD");
        var o, s, l, c = window,
            u = c.nav,
            d = c.ajax,
            f = c.geByClass1,
            h = c.addClass,
            p = c.val,
            A = "pageMoneyTransfer",
            m = "pageMoneyTransfer_error",
            _ = "pageMoneyTransfer__errorText",
            v = "pageMoneyTransfer__iframe",
            g = 2e3;
        a.default.onIframeReady(function(e) {
            b(), s = {
                checkUrl: e.check_transfer_url,
                onSuccessUrl: e.on_success_url
            }, k(), window.cur.destroy.push(E)
        }), a.default.onPostMessage(function(e, t) {
            if ("paySuccess" === e) h("pageMoneyTransfer_success", f(A));
            else if ("payError" === e) E(), h(m, f(A)), p(f(_), t.descr);
            else if ("session_fail" === e) {
                if (y) return void w();
                E(), h(m, f(A)), h("pageMoneyTransfer_errorCookie", f(A))
            } else if ("putPixel" === e && "page_load" === t.alias) {
                var n = null;
                (0, r.isVkWebView)() && ((0, r.isIosWebView)() ? n = "iphone" : isAndroidWebView() && (n = "android")), n || (n = ""), (0, r.statlogsValueEvent)("money_transfers", 0, "iframe_loaded", n)
            }
        });
        var y = 0;

        function b() {
            var e = f(v);
            if (e) {
                var t = e.contentWindow.document;
                t.open("text/html", "replace"), t.write(attr(e, "data-html")), t.close()
            } else setTimeout(b, 2e3)
        }

        function w() {
            var e = f(v);
            if (e) {
                var t = ce("div", {
                    innerHTML: attr(e, "data-html")
                });
                hide(e), f(A).appendChild(t), ge("payment_form").submit()
            } else setTimeout(w, 2e3)
        }

        function k() {
            var e = s,
                t = e.checkUrl,
                n = e.onSuccessUrl;
            o = setInterval(function() {
                l = d.post(t, {}, {
                    onDone: function(e, t, i) {
                        if (1 === e || 3 === e) {
                            if (E(), i) return void u.go(i, null, {
                                replace: !0
                            });
                            "/" === n[0] ? u.go(n, null, {
                                replace: !0
                            }) : location.href = n
                        } else 2 === e && (E(), h(m, f(A)), p(f(_), t))
                    }
                })
            }, g)
        }

        function E() {
            o && (clearInterval(o), o = null), l && (l.abort(), l = null)
        }
        a.default.onAcceptCookieClick(function() {
            var e = window.open("https://top-fwz1.mail.ru/counter2?id=1;", "", "width=300; height=300");
            setTimeout(function() {
                e.close();
                var t = f(v),
                    n = clone(t);
                removeClass(m, f(A)), replace(n, t);
                var i = n.contentWindow.document;
                i.open("text/html", "replace"), i.write(attr(t, "data-html")), i.close(), k()
            }, 500), y++
        })
    },
    BZzM: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.resizePosters = function(e, t, n) {
            var i = s(t) || document,
                d = "[data-".concat("poster-resized", "='false']");
            (e || n) && (d = "");
            var f = o(".poster__text" + d, i),
                h = [],
                p = cur.posterConfig && cur.posterConfig.constants;
            if (!p) {
                if (!f.length) return;
                p = JSON.parse(a(f[0].parentElement, "poster-constants"))
            }
            for (var A = 0; A < f.length; A++) {
                var m = f[A],
                    _ = r(m);
                h.push(r(_).clientWidth)
            }
            for (var v = 0; v < f.length; v++) {
                var g = f[v],
                    y = r(g),
                    b = h[v],
                    w = p.font_size_ratio_range_1 * b + "px",
                    k = Math.round(p.line_height_ratio_range_1 * b) + "px",
                    E = "0 " + Math.round(b * u) + "px";
                g.textContent.length > p.range_threshold && (w = Math.round(p.font_size_ratio_range_2 * b) + "px", k = Math.round(p.line_height_ratio_range_2 * b) + "px"), l(y, {
                    height: b * c + "px",
                    width: b
                }), l(g, {
                    fontSize: w,
                    lineHeight: k,
                    padding: E
                }), a(g, "poster-resized", !0)
            }
        };
        var i = window,
            a = i.domData,
            r = i.domPN,
            o = i.domQuery,
            s = i.ge,
            l = i.setStyle,
            c = .75,
            u = 1 / 18
    },
    Bqje: function(e, t, n) {
        "use strict";
        var i = n("UxAg");

        function a() {
            var e = (0, i.$)(r.intro),
                t = new Scroller(e, {
                    byPage: !0,
                    ignoreMouseWheel: !0,
                    noAutoScroll: !0
                });
            t.init(), cur.destroy.push(function() {
                return t.destroy()
            })
        }
        window.AuthCheckIntro = {}, AuthCheckIntro._onMount = a;
        var r = {
            intro: ".AuthCheckIntro"
        }
    },
    BxOC: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.post = function(e, t, n) {
            t && (t.im_v = r);
            return new Promise(function(i, r) {
                a.post(e, t, {
                    timeout: n,
                    onDone: function() {
                        i.apply(null, [Array.prototype.slice.call(arguments)])
                    },
                    onFail: function() {
                        return r.apply(null, arguments), !0
                    }
                })
            })
        }, t.plainget = function(e, t) {
            var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};
            return o(e, t, n).request
        }, t.plaingetCancelable = o;
        var i = n("cGUQ"),
            a = window.ajax,
            r = 3;

        function o(e, t) {
            var n, r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};
            return n = window.XDomainRequest ? new XDomainRequest : a._getreq(), {
                request: new Promise(function(a, o) {
                    var s, l = Date.now(),
                        c = r.timeout || 60,
                        u = (0, i.toQueryString)(t);
                    if (window.XDomainRequest) n.open("get", "".concat(e, "?").concat(u)), n.ontimeout = function(e) {
                        o([e, {}])
                    }, n.onerror = function(e) {
                        o([e, {}])
                    }, n.onload = function() {
                        a([n.responseText, {}])
                    }, setTimeout(function() {
                        n.send()
                    }, 0);
                    else {
                        n.onreadystatechange = function() {
                            4 == n.readyState && (clearInterval(s), n.status >= 200 && n.status < 300 ? a([n.responseText, n]) : o([n.responseText, n]))
                        };
                        try {
                            n.open("GET", "".concat(e, "?").concat(u), !0)
                        } catch (e) {
                            return o([e, n])
                        }
                        n.send()
                    }
                    s = setInterval(function() {
                        Date.now() - l > 1e3 * c && (window.browser.safari && n.abort(), o(["", {}]), clearInterval(s))
                    }, 1e3)
                }),
                cancel: function() {
                    n.abort()
                }
            }
        }
    },
    C45x: function(e, t, n) {
        "use strict";
        var i = n("UxAg"),
            a = u(n("bZ/P")),
            r = u(n("+cqQ")),
            o = function(e) {
                if (e && e.__esModule) return e;
                var t = c();
                if (t && t.has(e)) return t.get(e);
                var n = {};
                if (null != e) {
                    var i = Object.defineProperty && Object.getOwnPropertyDescriptor;
                    for (var a in e)
                        if (Object.prototype.hasOwnProperty.call(e, a)) {
                            var r = i ? Object.getOwnPropertyDescriptor(e, a) : null;
                            r && (r.get || r.set) ? Object.defineProperty(n, a, r) : n[a] = e[a]
                        }
                }
                n.default = e, t && t.set(e, n);
                return n
            }(n("ti65")),
            s = u(n("Gzds")),
            l = n("OcsD");

        function c() {
            if ("function" != typeof WeakMap) return null;
            var e = new WeakMap;
            return c = function() {
                return e
            }, e
        }

        function u(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        var d = need("Voting");
        Object.assign(o.default, {
            class: "msg",
            onClick: (0, r.default)(),
            onPendingClick: (0, r.default)(),
            onRestoreClick: (0, r.default)(),
            onReplyClick: (0, r.default)(),
            onForward: (0, r.default)(),
            onLoadAgain: (0, r.default)(),
            getElem: function(e) {
                return (0, i.$)(".msg_id_".concat(e))
            },
            remove: function(e) {
                arguments.length > 1 && void 0 !== arguments[1] && arguments[1] ? (0, i.$$)(".msg_id_".concat(e)).forEach(function(e) {
                    return e.remove()
                }) : v(e, !1)
            },
            spam: function(e) {
                v(e, !0)
            },
            restore: function(e) {
                (0, i.$$)(".msg_id_".concat(e)).forEach(function(e) {
                    e.classList.remove("msg_removed"), e.classList.remove("msg_spam")
                })
            },
            unselectAll: function() {
                (0, i.$$)(".msg_selected").forEach(function(e) {
                    return e.classList.remove("msg_selected")
                })
            },
            getReplyDataFromHTML: function(e) {
                var t = e && o.default.getElem(e),
                    n = "";
                if (t) {
                    var a = (0, i.$)(".thumbs_map .thumb_map_img_as_div", t);
                    return (n = a && a.style.backgroundImage) && (n = n.replace(/^url\((['"])?/, "").replace(/(['"])?\)$/, "")), {
                        msg_id: e,
                        parent_id: null,
                        preview_url: n
                    }
                }
                return null
            },
            toggleImportant: function(e, t) {
                [].concat(e).forEach(function(e) {
                    var n = (0, i.$)(".msg_id_".concat(e));
                    n && n.classList.toggle("msg_important", t)
                })
            },
            markAsRead: function(e) {
                (0, i.$$)(".msg_id_".concat(e)).forEach(function(e) {
                    return e.classList.remove("msg_unread")
                })
            },
            getId: function(e) {
                var t = a.default.parseClass(h.msg, e.className);
                return Number(t.id)
            },
            getTextHtml: function(e) {
                return e.$(p.text).innerHTML
            }
        }), o.default._onClick = g, o.default._onPendingClick = y, o.default._onTouchStart = w, o.default._onRestoreClick = _, o.default._onActionClick = k, o.default._onReplyClick = S, o.default._onStickerClick = C, o.default.onStickerTouchStart = M;
        var f, h = {
                msg: "msg"
            },
            p = {
                text: ".msg__text"
            },
            A = 500,
            m = !1;

        function _(e, t) {
            e.stopPropagation(), t = parseInt(t, 10), o.default.onRestoreClick(t)
        }

        function v(e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1],
                n = (0, o.Msg__restoreInner)(e);
            (0, i.$$)(".msg_id_".concat(e)).forEach(function(e) {
                e.$(".msg__restore").innerHTML = n, e.classList.remove("msg_selected"), e.classList.add("msg_removed"), e.classList.toggle("msg_spam", t)
            })
        }

        function g(e, t, n) {
            b(e.target, t, function() {
                t.classList.toggle("msg_selected"), o.default.onClick(n)
            })
        }

        function y(e, t, n, i, a) {
            b(e.target, t, function() {
                o.default.onPendingClick(n, i, a)
            })
        }

        function b(e, t, n) {
            for (var i = t.classList.contains("msg_pending") || t.classList.contains("msg_failed"); e !== t;)
                if (i && -1 !== e.className.indexOf("msg__sticker")) e = e.parentElement;
                else {
                    if ("A" === e.tagName || "BUTTON" === e.tagName || e.getAttribute("onclick") || e.classList.contains("im_msg_audiomsg") || e.classList.contains("articleSnippet__block") || e.classList.contains("MailButton") || e.closest(".".concat(d.cls))) return;
                    e = e.parentElement
                }
            m ? m = !1 : E() || t.classList.contains("msg_removed") || t.classList.contains("msg_spam") || store.mail.cur.editing || n()
        }

        function w() {
            E() && (m = !0)
        }

        function k(e, t, n) {
            switch (t) {
                case "forward":
                    o.default.onForward(n)
            }
        }

        function E() {
            return window.getSelection().toString().length > 0
        }

        function S(e, t, n, i) {
            e.preventDefault(), o.default.onReplyClick(t, n, i)
        }

        function C(e, t, n, i) {
            n && (e.preventDefault(), i && s.default.stickersClick(t, i))
        }

        function M(e, t) {
            if (clearTimeout(f), !!t.getAttribute("data-animation-path")) {
                var n = e.touches[0].clientX,
                    i = e.touches[0].clientY;
                (0, l.addEvent)(t, "contextmenu", P), (0, l.addEvent)(t, "touchmove", a, {
                    passive: !0
                }), (0, l.addEvent)(t, "touchend", r, {
                    passive: !0
                }), (0, l.addEvent)(t, "touchcancel", r, {
                    passive: !0
                }), f = setTimeout(function() {
                    ! function(e) {
                        StickersAnimation.loadAndPlaySticker(e)
                    }(t), r()
                }, A)
            }

            function a(e) {
                (Math.abs(e.touches[0].clientX - n) >= 10 || Math.abs(e.touches[0].clientY - i) >= 10) && r()
            }

            function r() {
                clearTimeout(f), (0, l.removeEvent)(t, "contextmenu", P), (0, l.removeEvent)(t, "touchmove", a, {
                    passive: !0
                }), (0, l.removeEvent)(t, "touchend", r, {
                    passive: !0
                }), (0, l.removeEvent)(t, "touchcancel", r, {
                    passive: !0
                })
            }
        }

        function P(e) {
            event.preventDefault(), event.stopPropagation()
        }
    },
    C4zK: function(e, t, n) {
        "use strict";
        var i = s(n("bZ/P")),
            a = n("UxAg"),
            r = s(n("+cqQ")),
            o = s(n("nggH"));

        function s(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }

        function l() {
            store.mail.cur && h()
        }

        function c(e) {
            store.mail.cur && function(e) {
                var t = e.target,
                    n = $(".mailActs");
                n && n.classList.contains("mailActs_menuOpened") && !t.closest(".mailActs__chevronList") && !t.closest(".mailActs__chevronMoreIcon") && n.classList.remove("mailActs_menuOpened")
            }(e)
        }

        function u(e) {
            d({
                canEdit: e
            })
        }

        function d(e) {
            (0, a.$$)(".mailActs").forEach(function(t) {
                var n = i.default.parseClass("mailActs", t.getAttribute("class"));
                t.setAttribute("class", i.default.class("mailActs", Object.assign({}, n, e)))
            })
        }

        function f(e) {
            switch (e) {
                case "edit":
                    o.default.onEditClick();
                    break;
                case "remove":
                    o.default.onRemoveClick();
                    break;
                case "important":
                    o.default.onImportantClick();
                    break;
                case "reply":
                    o.default.onReplyClick();
                    break;
                case "forward":
                    o.default.onForwardClick();
                    break;
                case "spam":
                    o.default.onSpamClick();
                    break;
                case "pin":
                    o.default.onPinClick()
            }
        }

        function h() {
            var e = document.querySelector(".mailActs__chevron"),
                t = e.offsetWidth - 1,
                n = e.querySelectorAll(".mailActs__chevronListItem"),
                i = e.querySelectorAll(".mailActs__icon");
            Array.prototype.forEach.call(i, function(e, a) {
                t < 36 * i.length ? t - 34 >= 36 * (a + 1) ? (e.classList.remove("mailActs__icon_hidden"), n[a].classList.add("mailActs__chevronListItem_hidden")) : (e.classList.add("mailActs__icon_hidden"), n[a].classList.remove("mailActs__chevronListItem_hidden")) : (e.classList.remove("mailActs__icon_hidden"), n[a].classList.add("mailActs__chevronListItem_hidden"))
            }), d({
                cutted: t < 36 * i.length
            })
        }

        function p() {
            (0, a.$$)(".mailActs").forEach(function(e) {
                return e.classList.toggle("mailActs_menuOpened")
            })
        }
        Object.assign(o.default, {
            onCloseClick: (0, r.default)(),
            onRemoveClick: (0, r.default)(),
            onImportantClick: (0, r.default)(),
            onReplyClick: (0, r.default)(),
            onForwardClick: (0, r.default)(),
            onSpamClick: (0, r.default)(),
            onPinClick: (0, r.default)(),
            onMoreClick: (0, r.default)(),
            onEditClick: (0, r.default)(),
            setCount: function(e) {
                var t = langNumeric(e, lang.mobile_mail_messages_selected).replace("{count}", e);
                (0, a.$$)(".mailActs__counter").forEach(function(e) {
                    return e.innerText = t
                }), 1 != e && u(!1);
                h()
            },
            setEditAvailable: u,
            setImportantAvailable: function(e) {
                d({
                    canImportant: e
                })
            },
            toggleQuickButtons: function(e) {
                $(".mailActs__buttonsIn").hidden = !e
            },
            setReplyAvailable: function(e) {
                $(".mailActs__button_type_reply").disabled = !e
            },
            togglePin: function(e) {
                (0, a.$$)(".mailActs").forEach(function(t) {
                    return t.classList.toggle("mailActs_canPin", e)
                })
            },
            setModifiers: d,
            setLabels: function(e) {
                var t = window.lang,
                    n = e.pinned ? t.mobile_mail_messages_actions_unpin : t.mobile_mail_messages_actions_pin,
                    i = e.important ? t.mobile_mail_messages_actions_important_off : t.mobile_mail_messages_actions_important;
                $(".mailActs__icon_type_pin").setAttribute("aria-label", n), $(".mailActs__icon_type_important").setAttribute("aria-label", i), $(".mailActs__chevronListItem_type_pin").innerHTML = n, $(".mailActs__chevronListItem_type_important").innerHTML = i
            },
            update: h
        }), o.default._onButtonClick = f, o.default._onCloseClick = o.default.onCloseClick, o.default._onMoreClick = p, onBodyResize(l), document.addEventListener("click", c)
    },
    C7ju: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("JaXn")) && i.__esModule ? i : {
            default: i
        };
        var r = function(e) {
            return {
                class: "PhotoMarketItem",
                attrs: {
                    "data-item-id": e.item_id
                },
                inner: [{
                    class: "PhotoMarketItem__thumb",
                    tag: "img",
                    src: e.thumb
                }, {
                    class: "PhotoMarketItem__title",
                    inner: e.title
                }, {
                    class: "PhotoMarketItem__price",
                    inner: Wd.wrap(e.price)
                }, (0, a.default)({
                    type: e.type,
                    typeInt: e.type_int,
                    isFave: e.is_fave,
                    itemId: e.item_id,
                    ownerId: e.owner_id,
                    href: e.href,
                    faveHash: e.fave_hash
                })]
            }
        };
        t.default = r
    },
    CKxJ: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i = s(n("bZ/P")),
            a = (s(n("KMpi")), function(e) {
                if (e && e.__esModule) return e;
                var t = o();
                if (t && t.has(e)) return t.get(e);
                var n = {};
                if (null != e) {
                    var i = Object.defineProperty && Object.getOwnPropertyDescriptor;
                    for (var a in e)
                        if (Object.prototype.hasOwnProperty.call(e, a)) {
                            var r = i ? Object.getOwnPropertyDescriptor(e, a) : null;
                            r && (r.get || r.set) ? Object.defineProperty(n, a, r) : n[a] = e[a]
                        }
                }
                n.default = e, t && t.set(e, n);
                return n
            }(n("/Id8"))),
            r = n("fdw3");

        function o() {
            if ("function" != typeof WeakMap) return null;
            var e = new WeakMap;
            return o = function() {
                return e
            }, e
        }

        function s(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }

        function l() {
            var e = u(['\n    <div class="msg__newMsgsDivider">\n      <span class="msg__newMsgDividerText">', "</span>\n    </div>\n  "]);
            return l = function() {
                return e
            }, e
        }

        function c() {
            var e = u(["\n    ", "\n    ", "\n  "]);
            return c = function() {
                return e
            }, e
        }

        function u(e, t) {
            return t || (t = e.slice(0)), Object.freeze(Object.defineProperties(e, {
                raw: {
                    value: Object.freeze(t)
                }
            }))
        }
        var d = function(e) {
            var t, n = e.msgId,
                o = e.withDivider ? function() {
                    var e = window.lang;
                    return i.default.html(l(), e.mobile_mail_new_msgs)
                }() : "",
                s = store.mail,
                u = (0, r.isForwardedMessageId)(n) ? s.forwards[n] : s.msgs[n],
                d = s.members[u.authorId],
                f = u.peerId,
                h = s.peers[f];
            if (!e.detailed) {
                var p = store.mail.presend,
                    A = (p = p && p.msgs) && p["edit" + n];
                A && (u = A)
            }
            h && (h.isIncomingMR || h.isRejectedMR) && (o = "");
            if (u.isService) t = (0, a.default)({
                id: n,
                text: u.service,
                service: !0,
                unread: u.isUnread
            });
            else {
                var m = (0, a.Msg__authorName)(d, f, s.cur.userId),
                    _ = {
                        id: n,
                        text: u.text,
                        important: u.isImportant,
                        unread: u.isUnread,
                        authorPhoto: d.avatar,
                        authorName: m,
                        authorUrl: d.url,
                        date: u.date,
                        removed: s.cur.msgRemoved[n],
                        admin: u.adminName ? {
                            name: u.adminName,
                            url: u.adminUrl
                        } : null,
                        edited: u.edited,
                        channel: h.isChannel && h.ownerId !== s.cur.viewerId,
                        attaches: u.attaches,
                        attachesHTML: u.attachesHTML,
                        attachesLoading: u.attachesLoading,
                        forwards: u.forwards,
                        reply: u.reply,
                        pending: u.pending,
                        waiting: u.waiting,
                        failed: u.failed,
                        sendId: u.sendId,
                        sticker: u.sticker,
                        keyboard: u.keyboard,
                        maxDepth: e.detailed ? s.cur.maxDetailedMsgDepth : s.cur.maxMsgDepth
                    };
                t = e.detailed ? (0, a.Msg_detailed)(_) : (0, a.default)(_)
            }
            return i.default.html(c(), o, t)
        };
        t.default = d
    },
    CQvH: function(e, t, n) {
        "use strict";
        addEvent(window, "keydown", function(e) {
            9 === e.keyCode && document.body.classList.add("tabbing")
        }, {
            passive: !0
        }), addEvent(window, "click touchstart", function() {
            document.body.classList.remove("tabbing")
        }, {
            capture: !0,
            passive: !0
        })
    },
    Cbap: function(e, t, n) {
        "use strict";

        function i(e, t) {
            for (var n = 0; n < t.length; n++) {
                var i = t[n];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var a = function() {
                function e() {
                    ! function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, e), this.routes = []
                }
                var t, n, a;
                return t = e, a = [{
                    key: "getRouter",
                    value: function() {
                        return window.router || (window.router = new e), window.router
                    }
                }], (n = [{
                    key: "addRoute",
                    value: function(e, t, n) {
                        this.routes.push({
                            isActive: !1,
                            test: e,
                            activateCallback: t,
                            deactivateCallback: n
                        })
                    }
                }, {
                    key: "test",
                    value: function(e) {
                        var t = e.test;
                        return "function" == typeof t ? t(window.nav.cur) : t instanceof RegExp ? t.test(window.nav.cur) : !(!window.nav.cur || "string" != typeof t) && window.nav.cur.startsWith(t)
                    }
                }, {
                    key: "deactivateAllRoutes",
                    value: function() {
                        this.routes = this.routes.map(function(e) {
                            return e.isActive = !1, e.deactivateCallback && e.deactivateCallback(), e
                        })
                    }
                }, {
                    key: "checkRoutes",
                    value: function() {
                        var e = this;
                        this.routes = this.routes.map(function(t) {
                            var n = e.test(t);
                            return n && !t.isActive && t.activateCallback && t.activateCallback(), !n && t.isActive && t.deactivateCallback && t.deactivateCallback(), t.isActive = n, t
                        })
                    }
                }]) && i(t.prototype, n), a && i(t, a), e
            }(),
            r = a;
        t.default = r, window.Router = a
    },
    CjAb: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.Header = s, t.default = void 0;
        var i = n("n9zS"),
            a = n("80md"),
            r = n("NJ1W"),
            o = n("/xuI");

        function s() {
            var e = {};
            (arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}).hideIcon && (e.visibility = "hidden");
            var t = (0, o.stylesObjectToString)(e);
            return {
                inner: [(0, r.Row)({
                    inner: [(0, r.Col)({
                        inner: [(0, r.Row)({
                            inner: [(0, r.Col)({
                                inner: [(0, a.Line)({
                                    header: !0
                                })],
                                grow: 4
                            }), (0, r.Col)({
                                grow: 5
                            }), (0, r.Col)({
                                inner: [(0, i.Circle)({
                                    header: !0,
                                    size: 20,
                                    style: t
                                })],
                                auto: !0
                            })]
                        })],
                        flexColumn: !0
                    })]
                })],
                class: "SkeletonHeader",
                tag: "div"
            }
        }
        var l = s;
        t.default = l
    },
    CkGd: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("nggH")) && i.__esModule ? i : {
            default: i
        };
        n("C4zK");
        var r = a.default;
        t.default = r, window.MailActs = a.default
    },
    Cxv5: function(e, t, n) {
        "use strict";
        var i;
        ((i = n("9CLW")) && i.__esModule ? i : {
            default: i
        }).default.onPostMessage(function(e) {
            "putPixel" !== e && "addCard" !== e && window.scrollTop(0)
        })
    },
    "D+pY": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.AudioBackgroundRestriction = void 0;
        var i, a = (i = n("r/ag")) && i.__esModule ? i : {
                default: i
            },
            r = n("4uOi"),
            o = n("BFfX"),
            s = n("J8bf");

        function l(e, t) {
            for (var n = 0; n < t.length; n++) {
                var i = t[n];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        }

        function c(e, t, n) {
            return t && l(e.prototype, t), n && l(e, n), e
        }
        var u = window.audioSubscribe,
            d = function() {
                function e() {
                    ! function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, e), u || (this.isIdle = !1, this.showAlertCountToday = function(e) {
                        var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0,
                            n = parseInt((0, s.getCookie)(e), 10);
                        if (isNaN(n, 10)) return t;
                        return n
                    }(e.SHOW_ALERT_COOKIE), this.initVisibilityChangeEvent())
                }
                return c(e, null, [{
                    key: "writePopupStat",
                    value: function(e) {
                        statlogsValueEvent("mvk_audio_background_popup", e)
                    }
                }, {
                    key: "createPopup",
                    value: function() {
                        var t = {
                            href: e.EXPLANATION_LINK,
                            onclick: 'AudioBackgroundRestriction.writePopupStat("explanation_click");',
                            class: "AudioPopup__explanation",
                            inner: getLang("mobile_audio_background_restriction_explanation")
                        };
                        return Wd.elem((0, o.AudioPopup)({
                            popupClass: "AudioRestrictionPopup",
                            title: getLang("mobile_audio_background_restriction_title"),
                            description: getLang("mobile_audio_background_restriction_description"),
                            action_button: {
                                href: e.REMOVE_RESTRICTION_LINK,
                                onclick: 'AudioBackgroundRestriction.writePopupStat("link_click");',
                                text: getLang("mobile_audio_background_restriction_button")
                            },
                            additional_link: t
                        }))
                    }
                }]), c(e, [{
                    key: "onIdle",
                    value: function() {
                        window.audio.playing() && this.triggerRestriction()
                    }
                }, {
                    key: "showBackgroundMessage",
                    value: function() {
                        var t = e.createPopup();
                        this.showAlertCountToday += 1, (0, s.setCookie)("remixaudio_show_alert_today", this.showAlertCountToday, 1), this.showAlertCountToday % 3 || (a.default.open(t, !0), e.writePopupStat("show"))
                    }
                }, {
                    key: "triggerRestriction",
                    value: function() {
                        audio.pause(), this.showBackgroundMessage()
                    }
                }, {
                    key: "initVisibilityChangeEvent",
                    value: function() {
                        var e = this;
                        this.pageVisibility = new r.PageVisibility, this.pageVisibility.onVisible(function() {
                            e.isIdle = !1
                        }), this.pageVisibility.onHidden(function() {
                            e.isIdle = !0, e.onIdle()
                        })
                    }
                }]), e
            }();
        t.AudioBackgroundRestriction = d, d.SHOW_ALERT_COOKIE = "remixaudio_show_alert_today", d.REMOVE_RESTRICTION_LINK = "/offermusic", d.EXPLANATION_LINK = "https://vk.cc/9uFgyl"
    },
    D48u: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("Qwnw")) && i.__esModule ? i : {
            default: i
        };
        var r = a.default;
        t.default = r, window.MessageRequestsPage = a.default
    },
    DG1x: function(e, t, n) {
        "use strict";
        var i = window,
            a = i.getY,
            r = i.getCh,
            o = i.onDOMReady,
            s = i.onBodyScroll,
            l = window.page,
            c = window.ajax,
            u = window.Pad,
            d = window.Btn;
        window.LoadMore = {
            setUrl: m,
            destroy: _
        }, LoadMore._strategy = {
            replace: {
                onFail: C,
                onSuccess: function(e) {
                    var t = e.response;
                    p.outerHTML = t, _()
                }
            },
            padsExtend: {
                onFail: C,
                onSuccess: function(e) {
                    var t = e.response,
                        n = t.pads,
                        i = t.nextPageUrl;
                    Object.keys(n).forEach(function(e) {
                        var t = n[e];
                        u.addContent(e, t)
                    }), i ? m(i) : _()
                }
            }
        }, LoadMore._onButtonClick = v, o(g), l.onChange(g);
        var f = {
                loadMore: ".LoadMore",
                button: ".LoadMore__button"
            },
            h = "_loadMore_loading",
            p = null,
            A = null;

        function m(e) {
            A.setAttribute("href", e)
        }

        function _(e) {
            p.remove(), p = null, A = null, b()
        }

        function v() {
            S() || w()
        }

        function g() {
            if (p = $(f.loadMore)) {
                var e = window.cur;
                A = p.$(f.button), y(0), s(y), e.destroy.push(b)
            }
        }

        function y(e) {
            if (p && !S()) {
                var t = a(p),
                    n = r();
                t - (e + n) < 2 * n && w()
            }
        }

        function b() {
            s("__clear", y)
        }

        function w() {
            E(!0);
            var e = A.getAttribute("href");
            c.post(e, {
                _ajax: 1
            }, {
                onDone: function(e) {
                    return k(e, !0)
                },
                onFail: function(e) {
                    return k(e, !1)
                }
            })
        }

        function k(e, t) {
            if (E(!1), p) {
                var n = t ? "data-success-handler" : "data-fail-handler";
                n = p.getAttribute(n), Wd.handle(n, {
                    $loadMore: p,
                    response: e
                }), p = null, A = null, b(), g()
            }
        }

        function E(e) {
            A && p && (d.setLoading(A, e), p[h] = e)
        }

        function S() {
            return p && p[h]
        }

        function C(e) {
            console.error("LoadMore: failed to load more", e)
        }
    },
    DM26: function(e, t, n) {
        "use strict";

        function i(e) {
            return function(e) {
                if (Array.isArray(e)) {
                    for (var t = 0, n = new Array(e.length); t < e.length; t++) n[t] = e[t];
                    return n
                }
            }(e) || function(e) {
                if (Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e)) return Array.from(e)
            }(e) || function() {
                throw new TypeError("Invalid attempt to spread non-iterable instance")
            }()
        }

        function a(e, t) {
            return new Promise(function(n) {
                setTimeout(n.bind(null, t), 1e3 * e)
            })
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.pause = a, t.retryFn = function(e, t) {
            var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null,
                i = 0;
            return function r() {
                for (var o = arguments.length, s = new Array(o), l = 0; l < o; l++) s[l] = arguments[l];
                return Promise.resolve().then(function() {
                    return e.apply(void 0, s)
                }).catch(function(e) {
                    if (++i <= t) {
                        var o = "function" == typeof n ? n(i) : 0;
                        return 0 === o ? r.apply(void 0, s) : a(o).then(function() {
                            return r.apply(void 0, s)
                        })
                    }
                    throw e
                })
            }
        }, t.debouncedPromise = function(e, t, n) {
            var a, r;
            return function() {
                for (var o = arguments.length, s = new Array(o), l = 0; l < o; l++) s[l] = arguments[l];
                return new Promise(function(e, i) {
                    var o = n && !a;
                    clearTimeout(a), r && r.reject("debounce"), a = setTimeout(function() {
                        a = null, r = null, n || e(s)
                    }, t), o ? e(s) : n && i("debounce"), r = {
                        resolve: e,
                        reject: i
                    }
                }).then(function(t) {
                    return e.apply(void 0, i(t))
                })
            }
        }, t.abortablePause = function(e, t) {
            var n, i = new Promise(function(i) {
                n = i, setTimeout(i.bind(null, t), 1e3 * e)
            });
            return {
                pause: function() {
                    return i
                },
                abort: function() {
                    n(t)
                }
            }
        }, t.promisify = function(e) {
            return function() {
                for (var t = arguments.length, n = new Array(t), i = 0; i < t; i++) n[i] = arguments[i];
                return new Promise(function(t) {
                    return e.apply(void 0, n.concat([t]))
                })
            }
        }
    },
    DPXh: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.ChatBlock = s, t.default = void 0;
        var i = n("n9zS"),
            a = n("80md"),
            r = n("NJ1W"),
            o = n("/xuI");

        function s() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                t = (0, o.stylesObjectToString)({
                    opacity: e.opacity
                });
            return {
                inner: [(0, r.Row)({
                    inner: [(0, r.Col)({
                        inner: [(0, i.Circle)({
                            size: 50,
                            style: t
                        })],
                        auto: !0
                    }), (0, r.Col)({
                        inner: [(0, r.Row)({
                            inner: [(0, r.Col)({
                                inner: [(0, a.Line)({
                                    style: t
                                })],
                                grow: 3
                            }), (0, r.Col)({
                                grow: 4
                            }), (0, r.Col)({
                                inner: [(0, a.Line)({
                                    style: t
                                })]
                            })],
                            justify: "center"
                        }), (0, r.Row)({
                            inner: [(0, r.Col)({
                                inner: [(0, a.Line)({
                                    style: t
                                })]
                            }), (0, r.Col)({
                                inner: [(0, a.Line)({
                                    style: t
                                })],
                                grow: 5
                            }), (0, r.Col)({
                                grow: 3,
                                style: t
                            })]
                        })],
                        flexColumn: !0
                    })]
                })],
                class: "SkeletonChatBlock",
                tag: "div"
            }
        }
        var l = s;
        t.default = l
    },
    DVnk: function(e, t, n) {
        "use strict";
        FeedAssistanceStats.registerTrackingCls("feedAssistance_recommendedFriends"), FeedAssistanceStats.onStartViewElement(function(e) {
            if (FeedAssistanceStats.getElementType(e) === FeedAssistanceStats.BLOCKS.BLOCK_TYPE_RECOMMENDED_SLIDER) {
                if (e._friendsSliderHandlersAdded) return;
                e._friendsSliderHandlersAdded = !0
            }
        })
    },
    DgYJ: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.uMailWrite_TemplatesContent = function(e) {
            var t = e.length,
                n = !t;
            return i.default.html([c(n), {
                class: "uMailWrite__templatesRows",
                attrs: {
                    hidden: n
                },
                inner: e.map(function(e, n) {
                    return u(e, n, t)
                })
            }])
        }, t.uMailWrite_TemplatesEmpty = c, t.uMailWrite_TemplatesLoading = function() {
            return Loading({
                mix: "uMailWrite__templatesLoading"
            })
        }, t.uMailWrite_TemplatesRow = u, t.prepareTemplateText = d;
        var i = l(n("TYsd")),
            a = l(n("bZ/P")),
            r = n("9M99"),
            o = l(n("gy8s")),
            s = l(n("29dZ"));

        function l(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }

        function c(e) {
            var t = "/mail?act=template&from=" + store.mail.cur.peerId + store.mail.cur.communityParam,
                n = a.default.onClick("uMailWrite.loadTemplatePage", "event", "this", t);
            return {
                class: "uMailWrite__templatesEmpty",
                attrs: {
                    hidden: !e
                },
                inner: [{
                    class: "uMailWrite__templatesEmptyInfo",
                    inner: lang.mobile_mail_templates_empty_info
                }, (0, s.default)({
                    type: "button",
                    theme: "small",
                    attrs: n,
                    inner: lang.mobile_mail_templates_empty_button
                })]
            }
        }

        function u(e, t, n) {
            var s = t > 0 && t === n - 1,
                l = store.mail.cur.communityParam,
                c = store.mail.cur.peerId,
                u = e.name,
                f = e.text;
            u = (0, r.emojiToHTML)(u), f = d(f, !0);
            var h = "_touched uMailWrite__templatesRow";
            return h += " uMailWrite__templatesRow".concat(e.id), e.deleting && (h += " uMailWrite__templatesRow_hidden"), {
                class: h,
                inner: [{
                    class: "uMailWrite__templatesRowContent",
                    attrs: {
                        onclick: ["uMailWrite.onTemplateClick", "event", "this", e.id]
                    },
                    inner: [{
                        class: "uMailWrite__templatesRowName",
                        inner: i.default.html(u)
                    }, {
                        class: "uMailWrite__templatesRowText",
                        inner: i.default.html(f)
                    }]
                }, {
                    class: "uMailWrite__templatesRowMore",
                    inner: [i.default.wrap((0, o.default)({
                        mix: "",
                        icon: "more",
                        position: s ? "bottomRight" : "topRight",
                        items: [{
                            text: lang.mobile_mail_templates_action_edit,
                            name: "edit",
                            url: "/mail?act=template&id=".concat(e.id).concat(l, "&from=").concat(c)
                        }, {
                            text: lang.mobile_mail_templates_action_delete,
                            name: "delete",
                            attrs: a.default.onMouseDown("uMailWrite._onDeleteTemplate", e.id)
                        }]
                    }))]
                }]
            }
        }

        function d(e) {
            var t, n = arguments.length > 1 && void 0 !== arguments[1] && arguments[1],
                i = store.mail.members,
                a = store.mail.cur,
                o = i[a.peerId],
                s = i[a.userId],
                l = i[a.groupId],
                c = o.name.replace(o.firstName, "").trim(),
                u = s.name.replace(s.firstName, "").trim();
            if ((e = (e = (e = (e = (e = (e = (e = (e = e.replace(/<br>/g, "\n")).replace(/&lt;br&gt;/g, "\n")).replace(/\t/g, "\n")).replace(/{user name}/g, o.firstName)).replace(/{user surname}/g, c)).replace(/{admin name}/g, s.firstName)).replace(/{admin surname}/g, u)).replace(/{community}/g, l.name)).match(/{greeting}/g)) {
                var d, f = (t = Date.now() + 1e3 * store.mail.cur.timeShift, new Date(t).getHours());
                d = f >= 3 && f < 12 ? lang.mobile_mail_templates_greeting_morning : f >= 12 && f < 17 ? lang.mobile_mail_templates_greeting_afternoon : f >= 17 && f <= 23 ? lang.mobile_mail_templates_greeting_evening : lang.mobile_mail_templates_greeting_night, e = e.replace(/{greeting}/g, d)
            }
            return n && (e = (0, r.emojiToHTML)(e)), e
        }
    },
    Dh0N: function(e, t, n) {
        "use strict";

        function i(e, t) {
            var n = t.$select,
                i = t.value;
            n.closest(a.email).classList.toggle(r.groupsVisible, e.includes(i) || e.includes(Number(i)))
        }
        window.SettingsEmail = {}, SettingsEmail._onFrequencyChange = i;
        var a = {
                email: ".settingsEmail"
            },
            r = {
                groupsVisible: "settingsEmail_groupsVisible"
            }
    },
    DiaP: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i = r(n("TYsd")),
            a = r(n("29dZ"));

        function r(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        var o = function(e) {
            var t = window.lang;
            return i.default.html({
                class: "MessageRequestBox",
                inner: [{
                    class: "MessageRequestBox__info",
                    inner: t.mobile_mail_mrs_confirm_info
                }, {
                    class: "MessageRequestBox__buttons",
                    inner: [(0, a.default)({
                        theme: "negative",
                        size: "normal",
                        type: "button",
                        inner: t.mobile_mail_mrs_button_reject,
                        attrs: q.onClick("MessageRequestBox.reject", "event", "this", e)
                    }), (0, a.default)({
                        theme: "secondary",
                        size: "normal",
                        type: "button",
                        inner: t.mobile_mail_mrs_button_accept,
                        attrs: q.onClick("MessageRequestBox.accept", "event", "this", e)
                    })]
                }]
            })
        };
        t.default = o
    },
    DkIl: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), Object.defineProperty(t, "MailHat", {
            enumerable: !0,
            get: function() {
                return i.MailHat
            }
        }), Object.defineProperty(t, "MailHat__Title", {
            enumerable: !0,
            get: function() {
                return i.MailHat__Title
            }
        }), Object.defineProperty(t, "MailHat__icon", {
            enumerable: !0,
            get: function() {
                return i.MailHat__icon
            }
        }), Object.defineProperty(t, "MailHat_main", {
            enumerable: !0,
            get: function() {
                return i.MailHat_main
            }
        }), Object.defineProperty(t, "MailHat_convo", {
            enumerable: !0,
            get: function() {
                return i.MailHat_convo
            }
        }), Object.defineProperty(t, "MailHat_page", {
            enumerable: !0,
            get: function() {
                return i.MailHat_page
            }
        });
        var i = n("k9Tg");
        n("iUjD"), window.MailHat_main = i.MailHat_main, window.MailHat_convo = i.MailHat_convo
    },
    E5Ij: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.MailPreSendList__Msg = function(e) {
            var t = store.mail,
                n = t.members[e.authorId],
                i = e.peerId,
                r = t.peers[i],
                o = (0, a.Msg__authorName)(n, i, t.cur.userId);
            return (0, a.default)({
                id: e.id,
                text: e.text,
                important: e.isImportant,
                unread: e.isUnread,
                authorPhoto: n.avatar,
                authorName: o,
                authorUrl: n.url,
                date: e.date,
                removed: t.cur.msgRemoved[e.id],
                admin: e.adminName ? {
                    name: e.adminName,
                    url: e.adminUrl
                } : null,
                edited: e.edited,
                channel: r.isChannel && r.ownerId !== t.cur.viewerId,
                attaches: e.attaches,
                attachesHTML: e.attachesHTML,
                attachesLoading: e.attachesLoading,
                forwards: e.forwards,
                reply: e.reply,
                pending: e.pending,
                failed: e.failed,
                sendId: e.sendId,
                sticker: e.sticker,
                maxDepth: store.mail.cur.maxMsgDepth
            })
        }, t.default = void 0;
        (i = n("TYsd")) && i.__esModule;
        var i, a = function(e) {
            if (e && e.__esModule) return e;
            var t = r();
            if (t && t.has(e)) return t.get(e);
            var n = {};
            if (null != e) {
                var i = Object.defineProperty && Object.getOwnPropertyDescriptor;
                for (var a in e)
                    if (Object.prototype.hasOwnProperty.call(e, a)) {
                        var o = i ? Object.getOwnPropertyDescriptor(e, a) : null;
                        o && (o.get || o.set) ? Object.defineProperty(n, a, o) : n[a] = e[a]
                    }
            }
            n.default = e, t && t.set(e, n);
            return n
        }(n("/Id8"));

        function r() {
            if ("function" != typeof WeakMap) return null;
            var e = new WeakMap;
            return r = function() {
                return e
            }, e
        }
        var o = function() {
            store.mail.pendingMsgs;
            return {
                class: "MailPreSendList__box"
            }
        };
        t.default = o
    },
    E7VD: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.scrollToElem = c, t._onWheel = u;
        var i, a = n("UxAg"),
            r = (i = n("jk6M")) && i.__esModule ? i : {
                default: i
            };
        var o = need("page"),
            s = need("onDOMReady");
        window.Slider = {
            scrollToElem: c
        }, Slider._onWheel = u, (r.default.ios || r.default.msie_edge) && (s(f), o.onChange(f), window.MutationObserver && s(function() {
            document.body && new MutationObserver(d).observe(document.body, {
                subtree: !0,
                childList: !0
            })
        }));
        var l = {
            slider: ".Slider",
            scroll: ".Slider__scroll"
        };

        function c(e) {
            var t = e.closest(l.scroll);
            t.scrollLeft = e.offsetLeft - t.offsetWidth / 2 + e.offsetWidth / 2
        }

        function u(e, t) {
            var n = e.deltaX,
                i = e.deltaY;
            Math.abs(n) > Math.abs(i) && (e.preventDefault(), t.scrollLeft += n)
        }

        function d(e) {
            e.forEach(function(e) {
                e.addedNodes.forEach(function(e) {
                    e.nodeType === Node.ELEMENT_NODE && e.$$(l.slider).forEach(h)
                })
            })
        }

        function f() {
            (0, a.$$)(l.slider).forEach(h)
        }

        function h(e) {
            var t = getComputedStyle(e),
                n = Number(t.paddingTop.replace("px", "")),
                i = Number(t.paddingBottom.replace("px", ""));
            e.style.overflow = "hidden", e.style.height = e.offsetHeight - n - i + "px", e.$(l.scroll).style.paddingBottom = "20px"
        }
    },
    EMnU: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.IconWd = function(e) {
            var t, n = e.icon;
            return {
                class: [e.class, Bem.class("Icon", (t = {}, o(t, n, !0), o(t, "active", e.active), o(t, "blue", e.blue), o(t, "bluer", e.bluer), o(t, "dark", e.dark), o(t, "selected", e.selected), o(t, "small", e.small), o(t, "white", e.white), t))],
                href: e.url,
                attrs: e.attrs
            }
        }, t.default = void 0;
        var i = r(n("bZ/P")),
            a = r(n("Mc5h"));

        function r(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }

        function o(e, t, n) {
            return t in e ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = n, e
        }
        var s = function(e) {
            var t, n = e.icon,
                r = e.class || e.mix;
            return (0, a.default)({
                mix: i.default.class(r, "Icon", (t = {}, o(t, n, !0), o(t, "active", e.active), o(t, "blue", e.blue), o(t, "bluer", e.bluer), o(t, "dark", e.dark), o(t, "selected", e.selected), o(t, "small", e.small), o(t, "white", e.white), t)),
                url: e.url,
                attrs: e.attrs
            })
        };
        t.default = s
    },
    EUzL: function(e, t, n) {
        "use strict";

        function i(e) {
            return function(e) {
                if (Array.isArray(e)) {
                    for (var t = 0, n = new Array(e.length); t < e.length; t++) n[t] = e[t];
                    return n
                }
            }(e) || function(e) {
                if (Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e)) return Array.from(e)
            }(e) || function() {
                throw new TypeError("Invalid attempt to spread non-iterable instance")
            }()
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.createLongpollEventsQueue = function(e, t, n) {
            var a = 0,
                r = e,
                o = [],
                s = !1;

            function l() {
                !o.length || a > 0 || s || (t(o), o = [])
            }

            function c() {
                n && (s = !0, n(r).then(function(e) {
                    var t, n = function(e, t) {
                            return function(e) {
                                if (Array.isArray(e)) return e
                            }(e) || function(e, t) {
                                if (!(Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e))) return;
                                var n = [],
                                    i = !0,
                                    a = !1,
                                    r = void 0;
                                try {
                                    for (var o, s = e[Symbol.iterator](); !(i = (o = s.next()).done) && (n.push(o.value), !t || n.length !== t); i = !0);
                                } catch (e) {
                                    a = !0, r = e
                                } finally {
                                    try {
                                        i || null == s.return || s.return()
                                    } finally {
                                        if (a) throw r
                                    }
                                }
                                return n
                            }(e, t) || function() {
                                throw new TypeError("Invalid attempt to destructure non-iterable instance")
                            }()
                        }(e, 3),
                        a = (n[0], n[1]),
                        c = n[2];
                    r = a, s = !1, (t = o).push.apply(t, i(c)), l()
                }))
            }
            return {
                pause: function() {
                    a++
                },
                resume: function() {
                    a > 0 && (a--, l())
                },
                onLp: function(e, t, n) {
                    var a;
                    s || (r >= e ? (r = t, (a = o).push.apply(a, i(n)), l()) : c())
                }
            }
        }
    },
    EYkR: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("d124")) && i.__esModule ? i : {
            default: i
        };
        var r = a.default;
        t.default = r, window.AppShell = a.default
    },
    Egk5: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.addEvent = function(e, t, n, r, o, l) {
            if (!(e = (0, i.ge)(e)) || 3 == e.nodeType || 8 == e.nodeType) return;
            var c = o ? (u = function(e) {
                var t = e.data;
                e.data = o;
                var i = n.apply(this, [e]);
                return e.data = t, i
            }, u.handler = n, u) : n;
            var u;
            e.setInterval && e !== window && (e = window);
            var d = (0, i.data)(e, "events") || (0, i.data)(e, "events", {}),
                f = (0, i.data)(e, "handle") || (0, i.data)(e, "handle", function(e) {
                    return function() {
                        s.apply(e, arguments)
                    }
                }(e));
            (0, a.each)(t.split(/\s+/), function(t, n) {
                d[n] || (d[n] = [], !r && e.addEventListener ? e.addEventListener(n, f, l) : !r && e.attachEvent && e.attachEvent("on" + n, f)), d[n].push(c)
            })
        }, t.removeEvent = function e(t, n, r, o) {
            void 0 === o && (o = !1);
            t = (0, i.ge)(t);
            if (!t) return;
            var s = (0, i.data)(t, "events");
            if (!s) return;
            if ("string" != typeof n) {
                for (var l in s) s.hasOwnProperty(l) && e(t, l);
                return
            }(0, a.each)(n.split(/\s+/), function(e, n) {
                if ((0, a.isArray)(s[n])) {
                    var l = s[n].length;
                    if ((0, a.isFunction)(r)) {
                        for (var c = l - 1; c >= 0; c--)
                            if (s[n][c] && (s[n][c] === r || s[n][c].handler === r)) {
                                s[n].splice(c, 1), l--;
                                break
                            }
                    } else {
                        for (var u = 0; u < l; u++) delete s[n][u];
                        l = 0
                    }
                    l || (t.removeEventListener ? t.removeEventListener(n, (0, i.data)(t, "handle"), o) : t.detachEvent && t.detachEvent("on" + n, (0, i.data)(t, "handle")), delete s[n])
                }
            });
            (0, a.isEmpty)(s) && ((0, i.removeData)(t, "events"), (0, i.removeData)(t, "handle"))
        }, t.triggerEvent = function(e, t, n, r) {
            e = (0, i.ge)(e);
            var o = (0, i.data)(e, "handle");
            if (o) {
                var s = function() {
                    return o.call(e, (0, a.extend)(n || {}, {
                        type: t,
                        target: e
                    }))
                };
                r ? s() : setTimeout(s, 0)
            }
        }, t.cancelEvent = o, t.stopEvent = function(e) {
            if (!(e = e || window.event)) return !1;
            for (; e.originalEvent;) e = e.originalEvent;
            e.stopPropagation && e.stopPropagation();
            return e.cancelBubble = !0, !1
        }, t.normEvent = l, t.checkEvent = function(e) {
            var t = e || window.event;
            return t && ("click" === t.type || "mousedown" === t.type || "mouseup" === t.type) && (t.which > 1 || t.button > 1 || t.ctrlKey || t.shiftKey || r.browser.mac && t.metaKey) || !1
        }, t.checkKeyboardEvent = function(e) {
            if (!(e = l(e)) || !e.target) return !1;
            if (!e.screenX) return !0;
            var t = (0, i.getSize)(e.target),
                n = (0, i.getXY)(e.target),
                a = e.pageX - n[0],
                r = e.pageY - n[1];
            if (a < -1 || a > t[0] + 1 || r < -1 || r > t[1] + 1) return !0;
            return Math.abs(e.pageX - n[0] - t[0] / 2) < 1 && Math.abs(e.pageY - n[1] - t[1] / 2) < 1
        }, t.checkOver = function(e, t) {
            if (!e) return !0;
            e = e.originalEvent || e, t = t || e.target;
            var n = e.fromElement || e.relatedTarget;
            if (!n || n === t || n === t.parentNode) return !0;
            for (; n !== t && n.parentNode && n.parentNode !== bodyNode;) n = n.parentNode;
            return n !== t
        }, t.KEY = void 0;
        var i = n("zxIV"),
            a = n("t7n3"),
            r = n("gdug");

        function o(e) {
            if (!(e = e || window.event)) return !1;
            for (; e.originalEvent;) e = e.originalEvent;
            return e.preventDefault && e.preventDefault(), e.stopPropagation && e.stopPropagation(), e.stopImmediatePropagation && e.stopImmediatePropagation(), e.cancelBubble = !0, e.returnValue = !1, !1
        }

        function s(e) {
            e = l(e);
            var t = Array.from(arguments);
            t[0] = e;
            var n = (0, i.data)(this, "events");
            if (n && "string" == typeof e.type && n[e.type] && n[e.type].length) {
                var a = (n[e.type] || []).slice();
                for (var r in a)
                    if (a.hasOwnProperty(r)) {
                        if ("mouseover" === e.type || "mouseout" === e.type) {
                            for (var s = e.relatedElement; s && s !== this;) s = s.parentNode;
                            if (s === this) continue
                        }
                        var c = a[r].apply(this, t);
                        if (!1 !== c && -1 !== c || o(e), -1 === c) return !1
                    }
            }
        }

        function l(e) {
            var t = e = e || window.event;
            if ((e = (0, a.clone)(t)).originalEvent = t, e.target || (e.target = e.srcElement || document), 3 == e.target.nodeType && (e.target = e.target.parentNode), !e.relatedTarget && e.fromElement && (e.relatedTarget = e.fromElement === e.target), null == e.pageX && null != e.clientX) {
                var n = document.documentElement,
                    i = bodyNode;
                e.pageX = e.clientX + (n && n.scrollLeft || i && i.scrollLeft || 0) - (n.clientLeft || 0), e.pageY = e.clientY + (n && n.scrollTop || i && i.scrollTop || 0) - (n.clientTop || 0)
            }
            return !e.which && (e.charCode || 0 === e.charCode ? e.charCode : e.keyCode) && (e.which = e.charCode || e.keyCode), !e.metaKey && e.ctrlKey ? e.metaKey = e.ctrlKey : !e.ctrlKey && e.metaKey && r.browser.mac && (e.ctrlKey = e.metaKey), !e.which && e.button && (e.which = 1 & e.button ? 1 : 2 & e.button ? 3 : 4 & e.button ? 2 : 0), e
        }
        t.KEY = {
            LEFT: 37,
            UP: 38,
            RIGHT: 39,
            DOWN: 40,
            DEL: 8,
            TAB: 9,
            RETURN: 13,
            ENTER: 13,
            ESC: 27,
            PAGEUP: 33,
            PAGEDOWN: 34,
            SPACE: 32,
            CTRL: 17,
            ALT: 18,
            SHIFT: 16
        }
    },
    FLY7: function(e, t, n) {
        "use strict";
        var i = I(n("jk6M")),
            a = n("cq4b"),
            r = I(n("TYsd")),
            o = (I(n("Mc5h")), D(n("/Id8"))),
            s = I(n("CkGd")),
            l = I(n("fWqt")),
            c = I(n("77iS")),
            u = D(n("/Rzu")),
            d = I(n("HPEO")),
            f = I(n("yNeG"));
        n("XRdp");
        var h = I(n("D48u")),
            p = (I(n("2eJH")), I(n("M2vk"))),
            A = n("7jQU"),
            m = I(n("rKp0")),
            _ = D(n("HGMY")),
            v = D(n("lQx8")),
            g = n("9M99"),
            y = n("hw56"),
            b = n("qHA9"),
            w = n("MjTa"),
            k = D(n("W38l")),
            E = D(n("HdGT")),
            S = D(n("ok75")),
            C = D(n("wZtc")),
            M = I(n("UlUB")),
            P = n("BZzM");

        function T() {
            if ("function" != typeof WeakMap) return null;
            var e = new WeakMap;
            return T = function() {
                return e
            }, e
        }

        function D(e) {
            if (e && e.__esModule) return e;
            var t = T();
            if (t && t.has(e)) return t.get(e);
            var n = {};
            if (null != e) {
                var i = Object.defineProperty && Object.getOwnPropertyDescriptor;
                for (var a in e)
                    if (Object.prototype.hasOwnProperty.call(e, a)) {
                        var r = i ? Object.getOwnPropertyDescriptor(e, a) : null;
                        r && (r.get || r.set) ? Object.defineProperty(n, a, r) : n[a] = e[a]
                    }
            }
            return n.default = e, t && t.set(e, n), n
        }

        function I(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }

        function x(e, t) {
            return function(e) {
                if (Array.isArray(e)) return e
            }(e) || function(e, t) {
                if (!(Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e))) return;
                var n = [],
                    i = !0,
                    a = !1,
                    r = void 0;
                try {
                    for (var o, s = e[Symbol.iterator](); !(i = (o = s.next()).done) && (n.push(o.value), !t || n.length !== t); i = !0);
                } catch (e) {
                    a = !0, r = e
                } finally {
                    try {
                        i || null == s.return || s.return()
                    } finally {
                        if (a) throw r
                    }
                }
                return n
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance")
            }()
        }
        var O = window.clog,
            L = !1;
        uVK.onReady(Ae), v.Messenger.onQueryChange(ve), v.Messenger.onQueryClear(ye), u.default.onTap(Z), f.default.onUnreadClick(H), f.default.onBackClick(He), f.default.onBackToDialogClick(Ve), f.default.onCancelEditing(Ct), d.default.onAttachedMsgsRemove(J), d.default.onToBottomClick(Le), d.default.onMessage(G), E.onMessage(q), E.onStopped(Q), E.onMessageRemove(Y), E.onCaptcha(Vt), o.default.onClick(dt), o.default.onRestoreClick(ft), o.default.onReplyClick(ht), o.default.onForward(At), Voting.onHtmlUpdate(Tt), v.Messenger.onMainScroll(Oe), v.Messenger.onConvoScroll(Be), v.Messenger.onSearchMsgsClick(_e), v.Messenger.onConvoScroll(v.default.expandPeerBefore), v.Messenger.onConvoAtTop(De), v.Messenger.onConvoAtBottom(Ie), s.default.onCloseClick(tt), s.default.onRemoveClick(nt), s.default.onImportantClick(st), s.default.onReplyClick(ct), s.default.onForwardClick(ut), s.default.onSpamClick(ot), s.default.onPinClick(Ze), s.default.onEditClick(et), l.default.onConfirmDelete(at), PinnedMsg.onHideClick(gt), h.default.onRejectAll(Lt), im.onNewMsg(X), im.onEditMsg(K), im.onMultiTyping(ze), im.onRecordingAudio(qe), im.onOnlineChange($e), im.onMsgReadByMe(Ge), im.onMsgReadByOther(Qe), im.onMsgImportantRemove(te), im.onMsgImportantAdd(ee), im.onMsgRemove(ne), im.onMsgListen(ie), im.onPeerKeyboard(re), im.onPeerBanner(ce), im.onPeerConvert(ue), im.onPeerAdmin(de), im.onMsgRequestChange(fe), im.onDialogImportant(oe), im.onUnreadCount(se), im.onResync(le), S.onUnidle(Ft), AudioMessagePlayer.events.on("listened", Ht), nav.onPopState(Ye), nav.onBeforeGo(Xe), nav.onBeforeGo2(Ke), page.onChange(Je), uVK.onReady(wt), page.onChange(wt), uVK.onReady(kt), page.onChange(kt), page.onChange(W), page.onChange(Pt), uVK.onReady(W), uVK.onReady(_t), uVK.onReady(Pt), uVK.onOrientationChange(z), v.default.loadMailPage(Dt), v.default.onShowPinnedMsgClick = vt, v.default.onHidePinnedMsgClick = gt, v.default.onBannerButtonClick = yt, v.default.onBannerTextClick = bt;
        var B = !1,
            R = 0,
            N = [],
            j = [],
            F = (0, M.default)(function() {
                if (!N.length) return;
                var e = store.mail,
                    t = e.members,
                    n = e.cur,
                    i = N,
                    a = j;
                N = [], j = [], ajaxRequest("/mail", {
                    act: "get_members",
                    members: i
                }, function(e) {
                    Object.assign(t, e), a.forEach(function(e) {
                        e === n.peerId && p.default.redraw(), u.default.redrawTyping(e)
                    })
                })
            }, 3e3);

        function H() {
            v.Messenger.scrollMainBodyToTop()
        }

        function V() {
            (0, w.preventDocumentScroll)();
            var e = v.Messenger.getMainBody();
            e && (0, w.setScrollView)(e);
            var t = $(".leftMenu__searchItems");
            t && (0, w.setScrollView)(t, {
                topBanner: !1,
                overscrollY: !1
            })
        }

        function U() {
            (0, w.preventDocumentScroll)({
                topBanner: !1
            }), v.Messenger.setupConvoBody()
        }

        function z() {
            i.default.safari_mobile && document.activeElement.blur()
        }

        function W() {
            var e = nav.getQuery("msg") || nav.getQuery("id") || nav.getQuery("edit_msg_id");
            e ? requestAnimationFrame(function() {
                v.default.scrollToMsg(e)
            }) : requestAnimationFrame(v.Messenger.scrollConvoToBottom)
        }

        function q(e) {
            var t = store.mail.cur;
            (0, y.addPendingMsg)(e), t.peerId && (0 === e.sendId.indexOf("edit") ? je(e) : (_.removeMsg(e), _.addMsg(e), Nt()))
        }

        function G(e) {
            store.mail.cur.peerId && 0 === e.sendId.indexOf("edit") && je(e)
        }

        function Q() {
            (0, y.failAllPendingMsgs)();
            var e = store.mail,
                t = e.cur,
                n = e.presend;
            if (t)
                if (t.peerId) {
                    if (n.failed[t.peerId]) {
                        var i = [];
                        n.failed[t.peerId].map(function(e) {
                            var t = n.msgs[e];
                            t && (0 === t.sendId.indexOf("edit") ? je(t) : i.push(t))
                        }), _.setMsgs(i)
                    }
                } else Object.keys(n.failed).forEach(function(e) {
                    u.default.redrawLastMsg(e)
                })
        }

        function Y(e) {
            var t = store.mail.presend.msgs[e];
            t && ((0, y.removePendingMsg)(t), (0, y.removeFailedMsg)(t), 0 === e.indexOf("edit") ? store.mail.cur.peerId && m.default.peerReplaceItems([t.id]) : (store.mail.cur.peerId && _.removeMsg(t), Nt()))
        }

        function X(e) {
            Ne(e)
        }

        function K(e) {
            Ne(e)
        }

        function J() {
            var e = store.mail,
                t = e.cur;
            e.peers;
            (0, y.setPeerDraft)(t.viewerId, t.peerId, {
                msgs: void 0
            }, t.editing), t.msgAttached[t.peerId] = [], d.default.uiRedrawAttachments(t.peerId)
        }

        function Z(e) {
            var t = store.mail,
                n = (t.cur, t.rolls),
                i = t.msgs,
                a = Number(qs2obj(e.split("?")[1]).peer);
            i[last(n.peer[a] || [])];
            return me(e)
        }

        function ee(e) {
            var t = store.mail,
                n = t.cur,
                i = t.msgs,
                a = t.scraps,
                r = t.rolls,
                s = i[e];
            if (s && (s.isImportant = !0, r.folder.important = r.folder.important.concat(e).filter(unique).sort(desc), o.default.toggleImportant(e, !0), "important" === n.folder)) {
                var l = a.folder.slice();
                a.folder = a.folder.concat(e).filter(unique).sort(desc), m.default.redrawFolder(l)
            }
        }

        function te(e) {
            var t = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1],
                n = store.mail,
                i = n.cur,
                r = n.msgs,
                s = n.scraps,
                l = n.rolls,
                c = r[e];
            if (c && (c.isImportant = !t, (0, a.arrayRemove)(l.folder.important, e), o.default.toggleImportant(e, !1), "important" === i.folder)) {
                var u = s.folder.slice();
                (0, a.arrayRemove)(s.folder, e), m.default.redrawFolder(u)
            }
        }

        function ne(e) {
            var t = store.mail,
                n = t.cur,
                i = t.msgs,
                r = t.scraps,
                l = t.rolls,
                c = t.peers,
                u = i[e];
            if (u && !n.msgRemoved[e]) {
                delete i[e], (0, a.arrayRemove)(l.peer[u.peerId], e), n.peerId === u.peerId && ((0, a.arrayRemove)(r.peer, e), o.default.remove(e, !0), n.msgSelected[e] && (delete n.msgSelected[e], s.default.setCount(Object.keys(n.msgSelected).length), v.default.redrawMailActions()), r.peer.length ? m.default.checkDivider() : m.default.redrawPeer()), u.isImportant && n.countImportant--;
                var h = c[u.peerId],
                    p = h.isIncomingMR,
                    A = h.isRejectedMR;
                u.isUnread && u.authorId !== n.viewerId && (c[u.peerId].countUnread = c[u.peerId].countUnread - 1, p || A || c[u.peerId].countUnread <= 0 && (n.countUnread = n.countUnread - 1), d.default.redrawToBottom(), f.default.redrawCounter()), l.peer[u.peerId].length ? ae(u, e) : ajaxRequest("/mail", {
                    act: "get_last_msg",
                    peer_id: u.peerId,
                    user_id: n.userId
                }, function(t, n) {
                    n && (storeMethods.injectMail(t), l.peer[u.peerId].push(n)), ae(u, e)
                }, function() {
                    ae(u, e)
                })
            }
        }

        function ie(e) {
            var t = store.mail.msgs,
                n = t && t[e];
            n && (n.listened = !0)
        }

        function ae(e, t) {
            var n = store.mail,
                i = n.cur,
                r = (n.msgs, n.scraps),
                o = n.rolls,
                s = n.peers,
                l = s[e.peerId],
                c = l.isIncomingMR,
                u = l.isRejectedMR;
            o.peer[e.peerId].length || (c || u ? (0, a.arrayRemove)(o.mrs, e.peerId) : ((0, a.arrayRemove)(o.folder.all, e.peerId), (0, a.arrayRemove)(o.folder.unread, e.peerId), (0, a.arrayRemove)(o.folder.unrespond, e.peerId)), "mrs" === i.page ? (0, a.arrayRemove)(r.mrs, e.peerId) : "important" !== i.folder && (0, a.arrayRemove)(r.folder, e.peerId)), o.peer[e.peerId] = o.peer[e.peerId].filter(unique).sort(asc), c || u ? o.mrs = o.mrs.filter(unique).sort(mt) : (0 === l.countUnread && (o.folder.unread = o.folder.unread.filter(function(t) {
                return t !== e.peerId
            })), o.folder.all = o.folder.all.filter(unique).sort(mt), o.folder.unread = o.folder.unread.filter(unique).sort(mt), i.groupId && (o.folder.unrespond = o.folder.unrespond.filter(unique).sort(mt))), "mrs" === i.page ? (r.mrs = r.mrs.filter(unique).sort(mt), m.default.redrawMRs()) : "important" === i.folder ? ((0, a.arrayRemove)(r.folder, t), m.default.redrawFolder()) : "all" === i.folder ? (r.folder = r.folder.filter(unique).sort(mt), m.default.redrawFolder()) : "unread" === i.folder ? (0 === s[e.peerId].countUnread && (0, a.arrayRemove)(r.folder, e.peerId), r.folder = r.folder.filter(unique).sort(mt), m.default.redrawFolder()) : "unrespond" === i.folder && (r.folder = r.folder.filter(unique).sort(mt), m.default.redrawFolder())
        }

        function re(e) {
            var t = store.mail,
                n = t.peers,
                i = t.cur;
            if (n[e]) {
                var a = (0, y.getKeyboardState)(e);
                if (!(Date.now() - a.updateTime <= 500)) {
                    var r = a.updateTime;
                    ajaxRequest("/mail", {
                        act: "get_peers",
                        peer_ids: [e]
                    }, function(t) {
                        r === a.updateTime && (storeMethods.injectMail(t), e == i.peerId && d.default.renderKeyboardIfNeeded({
                            update: !0
                        }))
                    })
                }
            }
        }

        function oe(e, t) {
            var n = store.mail.peers[e];
            n && (n.isImportant = t), u.default.redrawImportant(e, t)
        }

        function se(e) {
            nav.getQuery("community") || function(e) {
                if (setNotify(e), !window.al || !window.al.menu) return;
                var t = window.al,
                    n = new Array(t.menu.length);
                n[3] = e, menu.refreshCounters(n)
            }(e);
            var t = store.mail.cur;
            t && (t.countUnread = e, f.default.redrawCounter()), window.ExperimentalBadge && window.ExperimentalBadge.set(e)
        }

        function le() {
            im.pause(), pe(function() {
                im.resume()
            })
        }

        function ce(e) {
            Date.now() - R <= 500 || ajaxRequest("/mail", {
                act: "get_peers",
                peer_ids: [e]
            }, function(t) {
                var n = store.mail.cur;
                storeMethods.injectMail(t), e == n.peerId && v.default.redrawBanner()
            })
        }

        function ue(e, t) {
            im.pause(), ajaxRequest("/mail", {
                act: "get_peers",
                peer_ids: [t]
            }, function(n) {
                (0, y.replacePeer)(e, t), storeMethods.injectMail(n);
                var i = store.mail.cur;
                e === i.peerId ? (m.default.redrawFolder(), t === i.peerId ? Ee(t) : me("/mail?act=show&peer=".concat(t), {
                    replace: !0
                })) : i.folder && m.default.redrawFolder(), im.resume()
            })
        }

        function de(e, t, n) {
            var i = store.mail,
                r = i.cur,
                o = i.peers;
            if (r) {
                var s = o[e];
                s && (t === r.userId && (s.isAdmin = n), n && !(0, a.arrayContains)(s.adminIds, t) ? s.adminIds.push(t) : !n && (0, a.arrayContains)(s.adminIds, t) && (0, a.arrayRemove)(s.adminIds, t))
            }
        }

        function fe(e, t) {
            var n = store.mail,
                i = n.cur,
                r = n.rolls,
                o = n.scraps;
            i && ("created" !== t && L || ("created" === t && L && (L = !1), "created" === t ? he(e, function(t, n) {
                (0, y.removePeer)(e), storeMethods.injectMail(t), i.countMR = n, store.mail.mrs && (r.mrs = r.mrs.concat(e).filter(unique).sort(mt)), i.folder && (m.default.redrawFolder(), v.default.redrawMRsHint()), i.peerId === e && Ee(e)
            }) : "canceled" === t ? he(e, function(t, n) {
                (0, y.removePeer)(e), storeMethods.injectMail(t), i.countMR = n, store.mail.mrs && (0, a.arrayRemove)(r.mrs, e), i.folder && (m.default.redrawFolder(), v.default.redrawMRsHint()), i.peerId === e ? Ee(e) : "mrs" === i.page && ((0, a.arrayRemove)(o.mrs, e), m.default.redrawMRs())
            }) : "rejected" === t ? he(e, function(t, n) {
                (0, y.removePeer)(e), storeMethods.injectMail(t), i.countMR = n, store.mail.mrs && (0, a.arrayRemove)(r.mrs, e), i.folder && (m.default.redrawFolder(), v.default.redrawMRsHint()), i.peerId === e ? Ee(e) : "mrs" === i.page && ((0, a.arrayRemove)(o.mrs, e), m.default.redrawMRs())
            }) : "accepted" === t && he(e, function(t, n) {
                (0, y.addPeer)(e), storeMethods.injectMail(t), i.countMR = n, store.mail.mrs && (0, a.arrayRemove)(r.mrs, e), i.folder && (m.default.redrawFolder(), v.default.redrawMRsHint()), i.peerId === e ? Ee(e) : "mrs" === i.page && ((0, a.arrayRemove)(o.mrs, e), m.default.redrawMRs())
            })))
        }

        function he(e, t) {
            im.pause(), ajaxRequest("/mail", {
                act: "mrs_get_peer",
                peer_id: e
            }, function(e, n) {
                t(e, n), im.resume()
            })
        }

        function pe(e) {
            var t = store.mail,
                n = t.cur,
                i = t.msgs,
                a = t.scraps,
                r = t.rolls;
            r.folder[n.folder] = [], a.folder = [], v.Messenger.setMainLoading(!0), ajaxRequest("/mail", {
                act: "all" === n.folder ? null : n.folder,
                offset: 0
            }, function(t, o) {
                if (store.mail.cur) {
                    storeMethods.injectMail(t), "all" !== n.folder && "unread" !== n.folder || Object.keys(t.msgs).forEach(function(e) {
                        e = toInt(e);
                        var n = t.msgs[e].peerId;
                        r.peer[n] = (r.peer[n] || []).concat(e).filter(function(e) {
                            return !!i[e]
                        }).filter(unique).sort(asc)
                    });
                    var s = "important" === n.folder,
                        l = s ? desc : mt,
                        c = Object.keys(s ? t.msgs : t.peers).map(toInt).sort(l).filter(function(e) {
                            return -1 === a.folder.indexOf(e)
                        }),
                        u = [].concat(c).filter(unique).sort(l);
                    r.folder[n.folder] = u, a.folder = first(20, u), store.mail.reached.folder[n.folder] = o, m.default.redrawFolder(), f.default.redrawCounter(), v.Messenger.setMainLoading(!1), e && e()
                }
            })
        }

        function Ae() {
            "/mail" !== location.pathname && 0 !== location.pathname.indexOf("/write") || It()
        }

        function me(e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},
                n = be(e);
            return e = makeUrl(e), n && location.pathname + location.search !== e && nav.go(e, !1, {
                push_only: !0,
                replace: !0 === t.replace
            }), n
        }

        function _e() {
            var e = store.mail.cur.query;
            me("/mail?q=".concat(e, "&tab=messages"))
        }

        function ve(e) {
            var t = ve;
            if (t.timer && clearTimeout(t.timer), store.mail.cur) {
                var n = store.mail.cur,
                    i = !n.query;
                if (e) {
                    var a = "msgs" === n.tab ? "&tab=messages" : "",
                        r = makeUrl("/mail?q=".concat(e) + a);
                    be(r), i ? me(r) : t.timer = setTimeout(function() {
                        me(r, {
                            replace: !0
                        })
                    }, 300)
                } else me("/mail", {
                    replace: !0
                })
            }
        }

        function ye() {
            v.Messenger.setMainLoading(!1), v.Messenger.setConvoLoading(!1), ve.clearTimer(), me("/mail", {
                replace: !0
            })
        }

        function be(e) {
            var t = (e = makeUrl(e)).split("?"),
                n = t[0],
                i = qs2obj(t[1]),
                a = store.mail,
                o = a.cur,
                s = a.scraps;
            if (o) {
                var l = i.act,
                    c = i.peer,
                    u = i.chat,
                    d = i.email,
                    f = i.m,
                    p = toInt(i.msg) || toInt(i.id) || null,
                    A = "messages" === i.tab ? "msgs" : "peers",
                    _ = i.q || "",
                    g = +i.community || 0;
                if (Xe()) return !0;
                if ("/mail" !== n || "add_to_chat" === l || "flush_history" === l || "info" === l || "unpin" === l || "leave_chat" === l || "new_chat" === l || "chat_preview" === l || "return_to_chat" === l || "show_medias" === l || "toggle_community_block" === l || "community_toggle_important" === l || "ban_user" === l || "community_mark_answered" === l || "invite_link" === l || "reset_link" === l || "send" === l || "show" === l && i.id || 70 == f || 71 == f || 76 == f || 784 == f || 783 == f || 786 == f || 785 == f || 787 == f) return O("[mail nav] Exit Mail"), void xt();
                if ((o.groupId ? -o.groupId : 0) === g) {
                    p && (B = !0), m.default.clearSystemMessage2();
                    var y = c ? toInt(c) : u ? toInt(u) + 2e9 : d ? -toInt(d) - 2e9 : null,
                        b = "unread" === l || "important" === l || "unrespond" === l ? l : "all",
                        w = function(e) {
                            switch (e) {
                                case "template":
                                case "mrs":
                                case "msg":
                                    return !0
                            }
                            return !1
                        }(l),
                        k = !w && !!o.page,
                        E = o.query !== _ || o.tab !== A;
                    o.page;
                    if (k && (o.page = null), E && y && ("peers" === o.tab ? store.mail.cur.mvk_entrypoint = "conversations_search" : "msgs" === o.tab && (store.mail.cur.mvk_entrypoint = "message_search")), o.peerId && !y && _) O("[mail nav] Peer back to Search"), o.query = _, o.peerId = null, o.tab = A, Se(), v.Messenger.setQuery(_), Te();
                    else if (E && o.peerId === y) o.query = _, o.tab = A, s.search = [], o.tab !== A && (store.mail.reached.search.msgs = {}), v.default.redrawView(), v.Messenger.setQuery(_), m.default.redrawSearch(), _ ? (O("[mail nav] Search update"), Te()) : (O("[mail nav] Search exit"), function() {
                        var e = store.mail,
                            t = e.cur,
                            n = e.scraps;
                        t.query = "", t.tab = "peers", n.search = [], v.default.redrawView(), m.default.redrawSearch(), v.Messenger.setQuery("")
                    }(), 0 === s.folder.length && Pe());
                    else if (w) O("[mail nav] Enter Page: " + l), o.page = l, o.peerId && (o.peerId = null, Se()), o.backUrl = Ot({
                            peerId: y
                        }), v.default.redrawView(),
                        function(e) {
                            var t = store.mail.cur,
                                n = v.Messenger.getPageLayer();
                            "mrs" === t.page && store.mail.mrs ? (store.mail.scraps.mrs = store.mail.rolls.mrs.concat(), n.classList.toggle("messenger__layer_loading", !1), n.innerHTML = r.default.html((0, h.default)({
                                count: t.countMR
                            }))) : (n.classList.toggle("messenger__layer_loading", !0), n.innerHTML = (0, v.Messenger_renderLoadingPage)(), ajaxRequest(e, {}, function(e, t) {
                                t && storeMethods.injectMail(t), n.classList.toggle("messenger__layer_loading", !1), n.innerHTML = e
                            }))
                        }(e);
                    else {
                        if (o.peerId && o.peerId === y) return !0;
                        o.peerId !== y || k && y ? y ? (O("[mail nav] Enter Dialog"), o.backUrl = Ot({
                            peerId: y
                        }), Ee(y, p)) : (O("[mail nav] Exit Dialog"), Se(), we(b), v.Messenger.getMainBody().scrollTop = 0, Pe()) : y && f ? (O("[mail nav] Peer System Msg"), store.mail.peers[y].systemMessageCode = toInt(f), m.default.updateClass("peer"), m.default.redrawSystemMessage(), v.Messenger.scrollConvoToBottom()) : (o.folder !== b || k && b) && (O("[mail nav] Enter Folder"), we(b), v.Messenger.getMainBody().scrollTop = 0, Pe())
                    }
                    return !0
                }
            }
        }

        function we(e) {
            var t = store.mail,
                n = t.cur,
                i = t.scraps,
                a = t.rolls;
            n.folder = e, ke() ? pe() : (i.folder = first(20, a.folder[e]), m.default.folderSetItems(i.folder), v.default.redrawView(), f.default.redraw())
        }

        function ke() {
            var e = store.mail,
                t = e.rolls,
                n = e.cur,
                i = e.msgs,
                a = t.folder[n.folder];
            return !a || ("important" === n.folder ? a.some(function(e) {
                return !i[e]
            }) : a.some(function(e) {
                return !(t.peer[e] && t.peer[e].length > 0)
            }))
        }

        function Ee(e, t) {
            var n = store.mail,
                i = n.cur,
                r = n.msgs,
                o = n.peers,
                s = n.scraps,
                l = n.rolls,
                c = n.reached;
            if (o[e]) {
                var h = l.peer[e] || [];
                if (t || !(o[e].countUnread > 1) || o[e].isIncomingMR || o[e].isRejectedMR) {
                    i.peerId = e, s.peer = [], _t(), t ? (s.peer = [t], l.peer[e] = [], c.peer.before[e] = !1, c.peer.after[e] = !1) : (s.peer = last(20, h), A()), store.mail.reached.peer.after[e] = !0, m.default.updateClass("peer"), v.default.redrawView(), v.Messenger.redrawConvoLayer(), wt(), f.default.startStatusUpdate(), m.default.peerSetItems(s.peer), U(), E.ready().then(function() {
                        d.default.init()
                    }), t || Ce(e);
                    o[e];
                    t && (m.default.updateClass("peer"), v.default.scrollToMsg(t)), t ? De(t) : De(), (0, P.resizePosters)(), requestAnimationFrame(function() {
                        t || (v.Messenger.scrollConvoToBottom(), E.ready().then(function() {
                            v.Messenger.scrollConvoToBottom()
                        })), AudioMessagePlayer.redrawWaves(), requestAnimationFrame(function() {
                            t || v.Messenger.scrollConvoToBottom()
                        })
                    })
                } else {
                    v.Messenger.setConvoLoading(!0), window._preventedCheckTop = !0, B = !0, i.peerId = e, s.peer = [], _t(), u.default.redrawUnread(e), v.default.redrawView(), v.Messenger.redrawConvoLayer(), wt(), f.default.startStatusUpdate(), A(), m.default.peerSetItems([]), U(), E.ready().then(function() {
                        d.default.init()
                    });
                    var p = {
                        act: "show",
                        peer_id: e,
                        msg: "unread",
                        reply_msg_id: i.msgReply[i.peerId]
                    };
                    ajaxRequest("/mail", p, function(t, n, i) {
                        if (store.mail.cur) {
                            var o = t.rolls.peer[e];
                            if (storeMethods.injectMail(t), c.peer.after[e] = n, c.peer.before[e] = i, h = l.peer[e] || [], ((0, a.arrayIntersects)(o, h) || n && 0 === h.length) && (l.peer[e] = h.concat(o).filter(unique).sort(asc)), store.mail.cur.peerId === e) {
                                d.default.preventShowToBottom(), s.peer = o.slice(), geByClass1("mailScrap__items_peer").innerHTML = "", m.default.updateClass("peer"), m.default.peerSetItems(o), AudioMessagePlayer.redrawWaves(), Ce(e);
                                var u = o.find(function(e) {
                                    return r[e].isUnread
                                });
                                v.default.scrollToMsg(u, !0, !1), requestAnimationFrame(function() {
                                    window._preventedCheckTop = !1, B = !1, v.Messenger.setConvoLoading(!1)
                                })
                            }
                        }
                    })
                }
            } else ajaxRequest("/mail", {
                act: "get_peers",
                peer_ids: [e]
            }, function(n) {
                storeMethods.injectMail(n), o[e] ? Ee(e, t) : window.location.reload()
            });

            function A() {
                i.forwardFromId && (lt(), i.forwardFromId = null)
            }
        }

        function Se() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                t = store.mail,
                n = t.cur,
                i = t.scraps;
            f.default.cancelStatusUpdate(), Ct(), n.peerId = null, n.mvk_entrypoint = "", i.peer = [], _t(), n.hasAttachments = !1, e.keepSelected || (n.msgSelected = {}), v.default.redrawView(), f.default.redraw(), d.default.reset(), v.Messenger.cleanConvoBody(), V(), requestAnimationFrame(function() {
                s.default.setCount(0), v.default.redrawMailActions(), p.default.redraw(), requestAnimationFrame(function() {
                    m.default.peerSetItems(i.peer)
                })
            })
        }

        function Ce(e) {
            S.addAction("read_dialog".concat(e), function() {
                ! function(e) {
                    var t = store.mail.peers;
                    if (!t) return;
                    var n = t[e];
                    if (n && (n.isIncomingMR || n.isRejectedMR)) return;
                    !n || n.countUnread > 0 ? ajaxRequest("/mail", {
                        act: "read_dialog",
                        peer_id: e,
                        hash: n.hashRead
                    }, function() {
                        Ge(null, e)
                    }) : setTimeout(function() {
                        Ge(null, e)
                    }, 500)
                }(e)
            })
        }

        function Me(e, t) {
            S.addAction("read_dialog".concat(t), function() {
                ! function(e, t) {
                    var n = store.mail.peers;
                    if (!n) return;
                    Ge(null, t), ajaxRequest("/mail", {
                        act: "read_message",
                        msg_id: e,
                        peer_id: t,
                        hash: n[t].hashRead
                    }, function() {})
                }(e, t)
            })
        }

        function Pe() {
            var e = Pe,
                t = e.locked || (e.locked = {}),
                n = store.mail,
                i = n.cur,
                a = n.scraps,
                r = n.rolls,
                o = n.reached,
                s = i.folder,
                l = a.folder,
                c = r.folder[s],
                u = "folder_".concat(s),
                d = o.folder[s] && last(l) === last(c);
            if (v.Messenger.setMainLoading(0 === l.length && !d), !t[u] && !d) {
                var h = "important" === s,
                    p = ke(),
                    A = h ? desc : mt,
                    _ = [];
                if (0 === l.length) _ = first(20, c);
                else {
                    var g = c.indexOf(last(l));
                    _ = g >= 0 ? c.slice(g + 1, g + 21) : []
                }
                if (_.length && !p) {
                    var y = l.concat(_).filter(unique).sort(A);
                    a.folder = y, m.default.folderAddItems(_)
                } else {
                    t[u] = !0;
                    var b = "all" === s ? null : s,
                        w = p ? 0 : l.length;
                    ajaxRequest("/mail", {
                        act: b,
                        offset: w
                    }, function(e, n) {
                        if (store.mail.cur) {
                            storeMethods.injectMail(e), Object.keys(e.peers).forEach(function(e) {
                                store.mail.reached.peer.after[e] = !0
                            }), "all" !== s && "unread" !== s || Object.keys(e.msgs).forEach(function(t) {
                                t = toInt(t);
                                var n = e.msgs[t].peerId;
                                r.peer[n] = (r.peer[n] || []).concat(t).filter(unique).sort(asc)
                            });
                            var d = Object.keys(h ? e.msgs : e.peers).map(toInt).sort(A).filter(function(e) {
                                    return -1 === l.indexOf(e)
                                }),
                                _ = c.concat(d).filter(unique).sort(A);
                            r.folder[s] = _, n && (o.folder[s] = n), t[u] = !1, i.folder === s && (a.folder = _, m.default.updateClass("folder"), m.default.folderAddItems(d), v.Messenger.setMainLoading(!1), p && (m.default.folderSetItems(a.folder), v.default.redrawView(), f.default.redraw()))
                        }
                    })
                }
            }
        }

        function Te() {
            var e = Te,
                t = e.locked || (e.locked = {}),
                n = store.mail,
                i = n.cur,
                a = n.scraps,
                r = n.rolls,
                o = n.reached,
                s = i.tab,
                l = i.query,
                c = "search_msgs_".concat(s, "_").concat(l),
                u = a.search,
                d = r.search[s][l] || [],
                f = o.search[s][l] && last(u) === last(d);
            if (v.Messenger.setMainLoading(0 === u.length && !f), !t[c] && !f) {
                var h = [];
                if ("peers" === s && (d.length || (d = function() {
                        var e = store.mail,
                            t = e.cur,
                            n = e.peers,
                            i = (e.rolls, Object.keys(n).map(toInt)),
                            a = QuickSearch.getQueryREs(t.query),
                            r = [];
                        return a.forEach(function(e) {
                            i.forEach(function(t) {
                                n[t].title.match(e) && r.push(t)
                            })
                        }), r.filter(unique).sort(mt)
                    }()), d.length))
                    if (0 === u.length) h = first(20, d);
                    else {
                        var p = d.indexOf(u);
                        h = p >= 0 ? d.slice(p + 1, p + 41) : []
                    }
                if (h.length && (a.search = u.concat(h).filter(unique), m.default.redrawSearch(), m.default.updateClass("search"), v.Messenger.setMainLoading(!1)), !h.length || "peers" === s) {
                    var A = "msgs" === s ? {
                        act: "search",
                        q: l,
                        offset: a.search.length,
                        messages: 1
                    } : {
                        act: "search",
                        q: l
                    };
                    e.timer && clearTimeout(e.timer), e.timer = setTimeout(function() {
                        t[c] = !0, ajaxRequest("/mail", A, function(e, n) {
                            if (store.mail.cur) {
                                t[c] = !1, storeMethods.injectMail(e);
                                var u = Object.keys("peers" === s ? e.peers : e.msgs).map(toInt),
                                    f = "peers" === s ? mt : desc,
                                    h = d.concat(u).filter(unique).sort(f);
                                r.search[s][l] = h, n && (o.search[s][l] = n), i.tab === s && i.query === l && (v.Messenger.setMainLoading(!1), a.search = a.search.concat(u).filter(unique).sort(f), m.default.redrawSearch(), m.default.updateClass("search"))
                            }
                        })
                    }, 300)
                }
            }
        }

        function De(e) {
            if (!$(".load_before_closed")) {
                var t = De,
                    n = t.locked || (t.locked = {}),
                    i = store.mail,
                    r = i.cur,
                    o = i.scraps,
                    s = i.rolls,
                    l = i.reached;
                if (r) {
                    var c = r.peerId,
                        u = o.peer,
                        f = s.peer[c] || [],
                        h = "peer_before_".concat(c),
                        p = l.peer.before[c] && u[0] === f[0],
                        A = r.msgReply[c];
                    if (v.Messenger.setConvoLoading(u.length < 1 && !p), !n[h] && !p) {
                        var _ = v.Messenger.getConvoBody(),
                            g = !(0, a.arrayIntersects)(u, f),
                            y = first(u),
                            b = y ? f.indexOf(y) : -1,
                            w = 0 === u.length ? last(10, f) : b >= 0 ? f.slice(b - 20, b) : [];
                        if (w.length && !e) {
                            if (_.scrollTop > 6e3 && !g) return;
                            if (window._preventedCheckTop) return;
                            var k = o.peer.slice(),
                                E = u.concat(w).filter(unique).sort(asc);
                            o.peer = E, m.default.peerAddItemsBefore(w.filter(function(e) {
                                return -1 === k.indexOf(e)
                            })), AudioMessagePlayer.redrawWaves(), m.default.updateClass("peer"), v.Messenger.setConvoLoading(!1)
                        } else {
                            if (!c) return;
                            var S = {
                                    act: "show",
                                    peer_id: c,
                                    msg: u[0],
                                    direction: e ? "around" : "before",
                                    reply_msg_id: A
                                },
                                C = u[0];
                            n[h] = !0, ajaxRequest("/mail", S, function(t, i, r) {
                                if (store.mail.cur) {
                                    e && setTimeout(function() {
                                        B = !1
                                    }, 10), n[h] = !1, t.peers = [], storeMethods.injectMail(t);
                                    var p = Object.keys(t.msgs).map(toInt).filter(function(e) {
                                            return -1 === u.indexOf(e)
                                        }),
                                        A = u.concat(p).filter(unique).sort(asc);
                                    if (r && (l.peer.before[c] = !0), i && (l.peer.after[c] = !0), f = s.peer[c] || [], ((0, a.arrayIntersects)(A, f) || r && 0 === f.length) && (s.peer[c] = (s.peer[c] || []).concat(A).filter(unique).sort(asc)), store.mail.cur.peerId === c) {
                                        if (d.default.preventShowToBottom(), _.scrollTop > 6e3 && !g) return;
                                        var y = o.peer.slice();
                                        o.peer = A, m.default.updateClass("peer"), C ? (m.default.peerAddItemsBefore(p.filter(function(e) {
                                            return -1 === y.indexOf(e) && e < C
                                        }), !0), m.default.peerAddItemsAfter(p.filter(function(e) {
                                            return -1 === y.indexOf(e) && e > C
                                        }), !0)) : m.default.peerAddItemsBefore(p, !0), e && (v.default.scrollToMsg(e), v.Messenger.setConvoLoading(!1)), AudioMessagePlayer.redrawWaves(), v.Messenger.setConvoLoading(!1), null != t.flags.stickersAutoplay && StickersSettings.setAutoplay(t.flags.stickersAutoplay), v.default.expandPeerBefore(), setTimeout(v.default.expandPeerBefore, 100), e && lt(), d.default.redrawReply()
                                    }
                                }
                            })
                        }
                    }
                }
            }
        }

        function Ie() {
            var e = Ie,
                t = e.locked || (e.locked = {}),
                n = store.mail,
                i = n.cur,
                r = n.scraps,
                o = n.rolls,
                s = n.reached;
            if (!B && i) {
                var l = i.peerId,
                    c = r.peer,
                    u = o.peer[l] || [],
                    d = "peer_after_".concat(l);
                if (!(t[d] || s.peer.after[l] && last(c) === last(u))) {
                    var f = v.Messenger.getConvoBody(),
                        h = !(0, a.arrayIntersects)(c, u),
                        p = function() {
                            return f.scrollHeight - f.scrollTop - f.offsetHeight
                        },
                        A = last(c),
                        _ = A ? u.indexOf(A) : -1,
                        g = _ >= 0 ? u.slice(_ + 1, _ + 21) : [];
                    if (!g.length || nav.getQuery("msg") || nav.getQuery("id")) {
                        if (!l) return;
                        var y = {
                            act: "show",
                            peer_id: l,
                            msg: last(c),
                            direction: "after"
                        };
                        t[d] = !0, ajaxRequest("/mail", y, function(e, n) {
                            if (store.mail.cur) {
                                t[d] = !1, e.peers = [], storeMethods.injectMail(e);
                                var i = Object.keys(e.msgs).map(toInt).filter(function(e) {
                                        return -1 === c.indexOf(e)
                                    }).sort(asc),
                                    f = c.concat(i).filter(unique).sort(asc);
                                if (n && (s.peer.after[l] = n), u = o.peer[l] || [], ((0, a.arrayIntersects)(f, u) || n && 0 === u.length) && (o.peer[l] = (o.peer[l] || []).concat(f).filter(unique).sort(asc)), store.mail.cur.peerId === l) {
                                    if (p() > 6e3 && !h) return;
                                    n && m.default.updateClass("peer"), r.peer = f, m.default.updateClass("peer"), m.default.peerAddItemsAfter(i), AudioMessagePlayer.redrawWaves()
                                }
                            }
                        })
                    } else {
                        if (p() > 6e3 && !h) return;
                        var b = c.concat(g).filter(unique).sort(asc);
                        r.peer = b, m.default.peerAddItemsAfter(g), m.default.updateClass("peer"), AudioMessagePlayer.redrawWaves()
                    }
                }
            }
        }
        ve.clearTimer = function() {
            self = ve, self.timer && (clearTimeout(self.timer), self.timer = null)
        };
        var xe = !1;

        function Oe(e) {
            var t = store.mail,
                n = t.cur,
                i = t.scraps,
                a = t.rolls,
                r = e.scrollTop,
                o = e.scrollHeight,
                s = e.offsetHeight;
            if (n)
                if (!n.query && r <= 20 && i.folder.length) {
                    if (xe) {
                        xe = !1;
                        i.folder.slice();
                        i.folder = first(20, a.folder[n.folder]), m.default.folderCutItems(20)
                    }
                } else r > 20 && (xe = !0, o - r - s < window.innerHeight && (n.query ? Te() : Pe()))
        }

        function Le() {
            var e = store.mail,
                t = e.cur,
                n = e.scraps,
                i = e.rolls,
                a = e.reached,
                r = n.peer,
                o = i.peer[t.peerId] || [];
            if (o.length && last(r) === last(o) && a.peer.after[t.peerId]) v.Messenger.scrollConvoToBottom(), d.default.hideToBottom(), m.default.updateClass("peer");
            else {
                var s = t.peerId;
                ajaxRequest("/mail", {
                    act: "show",
                    peer_id: s
                }, function(e, t) {
                    if (store.mail.cur) {
                        var r = e.rolls.peer[s];
                        i.peer[s] = r.slice(), storeMethods.injectMail(e), a.peer.after[s] = !0, store.mail.cur.peerId === s && (d.default.preventShowToBottom(), n.peer = r.slice(), geByClass1("mailScrap__items_peer").innerHTML = "", m.default.peerAddItemsBefore(r), m.default.updateClass("peer"), v.Messenger.scrollConvoToBottom(), AudioMessagePlayer.redrawWaves())
                    }
                })
            }
        }

        function Be(e) {
            var t = Be;
            t.timer || (t.timer = setTimeout(function() {
                t.timer = null,
                    function(e) {
                        var t = store.mail,
                            n = t.cur,
                            i = t.scraps,
                            a = t.msgs,
                            r = t.peers;
                        if (!n) return;
                        var s = i.peer.find(function(e) {
                                return a[e] && a[e].isUnread && a[e].authorId !== n.viewerId
                            }),
                            l = e.scrollTop,
                            c = e.scrollHeight - l - e.offsetHeight;
                        if (s) {
                            var u = o.default.getElem(s),
                                f = e.scrollHeight - u.offsetTop;
                            c - f <= 100 && Ce(n.peerId)
                        }
                        e._prevScroll || (e._prevScroll = 0), c < 300 && $(".mailScrap_reachedAfter") ? d.default.hideToBottom() : l > e._prevScroll - 5 || n.peerId && r[n.peerId].countUnread ? d.default.showToBottom() : d.default.hideToBottom();
                        e._prevScroll = l
                    }(e)
            }, 50))
        }

        function Re(e) {
            for (var t = 0, n = e.attaches.length; t < n; t++) {
                if ("sticker" === e.attaches[t].type) return !1
            }
            var i = store.mail.cur;
            return i.userId === e.peerId && !i.groupId || e.isOut
        }

        function Ne(e) {
            var t, n = e.peerId,
                i = e.id,
                a = e.authorId,
                r = e.attaches,
                o = e.adminId,
                s = e.isService,
                l = e.isStealth,
                c = e.isOut,
                u = e.keyboard,
                d = store.mail,
                f = (d.cur, d.peers),
                h = (d.msgs, d.members),
                p = f[n] && f[n].pinnedMsgId === i,
                A = (0, b.getMsgSendId)(e),
                m = (0, y.getPendingMsg)(A, n),
                w = !(!m && !e.replaced);
            if (m ? (k.mark(A, "opt_to_lp"), t = function(e) {
                    return !!e.length
                }(r)) : t = s || r.length || p || !f[n] || !h[a] || o && !h[o], m) {
                var S = function(e) {
                        var t = store.mail.cur;
                        if ((0, y.removePendingMsg)(e), E.remove(e.sendId, "silent"), t.peerId && -1 === e.sendId.indexOf("edit")) return _.getMsg(e)
                    }(m),
                    M = Object.assign({}, m, {
                        id: i,
                        failed: !1,
                        pending: !1,
                        waiting: !0,
                        sendId: void 0,
                        canEdit: Re(e)
                    });
                if (storeMethods.injectMsg(M), je(M, {
                        existingElem: S
                    }), !t) return void k.clean(A)
            }
            if (!u || !u.inline) {
                if ((u || t) && !c && !e.edited)(0, y.getKeyboardState)(n).updateTime = Date.now();
                !u || t || c || e.edited || function(e) {
                    var t = e.peerId,
                        n = e.authorId,
                        i = e.msgId,
                        a = e.keyboard,
                        r = store.mail.peers[t];
                    r && (r.keyboard = (0, b.prepareKeyboard)({
                        keyboard: a,
                        authorId: n,
                        msgId: i
                    }))
                }({
                    peerId: n,
                    authorId: a,
                    msgId: i,
                    keyboard: u
                })
            }
            if (t) return im.pause(), void C.loadMessage({
                msgId: i,
                forcePinned: p,
                onTryError: function(e) {
                    var t = e.type;
                    A && (k.error(A, "server_load_attach", t), k.clean(A))
                },
                onResult: function(e) {
                    var t = x(e, 2),
                        a = t[0],
                        r = t[1];
                    (A && (k.mark(A, "attach"), k.clean(A)), store.mail.cur) && (storeMethods.injectMail(a), r && function(e, t) {
                        var n = t.unpin,
                            i = t.pinned,
                            a = store.mail,
                            r = a.cur,
                            o = a.peers;
                        if (n) {
                            o[e].pinnedMsg = "", o[e].hasPinnedMsg = !1;
                            var s = Et();
                            delete s[e], St(s), r.peerId === e && (v.default.redrawPinnedMsg(), wt())
                        } else i && (o[e].pinnedMsg = i, o[e].hasPinnedMsg = !0, r.peerId === e && (v.default.redrawPinnedMsg(), wt()))
                    }(n, r), je(a.msgs[i], {
                        isStealth: l,
                        isServerMsg: !0,
                        isReplace: w
                    }), im.resume())
                }
            });
            var P = function(e) {
                var t, n = e.peerId,
                    i = e.id,
                    a = e.authorId,
                    r = e.isOut,
                    o = e.text,
                    s = e.ts,
                    l = e.flags,
                    c = e.adminId,
                    u = e.isService,
                    d = store.mail,
                    f = d.cur,
                    h = (d.peers, d.msgs),
                    p = d.members,
                    A = (0, b.formatTime)(s, f.timeShift),
                    m = h[i],
                    _ = "";
                o && (_ = o.replace(/<br>/g, "\n").replace(b.MENTION_DOMAIN_REGEXP, "@$3").replace(b.MENTION_REGEXP, "@$1 ($3)"));
                t = e.replaced ? !!m && m.edited : !!e.edited;
                var v = o,
                    y = o;
                y = (0, b.wrapLinks)(y, l), y = (0, b.wrapMention)(y), y = (0, g.emojiToHTML)(y);
                var w = e.keyboard;
                w = w && w.inline ? (0, b.prepareKeyboard)({
                    keyboard: w,
                    authorId: a,
                    msgId: i
                }) : null;
                var k = {
                    id: i,
                    peerId: n,
                    authorId: a,
                    ts: s,
                    date: A,
                    dateShort: A,
                    text: y,
                    textInput: _,
                    body: v,
                    isUnread: !m || m.isUnread,
                    edited: t,
                    canEdit: Re(e),
                    isOut: r,
                    isService: u,
                    keyboard: w,
                    attaches: {},
                    forwards: [],
                    hasReply: !!e.hasReply
                };
                c && (k.adminName = c === f.userId ? lang.mobile_mail_you : p[c].name, k.adminUrl = p[c].url);
                return k
            }(e);
            storeMethods.injectMsg(P), je(P, {
                isStealth: l,
                isReplace: w
            })
        }

        function je(e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},
                n = t.isStealth,
                i = t.isServerMsg,
                r = t.isReplace,
                o = t.existingElem,
                s = store.mail,
                l = s.cur,
                c = s.peers,
                h = (s.msgs, s.members, s.rolls),
                _ = s.scraps,
                g = s.reached,
                b = e.peerId,
                w = (e.keyboard, e.authorId),
                k = e.isOut,
                E = e.id,
                S = !k,
                C = c[b] && 0 === c[b].countUnread && S,
                M = r || !!e.edited,
                P = c[b],
                T = P.isIncomingMR,
                D = P.isRejectedMR,
                I = v.Messenger.getConvoBody(),
                x = !1;
            if (e.isUnread && (x = l.viewerId === b || l.peerId === b && S && I.scrollHeight - I.scrollTop - I.offsetHeight < 400 && !!$(".mailScrap_reachedAfter")), x && S && !T && !D && Me(E, b), !M) {
                var O = last(h.peer[b] || []);
                h.peer[b] = (h.peer[b] || []).concat(E).filter(unique).sort(asc), n || T || D || (h.folder.all = h.folder.all.concat(b).filter(unique).sort(mt), g.peer.after[b] || (g.peer.after[b] = !0, g.peer.before[b] = !1));
                var L = c[b];
                if (S && (b === l.peerId && d.default.renderKeyboardIfNeeded({
                        update: !0
                    }), n || (T || D || (h.folder.unread = h.folder.unread.concat(b).filter(unique).sort(mt)), i || (L.countUnread || (L.countUnread = 0), L.countUnread += 1)), b !== l.peerId && n || d.default.redrawToBottom()), !n && !T && !D)
                    if (C && (l.countUnread += 1, f.default.redrawCounter()), l.groupId && (S ? h.folder.unrespond = h.folder.unrespond.concat(b).filter(unique).sort(mt) : (0, a.arrayRemove)(h.folder.unrespond, b)), "all" === l.folder) {
                        var B = _.folder.slice();
                        _.folder = _.folder.concat(b).filter(unique).sort(mt), m.default.redrawFolder(B)
                    } else if ("unread" === l.folder && w !== l.viewerId) {
                    var R = _.folder.slice();
                    _.folder = _.folder.concat(b).filter(unique).sort(mt), m.default.redrawFolder(R)
                } else if ("unrespond" === l.folder) {
                    var N = _.folder.slice();
                    S ? _.folder = _.folder.concat(b).filter(unique).sort(mt) : (0, a.arrayRemove)(_.folder, b), m.default.redrawFolder(N)
                }
                if (T && (h.mrs = h.mrs.concat(b).filter(unique).sort(mt), "mrs" === l.page)) {
                    var j = _.mrs.slice();
                    _.mrs = _.mrs.concat(b).filter(unique).sort(mt), m.default.redrawMRs(j)
                }
                if (l.peerId !== b || !(0, a.arrayIntersects)(_.peer, h.peer[b]) && 0 !== _.peer.length || last(_.peer) !== O) o && o.remove();
                else {
                    _.peer.slice();
                    _.peer = _.peer.concat(E).filter(unique).sort(asc);
                    var F = Fe(function() {
                        o ? m.default.peerAddElemAfter(E, o) : m.default.peerAddItemsAfter([E])
                    });
                    S && !F && d.default.showToBottom(), w === l.viewerId && m.default.removeDivider()
                }
                var H = (0, A.uTyping_getPeerTyping)(b);
                H && H.users.length && ((0, y.removePeerTypingUser)(b, w), b === l.peerId && p.default.redraw(), u.default.redrawTyping(b))
            }
            var V = E === (0, u.uConvo_getLastMsgId)(b);
            M && (V ? Fe(function() {
                return m.default.peerReplaceItems([E])
            }) : m.default.peerReplaceItems([E])), !n && V && (u.default.redrawLastMsg(b), u.default.redrawUnread(b), StickersAnimation.checkSettingsAndLoad(e.id)), b === l.peerId && AudioMessagePlayer.redrawWaves()
        }

        function Fe(e) {
            var t = v.Messenger.getConvoBody(),
                n = t.scrollTop + t.offsetHeight >= t.scrollHeight - 2;
            e();
            var i = t.scrollHeight - t.scrollTop - t.offsetHeight < 400;
            return n && v.Messenger.scrollConvoToBottom(), i
        }

        function He() {
            if (store.mail.cur) {
                var e = store.mail.cur.backUrl;
                if (store.mail.cur.backUrl = null, V(), e) history.back();
                else me(function() {
                    var e = store.mail.cur;
                    if ("mrs" === e.page) return "/mail";
                    if ("template" === e.page) {
                        var t = nav.getQuery("from");
                        return "/mail?act=show&peer=".concat(t)
                    }
                    return e.tab ? "/mail" : (e.peerId, "/mail")
                }(), {
                    replace: !0
                })
            }
        }

        function Ve() {
            var e = store.mail.cur,
                t = e.msgSelected,
                n = e.forwardFromId;
            e.forwardFromId = null, Object.keys(t).forEach(function(e) {
                delete t[e]
            }), o.default.unselectAll(), v.default.redrawMailActions(), n && Ee(n)
        }
        var Ue = {};

        function ze(e, t, n) {
            var i = store.mail,
                a = i.cur,
                r = i.peers,
                o = r ? r[e] : null;
            if (o && !o.isIncomingMR && !o.isRejectedMR) {
                var s = (0, y.filterPeerTypingUser)({
                    type: "text",
                    users: t,
                    count: n
                }, a.viewerId);
                (0, y.setPeerTyping)(e, s);
                var l = Ue[e];
                l && clearTimeout(l), s.count && s.users.length && (Ue[e] = setTimeout(function() {
                    Ue[e] = null, ze(e, [], 0)
                }, 7e3), Rt(s.users, e)), e === a.peerId && p.default.redraw(), u.default.redrawTyping(e)
            }
        }
        var We = {};

        function qe(e, t, n) {
            var i = store.mail,
                a = i.cur,
                r = i.peers;
            if (r ? r[e] : null) {
                var o = (0, y.filterPeerTypingUser)({
                    type: "audio",
                    users: t,
                    count: n
                }, a.viewerId);
                (0, y.setPeerTyping)(e, o);
                var s = We[e];
                s && clearTimeout(s), o.count && o.users.length && (We[e] = setTimeout(function() {
                    We[e] = null, qe(e, [], 0)
                }, 7e3), Rt(o.users, e)), e === a.peerId && p.default.redraw(), u.default.redrawTyping(e)
            }
        }

        function $e(e) {
            var t = e.userId,
                n = e.isOnline,
                i = e.onlinePlatform,
                a = e.lastActionTime,
                r = store.mail,
                o = r.cur,
                s = r.peers[t];
            s && s.canSeeOnline && (s.isOnline = n, e.isOnline && (s.onlinePlatform = i), a && (s.lastActionTime = a), u.default.redrawOnline(t), o.peerId === t && f.default.redrawOnline())
        }

        function Ge(e, t) {
            var n = store.mail,
                i = n.cur,
                r = n.peers,
                s = n.msgs,
                l = n.scraps,
                c = n.rolls;
            if (i) {
                var h = i.peerId === t ? l.peer : [],
                    p = c.peer[t] || [],
                    A = r[t];
                if (p.concat(h).forEach(function(e) {
                        var t = s[e];
                        t && t.isUnread && t.authorId !== i.viewerId && (delete t.isUnread, o.default.markAsRead(e))
                    }), A ? A.countUnread && (i.countUnread -= 1, A.countUnread = 0) : i.countUnread -= 1, (0, a.arrayRemove)(c.folder.unread, t), "unread" === i.folder) {
                    var _ = l.folder.slice();
                    (0, a.arrayRemove)(l.folder, t), m.default.redrawFolder(_)
                }
                f.default.redrawCounter(), d.default.redrawToBottom(), u.default.redrawUnread(t)
            }
        }

        function Qe(e, t) {
            var n = store.mail,
                i = n.cur,
                a = n.msgs,
                r = n.rolls,
                s = n.scraps,
                l = r.peer[t] || [];
            if (a[e])
                for (var c = l.indexOf(e); c >= 0;) {
                    var d = a[l[c]];
                    d.authorId === i.viewerId && d.isUnread && (delete d.isUnread, o.default.markAsRead(d.id)), c--
                } else last(l) && e <= last(l) && l.forEach(function(e) {
                    var t = a[e];
                    t.authorId === i.viewerId && t.isUnread && (delete t.isUnread, o.default.markAsRead(t.id))
                });
            i.peerId === t && s.peer.forEach(function(e) {
                var t = a[e];
                t.authorId === i.viewerId && t.isUnread && (delete t.isUnread, o.default.markAsRead(t.id))
            }), u.default.redrawUnread(t)
        }

        function Ye() {
            if (Xe()) return !0;
            var e = store.mail.cur;
            if (e && (e.backUrl = null), e && e.forwardFromId) return Ve(), !0;
            i.default.safari_mobile && document.activeElement.blur();
            var t = qs2obj(location.search.slice(1)).act;
            if (!$(".uMessenger") && "/mail" === location.pathname && "show_medias" !== t) return nav.go(location, null, {
                no_push: !0,
                need_restore: !1
            }), !0;
            var n = new RegExp(/z=photo/).test(location.search);
            if ($(".uMessenger") && !n && !ge("z_photoview") && !ge("StoriesView")) {
                var a = be(location.pathname + location.search);
                return a && nav.go(location.pathname + location.search, null, {
                    no_push: !0,
                    push_only: !0
                }), a
            }
        }

        function Xe() {
            var e = Xe;
            if (mediaUpload.isUploading) return e.noAlert || alert(unescapeAttr(lang.mobile_mail_wait_until_uploaded)), e.noAlert = !0, setTimeout(function() {
                e.noAlert = !1
            }, 10), !0
        }

        function Ke(e, t, n) {
            var i = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : {},
                a = store.mail.cur;
            if (!("/mail" === n && a && a.groupId || i.replace)) return !t.m && geByClass1("uMessenger") ? me(n) : void 0
        }

        function Je() {
            window.isNewMail && (store.mail.cur ? "/mail" !== location.pathname && 0 !== location.pathname.indexOf("/write") ? xt() : It() : ve.clearTimer())
        }

        function Ze() {
            var e = store.mail,
                t = e.cur,
                n = (e.msgs, e.peers),
                i = e.hash,
                a = t.msgSelected,
                r = toInt(Object.keys(a)[0]),
                s = n[t.peerId];
            t.hasAttachments = !1, t.msgSelected = {}, s.pinnedMsgId = r, s.hasPinnedMsg = !0, o.default.unselectAll(), v.default.redrawMailActions(), ajaxRequest("/mail?act=pin", {
                hash: i.pin,
                chat: nav.getQuery("chat") || store.mail.cur.peerId - 2e9,
                msg: r,
                _ajax: 1
            })
        }

        function et() {
            var e, t = store.mail,
                n = t.cur,
                i = t.msgs,
                a = (t.peers, t.hash),
                r = (t.replies, t.pendingReplies, n.msgSelected),
                o = toInt(Object.keys(r)[0]),
                s = n.peerId,
                l = (0, y.getPeerDraft)(n.viewerId, n.peerId),
                c = i[o],
                u = function(e) {
                    c.hasReply || l && l.editing && l.editing.id == o && l.msgs && (n.msgAttached[s] = l.msgs), c.hasReply ? n.msgReply[s] = c.reply : n.msgReply[s] = null, d.default.redrawReply(), d.default.onAttachedMsgsRemove(), d.default.uiRedrawAttachments(s), d.default.setModifiers({
                        editing: !0
                    }), f.default.setModifiers({
                        editing: !0
                    }), v.default.redrawMailActions(), tt(), d.default.setText(e)
                };
            if (n.editing == o) return e = l && l.editing && l.editing.id == o ? l.editing.text || "" : c.textInput, void u(e);
            n.editing = o, Mt(), ajaxRequest("/mail?act=edit_message_start", {
                hash: a.edit,
                edit_msg_id: o,
                peerId: s,
                _ajax: 1
            }, function(e, t) {
                (0, y.pushPeerAttachments)(n.peerId, e), u(t)
            })
        }

        function tt() {
            var e = store.mail.cur.msgSelected;
            Object.keys(e).forEach(function(t) {
                delete e[t]
            }), o.default.unselectAll(), s.default.setCount(0), v.default.redrawMailActions()
        }

        function nt() {
            var e = store.mail,
                t = (e.msgs, e.cur),
                n = Object.keys(t.msgSelected).every(it);
            1 !== Object.keys(t.msgSelected).length || n ? l.default.open({
                canDeleteForAll: n
            }) : rt()
        }

        function it(e) {
            var t = store.mail,
                n = t.msgs,
                i = (t.cur, t.peers),
                a = vk.id,
                r = n[e],
                o = nav.getQuery().community,
                s = i[r.peerId];
            return !!r && (r.authorId !== a && r.authorId !== -o ? s.isAdmin && -1 === s.adminIds.indexOf(r.authorId) : !(r.peerId === a && !o) && (333 !== r.peerId && (!(Date.now() / 1e3 - r.ts > 86400) && !(s.kicked || s.closed || s.unableToWrite || s.kickedMessage))))
        }

        function at() {
            var e = store.mail.cur.editing;
            e ? (! function(e) {
                var t = store.mail,
                    n = t.cur,
                    i = (t.hash, t.msgs, t.peers),
                    a = n.peerId;
                ne(e), ajaxRequest("/mail", {
                    act: "delete_for_all",
                    peer: a,
                    ids: e + "",
                    hash: i[a].hashRemove
                }, function() {}), v.default.redrawMailActions()
            }(e), Ct(!0)) : rt(!1, l.default.isDeleteMessagesForAll()), l.default.close()
        }

        function rt() {
            var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0],
                t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1],
                n = store.mail,
                i = n.cur,
                a = (n.hash, n.msgs, n.peers),
                r = i.peerId,
                s = i.msgRemoved,
                l = i.msgSelected,
                c = Object.keys(l);
            c.forEach(function(n) {
                delete l[n = +n], t ? ne(n) : (s[n] = !e || "spam", e ? o.default.spam(n) : o.default.remove(n))
            }), ajaxRequest("/mail", {
                act: t ? "delete_for_all" : e ? "spam" : "delete",
                peer: r,
                ids: c.join(","),
                hash: a[r].hashRemove
            }, function() {}), v.default.redrawMailActions()
        }

        function ot() {
            rt(!0)
        }

        function st() {
            var e = store.mail,
                t = e.cur,
                n = e.hash,
                i = e.msgs,
                a = t.msgSelected,
                r = Object.keys(a),
                s = r.some(function(e) {
                    return !i[e].isImportant
                }) ? 1 : 0;
            r.forEach(function(e) {
                delete a[e], i[e].isImportant != !!s && (s ? t.countImportant++ : t.countImportant--), i[e].isImportant = !!s, o.default.toggleImportant([e], !!s)
            }), ajaxRequest("/mail", {
                act: "mark_important",
                ids: r,
                hash: n.important,
                val: s
            }, function() {}), o.default.unselectAll(), v.default.redrawMailActions()
        }

        function lt() {
            var e = store.mail.cur,
                t = e.peerId,
                n = Object.keys(e.msgSelected).map(toInt);
            e.msgAttached[t] = n, (0, y.setPeerDraft)(e.viewerId, e.peerId, {
                msgs: n,
                reply: void 0
            }, e.editing), e.msgReply[t] && !e.editing && ajaxRequest("/mail", {
                act: "reply_cancel",
                peer_id: store.mail.cur.peerId,
                hash: store.mail.hash.reply
            }), e.msgReply[t] = null, e.msgSelected = {}, o.default.unselectAll(), s.default.setCount(0), d.default.redrawReply(), d.default.uiRedrawAttachments(t), v.default.redrawMailActions()
        }

        function ct() {
            var e = store.mail,
                t = e.cur,
                n = e.flags,
                i = e.pendingReplies,
                a = t.peerId;
            if (!(0, b.isContactPeer)(a)) {
                if (!n.replies) return lt();
                var r = toInt(Object.keys(t.msgSelected)[0]);
                t.msgReply[a] = r, i[r] = o.default.getReplyDataFromHTML(r), (0, y.setPeerDraft)(t.viewerId, t.peerId, {
                    reply: r,
                    msgs: void 0
                }, t.editing), ajaxRequest("/mail", {
                    act: "reply_start",
                    hash: store.mail.hash.reply,
                    peer_id: store.mail.cur.peerId,
                    msg_id: r
                }), t.msgAttached[a] = [], t.msgSelected = {}, o.default.unselectAll(), s.default.setCount(0), d.default.redrawReply(), d.default.uiRedrawAttachments(a), v.default.redrawMailActions(), d.default.openKeyboard("text")
            }
        }

        function ut() {
            var e = store.mail.cur;
            e && ((0, b.isContactPeer)(e.peerId) || (e.forwardFromId = e.peerId, e.query = "", e.tab = "peers", v.Messenger.setQuerySilently(""), Se({
                keepSelected: !0
            }), we("all"), v.Messenger.getMainBody().scrollTop = 0, Pe()))
        }

        function dt(e) {
            if (store.mail.cur) {
                var t = store.mail,
                    n = t.cur,
                    i = t.peers,
                    a = t.msgs,
                    r = t.flags,
                    o = n.msgRemoved,
                    l = n.msgSelected,
                    c = i[n.peerId];
                if (d.default.hideStickersPanel(), !o[e]) {
                    l[e] ? delete l[e] : l[e] = !0;
                    var u = Object.keys(l),
                        f = u.length,
                        h = 1 === f && u[0] == i[n.peerId].pinnedMsgId,
                        p = u.reduce(function(e, t) {
                            return e && a[t].isImportant
                        }, !0);
                    s.default.setCount(f), s.default.setModifiers({
                        pinned: h,
                        important: p
                    }), s.default.setLabels({
                        pinned: h,
                        important: p
                    }), (0, b.isContactPeer)(n.peerId) ? s.default.toggleQuickButtons(!1) : s.default.toggleQuickButtons(!0), r.replies && (1 !== f || c.isIncomingMR ? s.default.setReplyAvailable(!1) : s.default.setReplyAvailable(!0));
                    var A = toInt(Object.keys(l)[0]),
                        m = 1 == f && a[A];
                    if (s.default.setEditAvailable(m && m.canEdit && !c.unableToWrite), s.default.setImportantAvailable(f > 0 && n.viewerId > 0), c.canPin) {
                        var _ = toInt(Object.keys(l)[0]);
                        s.default.togglePin(1 === f && _ !== c.pinnedMsgId)
                    } else s.default.togglePin(!1);
                    v.default.redrawMailActions()
                }
            }
        }

        function ft(e) {
            var t = store.mail,
                n = t.cur,
                i = t.hash,
                a = t.msgs[e],
                r = "spam" === n.msgRemoved[e] ? "nospam" : "restore";
            delete n.msgRemoved[e], o.default.restore(e), ajaxRequest("/mail", {
                act: r,
                id: e,
                hash: i.restore
            }, function() {}), a.isImportant && (n.countImportant++, ee(e)), m.default.redrawFolder()
        }

        function ht(e, t, n) {
            var i = store && store.mail && store.mail.cur;
            if (i && e) {
                var a = store.mail.forwards[n];
                if (a.peerId && a.peerId === i.peerId && !i.msgRemoved[e]) v.default.scrollToMsg(e) || ajaxRequest("/mail", {
                    act: "get_msgs",
                    msgs: [e]
                }, function(i) {
                    storeMethods.injectMail(i);
                    var a = store.mail,
                        r = a.msgs,
                        o = a.cur;
                    o.peerId && (r[e] ? Ee(o.peerId, e) : pt(e, t, n))
                });
                else pt(e, t, n)
            } else pt(e, t, n)
        }

        function pt(e, t, n) {
            if (t) {
                var i = nav.getQuery();
                "show" === i.act && (i.msg = t, nav.go(location.pathname + obj2qs(i), !1, {
                    replace: !0,
                    push_only: !0
                }))
            }
            var a = (0, o.Msg_makeReplyLink)(e, t, n);
            nav.go(a, null, {
                force: !0
            })
        }

        function At(e) {
            var t, n, i, a = store.mail.cur;
            a && (a.msgSelected = (i = !0, (n = e) in (t = {}) ? Object.defineProperty(t, n, {
                value: i,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : t[n] = i, t), statlogsValueEvent("messages_channel_forward_click", 0), ut())
        }

        function mt(e, t) {
            var n = store.mail,
                i = n.rolls,
                a = n.presend,
                r = n.msgs,
                o = i.peer[e] || [0],
                s = i.peer[t] || [0],
                l = jt(a.pending[e], function(e) {
                    return -1 === e.indexOf("edit")
                }),
                c = jt(a.pending[t], function(e) {
                    return -1 === e.indexOf("edit")
                }),
                u = last(o),
                d = last(s),
                f = Math.max(l ? a.msgs[l].ts : 0, u ? r[u].ts : 0);
            return Math.max(c ? a.msgs[c].ts : 0, d ? r[d].ts : 0) - f
        }

        function _t() {
            if (store.mail.cur) {
                var e = !!store.mail.cur.peerId;
                $$(".vk__page_mail").forEach(function(t) {
                    return t.classList.toggle("messenger_noPullToRefresh", e)
                })
            }
        }

        function vt() {
            var e = store.mail.cur.peerId,
                t = $(".pinnedMsg");
            if (t) {
                Number(t.dataset.id);
                var n = Et();
                delete n[e], St(n), wt()
            }
        }

        function gt() {
            var e = store.mail.cur.peerId,
                t = $(".pinnedMsg");
            if (t) {
                var n = Number(t.dataset.id),
                    i = Et();
                i[e] = n, St(i), wt()
            }
        }

        function yt(e, t) {
            var n = store.mail,
                i = n.cur,
                a = n.peers[i.peerId];
            ajaxRequest("/mail", {
                act: "banner_callback",
                hash: a.hashBanner,
                peer_id: i.peerId,
                callback_data: t
            }), R = Date.now(), a.banner = null, v.default.redrawBanner()
        }

        function bt(e) {
            var t = $(".messenger__banner_content");
            t && t.classList.toggle("messenger__banner_contentExpanded")
        }

        function wt() {
            var e = store.mail,
                t = e.cur;
            e.peers;
            if (t) {
                var n = t.peerId;
                if (n) {
                    var i = $(".pinnedMsg"),
                        a = Et()[n],
                        r = i ? intval(i.dataset.id) : null;
                    v.default.setPinnedVisibility(r && a !== r)
                }
            }
        }

        function kt() {
            if (store.mail.cur && store.mail.cur.peerId) {
                var e = $(".pinnedMsg");
                if (e)
                    if (!Number(e.dataset.id)) {
                        var t = store.mail.cur.peerId,
                            n = Et();
                        delete n[t], St(n)
                    }
            }
        }

        function Et() {
            return lsGet("messenger.pinHidden") || {}
        }

        function St(e) {
            lsSet("messenger.pinHidden", e)
        }

        function Ct(e) {
            var t = store.mail.cur;
            if (t && t.editing) {
                t.editing = !1, Mt(), !0 !== e && ajaxRequest("/mail?act=edit_message_cancel", {
                    peerId: t.peerId
                }), (0, y.popPeerAttachments)(t.peerId), (0, y.setPeerDraft)(t.viewerId, t.peerId, {});
                var n = (0, y.getPeerDraft)(t.viewerId, t.peerId);
                t.msgAttached[t.peerId] = n.msgs || [], t.msgReply[t.peerId] = n.reply || null, d.default.setText(n && n.text || ""), d.default.setModifiers({
                    editing: !1
                }), f.default.setModifiers({
                    editing: !1
                }), d.default.uiRedrawAttachments(t.peerId), d.default.redrawReply();
                var i = v.Messenger.getConvoBody();
                i.scrollTop + i.offsetHeight >= i.scrollHeight - 2 && v.Messenger.scrollConvoToBottom()
            }
        }

        function Mt() {
            var e = nav.getQuery();
            store.mail.cur.editing ? e.edit_msg_id = store.mail.cur.editing || void 0 : delete e.edit_msg_id, nav.go(location.pathname + obj2qs(e), !1, {
                replace: !0,
                push_only: !0
            })
        }

        function Pt() {
            if (store.mail.msgs) {
                var e = +nav.getQuery("edit_msg_id");
                e && store.mail.msgs[e] && (store.mail.cur.msgSelected[e] = !0, et())
            }
        }

        function Tt(e) {
            var t = e.closest(".".concat(o.default.class));
            if (t) {
                var n = o.default.getId(t);
                store.mail.msgs[n].textFull = o.default.getTextHtml(t)
            }
        }

        function Dt(e) {
            me(e)
        }

        function It() {
            var e;
            store.mail.cur && (window.isCustomScroll && (0, w.restoreDocumentScroll)(), !store.mail.cur && !store.mail.page || store.mail.cur.peerId || V(), store.mail.cur.peerId && U(), E.ready().then(Bt).then(function() {
                Nt(), store.mail.cur.peerId && (d.default.init(), Ge(0, store.mail.cur.peerId)), nav.getQuery("msg") || nav.getQuery("id") || v.Messenger.scrollConvoToBottom()
            }), im.on(), S.start(), e = qs2obj(location.search.slice(1)), store.mail.cur.mvk_entrypoint = e.mvk_entrypoint || "notifications" === e.from && "notifications" || "", v.default.startPolling(), addEvent(window, "resize", P.resizePosters), window.ExperimentalBadge && window.ExperimentalBadge.set(store.mail.cur.countUnread))
        }

        function xt() {
            if (store.mail.cur) {
                if (!document.body.classList.contains("vk__page_mail")) return im.off(), S.stop(), void storeMethods.resetMail();
                (0, w.restoreDocumentScroll)(), v.Messenger.cleanConvoBody(), im.off(), S.stop(), v.default.stopPolling(), f.default.cancelStatusUpdate(), m.default.resetPrevScraps(), storeMethods.resetMail()
            }
        }

        function Ot(e) {
            var t = e.peerId,
                n = store.mail.cur,
                i = null;
            if ("mrs" === n.page) i = "/mail?act=mrs";
            else if ("template" === n.page) i = "/mail?act=template";
            else if ("msg" === n.page) i = "/mail?act=show=peer=".concat(t);
            else if (n.forwardFromId && n.forwardFromId !== t) i = "/mail?act=show&peer=".concat(n.forwardFromId);
            else if (n.query) {
                var a = "msgs" === n.tab ? "&tab=messages" : "";
                i = "/mail?q=".concat(n.query).concat(a)
            } else if (n.peerId) i = "/mail?act=show&peer=".concat(n.peerId);
            else if (n.folder && !n.forwardFromId) {
                var r = "";
                "all" !== n.folder && (r = "?act=".concat(n.folder)), i = "/mail".concat(r)
            }
            return i
        }

        function Lt() {
            var e = store.mail.cur.countMR,
                t = store.mail.rolls.mrs;
            store.mail.cur.countMR = 0, L = !0, store.mail.rolls.mrs = [], t.forEach(function(e) {
                (0, y.removePeer)(e)
            }), ajaxRequest("/mail", {
                act: "mrs_reject",
                all: !0,
                hash: store.mail.hash.mrs
            }, function(n) {
                if (n.error) return store.mail.cur.countMR = e, store.mail.rolls.mrs = t, L = !1, void h.default.cancelRejeectLoading();
                v.default.redrawView(), me("/mail")
            }, function() {
                store.mail.cur.countMR = e, store.mail.rolls.mrs = t, L = !1, h.default.cancelRejeectLoading()
            })
        }

        function Bt() {
            store.mail.cur && (0, y.queueToPresendMsgs)(E.getItems())
        }

        function Rt(e, t) {
            var n = store.mail.members;
            (e = e.filter(function(e) {
                return !n[e]
            })).length && (N = N.concat(e), j.push(t), F())
        }

        function Nt() {
            var e = store.mail,
                t = e.rolls,
                n = e.scraps,
                i = e.cur;
            t.folder.all = t.folder.all.filter(unique).sort(mt), "all" === i.folder && (n.folder = n.folder.filter(unique).sort(mt), m.default.redrawFolder())
        }

        function jt(e, t) {
            if (!e || !e.length) return null;
            for (var n = e.length - 1; n >= 0; n--)
                if (t(e[n], n)) return e[n];
            return null
        }

        function Ft() {
            im.abortWaiting()
        }

        function Ht(e) {
            var t = +e.getAttribute("data-msg");
            if (t && !(0, b.isForwardedMessageId)(t) && store.mail.cur) {
                var n = store.mail.msgs[t],
                    i = n && store.mail.peers[n.peerId];
                i && !n.listened && n.authorId !== store.mail.cur.viewerId && (0, b.mailRequest)("/mail", {
                    act: "listen_audiomsg",
                    msg_id: t,
                    hash: i.hashRead
                })
            }
        }

        function Vt(e, t) {
            c.default.showCaptcha(e, t)
        }
    },
    FZH1: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.MailScrap_EmptyInner = E, t.MailScrap_Item = y, t.MailScrap_ItemsInner = g, t.MailScrap_class = S, t.default = void 0;
        var i = d(n("bZ/P")),
            a = d(n("Mc5h")),
            r = d(n("O5lf")),
            o = d(n("M2vk")),
            s = d(n("5qQ6")),
            l = d(n("/Rzu")),
            c = d(n("HGMY")),
            u = d(n("TYsd"));

        function d(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }

        function f() {
            var e = _(['\n    <div class="mailScrap__systemMessage" ', ">\n      ", "\n    </div>\n  "]);
            return f = function() {
                return e
            }, e
        }

        function h() {
            var e = _(['\n    <div class="mailScrap__empty mailScrap__empty_', '">\n      ', "\n    </div>\n  "]);
            return h = function() {
                return e
            }, e
        }

        function p() {
            var e = _(['\n    <div class="', '">\n      ', "\n    </div>\n  "]);
            return p = function() {
                return e
            }, e
        }

        function A(e, t, n) {
            return t in e ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = n, e
        }

        function m() {
            var e = _(['\n    <div class="', '">\n      ', "\n      ", "\n      ", "\n      ", "\n      ", "\n      ", "\n      ", "\n      ", "\n    </div>\n  "]);
            return m = function() {
                return e
            }, e
        }

        function _(e, t) {
            return t || (t = e.slice(0)), Object.freeze(Object.defineProperties(e, {
                raw: {
                    value: Object.freeze(t)
                }
            }))
        }
        var v = function(e) {
            var t = e.scrap,
                n = "peer" === t,
                r = S(t),
                s = n ? k("before") : "",
                l = k("after"),
                d = k("center"),
                p = function(e) {
                    var t = i.default.class("mailScrap__items", A({}, e, !0)),
                        n = g(e);
                    return (0, a.default)({
                        mix: t,
                        inner: n
                    })
                }(t),
                _ = function(e) {
                    var t = E(e);
                    return i.default.html(h(), e, t)
                }(t),
                v = n ? (0, o.default)() : "",
                y = n ? u.default.html((0, c.default)()) : "",
                b = n ? (w = store.mail.cur.notification || "", C = i.default.onClick("MailScrap.clearSystemMessage2"), i.default.html(f(), C, w)) : "";
            var w, C;
            return i.default.html(m(), r, s, p, _, l, y, v, b, d)
        };

        function g(e) {
            for (var t = store.mail, n = t.cur, a = t.msgs, r = t.scraps[e], o = r.length, s = [], l = !1, c = 0; c < o; c++) {
                if (c > 0 && "peer" === e && !l) {
                    var u = a[r[c - 1]],
                        d = a[r[c]];
                    if (d.isUnread && !u.isUnread && d.authorId !== n.viewerId) {
                        l = !0, s.push(y(e, r[c], !0));
                        continue
                    }
                }
                s.push(y(e, r[c]))
            }
            return i.default.list(s)
        }

        function y(e, t) {
            var n = arguments.length > 2 && void 0 !== arguments[2] && arguments[2],
                i = store.mail.cur,
                a = "";
            if ("folder" === e) a = "important" === i.folder ? b(t) : w(t);
            else if ("search" === e) {
                if ("peers" === i.tab) a = function(e) {
                    return (0, l.default)(e)
                }(t);
                else a = b(t)
            } else if ("peer" === e) {
                a = function(e) {
                    var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
                    return (0, s.default)({
                        msgId: e,
                        withDivider: t
                    })
                }(t, n)
            } else if ("mrs" === e) {
                a = w(t)
            }
            return a
        }

        function b(e) {
            var t = store.mail.msgs[e].peerId;
            return (0, l.default)(t, e)
        }

        function w(e) {
            return (0, l.default)(e, "last")
        }

        function k(e) {
            var t = i.default.class("mailScrap__loading", A({}, e, !0)),
                n = (0, r.default)({
                    mix: ""
                });
            return i.default.html(p(), t, n)
        }

        function E(e) {
            var t = window.lang,
                n = store.mail.cur,
                i = "";
            switch (e) {
                case "peer":
                    i = t.mobile_mail_history_is_empty;
                    break;
                case "mrs":
                    i = t.mobile_mail_mrs_empty_info;
                    break;
                case "folder":
                    i = {
                        all: t.mobile_mail_no_messages,
                        important: t.mobile_mail_no_important,
                        unread: t.mobile_mail_no_unreaded,
                        unrespond: t.mobile_mail_sublist_empty
                    }[n.folder];
                    break;
                case "search":
                    "msgs" === n.tab && (i = t.mobile_mail_not_found), "peers" === n.tab && (i = t.mobile_mail_no_peers)
            }
            return i
        }

        function S(e) {
            var t, n = store.mail,
                a = n.cur,
                r = n.reached,
                o = !0,
                s = !1,
                l = !1,
                c = !1;
            if ("peer" === e) {
                var u = a.peerId,
                    d = n.scraps.peer,
                    f = d.length,
                    h = n.rolls.peer[u] || [];
                o = r.peer.before[u] && d[0] === h[0], s = last(d) === last(h) && r.peer.after[u], 0 === f && (s = !0);
                var p = u ? n.peers[u] : null;
                p && (l = !!p.systemMessageCode, p.isChannel && (c = p.ownerId !== a.viewerId))
            } else if ("mrs" === e) s = r.mrs;
            else if ("folder" === e) s = r.folder[a.folder];
            else if ("search" === e) {
                var m = a.tab;
                a.query;
                if ("peers" === m) {
                    var _ = n.scraps.search.length;
                    s = r.search[a.tab][a.query] || _ > 0
                } else s = r.search[a.tab][a.query]
            }
            return i.default.class("mailScrap", (A(t = {}, e, !0), A(t, "empty", function(e) {
                var t = store.mail,
                    n = t.cur,
                    i = t.scraps,
                    a = t.reached,
                    r = !1;
                switch (e) {
                    case "peer":
                        var o = n.peerId,
                            s = t.rolls.peer[o];
                        0 === (s ? s.length : 0) && a.peer.after[o] && a.peer.before[o] && (r = !0);
                        break;
                    case "mrs":
                        0 === i.mrs.length && a.mrs && (r = !0);
                        break;
                    case "folder":
                        0 === i.folder.length && a.folder[n.folder] && (r = !0);
                        break;
                    case "search":
                        0 === i.search.length && a.search[n.tab][n.query] && (r = !0)
                }
                return r
            }(e)), A(t, "systemMessage", l), A(t, "reachedBefore", o), A(t, "reachedAfter", s), A(t, "tab", "search" === e && a.tab), A(t, "isChannel", c), t))
        }
        t.default = v
    },
    FflB: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("Y6JH")) && i.__esModule ? i : {
            default: i
        };

        function r(e, t) {
            return {
                class: "MarketItem__shopperAccentRow",
                inner: [{
                    class: "MarketItem__shopperAccentIcon",
                    inner: (0, a.default)("market", e)
                }, {
                    class: "MarketItem__shopperAccentText",
                    inner: t
                }]
            }
        }
        var o = function() {
            var e = window.lang;
            return {
                inner: [r("delivery_outline_24", e.mobile_market_shopper_accent_delivery), r("money_transfer_outline_24", e.mobile_market_shopper_accent_payment), r("return_outline_24", e.mobile_market_shopper_accent_return)]
            }
        };
        t.default = o
    },
    Fhlr: function(e, t, n) {
        "use strict";
        var i = window.FeedAssistanceStats;
        i.registerTrackingCls("feedAssistance_promoButton"), i.onStartViewElement(function(e) {
            if (i.getElementType(e) === i.BLOCKS.BLOCK_TYPE_PROMO_BUTTON) {
                if (e._promoButtonClickHandlerAdded) return;
                var t = geByClass1("feedAssistancePromoButtonInstallApp__button", e),
                    n = t ? "install_app" : "";
                addEvent(t || e, "click", function() {
                    ! function(e, t, n) {
                        i.dispatchEvent({
                            type: i.EVENTS.EVENT_PROMO_BUTTON,
                            data: i.serializeEventData(i.EVENTS.EVENT_PROMO_BUTTON_SUB, e, t, n)
                        })
                    }(e, i.EVENTS.SUB_EVENT_PROMO_BUTTON_CLICK, n)
                }), e._promoButtonClickHandlerAdded = !0
            }
        })
    },
    G0UO: function(e, t, n) {
        "use strict";
        var i = Array.isArray,
            a = {
                mail: {}
            },
            r = {
                injectStore: function(e) {
                    a.mail = {};
                    var t = e.mail,
                        n = t.cur,
                        r = t.rolls,
                        o = t.reached;
                    t.msgs, t.queue;
                    i(e.mail.msgs) && (e.mail.msgs = {}), i(e.mail.replies) && (e.mail.replies = {}), r && i(r.peer) && (r.peer = {}), r && i(r.search.peers) && (r.search.peers = {}), r && i(r.search.msgs) && (r.search.msgs = {}), o && i(o.search.peers) && (o.search.peers = {}), o && i(o.search.msgs) && (o.search.msgs = {}), o && i(o.peer.before) && (o.peer.before = {}), o && i(o.peer.after) && (o.peer.after = {}), a.mail = e.mail, a.mail.pendingReplies = {}, a.mail.presend = {}, n && (n.msgSelected = {}, n.msgRemoved = {}, n.msgAttached = {}, n.msgReply = {}, n.keyboards = {}, n.typings = {}, n.peerMembers = {}), "notificationsCount" in a || (a.notificationsCount = e.notificationsCount)
                },
                injectMail: function(e) {
                    var t = a.mail,
                        n = e;
                    isObject(n.msgs) && Object.assign(t.msgs, n.msgs), isObject(n.peers) && Object.assign(t.peers, n.peers), isObject(n.members) && Object.assign(t.members, n.members), isObject(n.replies) && Object.assign(t.replies, n.replies), isObject(n.forwards) && Object.assign(t.forwards, n.forwards), t.page = n.page, n.mrs && (t.cur.countMR = n.mrs.count, t.rolls.mrs = n.mrs.rolls, t.reached.mrs = n.mrs.reached, t.scraps.mrs = n.mrs.rolls, Object.keys(n.msgs).forEach(function(e) {
                        var i = n.msgs[e],
                            a = i.peerId;
                        t.rolls.peer[a] = [i.id], t.reached.peer.after[a] = !0
                    }), t.mrs = n.mrs)
                },
                injectMsg: function(e) {
                    var t, n, i;
                    r.injectMail({
                        msgs: (t = {}, n = e.id, i = e, n in t ? Object.defineProperty(t, n, {
                            value: i,
                            enumerable: !0,
                            configurable: !0,
                            writable: !0
                        }) : t[n] = i, t)
                    })
                },
                resetMail: function() {
                    a.mail = {}
                }
            };
        window.storeMethods = r, window.store = a
    },
    GDYn: function(e, t, n) {
        "use strict";
        var i = n("UxAg");
        window.PostAttachVideoLink = {}, PostAttachVideoLink._onInit = l, PostAttachVideoLink._onPlayClick = u, PostAttachVideoLink._onReplayClick = u, PostAttachVideoLink._onSoundClick = c, PostAttachVideoLink._onVideoClick = d, PostAttachVideoLink._onVideoPlay = function(e) {
            return f(e.target, "play")
        }, PostAttachVideoLink._onVideoPause = function(e) {
            return f(e.target, "pause")
        }, PostAttachVideoLink._onVideoEnded = function(e) {
            return f(e.target, "end")
        };
        var a = {
                muted: "PostAttachVideoLink_muted",
                state: function(e) {
                    return "PostAttachVideoLink_state_".concat(e)
                }
            },
            r = {
                attach: ".PostAttachVideoLink",
                video: ".PostAttachVideoLink__video"
            },
            o = window.MutationObserver,
            s = null;

        function l() {
            o && !s && (s = new o(h)).observe(document.body, {
                childList: !0,
                subtree: !0
            })
        }

        function c(e) {
            var t = e.closest(r.attach),
                n = (0, i.$)(r.video, t);
            n.muted = !n.muted, t.classList.toggle(a.muted, n.muted)
        }

        function u(e) {
            var t = e.closest(r.attach);
            (0, i.$)(r.video, t).play()
        }

        function d(e) {
            e.paused || e.pause()
        }

        function f(e, t) {
            var n = e.closest(r.attach);
            n.classList.remove(a.state("play")), n.classList.remove(a.state("pause")), n.classList.remove(a.state("end")), n.classList.add(a.state(t))
        }

        function h(e) {
            e.forEach(function(e) {
                e.removedNodes.forEach(function(e) {
                    e.nodeType === HTMLElement.ELEMENT_NODE && (0, i.$$)(r.video, e).forEach(function(e) {
                        e.src = "", e.load()
                    })
                })
            }), (0, i.$)(r.video) || (s.disconnect(), s = null)
        }
    },
    GLI1: function(e, t, n) {
        "use strict";
        n("PuTx")
    },
    GMrv: function(e, t, n) {
        "use strict";
        var i, a = (i = n("+cqQ")) && i.__esModule ? i : {
                default: i
            },
            r = n("cGUQ");
        var o = window,
            s = o.parseJSON,
            l = o.bind,
            c = o.clog,
            u = o.canUploadFile,
            d = o.attr,
            f = o.uploadFile,
            h = o.readFile,
            p = o.replace,
            A = o.clone,
            m = o.ce,
            _ = window.ajax,
            v = {
                onUploadedDone: (0, a.default)("resp"),
                fallback: function(e, t) {
                    var n = window.nav,
                        i = e.nextSibling;
                    return !!i && !n.go(i)
                },
                onUploadProgress: function(e) {
                    window.photoview.updateUpload({
                        progress: e.loaded / e.total
                    })
                },
                onUploadComplete: function(e) {
                    var t = window.photoview,
                        n = e.target.responseText,
                        i = !1;
                    try {
                        i = s(n)
                    } catch (e) {
                        i = {
                            error: "ERR_CLIENT_BAD_RESPONSE: bad request response"
                        }
                    }
                    if (i.error) v.onUploadError.call(this, e);
                    else {
                        this.xhr = null, this.photo_res = n, this.photo_size = i.size;
                        var a = this.static_url + i.x_src,
                            r = i.size[0],
                            o = i.size[1],
                            c = Math.min(r, o);
                        t.onClose = l(v.onClose, this), t.openCrop({
                            src: a,
                            max_scale: c / 200,
                            onSelect: l(v.onCropSelected, this)
                        })
                    }
                },
                onUploadError: function(e) {
                    var t = window.photoview;
                    c("upload error.", e.target.responseText), t.close()
                },
                onClose: function(e) {
                    this.xhr && this.xhr.abort && this.xhr.abort()
                },
                onCropSelected: function(e, t, n) {
                    var i = window.photoview,
                        a = this,
                        o = a.photo_res,
                        s = a.photo_size,
                        l = s[0],
                        c = s[1],
                        u = Math.min(l, c),
                        d = Math.round(e * l),
                        f = Math.round(t * c),
                        h = Math.round(n * u);
                    if (a.upload_edit_url) var p = a.upload_edit_url;
                    else p = a.base_url + "upload.php?" + (0, r.toQueryString)({
                        act: "owner_photo_edit",
                        _query: o,
                        _origin: location.protocol + "//" + location.host
                    }, !0);
                    a.xhr = _.plainpost(p, {
                        _crop: [d, f, h].join(",")
                    }, function(e) {
                        v.onCropSuccess.call(a, e)
                    }, function(e) {
                        v.onCropCancel.call(a)
                    }, !0), i.updateCrop({
                        saving: !0
                    })
                },
                onCropSuccess: function(e) {
                    var t = window.photoview,
                        n = this;
                    n.xhr = _.post("/photos.php?act=done_photo", {
                        _ajax: 1,
                        _query: e,
                        _from: n.from
                    }, {
                        onDone: function(e) {
                            v.onUploadedDone(e), t.close()
                        },
                        onFail: function() {
                            v.onCropCancel.call(n)
                        }
                    })
                },
                onCropCancel: function() {
                    window.photoview.updateCrop({
                        saving: !1
                    })
                },
                prepareInput: function(e) {
                    e.files && e.files.length && (e.value = "")
                },
                start: function(e, t) {
                    var n = window.photoview;
                    if (!e || !u()) return v.fallback(e, t);
                    var i = e.files[0] || !1,
                        a = d(e, "data-upload-url"),
                        r = d(e, "data-base-url"),
                        o = d(e, "data-static-url"),
                        s = d(e, "data-from");
                    if (!i) return !1;
                    if (!a) return v.fallback(e, t);
                    var c = {
                        upload_url: a,
                        base_url: r,
                        static_url: o,
                        file: i,
                        from: s
                    };
                    return c.xhr = f(a, {
                        photo: i
                    }, {
                        onProgress: l(v.onUploadProgress, c),
                        onComplete: l(v.onUploadComplete, c),
                        onError: l(v.onUploadError, c)
                    }), h(i, function(e) {
                        n.updateUpload({
                            thumb: e
                        })
                    }), p(A(e), e), n.onClose = l(v.onClose, c), n.openUpload({
                        src: null
                    }), !1
                },
                getCropFromTag: function(e, t, n) {
                    if (!e) return !1;
                    if (3 == e.length) var i = +e[0],
                        a = +e[1],
                        r = +e[2];
                    else {
                        i = +e[0] * t / 1e4, a = +e[1] * n / 1e4, r = +e[2] * t / 1e4;
                        var o = +e[3] * n / 1e4;
                        if (r > o && (i += (r - o) / 2, r = o), r < 200) {
                            var s = (200 - r) / 2;
                            i -= s, a -= s, r = 200
                        }
                        r = Math.min(Math.max(r, 200), Math.min(t, n)), i = Math.min(Math.max(i, 0), t - r), a = Math.min(Math.max(a, 0), n - r)
                    }
                    return [i / t, a / n, r / Math.min(t, n)]
                },
                crop: function(e) {
                    if (!e || !e.size && !e.url) return !1;
                    var t = window.photoview,
                        n = {
                            upload_edit_url: e.upload_url
                        };
                    if (e.size) {
                        n.photo_size = e.size;
                        var i = Math.min(e.size[0], e.size[1]);
                        t.onClose = l(v.onClose, n), t.openCrop({
                            src: e.thumb,
                            max_scale: i / 200,
                            rect: v.getCropFromTag(e.rect, e.size[0], e.size[1]),
                            onSelect: l(v.onCropSelected, n)
                        })
                    } else {
                        var a = m("img", {
                            src: e.url,
                            onload: function() {
                                n.photo_size = [a.width, a.height];
                                var i = Math.min(a.width, a.height);
                                t.updateCrop({
                                    src: e.thumb,
                                    max_scale: i / 200,
                                    rect: v.getCropFromTag(e.rect, a.width, a.height),
                                    onSelect: l(v.onCropSelected, n)
                                })
                            }
                        });
                        t.onClose = l(v.onClose, n), t.openCrop({
                            src: !0
                        })
                    }
                    return !0
                }
            };
        window.ownerPhotoUpload = v
    },
    "GR/G": function(e, t, n) {
        var i = n("/8IX"),
            a = n("HN+/"),
            r = 3;

        function o(e, t) {
            return t ? e ? e.isSameNode && e.isSameNode(t) ? t : e.tagName !== t.tagName || s(e) !== s(t) ? e : (a(e, t), l(e, t), t) : null : e
        }

        function s(e) {
            return e.dataset ? e.dataset.nanomorphComponentId : void 0
        }

        function l(e, t) {
            for (var n, i, a, r, s = 0, l = 0; n = t.childNodes[l], i = e.childNodes[l - s], n || i; l++)
                if (i)
                    if (n)
                        if (c(i, n))(a = o(i, n)) !== n && (t.replaceChild(a, n), s++);
                        else {
                            r = null;
                            for (var u = l; u < t.childNodes.length; u++)
                                if (c(t.childNodes[u], i)) {
                                    r = t.childNodes[u];
                                    break
                                }
                            r ? ((a = o(i, r)) !== r && s++, t.insertBefore(a, n)) : i.id || n.id ? (t.insertBefore(i, n), s++) : (a = o(i, n)) !== n && (t.replaceChild(a, n), s++)
                        }
            else t.appendChild(i), s++;
            else t.removeChild(n), l--
        }

        function c(e, t) {
            return e.id ? e.id === t.id : e.isSameNode ? e.isSameNode(t) : e.tagName === t.tagName && (e.type === r && e.nodeValue === t.nodeValue)
        }
        e.exports = function(e, t, n) {
            if (i.equal(typeof e, "object", "nanomorph: oldTree should be an object"), i.equal(typeof t, "object", "nanomorph: newTree should be an object"), n && n.childrenOnly) return l(t, e), e;
            return i.notEqual(t.nodeType, 11, "nanomorph: newTree should have one root node (which is not a DocumentFragment)"), o(t, e)
        }
    },
    GVjC: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i = n("OcsD"),
            a = function(e) {
                if (e && e.__esModule) return e;
                var t = r();
                if (t && t.has(e)) return t.get(e);
                var n = {};
                if (null != e) {
                    var i = Object.defineProperty && Object.getOwnPropertyDescriptor;
                    for (var a in e)
                        if (Object.prototype.hasOwnProperty.call(e, a)) {
                            var o = i ? Object.getOwnPropertyDescriptor(e, a) : null;
                            o && (o.get || o.set) ? Object.defineProperty(n, a, o) : n[a] = e[a]
                        }
                }
                n.default = e, t && t.set(e, n);
                return n
            }(n("v/ER"));

        function r() {
            if ("function" != typeof WeakMap) return null;
            var e = new WeakMap;
            return r = function() {
                return e
            }, e
        }(0, i.extend)(a.default, {
            submit: a.submit
        }), window.ReportConfirm = a.default;
        var o = a.default;
        t.default = o
    },
    Go98: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i = r(n("TYsd")),
            a = r(n("9y81"));

        function r(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        var o = function(e) {
            var t = e.tag,
                n = t.id === e.current_id ? "control_radio_checked" : "control_radio";
            return {
                href: t.href,
                class: "Bookmarks__tagsSelectItem",
                inner: [{
                    class: "Bookmarks__tagsSelectItemTitle",
                    inner: i.default.wrap(t.name)
                }, i.default.wrap((0, a.default)({
                    icon: n
                }))]
            }
        };
        t.default = o
    },
    Gzds: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("+cqQ")) && i.__esModule ? i : {
            default: i
        };

        function r(e, t) {
            return function(e) {
                if (Array.isArray(e)) return e
            }(e) || function(e, t) {
                if (!(Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e))) return;
                var n = [],
                    i = !0,
                    a = !1,
                    r = void 0;
                try {
                    for (var o, s = e[Symbol.iterator](); !(i = (o = s.next()).done) && (n.push(o.value), !t || n.length !== t); i = !0);
                } catch (e) {
                    a = !0, r = e
                } finally {
                    try {
                        i || null == s.return || s.return()
                    } finally {
                        if (a) throw r
                    }
                }
                return n
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance")
            }()
        }
        var o, s, l = window,
            c = l.se,
            u = l.remove,
            d = l.gpeByTag,
            f = l.ce,
            h = l.each,
            p = l.append,
            A = l.gpeByClass,
            m = l.toggleClass,
            _ = l.cancelEvent,
            v = l.hasClass,
            g = l.geByClass1,
            y = l.addClass,
            b = l.getY,
            w = l.getH,
            k = l.scrollTop,
            E = l.getCh,
            S = l.removeClass,
            C = l.checkEvent,
            M = l.geByClass,
            P = l.getW,
            T = l.replaceClass,
            D = l.escapeRE,
            I = l.ge,
            x = l.val,
            O = l.after,
            L = l.scrollToEl,
            B = l.replaceEntities,
            R = l.toggle,
            N = l.elfocus,
            j = l.isUndefined,
            F = l.isVisible,
            H = (l.clone, l.attr),
            V = (l.before, l.srand),
            U = l.extend,
            z = window.ajax,
            W = window.nav,
            q = window.Dialog,
            G = {
                curGif: null,
                onStickersTabSelected: (0, a.default)(),
                onStickerClick: (0, a.default)(),
                onStickersInit: c(),
                onReplyClick: c(),
                add_attach: function(e, t) {
                    var n = window.al;
                    u("feed_extra_field");
                    var i = d("form", e),
                        a = f("input", {
                            id: "feed_extra_field",
                            type: "hidden",
                            name: "add_attach",
                            value: 2
                        });
                    if (i) {
                        var r = !1;
                        if (h(i, function(e, t) {
                                if ("submit" === t.type) return r = t, !1
                            }), r) return p(a, i), window.al && n.ver ? W.go(r, t) : i.submit()
                    }
                    return !0
                },
                saveDraft: function(e, t, n) {
                    e && e.preventDefault();
                    var i = I("feed_add_form"),
                        a = {
                            act: "post",
                            save_draft: 1,
                            redirect: n,
                            hash: t
                        };
                    h(i.elements, function(e, t) {
                        "submit" !== t.type && (a[t.name] = "checkbox" === t.type ? (+t.checked).toString() : t.value)
                    }), z.post(window.nav.path, a)
                },
                toggleActions: function(e, t) {
                    var n = A("post_item", e);
                    return m("pi_actions_opened", n), _(t), !1
                },
                wallActions: function(e, t) {
                    var n = window.tooltip,
                        i = A("_audioPlaylist", e) || A("wall_item", e) || A("post", e);
                    if (!i) return !0;
                    if (v("wi_actions_opened", i)) S("wi_actions_opened", i), n.hide();
                    else {
                        var a = g("wi_actions_wrap", i),
                            r = g("wi_actions", a),
                            o = g("wi_actions_btn", i);
                        G.wallActionsHide(), y("wi_actions_opened", i);
                        var s = b(i) + 45 + w(r) + 7,
                            l = k() + E();
                        m("wi_actions_top", a, s > l), n.addHandler(G.wallActionsHide), n.show(a, o)
                    }
                    return _(t), !1
                },
                wallActionsHide: function() {
                    var e = window.tooltip;
                    S("wi_actions_opened", g("wi_actions_opened")), e.hide()
                },
                wallPostOpen: function(e, t) {
                    var n = A("wall_item", e),
                        i = g("wi_date", n);
                    return !i || W.go_after(i, t)
                },
                toggleGif: function(e, t, n) {
                    var i = arguments.length > 3 && void 0 !== arguments[3] && arguments[3];
                    return !e || (!!C(t) || (clearInterval(o), v("current_gif", e) ? G.hideGif(e, t, i) : (i || Gif.autoplayTest(), G.showGif(e, t, n, i))))
                },
                hidePlayingGifs: function(e, t) {
                    M("current_gif", "mcont").forEach(function(n, i) {
                        n !== e && G.hideGif(n, !1, t)
                    })
                },
                showGif: function(e, t, n, i) {
                    var a = window.cur;
                    if (!e) return !0;
                    if (C(t)) return !0;
                    if (n) {
                        if (a.loadedGifs || (a.loadedGifs = {}), !a.loadedGifs[e.href] && !confirm(n)) return !1;
                        a.loadedGifs[e.href] = !0
                    }
                    if (clearInterval(o), !i) {
                        var r = b(e),
                            l = k();
                        k(l - (r - b(e)))
                    }
                    M("current_gif", "mcont").forEach(function(e, t) {
                        G.hideGif(e, !1, i)
                    });
                    var c = !v("not_mp4", e) && Gif.isMp4Supports();
                    if (c) {
                        var u = g("ph_img", e).src;
                        s && "VIDEO" === s.tagName && (s.pause(), s.src = "", s.load()), (s = f("video", {
                            src: e.href,
                            className: "gif_original",
                            loop: !0,
                            muted: !0,
                            autoplay: !0,
                            poster: u
                        }, {
                            position: "relative"
                        })).setAttribute("playsinline", !0), s.setAttribute("webkit-playsinline", !0), s.setAttribute("controls", !0), s.controls = !1, s.load()
                    } else s = f("img", {
                        src: e.href,
                        className: "gif_original"
                    });
                    y("current_gif gif_loading", e);
                    var d = function(t, n) {
                        v("current_gif", e) && (T("gif_loading", "gif_opened", e), p(s, e), G.curGif = e, n && n())
                    };
                    return c ? s.oncanplay = function() {
                        e !== G.curGif && (statlogsValueEvent("gif_play", 0, "mp4", null, i ? 1 : 0), d())
                    } : o = setInterval(function() {
                        s.complete && (statlogsValueEvent("gif_play", 0, "gif", null, i ? 1 : 0), d(), clearInterval(o))
                    }, 100), t && !t.defaultPrevented ? _(t) : void 0
                },
                hideGif: function(e, t) {
                    var n = arguments.length > 2 && void 0 !== arguments[2] && arguments[2];
                    if (!e) return !0;
                    if (C(t)) return !0;
                    if (S("current_gif", e), S("gif_opened", e), S("gif_loading", e), M("gif_original").forEach(function(e) {
                            u(e)
                        }), !n) {
                        var i = Gif.getState(),
                            a = i.currentAutoplayElement,
                            r = i.ignore;
                        a === e && (r.push(e), Gif.setState("ignore", r))
                    }
                    return G.curGif = null, t && !t.defaultPrevented ? _(t) : void 0
                },
                replyNamesRE: function() {
                    var e = window.cur;
                    if (!e.replyNames) return !1;
                    var t = [];
                    return h(e.replyNames, function() {
                        t.push(D(this[0]))
                    }), new RegExp("^(" + t.join("|") + ")")
                },
                replyTo: function(e, t, n, i, a) {
                    var r = window.cur;
                    if (C(e)) return !0;
                    n = n || 0, S("nc_current_reply", g("nc_current_reply"));
                    var o = I("nc_form"),
                        s = I("nc_message"),
                        l = g("nc_reply_name", o),
                        c = A("near_btn", l),
                        u = I("nc_reply_as"),
                        d = x(s),
                        f = G.replyNamesRE();
                    if (n) {
                        var h = I(t + "_" + n),
                            _ = b(h) + w(h),
                            v = k();
                        O(o, h), y("nc_current_reply", g("pi_reply_wrap", h)), k(v + b(h) + w(h) - _);
                        var E = r.replyNames[i] || {},
                            M = E[0] || "",
                            P = E[1] || "";
                        d = d ? f ? d.replace(f, M) : d : M, G.onReplyClick(!0, M)
                    } else {
                        p(o, g("wall_replies")), L(o);
                        P = "";
                        d = f ? d.replace(f, "") : d
                    }
                    return x(s, B(d)), x(l, P), R(c, n), u && (x(u, +a), m("cp_post_as_group", o, +a)), x("nc_reply_to", n), r.replyTo = n, N(s), !1
                },
                stickersInit: function() {
                    if (!window.isNewMail || !g("messenger")) {
                        var e = window.cur,
                            t = window.Scroller,
                            n = I("stickers_panel");
                        if (n) {
                            var i = g("sp_body", n),
                                a = g("sp_stickers_tabs", n);
                            e.scroller && e.scroller.destroy(), e.scroller = new t(i, {
                                byPage: !0
                            }), e.scroller.init(), e.destroy.push(function() {
                                e.scroller.destroy()
                            }), e.tabScroller && e.tabScroller.destroy(), e.tabScroller = new t(a), e.tabScroller.init(), e.destroy.push(function() {
                                e.tabScroller.destroy()
                            }), G.onStickersInit(!0)
                        }
                    }
                },
                stickersToggle: function(e, t) {
                    var n = window.cur;
                    if (!n.stickers) return !0;
                    j(t) && (t = !F("stickers_panel"));
                    var i = I("write_form") || I("nc_form"),
                        a = I("stickers_panel"),
                        r = g("cp_sticker_btn", i);
                    return !a || (R(a, t), m("cp_sticker_btn_sel", r, t), t && n.tabScroller && n.tabScroller.onShow(), n.onStickersToggleCallbacks && n.onStickersToggleCallbacks.forEach(function(e) {
                        return e(t)
                    }), !1)
                },
                stickersClick: function(e, t) {
                    var n = window.cur;
                    return n.stickers && n.stickers[t] ? (window.isNewMail && "/mail" === location.pathname && (window.uMailWrite.drawStickers(), window.uMailWrite.openStickersPanel()), G.stickersToggle(null, !0), G.stickersSelectTab(null, t)) : W.go(e)
                },
                stickersStoreOpen: function(e) {
                    var t = window.cur;
                    return z.click(e, !1, {
                        url_params: {
                            reply_to: t.replyTo || 0
                        }
                    })
                },
                fromStickerToObject: function(e) {
                    var t = r(e, 6);
                    return {
                        id: t[0],
                        size: t[1],
                        url: t[2],
                        animationUrl: t[3],
                        recent: t[4],
                        ref: t[5]
                    }
                },
                fromObjectToSticker: function(e) {
                    return [e.id, e.size, e.url, e.animationUrl, e.recent, e.ref]
                },
                getStickersTabHTML: function(e) {
                    var t = cur.stickers[e],
                        n = window.isNewMail ? 16 : 8,
                        i = [];
                    if (t && t.length)
                        for (var a = 0; a < t.length / n; a++) i.push(t.slice(a * n, a * n + n));
                    var r = i.map(function(e) {
                            var t = e.map(function(e) {
                                var t = G.fromStickerToObject(e),
                                    n = t.id,
                                    i = t.size,
                                    a = t.url,
                                    r = t.animationUrl,
                                    o = t.recent,
                                    s = t.ref,
                                    l = "",
                                    c = "";
                                r && (l = " sticker_animation", c = '\n          data-animation-path="'.concat(r, '"\n          data-uniq-id="').concat(Date.now()).concat(Math.round(1e8 * Math.random()), '"\n          data-sticker-id="').concat(n, '"\n          data-loop-count="3"\n          ontouchstart="StickersAnimation.touchStartSticker(this);"\n          ontouchend="StickersAnimation.touchEndSticker(this);"\n        '));
                                var u = " sticker" + n,
                                    d = ' onclick="return post.sendSticker(this, '.concat(n, ", ").concat(Boolean(o), ", '").concat(s, "');\"");
                                return '\n          <div class="sticker_item'.concat(u, '">\n            <a class="sticker_thumb thumb_item').concat(l, '" ').concat(d, " ").concat(c, '>\n              <img src="').concat(a, '" class="th_img sticker_img" height="').concat(i, '"/>\n            </a>\n          </div>\n        ')
                            }).join("\n");
                            return '\n        <div class="sp_page scroller_page">\n          <div class="stickers_list">\n            '.concat(t, "\n          </div>\n        </div>\n      ")
                        }).join("\n"),
                        o = '\n        <div class="sp_page scroller_page">\n          <div class="stickers_list">\n            <div class="stickers_null">'.concat(getLang("mobile_common_stickers_no_recent"), "</div>\n          </div>\n        </div>\n    "),
                        s = i.map(function(e, t) {
                            return '\n        <span class="sp_ppt '.concat(0 === t ? "sp_ppt_sel" : "", '" data-i="').concat(t, '">\n            <span class="sp_pptw"></span>\n        </span>\n      ')
                        }).join("\n");
                    return '\n        <div class="sp_cont scroller_wrap">\n          <div class="scroller_cont">\n            '.concat(t && t.length ? r : o, '\n          </div>\n        </div>\n        <div class="sp_pages_pts">\n            ').concat(i.length > 1 ? s : "", "\n        </div>\n      ")
                },
                stickersSelectTab: function(e, t) {
                    var n = window.cur;
                    if (!window.isNewMail && n.tabScroller && !n.tabScroller.canClick()) return !1;
                    var i = I("stickers_panel"),
                        a = g("sp_body", i),
                        r = g("sp_tab_selected", i);
                    n.scroller && n.scroller.destroy(), x(a, G.getStickersTabHTML(t)), n.scroller && n.scroller.init(), e || (e = g("sp_tab" + t, i)), S("sp_tab_selected", r), y("sp_tab_selected", e);
                    var o = b(i),
                        s = o + P(i),
                        l = k(),
                        c = l + E();
                    return (o < l || s > c) && L(i), n.tabScroller && n.tabScroller.showElem(e), StickersAnimation && StickersAnimation.loadAutoplayAnimationStickers(), window.isNewMail && G.onStickersTabSelected(), !1
                },
                addRecentSticker: function(e, t, n) {
                    var i = window.cur,
                        a = A("sticker_item", e);
                    if (i.stickers && a) {
                        var r = Object.keys(i.stickers).reduce(function(e, n) {
                            return e || i.stickers[n].find(function(e) {
                                return G.fromStickerToObject(e).id === t
                            })
                        }, null);
                        if (!r) throw new Error("Sticker ".concat(t, " not found"));
                        var o = G.fromStickerToObject(r),
                            s = o.id,
                            l = o.size,
                            c = o.url,
                            u = o.animationUrl;
                        i.stickers[-1] = i.stickers[-1] || [], i.stickers[-1] = i.stickers[-1].filter(function(e) {
                            return G.fromStickerToObject(e).id !== s
                        }), i.stickers[-1].unshift(G.fromObjectToSticker({
                            id: s,
                            size: l,
                            url: c,
                            animationUrl: u,
                            recent: 1,
                            ref: "recent"
                        })), i.stickers[-1] = i.stickers[-1].filter(function(e, t) {
                            return t < (window.isNewMail ? 16 : 8)
                        }), n && G.stickersSelectTab(!1, -1)
                    }
                },
                sendSticker: function(e, t, n, i) {
                    if (window.isNewMail && G.onStickerClick(t, i)) return G.addRecentSticker(e, t, !1), !1;
                    var a = window.cur;
                    if (a.scroller && !a.scroller.canClick()) return !1;
                    G.stickersToggle(e, !1);
                    var r = I("write_submit"),
                        o = {
                            lock: !0,
                            url_params: {
                                media: "sticker" + t,
                                _af: V()
                            }
                        };
                    if (n && !i && (o.url_params.media_from = "recent"), a.ref && (o.url_params.ref = a.ref, a.ref = void 0), a.refSource && (o.url_params.ref_source = a.refSource, a.refSource = void 0), !i) {
                        var s = H(e, "href");
                        s && (i = s.split("sticker_referrer=")[1].split("&")[0])
                    }
                    return i && (o.url_params.sticker_referrer = i), G.addRecentSticker(e, t, n), r ? z.click(r, U({
                        save: !0
                    }, q), o) : (r = I("nc_submit")) ? z.click(r, {}, o) : void 0
                },
                toggleMarkAsAds: function(e, t) {
                    _(t);
                    var n = $("input[name='from_group']");
                    if (!n || n.checked) {
                        var i = $("input", e);
                        i.checked = !i.checked;
                        var a = $("input[name='mute_notifications']");
                        a && (a.checked = i.checked, a.disabled = i.checked), G.checkCopyright()
                    }
                },
                toggleSender: function(e, t) {
                    t.stopPropagation(), t.preventDefault();
                    var n = e.querySelector("input");
                    n.checked = !n.checked;
                    var i = {
                            group: [],
                            user: ["marked_as_ads", "signed", "close_comments", "mute_notifications"]
                        },
                        a = $("input[name='marked_as_ads']");
                    $$(".Control.Control_type_checkbox.Row").forEach(function(e) {
                        if (!v("Control__blocked", e)) {
                            var t = e.querySelector("input[name]");
                            if ("from_group" !== t.name) n.checked && !i.group.includes(t.name) ? t.disabled = !n.checked : !n.checked && i.user.includes(t.name) && (t.disabled = !n.checked), "mute_notifications" === t.name && a && a.checked && (t.disabled = !0);
                            else {
                                var r = $(".header__user"),
                                    o = $(".header__group"),
                                    s = $("#select-timer"),
                                    l = $("input[name=postpone]"),
                                    c = $("input#add_post_btn");
                                if (n.checked ? (r.classList.add("header_hidden"), o.classList.remove("header_hidden"), s.style.display = "inline-block", l.disabled = !1) : (r.classList.remove("header_hidden"), o.classList.add("header_hidden"), s.style.display = "none", l.disabled = !0), c) {
                                    var u = c.value;
                                    c.value = c.dataset.value, c.dataset.value = u
                                }
                            }
                        }
                    }), G.checkCopyright()
                },
                checkCopyright: function() {
                    var e = $("input[name='marked_as_ads']"),
                        t = $("input[name='from_group']"),
                        n = I("select-copyright"),
                        i = $('input[name="copyright"]'),
                        a = $(".create_post__source-option");
                    if (n) {
                        var r = $(".Icon", a),
                            o = $(".Btn", a),
                            s = $(".Btn__text", o);
                        e && e.checked && (!t || t.checked) ? (hide(n), H(o, "disabled", !0), a.classList.add("create_post__source-option--disabled"), s.innerHTML = getLang("mobile_wall_post_copyright_add_button"), r.classList.remove("Icon_edit"), r.classList.add("Icon_audio_plus")) : (H(o, "disabled", !1), a.classList.remove("create_post__source-option--disabled"), i.value ? (setStyle(n, "display", "inline-block"), s.innerHTML = getLang("mobile_wall_post_copyright_edit_button"), r.classList.remove("Icon_audio_plus"), r.classList.add("Icon_edit")) : (s.innerHTML = getLang("mobile_wall_post_copyright_add_button"), r.classList.remove("Icon_edit"), r.classList.add("Icon_audio_plus")))
                    }
                }
            },
            Q = G;
        t.default = Q, window.post = G
    },
    HDU4: function(e, t, n) {
        "use strict";
        var i, a = (i = n("u+Ht")) && i.__esModule ? i : {
            default: i
        };
        window.Archive = a.default
    },
    HGMY: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), Object.defineProperty(t, "MailPreSendList__Msg", {
            enumerable: !0,
            get: function() {
                return i.MailPreSendList__Msg
            }
        }), Object.defineProperty(t, "getElem", {
            enumerable: !0,
            get: function() {
                return a.getElem
            }
        }), Object.defineProperty(t, "setMsgs", {
            enumerable: !0,
            get: function() {
                return a.setMsgs
            }
        }), Object.defineProperty(t, "addMsg", {
            enumerable: !0,
            get: function() {
                return a.addMsg
            }
        }), Object.defineProperty(t, "removeMsg", {
            enumerable: !0,
            get: function() {
                return a.removeMsg
            }
        }), Object.defineProperty(t, "getMsg", {
            enumerable: !0,
            get: function() {
                return a.getMsg
            }
        }), Object.defineProperty(t, "onMsgClick", {
            enumerable: !0,
            get: function() {
                return a.onMsgClick
            }
        }), t.default = void 0;
        var i = function(e) {
                if (e && e.__esModule) return e;
                var t = r();
                if (t && t.has(e)) return t.get(e);
                var n = {};
                if (null != e) {
                    var i = Object.defineProperty && Object.getOwnPropertyDescriptor;
                    for (var a in e)
                        if (Object.prototype.hasOwnProperty.call(e, a)) {
                            var o = i ? Object.getOwnPropertyDescriptor(e, a) : null;
                            o && (o.get || o.set) ? Object.defineProperty(n, a, o) : n[a] = e[a]
                        }
                }
                n.default = e, t && t.set(e, n);
                return n
            }(n("E5Ij")),
            a = n("4KUl");

        function r() {
            if ("function" != typeof WeakMap) return null;
            var e = new WeakMap;
            return r = function() {
                return e
            }, e
        }
        var o = i.default;
        t.default = o
    },
    HHQA: function(e, t, n) {
        "use strict";
        var i;
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var a = ((i = n("2fRN")) && i.__esModule ? i : {
            default: i
        }).default;
        t.default = a
    },
    "HN+/": function(e, t, n) {
        var i = n("vOyG"),
            a = i.length,
            r = 1,
            o = 3,
            s = 8;

        function l(e, t, n) {
            e[n] !== t[n] && (t[n] = e[n], e[n] ? t.setAttribute(n, "") : t.removeAttribute(n))
        }
        e.exports = function(e, t) {
            var n = e.nodeType,
                c = e.nodeName;
            n === r && function(e, t) {
                for (var n = t.attributes, i = e.attributes, a = null, r = null, o = null, s = null, l = i.length - 1; l >= 0; --l) s = i[l], o = s.name, a = s.namespaceURI, r = s.value, a ? (o = s.localName || o, t.getAttributeNS(a, o) !== r && t.setAttributeNS(a, o, r)) : t.hasAttribute(o) ? t.getAttribute(o) !== r && ("null" === r || "undefined" === r ? t.removeAttribute(o) : t.setAttribute(o, r)) : t.setAttribute(o, r);
                for (var c = n.length - 1; c >= 0; --c) !1 !== (s = n[c]).specified && (o = s.name, (a = s.namespaceURI) ? (o = s.localName || o, e.hasAttributeNS(a, o) || t.removeAttributeNS(a, o)) : e.hasAttributeNS(null, o) || t.removeAttribute(o))
            }(e, t);
            n !== o && n !== s || t.nodeValue !== e.nodeValue && (t.nodeValue = e.nodeValue);
            "INPUT" === c ? function(e, t) {
                var n = e.value,
                    i = t.value;
                l(e, t, "checked"), l(e, t, "disabled"), n !== i && (t.setAttribute("value", n), t.value = n);
                "null" === n && (t.value = "", t.removeAttribute("value"));
                e.hasAttributeNS(null, "value") ? "range" === t.type && (t.value = n) : t.removeAttribute("value")
            }(e, t) : "OPTION" === c ? function(e, t) {
                l(e, t, "selected")
            }(e, t) : "TEXTAREA" === c && function(e, t) {
                var n = e.value;
                n !== t.value && (t.value = n);
                if (t.firstChild && t.firstChild.nodeValue !== n) {
                    if ("" === n && t.firstChild.nodeValue === t.placeholder) return;
                    t.firstChild.nodeValue = n
                }
            }(e, t);
            ! function(e, t) {
                for (var n = 0; n < a; n++) {
                    var r = i[n];
                    e[r] ? t[r] = e[r] : t[r] && (t[r] = void 0)
                }
            }(e, t)
        }
    },
    HON1: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("jZPa")) && i.__esModule ? i : {
            default: i
        };
        var r = a.default;
        t.default = r, window.OwnerRow = a.default
    },
    HPEO: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("dVvW")) && i.__esModule ? i : {
            default: i
        };
        n("Ziv7");
        var r = a.default;
        t.default = r, window.uMailWrite = a.default
    },
    "HQL/": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i = o(n("TYsd")),
            a = o(n("9y81")),
            r = o(n("p5n7"));

        function o(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        var s = function(e) {
            return {
                class: "VotingForm__option",
                "data-created": e.is_created ? "1" : "0",
                inner: [(0, r.default)({
                    class: "VotingForm__optionInput",
                    name: e.name,
                    value: e.value,
                    on_key_down: "VotingForm._onOptionKeyDown"
                }), {
                    class: "VotingForm__optionRemove",
                    onclick: ["VotingForm._onOptionRemoveClick", "this"],
                    inner: i.default.wrap((0, a.default)({
                        icon: "close16"
                    }))
                }]
            }
        };
        t.default = s
    },
    HV9n: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("gLrT")) && i.__esModule ? i : {
            default: i
        };
        var r = function(e, t, n, i) {
            for (var r = window.lang, o = t[e.groupingId], s = [], l = 0; l < e.variants.length; l++) {
                var c = e.variants[l],
                    u = [];
                if (0 === l)
                    for (var d in o) {
                        for (var f = !0, h = Object.keys(o[d]), p = 0; p < h.length; p++) {
                            var A = h[p];
                            o[d][A] && (f = !1)
                        }
                        u.push({
                            tag: "option",
                            inner: n[d].name,
                            value: d,
                            attrs: {
                                selected: d == c,
                                disabled: f
                            }
                        })
                    } else if (1 === l) {
                        var m = o[e.variants[0]];
                        for (var _ in m) u.push({
                            tag: "option",
                            inner: n[_].name,
                            value: _,
                            attrs: {
                                selected: _ == c,
                                disabled: !m[_]
                            }
                        })
                    }
                s.push({
                    inner: [{
                        tag: "span",
                        class: "CartItem__propertyName",
                        inner: "".concat(n[c].propertyName, ":")
                    }, {
                        tag: "select",
                        class: "CartItem__variantSelect",
                        onchange: ["Cart.view.changeVariant", "this", e, l],
                        attrs: {
                            value: c
                        },
                        inner: u
                    }]
                })
            }
            return {
                class: ["CartItem", e.deleted ? "CartItem--deleted" : ""],
                attrs: {
                    "data-id": e.id
                },
                inner: [{
                    tag: "a",
                    href: e.url,
                    inner: {
                        tag: "img",
                        class: "CartItem__thumb",
                        attrs: {
                            src: e.thumbUrl
                        }
                    }
                }, {
                    class: "CartItem__info",
                    inner: [{
                        tag: "a",
                        class: "CartItem__title",
                        inner: e.name,
                        href: e.url
                    }, {
                        class: "CartItem__price",
                        inner: Wd.wrap((0, a.default)(e.totalPrice, i))
                    }, e.deleted ? null : {
                        class: "CartItem__properties",
                        inner: [s, {
                            inner: [{
                                tag: "span",
                                class: "CartItem__propertyName",
                                inner: "".concat(r.mobile_market_cart_quantity, ":")
                            }, {
                                tag: "a",
                                class: "CartItem__quantity",
                                inner: langNumeric(e.quantity, r.mobile_market_items_count_short),
                                onclick: ["Cart.view.openQuantityChangePopup", e.id]
                            }]
                        }]
                    }, e.deleted ? {
                        class: "CartItem__deletedInfo",
                        inner: [{
                            class: "CartItem__deletedText",
                            inner: r.mobile_market_cart_out_of_stock
                        }, {
                            tag: "a",
                            inner: r.mobile_market_contact_with_merchant,
                            href: "/product".concat(e.fullId, "?act=write&hash=").concat(e.mailHash)
                        }]
                    } : null]
                }, {
                    class: "wi_actions_btn",
                    onclick: ["Cart.view.openDeletePopup", e.id],
                    inner: {
                        class: "i_icon"
                    }
                }]
            }
        };
        t.default = r
    },
    HbvZ: function(e, t, n) {
        "use strict";
        var i = o(n("TYsd")),
            a = o(n("TcbA")),
            r = n("fdw3");

        function o(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }

        function s() {
            var e = $("#DeviceInfo");
            i.default.hydrate(a.default, (0, r.getState)("DeviceInfo"), e)
        }
        o(n("Cbap")).default.getRouter().addRoute("/?device", s), window.initDeviceInfo = s
    },
    HdGT: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.ready = v, t.getItems = function() {
            return (0, r.queueGetItems)(_)
        }, t.send = g, t.retry = function(e, t) {
            var n = (0, r.queueGetItem)(_, e);
            t && (n.data = t(n.data));
            (0, r.queueRemoveItem)(_, e), g(n.data.data)
        }, t.remove = function(e, t) {
            (0, r.queueRemoveItem)(_, e), "silent" !== t && m(e)
        }, t.QUEUE_NAME = t.QUEUE_MAX_FAILS = t.onMessageRemove = t.onMessage = t.onErrorMessage = t.onCaptcha = t.onFailed = t.onSent = t.onStopped = void 0;
        var i, a = function(e) {
                if (e && e.__esModule) return e;
                var t = c();
                if (t && t.has(e)) return t.get(e);
                var n = {};
                if (null != e) {
                    var i = Object.defineProperty && Object.getOwnPropertyDescriptor;
                    for (var a in e)
                        if (Object.prototype.hasOwnProperty.call(e, a)) {
                            var r = i ? Object.getOwnPropertyDescriptor(e, a) : null;
                            r && (r.get || r.set) ? Object.defineProperty(n, a, r) : n[a] = e[a]
                        }
                }
                n.default = e, t && t.set(e, n);
                return n
            }(n("W38l")),
            r = n("702z"),
            o = n("qHA9"),
            s = (i = n("+cqQ")) && i.__esModule ? i : {
                default: i
            },
            l = n("j80l");

        function c() {
            if ("function" != typeof WeakMap) return null;
            var e = new WeakMap;
            return c = function() {
                return e
            }, e
        }
        var u = (0, s.default)();
        t.onStopped = u;
        var d = (0, s.default)();
        t.onSent = d;
        var f = (0, s.default)();
        t.onFailed = f;
        var h = (0, s.default)();
        t.onCaptcha = h;
        var p = (0, s.default)();
        t.onErrorMessage = p;
        var A = (0, s.default)();
        t.onMessage = A;
        var m = (0, s.default)();
        t.onMessageRemove = m;
        t.QUEUE_MAX_FAILS = 5;
        var _ = "mail_send";

        function v() {
            return (0, r.queueWhenReady)(_)
        }

        function g(e) {
            v().then(function() {
                a.logQueueSize((0, r.queueGetSize)(_));
                var t = (0, o.sendDataToMessage)(e);
                (0, r.queueAddItem)(_, t.sendId, {
                    data: e
                }), A(t)
            })
        }
        t.QUEUE_NAME = _, (0, r.registerQueue)(_, {
            onSend: function(e, t) {
                ! function(e, t) {
                    e = Object.assign({}, e);
                    var n = "/mail",
                        i = "edit_message" === e.act;
                    i ? Object.keys(e).forEach(function(t) {
                        "attached_messages" !== t && "has_reply" !== t || delete e[t]
                    }) : (n = (0, l.makeUrl)("/mail", {
                        act: "send",
                        to: e.to,
                        from: e.from,
                        hash: e.hash,
                        _af: e._af,
                        ref: e.ref || "",
                        ref_source: e.ref_source || ""
                    }), Object.keys(e).forEach(function(t) {
                        "act" !== t && "to" !== t && "from" !== t && "hash" !== t && "_af" !== t || delete e[t]
                    }));
                    a.log(t, i ? "edit" : "send");
                    var s = function(e) {
                        a.mark(t, "server"), i && !e.was_modified && m(t), d(), (0, r.queueSignalSuccess)(_)
                    };
                    (0, o.mailRequest)(n, e).then(s, function e(n) {
                        var i = n.type,
                            l = n.code,
                            c = n.message,
                            u = n.data;
                        if (a.error(t, "server_send", i), "captcha" !== i && a.clean(t), "server" === i && l && l !== o.UNKNOWN_ERROR) return c && p(c), void(0, r.queueSignalStop)(_);
                        "captcha" !== i ? ((0, r.queueSignalFail)(_), f()) : h(u, function(n) {
                            if (!n) return a.clean(t), void(0, r.queueSignalStop)(_);
                            n.then(s, e)
                        })
                    })
                }(t.data, e)
            },
            onStopped: u,
            maxFails: 5
        })
    },
    HpMb: function(e, t, n) {
        "use strict";
        var i = n("OcsD");
        window.GroupsMenu = {}, window.GroupsMenu._onClick = function(e, t, n, a, r) {
            return (0, i.statlogsValueEvent)("groups_menu_item_click", e, t, n, a, r), !0
        }
    },
    HwqD: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i = o(n("TYsd")),
            a = o(n("z9sQ")),
            r = o(n("9y81"));

        function o(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        var s = function(e) {
            var t = window.lang,
                n = e.count;
            return i.default.html({
                class: [a.default.class("Bell", {
                    empty: !n
                }), "al_menu"],
                href: e.url,
                onclick: e.onclick,
                "aria-label": t.mobile_notifications_title,
                "data-header": t.mobile_notifications_title,
                "data-skiponclick": 1,
                inner: [i.default.html((0, r.default)({
                    mix: "Bell__icon",
                    icon: "bell"
                })), {
                    class: "Bell__counter",
                    inner: n,
                    tag: "em"
                }]
            })
        };
        t.default = s
    },
    "I/8u": function(e, t, n) {
        "use strict";
        var i = function(e) {
            if (e && e.__esModule) return e;
            var t = a();
            if (t && t.has(e)) return t.get(e);
            var n = {};
            if (null != e) {
                var i = Object.defineProperty && Object.getOwnPropertyDescriptor;
                for (var r in e)
                    if (Object.prototype.hasOwnProperty.call(e, r)) {
                        var o = i ? Object.getOwnPropertyDescriptor(e, r) : null;
                        o && (o.get || o.set) ? Object.defineProperty(n, r, o) : n[r] = e[r]
                    }
            }
            n.default = e, t && t.set(e, n);
            return n
        }(n("WTJf"));

        function a() {
            if ("function" != typeof WeakMap) return null;
            var e = new WeakMap;
            return a = function() {
                return e
            }, e
        }
        Object.assign(i.default, {
            setValue: function(e, t) {
                if (!e) return;
                var n = (0, i.OvalIsHidden)(t);
                e.innerText = t, e.classList.toggle(r.hidden, n)
            }
        });
        var r = {
            hidden: "Oval_hidden"
        }
    },
    I2ZF: function(e, t) {
        for (var n = [], i = 0; i < 256; ++i) n[i] = (i + 256).toString(16).substr(1);
        e.exports = function(e, t) {
            var i = t || 0,
                a = n;
            return [a[e[i++]], a[e[i++]], a[e[i++]], a[e[i++]], "-", a[e[i++]], a[e[i++]], "-", a[e[i++]], a[e[i++]], "-", a[e[i++]], a[e[i++]], "-", a[e[i++]], a[e[i++]], a[e[i++]], a[e[i++]], a[e[i++]], a[e[i++]]].join("")
        }
    },
    I7Du: function(e, t, n) {
        "use strict";
        var i;
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var a = ((i = n("ZYIi")) && i.__esModule ? i : {
            default: i
        }).default;
        t.default = a
    },
    IXdz: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("TYsd")) && i.__esModule ? i : {
            default: i
        };

        function r(e, t) {
            for (var n = 0; n < t.length; n++) {
                var i = t[n];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        }
        var o = function() {
            function e(t) {
                ! function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, e);
                var n = window.lang;
                this.store = Stories.getStore(), this.viewers = this.store.viewers[t] || [], this.viewersState = this.store.viewersState[t] || [], this.questions = this.store.questions[t] || [], this.replies = this.store.replies[t] || [];
                var i = this.viewersState,
                    a = i.count,
                    r = i.repliesCountText,
                    o = i.authorCountText;
                this.raw_id = t, this.count = a, this.countText = langNumeric(this.count, n.mobile_stories_views_title), this.repliesCountText = r, this.repliesAuthorCountText = o, this.questions ? this.title = n.mobile_stories_views_title_interactions : this.viewers.length && this.replies.length ? this.title = n.mobile_stories_views_title_replies_and_views : this.viewers.length ? this.title = this.countText : this.replies.length && (this.title = n.mobile_stories_views_title_replies)
            }
            var t, n, i;
            return t = e, (n = [{
                key: "render",
                value: function() {
                    var e = this,
                        t = window.winToUtf,
                        n = this.store.questions[this.raw_id] || [];
                    return a.default.html({
                        class: Bem.class("Views", {
                            short: !(this.viewers.length || !this.replies.length)
                        }),
                        inner: [{
                            class: "Views__overlay",
                            onclick: "Stories.hideViews();"
                        }, {
                            class: "Views__header",
                            inner: [{
                                class: "Views__table",
                                inner: [{
                                    class: "Views__cell",
                                    inner: {
                                        class: "Views__title",
                                        inner: this.title
                                    }
                                }]
                            }, {
                                class: "Views__close",
                                onclick: "Stories.hideViews();"
                            }]
                        }, {
                            class: "Views__body ScrollView",
                            onscroll: 'Stories.onScrollViews(this, "'.concat(this.raw_id, '")'),
                            ontouchmove: "event.stopPropagation();",
                            inner: [this.replies.length ? {
                                class: "Views__replies",
                                inner: [{
                                    class: "Views__table Views__repliesHeader",
                                    inner: [{
                                        class: "Views__cell Views__repliesCount",
                                        inner: this.repliesCountText
                                    }, this.repliesAuthorCountText ? {
                                        class: "Views__cell Views__repliesAuthorCount",
                                        inner: this.repliesAuthorCountText
                                    } : null]
                                }, {
                                    class: "Views__repliesBody",
                                    onscroll: 'Stories.onRepliesScroll(event, "'.concat(this.raw_id, '")'),
                                    inner: {
                                        class: "Views__repliesScroll",
                                        inner: this.replies.map(function(n) {
                                            return {
                                                class: "Views__reply ".concat(n.has_new ? "Views__reply_new" : ""),
                                                onclick: 'Stories.openReplies("'.concat(n.owner_id, "/").concat(n.list, '", "').concat(e.raw_id, '");'),
                                                inner: [{
                                                    class: "Views__replyAvatarWrap",
                                                    inner: {
                                                        class: "Views__replyAvatar",
                                                        src: n.avatar,
                                                        tag: "img"
                                                    }
                                                }, {
                                                    class: "Views__replyName",
                                                    inner: n.name ? t(n.name) : lang.mobile_stories_reply_you
                                                }]
                                            }
                                        })
                                    }
                                }]
                            } : null, n.length ? {
                                class: "Views__questions",
                                inner: [{
                                    class: "Views__table Views__questionsHeader",
                                    inner: [{
                                        class: "Views__cell Views__questionsTitle",
                                        inner: lang.mobile_stories_question_title
                                    }, {
                                        class: "Views__cell Views__questionsLink",
                                        inner: lang.mobile_stories_question_show_all,
                                        onclick: 'Stories.showQuestions("'.concat(this.raw_id, '")')
                                    }]
                                }, {
                                    class: "Views__questionsBody",
                                    inner: {
                                        class: "Views__questionsScroll",
                                        inner: n.slice(0, 10).map(function(e) {
                                            return {
                                                class: "Question",
                                                "data-id": e.id,
                                                inner: [{
                                                    class: "Question__content",
                                                    inner: [{
                                                        href: e.author.link,
                                                        class: "Question__author",
                                                        inner: e.isAnonymous ? lang.mobile_stories_question_anonymous : e.author.name,
                                                        onClick: "Stories.sendAnalyticsEvent('question_go_to_author', { questionId: ".concat(e.id, " });")
                                                    }, {
                                                        class: Bem.class("Question__text", {
                                                            small: e.text.length > 40
                                                        }),
                                                        inner: e.text
                                                    }]
                                                }, {
                                                    class: Bem.class("Question__actions", {
                                                        published: e.isPublished
                                                    }),
                                                    inner: lang.mobile_stories_question_actions,
                                                    onclick: ["Stories.openQuestionActions", e.id]
                                                }]
                                            }
                                        })
                                    }
                                }]
                            } : null, {
                                class: "Views__viewers",
                                inner: [this.viewers.length && (n.length || this.replies.length) ? {
                                    class: "Views__viewersHeader",
                                    inner: this.countText
                                } : null, {
                                    class: "Views__viewersBody",
                                    inner: this.viewers.map(function(e) {
                                        return {
                                            class: "Views__viewer",
                                            href: e.href,
                                            inner: {
                                                class: "Views__table",
                                                inner: [{
                                                    class: "Views__cell Views__cell_avatar",
                                                    inner: {
                                                        class: "Views__avatar",
                                                        src: e.photo,
                                                        tag: "img"
                                                    }
                                                }, {
                                                    class: "Views__cell Views__cell_name",
                                                    inner: {
                                                        class: "Views__name",
                                                        inner: e.name
                                                    }
                                                }]
                                            }
                                        }
                                    })
                                }]
                            }, this.viewersState.nextFrom ? {
                                class: "Views__viewersLoader",
                                onclick: 'Stories.loadViews("'.concat(this.raw_id, '")')
                            } : null]
                        }]
                    })
                }
            }]) && r(t.prototype, n), i && r(t, i), e
        }();
        t.default = o
    },
    IrFw: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.QRPhotoPosting = function() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
            return (0, i.default)({
                on_overlay_click_native: "QRPhotoPosting.back();",
                class: "QRPhotoPosting",
                content: [{
                    class: "QRPhotoPosting__img",
                    inner: Wd.wrap(e.svg)
                }, {
                    class: "QRPhotoPosting__title",
                    inner: Wd.wrap(e.title)
                }]
            })
        }, t.QRPhotoPostingButton = function() {
            return {
                inner: [(0, a.default)({
                    sprite: "common",
                    name: "qr_24"
                })],
                class: "QRPhotoPosting__button",
                onclick: "QRPhotoPosting.show();",
                tag: "div"
            }
        };
        var i = r(n("r/ag")),
            a = r(n("Y6JH"));

        function r(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
    },
    Ivtq: function(e, t, n) {
        "use strict";
        var i = n("PovR"),
            a = window,
            r = (a.addClass, a.FeedAssistanceStats),
            o = a.page,
            s = a.geByClass1,
            l = a.onDOMReady,
            c = a.FeedNotifications;
        l(h), o.onChange(h);
        var u = "feedAssistance_pushNotificationsSwitch",
            d = "enable_browser_notifications",
            f = "m_push_switch";

        function h() {
            window.pushNotifier && pushNotifier.canBeEnabled().then(function(e) {
                return e && PushNotifier.getPermission() === i.PUSH_NOTIFIER_PERMISSION_DEFAULT
            }).then(function(e) {
                if (e) {
                    c.addWebActionAcceptHandler(d, p), c.addWebActionDeclineHandler(d, A);
                    var t = s(u);
                    if (!t) return;
                    r.registerTrackingCls(u), r.register(t, "feed")
                }
            })
        }

        function p(e) {
            return PushNotifier.requestPermission().then(function(t) {
                var n, a = !0;
                return unlockButton(e), t === i.PUSH_NOTIFIER_PERMISSION_DEFAULT ? a = !1 : (n = t === i.PUSH_NOTIFIER_PERMISSION_GRANTED ? r.EVENTS.SUB_EVENT_ENABLE_PUSH : r.EVENTS.SUB_EVENT_DECLINE_PUSH, _(e, n), m(), a)
            }, function() {
                return A(e)
            })
        }

        function A(e) {
            return unlockButton(e), _(e, r.EVENTS.SUB_EVENT_DECLINE_PUSH), m(), !0
        }

        function m() {
            var e = s(u);
            remove(e)
        }

        function _(e, t) {
            r.dispatchEvent({
                type: r.EVENTS.EVENT_FEED_ASSISTANCE,
                data: r.serializeEventData(r.EVENTS.EVENT_FEED_ASSISTANCE, e, f, t)
            })
        }
    },
    "J/W8": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("z9sQ")) && i.__esModule ? i : {
            default: i
        };
        var r = function(e) {
            var t = e.bcg,
                n = t.type;
            return {
                class: a.default.class("VotingBcg", {
                    type: n
                }),
                style: "photo" === n ? o(t) : "gradient" === n ? s(t) : "tile" === n ? l(t) : null,
                inner: "photo" === n ? c(e) : null
            }
        };

        function o(e) {
            return u({
                "background-color": e.color
            })
        }

        function s(e) {
            var t, n = [],
                i = e.points.length;
            for (t = 0; t < i; t++) {
                var a = e.points[t];
                n.push("".concat(a.color, " ").concat(a.percent, "%"))
            }
            var r = e.angle - 90;
            return n = n.join(", "), u({
                background: "linear-gradient(".concat(r, "deg, ").concat(n, ")")
            })
        }

        function l(e) {
            var t = e.image,
                n = e.width,
                i = e.height;
            return u({
                "background-image": "url('".concat(t, "')"),
                "background-position": "top center",
                "background-size": "".concat(n, "px ").concat(i, "px")
            })
        }

        function c(e) {
            var t = e.bcg,
                n = t.photo,
                i = t.color;
            return {
                class: "VotingBcg__photoBox",
                style: u({
                    height: "".concat(e.photoHeight, "px")
                }),
                inner: [{
                    class: "VotingBcg__photoImage",
                    style: u({
                        "background-image": "url('".concat(n, "')")
                    })
                }, {
                    class: "VotingBcg__photoGradient",
                    style: u({
                        background: "linear-gradient(to bottom, ".concat("rgba(255, 255, 255, 0)", ", ").concat(i, ")")
                    })
                }]
            }
        }

        function u(e) {
            var t, n = [],
                i = Object.keys(e),
                a = i.length;
            for (t = 0; t < a; t++) {
                var r = i[t],
                    o = e[r];
                n.push("".concat(r, ": ").concat(o, ";"))
            }
            return n.join(" ")
        }
        t.default = r
    },
    JAxc: function(e, t, n) {
        "use strict";
        var i;
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var a = ((i = n("K3lA")) && i.__esModule ? i : {
            default: i
        }).default;
        t.default = a
    },
    JDVM: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("MHaq")) && i.__esModule ? i : {
            default: i
        };
        window.AddCopyrightPopup = a.default;
        var r = a.default;
        t.default = r
    },
    JYMJ: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.ActionsPanel = u, t.default = void 0;
        var i = l(n("Y6JH")),
            a = l(n("VRji")),
            r = l(n("p5n7")),
            o = l(n("29dZ")),
            s = n("fdw3");

        function l(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }

        function c() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
            return {
                class: "SharePanel SharePanel-header SharePanel--active ShareHeaderConversationsPanel",
                "aria-hidden": "false",
                "data-name": "ShareHeaderConversationsPanel",
                inner: [{
                    "aria-label": (0, s.getLang)("mobile_close"),
                    onclick: "cur.share.destroy()",
                    role: "button",
                    class: "SharePanel-header__close",
                    inner: (0, i.default)("common", "cancel_24")
                }, {
                    class: "SharePanel-headerText",
                    inner: [{
                        class: "SharePanel-headerText__label",
                        inner: (0, s.getLang)("mobile_like_publish_head_title")
                    }, {
                        class: "SharePanel-headerText__receivers"
                    }]
                }, {
                    class: "SharePanel-headerRight",
                    inner: [{
                        "aria-label": (0, s.getLang)("mobile_search"),
                        class: "SharePanel-headerRight__search",
                        role: "button",
                        inner: (0, i.default)("wall", "search_24"),
                        onclick: "cur.share.toggleConversationsSearch(true)"
                    }, e.supportsExternalShare ? {
                        "aria-label": (0, s.getLang)("mobile_share_external"),
                        class: "SharePanel-headerRight__externalShare",
                        role: "button",
                        inner: "iOS" === e.platform ? (0, i.default)("wall", "share_external_ios_24") : (0, i.default)("wall", "share_external_android_24"),
                        onclick: "cur.share.externalShare()"
                    } : null]
                }]
            }
        }

        function u(e) {
            var t = e.buttons,
                n = e.options,
                i = "boolean" != typeof e.active || e.active,
                a = !(n.can_to_own || n.can_to_club || n.can_bookmark);
            return {
                class: "ActionsPanel SharePanel ".concat(i ? "SharePanel--active" : ""),
                "data-name": "ActionsPanel",
                "aria-hidden": !i,
                style: a ? "display: none;" : "",
                inner: t.map(function(e) {
                    if (e) return function(e) {
                        var t = e.href ? "a" : "div",
                            n = e.onclick,
                            i = {
                                tag: t,
                                role: "button",
                                tabindex: -1,
                                href: e.href,
                                onclick: n,
                                class: "ActionsPanel-button ActionsPanel-button--".concat(e.target),
                                inner: [{
                                    class: "ActionsPanel-button__icon",
                                    inner: e.icon
                                }, {
                                    class: "ActionsPanel-button__label",
                                    inner: e.label
                                }]
                            };
                        "boolean" == typeof e["aria-pressed"] && (i["aria-pressed"] = e["aria-pressed"] + "");
                        return i
                    }(e)
                })
            }
        }
        var d = function(e) {
            var t = e.can_bookmark,
                n = e.is_bookmarked,
                l = e.object,
                d = e.list,
                f = e.from,
                h = e.post_from,
                p = e.supportsExternalShare,
                A = e.isVKApp,
                m = e.targetOwnOnClick,
                _ = (0, s.makeUrl)("/wall", {
                    act: "add",
                    share_box: 1,
                    is_vk_app: A,
                    object: l,
                    list: d,
                    from: f,
                    post_from: h
                });
            return {
                inner: [{
                    inner: [c({
                        platform: e.platform,
                        supportsExternalShare: p
                    }), {
                        class: "SharePanel ShareHeaderSearch ShareHeaderConversationsSearchPanel",
                        "aria-hidden": "true",
                        "data-name": "ShareHeaderConversationsSearchPanel",
                        role: "search",
                        inner: (0, r.default)({
                            autocomplete: !1,
                            onblur: 'cur.share.clearSearch(event, "peers", true)',
                            prefix: {
                                text: {
                                    role: "button",
                                    inner: (0, i.default)("wall", "search_outline_16")
                                }
                            },
                            postfix: {
                                text: {
                                    class: "ShareHeaderSearch__clear",
                                    role: "button",
                                    onclick: 'cur.share.clearSearch(event, "peers")',
                                    inner: (0, i.default)("common", "cancel_outline_24")
                                }
                            },
                            class: "ShareHeaderConversationsSearchPanel__input",
                            id: "ShareHeaderConversationsSearchPanel__input",
                            placeholder: (0, s.getLang)("mobile_search"),
                            spellcheck: !1
                        })
                    }, {
                        class: "SharePanel SharePanel-header ShareHeaderGroupsPanel",
                        "aria-hidden": "true",
                        "data-name": "ShareHeaderGroupsPanel",
                        inner: [{
                            "aria-label": (0, s.getLang)("mobile_back"),
                            onclick: "cur.share.toggleGroupsPanel(false)",
                            role: "button",
                            class: "SharePanel-header__close",
                            inner: (0, i.default)("common", "back_24")
                        }, {
                            class: "SharePanel-headerText",
                            inner: [{
                                class: "SharePanel-headerText__label",
                                inner: (0, s.getLang)("mobile_like_publish_head_title")
                            }]
                        }, {
                            class: "SharePanel-headerRight",
                            inner: [{
                                class: "SharePanel-headerRight__search",
                                role: "button",
                                inner: (0, i.default)("wall", "search_24"),
                                onclick: 'cur.share.setActivePanel(this, "ShareHeaderGroupsSearchPanel", true)'
                            }]
                        }]
                    }, {
                        class: "SharePanel ShareHeaderSearch ShareHeaderGroupsSearchPanel",
                        "aria-hidden": "true",
                        "data-name": "ShareHeaderGroupsSearchPanel",
                        role: "search",
                        inner: (0, r.default)({
                            autocomplete: !1,
                            onblur: 'cur.share.clearSearch(event, "group", true)',
                            prefix: {
                                text: {
                                    "aria-label": (0, s.getLang)("mobile_search"),
                                    role: "button",
                                    inner: (0, i.default)("wall", "search_outline_16")
                                }
                            },
                            postfix: {
                                text: {
                                    class: "ShareHeaderSearch__clear",
                                    onclick: 'cur.share.clearSearch(event, "group")',
                                    inner: (0, i.default)("common", "cancel_outline_24")
                                }
                            },
                            class: "ShareHeaderGroupsSearchPanel__input",
                            id: "ShareHeaderGroupsSearchPanel__input",
                            placeholder: (0, s.getLang)("mobile_search"),
                            spellcheck: !1
                        })
                    }],
                    class: "SharePanelRoot ShareHeader",
                    tag: "header"
                }, {
                    id: "Share__input",
                    style: "display: none;",
                    tag: "input"
                }, {
                    inner: [{
                        class: "ShareConversations SharePanel SharePanel--active filter_peer_wrap",
                        "data-name": "ShareConversations",
                        "aria-hidden": "false",
                        role: "group",
                        id: "ShareConversations"
                    }, {
                        class: "ShareGroups SharePanel",
                        "data-name": "ShareGroups",
                        "aria-hidden": "true",
                        role: "group",
                        id: "ShareGroups"
                    }],
                    class: "SharePanelRoot ShareLists",
                    tag: "section"
                }, {
                    inner: [u({
                        active: !0,
                        options: e,
                        buttons: [e.can_to_own ? {
                            target: "own",
                            label: (0, s.getLang)("mobile_share_target_own"),
                            onclick: m || "cur.share.go('".concat(_, "')"),
                            icon: (0, i.default)("wall", "repost_outline_28")
                        } : null, e.can_to_club ? {
                            target: "group",
                            label: (0, s.getLang)("mobile_share_target_group"),
                            icon: (0, i.default)("wall", "users_outline_28")
                        } : null, t ? {
                            target: "bookmark",
                            "aria-pressed": n,
                            label: n ? (0, s.getLang)("mobile_share_target_bookmark_active") : (0, s.getLang)("mobile_share_target_bookmark"),
                            icon: (0, i.default)("wall", e.is_bookmarked ? "favorite_28" : "favorite_outline_28")
                        } : null]
                    }), {
                        class: "SharePanel MessagePanel",
                        "aria-hidden": "true",
                        "data-name": "MessagePanel",
                        inner: [(0, r.default)({
                            tabindex: -1,
                            autocomplete: !1,
                            class: "MessagePanel__input",
                            on_click: ["cur.share.expandMessage"],
                            placeholder: (0, s.getLang)("mobile_share_message_placeholder"),
                            spellcheck: !1,
                            readonly: !0,
                            disabled: !0
                        }), (0, o.default)({
                            stretch: !0,
                            size: "large",
                            inner: (0, s.getLang)("mobile_share_message_single"),
                            on_click: "cur.share.sendMessage(event)",
                            use_native_onclick: !0
                        })]
                    }, {
                        class: "SharePanel ExpandedMessagePanel",
                        "aria-hidden": "true",
                        "data-name": "ExpandedMessagePanel",
                        inner: [{
                            class: "ExpandedMessagePanel__textareaWrap",
                            inner: [(0, a.default)({
                                placeholder: (0, s.getLang)("mobile_share_message_placeholder"),
                                rows: 1
                            }), {
                                class: "ExpandedMessagePanelSend",
                                inner: (0, i.default)("common", "send_active_24")
                            }]
                        }]
                    }, {
                        class: "SharePanel ProcessingPanel",
                        "aria-hidden": "true",
                        "data-name": "ProcessingPanel",
                        inner: [{
                            class: "ProcessingPanel__icon ProcessingPanel__icon--loading",
                            inner: (0, i.default)("wall", "loading_40")
                        }, {
                            class: "ProcessingPanel__label",
                            inner: (0, s.getLang)("mobile_share_state_progress")
                        }]
                    }],
                    class: "SharePanelRoot ShareBottom",
                    tag: "footer"
                }],
                class: "Share",
                "aria-role": "dialog",
                "aria-label": (0, s.getLang)("mobile_like_publish_head_title"),
                hidden: "false",
                tabindex: "-1",
                tag: "div"
            }
        };
        t.default = d
    },
    JaXn: function(e, t, n) {
        "use strict";
        var i;
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var a = ((i = n("/nhM")) && i.__esModule ? i : {
            default: i
        }).default;
        t.default = a
    },
    JbZL: function(e, t, n) {
        "use strict";

        function i(e, t) {
            for (var n = 0; n < t.length; n++) {
                var i = t[n];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.AverageAlgorithm = void 0;
        var a = function() {
            function e() {
                ! function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, e), this.clear()
            }
            var t, n, a;
            return t = e, (n = [{
                key: "push",
                value: function(e) {
                    this._count++, this._accum += e
                }
            }, {
                key: "get",
                value: function() {
                    return this._accum / this._count
                }
            }, {
                key: "clear",
                value: function() {
                    this._count = 0, this._accum = 0
                }
            }]) && i(t.prototype, n), a && i(t, a), e
        }();
        t.AverageAlgorithm = a
    },
    "Jd+f": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i = n("UxAg"),
            a = o(n("29dZ")),
            r = o(n("K3lA"));

        function o(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        var s = function(e, t, n, o, s, l) {
            var c = l.$btn;

            function u() {
                var a = (0, i.$)(".MarketItem__cartQuantity"),
                    s = Number(a.dataset.value) + 1;
                a.dataset.value = s, a.innerHTML = s, a.classList.remove("MarketItem__cartQuantity--empty"), (0, i.$)(".MarketItem__addButtonWrapper").innerHTML = Wd.html((0, r.default)({
                    item_id: t,
                    group_id: n,
                    quantity: e,
                    hash: o
                }))
            }
            s ? a.default.setLoading(c, !0) : u(), ajax.post("/market.php", {
                _ajax: !0,
                act: "cart_change_quantity",
                item_id: t,
                group_id: n,
                quantity: e,
                hash: o
            }, {
                onDone: function() {
                    s && (a.default.setLoading(c, !1), u())
                },
                onFail: function() {
                    return a.default.setLoading(c, !1)
                }
            })
        };
        t.default = s
    },
    JuPy: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.isMvk = function() {
            return !!window.isMVK
        }
    },
    K0hv: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t._getLayer = g, t.default = void 0;
        var i = c(n("TYsd")),
            a = function(e) {
                if (e && e.__esModule) return e;
                var t = l();
                if (t && t.has(e)) return t.get(e);
                var n = {};
                if (null != e) {
                    var i = Object.defineProperty && Object.getOwnPropertyDescriptor;
                    for (var a in e)
                        if (Object.prototype.hasOwnProperty.call(e, a)) {
                            var r = i ? Object.getOwnPropertyDescriptor(e, a) : null;
                            r && (r.get || r.set) ? Object.defineProperty(n, a, r) : n[a] = e[a]
                        }
                }
                n.default = e, t && t.set(e, n);
                return n
            }(n("a0wW")),
            r = c(n("Po+v")),
            o = c(n("z9sQ")),
            s = n("OcsD");

        function l() {
            if ("function" != typeof WeakMap) return null;
            var e = new WeakMap;
            return l = function() {
                return e
            }, e
        }

        function c(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }

        function u(e) {
            return function(e) {
                if (Array.isArray(e)) {
                    for (var t = 0, n = new Array(e.length); t < e.length; t++) n[t] = e[t];
                    return n
                }
            }(e) || function(e) {
                if (Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e)) return Array.from(e)
            }(e) || function() {
                throw new TypeError("Invalid attempt to spread non-iterable instance")
            }()
        }

        function d() {
            return (d = Object.assign || function(e) {
                for (var t = 1; t < arguments.length; t++) {
                    var n = arguments[t];
                    for (var i in n) Object.prototype.hasOwnProperty.call(n, i) && (e[i] = n[i])
                }
                return e
            }).apply(this, arguments)
        }
        var f = browser.meizu || browser.mi || browser.uc_mini || 0 !== browser.ios && browser.ios < 10 || browser.chrome && browser.version.split(".")[0] < 53,
            h = !f && !!a.default.getFlag(a.FLAG_MP4);
        onDOMReady(function() {
            A.onUpdate(), page.onChange(function() {
                A.onUpdate()
            })
        });
        var p = {
                gifs: [],
                currentAutoplayElement: null,
                ignore: []
            },
            A = {
                isBadBrowser: f,
                isMp4Supports: function() {
                    return h
                },
                openPopup: function(e, t) {
                    var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};
                    if (this.autoplayTest(), e && cancelEvent(e), _(n) && n.needConfirm) {
                        var i = v(n, t.getAttribute("data-media"));
                        return domInsertBefore(i, t), void r.default.open(i, !0)
                    }
                    var a = d({}, nav.getQuery(), {
                        z: "doc" + n.raw + "/" + (n.hash || "")
                    });
                    nav.path, (0, s.obj2qs)(a), nav.hash;
                    photo.zopen(null, null, n.raw, "", {
                        no_push: !1,
                        isDoc: !0,
                        hasVideo: n.hasVideo,
                        hash: n.hash
                    })
                },
                init: function(e) {
                    zlayer.create(g()), zlayer.open()
                },
                close: function() {
                    var e = d({}, nav.getQuery());
                    delete e.z;
                    var t = nav.path + (0, s.obj2qs)(e) + nav.hash;
                    nav.go(t, null, {
                        push_only: !1,
                        nav_incr: !0
                    })
                },
                confirm: function(e, t) {
                    cur.loadedGifs[t] = !0, r.default.close(e), (0, s.geBySel1)('[data-media="'.concat(t, '"]')).click()
                },
                autoplayTest: function() {
                    a.default.detectAutoplay().then(function(e) {
                        h = a.default.getFeatures().mp4 && e && a.default.getFlag(a.FLAG_MP4) && !f
                    })
                },
                activateGIF: function() {
                    if ("/mail" !== nav.path) {
                        var e = scrollTop(),
                            t = e + window.innerHeight,
                            n = e + window.innerHeight / 2,
                            i = {};
                        Array.from(p.gifs || []).forEach(function(a) {
                            var r = getXY(a)[1],
                                o = r >= e && r <= t,
                                s = Math.abs(n - r);
                            o && (i[s] = a)
                        });
                        var a = i[Math.min.apply(Math, u(Object.keys(i)))];
                        a ? a.classList.contains("current_gif") || -1 === p.ignore.indexOf(a) && (post.toggleGif(a, !1, !1, !0), p.currentAutoplayElement = a) : post.hidePlayingGifs(!1, !0)
                    }
                },
                onUpdate: function() {
                    a.default.getFlag(a.FLAG_GIF_AUTOPLAY) && (p.gifs = u(Array.from($$(".doc_preview_rows_1 .doc_preview_gif") || [])), onBodyScroll((0, s.throttle)(A.activateGIF, 200)))
                },
                getState: function() {
                    return p
                },
                setState: function(e, t) {
                    p[e] = t
                }
            };

        function m(e, t, n) {
            return {
                class: ["Popup__button", o.default.class("Btn", {
                    theme: t || "regular"
                })],
                tag: "button",
                inner: e,
                onclick: n
            }
        }

        function _(e) {
            return cur.loadedGifs || (cur.loadedGifs = {}), !cur.loadedGifs[e.raw]
        }

        function v(e) {
            return (0, s.ceFromString)(i.default.html((0, r.default)({
                scrollable: !0,
                header: {
                    title: getLang("mobile_wall_gif_size_warning_popup_title")
                },
                content: [getLang("mobile_wall_gif_size_warning").replace("{size}", e.size), {
                    class: "Popup__buttons",
                    inner: [m(getLang("mobile_continue"), "regular", 'Gif.confirm(this, "'.concat(e.raw, '")')), m(getLang("mobile_cancel"), "secondary", "Popup.close(this)")]
                }]
            })))
        }

        function g() {
            var e = '<img class="zpv_img" alt="">';
            return arguments.length > 0 && void 0 !== arguments[0] && arguments[0] && (e = '<video class="zpv_img" alt="" autoplay preload="metadata" crossorigin="anonymous" poster="/images/blank.gif" webkit-playsinline playsinline controls loop muted>'), '\n    <div id="z_photoview">\n      <div class="zpv_siblings">\n        <div id="zpv_left" class="zpv_thumb_item">\n          <img class="zpv_img" alt="">\n        </div>\n        <div id="zpv_right" class="zpv_thumb_item">\n          <img class="zpv_img" alt="">\n        </div>\n      </div>\n      <div class="zpv_body">\n        <div id="zpv_center" class="zpv_thumb_item">\n          '.concat(e, '\n        </div>\n      </div>\n      <div class="zpv_close_msg_wrap">\n        <div class="zpv_close_msg"> ').concat(lang.mobile_zphoto_move_to_close, '</div>\n      </div>\n      <div class="zpv_controls">\n        <div class="mhead zpv_header">\n          <a class="zpv_close_btn" onclick="return photoview.closePhoto(event);"><i class="zpv_close_icon"></i></a>\n          <div class="hb_wrap"><h1 id="zpv_summary" class="hb_btn mh_header"></h1></div>\n        </div>\n      </div>\n      <div class="zpv_tags"></div>\n      <div class="zpva zpv_crop"><div class="zpv_crop_box"></div><div class="zpv_crop_loading"></div></div>\n    </div>\'\n  ')
        }
        window.Gif = A;
        var y = A;
        t.default = y
    },
    K3lA: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("29dZ")) && i.__esModule ? i : {
            default: i
        };
        var r = function(e) {
            var t = window.lang;
            return e.quantity ? {
                tag: "table",
                attrs: {
                    cellpadding: 0,
                    cellspacing: 0,
                    border: 0
                },
                class: "MarketItem__cartActions",
                inner: {
                    tag: "tr",
                    inner: [{
                        tag: "td",
                        class: "MarketItem__quantityButtonWrapper",
                        inner: (0, a.default)({
                            stretch: !0,
                            size: "large",
                            class: "MarketItem__quantityButton",
                            inner: [{
                                inner: langNumeric(e.quantity, t.mobile_market_cart_quantity_button_title).replace("{quantity}", e.quantity)
                            }, {
                                class: "MarketItem__quantityButtonHint",
                                inner: t.mobile_market_cart_quantity_button_hint
                            }],
                            url: "/cart".concat(e.group_id)
                        })
                    }, {
                        tag: "td",
                        inner: (0, a.default)({
                            stretch: !0,
                            size: "large",
                            theme: "secondary",
                            class: "MarketItem__incrementButton",
                            inner: t.mobile_market_cart_quantity_button_inc,
                            on_click: ["MarketItem.addToCart", e.quantity + 1, e.item_id, e.group_id, e.hash, !1]
                        })
                    }]
                }
            } : (0, a.default)({
                stretch: !0,
                size: "large",
                inner: t.mobile_market_cart_quantity_button_add,
                on_click: ["MarketItem.addToCart", e.quantity + 1, e.item_id, e.group_id, e.hash, !0]
            })
        };
        t.default = r
    },
    KFXn: function(e, t, n) {
        "use strict";

        function i(e, t) {
            for (var n = 0; n < t.length; n++) {
                var i = t[n];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.PeakAlgorithm = void 0;
        var a = function() {
            function e() {
                ! function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, e), this.clear()
            }
            var t, n, a;
            return t = e, (n = [{
                key: "push",
                value: function(e) {
                    this._max = Math.max(this._max, Math.abs(e))
                }
            }, {
                key: "get",
                value: function() {
                    return this._max
                }
            }, {
                key: "clear",
                value: function() {
                    this._max = 0
                }
            }]) && i(t.prototype, n), a && i(t, a), e
        }();
        t.PeakAlgorithm = a
    },
    KMpi: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("Pfrj")) && i.__esModule ? i : {
            default: i
        };
        var r = a.default;
        t.default = r, window.Avatar = a.default
    },
    KWgi: function(e, t, n) {
        "use strict";
        n("9CLW"), n("7lzo"), n("MSf/"), n("yVRv"), n("Cxv5"), n("BX0V")
    },
    KiYr: function(e, t, n) {
        "use strict";
        var i;
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var a = ((i = n("LmmP")) && i.__esModule ? i : {
            default: i
        }).default;
        t.default = a
    },
    Kz56: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.ONLINE_SEEN_LONG_AGO = t.ONLINE_SEEN_LAST_MONTH = t.ONLINE_SEEN_LAST_WEEK = t.ONLINE_SEEN_RECENTLY = void 0;
        t.ONLINE_SEEN_RECENTLY = "recently";
        t.ONLINE_SEEN_LAST_WEEK = "last_week";
        t.ONLINE_SEEN_LAST_MONTH = "last_month";
        t.ONLINE_SEEN_LONG_AGO = "long_ago"
    },
    L1lF: function(e, t, n) {
        "use strict";
        var i = n("5WJ6");
        window.initSharePage = i.initSharePage
    },
    L9Nh: function(module, exports, __webpack_require__) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: !0
        }), exports.QueueManager = void 0;
        var _Utils = __webpack_require__("OcsD");

        function _extends() {
            return (_extends = Object.assign || function(e) {
                for (var t = 1; t < arguments.length; t++) {
                    var n = arguments[t];
                    for (var i in n) Object.prototype.hasOwnProperty.call(n, i) && (e[i] = n[i])
                }
                return e
            }).apply(this, arguments)
        }

        function _classCallCheck(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function _defineProperties(e, t) {
            for (var n = 0; n < t.length; n++) {
                var i = t[n];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        }

        function _createClass(e, t, n) {
            return t && _defineProperties(e.prototype, t), n && _defineProperties(e, n), e
        }
        var QUEUE_CREATION_TIME_INDEX = 0,
            QUEUE_TIMESTAMP_INDEX = 1,
            QUEUE_KEY_INDEX = 2,
            QUEUE_CALLBACK_INDEX = 3,
            INCORRECT_KEY_OR_TIMESTAMP_ERROR_CODE = 2,
            KEY_IS_BLOCKED_BY_ANOTHER_REQUEST_ERROR_CODE = 4,
            TRANSPORT_FRAME_ID = "queue_transport_frame",
            QueueManager = function() {
                function QueueManager() {
                    _classCallCheck(this, QueueManager)
                }
                return _createClass(QueueManager, null, [{
                    key: "addQueue",
                    value: function(e, t) {
                        QueueManager.queues[e.key] = [vkNow(), e.ts, e.key, t]
                    }
                }, {
                    key: "start",
                    value: function() {
                        QueueManager.started || (QueueManager.createFrame(QueueManager.check), QueueManager.started = !0)
                    }
                }, {
                    key: "check",
                    value: function check() {
                        var _this = this,
                            params = {
                                act: "a_check",
                                ts: curNotifier.timestamp,
                                key: curNotifier.key,
                                id: curNotifier.uid,
                                wait: 25
                            },
                            addQueues = [],
                            now = vkNow();
                        Object.keys(QueueManager.queues).forEach(function(e) {
                            var t = QueueManager.queues[e],
                                n = t[QUEUE_CREATION_TIME_INDEX],
                                i = t[QUEUE_TIMESTAMP_INDEX];
                            now - n > 3e4 && !e.match(/nccts/) ? delete QueueManager.queues[t] : (params.ts += "_" + i, params.key += e, addQueues.push(e))
                        }), curNotifier.lpMakeRequest(curNotifier.frame_url, params, function(text) {
                            try {
                                var response = eval("(" + text + ")"),
                                    main_response = response,
                                    addResponse, addQueue, busy = 0;
                                if (isArray(response))
                                    for (main_response = response.shift(), curNotifier.timestamp = main_response.ts;
                                        (addResponse = response.shift()) && (addQueue = addQueues.shift(), addQueue);) addResponse.failed !== INCORRECT_KEY_OR_TIMESTAMP_ERROR_CODE || addResponse.err !== KEY_IS_BLOCKED_BY_ANOTHER_REQUEST_ERROR_CODE ? addResponse.failed ? delete QueueManager.queues[addQueue] : QueueManager.callQueue(addQueue, addResponse) : busy |= 1;
                                else if (response.failed)
                                    for (; addQueue = addQueues.shift();) delete QueueManager.queues[addQueue];
                                busy || (clearTimeout(curNotifier.lpCheckTO), curNotifier.lpCheckTO = setTimeout(QueueManager.check.bind(_this), curNotifier.request_timeout || 1e3), curNotifier.error_timeout = Math.max(1, (curNotifier.error_timeout || 1) / 1.5))
                            } catch (e) {
                                curNotifier.error_timeout = curNotifier.error_timeout || 1, clearTimeout(curNotifier.lp_error_to), curNotifier.lp_error_to = setTimeout(QueueManager.check.bind(_this), 1e3 * curNotifier.error_timeout), curNotifier.error_timeout < 64 && (curNotifier.error_timeout *= 2)
                            }
                        }, function() {
                            return !0
                        })
                    }
                }, {
                    key: "init",
                    value: function(e) {
                        window.curNotifier = _extends({}, e), QueueManager.initialized = !0, delete curNotifier.makeRequest
                    }
                }, {
                    key: "createFrame",
                    value: function(e) {
                        re(TRANSPORT_FRAME_ID), (0, _Utils.createIframe)({
                            id: TRANSPORT_FRAME_ID,
                            name: TRANSPORT_FRAME_ID,
                            src: window.curNotifier.frame_path
                        });
                        var t = setInterval(function() {
                            curNotifier.lpMakeRequest && (clearInterval(t), e())
                        }, 500);
                        setTimeout(function() {
                            return clearInterval(t)
                        }, 1e4)
                    }
                }, {
                    key: "callQueue",
                    value: function(e, t) {
                        var n = QueueManager.queues[e];
                        if (Array.isArray(n) && n.length) {
                            n[QUEUE_TIMESTAMP_INDEX] = t.ts;
                            var i = n[QUEUE_CALLBACK_INDEX];
                            isFunction(i) && i(n[QUEUE_KEY_INDEX], t)
                        }
                    }
                }]), QueueManager
            }();
        exports.QueueManager = QueueManager, QueueManager.queues = {}, QueueManager.started = !1, QueueManager.initialized = !1, window.QueueManager = QueueManager
    },
    LBNP: function(e, t, n) {
        "use strict";
        var i = n("OcsD"),
            a = "_si_container_loading",
            r = "StoriesArchive--loaded",
            o = {};

        function s(e) {
            var t = $$(".StoryThumb[data-time]", e);
            if (t) return t.forEach(function(e) {
                var t = 1e3 * e.getAttribute("data-time"),
                    n = new Date(t);
                if (o[n.toDateString()] && o[n.toDateString()] !== t) {
                    var i = geByClass1("StoryThumb-date", e);
                    re(i)
                } else o[n.toDateString()] = t
            }), e
        }
        window.initStoriesArchive = function() {
            var e = 0,
                t = !1,
                n = $(".StoriesArchive"),
                o = n.classList.contains(r);
            s(n), (0, i.initAutoScroll)(function() {
                var t = $$(".StoryThumb");
                return e = t.length, t[t.length - 1]
            }, function() {
                if (t || o) return !1;
                var i = $(".StoriesArchive-stories");
                i.classList.add(a), t = !0, ajax.post("/id".concat(vk.id, "?act=stories"), {
                    offset: e,
                    _ajax: !0
                }, {
                    onDone: function(e) {
                        var l = ce("div");
                        l.innerHTML = e.html, l = s(l), i.innerHTML += l.innerHTML, i.classList.remove(a), e.more || (o = !0, n.classList.add(r)), t = !1
                    }
                })
            })
        }
    },
    LTt1: function(e, t, n) {
        "use strict";
        var i = need("page"),
            a = need("audio"),
            r = need("onDOMReady"),
            o = need("audioplayer"),
            s = need("AudioSpecialForYou");

        function l() {
            u(), a.onInit(u), a.onSelect(u), i.onChange(u)
        }

        function c() {
            d() ? o.playPause() : o.playFirst(), u()
        }

        function u() {
            s.setPlaying(a.playing() && d())
        }

        function d() {
            var e = o.getCurrentElem();
            return e && !!e.closest(s.selector)
        }
        window.uAudioBlock = {}, r(l), uAudioBlock._onSpecialPlayAllClick = c
    },
    LmmP: function(e, t, n) {
        "use strict";

        function i(e) {
            return {
                inner: [e.text || e.inner],
                class: [e.class, Bem.class("Alert", {
                    theme: e.theme
                })].join(" "),
                tag: "div"
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.Alert = i, t.default = void 0;
        var a = i;
        t.default = a
    },
    LpA2: function(e, t, n) {
        "use strict";

        function i(e, t) {
            return function(e) {
                if (Array.isArray(e)) return e
            }(e) || function(e, t) {
                if (!(Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e))) return;
                var n = [],
                    i = !0,
                    a = !1,
                    r = void 0;
                try {
                    for (var o, s = e[Symbol.iterator](); !(i = (o = s.next()).done) && (n.push(o.value), !t || n.length !== t); i = !0);
                } catch (e) {
                    a = !0, r = e
                } finally {
                    try {
                        i || null == s.return || s.return()
                    } finally {
                        if (a) throw r
                    }
                }
                return n
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance")
            }()
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.getConnectionType = function() {
            var e = navigator.connection;
            if (!e) return "";
            var t = e.effectiveType,
                n = e.downlink;
            switch (t) {
                case "slow-2g":
                    return "GPRS";
                case "2g":
                    return "EDGE";
                case "3g":
                    return "3G";
                case "4g":
                    return n > 8 ? "wi-fi" : "LTE"
            }
            return ""
        }, t.saveNavigationStatEvent = function(e) {
            var t = e.storyRawId,
                n = e.source,
                r = e.action,
                o = i(t.split("_"), 2),
                s = o[0],
                l = o[1];
            "reply" === n && (n = "replies_list");
            var c = {
                ownerId: s,
                storyId: l,
                source: n,
                action: r
            };
            a.push(c)
        }, t.serializeNavigationStats = function() {
            var e = a.map(function(e) {
                return [e.ownerId, e.storyId, e.source, e.action].join(",")
            }).join(";");
            return a = [], e
        }, t.saveViewerStartTime = function(e) {
            var t = e.storyRawId,
                n = e.source,
                a = e.time,
                o = i(t.split("_"), 2),
                s = o[0],
                l = o[1],
                c = {
                    ownerId: s,
                    storyId: l,
                    source: n,
                    time: a
                };
            r.push(c)
        }, t.serializeLoadingStats = function() {
            var e = r.map(function(e) {
                return [e.ownerId, e.storyId, e.source, e.time].join(",")
            }).join(";");
            return r = [], e
        }, t.hasStatToSerialize = void 0;
        var a = [];
        var r = [];
        t.hasStatToSerialize = function() {
            return r.length || a.length
        }
    },
    M2vk: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("AWn4")) && i.__esModule ? i : {
            default: i
        };
        n("9RP+");
        var r = a.default;
        t.default = r, window.uCurConvoTyping = a.default
    },
    "M6/v": function(e, t, n) {
        "use strict";
        var i, a = (i = n("HwqD")) && i.__esModule ? i : {
                default: i
            },
            r = n("UxAg");
        Object.assign(a.default, {
            setCount: function(e) {
                (0, r.$$)(s.bell).forEach(function(t) {
                    var n = t.$(s.counter);
                    t.classList.toggle(o.empty, !e), n.innerText = e
                })
            }
        });
        var o = {
                empty: "Bell_empty"
            },
            s = {
                bell: ".Bell",
                counter: ".Bell__counter"
            }
    },
    M9zQ: function(e, t, n) {
        "use strict";
        var i = n("UxAg"),
            a = (need("attr"), need("geByClass1"), need("preventEvent")),
            r = need("Popup");
        window.SendMoneyForm = {}, SendMoneyForm._onAmountChange = f, SendMoneyForm._onSubmit = _, SendMoneyForm._onRecommAmountChange = h, SendMoneyForm._onAutoAcceptToggle = v, SendMoneyForm._onNoAmountToggle = g, SendMoneyForm._onChooseCardClick = d, SendMoneyForm._onChooseCardCancelClick = u, SendMoneyForm._onChooseCardContinueClick = l, SendMoneyForm._onCardSelect = c;
        var o = {
                form: "sendMoneyForm",
                errorMin: "sendMoneyForm_error_min",
                errorMax: "sendMoneyForm_error_max",
                addCardVisible: "sendMoneyForm_addCardVisible",
                requestedVisible: "sendMoneyForm_requestedVisible",
                recommErrorMin: "sendMoneyForm_recommErrorMin",
                recommErrorMax: "sendMoneyForm_recommErrorMax",
                noAmount: "sendMoneyForm_noAmount",
                autoAccept: "sendMoneyForm_autoAccept"
            },
            s = {
                form: ".sendMoneyForm",
                cardsPopup: ".sendMoneyForm__cardsPopup",
                amountInput: ".sendMoneyForm__input_amount",
                recommInput: ".sendMoneyForm__recommAmountInput input",
                requestAmount: ".sendMoneyForm__amountNote_requestAmount"
            };

        function l() {
            var e = (0, i.$)('.Control__native[name="card"]:checked').value,
                t = (0, i.$)('.Control__native[name="card"]:checked ~ .Control__label').innerText;
            (0, i.$)('input[name="accept_card"]').value = e, (0, i.$)('input[name="accept_card"]').setAttribute("data-value", e), (0, i.$)(".sendMoneyForm__chooseCard").innerText = t, r.close()
        }

        function c(e) {
            var t = "-1" === e.value;
            (0, i.$)(s.form).classList.toggle(o.addCardVisible, t)
        }

        function u() {
            r.close()
        }

        function d() {
            var e = (0, i.$)(s.cardsPopup);
            r.open(e)
        }

        function f(e) {
            e || (e = (0, i.$)('input[name="amount"]')), A(e), m(e, 6);
            var t = e.closest(s.form),
                n = "1" === t.getAttribute("data-is-chat-request"),
                a = Number(e.value),
                r = Number(t.getAttribute("data-max-amount"));
            if (t.classList.remove(o.errorMin), t.classList.remove(o.errorMax), n || a > r && t.classList.add(o.errorMax), n) {
                var l = p(),
                    c = Number(t.getAttribute("data-min-amount")) * (l ? 2 : 1),
                    u = function(e, t) {
                        var n = (0, i.$)('input[name="amount"]').closest(s.form),
                            a = Number(n.getAttribute("data-min-amount")),
                            r = Number(n.getAttribute("data-max-amount")),
                            o = Number(n.getAttribute("data-chat-members-count")),
                            l = Math.ceil(e / (o - (t ? 0 : 1)));
                        return Math.min(r, Math.max(a, l))
                    }(a, l);
                if ((0, i.$)(s.recommInput).value = u, t.classList.remove(o.recommErrorMax), t.classList.remove(o.recommErrorMin), !c || a >= c) {
                    var d = l ? a - u : a;
                    (0, i.$)(s.requestAmount).innerText = d, t.classList.add(o.requestedVisible)
                } else t.classList.remove(o.requestedVisible)
            }
        }

        function h(e) {
            A(e), m(e, 6);
            var t = e.closest(s.form),
                n = Number(e.value),
                i = t.getAttribute("data-max-amount");
            t.classList.remove(o.recommErrorMax), t.classList.remove(o.recommErrorMin), n > i && t.classList.add(o.recommErrorMax)
        }

        function p() {
            var e = (0, i.$)('input[name="participiate"]');
            return e && e.checked
        }

        function A(e) {
            e.value = parseInt(e.value, 10) || ""
        }

        function m(e, t) {
            e.value = e.value.slice(0, t)
        }

        function _(e, t) {
            var n = t.$(s.amountInput).value,
                r = Number(n),
                l = Number(t.getAttribute("data-min-amount")),
                c = Number(t.getAttribute("data-max-amount")),
                u = "1" === t.getAttribute("data-is-chat-request"),
                d = !1;
            (t.classList.remove(o.errorMin), t.classList.remove(o.errorMax), u && (t.classList.remove(o.recommErrorMax), t.classList.remove(o.recommErrorMin)), (0, i.$)(s.form).classList.contains(o.noAmount)) || (r < l * (!!u && p() ? 2 : 1) || !n || n !== r.toString() ? (t.classList.add(o.errorMin), d = !0) : r > c && !u && (t.classList.add(o.errorMax), d = !0));
            if (u) {
                var f = t.$(s.recommInput).value,
                    h = Number(f);
                h < l || !f || f !== h.toString() ? (t.classList.add(o.recommErrorMin), d = !0) : h > c && (t.classList.add(o.recommErrorMax), d = !0)
            }
            if (d) a(e), stopEvent(e);
            else {
                a(e), stopEvent(e), t.insertAdjacentHTML("beforeend", '<input id="submit" type="submit" style="display: none" />');
                var A = (0, i.$)("#submit");
                ajax.click(A)
            }
        }

        function v(e) {
            (0, i.$)(s.form).classList.toggle(o.autoAccept, e.checked), e.checked ? (0, i.$)('input[name="accept_card"]').value = (0, i.$)('input[name="accept_card"]').getAttribute("data-value") : (0, i.$)('input[name="accept_card"]').value = ""
        }

        function g(e) {
            (0, i.$)(s.form).classList.toggle(o.noAmount, e.checked)
        }
    },
    MESj: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i = s(n("TuGt")),
            a = n("fKzu"),
            r = n("OcsD"),
            o = s(n("wMVj"));

        function s(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        var l, c = ["/restore", "/login", "/join*", "/", "/settings", "/album*", "/terms", "/privacy", "/payments*", "/attachments*", "/pages*", "/blog*", "/about", "/privacy", "/jobs", "/dev", "/legal", "/data_protection", "/safety", "/activation*", "/licence", "/agelimits"];

        function u() {
            l && l.classList.remove(i.default.class.open)
        }

        function d() {
            l && l.classList.add(i.default.class.open)
        }
        onDOMReady(function() {
            ! function e(t) {
                !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1] || (l = geByClass1(i.default.class.btn), page.onChange(e.bind(this))), t = t ? t.split("?")[0] : o.default.path, !/^\/photo/.test(t) && u(), (0, a.isForbiddenPage)(t, c) || o.default.getQuery("z") ? u() : d()
            }(null, !1)
        });
        var f = {
            _onCloseClick: function(e) {
                i.default._onCloseClick(e)
            },
            show: d,
            hide: u,
            processOpenInNativeApp: function(e, t, n, i) {
                var a = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : {};
                a = a || {}, o.default.onMenuItemClick(n), o.default.openInNativeApp(i, t, e), (0, r.statlogsValueEvent)("utm_open_in_native_app_button", "clicked", a.utm_source, a.utm_param, a.utm_medium, a.utm_time)
            }
        };
        t.default = f
    },
    MHaq: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i = n("OcsD"),
            a = function(e) {
                if (e && e.__esModule) return e;
                var t = s();
                if (t && t.has(e)) return t.get(e);
                var n = {};
                if (null != e) {
                    var i = Object.defineProperty && Object.getOwnPropertyDescriptor;
                    for (var a in e)
                        if (Object.prototype.hasOwnProperty.call(e, a)) {
                            var r = i ? Object.getOwnPropertyDescriptor(e, a) : null;
                            r && (r.get || r.set) ? Object.defineProperty(n, a, r) : n[a] = e[a]
                        }
                }
                n.default = e, t && t.set(e, n);
                return n
            }(n("Po+v")),
            r = o(n("p5n7"));
        o(n("z9sQ"));

        function o(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }

        function s() {
            if ("function" != typeof WeakMap) return null;
            var e = new WeakMap;
            return s = function() {
                return e
            }, e
        }

        function l(e, t) {
            var n = ge("select-copyright"),
                i = $('input[name="copyright"]'),
                a = $(".create_post__source-option"),
                r = $(".Btn__text", a);
            if (e) {
                n.style.display = "inline-block";
                var o = 'posting.openCopyright(event, true, "'.concat(t, '", "').concat(e, '")');
                attr(n, "onclick", o), attr(a, "onclick", o), r.innerHTML = getLang("mobile_wall_post_copyright_edit_button")
            } else {
                var s = 'posting.openCopyright(event, false, "'.concat(t, '", "').concat(e, '")');
                attr(a, "onclick", s), setStyle(a, "display", "table"), r.innerHTML = getLang("mobile_wall_post_copyright_add_button"), hide(n)
            }
            val(i, e), post.checkCopyright()
        }
        var c = {
            open: function() {
                var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0],
                    t = arguments.length > 1 ? arguments[1] : void 0,
                    n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : "",
                    o = new RegExp("{link}(.*){/link}"),
                    s = o.exec(getLang("mobile_wall_post_copyright_mb_text"))[1],
                    l = "/@adminsclub-citation?from=".concat(encodeURIComponent(nav.cur)),
                    c = getLang("mobile_wall_post_copyright_mb_text").replace(o, "<a onclick=\"Popup.close(this); nav.go('".concat(l, '\', null)" href="').concat(l, '">').concat(s, "</a>")),
                    u = (0, a.default)({
                        class: "AddCopyrightPopup",
                        header: {
                            title: e ? getLang("mobile_wall_post_copyright_mb_title_text_edit") : getLang("mobile_wall_post_copyright_mb_title_text")
                        },
                        content: {
                            inner: [!e && {
                                tag: "span",
                                inner: Wd.wrap(c)
                            }, (0, r.default)({
                                class: "AddCopyrightPopup__input",
                                placeholder: getLang("mobile_post_copyright_input_placeholder"),
                                value: n,
                                spellcheck: !1,
                                on_key_down: ["posting.saveSource", t]
                            }), {
                                class: "AddCopyrightPopup__error",
                                style: "display: none;"
                            }, {
                                class: "Popup__buttons",
                                inner: [Btn({
                                    class: "Popup__button",
                                    inner: e ? getLang("mobile_wall_post_copyright_edit_button") : getLang("mobile_wall_post_copyright_add_button"),
                                    theme: "regular",
                                    use_native_onclick: !0,
                                    on_click: 'posting.saveSource("'.concat(t, '", this)')
                                }), e ? Btn({
                                    class: "Popup__button",
                                    inner: getLang("mobile_delete"),
                                    theme: "secondary",
                                    use_native_onclick: !0,
                                    on_click: 'posting.deleteSource(event, this, "'.concat(t, '")')
                                }) : {}]
                            }]
                        }
                    });
                a.default.open(Wd.elem(u), !0);
                var d = $(".AddCopyrightPopup__input input");
                d && (0, i.elfocus)(d)
            },
            submit: function(e, t, n) {
                var i = $(".Btn", n.parentNode);
                i.disabled = !0, ajax.post("/wall?act=check_copyright_link", {
                    _ajax: 1,
                    link: e
                }, {
                    onDone: function(e) {
                        var r = $(".AddCopyrightPopup__error");
                        e.status ? (n.classList.remove("TextInput_error"), hide(r), l(e.link, t), a.default.close(n)) : (n.classList.add("TextInput_error"), show(r), val(r, e.error)), post.saveDraft(null, t), i.disabled = !1
                    }
                })
            },
            remove: function(e, t) {
                t && a.default.close(t), l("", e), e && post.saveDraft(null, e)
            }
        };
        t.default = c
    },
    "MSf/": function(e, t, n) {
        "use strict";
        var i, a = (i = n("9CLW")) && i.__esModule ? i : {
            default: i
        };
        var r = window,
            o = r.setStyle,
            s = r.geByClass1;
        a.default.onPostMessage(function(e, t) {
            "resizeFrame" === e && o(s("pageMoneyTransfer__iframe"), "height", t.height + 40)
        })
    },
    MUoB: function(e, t, n) {
        "use strict";
        var i, a = (i = n("YhgQ")) && i.__esModule ? i : {
            default: i
        };
        window.uRegisterFloatBtn = a.default
    },
    Mc5h: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("2IoG")) && i.__esModule ? i : {
            default: i
        };
        var r = a.default;
        t.default = r, window.Brick = a.default
    },
    Mf5j: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.open = c, t.init = function() {
            onDOMReady(function() {
                c()
            })
        };
        var i = l(n("TYsd")),
            a = l(n("Po+v")),
            r = l(n("UvyM")),
            o = n("OcsD"),
            s = n("UxAg");

        function l(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }

        function c() {
            var e = window.lang,
                t = (0, s.$)(".pcont .service_msg_box");
            if (t) {
                var n = (0, s.$)(".service_msg", t).innerHTML;
                (0, o.remove)(t);
                var l = (0, a.default)({
                    class: "CopyrightPopup",
                    content: [{
                        inner: i.default.wrap(n)
                    }, {
                        class: "Popup__buttons",
                        inner: [(0, r.default)({
                            class: "Popup__button",
                            inner: e.mobile_zphoto_close,
                            theme: "regular",
                            on_click: "Popup.close(this)",
                            use_native_onclick: !0
                        })]
                    }]
                });
                a.default.open(i.default.elem(l), !0)
            }
        }
    },
    MjTa: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.init = function(e) {
            v && b();
            y(e)
        }, t.preventDocumentScroll = y, t.restoreDocumentScroll = function() {
            if (!v) return;
            v = !1, b(), 1 === g.length && (f.layoutOffset = null, V(), document.body.style.height = "");
            f.layoutElement = null, g.pop(), void(f = g.length ? g[g.length - 1] : null), f && V();
            removeEvent(window, "focusin", B), removeEvent(window, "focusout", R), removeEvent(document, "touchmove", x, {
                capture: !0
            }), removeEvent(document, "touchmove", O, {
                capture: !1
            }), removeEvent(window, "resize", P), removeEvent(window, "orientationchange", T), removeEvent(window, "resize", D), removeEvent(window, "scroll", I)
        }, t.cleanDocumentViews = b, t.allowScrolling = w, t.setScrollView = function(e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
            if (!(browser.iphone || browser.ipod || browser.ipad)) return;
            if (!1 === t.override && e.__ScrollView) return;
            if (!0 !== t.standalone) {
                if (!v) return;
                e.__ScrollView || f.scrollViews.push(e)
            }
            e.__ScrollView = {
                allowX: !1 !== t.allowX,
                allowY: !1 !== t.allowY,
                overscrollX: !1 !== t.overscrollX,
                overscrollY: !1 !== t.overscrollY,
                standalone: !0 === t.standalone
            }, f && (browser.wkwebview || (!1 !== t.topBanner && (e.__ScrollView.topBanner = t.topBanner || {
                hide: 30,
                show: 60
            }), addEvent(e, "scroll", C)), addEvent(e, "scroll", M));
            addEvent(e, "touchstart", k), addEvent(e, "touchmove", w), addEvent(e, "touchend", E)
        }, t.cleanScrollView = S, t.hideTopBanner = j, t.showTopBanner = F;
        var i = function(e) {
                if (e && e.__esModule) return e;
                var t = r();
                if (t && t.has(e)) return t.get(e);
                var n = {};
                if (null != e) {
                    var i = Object.defineProperty && Object.getOwnPropertyDescriptor;
                    for (var a in e)
                        if (Object.prototype.hasOwnProperty.call(e, a)) {
                            var o = i ? Object.getOwnPropertyDescriptor(e, a) : null;
                            o && (o.get || o.set) ? Object.defineProperty(n, a, o) : n[a] = e[a]
                        }
                }
                n.default = e, t && t.set(e, n);
                return n
            }(n("sdz3")),
            a = n("UxAg");

        function r() {
            if ("function" != typeof WeakMap) return null;
            var e = new WeakMap;
            return r = function() {
                return e
            }, e
        }
        var o, s, l, c, u, d, f, h = ".layout",
            p = !0,
            A = !1,
            m = "closed",
            _ = !1,
            v = !1,
            g = [];

        function y() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
            (browser.iphone || browser.ipod || browser.ipad) && (!0 !== e.stack && v || (f = {
                initialized: !1,
                scrollViews: []
            }, g.push(f), e.layoutElement && e.layoutElement.nodeType ? f.layoutElement = e.layoutElement : f.layoutElement = (0, a.$)(e.layoutElement || h)), !1 === e.topBanner ? f.topBanner = !1 : f.topBanner = !0, v || (v = !0, addEvent(window, "focusin", B), addEvent(window, "focusout", R), addEvent(document, "touchmove", x, {
                capture: !0
            }), addEvent(document, "touchmove", O, {
                capture: !1
            }), addEvent(window, "resize", P), browser.wkwebview || (addEvent(window, "orientationchange", T), requestAnimationFrame(function() {
                H() ? T(null, !0) : (P(), f && !f.topBanner ? requestAnimationFrame(j) : l || requestAnimationFrame(F))
            }))))
        }

        function b() {
            f.scrollViews.forEach(function(e) {
                return S(e)
            }), f.scrollViews = []
        }

        function w(e) {
            var t = e.currentTarget.__ScrollView;
            if ("prevented" !== t.state) {
                if (!("start" !== t.state || t.allowX && t.allowY)) {
                    var n = Math.abs(t.startX - e.changedTouches[0].clientX),
                        i = Math.abs(t.startY - e.changedTouches[0].clientY);
                    if (!t.allowX && n > i) return void(t.state = "prevented");
                    if (!t.allowY && i > n) return void(t.state = "prevented")
                }
                if ("allowed" !== t.state && (t.state = "allowed"), p = !1, !t.overscrollX) {
                    var a = e.currentTarget.scrollLeft,
                        r = t.startX - e.changedTouches[0].clientX;
                    (a <= 0 && r <= 0 || a >= t.maxX && r >= 0) && (p = !0, t.standalone && e.preventDefault())
                }
                if (!t.overscrollY) {
                    var o = e.currentTarget.scrollTop,
                        s = t.startY - e.changedTouches[0].clientY;
                    (o <= 0 && s <= 0 || o >= t.maxY && s >= 0) && (p = !0, t.standalone && e.preventDefault())
                }
            }
        }

        function k(e) {
            var t = e.currentTarget,
                n = t.__ScrollView;
            n.state = "start", n.startX = e.changedTouches[0].clientX, n.startY = e.changedTouches[0].clientY, n.maxX = n.overscrollX ? null : t.scrollWidth - t.clientWidth, n.maxY = n.overscrollY ? null : t.scrollHeight - t.clientHeight
        }

        function E(e) {
            e.currentTarget.__ScrollView.state = ""
        }

        function S(e) {
            e.__ScrollView = null, removeEvent(e, "touchstart", k), removeEvent(e, "touchmove", w), removeEvent(e, "touchend", E), removeEvent(e, "scroll", C), removeEvent(e, "scroll", M)
        }

        function C(e) {
            if ("closed" !== m || H()) return A = !1, void(c && clearTimeout(c));
            A = !0;
            var t = e.target.__ScrollView.topBanner;
            f && f.topBanner && t ? N(e.target, t.show, t.hide) : N(e.target, 1 / 0, 0), c && clearTimeout(c), c = setTimeout(function() {
                A = !1, P()
            }, 100)
        }

        function M(e) {
            "closed" !== m && function(e) {
                var t = e.scrollTop,
                    n = e.offsetHeight,
                    a = e.scrollHeight - (t + n);
                a < -20 && !_ ? (_ = !0, i.adjustBottom()) : a > 10 && _ && (_ = !1)
            }(e.target)
        }

        function P() {
            if (!A)
                if (d) d = !1;
                else if (!H()) {
                window.pageYOffset;
                "closed" === m && (browser.wkwebview || (o = document.documentElement.offsetHeight, s = innerHeight, l = o === s, f && f.layoutHeight !== o && (f.layoutHeight = o, document.body.style.height = o + "px"), "show" === u ? (u = null, requestAnimationFrame(F)) : "hide" === u && (u = null, requestAnimationFrame(j))))
            }
        }

        function T(e, t) {
            browser.ipad ? f.topBanner || setTimeout(function() {
                j()
            }, 400) : 90 === Math.abs(window.orientation) ? (addEvent(window, "resize", D), document.body.style.height = "", f.layoutHeight = null, t ? setTimeout(function() {
                window.scrollTo(0, -300), D()
            }) : setTimeout(function() {
                window.scrollTo(0, -300)
            }, 400)) : (removeEvent(window, "resize", D), f.layoutOffset = null, V(), f.topBanner || setTimeout(function() {
                j()
            }, 400))
        }

        function D() {
            if ("closed" === m) {
                var e = document.body.offsetHeight,
                    t = e - innerHeight;
                f.layoutOffset = t, V(), window.scrollTo(0, e)
            }
        }

        function I() {
            pageYOffset && (m = "opened", removeEvent(window, "scroll", I))
        }

        function x(e) {
            p = !0
        }

        function O(e) {
            var t = e && e.target;
            if (t && (t.classList.contains("Slider__scroll") || t.closest(".Slider__scroll"))) return !0;
            p && e.preventDefault()
        }

        function L(e) {
            var t = e && e.target,
                n = !1,
                i = 0 === e.eventPhase && t.getAttribute("autofocus");
            return "textarea" !== t.tagName.toLowerCase() || i || (n = !0), "input" !== t.tagName.toLowerCase() || ["checkbox", "radio", "image", "submit"].includes(t.type) || i || (n = !0), "select" === t.tagName.toLowerCase() && (n = !0), n
        }

        function B(e) {
            if (L(e)) {
                var t = e && e.target,
                    n = "default";
                m = "opening", _ = !1, addEvent(window, "scroll", I), window.isCustomScroll && (n = t.dataset.scrollviewposition), i.onOpen(n)
            }
        }

        function R(e) {
            L(e) && (removeEvent(window, "scroll", I), setTimeout(function() {
                "closed" === m && (scrollTo(0, 0), P())
            }), m = "closed", _ = !1, i.onClose())
        }

        function N(e, t, n) {
            var i = e.scrollTop;
            i <= -t && (l || u) ? (u = "show", window.scrollTo(0, -10)) : i >= n && (!l || u) && (u = "hide", window.scrollTo(0, 10))
        }

        function j() {
            window.scrollTo(0, 300)
        }

        function F() {
            window.scrollTo(0, -300)
        }

        function H() {
            return 90 === Math.abs(window.orientation) && !browser.ipad
        }

        function V() {
            var e = f.layoutOffset;
            f.layoutElement.style.top = e ? e + "px" : ""
        }
    },
    MzAf: function(e, t, n) {
        "use strict";

        function i(e) {
            return function(t) {
                t.$control.closest(r.sms).classList.toggle(o[e])
            }
        }

        function a(e, t) {
            var n = t.$select,
                i = t.value;
            n.closest(r.sms).classList.toggle(o.pmUsersVisible, e.includes(i) || e.includes(Number(i)))
        }
        window.SettingsSms = {}, SettingsSms._onEnabledChange = i("enabled"), SettingsSms._onTimeLimitedChange = i("timeLimited"), SettingsSms._onFrequencyChange = a;
        var r = {
                sms: ".settingsSms"
            },
            o = {
                enabled: "settingsSms_enabled",
                timeLimited: "settingsSms_timeLimited",
                pmUsersVisible: "settingsSms_pmUsersVisible"
            }
    },
    NBPr: function(e, t, n) {
        "use strict";
        window.closePostSuggest = function(e, t) {
            return re(geByClass1("post_suggest")), ajax.post("wall.php", {
                _ajax: 1,
                act: "close_suggest_post",
                suggest_id: e.getAttribute("data-suggest-id")
            }), cancelEvent(t)
        }
    },
    NJ1W: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.Row = r, t.Col = function() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                t = [a.default.class("SkeletonCol", {
                    auto: e.auto,
                    grow: e.grow,
                    "flex-column": e.flexColumn
                }), e.class].filter(function(e) {
                    return e
                }).join(" ");
            return {
                inner: [e.inner],
                class: t,
                tag: "div"
            }
        }, t.Offset = function() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                t = [a.default.class("SkeletonOffset", {
                    small: e.small
                }), e.class].filter(function(e) {
                    return e
                });
            return {
                inner: [e.inner],
                class: t.join(" "),
                tag: "div"
            }
        }, t.default = void 0;
        var i, a = (i = n("z9sQ")) && i.__esModule ? i : {
            default: i
        };

        function r() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                t = [a.default.class("SkeletonRow", {
                    "justify-content": e.justify,
                    "align-items": e.align
                }), e.class].filter(function(e) {
                    return e
                });
            return {
                inner: [e.inner],
                class: t.join(" "),
                tag: "div"
            }
        }
        var o = r;
        t.default = o
    },
    NJSj: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.Convo__online = f, t.Convo__rightStatus = h, t.default = void 0;
        var i = c(n("bZ/P")),
            a = c(n("Mc5h")),
            r = c(n("AXyT")),
            o = c(n("9y81")),
            s = c(n("KMpi")),
            l = c(n("rKUZ"));

        function c(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }

        function u() {
            var e = function(e, t) {
                t || (t = e.slice(0));
                return Object.freeze(Object.defineProperties(e, {
                    raw: {
                        value: Object.freeze(t)
                    }
                }))
            }(['\n    <div class="', '" ', ">\n      ", "\n      ", '\n      <a class="convo__body" href="', '">\n        <div class="convo__row convo__row_title">\n          <div class="convo__title">', '</div>\n          <div class="convo__row_right">\n            ', '\n            <div class="convo__date">', '</div>\n          </div>\n        </div>\n        <div class="convo__row convo__row_text">\n          <div class="convo__typing">', '</div>\n          <div class="convo__text">', '</div>\n          <div class="convo__row_right convo__unreadBox" ', ">\n            ", '\n            <div class="convo__unreadOut"></div>\n          </div>\n          <div class="convo__status">', "</div>\n        </div>\n      </a>\n    </div>\n  "]);
            return u = function() {
                return e
            }, e
        }
        var d = function(e) {
            var t, n, a = e.more,
                c = "",
                d = "",
                p = 0,
                A = !1,
                m = "";
            a && (c = a.text, d = a.date, p = a.unreadCount, A = a.muted, m = a.typing ? (0, l.default)(a.typing) : "", t = a.pending, n = a.failed, (t || n) && (d = ""));
            var _ = i.default.class("clickable", "convo", {
                    id: e.id,
                    short: !a,
                    last: e.isLast,
                    typing: !!m,
                    important: e.important,
                    unread: e.isLast && p > 0,
                    unreadOut: e.isLast && p < 0
                }),
                v = (0, s.default)({
                    mix: "convo__avatar",
                    photos: e.photos,
                    url: e.profileUrl
                }),
                g = e.isLast ? (0, r.default)({
                    mix: "convo__unread",
                    value: p,
                    gray: A
                }) : "",
                y = h({
                    pending: t,
                    failed: n
                }),
                b = f(e.online),
                w = (0, o.default)({
                    mix: "convo__star",
                    icon: "star",
                    blue: !0
                }),
                k = e.url,
                E = i.default.onClick("Convo._onClick", "event", k);
            return i.default.html(u(), _, E, b, v, e.url, e.title, w, d, m, c, y ? "hidden" : "", g, y)
        };

        function f(e) {
            return "mobile" === e ? (0, o.default)({
                mix: i.default.class("convo__online", {
                    mobile: !0
                }),
                icon: "phone"
            }) : "desktop" === e ? (0, a.default)({
                mix: i.default.class("convo__online", {
                    desktop: !0
                })
            }) : (0, a.default)({
                mix: "convo__online"
            })
        }

        function h(e) {
            var t = window.lang;
            return e.pending ? '<div class="convo__pending"></div>' : e.failed ? '<div class="convo__failed">'.concat(t.mobile_mail_send_error, "</div>") : ""
        }
        t.default = d
    },
    NSb7: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.TypingRenderNames = f, t.TypingIsEmpty = d, t.default = void 0;
        var i = o(n("bZ/P")),
            a = o(n("z9sQ")),
            r = o(n("BoyB"));

        function o(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }

        function s() {
            var e = c(['\n    <div class="typing__dotsWrap">\n      <div class="typing__dots">...</div>\n    </div>\n  ']);
            return s = function() {
                return e
            }, e
        }

        function l() {
            var e = c(['\n    <div class="', '">\n      ', '\n      <div class="typing__names">', "</div>\n      ", "\n    </div>\n  "]);
            return l = function() {
                return e
            }, e
        }

        function c(e, t) {
            return t || (t = e.slice(0)), Object.freeze(Object.defineProperties(e, {
                raw: {
                    value: Object.freeze(t)
                }
            }))
        }
        var u = function(e) {
            var t, n, o = e.dimmed,
                c = e.animation,
                u = !!e.compact,
                h = e.typingCount,
                p = i.default.class("typing", {
                    dimmed: o,
                    id: e.id,
                    empty: d(h),
                    animation: c
                }),
                A = f(e);
            "audio" === c ? (t = (0, r.default)({
                class: a.default.class("typing__loading", {
                    audio: !0,
                    compact: u
                })
            }), n = "") : "dots" === c ? (t = (0, r.default)({
                class: a.default.class("typing__loading", {
                    audio: !1,
                    compact: u
                })
            }), n = "") : "simple-dots" === c && (t = "", n = i.default.html(s()));
            return i.default.html(l(), p, t, A, n)
        };

        function d(e) {
            return !e
        }

        function f(e) {
            return "audio" === e.text ? function(e, t) {
                var n = window.lang;
                if (!Array.isArray(e)) return e ? n.mobile_mail_recaudio_1_short : "";
                var i = e,
                    a = t,
                    r = "";
                if (1 === a && i.length >= 1) {
                    var o = i[0];
                    r = (r = n.mobile_mail_recaudio_1).replace("{name}", o)
                } else if (2 === a && i.length >= 2) {
                    var s = i[0],
                        l = i[1];
                    r = (r = (r = n.mobile_mail_recaudio_2).replace("{name1}", s)).replace("{name2}", l)
                } else if (a > 1 && i.length >= 1) {
                    var c = i[0];
                    r = (r = (r = n.mobile_mail_recaudio_many).replace("{name}", c)).replace("{count}", a - 1)
                } else a >= 1 && !i.length && (r = langNumeric(a, n.mobile_mail_recaudio_N_unknown));
                return r
            }(e.typing, e.typingCount) : "mixed" === e.text ? function(e, t) {
                var n = window.lang;
                if (!Array.isArray(e)) return "";
                var i = e,
                    a = t,
                    r = "";
                if (1 === a && i.length >= 1) r = "";
                else if (2 === a && i.length >= 2) {
                    var o = i[0],
                        s = i[1];
                    r = (r = (r = n.mobile_mail_mixtyping_2).replace("{name1}", o)).replace("{name2}", s)
                } else if (a > 1 && i.length >= 1) {
                    var l = i[0];
                    r = (r = (r = n.mobile_mail_mixtyping_many).replace("{name}", l)).replace("{count}", a - 1)
                } else a >= 1 && !i.length && (r = langNumeric(a, n.mobile_mail_mixtyping_N_unknown));
                return r
            }(e.typing, e.typingCount) : function(e, t) {
                var n = window.lang;
                if (!Array.isArray(e)) return e ? n.mobile_mail_typing_1_short : "";
                var i = e,
                    a = t,
                    r = "";
                if (1 === a && i.length >= 1) {
                    var o = i[0];
                    r = (r = n.mobile_mail_typing_1).replace("{name}", o)
                } else if (2 === a && i.length >= 2) {
                    var s = i[0],
                        l = i[1];
                    r = (r = (r = n.mobile_mail_typing_2).replace("{name1}", s)).replace("{name2}", l)
                } else if (a > 1 && i.length >= 1) {
                    var c = i[0];
                    r = (r = (r = n.mobile_mail_typing_many).replace("{name}", c)).replace("{count}", a - 1)
                } else a >= 1 && !i.length && (r = langNumeric(a, n.mobile_mail_typing_N_unknown));
                return r
            }(e.typing, e.typingCount)
        }
        t.default = u
    },
    Ny8a: function(e, t, n) {
        "use strict";
        var i, a = (i = n("wZQE")) && i.__esModule ? i : {
            default: i
        };
        window.MoneyLink = {
            copy: function(e) {
                var t = e.$btn,
                    n = t.nextElementSibling,
                    i = geByClass1("TextInput__native", gpeByClass("Pad__content", t));
                copyToClipboard(i) && (MoneyLink.lastCopyLabel && hide(MoneyLink.lastCopyLabel), MoneyLink.lastCopyLabel = n, show(n))
            },
            genQRCode: function(e, t) {
                if (!MoneyLink.qrcode) {
                    var n, i;
                    t ? (n = geByClass1("snippet__icon", geByClass1(t)), i = 80) : (n = ge("money_link_qr"), i = 200);
                    val(n, a.default.createQR(e, i, "qr-code", {
                        isShowLogo: !0,
                        isShowBackground: !1
                    }))
                }
            }
        }
    },
    O5lf: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("omrv")) && i.__esModule ? i : {
            default: i
        };
        var r = a.default;
        t.default = r, window.Spinner = a.default
    },
    OFOJ: function(e, t, n) {
        "use strict";
        var i = n("UxAg"),
            a = l(n("wTbK")),
            r = l(n("r/ag")),
            o = l(n("4uzI")),
            s = l(n("JaXn"));

        function l(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        o.default._faveCache = {}, o.default._onClose = function() {
            o.default._itemsPopup && (r.default.close(o.default._itemsPopup), delete o.default._itemsPopup)
        }, o.default._goToItem = function(e) {
            -1 === cur.destroy.indexOf(o.default._onClose) && cur.destroy.push(o.default._onClose), nav.go(e.url)
        }, o.default._toggleFave = function(e, t, n, a, r, l, c, u) {
            e.stopPropagation();
            var d = t.dataset.isFave;
            ajax.post("/bookmarks.php", {
                _ajax: 1,
                item_type: a,
                act: d ? "bookmark_remove" : "bookmark_add",
                hash: u,
                item_oid: r,
                item_id: l,
                link_url: c
            }, {
                onDone: function(e) {
                    e && (o.default._faveCache[l] = !d, (0, i.$)(".PhotoItemsList").$$(".PhotoMarketItem").forEach(function(e) {
                        e.dataset.itemId === l.toString() && (e.$(".PhotoMarketItem__fave").outerHTML = Wd.html((0, s.default)({
                            type: n,
                            typeInt: a,
                            isFave: !d,
                            ownerId: r,
                            itemId: l,
                            href: c,
                            faveHash: u
                        })))
                    }))
                }
            })
        }, o.default._openItemsPopup = function(e) {
            var t = (0, a.default)({
                class: "Photo__marketItemsModal",
                body: (0, o.default)({
                    itemsJSON: e,
                    onClose: ["ItemsList._onClose"]
                })
            });
            o.default._itemsPopup = r.default.open(Wd.elem(t), !0)
        }
    },
    OGWK: function(e, t, n) {
        "use strict";
        var i = window,
            a = i.Friends,
            r = i.Groups,
            o = i.hasClass,
            s = i.geByClass1,
            l = i.getLang;
        window.SubscribeBtn = {
            onClick: function(e, t, n, i, _, v) {
                try {
                    var g = v + c,
                        y = v + f,
                        b = v + u,
                        w = v + d,
                        k = o(e, g),
                        E = k ? i : n,
                        S = l(k ? p : h),
                        C = !k,
                        M = s(y, e),
                        P = function(e) {
                            var t = intval(domData(e, "block-id"));
                            if (!t) {
                                var n = domCA(e, m);
                                t = intval(domData(n, "block-id")) || null
                            }
                            return t
                        }(e),
                        T = domData(e, "from") || null;
                    M && (toggleClass(b, M, C), toggleClass(w, M, !C)), attr(e, "aria-label", escapeAttr(S)), toggleClass(g, e, C), _ === A ? function(e, t, n, i) {
                        (n ? r.leave : r.enter).call(r, e, t, i)
                    }(t, E, k) : function(e, t, n, i, r) {
                        (n ? a.decline : a.accept).call(a, e, t, i, r)
                    }(t, E, k, T, P)
                } catch (e) {
                    console.trace(e)
                }
                return !1
            }
        };
        var c = "_unsubscribe",
            u = "Icon_unsubscribe",
            d = "Icon_subscribe",
            f = "Icon",
            h = "mobile_groups_you_are_in_public",
            p = "mobile_groups_public_subscribe",
            A = "group",
            m = ".feedAssistance"
    },
    OcB7: function(e, t, n) {
        "use strict";
        var i = n("UxAg");
        window.VotingStatsFilters = {}, VotingStatsFilters._onCountryChange = r;
        var a = {
            countrySection: ".VotingStatsFilters__section_country",
            citySection: ".VotingStatsFilters__section_city"
        };

        function r(e) {
            var t = e.$option,
                n = (0, i.$)(a.countrySection),
                r = (0, i.$)(a.citySection),
                o = t.getAttribute("data-city-section-html");
            r && (r.outerHTML = ""), o && n.insertAdjacentHTML("afterend", o)
        }
    },
    Ogzf: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.onLongpress = function(e) {
            var t, n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 350,
                o = arguments.length > 2 ? arguments[2] : void 0,
                s = function(a) {
                    var s = a.target;
                    (0, i.addEvent)(e, r, l, {
                        passive: !0
                    }), (0 === a.button || isUndefined(a.button)) && (t = setTimeout(function(n) {
                        var a, s;
                        n.touches ? (a = n.touches[0].pageX, s = n.touches[0].pageY) : (a = n.pageX, s = n.pageY);
                        o({
                            pageX: a,
                            pageY: s
                        }), (0, i.removeEvent)(e, r, l, {
                            passive: !0
                        }), clearTimeout(t)
                    }.bind(s, a), n))
                },
                l = function n() {
                    clearTimeout(t), (0, i.removeEvent)(e, r, n, {
                        passive: !0
                    })
                };
            return (0, i.addEvent)(e, a, s, {
                    passive: !0
                }),
                function() {
                    clearTimeout(t), (0, i.removeEvent)(e, a, s, {
                        passive: !0
                    })
                }
        };
        var i = n("OcsD"),
            a = "touchstart mousedown",
            r = "touchcancel touchend touchmove mouseout mouseup mousemove scroll"
    },
    OnSo: function(e, t, n) {
        "use strict";
        var i, a = (i = n("MESj")) && i.__esModule ? i : {
            default: i
        };
        window.uOpenInNativeAppFloatBtn = a.default
    },
    "P+Xc": function(e, t, n) {
        "use strict";
        var i, a = (i = n("jk6M")) && i.__esModule ? i : {
            default: i
        };
        var r, o, s, l, c, u = window,
            d = u.page,
            f = (u.nav, u.menu),
            h = u.zlayer,
            p = window,
            A = p.onDOMReady,
            m = p.onBodyScroll,
            _ = p.onBodyResize,
            v = window,
            g = v.geByClass1,
            y = v.addClass,
            b = v.removeClass,
            w = (v.getW, v.getH),
            k = "groupCover-vk_animationYes",
            E = "groupCover-vk_animationStep",
            S = function() {
                return {
                    vk: g("vk"),
                    basis: g("basis"),
                    header: g("basis__header"),
                    headerTitle: g("mh_header", g("basis__header")),
                    cover: g("groupCover"),
                    coverImage: g("groupCover__image"),
                    coverDimmer: g("groupCover__dimmer")
                }
            },
            C = !1;

        function M() {
            C || (r = S()).cover && (C = !0, y(r.vk, k), o = !a.default.chrome || Number(a.default.version.split(".")[0]) > 50, s = "fixed" === getStyle(r.header, "position"), l = w(r.header), c = w(r.cover), m(T), _(D), T(), window.cur.destroy = window.cur.destroy.filter(function(e) {
                return e !== P
            }), window.cur.destroy.push(P))
        }

        function P() {
            (!0 || f.opened()) && (b(r.vk, E), b(r.vk, k)), m("__clear", T), _("__clear", D), C = !1
        }

        function T() {
            var e = scrollTop();
            if (s)
                if (e < 0) setStyle(r.header, "top", -e), y(r.vk, E), setStyle(r.coverDimmer, "opacity", 0), setStyle(r.coverImage, "top", 0);
                else {
                    var t = document.body,
                        n = Math.min(1, e / (c - l)),
                        i = t && t.classList.contains("vk_tabbar_top") && !r.header.classList.contains("basis__header_noBottomMenu") ? 48 : 0;
                    setStyle(r.header, "top", i), setStyle(r.headerTitle, "display", "block"), n <= .9 ? (y(r.vk, E), o && setStyle(r.coverImage, "top", .5 * e), setStyle(r.coverDimmer, "opacity", n / .9), setStyle(r.headerTitle, "opacity", 0)) : (setStyle(r.headerTitle, "opacity", 1), b(r.vk, E))
                }
            else Math.min(1, e / c) < 1 ? (y(r.vk, E), setStyle(r.coverDimmer, "opacity", 0), o && setStyle(r.coverImage, "top", .5 * e), setStyle(r.headerTitle, "display", "none")) : b(r.vk, E)
        }

        function D() {
            P(), M()
        }
        A(function() {
            (a.default.chrome || a.default.safari && a.default.ios >= 9) && (M(), d.onChange(M), h.onClose(function() {
                setTimeout(M, 0)
            }))
        })
    },
    P3wa: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = function(e) {
                if (e && e.__esModule) return e;
                var t = o();
                if (t && t.has(e)) return t.get(e);
                var n = {};
                if (null != e) {
                    var i = Object.defineProperty && Object.getOwnPropertyDescriptor;
                    for (var a in e)
                        if (Object.prototype.hasOwnProperty.call(e, a)) {
                            var r = i ? Object.getOwnPropertyDescriptor(e, a) : null;
                            r && (r.get || r.set) ? Object.defineProperty(n, a, r) : n[a] = e[a]
                        }
                }
                n.default = e, t && t.set(e, n);
                return n
            }(n("wTbK")),
            r = (i = n("Y6JH")) && i.__esModule ? i : {
                default: i
            };

        function o() {
            if ("function" != typeof WeakMap) return null;
            var e = new WeakMap;
            return o = function() {
                return e
            }, e
        }
        var s = function() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                t = window.lang;
            return (0, a.default)({
                on_overlay_click: "return false;",
                class: "Popup_open",
                body: {
                    class: "WarningModal",
                    inner: [{
                        class: "WarningModal__icon",
                        inner: (0, r.default)("groups/common", "hide_outline_56")
                    }, {
                        class: "WarningModal__title",
                        inner: e.title
                    }, {
                        class: "WarningModal__text",
                        inner: e.text
                    }]
                },
                items: [(0, a.ModalMenuBtn)({
                    url: "/groups",
                    class: "WarningModal__button",
                    theme: "regular",
                    size: "large",
                    inner: t.mobile_back,
                    onclick: ["WarningModal.leave", "this", "event"],
                    attrs: {
                        "data-id": e.id,
                        "data-hash": e.hash,
                        "data-gid": e.gid,
                        "data-uid": e.user_id
                    }
                }), (0, a.ModalMenuBtn)({
                    url: e.proceed_url,
                    class: "WarningModal__button",
                    theme: "secondary",
                    size: "large",
                    inner: t.mobile_groups_warning_notification_proceed,
                    onclick: ["WarningModal.close", "this", "event"],
                    attrs: {
                        "data-id": e.id,
                        "data-hash": e.hash,
                        "data-gid": e.gid,
                        "data-uid": e.user_id
                    }
                })]
            })
        };
        t.default = s
    },
    Pfrj: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i = r(n("bZ/P")),
            a = r(n("Mc5h"));

        function r(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }

        function o(e, t, n) {
            return t in e ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = n, e
        }
        var s = function(e) {
            var t, n, r = e.photos || [e.photo],
                s = (r = Array.isArray(r) ? r : [r]).length,
                u = "";
            if (s > 1)
                for (var d = 0; d < s; d++) u += l(r[d], d);
            n = 40 === e.size ? "m" : 36 === e.size ? "s" : e.size ? e.size : "xl";
            return (0, a.default)({
                mix: i.default.class(e.mix, "Avatar", (t = {}, o(t, s, !0), o(t, "size", n), t)),
                url: e.url,
                attrs: 1 === s ? c(r[0]) : "",
                inner: u
            })
        };

        function l(e, t) {
            return (0, a.default)({
                mix: i.default.class("Avatar__image", o({}, t, !0)),
                attrs: c(e)
            })
        }

        function c(e) {
            return i.default.attr("style", "background-image: url('".concat(e, "')"))
        }
        t.default = s
    },
    "Po+v": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i = function() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                t = [];
            if (e.on_overlay_click_native) t = e.on_overlay_click_native;
            else {
                var n = !0;
                "boolean" == typeof e.hide_on_overlay_click && (n = e.hide_on_overlay_click), t = ["Popup._onOverlayClick", "this", e.on_overlay_click || null, n]
            }
            return {
                id: e.id,
                class: [e.mix ? e.mix : e.class, Bem.class("Popup", {
                    open: e.open,
                    scrollable: e.scrollable
                })],
                ontouchmove: ["Popup._onTouchMove", "event"],
                inner: [e.rel ? e.rel : null, {
                    class: "Popup__overlay",
                    onclick: t
                }, {
                    class: "Popup__wrap",
                    inner: {
                        tag: "div",
                        class: "Popup__content",
                        "aria-modal": "true",
                        inner: [e.header ? {
                            class: "Popup__header",
                            inner: [e.header.title ? {
                                class: "Popup__headerTitle",
                                inner: e.header.title
                            } : null, e.header.corner ? {
                                class: ["Popup__headerCorner", e.header.corner.class],
                                inner: e.header.corner.text,
                                href: e.header.corner.url,
                                onclick: e.header.corner.onclick,
                                attrs: e.header.corner.attrs
                            } : null]
                        } : null, e.scrollable ? {
                            class: "Popup__scroll ScrollView",
                            inner: {
                                class: "Popup__scrollContent",
                                inner: e.content
                            }
                        } : e.content, e.footer ? {
                            class: "Popup__footer",
                            inner: e.footer
                        } : null]
                    }
                }]
            }
        };
        t.default = i
    },
    PuTx: function(e, t, n) {
        "use strict";
        var i = n("OcsD"),
            a = o(n("wMVj")),
            r = o(n("kr3z"));

        function o(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        window.uCloseProfileSwitcher = {}, uCloseProfileSwitcher._onConfirmClick = l;
        var s = null;

        function l(e, t) {
            var n = t.checked;
            a.default.clear();
            var o = {
                is_closed: n ? "1" : "0",
                _ajax: 1
            };
            r.default.post(e, o, {
                onDone: function() {
                    a.default.reload();
                    var e = window.cur;
                    s = (0, i.scrollTop)(), e.destroy.push(c)
                }
            })
        }

        function c() {
            (0, i.scrollTop)(s), requestAnimationFrame(function() {
                (0, i.scrollTop)(s), requestAnimationFrame(function() {
                    (0, i.scrollTop)(s)
                })
            })
        }
    },
    Q47q: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.Search = o, t.default = void 0;
        var i, a = n("/xuI"),
            r = (i = n("z9sQ")) && i.__esModule ? i : {
                default: i
            };

        function o() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                t = (0, a.getRandomId)("skeleton-search"),
                n = (0, a.stylesObjectToString)({}) + (e.style || ""),
                i = [r.default.class("SkeletonSearch", {
                    small: e.small,
                    header: e.header
                }), e.class].filter(function(e) {
                    return e
                }).join(" ");
            return (0, a.applyAnimation)(t), {
                id: t,
                class: i,
                style: n,
                tag: "div"
            }
        }
        var s = o;
        t.default = s
    },
    Q8gl: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("Au5b")) && i.__esModule ? i : {
            default: i
        };
        var r = a.default;
        t.default = r, window.Control = a.default
    },
    QBkA: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("ZoJ6")) && i.__esModule ? i : {
            default: i
        };
        n("yguo");
        var r = a.default;
        t.default = r, window.MailFilter = a.default
    },
    QD50: function(e, t, n) {
        "use strict";

        function i(e, t) {
            function n(e) {
                var t = ["Webkit", "Moz", "O", "ms"],
                    n = document.createElement("div");
                if (void 0 !== n.style[e]) return !0;
                for (var i in e = e.charAt(0).toUpperCase() + e.slice(1), t)
                    if (void 0 !== n.style[t[i] + e]) return !0;
                return !1
            }

            function i(e, t) {
                new RegExp("(\\s|^)" + t + "(\\s|$)").test(e.className) || (e.className += " " + t)
            }

            function r(e, t) {
                e.className = e.className.replace(new RegExp("(\\s+|^)" + t + "(\\s+|$)", "g"), " ").replace(/^\s+|\s+$/g, "")
            }

            function o(e, t) {
                0 > e ? e = 0 : e > v - 1 && (e = v - 1);
                for (var n = E.dots.length - 1; n >= 0; n--) r(E.dots[n], P.activeDot);
                return i(E.dots[e], P.activeDot), C = e, s(-e * E.width, void 0 === t ? M.speed : t), h(), M.onSlideChange && M.onSlideChange(e), e
            }

            function s(e, t) {
                var n = t ? t + "ms" : "";
                y.style.webkitTransitionDuration = y.style.MozTransitionDuration = y.style.msTransitionDuration = y.style.OTransitionDuration = y.style.transitionDuration = n, c(e)
            }

            function l(e, t) {
                if (k && clearInterval(k), t) {
                    var n = +new Date,
                        i = E.left;
                    k = setInterval(function() {
                        function a(e, t) {
                            return (t - e) * s + e
                        }
                        var r, o, s = (+new Date - n) / t,
                            l = [0, .7, 1, 1];
                        return s >= 1 ? (c(e), void clearInterval(k)) : (r = e - i, o = a(a(a(l[0], l[1]), a(l[1], l[2])), a(a(l[1], l[2]), a(l[2], l[3]))), void c(Math.floor(o * r + i)))
                    }, 15)
                } else c(e)
            }

            function c(e) {
                y.style.webkitTransform = "translate(" + e + "px,0) translateZ(0)", y.style.msTransform = y.style.MozTransform = y.style.OTransform = y.style.transform = "translateX(" + e + "px)", E.left = e
            }

            function u(e) {
                y.style.left = e + "px", E.left = e
            }

            function d() {
                var e = C + 1;
                return e > v - 1 && (e = 0), o(e)
            }

            function f() {
                w = !0, h()
            }

            function h() {
                w && (b && clearTimeout(b), b = setTimeout(function() {
                    d()
                }, M.slideshowInterval))
            }

            function p() {
                b && clearTimeout(b)
            }

            function A() {
                w = !1, b && clearTimeout(b)
            }

            function m() {
                E.width = e.offsetWidth, y.style.width = E.width * v + "px";
                for (var t = 0; v > t; t++) E.slides[t].style.width = E.width + "px";
                s(-C * E.width)
            }

            function _(e, t, n, i) {
                t && (e.addEventListener ? e.addEventListener(t, n, !!i) : e.attachEvent("on" + t, n))
            }
            var v, g, y, b, w, k, E = {
                    slides: [],
                    dots: [],
                    left: 0
                },
                S = 200,
                C = 0,
                M = {
                    speed: 300,
                    touchSpeed: 300,
                    slideshow: !1,
                    slideshowInterval: 4e3,
                    stopSlideshowAfterInteraction: !1,
                    startSlide: 0,
                    mouseDrag: !0,
                    disableIfOneSlide: !0,
                    cssPrefix: "peppermint-",
                    dots: !1,
                    dotsPrepend: !1,
                    dotsContainer: void 0,
                    slidesContainer: void 0,
                    onSlideChange: void 0,
                    onSetup: void 0
                };
            t && function(e, t) {
                for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n])
            }(M, t);
            var P = {
                    inactive: M.cssPrefix + "inactive",
                    active: M.cssPrefix + "active",
                    mouse: M.cssPrefix + "mouse",
                    drag: M.cssPrefix + "drag",
                    slides: M.cssPrefix + "slides",
                    dots: M.cssPrefix + "dots",
                    activeDot: M.cssPrefix + "active-dot",
                    mouseClicked: M.cssPrefix + "mouse-clicked"
                },
                T = {
                    transforms: n("transform"),
                    transitions: n("transition")
                };
            return function() {
                var t = M.slidesContainer || e,
                    n = M.dotsContainer || e;
                if (!(M.disableIfOneSlide && t.children.length <= 1)) {
                    (!T.transforms || window.opera) && (c = u), (!T.transitions || window.opera) && (s = l), i(y = M.slidesContainer || document.createElement("div"), P.slides);
                    for (var d = 0, h = t.children.length; h > d; d++) {
                        var b = t.children[d],
                            w = document.createElement("li");
                        E.slides.push(b), w.setAttribute("tabindex", "0"), w.setAttribute("role", "button"), w.innerHTML = "<span></span>",
                            function(t, n) {
                                _(n, "click", function() {
                                    o(t), M.stopSlideshowAfterInteraction && A()
                                }), _(n, "keyup", function(e) {
                                    13 == e.keyCode && (o(t), M.stopSlideshowAfterInteraction && A())
                                }), _(n, "mouseup", function() {
                                    i(n, P.mouseClicked)
                                }), _(n, "blur", function() {
                                    r(n, P.mouseClicked)
                                }, !0), _(b, "focus", b.onfocusin = function() {
                                    e.scrollLeft = 0, setTimeout(function() {
                                        e.scrollLeft = 0
                                    }, 0), o(t)
                                }, !0)
                            }(d, w), E.dots.push(w)
                    }
                    v = E.slides.length, 100 / v, i(e, P.active), r(e, P.inactive), M.mouseDrag && i(e, P.mouse), E.width = e.offsetWidth, y.style.width = E.width * v + "px";
                    for (d = 0; v > d; d++) E.slides[d].style.width = E.width + "px", y.appendChild(E.slides[d]);
                    if (M.slidesContainer || e.appendChild(y), M.dots && v > 1) {
                        i(g = document.createElement("ul"), P.dots);
                        for (d = 0, h = E.dots.length; h > d; d++) g.appendChild(E.dots[d]);
                        M.dotsPrepend ? n.insertBefore(g, n.firstChild) : n.appendChild(g)
                    }
                    _(window, "resize", m), _(window, "orientationchange", m), setTimeout(function() {
                        o(M.startSlide, 0)
                    }, 0), M.slideshow && f(), a(y, {
                        mouse: M.mouseDrag,
                        start: function() {
                            i(e, P.drag)
                        },
                        move: function(e, t, n) {
                            p(), n.x = n.x / (!C && n.x > 0 || C == v - 1 && n.x < 0 ? Math.abs(n.x) / E.width * 2 + 1 : 1), s(n.x - E.width * C)
                        },
                        end: function(t, n, i) {
                            if (i.x) {
                                var a = Math.abs(i.x) / E.width,
                                    s = Math.floor(a) + (a - Math.floor(a) > .25 ? 1 : 0);
                                s += i.time < S + S * s / 1.8 && Math.abs(i.x) - s * E.width > (s ? -E.width / 9 : 20) ? 1 : 0, i.x < 0 ? o(C + s, M.touchSpeed) : o(C - s, M.touchSpeed), M.stopSlideshowAfterInteraction && A()
                            }
                            r(e, P.drag)
                        }
                    }), setTimeout(function() {
                        M.onSetup && M.onSetup(v)
                    }, 0)
                }
            }(), {
                slideTo: function(e, t) {
                    return o(parseInt(e, 10), t)
                },
                next: d,
                prev: function() {
                    var e = C - 1;
                    return 0 > e && (e = v - 1), o(e)
                },
                start: f,
                stop: A,
                pause: p,
                getCurrentPos: function() {
                    return C
                },
                getSlidesNumber: function() {
                    return v
                },
                recalcWidth: m
            }
        }

        function a(e, t) {
            function n(e, t, n, a) {
                return t ? (e.addEventListener ? e.addEventListener(t, n, !!a) : e.attachEvent("on" + t, n), {
                    remove: function() {
                        i(e, t, n, a)
                    }
                }) : void 0
            }

            function i(e, t, n, i) {
                t && (e.removeEventListener ? e.removeEventListener(t, n, !!i) : e.detachEvent("on" + t, n))
            }

            function a(e) {}

            function r(e) {
                if ((m = {
                        x: (f ? e.clientX : e.touches[0].clientX) - A.x,
                        y: (f ? e.clientY : e.touches[0].clientY) - A.y,
                        time: Number(new Date) - A.time
                    }).time - v[v.length - 1].time) {
                    for (var t = 0; t < v.length - 1 && m.time - v[t].time > 80; t++);
                    _ = {
                        x: (m.x - v[t].x) / (m.time - v[t].time),
                        y: (m.y - v[t].y) / (m.time - v[t].time)
                    }, v.length >= 5 && v.shift(), v.push({
                        x: m.x,
                        y: m.y,
                        time: m.time
                    })
                }
            }

            function o(e, t) {
                y = !0, k[f = t](e) || (n(document, w[f][1], s), n(document, w[f][2], l), n(document, w[f][3], l), u.preventDefault, A = {
                    x: f ? e.clientX : e.touches[0].clientX,
                    y: f ? e.clientY : e.touches[0].clientY,
                    time: Number(new Date)
                }, d = void 0, m = {
                    x: 0,
                    y: 0,
                    time: 0
                }, _ = {
                    x: 0,
                    y: 0
                }, v = [{
                    x: 0,
                    y: 0,
                    time: 0
                }], u.start(e, A))
            }

            function s(e) {
                !u.preventScroll && d || k[f](e) || (r(e), (Math.abs(m.x) > u.clickTolerance || Math.abs(m.y) > u.clickTolerance) && (y = !1), void 0 === d && 3 !== f && (d = Math.abs(m.x) < Math.abs(m.y) && !u.preventScroll) || (u.preventDefault, u.move(e, A, m, _)))
            }

            function l(e) {
                f && r(e), !y && e.target && e.target.blur && e.target.blur(), i(document, w[f][1], s), i(document, w[f][2], l), i(document, w[f][3], l), u.end(e, A, m, _)
            }
            var c = function() {},
                u = {
                    preventDefault: !0,
                    clickTolerance: 0,
                    preventScroll: !1,
                    mouse: !0,
                    start: c,
                    move: c,
                    end: c,
                    click: c
                };
            t && function(e, t) {
                for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n])
            }(u, t);
            var d, f, h = !!window.navigator.pointerEnabled,
                p = !!window.navigator.msPointerEnabled,
                A = {},
                m = {},
                _ = {},
                v = [],
                g = [],
                y = !0,
                b = h ? 1 : p ? 2 : 0,
                w = [
                    ["touchstart", "touchmove", "touchend", "touchcancel"],
                    ["pointerdown", "pointermove", "pointerup", "pointercancel"],
                    ["MSPointerDown", "MSPointerMove", "MSPointerUp", "MSPointerCancel"],
                    ["mousedown", "mousemove", "mouseup", !1]
                ],
                k = [function(e) {
                    return e.touches && e.touches.length > 1 || e.scale && 1 !== e.scale
                }, function(e) {
                    return !e.isPrimary || e.buttons && 1 !== e.buttons || !u.mouse && "touch" !== e.pointerType && "pen" !== e.pointerType
                }, function(e) {
                    return !e.isPrimary || e.buttons && 1 !== e.buttons || !u.mouse && e.pointerType !== e.MSPOINTER_TYPE_TOUCH && e.pointerType !== e.MSPOINTER_TYPE_PEN
                }, function(e) {
                    return e.buttons && 1 !== e.buttons
                }];
            return g.push(n(e, w[b][0], function(e) {
                o(e, b)
            })), g.push(n(e, "dragstart", a)), u.mouse && !b && g.push(n(e, w[3][0], function(e) {
                o(e, 3)
            })), g.push(n(e, "click", function(e) {
                y && u.click(e)
            })), {
                getClicksAllowed: function() {
                    return y
                },
                kill: function() {
                    for (var e = g.length - 1; e >= 0; e--) g[e].remove()
                }
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0, window.jQuery && function(e) {
            e.fn.Peppermint = function(t) {
                return this.each(function() {
                    e(this).data("Peppermint", i(this, t))
                }), this
            }
        }(window.jQuery), window.Peppermint = i, window.EventBurrito = a;
        var r = i;
        t.default = r
    },
    QMH7: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.healScroll = d, t.unhealScroll = function(e) {
            if (!e[l]) return;
            e[l] = null, e.style.paddingTop = "", e.style.paddingBottom = "", (0, o.cleanScrollView)(e), removeEvent(e, "scroll", p), removeEvent(e, "scroll", h)
        };
        var i, a = n("UxAg"),
            r = (i = n("jk6M")) && i.__esModule ? i : {
                default: i
            },
            o = n("MjTa");
        (r.default.ios || r.default.ipad || r.default.ipod) && window.MutationObserver && document.addEventListener("DOMContentLoaded", c);
        var s = {
                scrollView: ".ScrollView"
            },
            l = "_scrollViewHealed";

        function c() {
            (u(), document.body) && new MutationObserver(u).observe(document.body, {
                childList: !0,
                subtree: !0
            })
        }

        function u() {
            (0, a.$$)(s.scrollView).forEach(d)
        }

        function d(e) {
            if (!e[l]) {
                e[l] = {};
                var t = getComputedStyle(e),
                    n = parseInt(t.paddingTop, 10),
                    i = parseInt(t.paddingBottom, 10);
                e.style.paddingTop = n + 1 + "px", e.style.paddingBottom = i + 1 + "px", f(e), (0, o.setScrollView)(e, {
                    override: !1
                }), hasClass("messenger__body", e) || addEvent(e, "scroll", p), addEvent(e, "scroll", h)
            }
        }

        function f(e) {
            var t = e.scrollTop;
            t < 0 || (0 === t ? e.scrollTop += 1 : t + e.offsetHeight === e.scrollHeight && (e.scrollTop -= 1))
        }

        function h(e) {
            var t = e.target,
                n = t[l];
            n && (n.timer && clearTimeout(n.timer), n.timer = setTimeout(function() {
                t[l] && f(t)
            }, 50))
        }

        function p() {
            onBodyScroll(!0)
        }
    },
    QQoL: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("HwqD")) && i.__esModule ? i : {
            default: i
        };
        n("M6/v");
        var r = a.default;
        t.default = r, window.Bell = a.default
    },
    QWOa: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.NotificationBlock = s, t.default = void 0;
        var i = n("n9zS"),
            a = n("yVgc"),
            r = n("80md"),
            o = n("NJ1W");

        function s(e) {
            return {
                inner: [(0, o.Row)({
                    inner: [(0, o.Col)({
                        inner: [(0, i.Circle)({
                            size: 48
                        }), (0, i.Circle)({
                            size: 20,
                            class: "SkeletonNotificationBlock__badge"
                        })],
                        auto: !0,
                        class: "SkeletonNotificationBlock__avatar"
                    }), (0, o.Col)({
                        inner: [(0, o.Offset)({
                            small: !0
                        }), (0, o.Row)({
                            inner: [(0, o.Col)({
                                inner: [(0, r.Line)()]
                            })]
                        }), (0, o.Row)({
                            inner: [(0, o.Col)({
                                inner: [(0, r.Line)()],
                                grow: 2
                            }), (0, o.Col)()]
                        }), (0, o.Row)({
                            inner: [(0, o.Col)({
                                inner: [(0, r.Line)({
                                    small: !0
                                })]
                            }), (0, o.Col)({
                                grow: 5
                            })]
                        })],
                        grow: 6
                    }), (0, o.Col)(), (0, o.Col)({
                        inner: [(0, a.Square)({
                            size: 48
                        })],
                        auto: !0
                    })],
                    align: "flex-start"
                }), (0, o.Offset)(), (0, o.Offset)(), (0, o.Row)({
                    inner: [(0, o.Col)({
                        inner: [(0, i.Circle)({
                            size: 48
                        })],
                        auto: !0
                    }), (0, o.Col)({
                        inner: [(0, o.Offset)({
                            small: !0
                        }), (0, o.Row)({
                            inner: [(0, o.Col)({
                                inner: [(0, r.Line)()]
                            })]
                        }), (0, o.Row)({
                            inner: [(0, o.Col)({
                                inner: [(0, r.Line)({
                                    small: !0
                                })]
                            }), (0, o.Col)({
                                grow: 5
                            })]
                        }), (0, o.Offset)()],
                        grow: 4
                    }), (0, o.Col)({
                        inner: [(0, o.Offset)()]
                    })],
                    align: "flex-start"
                })],
                class: "SkeletonNotificationBlock",
                tag: "div"
            }
        }
        var l = s;
        t.default = l
    },
    QWbq: function(e, t, n) {
        "use strict";

        function i(e) {
            return (i = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function a() {
            return (a = Object.assign || function(e) {
                for (var t = 1; t < arguments.length; t++) {
                    var n = arguments[t];
                    for (var i in n) Object.prototype.hasOwnProperty.call(n, i) && (e[i] = n[i])
                }
                return e
            }).apply(this, arguments)
        }

        function r(e, t) {
            return function(e) {
                if (Array.isArray(e)) return e
            }(e) || function(e, t) {
                if (!(Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e))) return;
                var n = [],
                    i = !0,
                    a = !1,
                    r = void 0;
                try {
                    for (var o, s = e[Symbol.iterator](); !(i = (o = s.next()).done) && (n.push(o.value), !t || n.length !== t); i = !0);
                } catch (e) {
                    a = !0, r = e
                } finally {
                    try {
                        i || null == s.return || s.return()
                    } finally {
                        if (a) throw r
                    }
                }
                return n
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance")
            }()
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.processThumbs = function(e, t, n, i) {
            var a = function(e) {
                    var t = 0;
                    return each(e, function(e, n) {
                        t += n
                    }), t
                },
                r = function(e, t, n) {
                    return (t - (e.length - 1) * n) / a(e)
                },
                o = (i = S(i) ? i : {}).wide,
                s = [],
                c = 0,
                u = [],
                d = [];
            each(n, function(e, t) {
                k(t.type) && (u[u.length] = t[t.type]), t.type === l && s.push(c), c++
            });
            var f = "",
                h = [],
                p = u.length;
            each(u, function(n, i) {
                var a = w(i, e, t);
                f += a > 1.2 ? "w" : a < .8 ? "v" : "q", h[h.length] = a
            });
            var b, C, M = h.length > 0 ? a(h) / h.length : 1,
                P = A;
            window.isMVK && (P = window.innerWidth >= 480 ? m : _);
            var T = P;
            i.force ? (b = e, C = t) : (o ? (b = v, C = g) : e >= 381 ? (b = 381, C = 1 == p ? 361 : 237) : (b = 337, C = 1 == p ? 320 : 214), e < b && (b = e, C = t), window.isMVK && (b = Math.min(v, window.innerWidth), C = Math.min(g, b)));
            var D = b / C,
                I = 0,
                x = 0;
            if (1 == p) {
                var O = {
                    lastColumn: 1,
                    lastRow: 1,
                    single: 1
                };
                u[0].thumb ? (I = 279, x = 185) : h[0] >= 1 * D ? (I = b, x = Math.min(I / h[0], C)) : (x = C, I = Math.min(x * h[0], b));
                var L = y(u[0], I, x, O);
                !L.unsized && (L.image.width < I && L.image.height <= C || L.image.height < x && L.image.width <= b) && (I = L.image.width, x = L.image.height, L = y(u[0], I, x, O)), d[0] = L
            } else if (2 == p) {
                var B, R;
                switch (f) {
                    case "ww":
                        if (M > 1.4 * D && h[1] - h[0] < .2) {
                            R = b, B = Math.min(R / h[0], R / h[1], (C - T) / 2), d[0] = y(u[0], R, B, {
                                lastColumn: 1
                            }), d[1] = y(u[1], R, B, {
                                lastColumn: 1,
                                lastRow: 1
                            }), I = b, x = 2 * B + T;
                            break
                        }
                    case "vv":
                    case "qv":
                    case "vq":
                    case "qq":
                        R = (b - P) / 2, B = Math.min(R / h[0], R / h[1], C), d[0] = y(u[0], R, B, {
                            lastRow: 1
                        }), d[1] = y(u[1], R, B, {
                            lastRow: 1,
                            lastColumn: 1
                        }), I = b, x = B;
                        break;
                    default:
                        var N = intval((b - P) / h[1] / (1 / h[0] + 1 / h[1])),
                            j = b - N - P;
                        B = Math.min(C, N / h[0], j / h[1]), d[0] = y(u[0], N, B, {
                            lastRow: 1
                        }), d[1] = y(u[1], j, B, {
                            lastColumn: 1,
                            lastRow: 1
                        }), I = b, x = B
                }
            } else if (3 == p)
                if ((h[0] > 1.2 * D || M > 1.5 * D) && "www" == f) {
                    var F, H = b,
                        V = Math.min(H / h[0], .66 * (C - T));
                    if (d[0] = y(u[0], H, V, {
                            lastColumn: 1
                        }), "www" == f) {
                        var U = intval(b - P) / 2;
                        F = Math.min(C - V - T, U / h[1], U / h[2]), d[1] = y(u[1], U, F, {
                            lastRow: 1
                        }), d[2] = y(u[2], b - U - P, F, {
                            lastColumn: 1,
                            lastRow: 1
                        })
                    } else {
                        var z = intval((b - P) / h[2] / (1 / h[1] + 1 / h[2])),
                            W = b - z - P;
                        F = Math.min(C - V - T, z / h[2], W / h[1]), d[1] = y(u[1], z, F, {
                            lastRow: 1
                        }), d[2] = y(u[2], z, F, {
                            lastRow: 1,
                            lastColumn: 1
                        })
                    }
                    I = b, x = V + F + T
                } else {
                    var q = C,
                        $ = intval(Math.min(q * h[0], .75 * (b - P)));
                    d[0] = y(u[0], $, q, {
                        lastRow: 1
                    });
                    var G = h[1] * (C - T) / (h[2] + h[1]),
                        Q = C - G - T,
                        Y = Math.min(b - $ - P, intval(G * h[2]), intval(Q * h[1]));
                    d[1] = y(u[1], Y, Q, {
                        lastColumn: 1
                    }), d[2] = y(u[2], Y, G, {
                        lastColumn: 1,
                        lastRow: 1
                    }), I = $ + Y + P, x = C
                }
            else if (4 == p)
                if ((h[0] > 1.2 * D || M > 1.5 * D) && "wwww" == f) {
                    var X = b,
                        K = Math.min(X / h[0], .66 * (C - T));
                    d[0] = y(u[0], X, K, {
                        lastColumn: 1
                    });
                    var J = (b - 2 * P) / (h[1] + h[2] + h[3]),
                        Z = intval(J * h[1]),
                        ee = intval(J * h[2]),
                        te = X - Z - ee - 2 * P;
                    J = Math.min(C - K - T, J), d[1] = y(u[1], Z, J, {
                        lastRow: 1
                    }), d[2] = y(u[2], ee, J, {
                        lastRow: 1
                    }), d[3] = y(u[3], te, J, {
                        lastColumn: 1,
                        lastRow: 1
                    }), I = b, x = K + J + T
                } else {
                    var ne = C,
                        ie = Math.min(ne * h[0], .66 * (b - P)),
                        ae = (C - 2 * T) / (1 / h[1] + 1 / h[2] + 1 / h[3]),
                        re = intval(ae / h[1]),
                        oe = intval(ae / h[2]),
                        se = ne - re - oe - 2 * T;
                    ae = Math.min(b - ie - P, ae), ie + ae + P < b && ne * h[0] > ie && (ie = Math.min(ne * h[0], b - P - ae)), d[0] = y(u[0], ie, ne, {
                        lastRow: 1
                    }), d[1] = y(u[1], ae, re, {
                        lastColumn: 1
                    }), d[2] = y(u[2], ae, oe, {
                        lastColumn: 1
                    }), d[3] = y(u[3], ae, se, {
                        lastColumn: 1,
                        lastRow: 1
                    }), I = ie + ae + P, x = C
                }
            else {
                var le = [],
                    ce = 0;
                M > (s.length ? 1.3 : 1.1) ? each(h, function(e, t) {
                    le[le.length] = Math.max(1, t)
                }) : each(h, function(e, t) {
                    ~s.indexOf(ce) ? le[le.length] = t : le[le.length] = Math.min(1, t), ce++
                });
                var ue, de, fe = {};
                for (fe[p + ""] = [r(le, b, P)], ue = 1; ue <= p - 1; ue++) fe[ue + "," + (de = p - ue)] = [r(le.slice(0, ue), b, P), r(le.slice(ue), b, P)];
                for (ue = 1; ue <= p - 2; ue++)
                    for (de = 1; de <= p - ue - 1; de++) fe[ue + "," + de + "," + (p - ue - de)] = [r(le.slice(0, ue), b, P), r(le.slice(ue, ue + de), b, P), r(le.slice(ue + de), b, P)];
                var he, pe = null,
                    Ae = 0;
                for (var me in fe)
                    if (fe.hasOwnProperty(me)) {
                        var _e = fe[me],
                            ve = a(_e) + T * (_e.length - 1),
                            ge = Math.abs(ve - C);
                        if (~me.indexOf(",")) {
                            for (var ye = me.split(","), be = 0; be < ye.length; be++) ye[be] = intval(ye[be]);
                            (ye[0] > ye[1] || ye[2] && ye[1] > ye[2]) && (ge += 50, ge *= 1.5)
                        }(null === pe || ge < Ae) && (pe = me, Ae = ge, he = ve)
                    }
                for (var we = E(u), ke = E(le), Ee = pe.split(","), Se = fe[pe], Ce = Ee.length - 1, Me = 0; Me < Ee.length; Me++) {
                    var Pe = parseInt(Ee[Me]),
                        Te = we.splice(0, Pe),
                        De = Se.shift(),
                        Ie = Te.length - 1,
                        xe = {};
                    Ce == Me && (xe.lastRow = !0);
                    for (var Oe = b, Le = 0; Le < Te.length; Le++) {
                        var Be = Te[Le],
                            Re = ke.shift(),
                            Ne = xe,
                            je = void 0;
                        Ie == Le ? (je = Math.ceil(Oe), Ne.lastColumn = !0) : (je = intval(Re * De), Oe -= je + P), d[d.length] = y(Be, je, De, Ne)
                    }
                }
                I = b, x = he
            }
            return {
                width: intval(I),
                height: intval(x),
                thumbs: d
            }
        }, t.compute = y, t.getSize = b, t.move = function(e, t, n) {
            if (n >= e.length)
                for (var i = n - e.length; 1 + i--;) e.push(void 0);
            return e.splice(n, 0, e.splice(t, 1)[0]), e
        }, t.scale = function(e, t, n, i) {
            n = intval(n), i = intval(i) || n;
            var a = e,
                r = t;
            e >= t && e > n ? (a = intval(n), r = intval(t / (e / n))) : e < t && t > i && (r = intval(i), a = intval(e / (t / i)));
            return [a, r]
        }, t.crop = function(e, t, n) {
            var i = t,
                a = n,
                r = 0,
                o = 0;
            if (!e.vid && e.image.width && e.image.height) {
                var s = e.image.width / e.image.height;
                s < t / n ? (e.single && e.image.width < t && (t = e.image.width, n = Math.min(n, e.image.height)), (a = (i = t) / s) > n && (o = -intval((a - n) / 2))) : (e.single && e.image.height < n && (n = e.image.height, t = Math.min(t, e.image.width)), (i = (a = n) * s) > t && (r = -intval((i - t) / 2)))
            }
            return {
                width: i,
                height: a,
                marginLeft: r,
                marginTop: e.orig && (e.type === u || e.type === c) && e.single ? 0 : o
            }
        }, t.getRatio = w, t.convert = function(e, t, n, i) {
            var d = r(t.split("_"), 2),
                f = d[0],
                h = d[1],
                p = a({
                    owner_id: f,
                    ownerId: f,
                    itemId: h,
                    type: e,
                    remove: n.remove,
                    click: n.click,
                    temp: "temp" in n.sizes
                }, i);
            switch (e) {
                case o:
                    p.data = {
                        sizes: n.sizes,
                        ratio: n.ratio,
                        label: n.label,
                        href: n.href
                    }, p.doc = p.data;
                    break;
                case s:
                    p.data = {
                        pid: h,
                        sizes: n.sizes
                    }, p.photo = p.data;
                    break;
                case l:
                    p.data = {
                        vid: h,
                        duration: n.duration,
                        platform: n.platform,
                        play_icon: n.play_icon,
                        active_live: n.active_live,
                        ratio: n.ratio,
                        sizes: n.sizes,
                        name: n.name
                    }, p.video = p.data;
                    break;
                case c:
                    p.data = {
                        aid: h,
                        title: n.title,
                        size: n.size,
                        thumb: {
                            sizes: n.sizes
                        }
                    }, p.album = p.data;
                    break;
                case u:
                    p.data = {
                        type: u,
                        aid: h,
                        title: n.title,
                        msize: n.msize,
                        thumb: {
                            sizes: n.sizes
                        }
                    }, p.market_album = p.data
            }
            return p.data.type = e, p.data.id = p.temp ? "".concat(e, "temp_").concat(f) : "".concat(e).concat(p.ownerId, "_").concat(p.itemId), p
        }, t.isValidThumbType = k, t.THUMBS_MESH_GAP_MVK_SMALL = t.THUMBS_MESH_GAP_MVK = t.THUMBS_MESH_GAP = t.THUMBS_CONTAINER_MAX_WIDTH_WIDE = t.THUMBS_CONTAINER_DEFAULT_RATIO = t.THUMB_VIDEO_DEFAULT_RATIO = t.THUMB_DRAG_ANIMATION_DURATION = t.THUMB_DEFAULT_RATIO = t.THUMB_ALBUM_DEFAULT_RATIO = t.THUMBS_CONTAINER_MAX_HEIGHT_WIDE = t.THUMB_TYPE_VIDEO = t.THUMB_TYPE_PHOTO = t.THUMB_TYPE_MARKET_ALBUM = t.THUMB_TYPE_DOC = t.THUMB_TYPE_ALBUM = void 0, !window.isMVK && (window.vkExpand = window.vkExpand || "VK" + +new Date, window.vkUUID = window.vkUUID || 0, window.vkCache = window.vkCache || {});
        var o = "doc";
        t.THUMB_TYPE_DOC = o;
        var s = "photo";
        t.THUMB_TYPE_PHOTO = s;
        var l = "video";
        t.THUMB_TYPE_VIDEO = l;
        var c = "album";
        t.THUMB_TYPE_ALBUM = c;
        var u = "market_album";
        t.THUMB_TYPE_MARKET_ALBUM = u;
        t.THUMBS_CONTAINER_DEFAULT_RATIO = 1.5;
        var d = 1;
        t.THUMB_DEFAULT_RATIO = d;
        var f = 1.777;
        t.THUMB_VIDEO_DEFAULT_RATIO = f;
        var h = 1.5;
        t.THUMB_ALBUM_DEFAULT_RATIO = h;
        var p = window.isMVK ? 200 : 120;
        t.THUMB_DRAG_ANIMATION_DURATION = p;
        var A = 5;
        t.THUMBS_MESH_GAP = A;
        var m = 6;
        t.THUMBS_MESH_GAP_MVK = m;
        var _ = 3;
        t.THUMBS_MESH_GAP_MVK_SMALL = _;
        var v = window.isMVK ? 604 : 537;
        t.THUMBS_CONTAINER_MAX_WIDTH_WIDE = v;
        var g = window.isMVK ? 360 : 343;

        function y(e, t, n, i) {
            var a = {
                id: e.id,
                width: intval(t),
                height: intval(n),
                lastColumn: i.lastColumn,
                lastRow: i.lastRow,
                single: i.single,
                image: b(e, t, n, i.single),
                unsized: e.unsized,
                type: e.type,
                orig: e
            };
            return e.title && void 0 !== e.size ? extend(a, {
                title: e.title,
                size: e.size
            }) : e.title && void 0 !== e.msize ? extend(a, {
                title: e.title,
                msize: e.msize
            }) : e.type === l && e.name && void 0 !== e.name && extend(a, {
                name: e.namem
            }), "number" == typeof e.duration && (e.duration = formatTime(e.duration)), a.unsized ? a.ratio = d : a.ratio = a.image.width / a.image.height, a
        }

        function b(e, t, n, i) {
            if (!e) return {};
            t = intval(t), n = intval(n);
            var a, r = window.devicePixelRatio || 1;
            if (e.type === l || e.type === o) {
                (e.vid ? ["x", "y", "l", "s", "m"] : ["o", "z", "y", "x", "m", "s", "temp"]).forEach(function(i) {
                    e.sizes[i] && (!a || t * r <= e.sizes[i][1] && n * r <= e.sizes[i][2]) && (a = e.sizes[i])
                })
            } else {
                var s = e.thumb ? e.thumb.sizes : e.sizes,
                    c = s.x || s[s.length - 1],
                    u = c ? (c[1] || 1) / (c[2] || 1) : d,
                    f = 0;
                u > t / n ? (f = n, u > 1 && (f *= u)) : (f = t, u < 1 && (f /= u)), n *= r, t *= r;
                var h = !i && s.o,
                    p = "";
                p = s.temp ? "temp" : f < 75 ? "s" : f < 130 ? "m" : h && s.o && s.o[1] >= t && s.o[2] >= n ? "o" : h && s.p && s.p[1] >= t && s.p[2] >= n ? "p" : h && s.q && s.q[1] >= t && s.q[2] >= n ? "q" : h && s.r && s.r[1] >= t && s.r[2] >= n ? "r" : "x", a = s[p]
            }
            return a[1] = intval(a[1]), a[2] = intval(a[2]), a[1] && a[2] || (e.unsized = !0), {
                src: a[0],
                width: a[1],
                height: a[2]
            }
        }

        function w(e, t, n) {
            var i;
            switch (e.type) {
                case o:
                    i = e.ratio;
                    break;
                case l:
                    i = e.ratio || f;
                    break;
                case c:
                case u:
                    i = h;
                    break;
                default:
                    if (e.sizes && e.sizes.x) {
                        var a = r(e.sizes.x, 3),
                            s = a[1],
                            p = a[2];
                        s && p && (i = s / p)
                    }
                    if (e.sizes && e.sizes.temp) {
                        var A = r(e.sizes.temp, 3),
                            m = A[1],
                            _ = A[2];
                        m && _ && (i = m / _)
                    }
            }
            return i || d
        }

        function k(e) {
            return !!~[o, s, l, c, u].indexOf(e.toString())
        }

        function E(e, t) {
            var n = S(e) || void 0 === e.length ? {} : [];
            for (var a in e)(!/webkit/i.test(_ua) || "layerX" != a && "layerY" != a && "webkitMovementX" != a && "webkitMovementY" != a) && (t && "object" === i(e[a]) && "prototype" !== a && null !== e[a] ? n[a] = E(e[a]) : n[a] = e[a]);
            return n
        }
        t.THUMBS_CONTAINER_MAX_HEIGHT_WIDE = g;
        var S = function(e) {
            return "[object Object]" === Object.prototype.toString.call(e)
        }
    },
    QcsT: function(e, t, n) {
        "use strict";
        var i = n("UxAg"),
            a = window.page,
            r = window.photoview;
        a.onChange(u), r.onHide(u), r.onShow(d);
        var o, s = "#5181b8",
            l = "#000",
            c = (0, i.$)('meta[name="theme-color"]');

        function u() {
            f(s)
        }

        function d() {
            f(l)
        }

        function f(e) {
            o || (o = (0, i.$)("#theme_color_shim")), c && c.setAttribute("content", e), o && (o.style.backgroundColor = e)
        }
    },
    Qg0H: function(e, t, n) {
        "use strict";
        var i = n("UxAg"),
            a = o(n("TYsd")),
            r = o(n("+cqQ"));

        function o(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        window.Voting = {
            cls: "Voting",
            setLoading: h,
            setHtml: function(e, t) {
                u(e).forEach(function(e) {
                    e.outerHTML = t
                }), u(e).forEach(function(e) {
                    e.classList.add(l.beforeAnimation)
                }), setTimeout(function() {
                    u(e).forEach(function(e) {
                        e.classList.remove(l.beforeAnimation), Voting.onHtmlUpdate(e)
                    })
                }, 30)
            },
            getVotingsById: u,
            onHtmlUpdate: (0, r.default)("$voting")
        }, Voting._onSubmit = p, Voting._onSingleAnswerClick = f, Voting._onCheckboxClick = d, Voting._onRevoteClick = A;
        var s = "_Voting_singleAnswerAction",
            l = {
                loading: "Voting_loading",
                beforeAnimation: "Voting_beforeAnimation",
                hasCheckedOptions: "Voting_hasCheckedOptions"
            },
            c = {
                voting: ".Voting",
                votingById: function(e) {
                    return '.Voting[data-id="'.concat(e, '"]')
                },
                optionControl: ".Voting__optionControl",
                submit: ".Voting__submit"
            };

        function u(e) {
            return (0, i.$$)(c.votingById(e))
        }

        function d(e) {
            var t = e.closest(c.voting),
                n = Array.from((0, i.$$)(c.optionControl)).some(function(e) {
                    return e.checked
                });
            t.classList.toggle(l.hasCheckedOptions, n)
        }

        function f(e) {
            var t = e.name,
                n = e.value,
                i = e.closest("form"),
                a = i.getAttribute("action");
            i[s] = a + "&" + t + "=" + encodeURIComponent(n)
        }

        function h(e) {
            e.classList.add(l.loading)
        }

        function p(e, t, n) {
            var i;
            if (e.preventDefault(), t[s]) i = t[s], h(t);
            else {
                var r = Array.from(t.$$("input:checked"));
                if (0 === r.length) return;
                var o = r[0].name,
                    l = r.map(function(e) {
                        return e.value
                    }).join(","),
                    c = t.getAttribute("action"),
                    u = c.includes("?") ? "&" : "?";
                h(t);
                var d = t.$('input[name="is_board"]').value;
                i = "".concat(c).concat(u).concat(o, "=").concat(l, "&is_board=").concat(d)
            }
            a.default.handle(n, {
                $voting: t,
                url: i
            })
        }

        function A(e, t) {
            var n = e.closest(c.voting);
            a.default.handle(t, {
                $voting: n
            })
        }
    },
    Qwnw: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i = r(n("gMTq")),
            a = r(n("29dZ"));

        function r(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        Object.assign(i.default, {
            rejectAll: function(e, t) {
                a.default.setLoading(t, !0), i.default.onRejectAll(t)
            },
            onRejectAll: befall()
        });
        var o = i.default;
        t.default = o
    },
    QySK: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        n("pQDp");
        var i = n("sWID"),
            a = n("ywff"),
            r = n("lkNA");

        function o(e, t) {
            return function(e) {
                if (Array.isArray(e)) return e
            }(e) || function(e, t) {
                if (!(Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e))) return;
                var n = [],
                    i = !0,
                    a = !1,
                    r = void 0;
                try {
                    for (var o, s = e[Symbol.iterator](); !(i = (o = s.next()).done) && (n.push(o.value), !t || n.length !== t); i = !0);
                } catch (e) {
                    a = !0, r = e
                } finally {
                    try {
                        i || null == s.return || s.return()
                    } finally {
                        if (a) throw r
                    }
                }
                return n
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance")
            }()
        }

        function s(e, t) {
            for (var n = 0; n < t.length; n++) {
                var i = t[n];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        }
        var l, c, u, d = window,
            f = d.geByTag,
            h = d.geByTag1,
            p = d.each,
            A = d.nav,
            m = d.removeClass,
            _ = d.intval,
            v = d.toggleClass,
            g = d.domData,
            y = d.domQuery1,
            b = d.getW,
            w = d.getXY,
            k = d.getH,
            E = d.geByClass,
            S = d.ge,
            C = d.matchesSelector,
            M = {};
        window._articleCarouselGlobalId = window._articleCarouselGlobalId || 1;
        var P = function() {
            function e(t, n, i) {
                var a = this;
                ! function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, e), this._article = t, this._options = n, this._readTO = null, this._scrollStatEvent = !1, this._openTime = 0, this._els = {
                    view: S("article_view_".concat(t.raw_id))
                }, window.cur && cur.destroy && cur.destroy.push(function() {
                    a.deinit()
                }), window.cur && cur.destroy.push(function() {
                    a.deinit()
                }), window.addEventListener("VKWebAppEvent", function(e) {
                    if (e && e.detail && void 0 !== e.detail.index) {
                        var t = e.detail.index;
                        if (u) {
                            var n = M[g(u, "id")];
                            n && n(t)
                        }
                    }
                }), i && this.ready()
            }
            var t, n, d;
            return t = e, (n = [{
                key: "getEl",
                value: function() {
                    return this._els.view
                }
            }, {
                key: "getArticle",
                value: function() {
                    return this._article
                }
            }, {
                key: "getScrollNode",
                value: function() {
                    return this._options.getScrollNode ? this._options.getScrollNode() : document
                }
            }, {
                key: "_getScrollTop",
                value: function() {
                    return this._options.getScrollTop ? this._options.getScrollTop() : window.scrollNode ? window.scrollNode.scrollTop : window.document.documentElement.scrollTop
                }
            }, {
                key: "getTimeSpent",
                value: function() {
                    return Math.round((Date.now() - this._openTime) / 1e3)
                }
            }, {
                key: "deinit",
                value: function() {
                    this._scrollEvent && (this.getScrollNode().removeEventListener("scroll", this._scrollEvent), this._scrollEvent = !1), this._scrollStatEvent && (this.getScrollNode().removeEventListener("scroll", this._scrollStatEvent), this._scrollStatEvent = !1), clearTimeout(this._readTO)
                }
            }, {
                key: "_onViewScroll",
                value: function() {
                    var e = this,
                        t = this._options.mobile ? scrollGetY() : window.scrollNode.scrollTop,
                        n = window.innerHeight;
                    p(f("figure", this._els.view), function(i, a) {
                        var r = _(g(a, "done"));
                        if (!r) {
                            var o = k(a),
                                s = w(a)[1],
                                l = _(g(a, "type")),
                                c = 101 == l ? -200 : 100,
                                u = s <= t + n - c && t + c <= s + o;
                            (r = e._onObjectView(u, l, a)) && g(a, "done", 1)
                        }
                    }), p(f("figure", this._els.view), function(i, a) {
                        var r, o = k(a),
                            s = w(a)[1],
                            l = _(g(a, "type")),
                            c = s,
                            u = s + o,
                            d = t,
                            f = t + n;
                        if (c > f || d > u) r = !1;
                        else {
                            var h = Math.max(c, d);
                            r = (Math.min(u, f) - h) / o > .7
                        }
                        e._onObjectPartialView(r, l, a)
                    })
                }
            }, {
                key: "_initObjects",
                value: function() {
                    var e = this;
                    this._initedObjects = this._initedObjects || {}, p(E("_article_unmute_button", this._els.view), function(t, n) {
                        e._initedObjects[t] || (e._initedObjects[t] = !0, n.addEventListener("click", function() {
                            var e = n.parentNode,
                                t = h("video", e);
                            t.muted = !t.muted, v(e, "article_object_unmuted", !t.muted)
                        }))
                    }), p(f("figure", this._els.view), function(t, n) {
                        if (!e._initedObjects[t]) switch (e._initedObjects[t] = !0, parseInt(g(n, "type"))) {
                            case i.ParagraphType.ObjectPhoto:
                                var r = (0, a.initPhotoCarousel)(n, {
                                    mobile: e._options.mobile,
                                    moderDeletePhoto: e._options.moderDeletePhoto,
                                    onClick: function(t) {
                                        e.sendStats({
                                            type: t
                                        })
                                    }
                                });
                                if (e._initPhoto(n), r) {
                                    var o = window._articleCarouselGlobalId++;
                                    n.setAttribute("data-carousel-id", o), M[o] = r
                                }
                                break;
                            case i.ParagraphType.ObjectAudio:
                            case i.ParagraphType.ObjectAudioPlaylist:
                                geByClass1("article_figure_content", n).addEventListener("click", function() {
                                    e.sendStats({
                                        type: i.ArticleStatsEvents.clickOnAudio
                                    })
                                }, !0);
                                break;
                            case i.ParagraphType.ObjectMarketItem:
                            case i.ParagraphType.ObjectAliExpressProduct:
                                break;
                            case i.ParagraphType.ObjectGIF:
                            case i.ParagraphType.ObjectVideo:
                                if (e._options.mobile) {
                                    var s = h("video", n);
                                    s && (s.addEventListener("play", function() {
                                        e.sendStats({
                                            type: i.ArticleStatsEvents.clickOnVideo
                                        })
                                    }), s.addEventListener("pause", function() {
                                        e.sendStats({
                                            type: i.ArticleStatsEvents.clickOnVideo
                                        })
                                    }))
                                } else geByClass1("article_figure_content", n).addEventListener("click", function() {
                                    e.sendStats({
                                        type: i.ArticleStatsEvents.clickOnVideo
                                    })
                                }, !0)
                        }
                    }), this._els.view.addEventListener("click", function(t) {
                        var n = t.target;
                        if (C(n, 'a[href^="/away"]')) {
                            var a = decodeURIComponent(unescape(n.href)).split("vk.com/away.php?to=")[1];
                            a && e.sendStats({
                                type: i.ArticleStatsEvents.clickOnExternalLink,
                                domain: encodeURIComponent(e._getUrlDomain(a))
                            })
                        }
                    })
                }
            }, {
                key: "_initPhoto",
                value: function(e) {
                    var t = this;
                    geByClass1("article_figure_content", e).addEventListener("click", function() {
                        var n = y("[data-sizes]", e),
                            a = JSON.parse(g(n, "sizes")),
                            r = _(g(e, "photo-carousel-index"));
                        t._options.onImageOpen && t._options.onImageOpen.call(t, a, e, r), t.sendStats({
                            type: i.ArticleStatsEvents.clickOnPhoto
                        })
                    })
                }
            }, {
                key: "_initStats",
                value: function() {
                    if (this._statsInited) this._scrollStatEvent && this._scrollStatEvent();
                    else {
                        this._statsInited = !0, this._openTime = Date.now();
                        var e, t = -1,
                            n = [];
                        this._scrollStatEvent && this.getScrollNode().removeEventListener("scroll", this._scrollStatEvent), clearTimeout(this._readTO);
                        var a = this;
                        this.getScrollNode().addEventListener("scroll", this._scrollStatEvent = function() {
                            var i = a.getCurrentScrollRatio();
                            if (!(i < 0)) {
                                var o = 1;
                                i >= .95 ? o = 4 : i > .66 ? o = 3 : i > .33 && (o = 2),
                                    function(i) {
                                        if (a._isReady && (a._article.has_more && (i = Math.min(i, 1)), !(t >= i))) {
                                            for (var o = t + 1; o <= i; o++) n.push(o);
                                            if (t = i, clearTimeout(e), e = setTimeout(r, 300), 3 == i && a._article.ttr) {
                                                var s = a._article.ttr - a.getTimeSpent();
                                                s > 0 && (a._readTO = setTimeout(function() {
                                                    if (!document.hidden) {
                                                        var e = a.getCurrentScrollRatio();
                                                        if (!(e < 0 || e > 1.3)) {
                                                            var i = 4 == t;
                                                            n = [t = 4], r(i)
                                                        }
                                                    }
                                                }, 1e3 * s))
                                            }
                                        }
                                    }(o), 4 != o || a._article.has_more || (a.getScrollNode().removeEventListener("scroll", a._scrollStatEvent), a._scrollStatEvent = !1)
                            }
                        }, {
                            passive: !0
                        }), this._scrollStatEvent && this._scrollStatEvent()
                    }

                    function r(e) {
                        if (n.length) {
                            var t = a._article,
                                r = a._options,
                                o = "";
                            t.ref ? o = t.ref : window.cur && "feed" === (o = window.cur.module) && cur.articlePrevLoc && !r.mobile && "search" === A.fromStr(cur.articlePrevLoc).section && (o = "feed_search");
                            var s = {
                                act: "stats",
                                scroll: n.join(","),
                                spent: a.getTimeSpent(),
                                hash: t.access_hash,
                                article_owner_id: t.owner_id,
                                article_id: t.id,
                                is_web_view: r.isWebView ? 1 : 0,
                                post_id: r.sourcePostId,
                                is_widget: r.isWidget,
                                is_delayed_scroll_4: _(e),
                                track_code: r.trackCode,
                                ref: o
                            };
                            ajax.post(r.mobile ? "article.php" : "al_articles.php", s), t.mailru_stats_data && n.forEach(function(e) {
                                (0, i.mailruStatsPixel)("scroll_".concat(e), t.mailru_stats_data)
                            }), n = []
                        }
                    }
                }
            }, {
                key: "_initGoogleAnalytics",
                value: function() {
                    var e = this._options.googleAnalyticsId;
                    if (e)
                        if (window.dataLayer = window.dataLayer || [], window.gtag) gtag("config", e, {
                            page_location: window.location.href
                        });
                        else {
                            var t = document.createElement("script");
                            t.setAttribute("src", "https://www.googletagmanager.com/gtag/js?id=".concat(e)), t.setAttribute("async", "true"), document.head.appendChild(t), window.gtag = function() {
                                dataLayer.push(arguments)
                            }, gtag("js", new Date), gtag("config", e)
                        }
                }
            }, {
                key: "_onObjectPartialView",
                value: function(e, t, n) {
                    if (t == i.ParagraphType.ObjectPhoto) {
                        var a = y("[data-sizes]", n);
                        if (JSON.parse(g(a, "sizes")).length > 1) {
                            var r = n.getAttribute("data-carousel-id");
                            e ? c != r && (clearTimeout(l), l = setTimeout(function() {
                                var e = M[r];
                                e && e(1, !0)
                            }, 400), c = r) : r == c && (c = -1, clearTimeout(l))
                        }
                    }
                }
            }, {
                key: "_onObjectView",
                value: function(e, t, n) {
                    var a = !1;
                    switch (t) {
                        case i.ParagraphType.ObjectPhoto:
                            if (e) {
                                var r = h("img", n),
                                    s = b(r) || this._options.width,
                                    l = y("[data-sizes]", n),
                                    c = JSON.parse(g(l, "sizes")),
                                    u = f("img", n);
                                c.forEach(function(e, t) {
                                    var n = o((0, i.getAppropriateImage)(c[t], s, !0), 1)[0];
                                    (0, i.preloadImage)(n, function() {
                                        var e = u[t];
                                        m(e, "article_object_photo__image_blur"), e.src = n
                                    })
                                }), a = !0
                            }
                            break;
                        case i.ParagraphType.ObjectGIF:
                            if (!this._options.mobile) {
                                var d = h("video", n);
                                if (d)
                                    if (e) {
                                        if (d.hasAttribute("autoplay")) {
                                            var p = d.play();
                                            p && p.catch(function() {})
                                        }
                                    } else d.pause();
                                else a = !0
                            }
                            break;
                        case i.ParagraphType.ObjectTwitter:
                        case i.ParagraphType.ObjectFacebook:
                        case i.ParagraphType.ObjectInstagram:
                        case i.ParagraphType.ObjectVK:
                        case i.ParagraphType.ObjectTelegram:
                            this.initEmbed(t, n), a = !0
                    }
                    return a
                }
            }, {
                key: "initEmbed",
                value: function(e, t) {
                    var n = this;
                    switch (e) {
                        case i.ParagraphType.ObjectTwitter:
                            var a = y("[data-tweet-id]", t),
                                s = g(a, "tweet-id");
                            (0, r.loadScript)("https://platform.twitter.com/widgets.js", {
                                onLoad: function() {
                                    twttr.widgets.createTweet(s, a, {
                                        align: "center",
                                        lang: window.vk && 0 == window.vk.lang ? "ru" : "en",
                                        dnt: !0
                                    })
                                }
                            });
                            break;
                        case i.ParagraphType.ObjectFacebook:
                            var l = window.vk && 0 == window.vk.lang ? "ru_RU" : "en_US";
                            (0, r.loadScript)("https://connect.facebook.net/".concat(l, "/all.js#xfbml=1&amp;version=v2.8"), {
                                onLoad: function() {
                                    FB.XFBML.parse()
                                }
                            });
                            break;
                        case i.ParagraphType.ObjectInstagram:
                            (0, r.loadScript)("https://www.instagram.com/embed.js", {
                                onLoad: function() {
                                    window.instgrm.Embeds.process(), addEvent(window, "message", i.changeHeightInstagramEmbed)
                                }
                            });
                            break;
                        case i.ParagraphType.ObjectVK:
                            var c = y("[data-raw-id]", t),
                                u = g(c, "raw-id"),
                                d = g(c, "index"),
                                f = o(u.split(";"), 2),
                                h = f[0],
                                p = f[1];
                            (0, r.loadScript)("/js/api/openapi.js", {
                                onLoad: function() {
                                    ajax.post("dev.php", {
                                        act: "a_get_post_hash",
                                        post: "".concat(h, "_").concat(p)
                                    }, {
                                        onDone: function(e) {
                                            e && window.VK && window.VK.Widgets && window.VK.Widgets.Post("vk_post_".concat(u, "_").concat(d), h, p, e, {
                                                from: n._options.isWebView ? "article_webview" : ""
                                            })
                                        }
                                    })
                                }
                            });
                            break;
                        case i.ParagraphType.ObjectTelegram:
                            (0, r.loadScript)("https://telegram.org/js/telegram-widget.js?5", {})
                    }
                }
            }, {
                key: "getCurrentScrollRatio",
                value: function() {
                    var e = k(this._els.view),
                        t = w(this._els.view)[1] - w(this.getScrollNode().firstElementChild)[1];
                    return (this._getScrollTop() + window.innerHeight - t) / e
                }
            }, {
                key: "getScreenVisibilityRatio",
                value: function() {
                    var e = k(this._els.view),
                        t = w(this._els.view)[1] - w(this.getScrollNode().firstElementChild)[1],
                        n = this._getScrollTop(),
                        i = window.innerHeight,
                        a = t,
                        r = t + e,
                        o = n,
                        s = n + i;
                    if (o > r || a > s) return 0;
                    var l = Math.max(a, o);
                    return (Math.min(r, s) - l) / i
                }
            }, {
                key: "update",
                value: function() {
                    this._initObjects(), this._initStats(), this._options.onScroll && this._options.onScroll.call(this, this.getCurrentScrollRatio())
                }
            }, {
                key: "ready",
                value: function() {
                    var e = this;
                    this._isReady = !0, this._initObjects(), this._initStats(), this._initGoogleAnalytics(), setTimeout(function() {
                        var t = (0, i.getUrlParam)("anchor");
                        if (t) {
                            e._options.isWebView || e.scrollToAnchor(t);
                            var n = e.getScrollNode();
                            n === document && (n = document.scrollingElement || window.scrollNode || document.body), n.click && n.click(), n.focus()
                        }
                    }, 0), !this._options.mobile && window.AudioPlaylist && this._article.audios_list && this._article.audios_list.length > 0 && new AudioPlaylist(AudioPlaylist.TYPE_TEMP, this._article.owner_id, "article_" + this._article.id).mergeWith({
                        list: this._article.audios_list
                    }), this.getScrollNode().addEventListener("scroll", this._scrollEvent = function() {
                        e._onViewScroll(), e._options.onScroll && e._options.onScroll.call(e, e.getCurrentScrollRatio())
                    }), setTimeout(function() {
                        e._scrollEvent()
                    }, this._options.objectsInitDelay || 0)
                }
            }, {
                key: "scrollToAnchor",
                value: function(e) {
                    e = e || (0, i.getUrlParam)("anchor");
                    var t = this._options,
                        n = this.getScrollNode();
                    n === document && (n = document.scrollingElement || window.scrollNode || document.body), e && function() {
                        var i = document.getElementById(e);
                        if (i) {
                            "scrollRestoration" in history && (history.scrollRestoration = "manual");
                            var a = t.isWebView ? 0 : 25,
                                r = i.parentNode.parentNode.offsetTop - a;
                            window.setTimeout(function() {
                                n.scrollTo ? n.scrollTo(0, r) : n.scrollTop = r
                            }, 0)
                        }
                    }()
                }
            }, {
                key: "sendStats",
                value: function(e) {
                    var t = this._article,
                        n = this._options,
                        i = {
                            act: "stats",
                            spent: this.getTimeSpent(),
                            article_id: t.id,
                            article_owner_id: t.owner_id,
                            hash: t.access_hash,
                            is_web_view: n.isWebView ? 1 : 0
                        };
                    Object.assign(i, e), ajax.post(n.mobile ? "article.php" : "al_articles.php", i)
                }
            }, {
                key: "_getUrlDomain",
                value: function(e) {
                    var t = document.createElement("a");
                    return t.href = e, t.hostname
                }
            }]) && s(t.prototype, n), d && s(t, d), e
        }();
        t.default = P
    },
    RHkR: function(e, t, n) {
        "use strict";
        var i, a = (i = n("myok")) && i.__esModule ? i : {
            default: i
        };

        function r() {
            return (r = Object.assign || function(e) {
                for (var t = 1; t < arguments.length; t++) {
                    var n = arguments[t];
                    for (var i in n) Object.prototype.hasOwnProperty.call(n, i) && (e[i] = n[i])
                }
                return e
            }).apply(this, arguments)
        }
        window.groupInvitationClick = function(e, t) {
            var n = t.$btn,
                i = n.getAttribute("href");
            (n.nextElementSibling || n.previousElementSibling).remove(), ajax.post(i, {
                _ajax: 1
            }, {
                onDone: function() {}
            }), n.closest(".BtnStack").outerHTML = '\n    <div class="notification__tempText">'.concat(e, "</div>\n  ")
        }, window.apiCallAction = function(e, t, n, i, r, o, s) {
            var l = s.$btn,
                c = l.getAttribute("href"),
                u = l.nextElementSibling || l.previousElementSibling,
                d = t ? '<span class="notification__tempIcon '.concat(t, 'Icon"></span>') : "";
            i && !confirm(i) || (a.default.setLoading(l, !0), ajax.post(c, {
                _ajax: 1
            }, {
                onDone: function() {
                    a.default.setLoading(l, !1), u && u.remove(), l.closest(".BtnStack").outerHTML = '<div class="notification__tempText">'.concat(d).concat(e, "</div>")
                }
            }))
        }, window.NotifierPage = {
            notifyMarkAsViewed: function(e) {
                ajax.post("feed.php", {
                    _ajax: 1,
                    section: "notifications",
                    hash: e,
                    action: "mark_as_viewed"
                })
            }
        }, window.NotifyItem = {
            _onPhotoTagAcceptClick: function(e, t, n) {
                var i = n.$btn,
                    a = i.getAttribute("href");
                i.nextElementSibling || i.previousElementSibling;
                ajax.post(a, {
                    _ajax: 1
                }, {
                    onDone: function() {}
                }), i.closest(".BtnStack").outerHTML = '\n      <div class="notification__tempText">'.concat(t, "</div>\n    ")
            },
            _onPhotoTagDeclineClick: function(e, t, n) {
                var i = n.$btn,
                    a = i.getAttribute("href");
                i.nextElementSibling || i.previousElementSibling;
                ajax.post(a, {
                    _ajax: 1
                }, {
                    onDone: function() {}
                }), i.closest(".BtnStack").outerHTML = '\n      <div class="notification__tempText">'.concat(t, "</div>\n    ")
            },
            _onHideClick: function(e, t, n) {
                e.preventDefault();
                var i = e.target,
                    a = i.getAttribute("href"),
                    r = a + "&action=hide",
                    o = a + "&action=restore";
                (!n || confirm(n)) && ajax.post(r, {
                    _ajax: 1
                }, {
                    onDone: function() {
                        var e = i.closest(".notificationList__items") || i.closest(".notificationList"),
                            n = i.closest(".notification"),
                            a = n.getAttribute("id"),
                            r = e.closest(".notificationList");
                        if (hide(n), NotifyItem._onBodyScroll(), r.classList.contains("notificationList_type_unread")) {
                            var s = r.$(".Pad__title"),
                                l = parseInt(s.innerText, 10) - 1;
                            s.innerText = langNumeric(l, lang.mobile_notifications_new)
                        }
                        var c = !0;
                        each(geByClass("notification", e), function(e, t) {
                            isVisible(t) && (c = !1)
                        }), c && r.classList.add("Pad_empty");
                        var u = window.Snackbar;
                        u && u.init && u.init({
                            text: t,
                            action: {
                                url: o,
                                text: lang.mobile_notifications_restore,
                                callback: ["NotifyItem._onRestoreClick", "event", a]
                            }
                        })
                    }
                })
            },
            _onRestoreClick: function(e, t, n) {
                var i = n.id,
                    a = n.url;
                e.preventDefault();
                var r = ge(t);
                ajax.post(a, {
                    _ajax: 1
                }, {
                    onDone: function() {
                        ge(t).style.display = "", Snackbar.close(i);
                        var e = r.closest(".notificationList__items") || r.closest(".notificationList"),
                            n = e.closest(".notificationList");
                        if (n.classList.contains("notificationList_type_unread")) {
                            var a = n.$(".Pad__title"),
                                o = parseInt(a.innerText, 10) + 1;
                            a.innerText = langNumeric(o, lang.mobile_notifications_new)
                        }
                        var s = !0;
                        each(geByClass("notification", e), function(e, t) {
                            isVisible(t) && (s = !1)
                        }), s || n.classList.remove("Pad_empty")
                    }
                })
            },
            _onBodyScroll: function() {
                $$(".notification_actionsOpen").forEach(function(e) {
                    e.classList.remove("notification_actionsOpen")
                }), window.removeEventListener("scroll", NotifyItem._onBodyScroll)
            },
            _onActionTriggerClick: function(e) {
                window.addEventListener("scroll", NotifyItem._onBodyScroll);
                var t = e.closest(".notification");
                t.classList.remove("notification_reverse"), t.classList.toggle("notification_actionsOpen"), $$(".notification_actionsOpen").forEach(function(e) {
                    e !== t && e.classList.remove("notification_actionsOpen")
                }), t.$(".notification__actionsBubble").getBoundingClientRect().y < 50 && t.classList.add("notification_reverse")
            }
        }, window.FriendRequest = {
            _onAcceptClick: function(e, t) {
                var n = t.$btn,
                    i = n.getAttribute("href"),
                    a = n.nextElementSibling || n.previousElementSibling;
                a && a.remove(), ajax.post(i, {
                    _ajax: 1
                }, {
                    onDone: function() {}
                }), n.closest(".BtnStack").outerHTML = '\n      <div class="notification__tempText">'.concat(e, "</div>\n    ")
            },
            _onDeclineClick: function(e, t) {
                var n = t.$btn,
                    i = n.getAttribute("href"),
                    a = n.nextElementSibling || n.previousElementSibling;
                a && a.remove(), ajax.post(i, {
                    _ajax: 1
                }, {
                    onDone: function() {}
                }), n.closest(".BtnStack").outerHTML = '\n      <div class="notification__tempText">'.concat(e, "</div>\n    ")
            }
        }, window.GroupNotify = {
            deleteSource: function(e, t) {
                return ajax.post("feed.php", {
                    gid: e,
                    hash: t,
                    act: "group_notify_delete_source"
                }, {
                    onDone: function() {}
                }), !1
            },
            addSource: function(e, t, n) {
                this.processQuery("group_notify_add_source", e, t, n)
            },
            editSource: function(e, t) {
                this.processQuery("group_notify_edit_source", e, t)
            },
            processQuery: function(e, t, n, i) {
                var a = $(".group_notify_general .Control_type_switcher input.Control__native").checked ? 1 : 0,
                    o = {};
                $$(".group_notify_params .Control_type_switcher input.Control__native").forEach(function(e) {
                    o["type_" + e.name] = e.checked ? 1 : 0
                }), ajax.post("feed.php", r({
                    gid: t,
                    hash: n,
                    unmuted: a,
                    from: i
                }, o, {
                    act: e
                }), {
                    onDone: function() {}
                })
            },
            gn_grProcess: function(e, t, n, i) {
                ajax.post("club" + e, {
                    act: "user_action",
                    mid: t,
                    hash: n,
                    from: "top_notifier",
                    action: i
                }, {
                    onDone: function() {}
                })
            }
        }
    },
    RVJ9: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), Object.defineProperty(t, "open", {
            enumerable: !0,
            get: function() {
                return i.open
            }
        }), Object.defineProperty(t, "init", {
            enumerable: !0,
            get: function() {
                return i.init
            }
        });
        var i = n("Mf5j");
        window.ZeroVKPopup = {
            open: i.open,
            init: i.init
        }
    },
    RVNN: function(e, t, n) {
        "use strict";
        var i;
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var a = ((i = n("FflB")) && i.__esModule ? i : {
            default: i
        }).default;
        t.default = a
    },
    RikE: function(e, t, n) {
        "use strict";
        var i = n("UxAg");
        window.TabRow = {
            setSelectedTab: function(e, t) {
                var n = (0, i.$)(r.tabRowById(e)),
                    o = (0, i.$)(r.tabSelected, n),
                    s = (0, i.$)(r.tabById(t), n);
                o && o.classList.remove(a.selected), s && s.classList.add(a.selected)
            },
            setTabUrl: function(e, t, n) {
                var a = (0, i.$)(r.tabRowById(e)),
                    o = (0, i.$)(r.tabById(t), a);
                o && o.setAttribute("href", n)
            }
        };
        var a = {
                selected: "TabRow__tab_selected"
            },
            r = {
                tabRowById: function(e) {
                    return '.TabRow[data-id="'.concat(e, '"]')
                },
                tabById: function(e) {
                    return '.TabRow__tab[data-id="'.concat(e, '"]')
                },
                tabSelected: ".TabRow__tab_selected"
            }
    },
    RkGL: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("+cqQ")) && i.__esModule ? i : {
            default: i
        };
        var r = {
            _onMouseDown: (0, a.default)(),
            _onCancelClick: (0, a.default)()
        };
        window.MoneyTransferButton = r;
        var o = r;
        t.default = o
    },
    "S6+Z": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.EMOJI_HINTS = t.EMOJI_REPLACES = t.EMOJI_PREFIXED_REPLACES = t.skinToneModifierRegex = t.emojiRegex = void 0;
        t.emojiRegex = function() {
            return /(?:\uD83C\uDFF4)(?:(?:\uDB40\uDC67)(?:\uDB40\uDC62)(?:(?:\uDB40\uDC65)(?:\uDB40\uDC6E)(?:\uDB40\uDC67)|(?:\uDB40\uDC77)(?:\uDB40\uDC6C)(?:\uDB40\uDC73)|(?:\uDB40\uDC73)(?:\uDB40\uDC63)(?:\uDB40\uDC74))(?:\uDB40\uDC7F)|\u200D\u2620\uFE0F?)|(?:\uD83D\uDC69)\u200D(?:\uD83D\uDC69)\u200D(?:(?:\uD83D\uDC66)\u200D(?:\uD83D\uDC66)|(?:\uD83D\uDC67)\u200D(?:\uD83D[\uDC66\uDC67]))|(?:\uD83D\uDC68)(?:\u200D(?:\u2764\uFE0F?\u200D(?:(?:\uD83D\uDC8B)\u200D)?(?:\uD83D\uDC68)|(?:\uD83D[\uDC68\uDC69])\u200D(?:(?:\uD83D\uDC66)\u200D(?:\uD83D\uDC66)|(?:\uD83D\uDC67)\u200D(?:\uD83D[\uDC66\uDC67]))|(?:\uD83D\uDC66)\u200D(?:\uD83D\uDC66)|(?:\uD83D\uDC67)\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDB0-\uDDB3]))|(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDB0-\uDDB3]))|(?:\uD83D\uDC69)\u200D(?:\u2764\uFE0F?\u200D(?:(?:\uD83D\uDC8B)\u200D(?:\uD83D[\uDC68\uDC69])|(?:\uD83D[\uDC68\uDC69]))|(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDB0-\uDDB3]))|(?:\uD83D\uDC69)\u200D(?:\uD83D\uDC66)\u200D(?:\uD83D\uDC66)|(?:(?:\uD83D\uDC41)\uFE0F?\u200D(?:\uD83D\uDDE8)|(?:\uD83D\uDC69)(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|(?:\uD83D\uDC68)(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|(?:(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)\uFE0F?|(?:\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF]))\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDD6-\uDDDD])(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\u200D[\u2640\u2642])|(?:\uD83D\uDC69)\u200D[\u2695\u2696\u2708])\uFE0F?|(?:\uD83D\uDC69)\u200D(?:\uD83D\uDC67)\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC69)\u200D(?:\uD83D\uDC69)\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC68)(?:\u200D(?:(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D[\uDC66\uDC67]))|(?:\uD83C[\uDFFB-\uDFFF]))|(?:\uD83C\uDFF3)\uFE0F?\u200D(?:\uD83C\uDF08)|(?:\uD83D\uDC69)\u200D(?:\uD83D\uDC67)|(?:\uD83D\uDC69)(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDB0-\uDDB3])|(?:\uD83D\uDC69)\u200D(?:\uD83D\uDC66)|(?:\uD83C\uDDF6)(?:\uD83C\uDDE6)|(?:\uD83C\uDDFD)(?:\uD83C\uDDF0)|(?:\uD83C\uDDF4)(?:\uD83C\uDDF2)|(?:\uD83D\uDC69)(?:\uD83C[\uDFFB-\uDFFF])|(?:\uD83C\uDDED)(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|(?:\uD83C\uDDEC)(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|(?:\uD83C\uDDEA)(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|(?:\uD83C\uDDE8)(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|(?:\uD83C\uDDF2)(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|(?:\uD83C\uDDF3)(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|(?:\uD83C\uDDFC)(?:\uD83C[\uDDEB\uDDF8])|(?:\uD83C\uDDFA)(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|(?:\uD83C\uDDF0)(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|(?:\uD83C\uDDEF)(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|(?:\uD83C\uDDF8)(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|(?:\uD83C\uDDEE)(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|(?:\uD83C\uDDFF)(?:\uD83C[\uDDE6\uDDF2\uDDFC])|(?:\uD83C\uDDEB)(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|(?:\uD83C\uDDF5)(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|(?:\uD83C\uDDE9)(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|(?:\uD83C\uDDF9)(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|(?:\uD83C\uDDE7)(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|[#\*0-9]\uFE0F?\u20E3|(?:\uD83C\uDDF1)(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|(?:\uD83C\uDDE6)(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|(?:\uD83C\uDDF7)(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|(?:\uD83C\uDDFB)(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|(?:\uD83C\uDDFE)(?:\uD83C[\uDDEA\uDDF9])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1F\uDD30-\uDD36\uDDB5\uDDB6\uDDD1-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDEEB\uDEEC\uDEF4-\uDEF9]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD70\uDD73-\uDD76\uDD7A\uDD7C-\uDDA2\uDDB0-\uDDB9\uDDC0-\uDDC2\uDDD0-\uDDFF])|(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEF9]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD70\uDD73-\uDD76\uDD7A\uDD7C-\uDDA2\uDDB0-\uDDB9\uDDC0-\uDDC2\uDDD0-\uDDFF])\uFE0F?|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC69\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDDB5\uDDB6\uDDB8\uDDB9\uDDD1-\uDDDD])/g
        };
        t.skinToneModifierRegex = /\uFE0F?\uD83C[\uDFFB-\uDFFF]/;
        t.EMOJI_PREFIXED_REPLACES = {
            e29da4: /(\s|^)([0O]:\))([\s\.,]|$)/g,
            f09f9887: /(\s|^)(;-\)+)([\s\.,]|$)/g,
            f09f9889: /(\s|^)([Xx]-?D)([\s\.,]|$)/g,
            f09f9886: /(\s|^)(B-\))([\s\.,]|$)/g,
            f09f988e: /(\s|^)(3-\))([\s\.,]|$)/g,
            f09f988c: /(\s|^)(&gt;\()([\s\.,]|$)/g,
            f09f98a0: /(\s|^)(;[oO])([\s\.,]|$)/g,
            f09f98b0: /(\s|^)(8\|)([\s\.,]|$)/g,
            f09f98b3: /(\s|^)(8-?[oO])([\s\.,]|$)/g,
            f09f98b2: /(\s|^)(8-\))([\s\.,]|$)/g,
            f09f988d: /(\s|^)(:[X])([\s\.,]|$)/g,
            f09f98b7: /(\s|^)(:[oO])([\s\.,]|$)/g,
            f09f98a8: /(\s|^)(&lt;3)([\s\.,]|$)/g
        };
        t.EMOJI_REPLACES = {
            f09f988a: /(:-\))([\s\.,]|$)/g,
            f09f9883: /(:-D)([\s\.,]|$)/g,
            f09f989c: /(;-[P])([\s\.,]|$)/g,
            f09f988b: /(:-[p])([\s\.,]|$)/g,
            f09f9892: /(:-\()([\s\.,]|$)/g,
            e298ba: /(:-?\])([\s\.,]|$)/g,
            f09f988f: /(;-\])([\s\.,]|$)/g,
            f09f9894: /(3-?\()([\s\.,]|$)/g,
            f09f98a2: /(:&#039;\()([\s\.,]|$)/g,
            f09f98ad: /(:_\()([\s\.,]|$)/g,
            f09f98a9: /(:\(\()([\s\.,]|$)/g,
            f09f9890: /(:\|)([\s\.,]|$)/g,
            f09f98a1: /(&gt;\(\()([\s\.,]|$)/g,
            f09f989a: /(:-\*)([\s\.,]|$)/g,
            f09f9888: /(\}:\))([\s\.,]|$)/g,
            f09f918d: /(:like:)([\s\.,]|$)/g,
            f09f918e: /(:dislike:)([\s\.,]|$)/g,
            e2989d: /(:up:)([\s\.,]|$)/g,
            e29c8c: /(:v:)([\s\.,]|$)/g,
            f09f918c: /(:ok:|::)([\s\.,]|$)/g
        };
        t.EMOJI_HINTS = {
            e29da4: [0, "<3"],
            f09f988a: [1, ":-)"],
            f09f9883: [2, ":-D"],
            f09f9889: [3, ";-)"],
            f09f9886: [4, "xD"],
            f09f989c: [5, ";-P"],
            f09f988b: [6, ":-p"],
            f09f988d: [7, "8-)"],
            f09f988e: [8, "B-)"],
            f09f9892: [9, ":-("],
            f09f988f: [10, ";-]"],
            f09f9894: [11, "3("],
            f09f98a2: [12, ":'("],
            f09f98ad: [13, ":_("],
            f09f98a9: [14, ":(("],
            f09f98a8: [15, ":o"],
            f09f9890: [16, ":|"],
            f09f988c: [17, "3-)"],
            f09f98a0: [18, ">("],
            f09f98a1: [19, ">(("],
            f09f9887: [20, "O:)"],
            f09f98b0: [21, ";o"],
            f09f98b3: [22, "8|"],
            f09f98b2: [23, "8o"],
            f09f98b7: [24, ":X"],
            f09f989a: [25, ":-*"],
            f09f9888: [26, "}:)"],
            f09f918d: [27, ":like:"],
            f09f918e: [28, ":dislike:"],
            e2989d: [29, ":up:"],
            e29c8c: [30, ":v:"],
            f09f918c: [31, ":ok:"]
        }
    },
    SRbS: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        t.default = {}
    },
    T24x: function(e, t, n) {
        "use strict";
        var i = n("BZzM"),
            a = n("QMH7"),
            r = window,
            o = r.se,
            s = r.qs2obj,
            l = r.obj2qs,
            c = r.scrollTop,
            u = r.remove,
            d = r.each,
            f = r.geByClass,
            h = r.geByClass1,
            p = r.addClass,
            A = r.removeClass,
            m = r.after,
            _ = r.ce,
            v = r.val,
            g = r.append,
            y = r.evalJs,
            b = r.extend,
            w = r.scrollToHash,
            k = r.onBodyResize,
            E = r.onBodyScroll,
            S = r.hasClass,
            C = r.escapeAttr,
            M = (r.before, window.thover),
            P = {
                onChange: o(),
                onRestore: o(),
                fast_load: !1,
                need_hard_go: !1,
                getHash: function(e) {
                    if ("#player" === e.hash) return !!window.isNewNavigation && e.path + e.hash;
                    var t = s(e.params);
                    return delete t.z, e.path + l(t)
                },
                getAlias: function(e) {
                    if (!e) return !1;
                    var t = (e || "").split("?"),
                        n = t[0],
                        i = s(t[1]);
                    return i.from && delete i.offset, delete i.from, delete i.z, n + l(i)
                },
                set: function(e, t) {
                    var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {},
                        r = arguments.length > 3 ? arguments[3] : void 0,
                        o = window,
                        s = o.zlayer,
                        l = o.cur,
                        E = o.nav,
                        C = o.menu,
                        T = o.audioplayer,
                        D = c(),
                        I = null;
                    window.isNewMail && toggleClass("vk__page_mail", window.bodyNode, "/mail" === e), s.opened() && (D = s._st);
                    var x = n.forceUpdate && t.newHTML,
                        O = !x && E.hasUpdate(r, e, t),
                        L = !!O || E.needUpdate(r, e, t),
                        B = 0;
                    if (!n.force && !O && L || x ? (B = c(), I = u("m"), d(f("_cntr", I), function() {
                            u(this)
                        }), d(f("ScrollView", I), function() {
                            (0, a.unhealScroll)(this)
                        }), u(h("_cntrs", I))) : d(f("ScrollView", h("m")), function() {
                            (0, a.unhealScroll)(this)
                        }), !n.after && !P.fast_load) {
                        var R = P.getHash(E),
                            N = r || t.options || {};
                        r && r.is_native_back && (N.prev_tab = N.native_prev), P.save(R, {
                            html: null,
                            st: D,
                            page: I,
                            state: P.stash(),
                            cur: window.cur,
                            options: N
                        }, !0)
                    }
                    if (n.before || P.clear(), (n.before || !n.before && !n.after) && (window.lm_qsearch_counter ? window.lm_qsearch_counter++ : window.lm_qsearch_counter = 1), n.before) {
                        var j = r && r.target;
                        P.fast_load = !0, j && p("__al_target", j);
                        var F = I.cloneNode(!0);
                        j && A("__al_target", j);
                        var H = h("__al_target", F);
                        A("__al_target", H), n.beforeAppend && n.beforeAppend(F, H), m(F, "l"), c(B), l.toggleHeaderSearch && l.toggleHeaderSearch(!1), n.afterAppend && n.afterAppend(F), C && C.clear_hover(), C && C.closeSearch(), C && C.enabled(!0)
                    } else {
                        r && r.zProcess && r.zProcess(0, !0) && delete r.zProcess;
                        var V = !1;
                        if (r && E.set(r), P.need_hard_go) return E.hard_go(E.cur, null, {
                            replace: !0
                        });
                        if (!n.force && !O && L || x) {
                            var U;
                            if (t.title && (document.title = t.title), x ? (U = _("div", {
                                    className: "layout__basis",
                                    id: "m"
                                }), v(U, t.newHTML)) : (U = t.page) ? V = !0 : (U = _("div", {
                                    className: "layout__basis",
                                    id: "m"
                                }), v(U, t.html)), C.opened()) {
                                var z = _("div", {
                                    id: "m_helper",
                                    onclick: C.close
                                });
                                g(z, U)
                            }
                            m(U, "l")
                        }
                        P.fast_load = !1, M.clear(), !O && L && (t.lm && C.refresh(t.lm), t.bc && (window.bodyNode.className = t.bc), s.opened(), r && r.zProcess ? r.zProcess(0, !1) && delete r.zProcess : s.close()), n.force || (V && (window.qsearch.isCachedPage = !0), t.js && y(t.js), V && (window.qsearch.isCachedPage = !1), t.state && P.stash(t.state), t.cur && b(window.cur, t.cur), r && (t.options = r), post.wallActionsHide(), P.save(e, t));
                        var W = r ? r.nav && r.nav.hash : E.hash;
                        if (O || L)
                            if (O) Tabbar.showUpdateButton(O.currentCache.d.page);
                            else if (t.st || !W) {
                            var q = window.isCustomScroll && S("ScrollView", "mcont") ? 1 : 0;
                            c(t.st || q), c(t.st || q, 10)
                        } else W ? w(W) : n.no_scroll && !n.force ? (c(D), c(D, 10)) : w();
                        else;
                        T && T.initAudio(), AudioMessagePlayer && AudioMessagePlayer.redrawWaves()
                    }
                    var $ = window,
                        G = $.Tabs;
                    k(G.actualizeShowMoreVisibility), G.actualizeShowMoreVisibility(), (0, i.resizePosters)(), P.onChange(!0, r && r.nav && r.nav.push)
                },
                save: function(e, t, n) {
                    if (e) {
                        var i = window.nav,
                            a = n ? i.page_get(e, t.options.prev_tab) : {};
                        a && i.page_set(e, b(a, t), P.getAlias(e))
                    }
                },
                restore: function(e) {
                    var t = window.nav,
                        n = t.page_get(e);
                    return n || (n = t.page_get(P.getAlias(e))), !!n && (P.onRestore(!0), n)
                },
                stash: function(e) {
                    var t = window.cur;
                    return window.cur && t.stash && t.stash(e) || !1
                },
                clear: function() {
                    var e = window.cur,
                        t = window.zlayer,
                        n = window.menu,
                        i = window.tooltip;
                    E("__clear"), k("__clear"), n && n.initEvents(), t.isReady && t.initEvents(), i && i.clear(), window.cur && e.destroy && d(e.destroy, function() {
                        this()
                    }), window.cur = {
                        destroy: []
                    }
                },
                hideHeader: function(e) {
                    var t = h("mhead", e);
                    hide(t)
                },
                setMhead: function(e, t, n, i) {
                    var a = h("mhead", e),
                        r = h("mhb_logo", a),
                        o = h("mh_header", e),
                        s = !1,
                        l = window.nav,
                        c = document.body,
                        d = h("SliderTabs", a),
                        f = h("header__right", a),
                        p = h("header__gear", a);
                    if (d && u(d), f && u(f), p && u(p), A("vk_header_tabs", c), n) {
                        !0 === n ? s = l.path + (l.params ? "?" + l.params : "") : n && (s = n), t || (t = v(o) || "&nbsp;");
                        var m = h("mhb_back", e),
                            _ = "",
                            g = S("mh_nobr", m) ? " mh_nobr" : "",
                            y = i ? ' onclick="' + i + '"' : "";
                        if (_ = "/" == s ? '<div class="hb_wrap mhb_back' + g + '"' + y + '><h1 class="hb_btn mh_header">' + t + "</h1></div>" : '\n        <div class="header__center hb_wrap mhb_back '.concat(g, '">\n          <a class="header__back al_back" href="').concat(C(s), '" accesskey="0" ').concat(y, '></a>\n          <h1 class="header__title hb_btn mh_header mhi_back">').concat(t, "</h1>\n        </div>\n      "), a && r) {
                            var b = h("mhb_notify", e);
                            v(a, (window.al && window.al.menu ? '<a href="/" class="hb_wrap mhb_home" accesskey="*" onclick="return menu.toggle(event);"><div class="hb_btn mhi_home">&nbsp;</div></a>' : '<a href="/" class="hb_wrap mhb_home mhb_vkhome" accesskey="*"><div class="hb_btn mhi_home mhi_vkhome">&nbsp;</div></a>') + '<div id="header_msgs" class="hb_wrap mhb_notify' + (!b || S("mhb_no_notify", b) ? " mhb_no_notify" : "") + '">' + v(b) + "</div>" + _)
                        } else m && (m.outerHTML = _)
                    } else t && v(o, t)
                }
            };
        window.page = P
    },
    T9Df: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("gD36")) && i.__esModule ? i : {
            default: i
        };
        var r = a.default;
        t.default = r, window.BookmarksPageItem = a.default
    },
    TAKr: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.POPUP_NAV_PREFIX = t.POPUP_DISAPPEAR_TIME = t.default = void 0;
        var i = s(n("1By4")),
            a = s(n("Po+v")),
            r = n("UxAg"),
            o = s(n("j80l"));

        function s(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        var l = window,
            c = l.addClass,
            u = l.removeClass,
            d = l.getCh,
            f = l.removeEvent,
            h = l.addEvent,
            p = l.setStyle,
            A = "pop_";
        t.POPUP_NAV_PREFIX = A;
        var m = 200;
        t.POPUP_DISAPPEAR_TIME = m, Object.assign(a.default, {
            open: function(e, t) {
                var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {},
                    i = n.hash,
                    a = n.oncloseCallback;
                x(e), E = Boolean(n.forceScrollDisable), t && (e = e.cloneNode(!0), document.body.appendChild(e), e.appendedToBody = !0);
                e.classList.add(g.open);
                var r = e.$(y.scroll);
                D(e), a && C.push([e, a]);
                if (r) {
                    if (P(e, r), e.onResizeHandler = function() {
                            P(e, r)
                        }, h(window, "resize", e.onResizeHandler), !window.MutationObserver) return e;
                    e.scrollContentObserver = new MutationObserver(e.onResizeHandler), e.scrollContentObserver.observe(r, {
                        childList: !0,
                        subtree: !0
                    })
                }
                if (i) {
                    var o = "#".concat(A).concat(i);
                    nav.saveScrollPosition(), nav.set({
                        nav: extend({}, nav, {
                            path: nav.path,
                            push: "#".concat(A).concat(i)
                        })
                    }), S[o] = e
                }
                return e
            },
            close: T
        });
        var _ = a.default;
        t.default = _, a.default._onOverlayClick = M, a.default._onTouchMove = function() {};
        var v, g = {
                popup: "Popup",
                open: "Popup_open",
                wrap: "Popup__wrap",
                hasScroll: "Popup_hasScroll",
                scrollView: "ScrollView",
                closing: "Popup--closing"
            },
            y = {
                open: ".".concat(g.open),
                popup: ".".concat(g.popup),
                wrap: ".".concat(g.wrap),
                scroll: ".Popup__scroll",
                header: ".Popup__header",
                footer: ".Popup__footer"
            },
            b = !1,
            w = null,
            k = null,
            E = !1,
            S = {},
            C = [];

        function M(e, t, n) {
            var a = e.closest(y.popup);
            t && i.default.handle(t, {
                $popup: a
            }), n && T(a)
        }

        function P(e, t) {
            var n = e.$(y.header),
                i = e.$(y.footer);
            t.scrollHeight - 6 > t.offsetHeight ? (c(e, g.hasScroll), c(t, g.scrollView), ContentScrollView.restore()) : (u(e, g.hasScroll), u(t, g.scrollView), t.scrollTop = 0);
            var a = d(),
                r = 0,
                o = 0;
            n && (r = n.offsetHeight), i && (o = i.offsetHeight);
            var s = Math.min(a - r - o - 100, 420);
            p(t, "max-height", "".concat(s, "px"))
        }

        function T(e) {
            var t = (arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}).smooth;
            e && !e.classList.contains(g.popup) && (e = e.closest(y.popup));
            var n = (0, r.$)(y.wrap, e);
            if (t) return e.classList.add(g.closing), p.transform(n, 1, [0, "100%"]), setTimeout(function() {
                T(e, !1)
            }, m);
            if (e || (e = (0, r.$)(y.open)), e.classList.remove(g.open), e.appendedToBody && document.body.contains(e) && document.body.removeChild(e), e.classList.remove(g.closing), p.transform(n), f(window, "resize", e.onResizeHandler), e.scrollContentObserver && e.scrollContentObserver.disconnect(), (0, r.$)(y.open) || I(), nav.cur && nav.cur.startsWith("#" + A)) {
                var i = o.default.make(nav.path, qs2obj(nav.params));
                nav.set({
                    nav: extend({}, nav, {
                        cur: nav.path,
                        path: nav.path || "",
                        push: i || ""
                    })
                })
            }
            var a, s = (a = e, (C.find(function(e) {
                return e[0] === a
            }) || [])[1]);
            s && (s(), x(e)), window.cur && window.cur.app && window.cur.app.frame && window.cur.app.frame.focus()
        }

        function D(e) {
            if (window.MutationObserver && !b) {
                var t = document.body;
                w = t.style.overflow, b = !0, browser.ios || browser.ipad || (t.style.overflow = "hidden"), E && (t.style.height = "100%", document.documentElement.style.overflow = "hidden"), k = new MutationObserver(function() {
                    t.contains(e) || I()
                }), v = scrollTop(), document.body && (document.body.classList.add("fixed"), p(document.body, {
                    top: "-".concat(v, "px")
                }), browser.safari && getCw() < 882 && document.scrollingElement && (document.scrollingElement.scrollTop = v, setTimeout(function() {
                    document.scrollingElement.scrollTop = v
                }, 100), setTimeout(function() {
                    document.scrollingElement.scrollTop = v
                }, 300))), k.observe(document.body, {
                    attributes: !0,
                    childList: !0,
                    subtree: !0
                })
            }
        }

        function I() {
            window.MutationObserver && b && (document.body.style.overflow = w, E && (document.documentElement.style.overflow = "initial"), k.disconnect(), document.body && (document.body.classList.remove("fixed"), p(document.body, {
                top: ""
            }), scrollTop(v)), b = !1)
        }

        function x(e) {
            var t = C.findIndex(function(t) {
                return t[0] === e
            });
            t >= 0 && C.splice(t, 1)
        }
        nav.onPopState && nav.onPopState(function() {
            var e = S[nav.cur];
            e && (T(e), delete S[nav.cur])
        })
    },
    TORN: function(e, t, n) {
        "use strict";
        var i = n("J8bf"),
            a = window,
            r = a.onDOMReady,
            o = a.onBodyResize,
            s = a.geByClass1,
            l = a.removeClass,
            c = a.addClass,
            u = a.gpeByClass,
            d = a.hasClass,
            f = a.toggleClass;
        ! function() {
            function e() {
                if (s("tabs_block_hideable")) {
                    var e = s("tabs_block");
                    s("tabs_list").offsetHeight > s("tabs_list_more").offsetHeight ? l("tabs_block_without_show_more", e) : c("tabs_block_without_show_more", e)
                }
            }
            r(e), o(e), window.Tabs = {
                actualizeShowMoreVisibility: e,
                toggle: function(e) {
                    var t = u("tabs_block", e);
                    d("tabs_block_opened", t) ? (0, i.setCookie)("remixm_tabs_expanded", "", -1) : (0, i.setCookie)("remixm_tabs_expanded", 1), f("tabs_block_opened", t)
                }
            }
        }()
    },
    TcbA: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i = n("2mXy"),
            a = s(n("TYsd")),
            r = s(n("TxHJ")),
            o = s(n("kr3z"));
        n("OcsD");

        function s(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }

        function l(e) {
            return (l = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function c() {
            return (c = Object.assign || function(e) {
                for (var t = 1; t < arguments.length; t++) {
                    var n = arguments[t];
                    for (var i in n) Object.prototype.hasOwnProperty.call(n, i) && (e[i] = n[i])
                }
                return e
            }).apply(this, arguments)
        }

        function u(e, t) {
            for (var n = 0; n < t.length; n++) {
                var i = t[n];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        }

        function d(e, t) {
            return !t || "object" !== l(t) && "function" != typeof t ? function(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }

        function f(e) {
            return (f = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            })(e)
        }

        function h(e, t) {
            return (h = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t, e
            })(e, t)
        }
        var p = function(e) {
            function t(e) {
                var n;
                return function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, t), (n = d(this, f(t).call(this, e))).onSendClick = function(e) {
                    e.preventDefault();
                    var t = n.state.info,
                        i = Object.keys(t).map(function(e) {
                            return "".concat(e, ": ").concat(t[e])
                        }).join("\n");
                    o.default.post("/?device", {
                        _ajax: !0,
                        device_info: i
                    }, {
                        onDone: function(e) {
                            1 === e ? (self.setState({
                                needSendButton: !1
                            }), Snackbar.init({
                                text: getLang("mobile_device_info_sent")
                            })) : Snackbar.init({
                                text: getLang("mobile_unknown_error")
                            })
                        }
                    })
                }, n.state = c({}, e), n
            }
            var n, s, l;
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }), t && h(e, t)
            }(t, i.Component), n = t, (s = [{
                key: "_testAudio",
                value: function() {
                    return !!window.Audio && (new Audio).canPlayType("audio/mpeg")
                }
            }, {
                key: "_testPhotoView",
                value: function(e) {
                    var t = document.createElement("div").style,
                        n = [];
                    return void 0 !== t.webkitTransform && n.push("webkitTransform"), void 0 !== t.MozTransform && n.push("MozTransform"), void 0 !== t.msTransform && n.push("msTransform"), void 0 !== t.OTransform && n.push("OTransform"), e + " (" + n.join(", ").replace(/^(, )+|(, )+$|(, )(, )+/g, "$3") + ")"
                }
            }, {
                key: "_testFileAPI",
                value: function(e) {
                    return e + " (" + [window.XMLHttpRequest ? "XMLHttpRequest" : "", window.XDomainRequest ? "XDomainRequest" : "", window.FormData ? "FormData" : "", window.FileReader ? "FileReader" : "", window.XMLHttpRequest && XMLHttpRequest.sendAsBinary ? "sendAsBinary" : "", window.ArrayBuffer ? "ArrayBuffer" : "", window.Uint8Array ? "Uint8Array" : "", window.MozBlobBuilder ? "MozBlobBuilder" : "", window.WebKitBlobBuilder ? "WebKitBlobBuilder" : "", window.BlobBuilder ? "BlobBuilder" : ""].join(", ").replace(/^(, )+|(, )+$|(, )(, )+/g, "$3") + ")"
                }
            }, {
                key: "componentDidMount",
                value: function() {
                    var e = this.state.info;
                    e.Audio = this._testAudio(), e["Fullscreen Photoview"] = this._testPhotoView(e["Fullscreen Photoview"]), e.FileAPI = this._testFileAPI(e.FileAPI), this.setState({
                        info: e
                    })
                }
            }, {
                key: "render",
                value: function() {
                    return a.default.preact(r.default, c({}, this.state, {
                        onSendClick: this.onSendClick
                    }))
                }
            }]) && u(n.prototype, s), l && u(n, l), t
        }();
        t.default = p
    },
    Tjn9: function(e, t, n) {
        "use strict";
        var i = window,
            a = i.ge,
            r = i.getXY,
            o = i.getCh,
            s = i.qs2obj,
            l = i.getSize,
            c = i.addClass,
            u = i.scrollTo,
            d = i.scrollGetY,
            f = i.removeClass;

        function h(e) {
            (e = a(e)) && (c(e, "profileEdit_selected"), setTimeout(function() {
                c(e, "profileEdit_animated"), setTimeout(function() {
                    f(e, "profileEdit_selected"), f(e, "profileEdit_animated")
                }, 1e3)
            }, 1500))
        }

        function p(e) {
            (e = a(e)) && setTimeout(function() {
                var t = r(e)[1],
                    n = l("mhead")[1],
                    i = d(),
                    a = o();
                t < n + i || t > i + a ? setTimeout(function() {
                    u(0, t - n), h(e)
                }, 0) : h(e)
            }, 0)
        }
        window.ProfileEditor = {
            init: function() {
                var e = (s(nav.params) || {}).hl;
                e && p(geByClass1("_" + e))
            },
            highlightRow: h,
            scrollHighlightRow: p
        }
    },
    TuGt: function(e, t, n) {
        "use strict";
        var i;
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var a = ((i = n("Yaig")) && i.__esModule ? i : {
            default: i
        }).default;
        t.default = a
    },
    TxHJ: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("29dZ")) && i.__esModule ? i : {
                default: i
            },
            r = n("fdw3");
        var o = function(e) {
            var t = e.info || {};
            return {
                inner: [{
                    inner: [{
                        inner: [Object.keys(t).map(function(e) {
                            var n = t[e];
                            return "boolean" == typeof n && (n = n ? "yes" : "no"),
                                function(e, t) {
                                    return {
                                        inner: [{
                                            inner: [e],
                                            tag: "b"
                                        }, "\n      :\n      ", {
                                            inner: [t],
                                            tag: "i"
                                        }],
                                        tag: "div"
                                    }
                                }(e, n)
                        })],
                        class: "fi_row",
                        tag: "div"
                    }, {
                        inner: [{
                            inner: [{
                                inner: [{
                                    inner: [{
                                        inner: "Audio tag not support",
                                        tag: "b"
                                    }],
                                    src: "//vk.com/mp3/bb1.mp3",
                                    tag: "source"
                                }],
                                preload: "none",
                                controls: "controls",
                                style: "width: 100%;",
                                tag: "audio"
                            }],
                            style: "color: #777;",
                            tag: "div"
                        }],
                        class: "fi_row",
                        tag: "div"
                    }, {
                        inner: [{
                            inner: [{
                                type: "hidden",
                                id: "device_info_text",
                                name: "device_info",
                                value: e.fallbackText,
                                tag: "input"
                            }, {
                                inner: [e.needSendButton && (0, a.default)({
                                    inner: [(0, r.getLang)("mobile_send_device_info")],
                                    submit: !0,
                                    stretch: !0,
                                    onClick: e.onSendClick
                                })],
                                class: "cp_buttons_block",
                                tag: "div"
                            }],
                            action: "/?device",
                            method: "post",
                            tag: "form"
                        }],
                        class: "fi_row",
                        tag: "div"
                    }],
                    class: "form_item",
                    tag: "div"
                }],
                class: "PageBlock DeviceInfo fit_box",
                style: "color: #777; line-height: 1.7",
                tag: "div"
            }
        };
        t.default = o
    },
    TxR4: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.emojiSymbolToByteHex = function(e) {
            var t = e.split("").map(function(e) {
                return e.charCodeAt(0).toString(16)
            }).filter(function(e) {
                return "fe0f" !== e.toLowerCase()
            }).map(function(e) {
                return String.fromCodePoint(parseInt(e, 16))
            }).join("");
            return encodeURIComponent(t).replace(/%/gi, "").toLowerCase()
        }, t.emojiByteHexToSymbol = function(e) {
            var t = e.length % 2 == 1,
                n = t ? e.slice(0, 1) : "",
                i = t ? e.slice(1) : e,
                a = "";
            try {
                a = decodeURIComponent("%" + (r = i, r.split("").reduce(function(e, t, n) {
                    return e + t + ((n + 1) % 2 == 0 ? " " : "")
                }, "").trim().split(/\s+/)).join("%"))
            } catch (e) {}
            var r;
            return n + a
        }, t.emojiRemoveSkinToneModifiers = function(e) {
            return e.replace((0, i.emojiRegex)(), a)
        };
        var i = n("S6+Z");

        function a(e) {
            return e.replace(i.skinToneModifierRegex, "")
        }
    },
    U34x: function(e, t, n) {
        "use strict";
        var i = window,
            a = i.preventEvent,
            r = i.stopEvent,
            o = i.gpeByClass,
            s = i.toggleClass,
            l = i.removeClass,
            c = i.addEvent,
            u = i.removeEvent,
            d = "dropdown_open",
            f = {
                _onTogglerClick: function(e, t) {
                    a(e), r(e);
                    var n = o("dropdown", t);
                    if (s(n, d), !1 !== n.isFirstClick) {
                        n.isFirstClick = !1;
                        var i = function() {
                            l(n, d)
                        };
                        c(window, "click", i), window.cur.destroy.push(function() {
                            u(window, "click", i), n.isFirstClick = !0
                        })
                    }
                }
            };
        window.Dropdown = f
    },
    UH2D: function(e, t, n) {
        "use strict";
        l(n("+cqQ"));
        var i = n("irqS"),
            a = n("BZzM"),
            r = (l(n("s0aB")), function(e) {
                if (e && e.__esModule) return e;
                var t = s();
                if (t && t.has(e)) return t.get(e);
                var n = {};
                if (null != e) {
                    var i = Object.defineProperty && Object.getOwnPropertyDescriptor;
                    for (var a in e)
                        if (Object.prototype.hasOwnProperty.call(e, a)) {
                            var r = i ? Object.getOwnPropertyDescriptor(e, a) : null;
                            r && (r.get || r.set) ? Object.defineProperty(n, a, r) : n[a] = e[a]
                        }
                }
                n.default = e, t && t.set(e, n);
                return n
            }(n("FZH1"))),
            o = l(n("GR/G"));

        function s() {
            if ("function" != typeof WeakMap) return null;
            var e = new WeakMap;
            return s = function() {
                return e
            }, e
        }

        function l(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        Object.assign(r.default, {
            updateClass: p,
            clearSystemMessage2: function() {
                remove(geByClass1("service_msg_box"))
            },
            onSystemMessageClick: function() {
                ! function() {
                    var e = store.mail,
                        t = e.cur;
                    e.peers[t.peerId].systemMessageCode = null, p("peer"), A()
                }()
            },
            resetPrevScraps: function() {
                c = {
                    folder: [],
                    search: [],
                    peer: []
                }
            },
            redrawPeer: function() {
                h("peer", store.mail.scraps.peer), $$(".mailScrap_peer").forEach(function(e) {
                    return e.className = (0, r.MailScrap_class)("peer")
                }), $$(".mailScrap__empty_peer").forEach(function(e) {
                    return e.innerHTML = (0, r.MailScrap_EmptyInner)("peer")
                })
            },
            redrawFolder: function(e) {
                var t = store.mail,
                    n = t.cur,
                    i = t.scraps;
                n.folder;
                h("folder", i.folder, e), $$(".mailScrap_folder").forEach(function(e) {
                    return e.className = (0, r.MailScrap_class)("folder")
                }), $$(".mailScrap__empty_folder").forEach(function(e) {
                    return e.innerHTML = (0, r.MailScrap_EmptyInner)("folder")
                })
            },
            redrawSearch: function() {
                $$(".mailScrap__items_search").forEach(function(e) {
                    return e.innerHTML = (0, r.MailScrap_ItemsInner)("search")
                }), $$(".mailScrap_search").forEach(function(e) {
                    return e.className = (0, r.MailScrap_class)("search")
                }), $$(".mailScrap__empty_search").forEach(function(e) {
                    return e.innerHTML = (0, r.MailScrap_EmptyInner)("search")
                })
            },
            redrawMRs: function(e) {
                h("mrs", store.mail.scraps.mrs, e), $$(".mailScrap_mrs").forEach(function(e) {
                    return e.className = (0, r.MailScrap_class)("mrs")
                }), $$(".mailScrap__empty_mrs").forEach(function(e) {
                    return e.innerHTML = (0, r.MailScrap_EmptyInner)("mrs")
                })
            },
            redrawSystemMessage: A,
            folderSetItems: function(e) {
                $$(".mailScrap__items_folder").forEach(function(t) {
                    return t.innerHTML = f(e, !0)
                }), $$(".mailScrap_folder").forEach(function(e) {
                    return e.className = (0, r.MailScrap_class)("folder")
                }), $$(".mailScrap__empty_folder").forEach(function(e) {
                    return e.innerHTML = (0, r.MailScrap_EmptyInner)("folder")
                })
            },
            folderAddItems: function(e) {
                $$(".mailScrap__items_folder").forEach(function(t) {
                    return t.insertAdjacentHTML("beforeend", f(e))
                })
            },
            folderCutItems: function(e) {
                $$(".mailScrap_folder .mailScrap__items").forEach(function(t) {
                    [].slice.call(t.children).slice(e).forEach(function(e) {
                        return t.removeChild(e)
                    })
                })
            },
            peerAddElemAfter: function(e, t) {
                var n = $(".mailScrap__items_peer");
                if (!n) return;
                var i = ceFromString(d([e], !0));
                n.appendChild(t), (0, o.default)(t, i), p("peer")
            },
            peerAddItemsBefore: function(e) {
                var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
                p("peer"), e = e.filter(unique).filter(function(e) {
                    return !$(".msg_id_".concat(e))
                });
                var n = i.Messenger.getConvoBody();
                n.scrollHeight, n.scrollTop, n.offsetHeight;
                window._preventedCheckTop = !0, setTimeout(function() {
                    return window._preventedCheckTop = !1
                });
                var a = d(e, t),
                    r = '\n    <div class="load_before load_before_closed">\n      '.concat(a, "\n    </div>\n  ");
                return $$(".mailScrap__items_peer").forEach(function(e) {
                    return e.insertAdjacentHTML("afterbegin", r)
                }), void uMessenger.expandPeerBefore()
            },
            peerAddItemsAfter: function(e) {
                var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
                arguments.length > 2 && arguments[2];
                e = e.filter(unique).filter(function(e) {
                    return !$(".msg_id_".concat(e))
                }), $$(".mailScrap__items_peer").forEach(function(n) {
                    n.insertAdjacentHTML("beforeend", d(e, t))
                }), p("peer"), (0, a.resizePosters)()
            },
            peerReplaceItems: function(e) {
                e.forEach(function(e) {
                    var t = $(".msg_id_".concat(e)),
                        n = ceFromString(d([e], !0));
                    (0, o.default)(t, n)
                }), (0, a.resizePosters)()
            },
            peerSetItems: function(e) {
                e = e.filter(unique), $$(".mailScrap__items_peer").forEach(function(t) {
                    return t.innerHTML = d(e)
                })
            },
            peerGoToBottom: function() {
                var e = i.Messenger.getConvoBody();
                e.scrollTop = e.scrollHeight
            },
            removeDivider: u,
            checkDivider: function() {
                var e = last($(".mailScrap__items_peer").children);
                e && e.classList.contains("msg__newMsgsDivider") && u()
            }
        }), uVK.onReady(function() {
            if (store.mail && store.mail.scraps) {
                var e = store.mail.scraps;
                c.folder = e.folder.slice(), c.search = e.search.slice(), c.peer = e.peer.slice()
            }
        });
        var c = {
            folder: [],
            search: [],
            peer: []
        };

        function u() {
            remove($(".msg__newMsgsDivider"))
        }

        function d(e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
            e = e.filter(unique);
            var n, i = store.mail,
                a = i.cur,
                o = i.msgs,
                s = !!$(".msg__newMsgsDivider");
            return e.map(function(e, i) {
                var l = o[e];
                return i > 0 && !s && !t && !n.isUnread && l.isUnread && l.authorId !== a.viewerId ? (n = l, s = !0, (0, r.MailScrap_Item)("peer", e, !0)) : (n = l, (0, r.MailScrap_Item)("peer", e))
            }).join("")
        }

        function f(e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
            return (e = e.filter(unique)).map(function(e) {
                return $(".mailScrap__items_folder .convo_id_".concat(e)) && !t ? "" : (0, r.MailScrap_Item)("folder", e)
            }).join("")
        }

        function h(e, t, n) {
            ! function(e, t, n) {
                var i = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : null,
                    a = [];
                if (!e) return;
                i || (e.innerHTML = "", i = []);
                if (0 === n.length) return void(e.innerHTML = "");
                n.forEach(function(n, a) {
                    var r = i.indexOf(n); - 1 === r ? (i.splice(a, 0, n), domInsert(e, t(n), a)) : r !== a && (i.splice(r, 1), i.splice(a, 0, n), before(e.children[r], e.children[a]))
                }), i.forEach(function(t, i) {
                    -1 === n.indexOf(t) && a.push(e.children[i])
                }), a.forEach(remove)
            }($(".mailScrap__items_".concat(e)), function(t) {
                return (0, r.MailScrap_Item)(e, t)
            }, t, n)
        }

        function p(e) {
            $$(".mailScrap_".concat(e)).forEach(function(t) {
                return t.className = (0, r.MailScrap_class)(e)
            })
        }

        function A() {
            $$(".mailScrap__systemMessage").forEach(function(e) {
                e.innerHTML = store.mail.cur.notification || ""
            })
        }
    },
    USu8: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.uTyping_getPeerTyping = function(e) {
            var t = store.mail.cur.typings[e];
            if (!t) return null;
            return t.mixed || t.audio || t.text
        }, t.uTyping_getNames = function(e) {
            if (!e) return [];
            for (var t = store.mail.members, n = e.users, i = n.length, a = [], r = 0; r < i; r++) {
                var o = t[n[r]];
                if (o) {
                    var s = 1 === i ? o.name : o.shortName;
                    a.push(s)
                }
            }
            return a
        }, t.default = void 0;
        var i;
        (i = n("rKUZ")) && i.__esModule;
        var a = function() {};
        t.default = a
    },
    UUtA: function(e, t, n) {
        "use strict";

        function i(e, t) {
            for (var n = 0; n < t.length; n++) {
                var i = t[n];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.QuadAlgorithm = void 0;
        var a = function() {
            function e() {
                ! function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, e), this.clear()
            }
            var t, n, a;
            return t = e, (n = [{
                key: "push",
                value: function(e) {
                    this._count++, this._accum += e, this._accum_q += e * e
                }
            }, {
                key: "get",
                value: function() {
                    return 1 == this._count ? this._accum : Math.sqrt((this._accum_q - this._accum * this._accum / this._count) / this._count)
                }
            }, {
                key: "clear",
                value: function() {
                    this._count = 0, this._accum = 0, this._accum_q = 0
                }
            }]) && i(t.prototype, n), a && i(t, a), e
        }();
        t.QuadAlgorithm = a
    },
    UWnA: function(e, t, n) {
        "use strict";
        var i;
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var a = ((i = n("WWoJ")) && i.__esModule ? i : {
            default: i
        }).default;
        t.default = a
    },
    UlUB: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = function(e, t) {
            var n, i, a = !1;
            return function r() {
                if (a) return n = arguments, void(i = this);
                e.apply(this, arguments), a = !0, setTimeout(function() {
                    a = !1, n && (r.apply(i, n), n = i = null)
                }, t)
            }
        }
    },
    UuS6: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.StickersAnimation = void 0;
        var i, a = (i = n("nJnv")) && i.__esModule ? i : {
            default: i
        };
        var r = function() {
            var e, t = !1,
                n = !1,
                i = {},
                o = {},
                s = {},
                l = {};

            function c(e) {
                var t = f(e),
                    n = 1;
                if (t) {
                    hasClass(e, "animation_play") || (hide(geByClass1("sticker_img", e)), addClass(e, "animation_play")), t.play();
                    var i = attr(e, "data-loop-count");
                    i = parseInt(i), isNaN(i) && (i = 3), -1 !== i && (!t._cbs.loopComplete || t._cbs.loopComplete && 0 === t._cbs.loopComplete.length) && t.addEventListener("loopComplete", function a(r) {
                        var o = !0;
                        i >= ++n && (o = !1), o && (d(e, !1), "" !== t._cbs.loopComplete && t.removeEventListener("loopComplete", a), t.stop())
                    })
                }
            }

            function u(e) {
                var t = attr(e, "data-uid");
                return t || (t = attr(e, "data-uid", Math.random().toString(32).substr(2))), t
            }

            function d(e, t) {
                l[u(e)] = t
            }

            function f(e) {
                var t = attr(e, "data-uniq-id");
                if (!geByClass1("svg_sticker_animation", e)) return !1;
                var n = o[t];
                return n || !1
            }

            function h(e, t) {
                var n = f(e);
                if (n) "function" == typeof t && t(n);
                else {
                    var r = attr(e, "data-uniq-id");
                    if (!l[u(e)]) {
                        d(e, !0);
                        var s = attr(e, "data-animation-path"),
                            c = attr(e, "data-sticker-id"),
                            h = !1;
                        if (c && (h = i[c] ? p(e) : s && p(e)), h) {
                            var A = {
                                container: e,
                                renderer: "svg",
                                loop: !0,
                                autoplay: !1,
                                name: r,
                                rendererSettings: {
                                    scaleMode: "noScale",
                                    progressiveLoad: !0,
                                    hideOnTransparent: !0,
                                    className: "svg_sticker_animation"
                                }
                            };
                            i[c] ? A.animationData = i[c] : A.path = s;
                            var m = geByClass1("svg_sticker_animation", e);
                            if (m && re(m), n = a.default.loadAnimation(A), !i[c]) return void n.addEventListener("data_ready", function() {
                                i[c] = n.animationData, o[r] = n, "function" == typeof t && t(n)
                            })
                        }
                        "function" == typeof t && (o[r] = n, "function" == typeof t && t(n))
                    }
                }
            }
            return {
                checkSettingsAndLoadInWeb: function(e) {
                    if (StickersSettings.getAutoplay()) {
                        var t = ge("fc_msg" + e),
                            n = geByClass1("sticker_animation", t);
                        r.loadAndPlaySticker(n)
                    }
                },
                checkSettingsAndLoad: function(e) {
                    if (StickersSettings.getAutoplay()) {
                        var t = $(".msg_id_".concat(e, " .sticker_animation"));
                        r.loadAndPlaySticker(t)
                    }
                },
                loadStickerInMvkIMAndPlay: function(e, t) {
                    var n = "_msg" + e;
                    t && (n = "msg_id_" + e);
                    var i = geByClass1("sticker_animation", geByClass1(n));
                    r.loadAndPlayStickerWithTimer(i, 500)
                },
                loadAutoplayAnimationStickers: function(e) {
                    if (e) {
                        if (n) return;
                        n = !0
                    }
                    if (!t) {
                        t = !0;
                        var i = geByClass("sticker_animation_autoplay");
                        i && each(i, function(e, t) {
                            h(t, function() {
                                c(t)
                            })
                        }), t = !1
                    }
                },
                loadAndPlaySticker: function(e) {
                    e && requestAnimationFrame(function() {
                        h(e, function() {
                            c(e)
                        })
                    })
                },
                loadAndPlayStickerWithTimer: function(e, t) {
                    if (e && !s[e]) {
                        t || (t = 1e3);
                        var n = ge(e);
                        hasClass(n, "sticker_animation_disabled_timer") || (s[e] = setTimeout(function() {
                            !n && (n = ge(e), hasClass(n, "sticker_animation_disabled_timer")) || (r.loadAndPlaySticker(n), clearTimeout(s[e]), s[e] = !1)
                        }, t))
                    }
                },
                reloadStickers: function() {
                    o = {}
                },
                touchStartSticker: function(t) {
                    t.addEventListener("contextmenu", r.preventContextMenu, !1), e = setTimeout(function() {
                        r.loadAndPlaySticker(t)
                    }, 500)
                },
                touchEndSticker: function() {
                    e && clearTimeout(e)
                },
                preventContextMenu: function(e) {
                    event.preventDefault(), event.stopPropagation()
                }
            };

            function p(e) {
                var t = e.getBoundingClientRect().top,
                    n = e.getBoundingClientRect().bottom;
                return t < window.innerHeight && n >= 0 && isVisible(e)
            }
        }();
        t.StickersAnimation = r
    },
    UvyM: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("z9sQ")) && i.__esModule ? i : {
                default: i
            },
            r = n("fdw3");
        var o = function() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                t = e.url,
                n = e.is_icon,
                i = e.on_click || e.onClick,
                o = e.use_native_onclick,
                s = e.inner || e.children;
            isArray(s) && 1 === s.length && "string" == typeof s[0] && (s = s[0]);
            var l = !1;
            "function" == typeof i && (o = !0, l = !0);
            i && !o && (i = ["Btn._onClick", "event", "this", i]);
            var c = {
                class: [e.class, a.default.class("Btn", {
                    theme: e.theme || "regular",
                    size: e.size || "",
                    stretch: e.stretch
                })],
                onclick: i,
                attrs: e.attrs
            };
            l && (c.onClick = i, delete c.onclick);
            var u = e.hide ? "; display: none;" : "",
                d = e.style ? e.style + u : u;
            if (t) return (0, r.mergeObjects)(c, {
                tag: "a",
                href: t,
                role: "button",
                style: d,
                inner: n ? s : {
                    class: "Btn__text",
                    inner: s
                },
                target: e.open_in_new_tab ? "_blank" : null
            });
            var f = e.is_submit ? "submit" : null,
                h = e.type || f;
            return (0, r.mergeObjects)(c, {
                "aria-label": e["aria-label"],
                tag: "button",
                style: d,
                disabled: e.disabled,
                type: h,
                inner: n ? s : {
                    class: "Btn__text",
                    inner: s
                }
            })
        };
        t.default = o
    },
    V1Rh: function(e, t, n) {
        "use strict";
        var i = n("UxAg");
        window.Pad = {
            addContent: function(e, t) {
                t && (0, i.$$)(a.pad(e)).forEach(function(e) {
                    var n = e.$(a.content) || e;
                    e.classList.remove(r.empty), n.insertAdjacentHTML("beforeend", t)
                })
            }
        };
        var a = {
                pad: function(e) {
                    return '.Pad[data-id="'.concat(e, '"]')
                },
                content: ".Pad__content"
            },
            r = {
                empty: "Pad_empty"
            }
    },
    V4qE: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), Object.defineProperty(t, "init", {
            enumerable: !0,
            get: function() {
                return r.init
            }
        }), Object.defineProperty(t, "close", {
            enumerable: !0,
            get: function() {
                return r.close
            }
        }), Object.defineProperty(t, "SNACKBAR_TYPE_SUCCESS", {
            enumerable: !0,
            get: function() {
                return r.SNACKBAR_TYPE_SUCCESS
            }
        }), Object.defineProperty(t, "SNACKBAR_TYPE_ERROR", {
            enumerable: !0,
            get: function() {
                return r.SNACKBAR_TYPE_ERROR
            }
        }), Object.defineProperty(t, "SNACKBAR_TYPE_BOOKMARK", {
            enumerable: !0,
            get: function() {
                return r.SNACKBAR_TYPE_BOOKMARK
            }
        }), t.default = void 0;
        var i, a = (i = n("hclJ")) && i.__esModule ? i : {
                default: i
            },
            r = n("40dl");
        var o = a.default;
        t.default = o, window.SnackbarItem = a.default
    },
    VAls: function(e, t, n) {
        "use strict";
        var i, a = (i = n("ylz1")) && i.__esModule ? i : {
            default: i
        };
        window.CartOrder = new a.default
    },
    VLMK: function(e, t, n) {
        "use strict";
        var i, a, r = n("z8PJ");
        i = "", a = function() {
            i = nav.cur, (0, r.gemiusTrackPage)()
        }, onDOMReady(function() {
            a(), window.page.onChange(function() {
                i !== nav.cur && a()
            })
        })
    },
    VRji: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), Object.defineProperty(t, "initAutogrow", {
            enumerable: !0,
            get: function() {
                return r.initAutogrow
            }
        }), t.default = void 0;
        var i, a = (i = n("4azy")) && i.__esModule ? i : {
                default: i
            },
            r = n("bvP/");
        var o = a.default;
        t.default = o
    },
    VnbJ: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.clearWorkerTimeout = function(e) {
            if (!e) return !1;
            isFinite(e) ? clearTimeout(e) : e.terminate()
        }
    },
    W0fz: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.isPodcast = function(e) {
            if (!e) return !1;
            var t = isObject(e) ? e.extra : e[i.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_EXTRA];
            isObject(t) || (t = JSON.parse(t || "{}"));
            return !!t.podcast
        };
        var i = n("uk5P")
    },
    W12k: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("TYsd")) && i.__esModule ? i : {
            default: i
        };

        function r(e, t) {
            for (var n = 0; n < t.length; n++) {
                var i = t[n];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        }
        var o = function() {
            function e(t) {
                ! function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, e), this.store = Stories.getStore(), this.questions = this.store.questions[t] || []
            }
            var t, n, i;
            return t = e, (n = [{
                key: "render",
                value: function() {
                    return a.default.elem({
                        class: Bem.class("Questions", {}),
                        inner: [{
                            class: "Questions__header",
                            inner: [{
                                class: "Questions__table",
                                inner: [{
                                    class: "Questions__cell",
                                    inner: {
                                        class: "Questions__title",
                                        inner: lang.mobile_stories_question_title
                                    }
                                }]
                            }, {
                                class: "Questions__close",
                                onclick: "Stories.hideQuestions();"
                            }]
                        }, {
                            class: "Questions__body",
                            inner: [{
                                class: "Questions__inner",
                                ontouchmove: "event.stopPropagation();",
                                inner: this.questions.map(function(e) {
                                    return {
                                        class: "Question",
                                        "data-id": e.id,
                                        inner: [{
                                            class: "Question__content",
                                            inner: [{
                                                href: e.author.link,
                                                class: "Question__author",
                                                inner: e.isAnonymous ? lang.mobile_stories_question_anonymous : e.author.name
                                            }, {
                                                class: Bem.class("Question__text", {
                                                    small: e.text.length > 40
                                                }),
                                                inner: e.text
                                            }]
                                        }, {
                                            class: Bem.class("Question__actions", {
                                                published: e.isPublished
                                            }),
                                            inner: lang.mobile_stories_question_actions,
                                            onclick: ["Stories.openQuestionActions", e.id]
                                        }]
                                    }
                                })
                            }]
                        }]
                    })
                }
            }]) && r(t.prototype, n), i && r(t, i), e
        }();
        t.default = o
    },
    W38l: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.log = function(e, t) {
            var n = Date.now(),
                i = (0, a.getNetworkType)(),
                s = r.default.isLongPollingEnabled(),
                l = {
                    action: t,
                    startTime: n,
                    networkType: i,
                    lpState: s
                };
            o[e] = l
        }, t.mark = function(e, t) {
            if (!o[e]) return;
            var n = o[e],
                i = n.startTime,
                a = n.action,
                r = n.lpState,
                s = n.networkType;
            statlogsValueEvent("mvk_mail_send_time", Date.now() - i, a, t, r, s)
        }, t.error = function(e, t, n) {
            if (!o[e]) return;
            var i = o[e],
                a = i.action,
                r = i.lpState,
                s = i.networkType;
            statlogsValueEvent("mvk_mail_send_error", 0, a, t, n, r, s)
        }, t.clean = function(e) {
            delete o[e]
        }, t.logQueueSize = function(e) {
            statlogsValueEvent("mvk_mail_send_queue_size", e, (0, a.getNetworkType)())
        };
        var i, a = n("jE2t"),
            r = (i = n("WwUR")) && i.__esModule ? i : {
                default: i
            };
        var o = {}
    },
    WCKs: function(e, t, n) {
        "use strict";
        var i, a = n("UxAg"),
            r = (i = n("p5n7")) && i.__esModule ? i : {
                default: i
            };
        var o = need("Btn"),
            s = need("Control"),
            l = window.Join || (window.Join = {});
        l._onCountryChange = d, l._onPhoneChange = f, l._onTermsAcceptChange = f;
        var c = {
                eu: "Join_eu"
            },
            u = {
                join: ".Join",
                phone: ".Join__phone",
                accept: ".Join__accept",
                submit: ".Join__submit"
            };

        function d(e) {
            var t = e.$option,
                n = (0, a.$)(u.join),
                i = "1" === t.getAttribute("data-eu");
            n.classList.toggle(c.eu, i);
            var o = (0, a.$)(u.phone),
                l = t.value;
            r.default.setPrefix(o, l), cur.calledPhoneExcludeCountries && val((0, a.$)(".join_desc"), getLang(-1 == indexOf(cur.calledPhoneExcludeCountries, t.getAttribute("data-id")) ? "mobile_join_about_phone_with_call" : "mobile_join_about_phone")), (0, a.$$)(u.accept).forEach(function(e) {
                return s.setChecked(e, !1)
            }), f()
        }

        function f() {
            var e = Array.prototype.slice.call((0, a.$$)(u.accept)),
                t = (0, a.$)(u.phone),
                n = (0, a.$)(u.submit);
            if (n) {
                var i = e.some(s.isChecked) && r.default.getValue(t).trim().length > 0;
                o.setDisabled(n, !i)
            } else(n = (0, a.$)('.button[type="submit"]')).disabled = !s.isChecked(e[0])
        }
    },
    WDxS: function(e, t, n) {
        "use strict";
        var i;
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var a = ((i = n("QD50")) && i.__esModule ? i : {
            default: i
        }).default;
        t.default = a
    },
    WS06: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.Notifications = l, t.default = void 0;
        var i = n("QWOa"),
            a = n("CjAb"),
            r = n("NJ1W"),
            o = n("80md"),
            s = n("/xuI");

        function l(e) {
            for (var t = Math.ceil((window.innerHeight - s.HEADER_HEIGHT) / 170), n = [], l = 0; l < t; l++) n.push((0, i.NotificationBlock)());
            return {
                inner: [(0, a.Header)({
                    hideIcon: !0
                }), {
                    inner: [(0, r.Row)({
                        inner: [(0, r.Col)({
                            inner: [(0, o.Line)()],
                            grow: 3
                        }), (0, r.Col)({
                            grow: 2
                        }), (0, r.Col)({
                            inner: [(0, o.Line)()],
                            grow: 2
                        })]
                    })],
                    class: "SkeletonNotifications__info",
                    tag: "div"
                }, n],
                class: "SkeletonNotifications Skeleton",
                tag: "div"
            }
        }
        var c = l;
        t.default = c
    },
    WTJf: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.OvalIsHidden = a, t.default = void 0;
        var i = function(e) {
            return Wd.html({
                class: [Bem.class("Oval", {
                    type: e.gray ? "minor" : e.type,
                    hidden: a(e.value)
                }), e.mix],
                inner: e.value
            })
        };

        function a(e) {
            return !e || e <= 0
        }
        t.default = i
    },
    WWoJ: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.Row = o, t.default = void 0;
        var i = r(n("8ZMO")),
            a = (r(n("p5n7")), r(n("I7Du")), r(n("9y81")));

        function r(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }

        function o() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                t = e.anchor,
                n = e.attrs || {},
                r = e.style || {},
                o = e.url,
                s = o && !r.no_go_icon;
            return {
                class: [e.mix || e.class, Bem.class("Row", {
                    go: s,
                    style_withBorder: r.with_border,
                    style_withBorderForce: r.with_border_force,
                    style_withHover: r.with_hover,
                    style_smallPaddings: r.small_paddings,
                    style_noPaddingTop: r.no_padding_top,
                    style_noPaddingBottom: r.no_padding_bottom,
                    style_tinyPaddingTop: r.tiny_padding_top,
                    style_tinyPaddingBottom: r.tiny_padding_bottom,
                    paddingTop_short: r.padding_top_short
                })],
                tag: e.tag || null,
                href: o,
                attrs: n,
                inner: [t ? (0, i.default)({
                    id: t
                }) : null, s ? Wd.wrap((0, a.default)({
                    mix: "Row__go",
                    icon: "chevron_right"
                })) : null, e.content || e.inner]
            }
        }
        var s = o;
        t.default = s
    },
    WeE2: function(e, t, n) {
        "use strict";
        var i = d(n("zEUu")),
            a = n("OcsD"),
            r = n("Ogzf"),
            o = d(n("TYsd")),
            s = function(e) {
                if (e && e.__esModule) return e;
                var t = u();
                if (t && t.has(e)) return t.get(e);
                var n = {};
                if (null != e) {
                    var i = Object.defineProperty && Object.getOwnPropertyDescriptor;
                    for (var a in e)
                        if (Object.prototype.hasOwnProperty.call(e, a)) {
                            var r = i ? Object.getOwnPropertyDescriptor(e, a) : null;
                            r && (r.get || r.set) ? Object.defineProperty(n, a, r) : n[a] = e[a]
                        }
                }
                n.default = e, t && t.set(e, n);
                return n
            }(n("t7Ww")),
            l = d(n("r/ag")),
            c = (d(n("29dZ")), n("QWbq"));

        function u() {
            if ("function" != typeof WeakMap) return null;
            var e = new WeakMap;
            return u = function() {
                return e
            }, e
        }

        function d(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }

        function f(e) {
            return function(e) {
                if (Array.isArray(e)) {
                    for (var t = 0, n = new Array(e.length); t < e.length; t++) n[t] = e[t];
                    return n
                }
            }(e) || function(e) {
                if (Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e)) return Array.from(e)
            }(e) || function() {
                throw new TypeError("Invalid attempt to spread non-iterable instance")
            }()
        }

        function h() {
            return (h = Object.assign || function(e) {
                for (var t = 1; t < arguments.length; t++) {
                    var n = arguments[t];
                    for (var i in n) Object.prototype.hasOwnProperty.call(n, i) && (e[i] = n[i])
                }
                return e
            }).apply(this, arguments)
        }
        var p = {
            drag: {
                curEl: null
            },
            cachedPhoto: {}
        };
        window.ThumbsEdit = {
            initialized: !1,
            _init: function() {
                onDOMReady(function() {
                    window.ThumbsEdit.init(!1), page.onChange(function() {
                        window.ThumbsEdit.init(!1, "/wall")
                    })
                })
            },
            init: function(e) {
                var t = this,
                    n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : nav.path;
                if (e || (e = $("#feed_add_form .cp_attached_wrap")), !e || 0 !== n.indexOf("/wall")) return this.initialized = !1, removeClass(document.body, "te_i"), void(p.destroyLongpress && p.destroyLongpress());
                if (addClass(document.body, "te_i"), !geByClass1("ThumbsEdit", e)) {
                    var i = (0, a.ceFromString)(o.default.html({
                            class: "ThumbsEdit",
                            style: "width: 100%; height: 100%",
                            id: "ThumbsEdit"
                        })),
                        r = (0, a.ceFromString)(o.default.html({
                            class: ["ThumbsEdit-wrap", " _preventMenuOpen"],
                            inner: i
                        }));
                    r.appendChild(i), e.insertBefore(r, e.firstChild), p = h({}, p, {
                        previews: [],
                        loaders: {},
                        attachEl: i
                    });
                    var s = this.parsePreviews((0, a.getPreloadData)());
                    this.initialized = !0, s.length && (p.previews = s, this.draw(), (0, a.onBodyResize)(function() {
                        return t.draw()
                    }))
                }
            },
            parsePreviews: function(e) {
                return e.map(function(e) {
                    return c.convert.apply(void 0, f(e))
                }).filter(function(e) {
                    var t = e.type;
                    return (0, c.isValidThumbType)(t)
                })
            },
            draw: function() {
                var e = this,
                    t = p,
                    n = t.previews,
                    i = t.attachEl,
                    a = n[0] ? (0, c.getRatio)(n[0]) : c.THUMBS_CONTAINER_DEFAULT_RATIO,
                    r = {
                        width: i.parentNode.offsetWidth,
                        height: Math.min(Math.round(i.parentNode.offsetWidth / a), 360),
                        wide: !0
                    },
                    o = (0, c.processThumbs)(r.width, r.height, n, r),
                    s = o.thumbs,
                    l = o.height,
                    u = o.width;
                p = h({}, p, {
                    thumbs: s,
                    height: l,
                    options: r
                });
                var d = document.createDocumentFragment();
                s.forEach(function(t, n) {
                    d.appendChild(e.createThumbEl(t, n))
                }), this.updateIds();
                var f = ce("div");
                f.id = "ThumbsEdit-splitter", val(i, ""), i.style.width = u + "px", i.parentNode.style.height = l + "px", i.appendChild(d), ge("ThumbsEdit-splitter") || i.parentNode.appendChild(f), mediaUpload.refreshUploadState(), this.updatePhotos()
            },
            update: function(e, t) {
                var n = this;
                if (e = ge(e)) {
                    var i = e.id,
                        r = ge(i),
                        s = p.thumbs,
                        l = p.height,
                        u = p,
                        d = u.options,
                        f = u.drag,
                        h = t[0] ? (0, c.getRatio)(t[0]) : c.THUMBS_CONTAINER_DEFAULT_RATIO,
                        A = d.width,
                        m = d.height;
                    A && m || (A = e.parentNode.offsetWidth, m = Math.min(Math.round(A / h), 360)), d.width = A, d.height = m, d.wide = !0;
                    var _ = (0, c.processThumbs)(A, m, t, d),
                        v = _.thumbs,
                        g = _.height,
                        y = _.width,
                        b = (0, a.ceFromString)(o.default.html({
                            class: "ThumbsEdit",
                            style: "width: ".concat(y, "px; height: ").concat(g, "px; position: fixed; left: ").concat(f.wpos[0], "px; top: ").concat(f.wpos[1], "px; visibility: hidden")
                        }));
                    v.forEach(function(e, t) {
                        b.appendChild(n.createThumbEl(e, t, !0))
                    }), document.body.appendChild(b);
                    var w = this.getCoords(b, f.wpos);
                    re(b), w.forEach(function(e, t) {
                        var n = p.drag.coords.find(function(t) {
                            return t.id === e.id
                        });
                        if (n) {
                            var i = geByClass1("Thumb", n.node),
                                r = $("img", i),
                                o = s[n.index],
                                l = v.find(function(e) {
                                    return e.id === o.id
                                });
                            p.drag.toIndex !== t && a.setStyle.transform(i, 1, [0, 0]), n.height === e.height && e.x === n.x && e.y === n.y && n.index !== p.drag.i || setTimeout(function() {
                                a.setStyle.animate(i, "margin-left, margin-top, height, width, opacity, transform", {
                                    duration: c.THUMB_DRAG_ANIMATION_DURATION + "ms"
                                }), (0, a.setStyle)(i, {
                                    "margin-left": 0,
                                    "margin-top": 0,
                                    height: e.height,
                                    width: e.width,
                                    opacity: 1
                                }), a.setStyle.transform(i, 1, [e.x - n.x, e.y - n.y]), a.setStyle.animate(i.parentNode, "background", {
                                    duration: c.THUMB_DRAG_ANIMATION_DURATION + "ms"
                                }), (0, a.setStyle)(i.parentNode, {
                                    func: "ease-in",
                                    background: "transparent"
                                });
                                var t = (0, c.crop)(l, e.width, e.height);
                                r && (a.setStyle.animate(r, Object.keys(t).join(), c.THUMB_DRAG_ANIMATION_DURATION + "ms"), (0, a.setStyle)(r, t))
                            })
                        }
                    }), l !== g && setTimeout(function() {
                        [r, r.parentNode].forEach(function(e) {
                            a.setStyle.animate(e, "height", {
                                duration: c.THUMB_DRAG_ANIMATION_DURATION + "ms"
                            }), (0, a.setStyle)(e, {
                                height: g
                            })
                        })
                    }), y >= A && (a.setStyle.animate(r, "width", {
                        duration: c.THUMB_DRAG_ANIMATION_DURATION + "ms"
                    }), (0, a.setStyle)(r, {
                        width: y
                    })), setTimeout(function() {
                        (0, a.setStyle)(r, {
                            width: y
                        }), p.thumbs = v, p.previews = t, p.height = g;
                        var e = document.createDocumentFragment();
                        v.forEach(function(t, i) {
                            e.appendChild(n.createThumbEl(t, i))
                        }), r.innerHTML = "", r.appendChild(e), p.drag.updating = !1, n.updatePhotos()
                    }, c.THUMB_DRAG_ANIMATION_DURATION)
                } else console.error("empty el to update")
            },
            createThumbEl: function(e, t) {
                var n = e.image,
                    s = e.width,
                    l = e.height,
                    u = e.type,
                    d = (0, c.crop)(e, s, l),
                    f = ["Thumb-wrap", "".concat("Thumb-wrap", "--").concat(u)],
                    h = 0 === e.id.indexOf("phototemp_"),
                    A = h || s <= 30 || l <= 60;
                h && f.push("".concat("Thumb-wrap", "--temp")), e.lastColumn && f.push("last_column"), e.lastRow && f.push("last_row");
                var m = p.previews[t],
                    _ = null;
                m.label && (_ = o.default.wrap(m.label));
                if (h && m.orientation > 1) {
                    var v = (s - l) / 2;
                    "\n        position: absolute;\n        right: ".concat(v, "px;\n        bottom: ").concat(-v, "px;\n        height: ").concat(s, "px;\n        width: ").concat(l, "px;\n       ")
                }
                var g = this.getCached(e.id, n.src);
                this.cachePhoto(e.id, n.src);
                var y = [{
                    tag: "img",
                    src: g ? g.src : n.src,
                    width: "".concat(Math.round(d.width)),
                    height: "".concat(Math.round(d.height)),
                    style: "margin-left: ".concat(d.marginLeft, "px; margin-top: ").concat(d.marginTop, "px;")
                }, {
                    class: "Thumb__overlay",
                    inner: [!A && {
                        class: "Thumb__overlay-closeBtn",
                        onclick: "ThumbsEdit.remove(null, ".concat(t, ")")
                    }, _]
                }, {
                    tag: "input",
                    type: "hidden",
                    name: "attach" + (t + 1) + "_type",
                    value: u
                }, {
                    tag: "input",
                    type: "hidden",
                    name: "attach" + (t + 1),
                    value: e.id.slice(u.length, e.id.length)
                }];
                if (h) {
                    var b, w = Math.min(Math.min((d.width - 24) / 2, 30), Math.min((d.height - 24) / 2, 30));
                    p.loaders[e.id] && (b = p.loaders[e.id]);
                    var k = i.default.init(b, w),
                        E = k.component,
                        S = k.id;
                    p.loaders[e.id] = S, y.push(E)
                }
                var C = (0, a.ceFromString)(o.default.html({
                        class: "Thumb",
                        style: "width: ".concat(Math.round(s), "px; height: ").concat(Math.round(l), "px"),
                        inner: y
                    })),
                    M = (0, a.ceFromString)(o.default.html({
                        class: f.join(" "),
                        style: "width: ".concat(Math.round(s), "px; height: ").concat(Math.round(l), "px"),
                        "data-media": e.id,
                        "data-index": t,
                        "data-upload": m.upload
                    }));
                return p.destroyLongpress = (0, r.onLongpress)(C, 350, this.startDrag.bind(this, C)), addEvent(M, "click", this.showPopup.bind(this)), M.appendChild(C), M
            },
            addTempPreview: function(e) {
                var t;
                if (p.attachEl) {
                    var n = this.parsePreviews([e]);
                    (t = p.previews).push.apply(t, f(n)), this.draw()
                }
            },
            replaceTemp: function(e, t, n) {
                var a = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : {},
                    r = p.previews.findIndex(function(t) {
                        return t.ownerId === e
                    }),
                    o = p.previews[r],
                    s = t.split("_").ownerId,
                    l = t.split("_").itemId;
                o.ownerId = s, o.owner_id = s, o.itemId = l, o.temp = !1, o.upload = e, o.list = n, o.photo.sizes = a, o.photo.id = "photo" + t, o.photo.pid = l, o.data = o.photo, i.default.ready(p.loaders["phototemp_" + e]), this.draw()
            },
            onUploadProgress: function(e, t) {
                i.default.update(p.loaders["phototemp_" + e], t)
            },
            preventScroll: function(e) {
                preventEvent(e)
            },
            startDrag: function(e, t) {
                if (addEvent(window, "touchmove", this.preventScroll), e.classList.contains("Thumb") && !e.classList.contains("Thumb--moving")) {
                    window.navigator.vibrate && navigator.vibrate(50), (0, a.setStyle)(document.body, "overflow", "hidden"), (0, a.setStyle)(document.body, "max-height", "100%"), (0, a.setStyle)(document.body, "user-select", "none");
                    var n = this.onDrag.bind(this),
                        i = this.onDrop.bind(this);
                    addEvent(window, "mousemove touchmove", n), addEvent(window, "mouseup touchend touchcancel", i), statlogsValueEvent("mvk_thumb_edit_interaction", ""), p.drag = h({}, p.drag, {
                        curEl: e,
                        curIndex: e.parentNode.dataset.index,
                        dragListener: n,
                        dropListener: i
                    });
                    var r = e.offsetWidth >= 40 && e.offsetHeight >= 80,
                        o = e.parentNode.parentNode,
                        s = $("img", e),
                        l = intval(e.parentNode.getAttribute("data-index")),
                        u = p.thumbs[l],
                        d = getXY(o),
                        f = getXY(e.parentNode),
                        A = this.getCoords(o, d);
                    p.drag.id = o.id, p.drag.i = l, p.drag.toIndex = l, p.drag.x = (t.pageX || t.detail.pageX) - f[0], p.drag.y = (t.pageY || t.detail.pageY) - f[1], p.drag.t = u, p.drag.w = u.width, p.drag.h = u.height, p.drag.pos = f, p.drag.wpos = d, p.drag.crop = (0, c.crop)(u, u.width, u.height), p.drag.coords = A, p.drag.needScale = r;
                    var m = r ? (0, c.scale)(u.width, u.height, .9 * e.offsetWidth, .9 * e.offsetHeight) : [u.width, u.height],
                        _ = m[0],
                        v = m[1],
                        g = intval((u.width - _) * (browser.android ? .5 : p.drag.x / u.width)),
                        y = intval((u.height - v) * (browser.android ? .5 : p.drag.y / u.height));
                    addClass(e, "Thumb--moving"), (0, a.setStyle)(e, {
                        zIndex: 100
                    }), (0, a.setStyle)(e.parentNode, {
                        zIndex: 100
                    });
                    var b = (0, c.crop)(u, _, v);
                    (0, a.setStyle)(e, {
                        opacity: .75,
                        width: _,
                        height: v,
                        marginLeft: g,
                        marginTop: y
                    }), s && (0, a.setStyle)(s, b), p.drag.state = !0
                }
            },
            onDrag: function(e) {
                var t = p.drag.curEl;
                if (e.touches && e.touches.length > 1) return this.drop();
                var n = this._getClickCoord(e),
                    i = n.x,
                    r = n.y,
                    o = p.drag,
                    s = i - (o.pos[0] + o.x),
                    l = r - (o.pos[1] + o.y);
                a.setStyle.transform(t, 1, [s, l]);
                var u = o.wpos;
                s = o.pos[0] + intval(t.style.marginLeft) + s - u[0], l = o.pos[1] + intval(t.style.marginTop) + l - u[1];
                var d = s,
                    f = l,
                    h = (t.offsetWidth, t.offsetHeight, o.i),
                    A = !1,
                    m = o.i,
                    _ = -1,
                    v = window.innerWidth >= 480 ? c.THUMBS_MESH_GAP_MVK : c.THUMBS_MESH_GAP_MVK_SMALL,
                    g = {};
                if (o.coords.forEach(function(e, t) {
                        if (t !== o.i && t !== _) {
                            e.offsetX = e.node.offsetWidth + v, e.offsetY = e.node.offsetHeight + v;
                            var n = o.coords[t - 1],
                                i = o.coords[t + 1],
                                r = d + o.x,
                                s = f + o.y,
                                l = e.x + e.offsetX / 2,
                                c = e.y + e.offsetY / 2,
                                u = e.x + e.offsetX,
                                p = e.y + e.offsetY,
                                y = (n && n.x === e.x && n.y != e.y && 0 != e.y || i && i.x === e.x && i.y != e.y) && 0 != e.x,
                                b = r >= l && (i && (r <= i.x + i.offsetX / 2 && (i.offsetY === e.offsetY || r < u) || i.y != e.y) || !i && d <= u) && s > e.y && s < p,
                                w = r < l && r >= e.x && (!n || n.y != e.y && !(n.x === e.x && !i)) && s > e.y && s < p,
                                k = y && s >= c && s < p && r > e.x && r < u,
                                E = y && s < c && s >= e.y && r > e.x && r < u;
                            b = b && !y, w = w && !y && !b, (b || w || k || E) && (A = !0, m = e.index < o.i && (b || k) ? e.index + 1 : h < e.index && (E || w) ? e.index - 1 : e.index), m !== o.i ? (a.setStyle.transform(e.node, 1, [b ? -5 : w ? 5 : 0, k ? -5 : E ? 5 : 0]), b ? (g.side = "right", g.toIndex = e.index) : w && (g.side = "left"), k ? (g.side = "down", g.toIndex = e.index) : E && (g.side = "up")) : a.setStyle.transform(e.node, 1, [0, 0]), b && i && i.y === e.y && i.x > e.x && h > e.index && (a.setStyle.transform(e.node, 1, [0, 0]), a.setStyle.transform(e.node, 1, [0, 0]), a.setStyle.transform(i.node, 1, [5, 0]), _ = t + 1, g.side = "left", g.toIndex = m), k && i && i.x === e.x && i.y > e.y && s <= c && (a.setStyle.transform(i.node, 1, [0, 0]), _ = t + 1), E && n && n.x === e.x && n.y < e.y && s <= c && (a.setStyle.transform(n.node, 1, [0, -5]), a.setStyle.transform(e.node, 1, [0, 0]), g.side = "down", g.toIndex = n.index), m === t && "number" != typeof g.toIndex && (g.toIndex = e.index)
                        }
                    }), g && (!o.split || o.split.toIndex !== g.toIndex || o.split.side !== g.side)) {
                    var y = ge("ThumbsEdit-splitter");
                    if ((0, a.setStyle)(y, {
                            opacity: 0
                        }), o.split = g, "number" == typeof g.toIndex) {
                        var b = o.coords[g.toIndex].node,
                            w = v === c.THUMBS_MESH_GAP_MVK_SMALL;
                        "left" === o.split.side && (0, a.setStyle)(y, {
                            left: Math.max(0, b.offsetLeft - (w ? 0 : 1)),
                            top: b.offsetTop + 8,
                            height: b.offsetHeight - 16,
                            width: "2px",
                            opacity: 1
                        }), "right" === o.split.side && (0, a.setStyle)(y, {
                            left: Math.min(b.offsetLeft + b.offsetWidth - (w ? 2 : 1), p.options.width - 2),
                            top: b.offsetTop + 8,
                            height: b.offsetHeight - 16,
                            width: "2px",
                            opacity: 1
                        }), "up" === o.split.side && (0, a.setStyle)(y, {
                            left: b.offsetLeft + 8,
                            top: b.offsetTop,
                            height: "2px",
                            width: b.offsetWidth - 16,
                            opacity: 1
                        }), "down" === o.split.side && (0, a.setStyle)(y, {
                            left: b.offsetLeft + 8,
                            top: b.offsetTop + b.offsetHeight - 1,
                            height: "2px",
                            width: b.offsetWidth - 16,
                            opacity: 1
                        })
                    }
                }
                return o.toIndex = A ? m : o.i, cancelEvent(e)
            },
            onDrop: function(e) {
                var t = p.drag;
                t.state = !1, t.updating = !0;
                var n = t.curEl,
                    i = $("img", n),
                    r = "touchcancel".split(" ").includes(e.type);
                if (removeEvent(window, "mousemove touchmove", t.dragListener), removeEvent(window, "mouseup touchend touchcancel", t.dropListener), removeEvent(window, "touchmove", this.preventScroll), document.body.contains(t.curEl)) {
                    if ((0, a.setStyle)(document.body, "overflow", null), (0, a.setStyle)(document.body, "max-height", null), (0, a.setStyle)(document.body, "user-select", null), a.setStyle.transform(n.parentNode, 1, [0, 0]), t.split) delete t.split, ge("ThumbsEdit-splitter").removeAttribute("style");
                    if (!hasClass(n, "Thumb--moving")) return t.updating = !1, cancelEvent(e);
                    if (r) {
                        var o = t.coords[t.toIndex].node;
                        a.setStyle.transform(o, 1, [0, 0])
                    }
                    if (t.toIndex === t.i || r) {
                        var s = t.crop;
                        a.setStyle.animate(n, "transform, margin-top, margin-left, width, height, opacity", {
                            duration: "100ms"
                        }, function() {
                            removeClass(n, "Thumb--moving")
                        }), a.setStyle.animate(i, "transform, margin-top, margin-left, width, height, opacity", {
                            duration: "100ms"
                        });
                        var l = p.thumbs[t.i];
                        a.setStyle.transform(n, 1, [0, 0]), (0, a.setStyle)(n, {
                            "margin-top": 0,
                            "margin-left": 0,
                            width: l.width,
                            height: l.height,
                            opacity: 1,
                            zIndex: null
                        }), (0, a.setStyle)(n.parentNode, {
                            zIndex: null
                        }), i && (0, a.setStyle)(i, s)
                    } else {
                        var u = p.previews;
                        u = (0, c.move)(u, t.i, t.toIndex), this.update(t.id, u)
                    }
                    return cancelEvent(e)
                }
            },
            getCoords: function(e, t) {
                var n = [];
                return t = t || getXY(e), f(Array.from(e.childNodes || [])).forEach(function(e, i) {
                    var a = getXY(e);
                    n[i] = {
                        id: e.getAttribute("data-media"),
                        x: intval(a[0] - t[0]),
                        y: intval(a[1] - t[1]),
                        width: intval(e.offsetWidth),
                        height: intval(e.offsetHeight),
                        index: intval(e.getAttribute("data-index")),
                        node: e
                    }
                }), n
            },
            remove: function(e, t) {
                var n = p.previews[t];
                e && l.default.close(e.target), mediaUpload.reset(null, null, n.remove, function() {
                    p.previews = p.previews.filter(function(e, n) {
                        return n !== t
                    }), ThumbsEdit.draw()
                })
            },
            showPopup: function(e) {
                var t = e.target;
                if (!p.drag.state && !t.classList.contains("Thumb--moving") && !t.classList.contains("Thumb__overlay-closeBtn")) {
                    e.cancelable && cancelEvent(e);
                    var n = t.closest(".Thumb-wrap").getAttribute("data-index"),
                        i = (0, a.ceFromString)(o.default.html(this.getPopup(n)));
                    l.default.open(i, !0)
                }
            },
            getPopup: function(e) {
                var t = p.previews[e],
                    n = null;
                switch (t.type) {
                    case "doc":
                        n = '\n          Gif.openPopup(null, null, {\n            raw: "'.concat(t.doc.id.slice(3, t.doc.id.length), '",\n            hasVideo: ').concat(Gif.isMp4Support(), "\n          });\n          Popup.close(this);\n        ");
                        break;
                    case "photo":
                        n = '\n          photo.zopen(null, null, "'.concat(t.data.id.slice(5, t.data.id.length), '", "').concat(t.list, '", {\n            hideOverlay: true,\n            single: true,\n          });\n          Popup.close(this);\n        ')
                }
                var i = (0, s.ModalMenuBtn)({
                        inner: getLang("mobile_delete"),
                        onclick: "ThumbsEdit.remove(event, ".concat(e, ")")
                    }),
                    a = null;
                return n && !t.temp && (a = (0, s.ModalMenuBtn)({
                    inner: getLang("mobile_open"),
                    onclick: "".concat(n)
                })), (0, s.default)({
                    class: "ThumbsEdit__modal",
                    close: !0,
                    items: [a, i]
                })
            },
            _getClickCoord: function(e) {
                return {
                    x: e.touches ? e.touches[0].pageX : e.pageX,
                    y: e.touches ? e.touches[0].pageY : e.pageY
                }
            },
            cachePhoto: function(e, t, n) {
                var i = ce("img");
                if (i.src = t, p.cachedPhoto[e]) {
                    var a = p.cachedPhoto[e].find(function(e) {
                        return e.src === t
                    });
                    a ? n && n(a.src) : i.onload = function() {
                        p.cachedPhoto[e].push({
                            width: i.width,
                            height: i.height,
                            src: t
                        }), p.cachedPhoto[e].sort(function(e, t) {
                            return e.width > t.width ? -1 : e.width < t.width ? 1 : 0
                        }), n && n(t)
                    }
                } else p.cachedPhoto[e] = []
            },
            updatePhotos: function() {
                var e = this;
                p.thumbs.forEach(function(t) {
                    var n = $("[data-media=".concat(t.id, "] img"));
                    n.src !== t.image.src && e.cachePhoto(t.id, t.image.src, function(e) {
                        n.src = e
                    })
                })
            },
            getCached: function(e, t) {
                var n = ce("img");
                return n.src = t, n.complete ? t : p.cachedPhoto[e] && 0 !== p.cachedPhoto[e].length ? p.cachedPhoto[e].find(function(e) {
                    var t = e.src,
                        n = ce("img");
                    return n.src = t, n.complete
                }) : null
            },
            getThumbsCount: function() {
                return (p.thumbs || []).length
            },
            updateIds: function() {
                var e = $$(".mr_x_wrap"),
                    t = this.getThumbsCount() + 1;
                e.forEach(function(e, n) {
                    var i = $$("input", e),
                        a = t + n;
                    i[0].name = "attach".concat(a, "_type"), i[1].name = "attach".concat(a)
                })
            }
        }
    },
    WgE6: function(e, t, n) {
        "use strict";

        function i(e, t) {
            for (var n = 0; n < t.length; n++) {
                var i = t[n];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var a = function() {
            function e(t, n) {
                ! function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, e);
                var i = Object.assign({}, {
                    tick: 100,
                    onEnd: function() {},
                    onTick: function() {},
                    onStart: function() {},
                    onPause: function() {},
                    onStop: function() {}
                }, n);
                this.left = t, this.initialTime = t, this.tick = i.tick, this.onEnd = i.onEnd, this.onTick = i.onTick, this.onStart = i.onStart, this.onPause = i.onPause, this.onStop = i.onStop, this.started = !1
            }
            var t, n, a;
            return t = e, (n = [{
                key: "stop",
                value: function() {
                    var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0];
                    this.started && (this.pause(e), this.left = this.initialTime, e || this.onStop())
                }
            }, {
                key: "pause",
                value: function() {
                    var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0];
                    this.timer && (this.timer = clearInterval(this.timer), this.started = !1, e || this.onPause())
                }
            }, {
                key: "start",
                value: function() {
                    var e = this;
                    if (this.started) return !1;
                    var t = new Date(Date.now() + this.left).getTime();
                    this.started = !0, this.timer = setInterval(function() {
                        var n = (new Date).getTime();
                        e.left = t - n, e.left <= 0 ? (e.onTick(0), e.onEnd(), e.stop(!0)) : e.onTick(e.left)
                    }, this.tick), this.onStart()
                }
            }, {
                key: "isStarted",
                value: function() {
                    return this.started
                }
            }, {
                key: "getTimeLeft",
                value: function() {
                    return this.left
                }
            }]) && i(t.prototype, n), a && i(t, a), e
        }();
        t.default = a
    },
    WwUR: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = n("OcsD"),
            r = (i = n("+cqQ")) && i.__esModule ? i : {
                default: i
            },
            o = n("XK78"),
            s = n("EUzL"),
            l = n("BxOC"),
            c = n("f01n");
        var u = window.clog,
            d = {
                onNewMsg: (0, r.default)("{ peerId, msgId, authorId, text, date, hasAttachments, flags, isService }"),
                onEditMsg: (0, r.default)("{ peerId, msgId, authorId, text, date, hasAttachments, flags }"),
                onMsgReadByMe: (0, r.default)("msgId", "dialogId"),
                onMsgReadByOther: (0, r.default)("msgId", "dialogId"),
                onOnlineChange: (0, r.default)("{ userId, isOnline, onlinePlatform, lastActionTime }"),
                onTyping: (0, r.default)("dialogId", "authorId"),
                onMultiTyping: (0, r.default)("peerId", "userIds", "totalCount"),
                onRecordingAudio: (0, r.default)("peerId", "userIds", "totalCount"),
                onMsgImportantRemove: (0, r.default)("msgId"),
                onMsgImportantAdd: (0, r.default)("msgId"),
                onMsgRequestChange: (0, r.default)("peerId", "type"),
                onMsgRemove: (0, r.default)("msgId"),
                onMsgListen: (0, r.default)("msgId"),
                onMsgRestore: (0, r.default)("msgId"),
                onPeerKeyboard: (0, r.default)("peerId"),
                onPeerBanner: (0, r.default)("peerId"),
                onPeerConvert: (0, r.default)("peerId", "convertId"),
                onPeerAdmin: (0, r.default)("peerId", "userId", "isAdmin"),
                onDialogImportant: (0, r.default)("peerId", "isImportant"),
                onDialogRemove: (0, r.default)("peerId"),
                onUnreadCount: (0, r.default)("count"),
                onResync: (0, r.default)(),
                _onLpEvents: (0, r.default)("Array<Object>"),
                init: function(e) {
                    d._lpConnect && (d._onLpEvents.off(), d._lpConnect.stopConnection(), d._lpQueue = null, d._lpConnect = null), d._lpConfig = e
                },
                isLongPollingEnabled: function() {
                    return !(!d._lpConnect || d._lpConnect.isStopped())
                },
                on: function() {
                    u("[longpoll] start"), window.addEventListener("online", h), window.addEventListener("offline", h), d._lpConnect ? d._lpConnect.reinitConnection() : d._createLongpoll(d._lpConfig)
                },
                off: function() {
                    u("[longpoll] stop"), window.removeEventListener("online", h), window.removeEventListener("offline", h), d._lpConnect && d._lpConnect.stopConnection()
                },
                pause: function() {
                    u("[longpoll] pause"), d._lpQueue && d._lpQueue.pause()
                },
                resume: function() {
                    u("[longpoll] resume"), d._lpQueue && d._lpQueue.resume()
                },
                abortWaiting: function() {
                    u("[longpoll] abort waiting"), d._lpConnect.abortWaiting()
                },
                _createLongpoll: function(e) {
                    if (!d._lpConnect) {
                        var t = (0, s.createLongpollEventsQueue)(e.ts, function(e) {
                                d._onLpEvents(e)
                            }),
                            n = (0, o.createLongpollConnect)(e, {
                                onEvents: function(e, n, i) {
                                    i.forEach(function(i) {
                                        t.onLp(e, n, [i])
                                    })
                                },
                                onHistoryLost: function() {
                                    u("[longpoll] ts expired")
                                },
                                onKeyExpired: function(e) {
                                    return u("[longpoll] key expired"), (0, l.post)("/mail", {
                                        act: "get_key",
                                        user_id: e.id
                                    })
                                },
                                onLpBroken: function() {
                                    u("[longpoll] broken, reload"), window.location.reload()
                                }
                            });
                        d._lpQueue = t, d._lpConnect = n, d._onLpEvents(function(e) {
                            try {
                                e.forEach(d._onEvent)
                            } catch (e) {
                                console.error(e)
                            }
                        })
                    }
                },
                _onEvent: function(e) {
                    var t = e.type;
                    switch (t) {
                        case c.REPLACE_FLAGS:
                            var n = e.flags,
                                i = e.messageId;
                            e.peerId;
                            n & c.FLAG_IMPORTANT ? d.onMsgImportantAdd(i) : d.onMsgImportantRemove(i), n & c.FLAG_DELETED || n & c.FLAG_SPAM ? d.onMsgRemove(i) : d.onMsgRestore(i);
                            break;
                        case c.SET_FLAGS:
                            var r = e.flags,
                                o = e.messageId,
                                s = e.peerId;
                            r & c.FLAG_IMPORTANT && d.onMsgImportantAdd(o), (r & c.FLAG_DELETED || r & c.FLAG_SPAM) && d.onMsgRemove(o, s), r & c.FLAG_AUDIO_MESSAGE_LISTENED && d.onMsgListen(o);
                            break;
                        case c.RESET_FLAGS:
                            var l = e.flags,
                                u = e.messageId;
                            e.peerId;
                            l & c.FLAG_IMPORTANT && d.onMsgImportantRemove(u), (l & c.FLAG_DELETED || l & c.FLAG_SPAM) && d.onMsgRestore(u);
                            break;
                        case c.ADD_MESSAGE:
                        case c.EDIT_MESSAGE:
                        case c.REPLACE_MESSAGE:
                            var f = e.messageId,
                                h = e.peerId,
                                p = e.randomId,
                                A = e.text,
                                m = e.flags,
                                _ = e.attaches,
                                v = e.kludges,
                                g = e.date,
                                y = (0, a.toInt)(v.from_admin) || null,
                                b = function(e) {
                                    if (e.flags & c.FLAG_OUTBOUND) return d._lpConfig.id;
                                    return e.userId
                                }(e),
                                w = !!v.source_act,
                                k = t === c.EDIT_MESSAGE || t === c.REPLACE_MESSAGE,
                                E = m & c.FLAG_OUTBOUND,
                                S = !!(m & c.FLAG_STEALTH),
                                C = v.keyboard,
                                M = function(e, t) {
                                    t & c.FLAG_HAS_REPLY && function(e) {
                                        e.fwd_count
                                    }(e)
                                }(v, m),
                                P = {
                                    peerId: h,
                                    id: f,
                                    authorId: b,
                                    attaches: _,
                                    text: A,
                                    ts: g,
                                    flags: m,
                                    adminId: y,
                                    randomId: p,
                                    isService: k ? void 0 : w,
                                    edited: !!k || void 0,
                                    replaced: t === c.REPLACE_MESSAGE,
                                    keyboard: C,
                                    isStealth: S,
                                    isOut: E,
                                    hasReply: M
                                };
                            k ? d.onEditMsg(P) : d.onNewMsg(P);
                            break;
                        case c.READ_INBOUND:
                        case c.READ_OUTBOUND:
                            var T = e.peerId,
                                D = e.upToId;
                            e.unread;
                            t === c.READ_INBOUND ? d.onMsgReadByMe(D, T) : d.onMsgReadByOther(D, T);
                            break;
                        case c.GOT_ONLINE:
                        case c.GOT_OFFLINE:
                            var I = e.userId,
                                x = e.platform,
                                O = (e.reason, e.lastSeenTs),
                                L = "mobile";
                            x && 6 !== x && 7 !== x || (L = "desktop"), d.onOnlineChange({
                                userId: I,
                                isOnline: t === c.GOT_ONLINE,
                                onlinePlatform: L,
                                lastActionTime: O
                            });
                            break;
                        case c.RESET_DIRECTORIES:
                        case c.SET_DIRECTORIES:
                            var B = e.mask,
                                R = e.peerId;
                            e.local;
                            B & c.FOLDER_IMPORTANT && d.onDialogImportant(R, t === c.SET_DIRECTORIES);
                            break;
                        case c.REPLACE_DIRECTORIES:
                            var N = e.mask,
                                j = e.peerId;
                            e.local;
                            d.onDialogImportant(j, !!(N & c.FOLDER_IMPORTANT));
                            break;
                        case c.DELETE_DIALOG:
                            var F = e.peerId;
                            d.onDialogRemove(F);
                            break;
                        case c.CONVERSATION_UPDATED:
                            var H = e.peerId,
                                V = e.updateType,
                                U = e.updateArg;
                            if (11 === V && d.onPeerKeyboard(H), 10 === V && d.onPeerBanner(H), 13 === V && d.onPeerConvert(U, H), 12 === V) {
                                var z = "";
                                switch (U) {
                                    case 3:
                                        z = "created";
                                        break;
                                    case 2:
                                        z = "rejected";
                                        break;
                                    case 1:
                                        z = "accepted";
                                        break;
                                    case 0:
                                        z = "canceled"
                                }
                                d.onMsgRequestChange(H, z)
                            }
                            3 === V && d.onPeerAdmin(H, U, !0), 9 === V && d.onPeerAdmin(H, U, !1);
                            break;
                        case c.TYPING:
                            var W = e.peerId,
                                q = e.userIds,
                                $ = e.totalCount;
                            e.ts;
                            d.onMultiTyping(W, q, $);
                            break;
                        case c.RECORDING_AUDIO:
                            var G = e.peerId,
                                Q = e.userIds,
                                Y = e.totalCount;
                            e.ts;
                            d.onRecordingAudio(G, Q, Y);
                            break;
                        case c.VIDEO_CALL:
                            break;
                        case c.UNREAD_COUNT:
                            var X = e.count,
                                K = e.countNotMuted,
                                J = e.showOnlyNotMuted;
                            d.onUnreadCount(J ? K : X);
                            break;
                        case c.NOTIFY_SETTINGS_CHANGED:
                            break;
                        case c.RESYNC:
                            d.onResync()
                    }
                }
            },
            f = d;

        function h(e) {
            "online" === e.type ? (u("[longpoll] online"), d._lpConnect.reinitConnection()) : (u("[longpoll] offline"), d._lpConnect.stopConnection())
        }
        t.default = f
    },
    X6as: function(e, t, n) {
        "use strict";

        function i(e, t) {
            for (var n = 0; n < t.length; n++) {
                var i = t[n];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.Slider = void 0;
        var a = 35;
        void 0 === window.isTouch && (window.isTouch = !1);
        var r = function() {
            function e(t, n) {
                if (function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, e), !t) throw new Error("No element was provided for Slider");
                t = ge(t), this.options = n || {
                    size: 1
                }, void 0 === this.options.logfbase && (this.options.logfbase = a), this.options.backValue = this.options.backValue || 0;
                var i = 100 * this.options.backValue,
                    r = '<div class="slider_slide"><div class="slider_loading_bar" style="opacity: 0; display: none;"></div> ' + (this.options.withBackLine ? '<div class="slider_back" style="width:' + i + '%"></div>' : "") + ' <div class="slider_amount"></div> <div class="slider_handler"></div> </div>';
                this._el = ce("div", {
                    innerHTML: r,
                    className: "slider",
                    id: t.getAttribute("id") || ""
                });
                var o = this;
                if (t.classList)
                    for (var s = t.classList, l = 0, c = s.length; l < c; l++) addClass(this._el, s[l]);
                else this._el.className = t.className;
                each(this._el.attributes, function(e, t) {
                    "id" == t.name && "class" == t.name || o._el.setAttribute(t.name, t.value)
                }), t.parentNode.replaceChild(this._el, t), this._amountEl = geByClass1("slider_amount", this._el), this._handlerEl = geByClass1("slider_handler", this._el), this._slideEl = geByClass1("slider_slide", this._el), this._backEl = geByClass1("slider_back", this._el), this._progressEl = geByClass1("slider_loading_bar", this._el), this.options.color && (setStyle(this._amountEl, {
                    backgroundColor: this.options.color
                }), setStyle(this._handlerEl, {
                    backgroundColor: this.options.color
                })), this.options.backColor && setStyle(this._slideEl, {
                    backgroundColor: this.options.backColor
                }), addClass(this._el, "slider_size_" + this.options.size), this.options.debounce && (this._onValueChangeDebounced = debounce(this._onValueChange, this.options.debounce)), !isTouch && n.formatHint && (addEvent(this._el, "mousemove", this._ev_onMouseOver = this._onMouseOver.bind(this)), addEvent(this._el, "mouseleave", this._ev_onMouseLeave = this._onMouseLeave.bind(this))), addEvent(this._el, isTouch ? "touchstart" : "mousedown", this._ev_onMouseDown = this._onMouseDown.bind(this)), addEvent(this._el, "click", cancelEvent), this.setValue(this.options.value || 0, !this.options.fireChangeEventOnInit, !1), this.setBackValue(this.options.backValue)
            }
            var t, n, r;
            return t = e, (n = [{
                key: "toggleLoading",
                value: function(e) {
                    e = !!e, toggle(this._progressEl, e), setStyle(this._progressEl, "opacity", e ? 1 : 0)
                }
            }, {
                key: "destroy",
                value: function() {
                    !isTouch && this.options.formatHint && (removeEvent(this._el, "mousemove", this._ev_onMouseOver), removeEvent(this._el, "mouseleave", this._ev_onMouseLeave), removeEvent(this._el, "mousedown", this._ev_onMouseDown));
                    var e = window.re || window.remove;
                    e(this._el), e(this._currHintEl)
                }
            }, {
                key: "_updateHint",
                value: function(e, t) {
                    this._currHintEl || (this._currHintEl = ce("div", {
                        className: "slider_hint",
                        id: "slider_hint"
                    }), this.options.hintClass && addClass(this._currHintEl, this.options.hintClass), this._el.appendChild(this._currHintEl));
                    var n = this._getPos(),
                        i = Math.round((e.pageX || e.touches[0].pageX) - n[0]),
                        a = this._width;
                    if ((i = t ? Math.min(Math.max(0, i), a) : i) >= 0 && i <= a) {
                        var r = i / a;
                        this._currHintEl.innerHTML = this.options.formatHint ? this.options.formatHint.call(this, r) : r;
                        var o = this._currHintEl.getBoundingClientRect();
                        setStyle(this._currHintEl, {
                            left: this._slideEl.offsetLeft + i - (o.right - o.left) / 2,
                            top: this._slideEl.offsetTop - (o.bottom - o.top) - 10
                        }), !t && this._toggleHint(!0)
                    } else !t && this._toggleHint(!1);
                    this.options.formatHint || this._toggleHint(!1)
                }
            }, {
                key: "_toggleHint",
                value: function(e) {
                    toggleClass(this._currHintEl, "visible", e)
                }
            }, {
                key: "_onMouseOver",
                value: function(t) {
                    e._currenSliderDrag || hasClass(this._el, "active") || this._updateHint(t)
                }
            }, {
                key: "_onMouseLeave",
                value: function(e) {
                    hasClass(this._el, "active") || this._toggleHint(!1)
                }
            }, {
                key: "_onMouseDown",
                value: function(t) {
                    (0 == t.button || t.touches) && (delete cur._sliderMouseUpNowEl, addEvent(window, isTouch ? "touchmove" : "mousemove", this._ev_onMouseMove = this._onMouseMove.bind(this)), addEvent(window, isTouch ? "touchend touchcancel" : "mouseup", this._ev_onMouseUp = this._onMouseUp.bind(this)), this._onMouseMove(t), e._currenSliderDrag = this, addClass(this._el, "active"), cancelEvent(t))
                }
            }, {
                key: "_onMouseUp",
                value: function(t) {
                    cur._sliderMouseUpNowEl = this._el, removeEvent(window, isTouch ? "touchmove" : "mousemove", this._ev_onMouseMove), removeEvent(window, isTouch ? "touchend touchcancel" : "mouseup", this._ev_onMouseUp), this._onValueChange(), removeClass(this._el, "active"), e._currenSliderDrag = !1, this._toggleHint(!1), this.options.onEndDragging && this.options.onEndDragging(this._currValue), cancelEvent(t)
                }
            }, {
                key: "_onMouseMove",
                value: function(e) {
                    var t = this._getPos(),
                        n = t[0];
                    n = void 0 !== e.touches && e.touches.length > 0 ? e.touches[0].pageX : e.pageX, n = Math.max(n, t[0]), n = Math.min(n, t[0] + this._width), n -= t[0], this.setValue(n / this._width, !0, !0), this._onValueChangeDebounced ? this._onValueChangeDebounced() : this._onValueChange(), this._toggleHint(!0), this._updateHint(e, !0), cancelEvent(e)
                }
            }, {
                key: "_getPos",
                value: function() {
                    return this._slidePos = getXY(this._slideEl)
                }
            }, {
                key: "_logf",
                value: function(e) {
                    if (!this.options.log) return e;
                    var t = this.options.logfbase;
                    return (Math.pow(t, e) - 1) / (t - 1)
                }
            }, {
                key: "_unlogf",
                value: function(e) {
                    if (!this.options.log) return e;
                    var t, n, i = this.options.logfbase;
                    return t = i, n = 1 + e * (i - 1), Math.log(n) / Math.log(t)
                }
            }, {
                key: "setValue",
                value: function(e, t, n) {
                    if (!hasClass(this._el, "active") || n) {
                        var i = n ? this._logf(e) : e;
                        if (this._currValue != i) {
                            this._currValue = i;
                            var a = n ? e : this._unlogf(e);
                            a = 100 * a + "%", setStyle(this._amountEl, {
                                width: a
                            }), setStyle(this._handlerEl, {
                                left: a
                            }), !t && this._onValueChange()
                        }
                    }
                }
            }, {
                key: "setBackValue",
                value: function(e) {
                    toggleClass(this._backEl, "slider_back_transition", e > this._backValue), this._backValue = e;
                    var t = 100 * e + "%";
                    setStyle(this._backEl, {
                        width: t
                    })
                }
            }, {
                key: "_onValueChange",
                value: function() {
                    this._lastValue = this._lastValue || 0, this._lastValue != this._currValue && (this._lastValue = this._currValue, this.options.onChange && this.options.onChange(this._currValue))
                }
            }, {
                key: "_width",
                get: function() {
                    if (!this._widthCache) {
                        var e = this._el.getBoundingClientRect();
                        this._widthCache = e.right - e.left
                    }
                    return this._widthCache
                }
            }]) && i(t.prototype, n), r && i(t, r), e
        }();
        t.Slider = r
    },
    XBHu: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.AudioAds = void 0;
        var i = n("lkNA"),
            a = n("rEJs"),
            r = n("W0fz"),
            o = n("VnbJ"),
            s = n("YvCB");

        function l(e, t) {
            for (var n = 0; n < t.length; n++) {
                var i = t[n];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        }
        var c = function() {
            function e(t, n, i) {
                ! function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, e), this._isPlaying = !1, this._adsCurrentProgress = 0, this._adman = null, this._admanLoaded = !1, this._adEvents = [], this.player = t || {}, this.playerVersion = n || null, this._startAdsTO = null, this._adsConfig = null, this._duration = 0, this.isMvk = Boolean(i), this.adsStatUrl = this.isMvk ? "audio" : "al_audio.php"
            }
            var t, n, c;
            return t = e, (n = [{
                key: "isPlaying",
                value: function() {
                    return this._isPlaying
                }
            }, {
                key: "setAdsConfig",
                value: function(e) {
                    this._adsConfig = e
                }
            }, {
                key: "getCurrentProgress",
                value: function() {
                    return this._adsCurrentProgress
                }
            }, {
                key: "getDuration",
                value: function() {
                    return this._duration
                }
            }, {
                key: "loadAdman",
                value: function(t) {
                    var n = this,
                        a = function(e) {
                            return t && t(e)
                        };
                    if (this._admanLoaded) a();
                    else {
                        var r = 0;
                        (0, i.loadScript)(e.ADMAN_SRC, {
                            onLoad: function() {
                                n._admanLoaded = !0, a()
                            },
                            onError: function() {
                                window.abp ? (n._admanLoaded = !0, a()) : (3 === (r += 1) && (n._admanLoaded = !0), a("script_load_fail"))
                            }
                        })
                    }
                }
            }, {
                key: "_fetchAd",
                value: function(t, n, i, r, o) {
                    var s = this;
                    this.loadAdman(function(l) {
                        if (!window.AdmanHTML) return s._sendEvent("no_adman", n, e.AD_TYPE, l), r && r();
                        s._adman = new AdmanHTML;
                        var c = {
                            _SITEID: 276,
                            ver: 251116,
                            vk_id: vk.id,
                            duration: t.duration,
                            content_id: u(t.ownerId, t.id),
                            vk_catid: e.CAT_IDS[n] || e.CAT_IDS.other
                        };
                        extend(c, t.ads || {}), nav.objLoc && nav.objLoc.preview && (c.preview = intval(nav.objLoc.preview)), cur.adsPreview && (c.preview = 1, c.vk_id = 398724832), s._adman.setDebug(!!c.preview), s._adman.onError(function() {
                            return r && r()
                        }), s._adman.onReady(function() {
                            if (s._adman) {
                                var t = s._adman.getBannersForSection(e.AD_TYPE);
                                t && t.length ? "statistics" === t[0].type ? (s._play(!0, n), r && r()) : (s._sendEvent("received", n), i ? (s._sendEvent("rejected", n, e.AD_TYPE, o), s.deinit(), r && r()) : (s._sendEvent("ready", n), s.player.notify(a.events.AD_READY), s._play(!1, n, r))) : (i || s._sendEvent("not_received", n), r && r())
                            }
                        }), s._adman.init({
                            slot: 3514,
                            wrapper: s.isMvk ? ce("div") : se("<div></div>"),
                            params: c,
                            browser: {
                                adBlock: !!window.abp,
                                mobile: !1
                            }
                        }), s._sendEvent("requested", n)
                    })
                }
            }, {
                key: "_sendEvent",
                value: function(e, t, n, i) {
                    var a = this,
                        r = n ? "/" + n : "",
                        o = i ? "/" + i : "";
                    this._adEvents.push(e + "/" + t + r + o), clearTimeout(this._adEventDelay), this._adEventDelay = setTimeout(function() {
                        ajax.post(a.adsStatUrl, {
                            act: "ad_event",
                            events: a._adEvents.join(","),
                            v: a.playerVersion,
                            abp: intval(window.abp)
                        }, {
                            onFail: function() {
                                return !0
                            }
                        }), a._adEvents = []
                    }, 500)
                }
            }, {
                key: "_play",
                value: function(t, n, i) {
                    var r = this;
                    this._adman.onCompleted(function() {
                        r.deinit(!0), t ? r._sendEvent("statistics", n) : (r.player.notify(a.events.PROGRESS, 0), r.player.notify(a.events.AD_COMPLETED), r._isPlaying = !1, r._adsCurrentProgress = 0, r._sendEvent("completed", n), window.setDocumentTitle && window.setDocumentTitle(r._adsPrevTitle), i && i())
                    }), this._adman.onStarted(function() {
                        t || (r.player.setIsPlaying(!0), r.player.notify(a.events.PROGRESS, 0), r.player.notify(a.events.AD_STARTED), r.updateVolume(), r._sendEvent("started", n))
                    });
                    var o = [.25, .5, .75];
                    if (this._adman.onTimeRemained(function(e) {
                            r._duration = isNaN(e.duration) ? 0 : e.duration, r._adsCurrentProgress = (isNaN(e.percent) ? 0 : e.percent) / 100, r.player.notify(a.events.PROGRESS, r._adsCurrentProgress, r._duration), each(o, function(e, t) {
                                if (r._adsCurrentProgress >= t) return o.shift(), r._sendEvent("progress_" + intval(100 * t), n), !1
                            })
                        }), this._adman.start(e.AD_TYPE), t) return i && i();
                    this._isPlaying = !0, this.player.notify(a.events.PLAY), this.player.notify(a.events.PROGRESS, 0), this._adsPrevTitle = document.title, this.isMvk || setDocumentTitle(getLang("global_audio_ad"))
                }
            }, {
                key: "updateVolume",
                value: function() {
                    this._adman && this._adman.setVolume(.7 * this.player.getVolume())
                }
            }, {
                key: "deinit",
                value: function(e) {
                    this._adman = null, !e && this.player.notify(a.events.AD_DEINITED)
                }
            }, {
                key: "pause",
                value: function() {
                    this._adman && (this.player.setIsPlaying(!1), this._adman.pause(), this.player.notify(a.events.PAUSE))
                }
            }, {
                key: "resume",
                value: function() {
                    this._adman && (this.player.setIsPlaying(!0), this._adman.resume(), this.player.notify(a.events.PLAY))
                }
            }, {
                key: "checkPlay",
                value: function(t, n) {
                    var i = this.player._getPlayingContextSection(),
                        a = this._isAllowed(t),
                        r = a.type,
                        o = a.reason,
                        s = function() {
                            return n && n()
                        };
                    switch (r) {
                        case e.ALLOW_ALLOWED:
                            this._fetchAd(t, i, !1, s);
                            break;
                        case e.ALLOW_DISABLED:
                            s();
                            break;
                        case e.ALLOW_REJECT:
                            this._fetchAd(t, i, !0, !1, o), s()
                    }
                }
            }, {
                key: "_isAllowed",
                value: function(t) {
                    if (vk.widget) return {
                        type: e.ALLOW_DISABLED
                    };
                    if ((0, r.isPodcast)(t)) return {
                        type: e.ALLOW_DISABLED
                    };
                    if (window.browser && window.browser.safari) return {
                        type: e.ALLOW_DISABLED
                    };
                    if (cur.adsPreview) return {
                        type: e.ALLOW_ALLOWED
                    };
                    var n = this._adsConfig || vk.audioAdsConfig || window.audioAdsConfig;
                    if (n) {
                        if (!n.enabled) return {
                            type: e.ALLOW_DISABLED
                        };
                        if (n.day_limit_reached) return {
                            type: e.ALLOW_REJECT,
                            reason: e.REJECT_REASON_LIMIT
                        };
                        var i = this.player._getPlayingContextSection();
                        return n.sections.indexOf(i) > -1 ? {
                            type: e.ALLOW_ALLOWED
                        } : {
                            type: e.ALLOW_REJECT,
                            reason: e.REJECT_REASON_SECTION
                        }
                    }
                    return {
                        type: e.ALLOW_REJECT,
                        reason: e.REJECT_REASON_UNKNOWN
                    }
                }
            }, {
                key: "startPlay",
                value: function(e, t, n) {
                    var i = this;
                    this._startAdsTO && (0, o.clearWorkerTimeout)(this._startAdsTO), t ? this._startAdsTO = (0, s.setWorkerTimeout)(function() {
                        return i.checkPlay(e, n)
                    }, 0) : this.checkPlay(e, n)
                }
            }]) && l(t.prototype, n), c && l(t, c), e
        }();

        function u(e, t) {
            for (var n = e.toString(16), i = t.toString(16); i.length < 8;) i = "0" + i;
            return n + i
        }
        t.AudioAds = c, c.ADMAN_SRC = "//ad.mail.ru/static/admanhtml/rbadman-html5.min.js", c.CAT_IDS = {
            my: 101,
            my_playlists: 101,
            audio_feed: 109,
            recent: 113,
            user_wall: 104,
            group_wall: 104,
            user_list: 102,
            group_list: 103,
            user_playlists: 102,
            group_playlists: 103,
            feed: 105,
            search: 110,
            global_search: 110,
            replies: 104,
            im: 106,
            group_status: 104,
            user_status: 104,
            recs: 107,
            recs_audio: 107,
            recs_album: 107,
            other: 114
        }, c.AD_TYPE = "preroll", c.ALLOW_DISABLED = 1, c.ALLOW_ALLOWED = 2, c.ALLOW_REJECT = 3, c.REJECT_REASON_UNKNOWN = "unknown", c.REJECT_REASON_LIMIT = "track_limit_exceeded", c.REJECT_REASON_SECTION = "section_not_allowed"
    },
    XCiN: function(e, t, n) {
        "use strict";
        var i = n("izth");
        window.isBootstrapInited || (window.cur = {
            destroy: []
        }, window.lang = {}, (0, i.setDocumentDomain)(), window.NodeList && !NodeList.prototype.forEach && (NodeList.prototype.forEach = Array.prototype.forEach), window.isBootstrapInited = !0)
    },
    XK78: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.createLongpollConnect = function(e, t) {
            var n = !!e.stopped,
                i = {
                    id: e.id,
                    key: e.key,
                    ts: e.ts,
                    url: e.url,
                    lpstat: e.lpstat || 0,
                    version: e.version || c,
                    mode: l,
                    waitTimeout: 2,
                    waitAbortFns: [],
                    isStoppedFn: function() {
                        return n
                    },
                    onResult: function(e) {
                        e.ts && o(i.ts, e.ts, e.updates.map(function(e) {
                            switch (e[0]) {
                                case 0:
                                    return r.deleteEvent(e);
                                case 1:
                                    return r.replaceFlagsEvent(e);
                                case 2:
                                    return r.setFlagsEvent(e);
                                case 3:
                                    return r.resetFlagsEvent(e);
                                case 4:
                                    return r.addMessageEvent(e);
                                case 5:
                                    return r.editMessageEvent(e);
                                case 6:
                                    return r.readInboundEvent(e);
                                case 7:
                                    return r.readOutboundEvent(e);
                                case 8:
                                    return r.gotOnlineEvent(e);
                                case 9:
                                    return r.gotOfflineEvent(e);
                                case 10:
                                    return r.resetDirectoriesEvent(e);
                                case 11:
                                    return r.replaceDirectoriesEvent(e);
                                case 12:
                                    return r.setDirectoriesEvent(e);
                                case 13:
                                    return r.deleteDialogEvent(e);
                                case 18:
                                    return r.replaceMessageEvent(e);
                                case 51:
                                    return r.chatChangedEvent(e);
                                case 52:
                                    return r.chatUpdatedEvent(e);
                                case 63:
                                    return r.typingEvent(e);
                                case 64:
                                    return r.recordingAudioEvent(e);
                                case 70:
                                    return r.videoCallEvent(e);
                                case 80:
                                    return r.unreadCountEvent(e);
                                case 114:
                                    return r.notifySettingsChangedEvent(e);
                                case 116:
                                    return r.refreshMessageEvent(e);
                                case 117:
                                    return r.audioStartEvent(e);
                                case -1:
                                    return r.resyncEvent();
                                case -2:
                                    return r.refreshLpKeyEvent(e);
                                case d:
                                    return r.waitingForReconnectEvent(e);
                                case f:
                                    return r.reconnectingEvent();
                                case h:
                                    return r.reconnectedEvent();
                                default:
                                    return r.emptyEvent(e)
                            }
                        }))
                    },
                    onData: v(t.onData),
                    onRequestError: v(t.onRequestError),
                    onHistoryLost: g(t.onHistoryLost),
                    onKeyExpired: g(t.onKeyExpired),
                    onLpBroken: g(t.onHistoryLost)
                },
                a = t.onEvents;

            function o(e, t, n) {
                i.ts = t;
                for (var o = 0; o < n.length; ++o) n[o].type === r.REFRESH_LP_KEY && (i.key = n[o].key, i.url = n[o].url);
                a(e, t, n)
            }
            var s = {
                options: i,
                isStopped: function() {
                    return n
                },
                stopConnection: function() {
                    n = !0, i.stopFn && i.stopFn(), i.stopFn = void 0, this.abortWaiting()
                },
                reinitConnection: function() {
                    this.stopConnection(), _(i, f), n = !1, m(i)
                },
                abortWaiting: function() {
                    i.waitAbortFns.forEach(function(e) {
                        return e()
                    }), i.waitAbortFns = [], i.waitTimeout = 2
                },
                onLp: o
            };
            return m(i), s
        };
        var i = n("DM26"),
            a = n("BxOC"),
            r = function(e) {
                if (e && e.__esModule) return e;
                var t = o();
                if (t && t.has(e)) return t.get(e);
                var n = {};
                if (null != e) {
                    var i = Object.defineProperty && Object.getOwnPropertyDescriptor;
                    for (var a in e)
                        if (Object.prototype.hasOwnProperty.call(e, a)) {
                            var r = i ? Object.getOwnPropertyDescriptor(e, a) : null;
                            r && (r.get || r.set) ? Object.defineProperty(n, a, r) : n[a] = e[a]
                        }
                }
                n.default = e, t && t.set(e, n);
                return n
            }(n("f01n"));

        function o() {
            if ("function" != typeof WeakMap) return null;
            var e = new WeakMap;
            return o = function() {
                return e
            }, e
        }

        function s(e, t) {
            return function(e) {
                if (Array.isArray(e)) return e
            }(e) || function(e, t) {
                if (!(Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e))) return;
                var n = [],
                    i = !0,
                    a = !1,
                    r = void 0;
                try {
                    for (var o, s = e[Symbol.iterator](); !(i = (o = s.next()).done) && (n.push(o.value), !t || n.length !== t); i = !0);
                } catch (e) {
                    a = !0, r = e
                } finally {
                    try {
                        i || null == s.return || s.return()
                    } finally {
                        if (a) throw r
                    }
                }
                return n
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance")
            }()
        }
        var l = 202,
            c = 7,
            u = 4,
            d = -3,
            f = -4,
            h = -5;

        function p(e, t) {
            e.waitAbortFns.push(t)
        }

        function A(e) {
            if (e.isStoppedFn()) return Promise.resolve({
                ts: 0,
                updates: []
            });
            var t = (0, a.plaingetCancelable)(e.url, {
                    act: "a_check",
                    key: e.key,
                    version: e.version,
                    ts: e.ts,
                    wait: 25,
                    mode: e.mode
                }),
                n = t.request,
                r = t.cancel;
            return e.stopFn = r, n.then(function(t) {
                var n = s(t, 2),
                    i = n[0],
                    a = n[1];
                return e.onData(e, a), e.waitTimeout = 2, JSON.parse(i)
            }).catch(function(t) {
                var n = s(t, 2),
                    i = (n[0], n[1]);
                throw e.onData(e, i), ""
            }).then(function(t) {
                return function(e, t) {
                    var n = t.failed ? (0, i.abortablePause)(u, null) : {},
                        a = n.abort,
                        r = n.pause;
                    switch (t.failed) {
                        case 1:
                            return p(e, a), e.onHistoryLost(e, t).then(function() {
                                return e.onResult({
                                    ts: t.ts,
                                    updates: [
                                        [-1]
                                    ]
                                })
                            }).then(r).then(function() {
                                return A(e)
                            });
                        case 2:
                            return p(e, a), e.onKeyExpired(e, t).then(function(t) {
                                var n = s(t, 4),
                                    i = n[0],
                                    a = n[1],
                                    r = n[2],
                                    o = n[3];
                                return e.onResult({
                                    ts: +o,
                                    updates: [
                                        [-2, i, "".concat(a, "/").concat(r)],
                                        [-1]
                                    ]
                                })
                            }).then(r).then(function() {
                                return A(e)
                            });
                        case 3:
                            return e.onLpBroken(e, t);
                        default:
                            return t
                    }
                }(e, t)
            })
        }

        function m(e) {
            e.isStoppedFn() || A(e).then(e.onResult).then(function() {
                return e.isReconnecting && _(e, h)
            }).catch(function(t) {
                return function(e, t) {
                    if (e.isStoppedFn()) return;
                    e.onRequestError(t), e.waitTimeout = Math.min(60, 2 * e.waitTimeout), _(e, d);
                    var n = (0, i.abortablePause)(e.waitTimeout, null),
                        a = n.abort,
                        r = n.pause;
                    return p(e, a), r().then(function() {
                        return _(e, f)
                    })
                }(e, t)
            }).then(function() {
                return m(e)
            })
        }

        function _(e, t) {
            e.isReconnecting = t === f, e.onResult({
                ts: e.ts,
                updates: [
                    [t, e.waitTimeout]
                ]
            })
        }

        function v(e) {
            return e || function() {}
        }

        function g(e) {
            return e ? function() {
                return Promise.resolve(e.apply(void 0, arguments))
            } : function() {
                return Promise.reject()
            }
        }
    },
    XLP4: function(e, t, n) {
        "use strict";
        var i = window,
            a = i.Friends,
            r = i.domData,
            o = i.FeedAssistanceStats,
            s = i.getLang;
        window.FeedAssistanceImportContacts = {
            importContacts: function(e, t, n) {
                if (!window.XMLHttpRequest || n) return;
                var i = r(e, "service-id");
                return window.open(t), l[i] = e, !1
            }
        };
        var l = {},
            c = "feedAssistanceImportContacts__desc",
            u = !1;
        o.registerTrackingCls("feedAssistance_importContacts"), o.onStartViewElement(function(e) {
            o.getElementType(e) === o.BLOCKS.BLOCK_TYPE_IMPORT_CONTACTS && (u = !0)
        }), a.onImportSuccess(function() {
            var e = arguments[0],
                t = arguments[2],
                n = l[e];
            if (n) {
                var i = geByClass1(c, n);
                i.textContent = s("mobile_join_friends_found_count", t)
            }
            u && o.dispatchEvent({
                type: o.EVENTS.EVENT_FEED_ASSISTANCE,
                data: o.serializeEventData(o.EVENTS.EVENT_FEED_ASSISTANCE, n, "m_mp", o.EVENTS.SUB_EVENT_FILLED)
            })
        }), a.onImportFailed(function(e) {
            var t = l[e];
            t && (geByClass1(c, t).textContent = s("mobile_friends_import_error"))
        })
    },
    XLUH: function(e, t, n) {
        "use strict";

        function i(e, t) {
            for (var n = 0; n < t.length; n++) {
                var i = t[n];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.AudioStatsPlayerAdapter = t.APP_STATE = t.FULL_SCREEN_STATE = t.BACKGROUND_STATE = t.UNKNOWN_STATE = void 0;
        t.UNKNOWN_STATE = 0;
        t.BACKGROUND_STATE = 1;
        t.FULL_SCREEN_STATE = 2;
        t.APP_STATE = 3;
        var a = function() {
            function e(t) {
                ! function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, e), this.player = t, this.listeners = []
            }
            var t, n, a;
            return t = e, (n = [{
                key: "listen",
                value: function(e, t, n) {
                    var i = t.bind(n || this);
                    this.listeners.push({
                        event: e,
                        fn: t,
                        listener: i
                    }), this.playerListen(e, i)
                }
            }, {
                key: "unListen",
                value: function(e, t) {
                    var n = -1;
                    if (each(this.listeners, function(i, a) {
                            if (a.event === e && a.listener === t) return n = i, !1
                        }), !(n < 0)) {
                        var i = this.listeners[n];
                        this.playerUnListen(e, i.listener), this.listeners.splice(n, 1)
                    }
                }
            }, {
                key: "unListenAll",
                value: function() {
                    for (var e; e = this.listeners[0];) this.unListen(e.event, e.listener)
                }
            }, {
                key: "listenPlay",
                value: function(e, t) {
                    this.listen("play", e, t)
                }
            }, {
                key: "listenPause",
                value: function(e, t) {
                    this.listen("pause", e, t)
                }
            }, {
                key: "listenProgress",
                value: function(e, t) {
                    this.listen("progress", e, t)
                }
            }, {
                key: "listenVolume",
                value: function(e, t) {
                    this.listen("volume", e, t)
                }
            }, {
                key: "listenSeek",
                value: function(e, t) {
                    this.listen("seek", e, t)
                }
            }, {
                key: "listenPlaylistChanged",
                value: function(e, t) {
                    this.listen("pl_changed", e, t)
                }
            }, {
                key: "listenEnded",
                value: function(e, t) {
                    this.listen("ended", e, t)
                }
            }, {
                key: "listenPlayNext",
                value: function(e, t) {
                    this.listen("play_next", e, t)
                }
            }, {
                key: "listenAdCompleted",
                value: function(e, t) {
                    this.listen("ad_completed", e, t)
                }
            }, {
                key: "playerListen",
                value: function(e, t) {
                    this.player.on(e, t)
                }
            }, {
                key: "playerUnListen",
                value: function(e, t) {
                    this.player.off(e, t)
                }
            }, {
                key: "useNewStats",
                value: function() {
                    return !1
                }
            }, {
                key: "getPausedBy",
                value: function() {
                    return null
                }
            }, {
                key: "getState",
                value: function() {
                    return document.hidden ? 1 : 3
                }
            }, {
                key: "getProgress",
                value: function() {
                    return this.player.playerGetProgress()
                }
            }, {
                key: "getProgressInSeconds",
                value: function() {
                    return this.player.getProgressInSeconds()
                }
            }, {
                key: "getVolume",
                value: function() {
                    return this.player.getVolume()
                }
            }, {
                key: "getAudioId",
                value: function() {
                    return this.player.getAudioId()
                }
            }, {
                key: "getAudioTrackCode",
                value: function() {
                    return this.player.getAudioTrackCode()
                }
            }, {
                key: "getPrevAudioId",
                value: function() {
                    return this.player.getPrevAudioId()
                }
            }, {
                key: "getPrevPlaylistId",
                value: function() {
                    return this.player.getPrevPlaylistId()
                }
            }, {
                key: "getPlaylistId",
                value: function() {
                    return this.player.getPlaylistId()
                }
            }, {
                key: "getContext",
                value: function() {
                    return this.player.getContext()
                }
            }, {
                key: "getSequence",
                value: function() {
                    return this.player.getSequence()
                }
            }, {
                key: "getType",
                value: function() {
                    return this.player.getType()
                }
            }, {
                key: "getListenedTime",
                value: function() {
                    return this.player.getListenedTime()
                }
            }, {
                key: "getSearchParams",
                value: function() {
                    return this.player.getSearchParams()
                }
            }, {
                key: "isPlaying",
                value: function() {
                    return this.player.isPlaying()
                }
            }, {
                key: "isAutoPlayed",
                value: function() {
                    return this.player.isAutoPlayed()
                }
            }, {
                key: "isRepeatCurrentAudio",
                value: function() {
                    return this.player.isRepeatCurrentAudio()
                }
            }, {
                key: "isRepeatAll",
                value: function() {
                    return this.player.isRepeatAll()
                }
            }, {
                key: "isShuffledPlaylist",
                value: function() {
                    return this.player.isShuffledPlaylist()
                }
            }, {
                key: "isRealPlaylist",
                value: function() {
                    return this.player.isRealPlaylist()
                }
            }, {
                key: "isRealPrevPlaylist",
                value: function() {
                    return this.player.isRealPrevPlaylist()
                }
            }, {
                key: "isPodcast",
                value: function() {
                    return this.player.isPodcast()
                }
            }, {
                key: "isAdPlaying",
                value: function() {
                    return this.player.ads.isPlaying()
                }
            }, {
                key: "isLastTrack",
                value: function() {
                    return this.player.isLastTrack()
                }
            }, {
                key: "hasPrevAudio",
                value: function() {
                    return this.player.hasPrevAudio()
                }
            }, {
                key: "hasPrevPlaylist",
                value: function() {
                    return this.player.hasPrevPlaylist()
                }
            }, {
                key: "hasPlaylist",
                value: function() {
                    return this.player.hasPlaylist()
                }
            }, {
                key: "hasSearchParams",
                value: function() {
                    return this.player.hasSearchParams()
                }
            }, {
                key: "isDebug",
                value: function() {
                    return !1
                }
            }, {
                key: "sendListenedData",
                value: function(e) {
                    return this.player.sendListenedData(e)
                }
            }]) && i(t.prototype, n), a && i(t, a), e
        }();
        t.AudioStatsPlayerAdapter = a
    },
    XRdp: function(e, t, n) {
        "use strict";
        n("B34N")
    },
    XUaJ: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.close = function(e, t) {
            t && t.preventDefault(), r.default.close(e), o.default.post("/groups", {
                _ajax: 1,
                act: "hide_warning_notification",
                notification_id: (0, a.domData)(e, "id"),
                group_id: (0, a.domData)(e, "gid"),
                hash: (0, a.domData)(e, "hash")
            })
        }, t.leave = function(e, t) {
            t && t.preventDefault(), r.default.close(e), (0, i.$)("#m .header__back").click()
        };
        var i = n("UxAg"),
            a = n("OcsD"),
            r = s(n("t7Ww")),
            o = s(n("kr3z"));

        function s(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
    },
    Xeoq: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.showCaptcha = function(e, t) {
            o.default.open({
                body: c(e),
                title: lang.mobile_captcha_enter_code,
                confirmText: lang.mobile_captcha_send_btn,
                cancelText: lang.mobile_cancel,
                class: "MailCaptcha__dialog",
                onConfirm: function(n, i) {
                    var s = (0, a.$)('[name="'.concat(e.key, '"]'), i);
                    s = s && s.value || "", o.default.close(), (0, r.mailRequest)(e.location, Object.assign({}, e.post, function(e, t, n) {
                        t in e ? Object.defineProperty(e, t, {
                            value: n,
                            enumerable: !0,
                            configurable: !0,
                            writable: !0
                        }) : e[t] = n;
                        return e
                    }({}, e.key, s))).then(function(e) {
                        t(Promise.resolve(e))
                    }, function(e) {
                        t(Promise.reject(e))
                    })
                },
                onClose: function() {
                    o.default.close(), t(null)
                }
            })
        }, t.renderBody = c;
        var i = l(n("TYsd")),
            a = n("UxAg"),
            r = n("qHA9"),
            o = l(n("iS9e")),
            s = l(n("p5n7"));

        function l(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }

        function c(e) {
            return i.default.html({
                inner: [{
                    class: "captcha_img",
                    src: e.img,
                    tag: "img"
                }, {
                    inner: [(0, s.default)({
                        name: e.key
                    })],
                    class: "MailCaptcha__input",
                    tag: "div"
                }],
                class: "MailCaptcha__box",
                tag: "div"
            })
        }
    },
    XlF1: function(e, t, n) {
        "use strict";
        var i = n("UxAg"),
            a = window.Popup,
            r = window.Btn;
        window.AuthCheck = {}, AuthCheck._onDropConfirmationClick = l, AuthCheck._onResetSessionSubmit = c, AuthCheck._onCurBrowserDropClick = u;
        var o = {
                popupByIndex: function(e) {
                    return ".AuthCheck__popup_index_".concat(e)
                },
                dropConfirmation: function(e) {
                    return '.AuthCheck__dropConfirmation[data-index="'.concat(e, '"]')
                },
                dropConfirmationSubmit: ".AuthCheck__dropConfirmationSubmit"
            },
            s = {
                dropConfirmationSuccess: "AuthCheck__dropConfirmation_success"
            };

        function l(e) {
            var t = (0, i.$)(o.popupByIndex(e));
            a.open(t)
        }

        function c(e, t) {
            e.preventDefault();
            var n = e.target,
                l = (0, i.$)('iframe[name="'.concat(e.target.target, '"]')),
                c = n.$(o.dropConfirmationSubmit);
            n.submit(), r.setLoading(c, !0), addEvent(l, "load", function() {
                (0, i.$)(o.dropConfirmation(t)).classList.toggle(s.dropConfirmationSuccess), a.close(), r.setLoading(c, !1)
            })
        }

        function u(e) {
            var t = e.$btn;
            r.setLoading(t, !0), ajax.click(t, {
                onDone: function() {
                    (0, i.$)(o.dropConfirmation("0")).classList.toggle(s.dropConfirmationSuccess), a.close(), r.setLoading(t, !1)
                }
            })
        }
    },
    Y6JH: function(e, t, n) {
        "use strict";
        var i;
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var a = ((i = n("1HYu")) && i.__esModule ? i : {
            default: i
        }).default;
        t.default = a
    },
    YDEi: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.uConvo_getLastMsg = p, t.uConvo_getOnline = d, t.uConvo_getUnreadCount = f, t.uConvo_getTyping = A, t.uConvo_msgPreview = u, t.uConvo_getLastMsgId = h, t.default = void 0;
        l(n("bZ/P"));
        var i = l(n("TYsd")),
            a = (l(n("Mc5h")), l(n("s0aB"))),
            r = n("7jQU"),
            o = n("/Id8"),
            s = n("fdw3");

        function l(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        var c = function(e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null,
                n = "last" === t,
                i = store.mail,
                r = i.peers[e],
                o = r.url,
                s = null;
            if (t) {
                var l;
                n || (o = "".concat(o, "&msg=").concat(t)), (l = n ? p(e) : i.msgs[t]) && (s = {
                    text: u(l),
                    date: l.dateShort,
                    unreadCount: f(e),
                    muted: r.isMuted,
                    typing: A(e),
                    pending: l.pending,
                    failed: l.failed
                })
            }
            return (0, a.default)({
                id: e,
                url: o,
                photos: r.avatarImages,
                title: r.title,
                online: d(r),
                important: r.isImportant,
                profileUrl: r.profileUrl,
                isLast: n,
                more: s
            })
        };

        function u(e) {
            var t = window.lang,
                n = store.mail,
                a = !!e.attaches.call;
            if (e.isService && !a) return i.default.html({
                tag: "span",
                inner: [i.default.wrap(e.serviceText)]
            });
            var r = e.body ? i.default.wrap((0, o.Msg__textPreview)(e.body)) : function(e) {
                    return {
                        tag: "span",
                        class: "convo__msgAttach",
                        inner: (0, o.Msg__attachPreview)(e)
                    }
                }(e),
                l = "";
            return e.authorId === n.cur.userId && e.peerId !== n.cur.userId ? l = t.mobile_mail_you : (0, s.isChatPeer)(e.peerId) && (l = (l = n.members[e.authorId].shortName).replace(/\.$/, "")), l && (l += ": "), i.default.html({
                tag: "span",
                inner: [i.default.wrap(l), r]
            })
        }

        function d(e) {
            return !!e.isOnline && ("desktop" === e.onlinePlatform ? "desktop" : "mobile")
        }

        function f(e) {
            var t = function(e) {
                return store.mail.peers[e]
            }(e).countUnread;
            if (0 === t) {
                var n = store.mail,
                    i = p(e);
                i && i.isUnread && i.authorId === n.cur.viewerId && (t = -1)
            }
            return t
        }

        function h(e) {
            var t = store.mail,
                n = t.rolls.peer[e],
                i = t.presend && t.presend.pending[e],
                a = t.presend && t.presend.failed[e];
            if (i && i.length)
                for (var r = i.length - 1; r >= 0; r--) {
                    var o = i[r];
                    if (-1 === o.indexOf("edit")) return o
                }
            if (a && a.length)
                for (var s = a.length - 1; s >= 0; s--) {
                    var l = a[s];
                    if (-1 === l.indexOf("edit")) return l
                }
            return n && n.length ? last(n) : null
        }

        function p(e) {
            var t = store.mail.msgs,
                n = store.mail.presend,
                i = n && n.msgs,
                a = h(e);
            return i && i[a] ? i[a] : a ? t[a] : null
        }

        function A(e) {
            var t, n, i = (0, r.uTyping_getPeerTyping)(e),
                a = i && 1 === i.count && i.users[0] === e;
            return i ? ("mixed" === i.type ? (t = "simple-dots", n = "mixed") : "audio" === i.type ? (t = "audio", n = "audio") : "text" === i.type && (t = "simple-dots", n = ""), {
                typing: !!a || (0, r.uTyping_getNames)(i),
                typingCount: i.count,
                animation: t,
                text: n,
                dimmed: !1,
                compact: !0
            }) : ""
        }
        t.default = c
    },
    YQfe: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.SILENCE = void 0;
        t.SILENCE = "data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"
    },
    Yaig: function(e, t, n) {
        "use strict";

        function i() {
            return (i = Object.assign || function(e) {
                for (var t = 1; t < arguments.length; t++) {
                    var n = arguments[t];
                    for (var i in n) Object.prototype.hasOwnProperty.call(n, i) && (e[i] = n[i])
                }
                return e
            }).apply(this, arguments)
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var a = {
            _onCloseClick: function(e) {
                e.stopPropagation(), e.preventDefault(), remove(geByClass1(a.class.btn))
            },
            class: {
                btn: "FloatBtn"
            }
        };
        a.class = i({}, a.class, {
            open: a.class.btn + "_open"
        });
        var r = a;
        t.default = r
    },
    YhgQ: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("TuGt")) && i.__esModule ? i : {
                default: i
            },
            r = n("OcsD"),
            o = n("fKzu"),
            s = n("J8bf");
        var l, c = ["/restore", "/login", "/authorize*", "/join*", "/", "/settings", "/album*", "/terms", "/privacy", "/payments*", "/attachments*", "/page*", "/blog*", "/about", "/privacy", "/jobs", "/dev", "/legal", "/data_protection", "/safety", "/activation*", "/licence", "/agelimits"];

        function u() {
            l && l.classList.remove(a.default.class.open)
        }

        function d() {
            l && l.classList.add(a.default.class.open)
        }
        onDOMReady(function() {
            ! function e(t) {
                var n = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1];
                (0, r.isIosWebView)() || (0, r.isAndroidWebView)() || (0, r.isVkWebView)() || (n || (l = geByClass1(a.default.class.btn), page.onChange(e.bind(this))), t = t ? t.split("?")[0] : nav.path, !/^\/photo/.test(t) && u(), (0, o.isForbiddenPage)(t, c) || nav.getQuery("z") ? u() : d())
            }(null, !1)
        });
        var f = {
            _onCloseClick: function(e) {
                a.default._onCloseClick(e), (0, s.setCookie)("remixregbtn", 0, 0)
            },
            show: d,
            hide: u
        };
        t.default = f
    },
    YvCB: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.setWorkerTimeout = function(e, t) {
            if (!window.Worker || !window.Blob) return setTimeout(e, t);
            var n = new Blob(["\n      var timeout;\n      onmessage = function(e) {\n        clearTimeout(timeout);\n        if (e.data == 'start') {\n          timeout = setTimeout(function() { postMessage({}); }, ".concat(t, ");\n        }\n      }\n    ")]);
            try {
                var i = new Worker(window.URL.createObjectURL(n));
                return i.onmessage = function() {
                    i.terminate(), e()
                }, i.postMessage("start"), i
            } catch (n) {
                return setTimeout(e, t)
            }
        }
    },
    ZYIi: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.Select = o, t.default = void 0;
        var i = r(n("9y81")),
            a = r(n("z9sQ"));

        function r(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }

        function o() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                t = e.on_change;
            return {
                class: [e.mix || e.class, a.default.class("Select", {
                    disabled: e.disabled
                })],
                inner: [{
                    class: "Select__native",
                    tag: "select",
                    name: e.name,
                    disabled: e.disabled,
                    onchange: t ? ["Select._onChange", "this", t] : null,
                    inner: e.options.map(function(e) {
                        return e ? {
                            class: "Select__option",
                            tag: "option",
                            value: e.value,
                            selected: e.selected ? "selected" : null,
                            inner: e.label,
                            attrs: e.attrs
                        } : null
                    })
                }, {
                    outerHTML: (0, i.default)({
                        mix: "Select__chevron",
                        icon: "chevron_down"
                    })
                }]
            }
        }
        var s = o;
        t.default = s
    },
    Ziv7: function(e, t, n) {
        "use strict";
        var i = n("UxAg"),
            a = T(n("+cqQ")),
            r = T(n("bZ/P")),
            o = T(n("TYsd")),
            s = T(n("jk6M")),
            l = T(n("rKp0")),
            c = (T(n("Mc5h")), T(n("gy8s"))),
            u = (T(n("u33z")), P(n("V4qE"))),
            d = P(n("HGMY")),
            f = T(n("/Id8")),
            h = P(n("t7Ww")),
            p = T(n("r/ag")),
            A = T(n("29dZ")),
            m = n("hOuX"),
            _ = n("9M99"),
            v = P(n("sdz3")),
            g = n("MjTa"),
            y = n("hw56"),
            b = n("j80l"),
            w = T(n("wcVR")),
            k = P(n("dVvW")),
            E = T(n("B+U2")),
            S = n("DgYJ"),
            C = P(n("HdGT"));
        n("qHA9");

        function M() {
            if ("function" != typeof WeakMap) return null;
            var e = new WeakMap;
            return M = function() {
                return e
            }, e
        }

        function P(e) {
            if (e && e.__esModule) return e;
            var t = M();
            if (t && t.has(e)) return t.get(e);
            var n = {};
            if (null != e) {
                var i = Object.defineProperty && Object.getOwnPropertyDescriptor;
                for (var a in e)
                    if (Object.prototype.hasOwnProperty.call(e, a)) {
                        var r = i ? Object.getOwnPropertyDescriptor(e, a) : null;
                        r && (r.get || r.set) ? Object.defineProperty(n, a, r) : n[a] = e[a]
                    }
            }
            return n.default = e, t && t.set(e, n), n
        }

        function T(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        Object.assign(k.default, {
            onToBottomClick: (0, a.default)(),
            onAttachedMsgsRemove: (0, a.default)(),
            onReplyClose: (0, a.default)(),
            onMessage: (0, a.default)(),
            showToBottom: function() {
                if (F) return;
                H && (clearTimeout(H), H = null);
                addClass("uMailWrite__toBottom_visible", (0, i.$)(".uMailWrite__toBottom"))
            },
            hideToBottom: function() {
                clearTimeout(V), H = setTimeout(function() {
                    removeClass("uMailWrite__toBottom_visible", (0, i.$)(".uMailWrite__toBottom"))
                }, 100)
            },
            preventShowToBottom: function() {
                F = !0, setTimeout(function() {
                    F = !1
                }, 300)
            },
            openStickersPanel: ne,
            redrawReply: pe,
            uiRedrawAttachments: Ae,
            redrawToBottom: function() {
                (0, i.$$)(".uMailWrite__toBottom").forEach(function(e) {
                    return e.innerHTML = (0, k.uMailWrite_ToBottomInner)()
                })
            },
            drawStickers: Z,
            setModifiers: function(e) {
                (0, i.$$)(".uMailWrite").forEach(function(t) {
                    var n = r.default.parseClass("uMailWrite", t.getAttribute("class"));
                    t.setAttribute("class", r.default.class("uMailWrite", Object.assign({}, n, e)))
                })
            },
            hideStickersPanel: te,
            setText: Oe,
            renderKeyboardIfNeeded: Be,
            openKeyboard: Ne,
            init: function() {
                var e = store.mail,
                    t = e.cur,
                    n = (e.msgs, e.pendingReplies),
                    a = t && (0, y.getPeerDraft)(t.viewerId, t.peerId);
                a && !t.editing && a.text && function(e) {
                    var t = document.createElement("textarea");
                    t.innerHTML = e;
                    var n = t.value;
                    (0, i.$$)(".uMailWrite__textarea").forEach(function(e) {
                        return e.value = n
                    });
                    var a = (0, i.$)(".uMailWrite__textareaGhost");
                    a.innerText = n, "\n" === last(n) && (a.innerHTML += "&nbsp;");
                    $()
                }(a.text);
                "templates" === (0, y.getKeyboardType)() ? ce(): Be();
                ze(), Q(), a && !t.editing && Array.isArray(a.msgs) && (t.msgAttached[t.peerId] = a.msgs);
                if (a && !t.editing && isFinite(a.reply)) {
                    var r = f.default.getReplyDataFromHTML(a.reply);
                    r && (t.msgReply[t.peerId] = a.reply, n[a.reply] = r)
                }
                pe(), Ae(t.peerId), (0, i.$$)(".uMailWrite__textarea").forEach(function(e) {
                    (0, g.setScrollView)(e, {
                        topBanner: !1,
                        overscrollY: !1
                    })
                }), (0, i.$$)(".uMailWrite__attachments").forEach(function(e) {
                    (0, g.setScrollView)(e, {
                        topBanner: !1,
                        allowY: !1
                    })
                })
            },
            reset: function() {
                (0, y.setKeyboardType)("")
            },
            loadTemplatePage: function(e, t, n) {
                e.preventDefault(), uMessenger.loadMailPage(n)
            }
        }), uVK.onReady(G), k.default._onBlur = Ce, k.default._onKeyUp = ve, k.default._onKeyDown = ke, k.default._onFocus = Se, k.default._onInput = ye, k.default._onSubmit = me, k.default._onClick = Ee, k.default._onAttachClick = de, k.default._onStickersClick = ee, k.default._onKeyboardClick = ie, k.default._onKeyboardButtonClick = ae, k.default._onDeleteTemplate = Fe, k.default._onConfirmDeleteTemplate = He, k.default._onSendTouchEnd = _e, k.default._onRetryFailedMsg = qe, k.default._onDeleteFailedMsg = $e, k.default._onCancelPendingMsg = Ge, k.default._onConfirmSendGeo = re, mediaUpload.onRemove(Y), mediaUpload.onComplete(J), mediaUpload.onStart(X), mediaUpload.onError(K), post.onStickersTabSelected(fe), post.onStickerClick(he), C.onSent(Ue), C.onErrorMessage(Qe), f.default.onPendingClick(We), c.default.onOpen("uMailWrite_attachments")(q), k.default.onToBottomClick(function() {
            var e = (0, i.$)(".uMailWrite__toBottom_visible");
            e && e.classList.remove("uMailWrite__toBottom_visible"), l.default.removeDivider()
        }), k.default.onReplyClose(function() {
            var e = store.mail.cur;
            e.msgReply[e.peerId] = null, (0, y.setPeerDraft)(e.viewerId, e.peerId, {
                reply: void 0
            }, e.editing), e.editing || ajaxRequest("/mail", {
                act: "reply_cancel",
                peer_id: store.mail.cur.peerId,
                hash: store.mail.hash.reply
            }), pe()
        }), k.default.onTemplateClick = function(e, t, n) {
            var i;
            n && (store.mail.cur.templates.some(function(e) {
                if (e.id === n) return i = e, !0
            }), i && Oe((0, S.prepareTemplateText)(i.text)))
        }, Mention.onOpen(function() {
            if (store.mail.cur) {
                var e = store.mail.cur,
                    t = e.peerMembers,
                    n = e.peerId;
                t[n] || (t[n] = !0, ajaxRequest("/mail", {
                    act: "get_members",
                    peer_id: n
                }, function(e) {
                    Object.assign(store.mail.members, e);
                    var t = be(n);
                    Mention.update({
                        items: t,
                        defaultItems: t
                    })
                }, function() {
                    t[n] = !1
                }))
            }
        });
        var D, I, x = "uMailWrite__popupAttach_open",
            O = "uMailWrite__popupStickers_open",
            L = "uMailWrite__keyboard_open",
            B = "uMailWrite__templates_open",
            R = !1,
            N = {
                canAttachPoll: "uMailWrite_canAttachPoll"
            },
            j = {
                mailWrite: ".uMailWrite",
                pollAttachment: ".attachment_type_poll"
            },
            F = !1,
            H = null,
            V = null,
            U = [],
            z = debounce(Pe, 100),
            W = debounce(Me, 1e3);

        function q() {
            function e(e, t) {
                return e = e.replace(/&edit_msg_id=\d+/, "").replace(/=mailedit(-?\d+)/, "=mail$1"), store.mail.cur.editing && (e = e.replace(/=mail(-?\d+)/, "=mailedit$1"), e += t ? "&edit_msg_id=" + store.mail.cur.editing : ""), e
            }(0, i.$$)("a.Unfold__item").forEach(function(t) {
                var n = e(t.getAttribute("href"), !0);
                t.setAttribute("href", n)
            }), (0, i.$$)("input.inline_upload").forEach(function(t) {
                t.setAttribute("data-upload-url", e(t.getAttribute("data-upload-url")))
            })
        }

        function $() {
            var e = (0, i.$)(".uMailWrite__textareaGhost").offsetHeight;
            (0, i.$$)(".uMailWrite__textarea").forEach(function(t) {
                return setStyle(t, "height", e)
            }), (0, i.$$)(".uMailWrite__main").forEach(function(t) {
                return setStyle(t, "height", e)
            }), Pe()
        }

        function G() {
            if ("/mail" === location.pathname || 0 === location.pathname.indexOf("/write")) {
                var e = store.mail.cur;
                if (e && e.peerId) {
                    var t = geBySel(".uMailWrite__attachments .medias_thumb").length,
                        n = geBySel(".uMailWrite__attachments .medias_row").length,
                        a = (e.msgAttached[e.peerId] || []).length ? 1 : 0;
                    e.hasAttachments = t + n + a > 0, (0, i.$$)(".uMailWrite__attachments").forEach(function(t) {
                            toggleClass("uMailWrite__attachments_hasAttachments", t, e.hasAttachments)
                        }),
                        function() {
                            var e = (0, i.$)(".uMailWrite__buttonAttach");
                            if (!e) return;
                            var t = (n = (0, i.$)(".uMailWrite__attachments"), (n ? n.$$(".thumb_item").length + n.$$(".medias_row").length - n.$$(".fwd_item").length : 0) >= 10);
                            var n;
                            e.classList.add("uMailWrite__button_disabled", t), t ? e.addEventListener("mousedown", xe, !0) : e.removeEventListener("mousedown", xe, !0)
                        }()
                }
            }
        }

        function Q() {
            var e = store.mail.cur;
            e && e.peerId && (U = be(e.peerId), Mention.init({
                defaultItems: U,
                items: U,
                appendTo: geByClass1("uMailWrite__main"),
                url: null,
                params: {},
                preferDomain: !0,
                afterInsert: function(t) {
                    var n = (0, i.$)(".uMailWrite__textareaGhost"),
                        a = t.value;
                    n.innerText = a, $(), Me(a, e.viewerId, e.peerId)
                }
            }))
        }

        function Y(e) {
            if (store.mail.cur) {
                var t = store.mail,
                    n = t.cur,
                    a = t.peers,
                    r = n.peerId;
                if (r && (a[r].attachmentsHTML = geBySel1(".uMailWrite__attachments_".concat(r, " .cp_attached_wrap")).outerHTML, Ae(r)), e.closest(j.pollAttachment))(0, i.$)(j.mailWrite).classList.add(N.canAttachPoll)
            }
        }

        function X() {
            store.mail.cur && (G(), Pe())
        }

        function K() {
            if (store.mail.cur) {
                var e = store.mail,
                    t = e.cur,
                    n = (e.peers, t.peerId);
                n && (Ae(n), Messenger.scrollConvoToBottom())
            }
        }

        function J() {
            var e = store.mail,
                t = e.cur,
                n = e.peers;
            if (t) {
                var i = t.peerId;
                i && (n[i].attachmentsHTML = geBySel1(".uMailWrite__attachments_".concat(i, " .cp_attached_wrap")).outerHTML, Pe())
            }
        }

        function Z() {
            var e = store.mail.cur,
                t = (0, i.$)(".uMailWrite__popupStickers");
            e && t && !t.childElementCount && (t.innerHTML = e.stickersPanelHTML.replace(/mail0/g, "mail".concat(e.peerId)), (0, i.$$)(".sp_body", t).forEach(function(e) {
                (0, g.setScrollView)(e, {
                    topBanner: !1
                })
            }), (0, i.$$)(".scroller_wrap", t).forEach(function(e) {
                (0, g.setScrollView)(e, {
                    topBanner: !1,
                    allowY: !1
                })
            }), post.stickersSelectTab(null, -1))
        }

        function ee(e) {
            var t = (0, i.$)(".uMailWrite__popupStickers"),
                n = hasClass(O, t);
            e.preventDefault(), Z(), je("stickers"), n ? te() : ne()
        }

        function te() {
            "stickers" === (0, y.getKeyboardType)() && (0, y.setKeyboardType)("");
            var e = (0, i.$)(".uMailWrite__popupStickers");
            removeClass(O, e), Te(!1);
            var t = ge("stickers_panel");
            t && "block" === t.style.display && (t.style.display = "none")
        }

        function ne() {
            (0, y.setKeyboardType)("stickers");
            var e = (0, i.$)(".uMailWrite__popupStickers");
            addClass(O, e), post.stickersInit(), Te(!0)
        }

        function ie(e) {
            var t = (0, i.$)(".uMailWrite__keyboard"),
                n = hasClass(L, t);
            e.preventDefault(), je("buttons"), n ? oe({
                store: !0
            }) : se({
                store: !0
            })
        }

        function ae(e, t, n) {
            var i, a = n.authorId,
                o = n.inline,
                s = n.msgId,
                l = n.action,
                c = l.type,
                d = l.payload,
                f = l.rawLabel,
                h = store.mail,
                p = h.cur,
                _ = h.members,
                v = h.peers,
                g = h.msgs,
                y = _[a],
                k = (0, m.random)();
            if (s) {
                var E = g[s];
                i = E.peerId
            } else i = p.peerId;
            var S, C = v[i],
                M = f || "";
            if (i >= 2e9)
                if (y.domain) S = "@".concat(y.domain, " ").concat(M);
                else {
                    var P = y.url.replace(/^\//, "");
                    S = "@".concat(P, " (").concat(y.firstName, ") ").concat(M)
                }
            else S = M;
            var T = c,
                D = o ? "inline" : "normal";
            if ("open_app" === T && (T = "app"), statlogsValueEvent("message_send_from_keyboard", 0, p.viewerId, i, a, T, D), "vkpay" !== c)
                if ("open_app" !== c) {
                    if ("location" !== c) Ie({
                        act: "send",
                        to: i,
                        from: "dialog",
                        hash: C.hashSend,
                        message: S,
                        media: "",
                        _af: p._af,
                        random_id: k,
                        payload: d
                    }), o && !p.peerId && nav.go((0, b.makeUrl)("/mail", {
                        act: "show",
                        peer: i,
                        community: nav.getQuery("community")
                    }));
                    else w.default.init() ? (A.default.setLoading(e, !0, "blue"), w.default.getCurrentPosition(function(t) {
                        var n = t.coords,
                            a = n.latitude,
                            o = n.longitude;
                        A.default.setLoading(e, !1), MailDialog.open({
                            body: lang.mobile_mail_geo_send_question,
                            confirmText: lang.mobile_mail_geo_send_confirm,
                            cancelText: lang.mobile_cancel,
                            onConfirm: r.default.onClick("uMailWrite._onConfirmSendGeo", a, o, d, S, i)
                        })
                    }, function() {
                        A.default.setLoading(e, !1), u.init({
                            text: lang.mobile_mail_geo_not_available
                        })
                    }, {
                        maximumAge: 100,
                        enableHighAccuracy: !0,
                        timeout: 1e4
                    })) : u.init({
                        text: lang.mobile_mail_geo_not_available
                    })
                } else {
                    var I = n.action,
                        x = I.app_id,
                        O = I.hash,
                        L = (0, b.makeUrl)("/app".concat(x), {
                            from: nav.cur.slice(1)
                        });
                    nav.hard_go("".concat(L, "#").concat(O))
                }
            else {
                var B = n.action.hash,
                    R = (0, b.makeUrl)("/app6217559", {
                        from: nav.cur.slice(1)
                    });
                nav.hard_go("".concat(R, "#").concat(B))
            }
        }

        function re(e, t, n, i, a) {
            var r = store.mail,
                o = r.cur,
                s = r.peers[a],
                l = (0, m.random)();
            Ie({
                act: "send",
                to: a,
                from: "dialog",
                hash: s.hashSend,
                message: i,
                media: "",
                _af: o._af,
                random_id: l,
                payload: n,
                attach1_type: "map",
                attach1: "".concat(e, "_").concat(t)
            }), MailDialog.close(), nav.go((0, b.makeUrl)("/mail", {
                act: "show",
                peer: a,
                community: nav.getQuery("community")
            }))
        }

        function oe(e) {
            "buttons" === (0, y.getKeyboardType)() && (0, y.setKeyboardType)("");
            var t = (0, i.$)(".uMailWrite__keyboard");
            if (removeClass(L, t), De(!1), e && e.store) {
                var n = store.mail.cur.peerId,
                    a = store.mail.peers[n];
                a && a.keyboard && (D[n] = a.keyboard.chat_local_id, lsSet("mail_keyboard_hidden", D))
            }
        }

        function se(e) {
            (0, y.setKeyboardType)("buttons");
            var t = (0, i.$)(".uMailWrite__keyboard"),
                n = e && e.forceRender;
            addClass(L, t), De(!0);
            var a = (0, y.getKeyboardState)(store.mail.cur.peerId);
            !n && !!a.rendered || function() {
                var e = store.mail,
                    t = e.cur,
                    n = e.peers,
                    a = t.peerId && n[t.peerId];
                if (!a || !a.keyboard || !a.keyboard.buttons) return;
                var r = o.default.render((0, E.default)({
                        keyboard: a.keyboard
                    })),
                    s = (0, i.$)(".uMailWrite__keyboard");
                s.innerHTML = r, (0, g.setScrollView)(s, {
                    topBanner: !1
                }), (0, y.getKeyboardState)(t.peerId).rendered = !0
            }(), e && e.store && le()
        }

        function le() {
            var e = store.mail.cur.peerId;
            D && (delete D[e], lsSet("mail_keyboard_hidden", D))
        }

        function ce() {
            (0, y.setKeyboardType)("templates");
            var e = (0, i.$)(".uMailWrite__templates");
            addClass(B, e), Pe(), Re()
        }

        function ue() {
            "templates" === (0, y.getKeyboardType)() && (0, y.setKeyboardType)("");
            var e = (0, i.$)(".uMailWrite__templates");
            removeClass(B, e), Pe()
        }

        function de(e) {
            var t = (0, i.$)(".uMailWrite__popupAttach"),
                n = (0, i.$)(".uMailWrite__popupStickers");
            e.preventDefault(), e.stopPropagation(), hasClass(O, n) && removeClass(O, n), hasClass(x, t) ? removeClass(x, t) : (addClass(x, t), addEvent(window, "click", function e(n) {
                removeClass(x, t);
                removeEvent(window, "click", e)
            }))
        }

        function fe() {
            store.mail.cur && (geByClass1("sp_body") && (cur.scroller && cur.scroller.destroy(), geByClass1("sp_body").scrollTop = 0, removeClass("scroller_wrap", geByClass1("sp_cont")), geByClass("sp_page").forEach(function(e) {
                return removeClass("scroller_page", e)
            })))
        }

        function he(e, t) {
            if (store.mail.cur) {
                var n = store.mail,
                    a = n.cur,
                    r = n.peers,
                    o = (geByClass1("uMailWrite"), (0, i.$)(".uMailWrite__popupStickers")),
                    s = (0, m.random)(),
                    l = 0 === t.indexOf("suggestion"),
                    c = {
                        act: "send",
                        to: a.peerId,
                        from: "dialog",
                        hash: r[a.peerId].hashSend,
                        message: "",
                        media: "sticker".concat(e),
                        _af: a._af,
                        random_id: s,
                        sticker_referrer: t
                    },
                    u = a.msgReply[a.peerId];
                if (u && (c.attached_messages = u, c.has_reply = !0, (0, y.setPeerDraft)(a.viewerId, a.peerId, {
                        reply: void 0
                    }), ajaxRequest("/mail", {
                        act: "reply_cancel",
                        peer_id: store.mail.cur.peerId,
                        hash: store.mail.hash.reply
                    }), a.msgReply[a.peerId] = null), l) {
                    var d = (0, i.$)(".uMailWrite__textarea");
                    d.value = "", Me("", a.viewerId, a.peerId), ye({}, d)
                }
                return Ie(c), Pe(), pe(), R && (removeClass(O, o), Te(!1)), !0
            }
        }

        function pe() {
            var e = store.mail,
                t = e.cur,
                n = e.replies,
                a = t.msgReply[t.peerId],
                r = "";
            if (t.editing) {
                var o = n[a];
                o && (r = o.preview_url)
            } else {
                var s = a && f.default.getElem(a);
                if (s) {
                    var l = (0, i.$)(".thumbs_map .thumb_map_img_as_div", s);
                    (r = l && l.style.backgroundImage) && (r = r.replace(/^url\((['"])?/, "").replace(/(['"])?\)$/, ""))
                }
            }(0, i.$$)(".uMailWrite__reply").forEach(function(e) {
                e.outerHTML = (0, k.uMailWrite_Reply)(r)
            })
        }

        function Ae(e) {
            (0, i.$$)(".uMailWrite__attachments_".concat(e)).forEach(function(t) {
                t.outerHTML = (0, k.uMailWrite_Attachments)(e)
            }), G(), (0, i.$)(".uMailWrite__textarea") && Pe();
            var t = (0, i.$)(j.mailWrite);
            if (t) {
                var n = !!t.$(j.pollAttachment);
                t.classList.toggle(N.canAttachPoll, !n)
            }
        }

        function me(e) {
            if (e && e.preventDefault(), !mediaUpload.checkUploading()) return !1;
            var t, n = (0, i.$)(".uMailWrite__textarea"),
                a = store.mail,
                r = a.cur,
                o = a.peers,
                c = (0, m.random)(),
                u = store.mail.cur.editing,
                d = u && store.mail.msgs[u],
                f = d ? {
                    act: "edit_message",
                    id: u,
                    peerId: d.peerId,
                    hash: o[r.peerId].hashSend
                } : {
                    act: "send",
                    to: r.peerId,
                    from: "dialog",
                    hash: o[r.peerId].hashSend,
                    _af: r._af,
                    random_id: c,
                    entrypoint: store.mail.cur.mvk_entrypoint || ""
                };
            if (!Le()) return d ? MsgDeleteDialog.open({
                isEditing: !0
            }) : r.groupId && (t = (0, i.$)(".uMailWrite__templates"), je("templates"), hasClass(B, t) ? ue() : ce()), !1;
            each(geByClass1("uMailWrite"), function(e, t) {
                return !(t.name && !t.disabled) || ("radio" === t.type && !t.checked || ("checkbox" === t.type && !t.checked || ("button" === t.type || ("submit" === t.type || ("image" === t.type || void(f[t.name] = t.value))))))
            }), u ? (uMailHat.onCancelEditing(!0), Ie(f)) : (Ie(f), store.mail.cur.mvk_entrypoint = "", (0, y.popPeerAttachments)(r.peerId), n.value = "", Me("", r.viewerId, r.peerId), (0, y.setPeerDraft)(r.viewerId, r.peerId, {
                msgs: void 0,
                reply: void 0
            }, r.editing), r.msgReply[r.peerId] && !r.editing && ajaxRequest("/mail", {
                act: "reply_cancel",
                peer_id: store.mail.cur.peerId,
                hash: store.mail.hash.reply
            }), r.msgAttached[r.peerId] = [], r.msgReply[r.peerId] = null, ye({}, n)), l.default.onSystemMessageClick(), Ae(r.peerId), pe(), StickersHints.actualizeVisibility(), s.default.safari_mobile ? (n.focus(), setTimeout(function() {
                return n.focus()
            })) : s.default.msie_edge || (n.focus(), requestAnimationFrame(function() {
                return n.focus()
            }))
        }

        function _e(e) {
            s.default.msie_edge && (e.preventDefault(), me(e))
        }

        function ve() {
            var e = ve,
                t = e.typingData || (e.typingData = {});
            if (0 !== (0, i.$)(".uMailWrite__textarea").value.length && !store.mail.cur.editing) {
                var n = Date.now(),
                    a = store.mail,
                    r = a.cur,
                    o = a.peers,
                    s = r.peerId;
                s <= -2e9 || t[s] && n - t[s] < 5e3 || (t[s] = n, ajaxRequest("/mail", {
                    _ajax: 1,
                    act: "typing",
                    peer: s,
                    hash: o[s].hashTyping,
                    community: nav.getQuery("community")
                }))
            }
        }

        function ye(e, t) {
            var n = (0, i.$)(".uMailWrite__textareaGhost"),
                a = t.value;
            n.innerText = a, "\n" === last(a) && (n.innerHTML += "&nbsp;");
            var r = store.mail.cur,
                o = n.offsetHeight;
            (0, i.$$)(".uMailWrite__textarea").forEach(function(e) {
                return setStyle(e, "height", o)
            }), (0, i.$$)(".uMailWrite__main").forEach(function(e) {
                return setStyle(e, "height", o)
            }), z(), r && W(a, r.viewerId, r.peerId), we(e, t, function() {
                Mention.onKeyUp(e, t)
            })
        }

        function be(e) {
            var t = store.mail,
                n = t.peers,
                i = t.members,
                a = t.cur,
                r = n[e].memberIds || [],
                o = [],
                s = [];
            return r.forEach(function(e, t) {
                if (e !== a.viewerId) {
                    var n = i[e];
                    if (n) {
                        var r = [n.id, n.name, n.url.replace("/", "@"), n.avatar, n.url.replace("/", ""), null, null, null, n.firstName, n.domain];
                        o.push(r)
                    } else {
                        var l = ["fake" + t, "...", "@...", i[0].avatar, "", null, null, null, "...", null];
                        s.push(l)
                    }
                }
            }), o.concat(s)
        }

        function we(e, t, n) {
            U.length && (!hasClass("Mention_inited", geByClass1("uMailWrite__main")) && Q(), n(e, t))
        }

        function ke(e, t) {
            we(e, t, function() {
                Mention.onKeyDown(e, t)
            }), (10 == e.keyCode || 13 == e.keyCode && (e.ctrlKey || e.metaKey)) && me()
        }

        function Ee(e, t) {
            we(e, t, function() {
                Mention.onClick(e, t)
            })
        }

        function Se(e, t) {
            (0, y.setKeyboardType)("text");
            var n = function() {
                Z(), je("text"), StickersHints.init(), we(e, t, function() {
                    Mention.onFocus(e, t)
                })
            };
            s.default.ios ? n() : requestAnimationFrame(function() {
                requestAnimationFrame(function() {
                    n()
                })
            }), v.onOpen("bottom"), s.default.msie_edge && (window.scrollTo(0, 99999), requestAnimationFrame(function() {
                window.scrollTo(0, 99999)
            }), setTimeout(function() {
                window.scrollTo(0, 99999)
            }))
        }

        function Ce(e, t) {
            if ("text" === (0, y.getKeyboardType)() && (0, y.setKeyboardType)(""), v.onClose(), W._timer && clearTimeout(W._timer), store.mail && store.mail.cur) {
                var n = store.mail.cur,
                    i = n.viewerId,
                    a = n.peerId;
                Me(t.value, i, a)
            }
        }

        function Me(e, t, n) {
            var i = store.mail.cur.editing;
            (0, y.setPeerDraft)(t, n, {
                text: e
            }, i)
        }

        function Pe() {
            var e = store.mail,
                t = e.cur,
                n = (e.queue, e.flags);
            if (t.peerId) {
                var a = !Le(),
                    o = !mediaUpload.checkUploading(),
                    s = !!t.editing,
                    l = {
                        sendActive: !a && !s && !o,
                        loading: o,
                        editAccept: s && !a,
                        editRemove: s && a
                    },
                    c = n.templates && !(s || !t.groupId || !a || l.loading || l.uploading);
                l.templates = c && "templates" !== (0, y.getKeyboardType)(), l.templatesActive = c && "templates" === (0, y.getKeyboardType)();
                var u = !(l.sendActive || l.loading || l.editAccept || l.editRemove || l.templates || l.templatesActive);
                l.disabled = u;
                var d = r.default.class("uMailWrite__button", "uMailWrite__buttonSend", l);
                (0, i.$$)(".uMailWrite__buttonSend").forEach(function(e) {
                    return e.className = d
                })
            }
        }

        function Te(e) {
            var t = r.default.class("uMailWrite__button", "uMailWrite__buttonStickers", {
                active: e
            });
            (0, i.$$)(".uMailWrite__buttonStickers").forEach(function(e) {
                return e.className = t
            })
        }

        function De(e) {
            var t = r.default.class("uMailWrite__button", "uMailWrite__buttonKeyboard", {
                active: e
            });
            (0, i.$$)(".uMailWrite__buttonKeyboard").forEach(function(e) {
                return e.className = t
            })
        }

        function Ie(e) {
            if (store.mail.cur) {
                var t = store.mail.cur,
                    n = t.ref,
                    i = t.refSource,
                    a = e.to;
                if (i && (e.ref_source = i, e.ref = n, store.mail.refSource = void 0, store.mail.ref = void 0), C.send(e), a) {
                    var r = store.mail.peers[a];
                    if (r && r.keyboard && r.keyboard.one_time) r.keyboard = null, (0, y.getKeyboardState)(a).updateTime = Date.now(), Be()
                }
                Pe()
            }
        }

        function xe(e) {
            e.stopPropagation(), alert(lang.mobile_mail_attachments_limit)
        }

        function Oe(e) {
            var t = document.createElement("textarea");
            t.innerHTML = e;
            var n = t.value,
                a = (0, i.$$)(".uMailWrite__textarea");
            a.forEach(function(e) {
                return e.value = n
            }), ye({}, a[0])
        }

        function Le() {
            return function() {
                var e = store.mail,
                    t = e.cur;
                e.peers;
                return !!t && t.hasAttachments
            }() || !!(0, i.$)(".uMailWrite__textarea").value.trim()
        }

        function Be(e) {
            if ((0, i.$)(".uMailWrite__keyboard")) {
                var t, n = store.mail,
                    a = n.cur,
                    o = n.peers,
                    s = a.peerId && o[a.peerId];
                t = !(a.groupId || !s || s.closed || s.kicked) && !(!s.keyboard || !s.keyboard.buttons.length);
                var l = (0, i.$)(".uMailWrite"),
                    c = r.default.parseClass("uMailWrite", l.className);
                if (c.keyboard !== t && (l.className = r.default.class("uMailWrite", Object.assign({}, c, {
                        keyboard: t
                    }))), (0, y.getKeyboardState)(a.peerId).rendered = !1, t) {
                    D || (D = lsGet("mail_keyboard_hidden") || {});
                    var u = s.keyboard,
                        d = D[a.peerId],
                        f = (e && e.update, !(0, y.getKeyboardType)() || "buttons" === (0, y.getKeyboardType)() || "text" === (0, y.getKeyboardType)()),
                        h = !1;
                    d && (d == u.chat_local_id ? f = !1 : h = !0), f ? Ne("buttons", {
                        store: h
                    }) : h && le()
                } else oe()
            }
        }

        function Re() {
            var e = store.mail,
                t = e.cur,
                n = e.peers,
                a = t.peerId && n[t.peerId];
            if (t.groupId && a && !a.closed && !a.kicked) {
                var r = (0, i.$)(".uMailWrite__templatesBody"),
                    o = t.templates;
                if (r) return o ? void
                function(e, t) {
                    e.innerHTML = (0, S.uMailWrite_TemplatesContent)(t)
                }(r, o): (function(e) {
                    e.innerHTML = (0, S.uMailWrite_TemplatesLoading)()
                }(r), I || (I = new Promise(function(e) {
                    ajaxRequest("/mail", {
                        act: "get_templates"
                    }, function(t) {
                        e(t)
                    }, function(t) {
                        e()
                    })
                })), void I.then(function(e) {
                    I = null, store.mail && store.mail.cur && (store.mail.cur.templates = e), Re()
                }))
            }
        }

        function Ne(e, t) {
            switch (je(e), e) {
                case "stickers":
                    ne();
                    break;
                case "buttons":
                    se(t);
                    break;
                case "text":
                    (n = (0, i.$)(".uMailWrite__textarea")) && n.focus();
                    break;
                case "templates":
                    ce()
            }
            var n
        }

        function je(e) {
            var t;
            "stickers" !== e && te(), "buttons" !== e && oe(), "text" !== e && (t = (0, i.$)(".uMailWrite__textarea")) && document.activeElement === t && t.blur(), "templates" !== e && ue()
        }

        function Fe(e) {
            var t = store.mail.cur.templates.find(function(t) {
                return t.id === e
            });
            if (t) {
                var n = lang.mobile_mail_templates_delete_popup_text;
                n = n.replace("{name}", (0, _.emojiToHTML)(t.name)), MailDialog.open({
                    body: n,
                    confirmText: lang.mobile_mail_delete_popup_delete,
                    cancelText: lang.mobile_mail_delete_popup_cancel,
                    onConfirm: r.default.onClick("uMailWrite._onConfirmDeleteTemplate", e)
                })
            }
        }

        function He(e) {
            var t = store.mail.cur.templates,
                n = t.findIndex(function(t) {
                    return t.id === e
                });
            if (-1 !== n) {
                var a = t[n],
                    r = (0, i.$)(".uMailWrite__templatesRow".concat(a.id));
                a.deleting = !0, r.classList.add("uMailWrite__templatesRow_hidden"), ajaxRequest("/mail", {
                    act: "delete_template",
                    hash: store.mail.hash.templateDelete,
                    id: e
                }, function(n) {
                    if (n.error) Ve(e);
                    else {
                        var i = t.findIndex(function(t) {
                            return t.id === e
                        });
                        t.splice(i, 1), Re()
                    }
                }, function() {
                    Ve(e)
                })
            }
            MailDialog.close()
        }

        function Ve(e) {
            var t = store.mail.cur.templates,
                n = (0, i.$)(".uMailWrite__templatesRow".concat(e)),
                a = t.findIndex(function(t) {
                    return t.id === e
                }),
                r = t[a];
            r.deleting = !1, n.classList.remove("uMailWrite__templatesRow_hidden");
            var o = lang.mobile_mail_templates_delete_error;
            o = o.replace("{name}", r.name), u.init({
                text: o,
                action: {
                    text: lang.mobile_mail_templates_toast_action_ok,
                    callback: function(e, t) {
                        var n = t.id;
                        u.close(n)
                    }
                }
            })
        }

        function Ue() {
            l.default.clearSystemMessage2(), remove(geByClass1("message__newMsgsDivider")), remove(geByClass1("Unfold__item_returnToChat"))
        }

        function ze() {
            var e = store.mail,
                t = e.cur,
                n = e.presend,
                i = e.pendingReplies,
                a = [],
                r = n.failed[t.peerId] || [],
                o = n.pending[t.peerId] || [];
            (r.length || o.length) && (r.concat(o).map(function(e) {
                var t = n.msgs[e];
                if (t)
                    if (0 === t.sendId.indexOf("edit")) k.default.onMessage(t);
                    else {
                        if (t.reply) {
                            var r = f.default.getReplyDataFromHTML(t.reply);
                            r && (i[t.reply] = r)
                        }
                        a.push(t)
                    }
            }), d.setMsgs(a))
        }

        function We(e, t, n) {
            var i;
            n ? i = [(0, h.ModalMenuBtn)({
                inner: lang.mobile_mail_presend_menu_retry,
                onclick: ["uMailWrite._onRetryFailedMsg", "this", t]
            }), (0, h.ModalMenuBtn)({
                inner: lang.mobile_mail_presend_menu_delete,
                onclick: ["uMailWrite._onDeleteFailedMsg", "this", t]
            })] : i = [(0, h.ModalMenuBtn)({
                inner: lang.mobile_mail_presend_menu_cancel,
                onclick: ["uMailWrite._onCancelPendingMsg", "this", t]
            })];
            var a = (0, h.default)({
                class: "",
                close: !0,
                closeText: lang.mobile_mail_presend_menu_close,
                items: i
            });
            p.default.open(o.default.elem(a), !0)
        }

        function qe(e, t) {
            h.default.close(e);
            var n = store.mail.presend.msgs[t];
            (0, y.removeFailedMsg)(n), C.retry(t, function(e) {
                var t = store.mail.cur.peerId,
                    n = store.mail.peers[t];
                return e.data.hash = n.hashSend, e
            })
        }

        function $e(e, t) {
            h.default.close(e), C.remove(t)
        }

        function Ge(e, t) {
            h.default.close(e), C.remove(t)
        }

        function Qe(e) {
            u.init({
                duration: 0,
                text: e,
                action: {
                    text: lang.mobile_mail_templates_toast_action_ok,
                    callback: function(e, t) {
                        var n = t.id;
                        u.close(n)
                    }
                }
            })
        }
    },
    ZoJ6: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i = o(n("bZ/P")),
            a = o(n("9y81")),
            r = n("fdw3");

        function o(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        var s = function(e) {
            var t = window.lang,
                n = (0, r.isNewNavigation)(),
                o = e.query;
            return Wd.html({
                class: [Bem.class("mailFilter", {
                    hasQuery: !!o
                }), e.mix],
                inner: [Wd.wrap((0, a.default)({
                    icon: "search"
                })), {
                    class: "mailFilter__input",
                    tag: "input",
                    placeholder: t.mobile_search,
                    value: o,
                    oninput: ["MailFilter._onInput", "this"],
                    attrs: i.default.onFocus("MailFilter._onFocus")
                }, {
                    class: "mailFilter__right",
                    inner: [n ? null : Wd.wrap((0, a.default)({
                        mix: "mailFilter__create",
                        icon: "plus",
                        url: e.createUrl
                    })), Wd.wrap((0, a.default)({
                        mix: "mailFilter__clear",
                        icon: "close12",
                        attrs: i.default.onMouseDown("MailFilter._onClearMouseDown", "this")
                    }))]
                }]
            })
        };
        t.default = s
    },
    Zoa4: function(e, t, n) {
        "use strict";
        var i = u(n("+cqQ")),
            a = u(n("jk6M")),
            r = u(n("CkGd")),
            o = u(n("QBkA")),
            s = function(e) {
                if (e && e.__esModule) return e;
                var t = c();
                if (t && t.has(e)) return t.get(e);
                var n = {};
                if (null != e) {
                    var i = Object.defineProperty && Object.getOwnPropertyDescriptor;
                    for (var a in e)
                        if (Object.prototype.hasOwnProperty.call(e, a)) {
                            var r = i ? Object.getOwnPropertyDescriptor(e, a) : null;
                            r && (r.get || r.set) ? Object.defineProperty(n, a, r) : n[a] = e[a]
                        }
                }
                n.default = e, t && t.set(e, n);
                return n
            }(n("lQx8")),
            l = n("MjTa");

        function c() {
            if ("function" != typeof WeakMap) return null;
            var e = new WeakMap;
            return c = function() {
                return e
            }, e
        }

        function u(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }

        function d() {
            (0, l.cleanScrollView)(s.Messenger.getConvoBody()), removeEvent(s.Messenger.getConvoBody(), "touchstart", f, {
                passive: !0
            })
        }

        function f(e) {
            var t = e.target.closest(".msg__sticker");
            t && Msg.onStickerTouchStart(e, t), (t || e.target.closest(".msg")) && Msg._onTouchStart()
        }

        function h(e, t) {
            $$(".messenger__layer_".concat(e)).forEach(function(e) {
                e.classList.toggle("messenger__layer_loading", t)
            })
        }

        function p(e) {
            return $(".messenger__layer_".concat(e, " .messenger__body"))
        }

        function A(e) {
            s.Messenger.onMainScroll(e)
        }

        function m(e) {
            s.Messenger.onConvoScroll(e), e._isScrolling = !0,
                function() {
                    var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null;
                    return !window._preventedCheckTop && (e && function(e) {
                        return e.scrollHeight && e.scrollTop <= 2.5 * window.innerHeight
                    }(e))
                }(e) && s.Messenger.onConvoAtTop(),
                function() {
                    var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null;
                    return e && function(e) {
                        return e.scrollHeight && e.scrollHeight - e.scrollTop - e.offsetHeight <= 1.5 * window.innerHeight
                    }(e)
                }(e) && s.Messenger.onConvoAtBottom(), e._scrollingTimer && clearTimeout(e._scrollingTimer), e._scrollingTimer = setTimeout(function() {
                    e._isScrolling = !1
                }, 100)
        }

        function _() {
            var e = s.Messenger.getConvoBody();
            e && (e.prevHeight && e.prevHeight !== e.offsetHeight && function(e, t) {
                e.scrollTop = e.scrollHeight - e.offsetHeight - t
            }(e, e.scrollBottom), e.prevHeight = e.offsetHeight, e.scrollBottom = function(e) {
                return e.scrollHeight - e.scrollTop - e.offsetHeight
            }(e), v && requestAnimationFrame(_))
        }
        Object.assign(s.Messenger, {
            scrollMainBodyToTop: function() {
                $(".messenger__layer_main .messenger__body").scrollTop = 0
            },
            onMainScroll: (0, i.default)("scrollElem"),
            onQueryChange: o.default.onChange,
            onQueryClear: o.default.onClear,
            onSearchMsgsClick: (0, i.default)(),
            setQuery: o.default.setQuery,
            setQuerySilently: o.default.setQuerySilently,
            getMainBody: function(e) {
                return p("main")
            },
            setMainLoading: function(e) {
                return h("main", e)
            },
            onConvoAtTop: (0, i.default)(),
            onConvoAtBottom: (0, i.default)(),
            onConvoScroll: (0, i.default)("scrollElem"),
            setConvoLoading: function(e) {
                return h("convo", e)
            },
            getConvoBody: function() {
                return p("convo")
            },
            scrollConvoToBottom: function() {
                var e = s.Messenger.getConvoBody();
                e && (e.scrollTop = e.scrollHeight)
            },
            redrawConvoLayer: function() {
                var e = (0, s.Messenger_renderConvoLayer)();
                d(), $$(".messenger__layer_convo").forEach(function(t) {
                    t.innerHTML = e
                })
            },
            cleanConvoBody: d,
            setupConvoBody: function() {
                (0, l.setScrollView)(s.Messenger.getConvoBody(), {
                    topBanner: !1
                }), addEvent(s.Messenger.getConvoBody(), "touchstart", f, {
                    passive: !0
                })
            },
            getPageLayer: function() {
                return $(".messenger__layer_page")
            }
        }), s.Messenger._onMainScroll = A, s.Messenger._onConvoScroll = m, s.Messenger._onSearchMsgsClick = s.Messenger.onSearchMsgsClick;
        var v = !1;
        if (s.default.startPolling = function() {
                v = !0, _()
            }, s.default.stopPolling = function() {
                v = !1
            }, Object.assign(s.default, {
                redraw: function() {
                    $$(".uMessenger").forEach(function(e) {
                        return e.outerHTML = (0, s.default)()
                    })
                },
                redrawView: function() {
                    $$(".uMessenger").forEach(function(e) {
                        return e.className = (0, s.uMessenger_class)()
                    });
                    var e = store.mail,
                        t = e.cur,
                        n = e.peers;
                    t.peerId && (b(), r.default.togglePin(n[t.peerId].canPin));
                    w()
                },
                redrawMailActions: function() {
                    var e = (0, s.uMessenger_hasSelectedMsgs)();
                    $$(".messenger__layer_convo").forEach(function(t) {
                        t.$(".messenger__footer").classList.toggle("messenger__footer_actionsOpen", e), r.default.update();
                        var n = store.mail,
                            i = n.cur,
                            a = n.peers;
                        if (!i.peerId || !a[i.peerId].isIncomingMR) {
                            var o = t.$(".messenger__write").offsetHeight,
                                s = t.$(".messenger__acts").offsetHeight - o,
                                l = t.$(".messenger__body");
                            requestAnimationFrame(function() {
                                !l._fixed && s && (l.style.paddingBottom = s + "px", l._fixed = !0), s <= 0 && (l.style.paddingBottom = 0, l._fixed = !1)
                            })
                        }
                    })
                },
                redrawPinnedMsg: b,
                setPinnedVisibility: function(e) {
                    var t = store.mail,
                        n = t.peers,
                        i = t.cur,
                        a = n[i.peerId].hasPinnedMsg;
                    $$(".messenger").forEach(function(t) {
                        t.classList.toggle("messenger_pinnedVisible", a && e), t.classList.toggle("messenger_pinnedHidden", a && !e)
                    })
                },
                redrawBanner: function() {
                    var e = (0, s.uMessenger_getBanner)();
                    $$(".messenger__banner").forEach(function(t) {
                        t.innerHTML = e, t.classList.toggle("messenger__bannerVisible", !!e)
                    })
                },
                redrawMRsHint: w,
                expandPeerBefore: function() {
                    if (!$(".load_before_closed")) return;
                    var e = s.Messenger.getConvoBody();
                    if (a.default.safari_mobile) {
                        var t = function() {
                            var t = e.scrollHeight - e.scrollTop - e.offsetHeight;
                            setStyle(e, "overflow", "hidden"), $$(".load_before_closed").forEach(function(e) {
                                return e.classList.remove("load_before_closed")
                            }), e.scrollTop = e.scrollHeight - t - e.offsetHeight, setStyle(e, "overflow", "auto")
                        };
                        e.isScrolling ? (y && clearInterval(y), y = setInterval(function() {
                            e.isScrolling || (clearInterval(y), t())
                        }, 10)) : t()
                    } else if (e.scrollTop <= 184) {
                        var n = e.scrollHeight - e.scrollTop - e.offsetHeight;
                        $$(".load_before_closed").forEach(function(e) {
                            return e.classList.remove("load_before_closed")
                        }), e.scrollTop = e.scrollHeight - n - e.offsetHeight
                    }
                },
                scrollToMsg: function(e) {
                    var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1],
                        n = !(arguments.length > 2 && void 0 !== arguments[2]) || arguments[2],
                        i = Msg.getElem(e);
                    if (!i) return !1;
                    var a = s.Messenger.getConvoBody();
                    if ($(".mailScrap__loading_before"), t) a.scrollTop = i.offsetTop - .18 * a.offsetHeight;
                    else {
                        var r = $(".typing_id_curConvo").offsetHeight;
                        a.scrollTop = i.offsetTop - .5 * (a.offsetHeight + 2) + (i.offsetHeight + r) / 2, i.offsetHeight > a.offsetHeight && (a.scrollTop = i.offsetTop)
                    }
                    return n && (addClass("msg_highlight", i), setTimeout(function() {
                        removeClass("msg_highlight", i)
                    }, 1500)), !0
                },
                loadMailPage: (0, i.default)()
            }), a.default.safari_mobile) {
            var g = null;
            s.Messenger.onConvoScroll(function(e) {
                e.isScrolling = !0, g && clearTimeout(g), g = setTimeout(function() {
                    return e.isScrolling = !1
                }, 50)
            })
        }
        var y = null;

        function b() {
            var e = store.mail,
                t = e.peers,
                n = e.cur,
                i = (0, s.uMessenger_getPinnedMsg)(),
                a = t[n.peerId].hasPinnedMsg;
            $(".messenger__pinned").innerHTML = i, MailHat_convo.setHasPinnedMsg(a)
        }

        function w() {
            var e = store.mail.cur,
                t = e.countMR,
                n = t && "all" === e.folder && !e.query && !e.forwardFromId,
                i = $(".messenger__mrsHint");
            if (n) {
                var a = t ? (0, s.uMessenger_renderMRsHint)(t) : "";
                i.innerHTML = a
            }
            i.classList.toggle("messenger__mrsHint_hidden", !n)
        }
    },
    "Zw+j": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i = function(e) {
            var t = e.items.map(function(e) {
                return {
                    tag: "li",
                    class: "OrderFieldsList__item",
                    inner: [{
                        inner: e.title,
                        class: "OrderFieldsList__title",
                        tag: "span"
                    }, {
                        inner: Wd.wrap(e.text),
                        class: "OrderFieldsList__text",
                        tag: "span"
                    }]
                }
            });
            return {
                tag: "ul",
                class: e.class ? e.class : "",
                inner: t
            }
        };
        t.default = i
    },
    a0wW: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.FLAG_SUPPORTS_HISTORY_API = t.FLAG_GIF_AUTOPLAY = t.FLAG_MP4 = t.default = void 0;
        var i, a = (i = n("jk6M")) && i.__esModule ? i : {
                default: i
            },
            r = n("J8bf");

        function o(e, t) {
            for (var n = 0; n < t.length; n++) {
                var i = t[n];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        }
        var s = {};
        t.FLAG_MP4 = 0;
        t.FLAG_GIF_AUTOPLAY = 1;
        t.FLAG_SUPPORTS_HISTORY_API = 2;
        var l = function() {
            function e() {
                ! function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, e)
            }
            var t, n, i;
            return t = e, i = [{
                key: "getFeatures",
                value: function() {
                    return s
                }
            }, {
                key: "detectMp4Support",
                value: function() {
                    var e = a.default.meizu || a.default.mi || a.default.uc_mini || 0 !== a.default.ios && a.default.ios < 10 || a.default.chrome && a.default.version.split(".")[0] < 53,
                        t = !1,
                        n = document.createElement("video");
                    return n.canPlayType && "" !== n.canPlayType("video/mp4") && (t = !0), s.mp4 = t, this.setFlag(0, t && !e), t
                }
            }, {
                key: "detectAutoplay",
                value: function() {
                    var e = this;
                    return new Promise(function(t) {
                        if (s.autoplay) t(!0);
                        else {
                            if (a.default.ios && a.default.safari_mobile && parseInt(a.default.version, 10) >= 10) return s.autoplay = !0, void t(!0);
                            s.autoplay = !1;
                            var n = ce("video"),
                                i = ce("source");
                            i.src = "data:video/mp4;base64,AAAAFGZ0eXBNU05WAAACAE1TTlYAAAOUbW9vdgAAAGxtdmhkAAAAAM9ghv7PYIb+AAACWAAACu8AAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAnh0cmFrAAAAXHRraGQAAAAHz2CG/s9ghv4AAAABAAAAAAAACu8AAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAFAAAAA4AAAAAAHgbWRpYQAAACBtZGhkAAAAAM9ghv7PYIb+AAALuAAANq8AAAAAAAAAIWhkbHIAAAAAbWhscnZpZGVBVlMgAAAAAAABAB4AAAABl21pbmYAAAAUdm1oZAAAAAAAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAVdzdGJsAAAAp3N0c2QAAAAAAAAAAQAAAJdhdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAFAAOABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAAEmNvbHJuY2xjAAEAAQABAAAAL2F2Y0MBTUAz/+EAGGdNQDOadCk/LgIgAAADACAAAAMA0eMGVAEABGjuPIAAAAAYc3R0cwAAAAAAAAABAAAADgAAA+gAAAAUc3RzcwAAAAAAAAABAAAAAQAAABxzdHNjAAAAAAAAAAEAAAABAAAADgAAAAEAAABMc3RzegAAAAAAAAAAAAAADgAAAE8AAAAOAAAADQAAAA0AAAANAAAADQAAAA0AAAANAAAADQAAAA0AAAANAAAADQAAAA4AAAAOAAAAFHN0Y28AAAAAAAAAAQAAA7AAAAA0dXVpZFVTTVQh0k/Ou4hpXPrJx0AAAAAcTVREVAABABIAAAAKVcQAAAAAAAEAAAAAAAAAqHV1aWRVU01UIdJPzruIaVz6ycdAAAAAkE1URFQABAAMAAAAC1XEAAACHAAeAAAABBXHAAEAQQBWAFMAIABNAGUAZABpAGEAAAAqAAAAASoOAAEAZABlAHQAZQBjAHQAXwBhAHUAdABvAHAAbABhAHkAAAAyAAAAA1XEAAEAMgAwADAANQBtAGUALwAwADcALwAwADYAMAA2ACAAMwA6ADUAOgAwAAABA21kYXQAAAAYZ01AM5p0KT8uAiAAAAMAIAAAAwDR4wZUAAAABGjuPIAAAAAnZYiAIAAR//eBLT+oL1eA2Nlb/edvwWZflzEVLlhlXtJvSAEGRA3ZAAAACkGaAQCyJ/8AFBAAAAAJQZoCATP/AOmBAAAACUGaAwGz/wDpgAAAAAlBmgQCM/8A6YEAAAAJQZoFArP/AOmBAAAACUGaBgMz/wDpgQAAAAlBmgcDs/8A6YEAAAAJQZoIBDP/AOmAAAAACUGaCQSz/wDpgAAAAAlBmgoFM/8A6YEAAAAJQZoLBbP/AOmAAAAACkGaDAYyJ/8AFBAAAAAKQZoNBrIv/4cMeQ==";
                            var r = ce("source");
                            r.src = "data:video/webm;base64,GkXfo49CgoR3ZWJtQoeBAUKFgQEYU4BnAQAAAAAAF60RTZt0vE27jFOrhBVJqWZTrIIQA027jFOrhBZUrmtTrIIQbE27jFOrhBFNm3RTrIIXmU27jFOrhBxTu2tTrIIWs+xPvwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFUmpZuQq17GDD0JATYCjbGliZWJtbCB2MC43LjcgKyBsaWJtYXRyb3NrYSB2MC44LjFXQY9BVlNNYXRyb3NrYUZpbGVEiYRFnEAARGGIBc2Lz1QNtgBzpJCy3XZ0KNuKNZS4+fDpFxzUFlSua9iu1teBAXPFhL4G+bmDgQG5gQGIgQFVqoEAnIEAbeeBASMxT4Q/gAAAVe6BAIaFVl9WUDiqgQEj44OEE95DVSK1nIN1bmTgkbCBULqBPJqBAFSwgVBUuoE87EQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB9DtnVB4eeBAKC4obaBAAAAkAMAnQEqUAA8AABHCIWFiIWEiAICAAamYnoOC6cfJa8f5Zvda4D+/7YOf//nNefQYACgnKGWgQFNANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgQKbANEBAAEQEAAYABhYL/QACIhgAPuC/rKgnKGWgQPoANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgQU1ANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgQaDANEBAAEQEAAYABhYL/QACIhgAPuC/rKgnKGWgQfQANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgQkdANEBAAEQEBRgAGFgv9AAIiGAAPuC/rOgnKGWgQprANEBAAEQEAAYABhYL/QACIhgAPuC/rKgnKGWgQu4ANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgQ0FANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgQ5TANEBAAEQEAAYABhYL/QACIhgAPuC/rKgnKGWgQ+gANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgRDtANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgRI7ANEBAAEQEAAYABhYL/QACIhgAPuC/rIcU7trQOC7jLOBALeH94EB8YIUzLuNs4IBTbeH94EB8YIUzLuNs4ICm7eH94EB8YIUzLuNs4ID6LeH94EB8YIUzLuNs4IFNbeH94EB8YIUzLuNs4IGg7eH94EB8YIUzLuNs4IH0LeH94EB8YIUzLuNs4IJHbeH94EB8YIUzLuNs4IKa7eH94EB8YIUzLuNs4ILuLeH94EB8YIUzLuNs4INBbeH94EB8YIUzLuNs4IOU7eH94EB8YIUzLuNs4IPoLeH94EB8YIUzLuNs4IQ7beH94EB8YIUzLuNs4ISO7eH94EB8YIUzBFNm3SPTbuMU6uEH0O2dVOsghTM", append(r, n), append(i, n), n.style.position = "fixed", n.style.left = "5000px", attr(n, "id", "base64testvideo"), attr(n, "playsinline", "playsinline"), attr(n, "webkit-playsinline", "webkit-playsinline"), attr(n, "muted", "muted"), attr(n, "autoplay", "autoplay"), attr(n, "loop", "loop"), append(n, document.body);
                            var o = ge("base64testvideo");
                            if (a.default.mobile && a.default.ios && a.default.ios < 10) return s.autoplay = !1, remove(n), t(!1), void clearTimeout(e.autoDetectTimeout);
                            if (!a.default.safari_mobile || a.default.safari_mobile && parseInt(a.default.version, 10) >= 10) {
                                var l = n.play();
                                void 0 !== l && l.then(function() {
                                    s.autoplay = !0, remove(n), t(!0), clearTimeout(e.autoDetectTimeout)
                                }).catch(function(i) {
                                    s.autoplay = !1, remove(n), t(!1), clearTimeout(e.autoDetectTimeout)
                                })
                            }
                            o.onplay = function() {
                                s.autoplay = !0, remove(n), t(!0), clearTimeout(e.autoDetectTimeout)
                            }, e.autoDetectTimeout = setTimeout(function() {
                                o.paused || (s.autoplay = !0), remove(n), t(s.autoplay)
                            }, 250)
                        }
                    })
                }
            }, {
                key: "getFlags",
                value: function() {
                    return ((0, r.getCookie)("remixff") || "").split("").map(function(e) {
                        return +e ? "1" : "0"
                    }).join("")
                }
            }, {
                key: "getFlag",
                value: function(e) {
                    var t = this.getFlags();
                    return !!toInt(t[e])
                }
            }, {
                key: "setFlag",
                value: function(e) {
                    var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1],
                        n = (0, r.getCookie)("remixff") || "",
                        i = n.split("");
                    e >= i.length && (i = Array.from(Array(e), function(e, t) {
                        return i[t] || "0"
                    })), i[e] = t ? "1" : "0";
                    var a = i.join("");
                    (0, r.setCookie)("remixff", a, 10)
                }
            }], (n = null) && o(t.prototype, n), i && o(t, i), e
        }();
        onDOMReady(function() {
            l.detectMp4Support()
        });
        var c = l;
        t.default = c
    },
    aXSb: function(e, t, n) {
        "use strict";
        var i = 10;
        window.CreatePost = {
            setMaxAttach: function(e) {
                i = e
            },
            checkAttaches: function() {
                CreatePost.toggleEnableAttaches(mediaUpload.getAttachesCount() < i)
            },
            toggleEnableAttaches: function() {
                var e = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0];
                geByClass("cp_attach_btn", "feed_add_form").forEach(function(t) {
                    t.classList.toggle("cp_disabled_btn", !e)
                }), ["photo", "video", "audio", "doc", "poll"].forEach(function(t) {
                    Unfold.toggleItemEnabled(Unfold.getByName("attaches"), t, e)
                })
            }
        }
    },
    bRFj: function(e, t, n) {
        "use strict";
        var i = window,
            a = i.ajax,
            r = i.obj2qs,
            o = i.parseJSON,
            s = i.autoScroll,
            l = i.ImportedFriends;
        window.Friends = {
            onImportSuccess: befall("serviceId", "friendsHtml", "total"),
            onImportFailed: befall("serviceId"),
            accept: function(e, t) {
                var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : "",
                    i = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : null,
                    a = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : "",
                    r = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : "",
                    o = arguments.length > 6 && void 0 !== arguments[6] ? arguments[6] : f,
                    s = arguments.length > 7 && void 0 !== arguments[7] ? arguments[7] : f;
                g(u, e, t, n, i, a, r, o, s)
            },
            decline: function(e, t) {
                var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : "",
                    i = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : null,
                    a = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : "",
                    r = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : "",
                    o = arguments.length > 6 && void 0 !== arguments[6] ? arguments[6] : f,
                    s = arguments.length > 7 && void 0 !== arguments[7] ? arguments[7] : f;
                g(d, e, t, n, i, a, r, o, s)
            },
            makeImportRequest: function(e, t, n) {
                if (!window.XMLHttpRequest) return void(window.location = e);
                a.plainpost(e, {
                    _ajax: 1
                }, function(e) {
                    return function(e, t, n) {
                        var i = o(e),
                            r = i.user,
                            c = i.user_hash,
                            u = i.contacts,
                            d = h + n;
                        if (i.error) return void y(n);
                        a.post(d, {
                            _ajax: 1,
                            user: r,
                            userhash: c,
                            hash: t,
                            contacts: u
                        }, {
                            onDone: function(e, t) {
                                return function(e, t, n) {
                                    var i = geByClass1(p),
                                        a = geByClass1(m);
                                    addClass(A, i), a && (a.innerHTML = t, addClass(_, a));
                                    s(function() {
                                        return geByClass1(v)
                                    }, l, {
                                        no_cache: !0
                                    }), Friends.onImportSuccess(e, t, n), window.opener && window.opener.Friends.onImportSuccess(e, t, n)
                                }(n, e, t)
                            },
                            onFail: function() {
                                return y(n)
                            }
                        })
                    }(e, t, n)
                }, function() {
                    return y(n)
                }, !0)
            }
        };
        var c = "/friends",
            u = "accept",
            d = "decline",
            f = null,
            h = "/friends.php?act=save_contacts&type=",
            p = "friendsImport__loading",
            A = p + "_hidden",
            m = "friendsImport__result",
            _ = m + "_shown",
            v = "friendsList__footerBtn_showMore";

        function g(e, t, n, i, o, s, l, u, d) {
            var f = {
                act: e,
                hash: n,
                id: t
            };
            i && (f.from = i), o && (f.block_id = o), s && (f.ref = s), l && (f.track_code = l);
            var h = c + r(f);
            a.post(h, {
                _ajax: 1
            }, {
                onDone: u,
                onFail: d
            })
        }

        function y(e) {
            Friends.onImportFailed(e), window.opener && (window.opener.Friends.onImportFailed(e), window.close())
        }
    },
    bYEY: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("iGfS")) && i.__esModule ? i : {
            default: i
        };
        var r = a.default;
        t.default = r, window.uBell = a.default
    },
    "bZ/P": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("SRbS")) && i.__esModule ? i : {
            default: i
        };
        n("zb1z"), n("dbQR"), n("l90V"), n("c0X5");
        var r = a.default;
        t.default = r, window.q = a.default
    },
    blmJ: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("0Zid")) && i.__esModule ? i : {
            default: i
        };
        var r = a.default;
        t.default = r, window.PrometheusEditConfirm = a.default
    },
    "bvP/": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.initAutogrow = function(e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 3,
                n = ce("span");
            setStyle(n, {
                width: "".concat(e.clientWidth, "px")
            }), n.innerText = "_", append(n, e.parentNode);
            var i = n.clientHeight;
            addEvent(e, "input", function() {
                n.innerText = e.value, e.rows = Math.max(1, Math.min(t, Math.ceil(n.clientHeight / i)))
            })
        }
    },
    c0X5: function(e, t, n) {
        "use strict";
        var i, a = (i = n("SRbS")) && i.__esModule ? i : {
            default: i
        };
        Object.assign(a.default, {
            class: function() {
                for (var e = [], t = null, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
                return i.forEach(function(n) {
                    "string" == typeof n ? (e.push(n), t = n) : n && (e = e.concat(function(e, t) {
                        var n = [];
                        "string" == typeof t && (t = function(e, t, n) {
                            return t in e ? Object.defineProperty(e, t, {
                                value: n,
                                enumerable: !0,
                                configurable: !0,
                                writable: !0
                            }) : e[t] = n, e
                        }({}, t, !0));
                        return Object.keys(t).forEach(function(i) {
                            var a = t[i];
                            !0 === a ? n.push("".concat(e, "_").concat(i)) : a && n.push("".concat(e, "_").concat(i, "_").concat(a))
                        }), n
                    }(t, n)))
                }), e.join(" ")
            },
            parseClass: function(e, t) {
                var n = {};
                return t.trim().split(/\s+/).forEach(function(t) {
                    if (t !== e) {
                        var i = t.replace("".concat(e, "_"), "").split("_");
                        n[i[0]] = !(i.length > 1) || i[1]
                    }
                }), n
            }
        })
    },
    cGUQ: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.fromQueryString = function(e) {
            if (!e) return {};
            var t = {};
            return e = e.split("&"), (0, i.each)(e, function(e, n) {
                var i = n.split("=");
                if (i[0]) {
                    var a = o(i[1] + "");
                    if ("[]" === i[0].substr(i.length - 2)) {
                        var r = o(i[0].substr(0, i.length - 2));
                        t[r] || (t[r] = []), t[r].push(a)
                    } else t[o(i[0])] = a
                }
            }), t
        }, t.toQueryString = function(e, t) {
            var n = [];
            for (var a in e)
                if (e.hasOwnProperty(a) && null != e[a] && !(0, i.isFunction)(e[a]))
                    if ((0, i.isArray)(e[a]))
                        for (var o = 0, s = 0, l = e[a].length; o < l; ++o) null == e[a][o] || (0, i.isFunction)(e[a][o]) || (n.push(r(a) + "[" + s + "]=" + r(e[a][o])), ++s);
                    else n.push(r(a) + "=" + r(e[a]));
            t || n.sort();
            return n.join("&")
        };
        var i = n("jE6c"),
            a = {},
            r = function(e) {
                if (a[e]) return e;
                try {
                    return encodeURIComponent(e)
                } catch (e) {
                    return ""
                }
            },
            o = function(e) {
                try {
                    return decodeURIComponent(e)
                } catch (t) {
                    return a[e] = 1, e
                }
            }
    },
    cLcH: function(e, t, n) {
        "use strict";
        var i = window,
            a = i.Groups,
            r = i.Friends,
            o = i.FeedAssistanceStats,
            s = i.hasClass,
            l = (i.each, i.geByClass1),
            c = i.nav,
            u = i.domCA,
            d = i.domPN,
            f = i.page,
            h = i.ge,
            p = i.addEvent,
            A = i.attr,
            m = i.escapeAttr;
        window.FeedAssistanceExploreBait = {
            onSubscribeLinkClick: function(e, t, n, i, c, d) {
                var f = s(e, _),
                    h = f ? i : n,
                    p = f ? getLang(w) : getLang(b),
                    C = !f,
                    M = l(y, e),
                    T = (D = e, I = u(D, S), intval(domData(I, "block-id")));
                var D, I;
                M && (toggleClass(v, M, C), toggleClass(g, M, !C));
                A(e, "aria-label", m(p)), toggleClass(_, e, C), c === E ? function(e, t, n, i) {
                    var r = n ? a.leave : a.enter,
                        s = n ? o.EVENTS.SUB_EVENT_EXPLORE_BAIT_UNSUBSCRIBE : o.EVENTS.SUB_EVENT_EXPLORE_BAIT_SUBSCRIBE;
                    i && P(s), r.call(a, e, t, k)
                }(t, h, f, d) : function(e, t, n, i, a) {
                    var s = n ? r.decline : r.accept,
                        l = n ? o.EVENTS.SUB_EVENT_EXPLORE_BAIT_UNSUBSCRIBE : o.EVENTS.SUB_EVENT_EXPLORE_BAIT_SUBSCRIBE;
                    a && P(l), s.call(r, e, t, k, i)
                }(t, h, f, T, d);
                return !1
            }
        }, o.registerTrackingCls("post_exploreBait"), o.onStartViewElement(function(e) {
            if (o.getElementType(e) === o.BLOCKS.BLOCK_TYPE_EXPLORE_BAIT) {
                if (e._exploreBaitClickHandlerAdded) return;
                C = !0, p(e, "click", function(e) {
                    ! function(e) {
                        var t = e.target,
                            n = !0,
                            i = !1,
                            a = void 0;
                        try {
                            for (var r, o = T[Symbol.iterator](); !(n = (r = o.next()).done); n = !0) {
                                if (!0 === r.value.call(null, t)) return
                            }
                        } catch (e) {
                            i = !0, a = e
                        } finally {
                            try {
                                n || null == o.return || o.return()
                            } finally {
                                if (i) throw a
                            }
                        }
                    }(e)
                }), e._exploreBaitClickHandlerAdded = !0
            }
        }), c.onBeforeGo(function(e) {
            if (!C) return void(M = !1);
            if (! function(e) {
                    return e.tagName && "explore-bait" === domData(e, "post-type")
                }(e)) return;
            M = s("item_replies", e),
                function(e) {
                    for (var t = 0, n = ["pi_text_more", "wi_date", "pi_text", "i_replies", "v_replies", "item_replies"]; t < n.length; t++) {
                        if (s(n[t], e)) return P(o.EVENTS.SUB_EVENT_EXPLORE_BAIT_OPENED), !0
                    }
                }(e)
        }), f.onChange(function() {
            if (!C) return;
            M && (e = h("nc_submit"), p(e, "click", function() {
                P(o.EVENTS.SUB_EVENT_EXPLORE_BAIT_COMMENT)
            }));
            var e
        });
        var _ = "post__subscribeBtn_unsubscribe",
            v = "post__subscribeBtnIcon_unsubscribe",
            g = "post__subscribeBtnIcon_subscribe",
            y = "post__subscribeBtnIcon",
            b = "mobile_groups_you_are_in_public",
            w = "mobile_groups_public_subscribe",
            k = "feed",
            E = "group",
            S = ".post_exploreBait",
            C = !1,
            M = !1;

        function P(e) {
            o.dispatchEvent({
                type: o.EVENTS.EVENT_EXPLORE_BAIT,
                data: o.serializeEventData(o.EVENTS.EVENT_EXPLORE_BAIT_SUB, e)
            })
        }
        var T = [function(e) {
            if ("A" !== e.tagName || !s("item_sel", e)) return s("item_like", e) ? (P(o.EVENTS.SUB_EVENT_EXPLORE_BAIT_LIKE), !0) : (s("i_like", e) || s("v_like", e)) && !s("item_sel", d(e)) ? (P(o.EVENTS.SUB_EVENT_EXPLORE_BAIT_LIKE), !0) : void 0
        }, function(e) {
            if (domData(e, "post-owner-type")) return P("user" === domData(e, "post-owner-type") ? o.EVENTS.SUB_EVENT_EXPLORE_BAIT_OPEN_USER : o.EVENTS.SUB_EVENT_EXPLORE_BAIT_OPEN_GROUP), !0
        }, function(e) {
            var t = {
                report: o.EVENTS.SUB_EVENT_EXPLORE_BAIT_REPORT,
                hide: o.EVENTS.SUB_EVENT_EXPLORE_BAIT_HIDE
            }[domData(e, "post-action")];
            if (t) return P(t), !0
        }]
    },
    ciqL: function(e, t, n) {
        "use strict";
        var i = window.geByClass1,
            a = {
                show: function(e, t) {
                    window.grecaptcha ? grecaptcha.reset() : (window.recaptchaCallback = function() {
                        a.onCallback(e)
                    }, document.body.appendChild(ce("script", {
                        type: "text/javascript",
                        src: "https://www.google.com/recaptcha/api.js?onload=recaptchaCallback&render=explicit&hl=" + t
                    })))
                },
                onResponse: function(e) {
                    ge("field_recaptcha").value = e, ge("recaptcha_form").submit()
                },
                onCallback: function(e) {
                    if (grecaptcha && e) {
                        var t = i("recaptcha_box"),
                            n = i("recaptcha", t);
                        n && (val(n, ""), grecaptcha.render(n, {
                            sitekey: e,
                            callback: a.onResponse
                        }))
                    }
                }
            };
        window.ReCaptcha = a
    },
    d124: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("wMVj")) && i.__esModule ? i : {
            default: i
        };
        var r = !1,
            o = {
                start: function(e, t, n) {
                    "%page_id%" !== e && (r || (r = !0, setTimeout(function() {
                        var i = {
                            headers: {
                                "X-AppShell-Start-Id": e,
                                "X-AppShell-Start": t
                            },
                            zProcess: function() {}
                        };
                        n && "%page_path%" !== n ? a.default.go(n, {
                            push_only: !0,
                            replace: !0
                        }, i) : a.default.go(a.default.cur, null, i)
                    })))
                }
            };
        t.default = o
    },
    d8Vu: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.Stickers = void 0;
        var i = {},
            a = function(e, t, n, a) {
                delete i[t], 1 === a ? Emoji.favorite.addFavoriteSticker(e, t, n) : -1 === a && Emoji.favorite.deleteFavoriteSticker(e, t, n)
            };
        var r = {
            toggleFavorite: function(e, t, n) {
                if (t && t.stopPropagation(), !hasClass(e, "on") && Emoji.stickers[Emoji.TAB_FAVORITE_STICKERS].stickers.length >= Emoji.favoriteLimit && !Emoji.favoriteLimitNoticed) {
                    var r = langStr(getLang("purchases_stickers_favorite_limit_notice"), "%s", Emoji.favoriteLimit);
                    return setTimeout(showFastBox(getLang("global_error"), r).hide, 3e3), ajax.post("stickers.php", {
                        act: "favorite_limit_noticed",
                        value: 1
                    }), Emoji.favoriteLimitNoticed = !0, !1
                }
                var o = attr(e, "data-sticker-id"),
                    s = attr(e, "data-hash");
                return !(!o || !s) && (!i[o] && (i[o] = 1, toggleClass(e, "on"), void ajax.post("/stickers.php", {
                    act: "toggle_favorite",
                    sticker_id: o,
                    hash: s
                }, {
                    onDone: a.pbind(n, o, e)
                })))
            },
            getStickerUrl: function(e, t) {
                var n = {
                    id: e,
                    size: t
                };
                return window.isMVK ? rs(window.store.stickers.url_template, n) : getTemplate("stickers_sticker_url", n)
            }
        };
        t.Stickers = r
    },
    dVvW: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.uMailWrite_Reply = M, t.uMailWrite_Attachments = P, t.uMailWrite_ToBottomInner = S, t.default = void 0;
        var i = u(n("bZ/P")),
            a = (u(n("TYsd")), u(n("Mc5h"))),
            r = u(n("9y81")),
            o = u(n("AXyT")),
            s = u(n("gy8s")),
            l = (u(n("29dZ")), u(n("Y6JH"))),
            c = n("/Id8");
        u(n("BoyB"));

        function u(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }

        function d() {
            var e = k(['\n    <input type="hidden" name="attached_messages" value="', '" />\n  ']);
            return d = function() {
                return e
            }, e
        }

        function f() {
            var e = k(['\n    <div class="uMailWrite__attachedMsgs">\n      ', "\n      ", "\n      ", '\n      <div class="uMailWrite__attachedMsgsText">', "</div>\n    </div>\n  "]);
            return f = function() {
                return e
            }, e
        }

        function h() {
            var e = k(['\n    <div class="', ' _preventMenuOpen">\n      ', "\n      ", "\n    </div>\n  "]);
            return h = function() {
                return e
            }, e
        }

        function p() {
            var e = k(['\n    <div class="', '">\n      ', "\n      ", "\n      ", "\n    </div>\n  "]);
            return p = function() {
                return e
            }, e
        }

        function A() {
            var e = k(['\n    <div class="uMailWrite__templates">\n      <div class="uMailWrite__templatesHeader">\n        ', '\n        <a class="uMailWrite__templatesAdd" href="', '" ', ">\n          ", '\n        </a>\n      </div>\n      <div class="uMailWrite__templatesBody ScrollView"></div>\n    </div>\n  ']);
            return A = function() {
                return e
            }, e
        }

        function m() {
            var e = k(['\n    <div class="uMailWrite__buttonKeyboardIcon"></div>\n  ']);
            return m = function() {
                return e
            }, e
        }

        function _() {
            var e = k(['\n    <div class="uMailWrite__keyboard ScrollView">\n\n    </div>\n  ']);
            return _ = function() {
                return e
            }, e
        }

        function v() {
            var e = k(['\n    <div class="uMailWrite__SVGIcon uMailWrite__SVGIcon_', '"></div>\n  ']);
            return v = function() {
                return e
            }, e
        }

        function g() {
            var e = k(['\n    <div class="uMailWrite__main">\n      <div class="uMailWrite__button uMailWrite__buttonAttach">', '</div>\n      <div class="uMailWrite__button uMailWrite__buttonKeyboard" ', ">", '</div>\n      <div class="uMailWrite__button uMailWrite__buttonStickers" ', ">", "", '</div>\n      <button class="', '" type="submit" ', ">\n        ", "\n        ", "\n        ", "\n        ", "\n        ", "\n        ", "\n        ", '\n      </button>\n      <div class="uMailWrite__textareaContainer">\n        <textarea\n          class="uMailWrite__textarea"\n          name="message"\n          placeholder="', '"\n          maxlength="4096"\n          ', "\n          ", "\n          ", "\n          ", "\n          ", "\n          ", "\n          ", '\n        ></textarea>\n        <div class="uMailWrite__textareaGhost"></div>\n      </div>\n    </div>\n  ']);
            return g = function() {
                return e
            }, e
        }

        function y() {
            var e = k(["\n    ", "\n    ", "\n  "]);
            return y = function() {
                return e
            }, e
        }

        function b() {
            var e = k(['\n    <form\n      class="', '"\n      method="POST"\n      action="/mail?act=send&to=', "&hash=", "&from=dialog", '"\n      ', '\n    >\n      <div class="uMailWrite__toBottom" ', ">", "</div>\n      ", "\n      ", "\n      ", "\n      ", "\n      ", "\n      ", "\n    </form>\n  "]);
            return b = function() {
                return e
            }, e
        }

        function w() {
            var e = k(['\n      <div class="uMailWrite uMailWrite_unableToWrite">\n        ', '\n        <div class="uMailWrite__unableToWriteText">\n          ', "\n        </div>\n      </div>\n    "]);
            return w = function() {
                return e
            }, e
        }

        function k(e, t) {
            return t || (t = e.slice(0)), Object.freeze(Object.defineProperties(e, {
                raw: {
                    value: Object.freeze(t)
                }
            }))
        }
        var E = function() {
            var e = window.lang,
                t = store.mail,
                n = t.cur.peerId;
            if (!n) return '<form class="uMailWrite"></form>';
            var o = t.peers[n];
            if (o.unableToWrite) {
                if (o.isChannel) return "";
                var c = o.kickedMessage || e.mobile_msg_mail_privacy_error,
                    u = (0, r.default)({
                        mix: "uMailWrite__unableToWriteIcon",
                        icon: "warning"
                    });
                return i.default.html(w(), u, c)
            }
            var d = i.default.onSubmit("uMailWrite._onSubmit", "event", "this"),
                f = i.default.onClick("uMailWrite.onToBottomClick"),
                h = (0, a.default)({
                    mix: "uMailWrite__popupStickers _preventMenuOpen",
                    inner: ""
                }),
                p = M(null),
                v = P(n),
                y = function(e) {
                    var t = window.lang,
                        n = store.mail,
                        a = n.cur,
                        o = n.queue,
                        c = ("/attachments?act=stickers&target=mail".concat(e), i.default.onMouseDown("uMailWrite._onStickersClick", "event")),
                        u = i.default.onMouseDown("uMailWrite._onKeyboardClick", "event"),
                        d = n.peers[e],
                        f = a.groupId,
                        h = Math.abs(f),
                        p = f ? "&community=".concat(h) : "",
                        A = (0, s.default)({
                            icon: "attach",
                            name: "uMailWrite_attachments",
                            position: "bottomLeft",
                            items: [{
                                text: a.inlineUploadHTML.replace(/mail\d+/g, "mail".concat(e)),
                                icon: (0, l.default)("mail-attachments", "camera_24")
                            }, {
                                text: t.mobile_attachments_add_photo_vk,
                                url: "/attachments?act=choose_photo&target=mail".concat(e).concat(p),
                                icon: (0, l.default)("mail-attachments", "gallery_24")
                            }, {
                                text: t.mobile_attachments_add_video,
                                url: "/attachments?act=choose_video&target=mail".concat(e).concat(p),
                                icon: (0, l.default)("mail-attachments", "video_24")
                            }, {
                                text: t.mobile_attachments_add_audio,
                                url: "/attachments?act=choose_audio&target=mail".concat(e).concat(p),
                                icon: (0, l.default)("mail-attachments", "music_24")
                            }, {
                                text: t.mobile_attachments_add_doc,
                                url: "/attachments?act=choose_doc&target=mail".concat(e).concat(p),
                                icon: (0, l.default)("mail-attachments", "document_24")
                            }, d.canSendGift ? {
                                text: t.mobile_attachments_add_gift,
                                url: "/gifts".concat(e, "?act=send&from=mail&ref=media_selector"),
                                icon: (0, l.default)("mail-attachments", "gift_24")
                            } : null, d.canAttachMoney ? {
                                text: t.mobile_attachments_add_money,
                                url: "/attachments?act=attach_money&target=mail".concat(e).concat(p),
                                icon: (0, l.default)("mail-attachments", "money_transfer_24")
                            } : null, d.canAttachPoll ? {
                                text: t.mobile_attachments_add_poll,
                                url: "/attachments?act=attach_poll&target=mail".concat(e).concat(p),
                                icon: (0, l.default)("mail-attachments", "poll_24"),
                                mix: "uMailWrite__pollUnfoldItem"
                            } : null]
                        }),
                        _ = i.default.onKeyUp("uMailWrite._onKeyUp"),
                        v = i.default.onInput("uMailWrite._onInput", "event", "this"),
                        y = i.default.onKeyDown("uMailWrite._onKeyDown", "event", "this"),
                        b = i.default.onFocus("uMailWrite._onFocus", "event", "this"),
                        w = i.default.onBlur("uMailWrite._onBlur", "event", "this"),
                        k = i.default.onClick("uMailWrite._onClick", "event", "this"),
                        E = i.default.onTouchEnd("uMailWrite._onSendTouchEnd", "event", "this"),
                        S = (0, r.default)({
                            mix: "uMailWrite__buttonSendIcon",
                            icon: "send"
                        }),
                        M = (0, r.default)({
                            mix: "uMailWrite__buttonSendIcon",
                            icon: "send",
                            active: !0
                        }),
                        P = C("accept"),
                        T = C("remove"),
                        D = C("templates"),
                        I = C("templatesActive"),
                        x = (0, r.default)({
                            mix: "uMailWrite__buttonSendIcon",
                            icon: "spinner"
                        }),
                        O = (0, r.default)({
                            mix: "uMailWrite__buttonStickersIcon",
                            icon: "sticker"
                        }),
                        L = (0, r.default)({
                            mix: "uMailWrite__buttonStickersIcon",
                            icon: "sticker",
                            active: !0
                        }),
                        B = i.default.html(m()),
                        R = d.attachmentsHTML.length,
                        N = a.msgAttached[a.peerId],
                        j = N && N.length,
                        F = !!(o[a.peerId] || []).length,
                        H = i.default.class("uMailWrite__button", "uMailWrite__buttonSend", {
                            send: !0,
                            sendActive: !!(R > 150 || j),
                            loading: F
                        });
                    return i.default.html(g(), A, u, B, c, O, L, H, E, S, M, x, P, T, D, I, t.mobile_mail_message_placeholder, b, _, v, y, b, w, k)
                }(n),
                k = i.default.html(_()),
                E = function() {
                    var e = window.lang,
                        t = (0, r.default)({
                            icon: "plus"
                        }),
                        n = store.mail.cur.peerId,
                        a = store.mail.cur.communityParam,
                        o = "/mail?act=template&from=" + n + a,
                        s = i.default.onClick("uMailWrite.loadTemplatePage", "event", "this", o);
                    return i.default.html(A(), e.mobile_mail_templates_panel_title, o, s, t)
                }(),
                T = S(),
                D = i.default.class("uMailWrite", {
                    canAttachMoney: !!o.canAttachMoney,
                    canAttachPoll: !0
                });
            return i.default.html(b(), D, n, o.hashSend, t.cur.communityParam, d, f, T, p, v, y, h, k, E)
        };

        function S() {
            var e = store.mail,
                t = e.cur,
                n = e.peers,
                a = n[t.peerId] ? n[t.peerId].countUnread : null,
                s = a ? (0, o.default)({
                    mix: "uMailWrite__toBottomValue",
                    value: a
                }) : "",
                l = (0, r.default)({
                    mix: "uMailWrite__toBottomIcon",
                    icon: "arrowDown"
                });
            return i.default.html(y(), s, l)
        }

        function C(e) {
            return i.default.html(v(), e)
        }

        function M(e) {
            var t = store.mail.cur,
                n = store.mail.members,
                a = t.peerId,
                r = t.msgReply[a],
                o = null;
            r && (o = store.mail.forwards[r] || store.mail.msgs[r]);
            var s = "",
                l = "";
            if (o) {
                var u = (0, c.Msg__authorName)(n[o.authorId], a, t.userId);
                s = (0, c.Msg__reply)(o, u, e), l = '\n      <input type="hidden" name="attached_messages" value="'.concat(r, '" />\n      <input type="hidden" name="has_reply" value="true" />\n    '), t.editing && (l += '\n        <input type="hidden" name="mail_edit_attach_fwd" value="1" />\n      ')
            }
            var d = i.default.class("uMailWrite__reply", {
                    visible: !!s
                }),
                f = MailButton({
                    class: "uMailWrite__replyClose",
                    onClick: i.default.onClick("uMailWrite.onReplyClose")
                });
            return i.default.html(p(), d, s, f, l)
        }

        function P(e) {
            var t = store.mail,
                n = t.cur,
                a = t.peers[e].attachmentsHTML,
                o = i.default.class("uMailWrite__attachments", function(e, t, n) {
                    return t in e ? Object.defineProperty(e, t, {
                        value: n,
                        enumerable: !0,
                        configurable: !0,
                        writable: !0
                    }) : e[t] = n, e
                }({}, e, !0)),
                s = n.msgAttached[e] || [],
                l = s.length,
                c = "";
            l > 0 && (c = function(e, t) {
                var n = window.lang,
                    a = i.default.onClick("uMailWrite.onAttachedMsgsRemove"),
                    o = (0, r.default)({
                        mix: "uMailWrite__attachedMsgsIcon",
                        icon: "msgMini"
                    }),
                    s = (0, r.default)({
                        mix: "uMailWrite__attachedMsgsRemove",
                        icon: "close9",
                        attrs: a
                    }),
                    l = langNumeric(e, n.mobile_mail_messages),
                    c = function(e) {
                        return i.default.html(d(), e)
                    }(t);
                return i.default.html(f(), c, s, o, l)
            }(l, s.join(";")));
            return i.default.html(h(), o, c, a)
        }
        t.default = E
    },
    dbQR: function(e, t, n) {
        "use strict";
        var i, a = (i = n("SRbS")) && i.__esModule ? i : {
            default: i
        };

        function r(e, t) {
            return "".concat(e, '="').concat(t, '"')
        }

        function o(e) {
            return function() {
                for (var t = arguments.length, n = new Array(t), i = 0; i < t; i++) n[i] = arguments[i];
                return r(e, s(n))
            }
        }

        function s(e) {
            var t = e[0],
                n = e.slice(1).map(l).join(", ");
            return "".concat(t, "(").concat(n, ")")
        }

        function l(e) {
            return "number" == typeof e || "event" === e || "this" === e ? e : JSON.stringify(e).replace(/&/g, "&amp;").replace(/"/g, "&quot;").replace(/'/g, "&#39").replace(/</g, "&lt;").replace(/>/g, "&gt;")
        }
        Object.assign(a.default, {
            attr: r,
            onBlur: o("onblur"),
            onClick: o("onclick"),
            onFocus: o("onfocus"),
            onInput: o("oninput"),
            onKeyDown: o("onkeydown"),
            onKeyPress: o("onkeypress"),
            onKeyUp: o("onkeyup"),
            onMouseDown: o("onmousedown"),
            onMouseUp: o("onmouseup"),
            onScroll: o("onscroll"),
            onSubmit: o("onsubmit"),
            onTouchEnd: o("ontouchend"),
            onTouchMove: o("ontouchmove"),
            onTouchStart: o("ontouchstart"),
            onWheel: o("onwheel"),
            onChange: o("onchange")
        })
    },
    eFmH: function(e, t, n) {
        "use strict";
        var i, a = (i = n("jk6M")) && i.__esModule ? i : {
            default: i
        };

        function r(e, t, n) {
            if (a.default.wkwebview) {
                attr(t, "onclick", ""), attr(t, "href", "vk://vk.com/write" + (2e9 + e));
                var i = new Event("click");
                return t.dispatchEvent(i), void setTimeout(function() {
                    attr(t, "href", "/mail?act=show&chat=" + e), t.textContent = n
                })
            }
            a.default.android ? location.href = "https://vk.com/write" + (2e9 + e) : a.default.ios ? (attr(t, "onclick", ""), attr(t, "href", "/mail?act=show&chat=" + e), t.textContent = n, location.href = "vk://vk.com/write" + (2e9 + e)) : location.href = "/mail?act=show&chat=" + e
        }
        window.ChatPreview = {
            join: function(e, t, n) {
                return ajax.post(e, {}, {
                    onDone: function(e) {
                        r(e, t, n)
                    }
                }), !1
            },
            open: function(e, t, n) {
                return setTimeout(function() {
                    r(e, t, n)
                }), !1
            }
        }
    },
    eR1x: function(e, t, n) {
        "use strict";
        var i = n("UxAg"),
            a = function(e) {
                if (e && e.__esModule) return e;
                var t = r();
                if (t && t.has(e)) return t.get(e);
                var n = {};
                if (null != e) {
                    var i = Object.defineProperty && Object.getOwnPropertyDescriptor;
                    for (var a in e)
                        if (Object.prototype.hasOwnProperty.call(e, a)) {
                            var o = i ? Object.getOwnPropertyDescriptor(e, a) : null;
                            o && (o.get || o.set) ? Object.defineProperty(n, a, o) : n[a] = e[a]
                        }
                }
                n.default = e, t && t.set(e, n);
                return n
            }(n("NSb7"));

        function r() {
            if ("function" != typeof WeakMap) return null;
            var e = new WeakMap;
            return r = function() {
                return e
            }, e
        }
        Object.assign(a.default, {
            setTyping: function(e, t) {
                var n = "string" == typeof e ? (0, i.$)(".typing_id_".concat(e)) : e,
                    r = n.$(".typing__names");
                n.classList.toggle("typing_empty", (0, a.TypingIsEmpty)(t.typingCount)), r.innerHTML = (0, a.TypingRenderNames)(t)
            },
            getElem: function(e) {
                return (0, i.$)(".typing_id_".concat(e))
            }
        })
    },
    eTng: function(e, t, n) {
        "use strict";

        function i(e, t) {
            return function(e) {
                if (Array.isArray(e)) return e
            }(e) || function(e, t) {
                if (!(Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e))) return;
                var n = [],
                    i = !0,
                    a = !1,
                    r = void 0;
                try {
                    for (var o, s = e[Symbol.iterator](); !(i = (o = s.next()).done) && (n.push(o.value), !t || n.length !== t); i = !0);
                } catch (e) {
                    a = !0, r = e
                } finally {
                    try {
                        i || null == s.return || s.return()
                    } finally {
                        if (a) throw r
                    }
                }
                return n
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance")
            }()
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.parseFwd = s, t.convertKludgesToAttaches = function(e, t) {
            var n = [];
            e.fwd_count ? n.push({
                type: "mail",
                id: -t,
                object: {
                    fwd_count: e.fwd_count
                }
            }) : e.fwd && n.push({
                type: "mail",
                id: -t,
                object: {
                    fwd_count: s(e.fwd).length
                }
            });
            for (var i = 1; e["attach" + i + "_type"]; ++i) "call" === e["attach" + i + "_type"] ? n.push({
                type: e["attach" + i + "_type"],
                id: e["attach" + i],
                initiatorId: a(e["attach" + i + "_call_initiator_id"]),
                state: e["attach" + i + "_call_state"],
                duration: a(e["attach" + i + "_call_duration"]),
                receiverId: a(e["attach" + i + "_call_receiver_id"])
            }) : n.push({
                type: e["attach" + i + "_type"],
                id: e["attach" + i],
                kind: e["attach" + i + "_kind"],
                productId: e["attach" + i + "_product_id"]
            });
            e.geo && n.push({
                type: "geo",
                id: e.geo
            });
            return n
        }, t.isReservedPeer = function(e) {
            if (0 == e) return !0;
            return !1
        }, t.isUserPeer = function(e) {
            return e > 0 && e < 2e9
        }, t.isChatPeer = function(e) {
            return e > 2e9
        }, t.convertAttachesToPhpMedia = function(e) {
            return e.map(function(e) {
                var t = "audiomsg" === e[2] ? "audio_message" : e[2];
                return "".concat(e[0], ":").concat(e[1], ":").concat(t)
            }).join(",")
        };
        var a = window.intval;

        function r(e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : [],
                n = i(e.split("_"), 2);
            return [n[0], n[1], t]
        }
        var o = {};

        function s(e) {
            if (o[e]) return o[e];
            for (var t = e ? e.length : 0, n = [], a = [], s = "", l = 0; l < t; l++) {
                var c = e[l],
                    u = c.charCodeAt(0);
                u >= 48 && u <= 57 || "_" === c || "-" === c ? s += c : "(" !== c && ")" !== c && ":" !== c && "," !== c || ("" !== s && (a.push(s), n.push("id"), s = ""), a.push(c), n.push(c))
            }
            s.length > 0 && (a.push(s), n.push("id"));
            var d = function e(t, n) {
                    var a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0,
                        o = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 0;
                    if (o > 50) return [
                        [], t.length
                    ];
                    for (var s = [], l = ""; a < t.length;) {
                        var c = t[a];
                        if ("id" === c) l = n[a];
                        else if ("," === c && l) s.push(r(l)), l = "";
                        else if ("(" === c) {
                            var u = i(e(t, n, a + 1, o + 1), 2),
                                d = u[0];
                            a = u[1], s.push(r(l, d)), l = ""
                        } else if (")" === c) return "" !== l && s.push(r(l)), [s, a];
                        a++
                    }
                    return l && s.push(r(l)), [s, a]
                }(n, a),
                f = i(d, 1)[0];
            return Object.keys(o).length > 300 && (o = {}), o[e] = f, f
        }
    },
    eZEc: function(e, t, n) {
        "use strict";
        var i;
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var a = ((i = n("Zw+j")) && i.__esModule ? i : {
            default: i
        }).default;
        t.default = a
    },
    el8Q: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i = o(n("29dZ")),
            a = o(n("r/ag")),
            r = o(n("p5n7"));

        function o(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        var s = function(e) {
            return (0, a.default)({
                class: "CartQtyPopup",
                content: [{
                    inner: [{
                        class: "CartQtyPopup__message",
                        inner: [{
                            class: "CartQtyPopup__messageTitle",
                            inner: lang.mobile_market_cart_change_quantity_title
                        }, {
                            class: "CartQtyPopup__messageText",
                            inner: lang.mobile_market_cart_change_quantity_text
                        }]
                    }, {
                        tag: "table",
                        attrs: {
                            cellpadding: 0,
                            cellspacing: 0,
                            border: 0
                        },
                        inner: {
                            tag: "tr",
                            inner: [{
                                tag: "td",
                                class: "CartQtyPopup__inputWrapper",
                                inner: (0, r.default)({
                                    value: e.quantity,
                                    on_change: ["Cart.view.setQuantity", "this"],
                                    on_key_down: "void",
                                    maxlength: 10,
                                    type: "number"
                                })
                            }, {
                                tag: "td",
                                inner: (0, i.default)({
                                    inner: lang.mobile_market_cart_change_quantity_button,
                                    on_click: "Cart.view.changeQuantity",
                                    size: "large",
                                    attrs: {
                                        "data-item-id": e.id
                                    }
                                })
                            }]
                        }
                    }]
                }]
            })
        };
        t.default = s
    },
    eoxF: function(e, t, n) {
        "use strict";
        var i = window,
            a = i.hide,
            r = i.ge,
            o = i.ce,
            s = i.append,
            l = i.geByClass1,
            c = i.val,
            u = i.addClass,
            d = i.show,
            f = i.obj2qs,
            h = i.unescapeAttr,
            p = i.elfocus,
            A = i.lockButton,
            m = i.unlockButton,
            _ = i.extend,
            v = i.scrollToEl,
            g = i.remove,
            y = i.gpeByTag,
            b = i.each,
            w = i.removeClass,
            k = window.geo,
            E = window.ajax,
            S = window.nav,
            C = function() {
                var e = null,
                    t = !1,
                    n = !1,
                    i = {},
                    M = [],
                    P = 0,
                    T = null,
                    D = "",
                    I = "";

                function x(e, t) {
                    return !t && H(e)
                }

                function O(e) {
                    n = !1;
                    var i = r("medias_map"),
                        a = r("attached_wrap");
                    i || (i = o("div", {
                        id: "medias_map",
                        className: "pi_medias"
                    }), s(i, a));
                    var f = +e[1] || 0,
                        h = e[3] || "",
                        p = e[4] || "",
                        A = e[5] || "",
                        m = (+e[6].lat || 0) + "_" + (+e[6].lng || 0),
                        _ = l("medias_map", i),
                        v = '<div class="medias_map_close" onclick="checkin.remove();"><i class="i_close">&nbsp;</i></div><div class="medias_map_label" onclick="checkin.changePlace();">' + h + (A ? ", " + A : p ? ", " + p : "") + "</div>",
                        g = '<input type="hidden" name="place_id" value="' + f + '"><input type="hidden" name="place" value="' + m + '">';
                    _ ? c(_, v + g) : c(i, v = '<div class="medias_map">' + v + g + "</div>");
                    u("cp_geo_btn_sel", "geo_btn"), t = !0, d(i)
                }

                function L(t) {
                    return H(e)
                }

                function B() {
                    c("place_add_box", ""), a("place_add_box"), d("places_box")
                }

                function R(t, n) {
                    N();
                    var a = i[n];
                    a && (e = {
                        latitude: +a[6].lat || 0,
                        longitude: +a[6].lng || 0
                    }, n ? O(a) : j(e, a))
                }

                function N(e) {
                    if (!T) return !0;
                    c("m", T), T = null, v(l("create_post_extra", "mcont"));
                    var t = S.path + (S.params ? "?" + S.params : "");
                    return S.go(t, null, {
                        push_only: !0,
                        no_push: e
                    }), !1
                }

                function j(e, i) {
                    n = !0;
                    var a = r("medias_map"),
                        s = r("attached_wrap");
                    a || (a = o("div", {
                        id: "medias_map",
                        className: "pi_medias"
                    }), s.appendChild(a));
                    var f = e.latitude,
                        h = e.longitude,
                        p = (window.devicePixelRatio, i && i[4] || !1),
                        A = l("medias_map", a),
                        m = p ? '<div class="medias_map_close" onclick="checkin.remove();"><i class="i_close">&nbsp;</i></div><div class="medias_map_label" onclick="checkin.changePlace();">' + p + "</div>" : "",
                        _ = '<input type="hidden" name="map" value="' + (f + "_" + h + "_0") + '">';
                    A ? c(A, m + "" + _) : c(a, '<div class="medias_map">' + m + _ + "</div>");
                    t = !0, u("cp_geo_btn_sel", "geo_btn"), d(a)
                }

                function F() {
                    e = null, i = {}, M = [], P = 0, E.post(I, {
                        _ajax: 1
                    }), g("medias_map")
                }

                function H(e) {
                    var t = window.al;
                    g("feed_extra_field");
                    var n = Math.round(1e8 * e.latitude) / 1e8,
                        i = Math.round(1e8 * e.longitude) / 1e8,
                        a = y("form", "geo_btn"),
                        r = o("input", {
                            id: "feed_extra_field",
                            type: "hidden",
                            name: "add_place",
                            value: n + "," + i
                        });
                    if (!a) return S.go(S.path + "?act=places&lat=" + n + "&lng=" + i);
                    var l = !1;
                    return b(a, function(e, t) {
                        if ("submit" === t.type) return l = t, !1
                    }), l ? (s(r, a), window.al && t.ver ? S.go(l, null, {
                        removeAfterNextResponse: !1
                    }) : a.submit()) : void 0
                }

                function V(t) {
                    t && t.coords && x(e = {
                        latitude: +t.coords.latitude || 0,
                        longitude: +t.coords.longitude || 0
                    })
                }

                function U(e) {
                    C.remove(), a("geo_waiting")
                }
                return {
                    toggle: function() {
                        t ? C.remove() : C.add()
                    },
                    addNewPlace: function() {
                        var t = c("place_name_fld"),
                            n = c("place_address_fld");
                        return t ? (A("place_add_btn"), E.post("/places.php", {
                            _ajax: 1,
                            act: "add_place",
                            latitude: e.latitude,
                            longitude: e.longitude,
                            title: t,
                            address: n,
                            hash: D
                        }, {
                            onDone: function(e, t) {
                                if (m("place_add_btn"), e) {
                                    var n = {};
                                    n[e] = t, _(i, n), M.splice(M[0] ? 0 : 1, 0, e), B(), R(null, e)
                                }
                            },
                            onFail: function() {
                                m("place_add_btn");
                                var e = Array.prototype.slice.call(arguments),
                                    t = e.shift(),
                                    n = r("place_add_form");
                                switch (t) {
                                    case 2:
                                        n && n.submit()
                                }
                            }
                        }), !1) : (p("place_name_fld"), !1)
                    },
                    addPlaceShow: function(t, n) {
                        var i = window.lang,
                            r = "/places.php" + f({
                                act: "add_place",
                                latitude: e.latitude,
                                longitude: e.longitude,
                                hash: D
                            });
                        c("place_add_box", '<h4 class="sub_header">' + i.mobile_geo_new_place_header + '</h4><div class="form_item fi_fat"><form id="place_add_form" action="' + r + '" method="post"><dl class="fi_row"><dt class="fi_label">' + i.mobile_geo_place_name_label + '</dt><dd class="iwrap"><input type="text" class="textfield" id="place_name_fld" name="title" /></dd></dl><dl class="fi_row"><dt class="fi_label">' + i.mobile_geo_place_address_label + '</dt><dd class="iwrap"><input type="text" class="textfield" id="place_address_fld" name="address" /></dd></dl><dl class="fi_row"><dd><input class="button" type="submit" id="place_add_btn" value="' + i.mobile_geo_place_add_btn + '" onclick="return checkin.addNewPlace(this);" /><a class="near_btn" onclick="checkin.addPlaceCancel(); return false;">' + i.mobile_cancel + "</a></dd></dl></form></div>"), c("place_name_fld", h(t) || ""), c("place_address_fld", h(n) || ""), a("places_box"), d("place_add_box"), p(t ? "place_address_fld" : "place_name_fld")
                    },
                    addPlaceCancel: B,
                    selectPlace: R,
                    changePlace: L,
                    back: N,
                    refreshCurrentPosition: function() {
                        k.getCurrentPosition(V, U)
                    },
                    getCurrentAddress: function() {
                        return i[0] && i[0][5] || ""
                    },
                    savePlaces: function(e) {
                        _(i, e)
                    },
                    add: function(n) {
                        if (!n && t) return L();
                        n && (n.latitude || n.longitude) && n.place ? (e = {
                            latitude: +n.latitude || 0,
                            longitude: +n.longitude || 0
                        }, n.place[1] ? O(n.place) : j(e, n.place), x(e, !0)) : (k.getCurrentPosition(V, U), d("geo_waiting"))
                    },
                    add_place: function(n) {
                        if (!n && t) return L();
                        n && (n.latitude || n.longitude) && n.place ? (e = {
                            latitude: +n.latitude || 0,
                            longitude: +n.longitude || 0
                        }, n.place[1] ? O(n.place) : j(e, n.place), x(e, !0)) : (k.getCurrentPosition(V, U), d("geo_waiting"))
                    },
                    remove: function() {
                        t = !1, w("cp_geo_btn_sel", "geo_btn"), F()
                    },
                    stash: function(a) {
                        if (!a) return [e, t, n, i, M, P, T];
                        e = a[0], t = a[1], n = a[2], i = a[3], M = a[4], P = a[5], T = a[6]
                    },
                    init: function(r, o, s) {
                        return a("geo_waiting"), e = null, t = !1, n = !1, i = {}, M = [], P = 0, T = null, D = o || "", I = s || "", r && C.add(r), k.init()
                    }
                }
            }();
        window.checkin = C
    },
    eyw1: function(e, t, n) {
        "use strict";
        var i = window,
            a = i.ajax,
            r = i.obj2qs,
            o = function() {
                var e = "/club",
                    t = "enter",
                    n = "leave",
                    i = null;

                function o(t, n, i, o, s, l) {
                    var c = e + n + r({
                        act: t,
                        hash: i,
                        id: n,
                        from: o
                    });
                    a.post(c, {
                        _ajax: 1
                    }, {
                        onDone: s,
                        onFail: l
                    })
                }
                return {
                    enter: function(e, n, a) {
                        var r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : i,
                            s = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : i;
                        o(t, e, n, a, r, s)
                    },
                    leave: function(e, t, a) {
                        var r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : i,
                            s = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : i;
                        o(n, e, t, a, r, s)
                    }
                }
            }();
        window.Groups = o
    },
    f01n: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.deleteEvent = function(e) {
            var t = a(e, 2)[1];
            return {
                type: r,
                localId: t
            }
        }, t.replaceFlagsEvent = function(e) {
            var t = a(e, 4),
                n = t[1],
                i = t[2],
                r = t[3];
            return {
                type: s,
                messageId: n,
                mask: i,
                peerId: r
            }
        }, t.setFlagsEvent = function(e) {
            var t = a(e, 4),
                n = t[1],
                i = t[2],
                r = t[3];
            return {
                type: o,
                messageId: n,
                flags: i,
                peerId: r
            }
        }, t.resetFlagsEvent = function(e) {
            var t = a(e, 4),
                n = t[1],
                i = t[2],
                r = t[3];
            return {
                type: l,
                messageId: n,
                flags: i,
                peerId: r
            }
        }, t.addMessageEvent = V, t.editMessageEvent = function(e) {
            var t = V(e);
            return t.type = B, t
        }, t.replaceMessageEvent = function(e) {
            var t = V(e);
            return t.type = R, t
        }, t.editMessageLocallyEvent = function(e) {
            return extend({}, e, {
                type: B
            })
        }, t.readInboundEvent = function(e) {
            var t = a(e, 4),
                n = t[1],
                i = t[2],
                r = t[3];
            return {
                type: u,
                peerId: n,
                upToId: i,
                unread: r
            }
        }, t.readOutboundEvent = function(e) {
            var t = a(e, 4),
                n = t[1],
                i = t[2],
                r = t[3];
            return {
                type: d,
                peerId: n,
                upToId: i,
                unread: r
            }
        }, t.gotOnlineEvent = function(e) {
            var t = a(e, 4),
                n = t[1],
                i = t[2],
                r = t[3];
            return {
                type: f,
                userId: -n,
                platform: i,
                lastSeenTs: r
            }
        }, t.gotOfflineEvent = function(e) {
            var t = a(e, 4),
                n = t[1],
                i = t[2],
                r = t[3];
            return {
                type: h,
                userId: -n,
                reason: i,
                lastSeenTs: r
            }
        }, t.resetDirectoriesEvent = function(e) {
            var t = a(e, 4),
                n = t[1],
                i = t[2],
                r = t[3];
            return {
                type: w,
                peerId: n,
                mask: i,
                local: void 0 !== r && r
            }
        }, t.replaceDirectoriesEvent = function(e) {
            var t = a(e, 3),
                n = t[1],
                i = t[2];
            return {
                type: k,
                peerId: n,
                mask: i
            }
        }, t.setDirectoriesEvent = function(e) {
            var t = a(e, 4),
                n = t[1],
                i = t[2],
                r = t[3];
            return {
                type: E,
                peerId: n,
                mask: i,
                local: void 0 !== r && r
            }
        }, t.deleteDialogEvent = function(e) {
            var t = a(e, 3),
                n = t[1],
                i = t[2];
            return {
                type: L,
                peerId: n,
                localId: i
            }
        }, t.chatChangedEvent = function(e) {
            var t = a(e, 3),
                n = t[1],
                i = t[2];
            return {
                type: p,
                chatId: n,
                self: i
            }
        }, t.chatUpdatedEvent = function(e) {
            var t = a(e, 4),
                n = t[1],
                i = t[2],
                r = t[3];
            return {
                type: A,
                peerId: i,
                updateType: n,
                updateArg: r
            }
        }, t.typingEvent = function(e) {
            var t = a(e, 5),
                n = t[1],
                i = t[2],
                r = t[3],
                o = t[4];
            return {
                type: m,
                peerId: n,
                userIds: i,
                totalCount: r,
                ts: o
            }
        }, t.recordingAudioEvent = function(e) {
            var t = a(e, 5),
                n = t[1],
                i = t[2],
                r = t[3],
                o = t[4];
            return {
                type: _,
                peerId: n,
                userIds: i,
                totalCount: r,
                ts: o
            }
        }, t.videoCallEvent = function(e) {
            var t = a(e, 3),
                n = t[1],
                i = t[2];
            return {
                type: v,
                userId: n,
                callId: i
            }
        }, t.unreadCountEvent = function(e) {
            var t = a(e, 4),
                n = t[1],
                i = t[2],
                r = t[3];
            return {
                type: g,
                count: n,
                countNotMuted: i,
                showOnlyNotMuted: r
            }
        }, t.notifySettingsChangedEvent = function(e) {
            var t = a(e, 2)[1],
                n = void 0 === t ? {} : t;
            return {
                type: y,
                peerId: n.peer_id,
                sound: n.sound,
                disabledUntil: n.disabled_until
            }
        }, t.refreshMessageEvent = function(e) {
            var t = a(e, 2)[1],
                n = void 0 === t ? {} : t,
                i = V([!1, n.id, n.flags, n.peer_id, n.date, n.message, extend(n.kludges, {
                    title: n.title || ""
                }), {}, n.random_id, n.chat_local_id, n.update_time]);
            return i.type = B, i
        }, t.audioStartEvent = function(e) {
            var t = a(e, 2)[1],
                n = void 0 === t ? {} : t;
            return {
                type: N,
                uuid: n.uuid,
                deviceName: n.device_name || ""
            }
        }, t.emptyEvent = function(e) {
            return {
                type: b,
                params: e
            }
        }, t.transitionEvent = function(e) {
            return {
                type: M,
                state: e
            }
        }, t.resyncEvent = function() {
            return {
                type: S
            }
        }, t.refreshLpKeyEvent = function(e) {
            var t = a(e, 3),
                n = t[1],
                i = t[2];
            return {
                type: C,
                key: n,
                url: i
            }
        }, t.waitingForReconnectEvent = function(e) {
            var t = a(e, 2)[1];
            return {
                type: j,
                timeout: t
            }
        }, t.reconnectingEvent = function() {
            return {
                type: F
            }
        }, t.reconnectedEvent = function() {
            return {
                type: H
            }
        }, t.resetPeer = function() {
            var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0],
                t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
            return {
                type: P,
                cancelSearch: e,
                removeActivePeer: t
            }
        }, t.changePeer = function(e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1],
                n = arguments.length > 2 && void 0 !== arguments[2] && arguments[2],
                i = arguments.length > 3 && void 0 !== arguments[3] && arguments[3],
                a = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : "";
            return {
                type: D,
                peerId: e,
                msgid: t,
                forward: n,
                cancelSearch: i,
                entryPoint: a
            }
        }, t.changeTab = function(e) {
            return {
                type: I,
                tab: e
            }
        }, t.failedMessage = function(e, t, n) {
            return {
                type: x,
                message: t,
                peer: e,
                error: n
            }
        }, t.mutexEvent = function(e) {
            var t = a(e, 6),
                n = (t[0], t[1]),
                i = t[2],
                r = t[3],
                o = t[4],
                s = t[5];
            return {
                type: T,
                free: !!intval(n) || intval(o) === vk.id,
                resource: i,
                peerId: intval(r),
                who: intval(o),
                name: s
            }
        }, t.resendEvent = function(e, t) {
            return {
                type: O,
                message: t,
                peerId: e
            }
        }, t.MESSAGE_REQUEST_STATUS_NEW = t.MAIL_CHAT_UPDATE_TYPE_CONTACT_CONVERTED = t.MAIL_CHAT_UPDATE_TYPE_MESSAGE_REQUEST_CHANGED = t.MAIL_CHAT_UPDATE_TYPE_KEYBOARD_CHANGED = t.MAIL_CHAT_UPDATE_TYPE_BANNER_CHANGED = t.MAIL_CHAT_UPDATE_TYPE_ADMIN_KICKED = t.MAIL_CHAT_UPDATE_TYPE_USER_KICKED = t.MAIL_CHAT_UPDATE_TYPE_USER_LEFT = t.MAIL_CHAT_UPDATE_TYPE_USER_JOINED = t.MAIL_CHAT_UPDATE_TYPE_PINNED = t.MAIL_CHAT_UPDATE_TYPE_FLAGS_CHANGED = t.MAIL_CHAT_UPDATE_TYPE_ADMIN_GRANTED = t.MAIL_CHAT_UPDATE_TYPE_AVATAR_CHANGED = t.MAIL_CHAT_UPDATE_TYPE_TITLE_CHANGED = t.FOLDER_HAS_BANNER = t.FOLDER_UNRESPOND = t.FOLDER_IMPORTANT = t.FLAG_AUDIO_MESSAGE_LISTENED = t.FLAG_HAS_REPLY = t.FLAG_STEALTH = t.FLAG_MEDIA = t.FLAG_DELETED = t.FLAG_SPAM = t.FLAG_FRIENDS = t.FLAG_CHAT = t.FLAG_IMPORTANT = t.FLAG_OUTBOUND = t.FLAG_UNREAD = t.RECONNECTED = t.RECONNECTING = t.WAITING_FOR_RECONNECT = t.AUDIO_START = t.REPLACE_MESSAGE = t.EDIT_MESSAGE = t.DELETE_DIALOG = t.RESEND = t.FAILED_MESSAGE = t.CHANGE_TAB = t.CHANGE_PEER = t.MUTEX = t.RESET_PEER = t.TRANSITION = t.REFRESH_LP_KEY = t.RESYNC = t.SET_DIRECTORIES = t.REPLACE_DIRECTORIES = t.RESET_DIRECTORIES = t.EMPTY = t.NOTIFY_SETTINGS_CHANGED = t.UNREAD_COUNT = t.VIDEO_CALL = t.RECORDING_AUDIO = t.TYPING = t.CONVERSATION_UPDATED = t.CHAT_CHANGED = t.GOT_OFFLINE = t.GOT_ONLINE = t.READ_OUTBOUND = t.READ_INBOUND = t.ADD_MESSAGE = t.RESET_FLAGS = t.REPLACE_FLAGS = t.SET_FLAGS = t.DELETE = void 0;
        var i = n("eTng");

        function a(e, t) {
            return function(e) {
                if (Array.isArray(e)) return e
            }(e) || function(e, t) {
                if (!(Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e))) return;
                var n = [],
                    i = !0,
                    a = !1,
                    r = void 0;
                try {
                    for (var o, s = e[Symbol.iterator](); !(i = (o = s.next()).done) && (n.push(o.value), !t || n.length !== t); i = !0);
                } catch (e) {
                    a = !0, r = e
                } finally {
                    try {
                        i || null == s.return || s.return()
                    } finally {
                        if (a) throw r
                    }
                }
                return n
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance")
            }()
        }
        var r = "event_delete";
        t.DELETE = r;
        var o = "event_set_flags";
        t.SET_FLAGS = o;
        var s = "event_replace_flags";
        t.REPLACE_FLAGS = s;
        var l = "event_reset_flags";
        t.RESET_FLAGS = l;
        var c = "event_add_message";
        t.ADD_MESSAGE = c;
        var u = "event_read_inbound";
        t.READ_INBOUND = u;
        var d = "event_read_outbound";
        t.READ_OUTBOUND = d;
        var f = "event_got_online";
        t.GOT_ONLINE = f;
        var h = "event_got_offline";
        t.GOT_OFFLINE = h;
        var p = "event_chat_changed";
        t.CHAT_CHANGED = p;
        var A = "event_chat_updated";
        t.CONVERSATION_UPDATED = A;
        var m = "event_typing";
        t.TYPING = m;
        var _ = "event_recoding_audio";
        t.RECORDING_AUDIO = _;
        var v = "event_video_call";
        t.VIDEO_CALL = v;
        var g = "event_unread_count";
        t.UNREAD_COUNT = g;
        var y = "event_notify_settings_changed";
        t.NOTIFY_SETTINGS_CHANGED = y;
        var b = "event_empty";
        t.EMPTY = b;
        var w = "event_reset_directories";
        t.RESET_DIRECTORIES = w;
        var k = "event_replace_directories";
        t.REPLACE_DIRECTORIES = k;
        var E = "event_set_directories";
        t.SET_DIRECTORIES = E;
        var S = "event_resync";
        t.RESYNC = S;
        var C = "event_refresh_lp_key";
        t.REFRESH_LP_KEY = C;
        var M = "transition_event";
        t.TRANSITION = M;
        var P = "reset_peer";
        t.RESET_PEER = P;
        var T = "mutex";
        t.MUTEX = T;
        var D = "change_peer";
        t.CHANGE_PEER = D;
        var I = "event_change_tab";
        t.CHANGE_TAB = I;
        var x = "event_failed_message";
        t.FAILED_MESSAGE = x;
        var O = "event_resend";
        t.RESEND = O;
        var L = "event_delete_dialog";
        t.DELETE_DIALOG = L;
        var B = "event_edit_message";
        t.EDIT_MESSAGE = B;
        var R = "event_replace_message";
        t.REPLACE_MESSAGE = R;
        var N = "event_audio_start";
        t.AUDIO_START = N;
        var j = "event_waiting_for_reconnect";
        t.WAITING_FOR_RECONNECT = j;
        var F = "event_reconnecting";
        t.RECONNECTING = F;
        var H = "event_reconnected";
        t.RECONNECTED = H;
        t.FLAG_UNREAD = 1;
        t.FLAG_OUTBOUND = 2;
        t.FLAG_IMPORTANT = 8;
        t.FLAG_CHAT = 16;
        t.FLAG_FRIENDS = 32;
        t.FLAG_SPAM = 64;
        t.FLAG_DELETED = 128;
        t.FLAG_MEDIA = 512;
        t.FLAG_STEALTH = 65536;
        t.FLAG_HAS_REPLY = 1 << 21;
        t.FLAG_AUDIO_MESSAGE_LISTENED = 4096;
        t.FOLDER_IMPORTANT = 1;
        t.FOLDER_UNRESPOND = 2;
        t.FOLDER_HAS_BANNER = 8;
        t.MAIL_CHAT_UPDATE_TYPE_TITLE_CHANGED = 1;
        t.MAIL_CHAT_UPDATE_TYPE_AVATAR_CHANGED = 2;
        t.MAIL_CHAT_UPDATE_TYPE_ADMIN_GRANTED = 3;
        t.MAIL_CHAT_UPDATE_TYPE_FLAGS_CHANGED = 4;
        t.MAIL_CHAT_UPDATE_TYPE_PINNED = 5;
        t.MAIL_CHAT_UPDATE_TYPE_USER_JOINED = 6;
        t.MAIL_CHAT_UPDATE_TYPE_USER_LEFT = 7;
        t.MAIL_CHAT_UPDATE_TYPE_USER_KICKED = 8;
        t.MAIL_CHAT_UPDATE_TYPE_ADMIN_KICKED = 9;
        t.MAIL_CHAT_UPDATE_TYPE_BANNER_CHANGED = 10;
        t.MAIL_CHAT_UPDATE_TYPE_KEYBOARD_CHANGED = 11;
        t.MAIL_CHAT_UPDATE_TYPE_MESSAGE_REQUEST_CHANGED = 12;
        t.MAIL_CHAT_UPDATE_TYPE_CONTACT_CONVERTED = 13;

        function V(e) {
            var t = a(e, 11),
                n = t[1],
                r = t[2],
                o = t[3],
                s = t[4],
                l = t[5],
                u = t[6],
                d = t[7],
                f = t[8],
                h = t[9],
                p = t[10],
                A = extend(u, d || void 0);
            return {
                type: c,
                messageId: intval(n),
                flags: intval(r),
                peerId: intval(o),
                date: intval(s),
                attaches: (0, i.convertKludgesToAttaches)(A, n),
                subject: u.title || "",
                text: l,
                kludges: A,
                randomId: intval(f),
                userId: (0, i.isChatPeer)(o) ? intval(A.from) : intval(o),
                update_time: p,
                chat_local_id: h
            }
        }
        t.MESSAGE_REQUEST_STATUS_NEW = 3
    },
    f9C2: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.Recommended = o, t.default = void 0;
        var i = n("/zOt"),
            a = n("seaN"),
            r = n("/xuI");

        function o(e) {
            for (var t = Math.ceil((window.innerHeight - r.HEADER_HEIGHT) / 210), n = [], o = 0; o < t; o++) n.push((0, i.WallBlock)());
            return {
                inner: [(0, a.SearchHeader)(), n],
                class: "SkeletonRecommended Skeleton",
                tag: "div"
            }
        }
        var s = o;
        t.default = s
    },
    fKzu: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.isForbiddenPage = function() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "";
            return !!(arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : []).find(function(t) {
                return "*" === t[t.length - 1] ? e.startsWith(t.slice(0, t.length - 1)) : e === t
            })
        }
    },
    fOXz: function(e, t, n) {
        "use strict";

        function i(e, t) {
            for (var n = 0; n < t.length; n++) {
                var i = t[n];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.Artist = void 0;
        var a = function() {
            function e() {
                ! function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, e)
            }
            var t, n, a;
            return t = e, a = [{
                key: "follow",
                value: function(t, n, i, a) {
                    lockButton(a), ajax.post("/audio", {
                        _ajax: 1,
                        act: "artist_follow",
                        ref: n,
                        hash: i,
                        artist_id: t
                    }, {
                        onDone: function(i) {
                            unlockButton(a), a.classList.add("ArtistCover__followBtn__followed"), a.onclick = function(r) {
                                r.preventDefault(), e.unfollow(t, n, i, a)
                            }
                        },
                        onFail: function() {
                            return unlockButton(a)
                        }
                    })
                }
            }, {
                key: "unfollow",
                value: function(t, n, i, a) {
                    lockButton(a), ajax.post("/audio", {
                        _ajax: 1,
                        act: "artist_unfollow",
                        ref: n,
                        hash: i,
                        artist_id: t
                    }, {
                        onDone: function(i) {
                            unlockButton(a), a.classList.remove("ArtistCover__followBtn__followed"), a.classList.contains("ArtistCover__followBtn__canFollow") && (a.onclick = function(r) {
                                r.preventDefault(), e.follow(t, n, i, a)
                            })
                        },
                        onFail: function() {
                            return unlockButton(a)
                        }
                    })
                }
            }, {
                key: "trackToOfficial",
                value: function(e, t) {
                    ajax.post("/audio", {
                        _ajax: 1,
                        act: "artist_track_to_official",
                        hash: e,
                        url: t
                    })
                }
            }], (n = null) && i(t.prototype, n), a && i(t, a), e
        }();
        t.Artist = a
    },
    fP8X: function(e, t, n) {
        "use strict";
        var i, a = n("UxAg"),
            r = (i = n("j80l")) && i.__esModule ? i : {
                default: i
            },
            o = n("W9Tc");
        var s = need("nav"),
            l = need("page"),
            c = need("ajax"),
            u = need("audioplayer"),
            d = need("TabRow"),
            f = need("AudioSerp");
        window.uAudioSerp = {}, uAudioSerp._onQueryChange = g, uAudioSerp._init = v;
        var h = 300,
            p = {},
            A = !1,
            m = null,
            _ = null;

        function v() {
            var e, t = need("cur");
            (e = b(s.getQuery("q"))) && (p[e] = f.getFoundHtml()), t.processNav = y, u.onAdd(w), u.onDel(w)
        }

        function g(e) {
            var t = e.query,
                n = b(t);

            function i() {
                var e = !0;
                n || (e = !1), !n && A && (cur.processNav = null, f.toggleTabs(!1), f.setView("spinner"), A = !1), s.go(r.default.make(s.path, {
                    q: n ? t : "",
                    tab: e
                })), cur.processNav = y
            }
            _ && _.abort(), m && clearTimeout(m), f.toggleTabs(!0), n in p || !n ? i() : (f.setView("spinner"), m = setTimeout(i, h))
        }

        function y(e) {
            var t = s.path,
                n = e.nav.path,
                i = qs2obj(s.params),
                h = qs2obj(e.nav.params);
            if (t !== n || h.act) return l.save(s.cur, {
                title: document.title,
                bc: (0, a.$)("body").className,
                html: (0, a.$)(".basis").outerHTML,
                js: s.getPageJs()
            }), p = {}, A = !0, u.onAdd.off(w), u.onDel.off(w), _ && _.abort(), !1;
            if (!(0, o.partConfigEnabled)("audio_recommendations_new_catalog") && i.tab !== h.tab) {
                var m = h.tab || "owned";
                f.setTab(m), d.setSelectedTab("uAudioSerp", m)
            }
            var v = h.q || "",
                g = b(v);
            if (t.q !== h.q && _ && _.abort(), !(0, o.partConfigEnabled)("audio_recommendations_new_catalog")) {
                var y = r.default.make(t, {
                        q: v,
                        tab: null
                    }),
                    k = r.default.make(t, {
                        q: v,
                        tab: "global"
                    });
                d.setTabUrl("uAudioSerp", "owned", y), d.setTabUrl("uAudioSerp", "global", k)
            }
            return SearchPanel.setQuery("uAudioSerp", v), v ? g in p ? (f.setFoundHtml(p[g]), f.setView("found")) : (f.setView("spinner"), _ = c.post(t, {
                q: v,
                _ajax: 1
            }, {
                onDone: function(e) {
                    f.setFoundHtml(e), f.setView("found"), p[g] = e
                }
            })) : f.setView("owned"), !0
        }

        function b(e) {
            return (e || "").trim().toLowerCase()
        }

        function w() {
            p = {}, A = !0
        }
    },
    fWqt: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i = function(e) {
            if (e && e.__esModule) return e;
            var t = a();
            if (t && t.has(e)) return t.get(e);
            var n = {};
            if (null != e) {
                var i = Object.defineProperty && Object.getOwnPropertyDescriptor;
                for (var r in e)
                    if (Object.prototype.hasOwnProperty.call(e, r)) {
                        var o = i ? Object.getOwnPropertyDescriptor(e, r) : null;
                        o && (o.get || o.set) ? Object.defineProperty(n, r, o) : n[r] = e[r]
                    }
            }
            n.default = e, t && t.set(e, n);
            return n
        }(n("vkUM"));

        function a() {
            if ("function" != typeof WeakMap) return null;
            var e = new WeakMap;
            return a = function() {
                return e
            }, e
        }
        var r = i;
        t.default = r, window.MsgDeleteDialog = i
    },
    fYoA: function(e, t, n) {
        "use strict";
        window.SettingsNotifyGroup = {}, SettingsNotifyGroup._onChange = a;
        var i = {
            notifyGroup: ".settingsNotifyGroup",
            description: ".settingsNotifyGroup__description"
        };

        function a(e, t) {
            t.$control.closest(i.notifyGroup).$(i.description).innerHTML = e
        }
    },
    fdw3: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.isObject = function(e) {
            return (0, r.isObject)(e)
        }, t.isJS = function() {
            return !0
        }, t.log = function() {
            var e;
            (e = console).log.apply(e, arguments)
        }, t.mergeObjects = function(e, t) {
            return Object.assign(e, t)
        }, t.concatValues = function(e, t) {
            return e + t
        }, t.isNewNavigation = function() {
            return window.isNewNavigation
        }, t.isFinite = function(e) {
            return window.isFinite(e)
        }, t.getLang = function(e) {
            return window.getLang(e)
        }, t.wrapCommunityMailUrl = function(e) {
            return (0, a.wrapCommunityUrl)(e)
        }, t.mailReplaceMentions = function(e, t) {
            return e.replace(a.MENTION_REGEXP, t)
        }, t.mailReplaceDomainMentions = function(e, t) {
            return e.replace(a.MENTION_DOMAIN_REGEXP, t)
        }, t.getState = function(e) {
            return window.isomorphicState[e] || []
        }, t.flatten = function e(t) {
            var n = [];
            t.forEach(function(t) {
                t instanceof Array ? n = n.concat(e(t)) : n.push(t)
            });
            return n
        }, Object.defineProperty(t, "emojiToHTML", {
            enumerable: !0,
            get: function() {
                return i.emojiToHTML
            }
        }), Object.defineProperty(t, "isChatPeer", {
            enumerable: !0,
            get: function() {
                return a.isChatPeer
            }
        }), Object.defineProperty(t, "isForwardedMessageId", {
            enumerable: !0,
            get: function() {
                return a.isForwardedMessageId
            }
        }), Object.defineProperty(t, "extend", {
            enumerable: !0,
            get: function() {
                return r.extend
            }
        }), Object.defineProperty(t, "makeUrl", {
            enumerable: !0,
            get: function() {
                return o.makeUrl
            }
        });
        var i = n("9M99"),
            a = n("qHA9"),
            r = n("OcsD"),
            o = n("j80l")
    },
    fntf: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.StoryAuthor = t.StickerTypes = t.ERROR_CLASS = t.VIDEO_MUTED_CLASS = void 0;
        var i = s(n("TYsd")),
            a = n("jk6M"),
            r = s(n("oHC7")),
            o = s(n("WgE6"));

        function s(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }

        function l(e, t, n) {
            return t in e ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = n, e
        }

        function c(e, t) {
            for (var n = 0; n < t.length; n++) {
                var i = t[n];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        }
        var u = window.setStyle;
        t.VIDEO_MUTED_CLASS = "StoryAuthor_videoMuted";
        t.ERROR_CLASS = "StoryAuthor_error";
        t.StickerTypes = {
            hashtag: 1,
            mention: 2,
            question: 3,
            place: 4,
            music: 5,
            marketItem: 9
        };
        var d = function() {
            function e(t, n) {
                var a = this;
                ! function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, e), this.store = Stories.getStore(), this.data = n, this.state = {
                    authorIndex: t
                };
                var o = this.getCurrentStoryIndex();
                this.setCurrentStoryIndex(o), this.story = new r.default(this.data.items[o], this.data.author, t, o), this.authorStoriesHTML = i.default.html(this.story.render()), this.progressItemElems = null, Stories.onRender(function() {
                    a.updateStory()
                })
            }
            var t, n, s;
            return t = e, (n = [{
                key: "getCurrentStory",
                value: function() {
                    if (this.story) return this.story
                }
            }, {
                key: "destroy",
                value: function() {
                    this.story && this.story.destroy()
                }
            }, {
                key: "update",
                value: function() {
                    var e = this.data.index;
                    this.destroy(), this.story = new r.default(this.data.items[e], this.data.author, this.state.authorIndex, e), this.authorStoriesHTML = i.default.html(this.story.render())
                }
            }, {
                key: "updateHeader",
                value: function() {
                    this.authorElems = Stories.getAuthorElems(), this.authorElem = this.authorElems[this.state.authorIndex], this.progressItemElems = Array.from(geByClass("StoryAuthor__progressItem", this.authorElem)), this.drawFilledProgressItems()
                }
            }, {
                key: "updateStory",
                value: function() {
                    var e = this;
                    this.authorElems = Stories.getAuthorElems(), this.authorElem = this.authorElems[this.state.authorIndex];
                    var t = geByClass1("Story__body", this.authorElem);
                    this.story.update(t), this.story.onVideoData(function(n) {
                        n.authorIndex, n.storyIndex;
                        var i = e.story.getDuration(),
                            a = e.story.getType(),
                            r = e.store.isStopped;
                        if (e.countdown = new o.default(i, {
                                tick: 13,
                                onTick: function(t) {
                                    var n = (100 - Math.min(t / i * 100, 100)) / 100;
                                    e.drawCurrentProgress(n)
                                },
                                onEnd: function() {
                                    "video" !== a && (e.drawCurrentProgress(100), Stories.nextStory(!0), removeClass(e.authorElem, "StoryAuthor_paused"))
                                },
                                onPause: function() {
                                    e.story.pause(), addClass(e.authorElem, "StoryAuthor_paused")
                                },
                                onStart: function() {
                                    e.story.play(), removeClass(e.authorElem, "StoryAuthor_videoHold"), removeClass(e.authorElem, "StoryAuthor_paused")
                                }
                            }), "photo" !== a && "broken" !== a || r) {
                            if ("video" === a) {
                                var s = e.story.getVideoState(),
                                    l = e.story.getVideo();
                                addClass(t, "Story__body_video"), 4 !== s || r || l.paused || e.countdown.start()
                            }
                        } else e.countdown.start()
                    }), this.story.onVideoEndedEvent(function() {
                        e.drawCurrentProgress(100), Stories.nextStory(!0)
                    }), this.story.onVideoPauseEvent(function() {
                        e.countdown && e.countdown.pause()
                    }), this.story.onVideoBuffering(function() {
                        e.countdown && e.countdown.pause()
                    }), this.story.onVideoPlayEvent(function() {
                        e.countdown && !e.store.isStopped && e.countdown.start()
                    }), this.story.onAutoPlay(function() {
                        var t = window.lang,
                            n = e.story.getVideo();
                        Stories.pauseAudio();
                        var i = geByClass1("Story__body", e.authorElem),
                            a = Stories.isGoodBrowser();
                        n.play(), n.paused && !a ? e.story.renderError(e.authorElem, i, t.mobile_stories_inline_video_error) : !e.countdown || e.store.isStopped || n.paused ? a && n.paused && addClass(e.authorElem, "StoryAuthor_videoHold") : e.countdown.start(), n.muted && addClass(e.authorElem, "StoryAuthor_videoMuted")
                    }), this.story.onDestroy(function() {
                        e.countdown && (e.countdown.stop(), e.countdown = null)
                    })
                }
            }, {
                key: "getCountDown",
                value: function() {
                    if (this.countdown) return this.countdown
                }
            }, {
                key: "getFirstUnreadStoryIndex",
                value: function() {
                    if (Stories._hasContext("all")) return 0;
                    var e = this.data.items.findIndex(function(e) {
                        return !0 === e.unread
                    });
                    return -1 !== e ? e : 0
                }
            }, {
                key: "getCurrentStoryIndex",
                value: function() {
                    if (!this.data.index) {
                        var e = this.getFirstUnreadStoryIndex();
                        this.setCurrentStoryIndex(e)
                    }
                    return this.data.index
                }
            }, {
                key: "drawCurrentProgress",
                value: function(e) {
                    if (this.progressItemElems) {
                        var t = this.progressItemElems[this.data.index];
                        u.transform(geByClass1("StoryAuthor__progressItemCurrent", t), [e, 1])
                    }
                }
            }, {
                key: "drawFilledProgressItems",
                value: function() {
                    var e = this.data.index;
                    if (this.progressItemElems)
                        for (each(this.progressItemElems, function(e, t) {
                                removeClass(t, "StoryAuthor__progressItem_filled")
                            }); e >= 0;) addClass(this.progressItemElems[--e], "StoryAuthor__progressItem_filled")
                }
            }, {
                key: "setCurrentStoryIndex",
                value: function(e) {
                    this.data.index = e, this.drawFilledProgressItems()
                }
            }, {
                key: "renderEmpty",
                value: function() {
                    var e = this.story.getPreview(),
                        t = Stories.getWidth();
                    return i.default.html({
                        class: "StoryAuthor StoryAuthor_empty",
                        style: "width: ".concat(t, "px;"),
                        attrs: {
                            "data-src": e
                        }
                    })
                }
            }, {
                key: "render",
                value: function() {
                    var e, t, n, r = window.lang,
                        o = Stories.getWidth(),
                        s = a.isTouch ? "ontouchstart" : "onmousedown",
                        c = a.isTouch ? "ontouchend" : "onmouseup";
                    return i.default.html({
                        class: "StoryAuthor StoryAuthor_inited",
                        style: "width: ".concat(o, "px;"),
                        inner: [{
                            class: "StoryAuthor__header",
                            inner: {
                                class: "StoryAuthor__progress",
                                inner: this.data.items.map(function() {
                                    return {
                                        class: "StoryAuthor__progressItem",
                                        inner: {
                                            class: "StoryAuthor__progressItemBar",
                                            inner: {
                                                class: "StoryAuthor__progressItemCurrent"
                                            }
                                        }
                                    }
                                })
                            }
                        }, (e = {
                            class: "StoryAuthor__muted"
                        }, l(e, s, "Stories.unMute(this, event);"), l(e, "inner", [{
                            class: "Story__icon Story__icon_unmute"
                        }, {
                            class: "StoryAuthor__muted_text",
                            inner: r.mobile_stories_unmute
                        }]), e), (t = {
                            class: "StoryAuthor__next"
                        }, l(t, s, "Stories.onTouchStart(event);"), l(t, c, "Stories.onTouchEnd(event);"), l(t, "ontouchcancel", "Stories.onTouchEnd(event);"), t), (n = {
                            class: "StoryAuthor__prev"
                        }, l(n, s, "Stories.onTouchStart(event);"), l(n, c, "Stories.onTouchEnd(event, true);"), l(n, "ontouchcancel", "Stories.onTouchEnd(event, true);"), n), {
                            class: "StoryAuthor__body",
                            inner: this.authorStoriesHTML
                        }]
                    })
                }
            }]) && c(t.prototype, n), s && c(t, s), e
        }();
        t.StoryAuthor = d
    },
    fw35: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i = r(n("wMVj")),
            a = r(n("29dZ"));

        function r(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        var o = {
            reload: function(e) {
                a.default.setDisabled(e, !0), !1 === navigator.onLine ? setTimeout(function() {
                    a.default.setDisabled(e, !1)
                }, 500) : i.default.reload()
            }
        };
        t.default = o
    },
    gD36: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("TYsd")) && i.__esModule ? i : {
            default: i
        };
        var r = function(e) {
            var t = !(!e.tags || !e.tags.length) && e.tags;
            return {
                class: "Owner__tags",
                inner: t ? [{
                    class: "Owner__tags_icon Icon Icon_tagLabel"
                }, t.map(function(e) {
                    return {
                        class: "Owner__tag",
                        inner: a.default.wrap(e.name)
                    }
                })] : null
            }
        };
        t.default = r
    },
    gF8j: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = s, t.getVisibilityState = u, t.getVisiblityEvent = d;
        var i, a = (i = n("uQjJ")) && i.__esModule ? i : {
                default: i
            },
            r = n("JuPy");
        var o = browser.iphone || browser.ipad || browser.ipod;

        function s(e) {
            this.started = !1, this.is_idle = !0, this.activeTimeStart = null, this.cbActiveB = this.cbActive.bind(this), this.cbInactiveB = this.cbInactive.bind(this), this.onVisiblityChange = this.onVisiblityChange.bind(this), this.opts = extend({
                triggerEvents: "mousemove keydown",
                onIdleCb: function() {},
                onUnIdleCb: function() {},
                focusElement: e.element,
                element: null,
                idleTimeout: 3e4
            }, e)
        }

        function l(e, t, n) {
            (0, r.isMvk)() ? window.addEvent(e, t, n, {
                passive: !0
            }): window.addEvent(e, t, n)
        }

        function c(e, t, n) {
            (0, r.isMvk)() ? window.removeEvent(e, t, n, {
                passive: !0
            }): window.removeEvent(e, t, n)
        }

        function u() {
            return document.visibilityState || document.webkitVisibilityState
        }

        function d() {
            var e = "visibilitychange";
            return document.visibilityState || (document.webkitVisibilityState ? e += "webkit" : e = ""), e
        }
        extend(s.prototype, a.default.prototype), extend(s.prototype, {
            stop: function() {
                this.started = !1, c(this.opts.element, this.opts.triggerEvents, this.cbActiveB), (0, r.isMvk)() && this._isTopLevel() && d() && c(document, d(), this.onVisiblityChange), (0, r.isMvk)() && o || (c(this.opts.focusElement, "focus", this.cbActiveB), c(this.opts.focusElement, "blur", this.cbInactiveB)), clearTimeout(this.setIdleTo), clearTimeout(this.checkIdleCbTo), clearTimeout(this.sendCbTO), this.is_idle = !0, this.opts.parentManager && this.opts.parentManager.off("idle", this.cbInactiveB)
            },
            idle: function(e) {
                this.is_idle = !0, e || this.opts.onIdleCb(), this.emit("idle")
            },
            unidle: function(e) {
                this.is_idle = !1, e || this.opts.onUnIdleCb(), this.emit("unidle")
            },
            start: function() {
                this.started = !0, !(0, r.isMvk)() && browser.mobile || (this.is_idle = !this._isFocused(), this.opts.parentManager && this.opts.parentManager.on("idle", this.cbInactiveB), (0, r.isMvk)() && this._isTopLevel() && d() && l(document, d(), this.onVisiblityChange), (0, r.isMvk)() && o || (l(this.opts.focusElement, "focus", this.cbActiveB), l(this.opts.focusElement, "blur", this.cbInactiveB)), clearTimeout(this.checkIdleCbTo), this.checkIdleCb(), this.checkIdleCbTo = setTimeout(this.checkIdleCb.bind(this), this.opts.idleTimeout))
            },
            checkIdleCb: function() {
                this.started && (l(this.opts.element, this.opts.triggerEvents, this.cbActiveB), clearTimeout(this.setIdleTo), this.setIdleTo = setTimeout(this.cbInactiveB, this.opts.idleTimeout))
            },
            cbActive: function() {
                this.started && (this.activeTimeStart = (new Date).getTime(), clearTimeout(this.setIdleTo), this.is_idle && (this.is_idle = !1, clearTimeout(this.sendCbTO), this.sendCbTO = setTimeout(function() {
                    this.emit("unidle"), this.opts.onUnIdleCb && this.opts.onUnIdleCb()
                }.bind(this), 100)), c(this.opts.element, this.opts.triggerEvents, this.cbActiveB), clearTimeout(this.checkIdleCbTo), this.checkIdleCbTo = setTimeout(this.checkIdleCb.bind(this), this.opts.idleTimeout))
            },
            cbInactive: function() {
                this.started && (this.activeTimeStart = null, this.is_idle || (this.is_idle = !0, clearTimeout(this.sendCbTO), this.sendCbTO = setTimeout(function() {
                    this.emit("idle"), this.opts.onIdleCb && this.opts.onIdleCb()
                }.bind(this), 100)), clearTimeout(this.checkIdleCbTo), c(this.opts.element, this.opts.triggerEvents, this.cbActiveB), l(this.opts.element, this.opts.triggerEvents, this.cbActiveB), this.checkIdleCbTo = setTimeout(this.checkIdleCb, this.opts.idleTimeout))
            },
            getActiveTime: function() {
                return !this.is_idle && this.activeTimeStart ? (new Date).getTime() - this.activeTimeStart : 0
            },
            onVisiblityChange: function() {
                "visible" === u() ? this.cbActiveB() : this.cbInactiveB()
            },
            _isTopLevel: function() {
                var e = this.opts.focusElement;
                return e === window || e === document
            },
            _isFocused: function() {
                var e = this.opts.focusElement;
                if (this._isTopLevel()) {
                    var t = u();
                    return "string" == typeof t && "visible" === t
                }
                return document.activeElement === e
            }
        })
    },
    gLrT: function(e, t, n) {
        "use strict";
        var i;
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var a = ((i = n("B+E1")) && i.__esModule ? i : {
            default: i
        }).default;
        t.default = a
    },
    gMTq: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i = l(n("TYsd")),
            a = n("DkIl"),
            r = l(n("rKp0")),
            o = l(n("29dZ")),
            s = l(n("bZ/P"));

        function l(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        var c = function(e) {
            var t = window.lang,
                n = (0, a.MailHat)({
                    type: "page",
                    left: (0, a.MailHat__icon)({
                        icon: "back",
                        url: "/mail"
                    }),
                    center: (0, a.MailHat__Title)({
                        title: t.mobile_mail_mrs_page_title
                    })
                }),
                l = [{
                    class: "MessageRequestsPage__content ScrollView",
                    inner: [{
                        class: "MessageRequestsPage__info",
                        inner: t.mobile_mail_mrs_page_info
                    }, i.default.wrap((0, r.default)({
                        scrap: "mrs"
                    }))]
                }, e.count ? {
                    class: "MessageRequestsPage__footer",
                    inner: [(0, o.default)({
                        theme: "negative",
                        size: "large",
                        type: "button",
                        inner: t.mobile_mail_mrs_button_reject_all,
                        attrs: s.default.onClick("MessageRequestsPage.rejectAll", "event", "this")
                    })]
                } : null];
            return {
                class: "messenger__page MessageRequestsPage",
                inner: [{
                    class: "messenger__header",
                    inner: i.default.wrap(n)
                }, {
                    class: "messenger__body",
                    inner: l
                }]
            }
        };
        t.default = c
    },
    gNTM: function(e, t, n) {
        "use strict";
        var i = window,
            a = i.hide,
            r = i.ge,
            o = i.ce,
            s = i.geByClass1,
            l = i.val,
            c = i.show,
            u = i.remove,
            d = i.addClass,
            f = i.removeClass,
            h = window.geo,
            p = window.ajax,
            A = function() {
                var e = null,
                    t = !1;

                function n(e, t) {
                    var n = r("medias_map"),
                        i = r("attached_wrap");
                    n || (n = o("div", {
                        id: "medias_map",
                        className: "pi_medias"
                    }), i.appendChild(n));
                    var a = e.latitude,
                        u = e.longitude,
                        d = (window.devicePixelRatio, s("medias_map", n)),
                        f = t ? '<div class="medias_map_close"><i class="i_close">&nbsp;</i></div><div class="medias_map_label">' + t + "</div>" : "",
                        h = '<input type="hidden" name="map" value="' + (a + "_" + u + "_0") + '">';
                    d ? l(d, f + "" + h) : l(n, '<div class="meias_row medias_map" onclick="geoloc.remove();">' + f + h + "</div>");
                    c(n)
                }

                function i() {
                    e = null, u("medias_map")
                }

                function m(t) {
                    var i;
                    t && t.coords && (e = {
                        latitude: +t.coords.latitude || 0,
                        longitude: +t.coords.longitude || 0
                    }, i = e, p.post("/places.php", {
                        _ajax: 1,
                        act: "map_label",
                        lat: i.latitude,
                        lng: i.longitude
                    }, {
                        onDone: function(e) {
                            a("geo_waiting"), n(i, e)
                        },
                        onFail: _
                    }))
                }

                function _(e) {
                    A.remove(), a("geo_waiting")
                }
                return {
                    toggle: function() {
                        t ? A.remove() : A.add()
                    },
                    add: function(i) {
                        !i && t || (t = !0, d("cp_geo_btn_sel", "geo_btn"), i && (i.latitude || i.longitude) ? n(e = {
                            latitude: +i.latitude || 0,
                            longitude: +i.longitude || 0
                        }, i.label) : (h.getCurrentPosition(m, _), c("geo_waiting")))
                    },
                    remove: function() {
                        t && (t = !1, f("cp_geo_btn_sel", "geo_btn"), i())
                    },
                    init: function(e) {
                        return e && A.add(e), h.init()
                    }
                }
            }();
        window.geoloc = A
    },
    gTod: function(e, t, n) {
        "use strict";
        var i = n("UxAg");

        function a() {
            (0, i.$)(r.self).classList.toggle(o.restCodesShown)
        }
        window.ReservedCodes = {}, ReservedCodes._onShowRestCodesClick = a;
        var r = {
                self: ".ReservedCodes"
            },
            o = {
                restCodesShown: "ReservedCodes_restCodesShown"
            }
    },
    gUYQ: function(e, t, n) {
        "use strict";
        var i, a = n("UxAg"),
            r = n("BZzM"),
            o = n("OcsD"),
            s = (i = n("BoyB")) && i.__esModule ? i : {
                default: i
            },
            l = n("V4qE");
        var c = window.cdf,
            u = window.ajax,
            d = window.ownerPhotoUpload,
            f = window.nav;
        var h = {
                onDone: function(e, t, n, i) {
                    var a = (0, o.ge)(e) || (0, o.geByClass1)("like_box", "z") || (0, o.geByClass1)("like_box") || (0, o.geByClass1)("wall_item_for_like_" + e);
                    if (a && e) {
                        var r, s, l = (0, o.geByClass1)("item_repost", a);
                        (0, o.hasClass)("wall_item", a) || (0, o.hasClass)("market_item", a) ? s = (0, o.geByClass1)("wi_like_wrap", a): (0, o.hasClass)("ReplyItem", a) ? r = (0, o.geByClass1)("ReplyItem__likeWrap", a) : s = (0, o.geByClass1)("item_like", a), r || (r = (0, o.geByClass1)("like_wrap", a)), s && (s.innerHTML = t || "", (0, o.toggleClass)("is_empty", s, !t), (0, o.toggle)(s, t)), l && (l.innerHTML = n || "", (0, o.toggle)(l, n)), r && (0, o.val)(r, i || "")
                    }
                },
                onFail: function() {
                    var e = Array.prototype.slice.call(arguments),
                        t = e.shift();
                    switch (t) {
                        case 2:
                            f.hard_go(e[0])
                    }
                }
            },
            p = {
                onDone: function(e, t, n, i, a) {
                    var r = window,
                        s = r.photo;
                    if (h.onDone.apply(this, arguments), this.photo_id) {
                        var l = s.get(this.photo_id);
                        if (l) {
                            var c = (0, o.ce)("div", {
                                innerHTML: l.likes
                            });
                            (0, o.val)((0, o.geByClass1)("item_like", c), t), l.likes = (0, o.val)(c), l.publish = '<span class="item_repost">' + n + "</span>", l.likes_cnt = (0, o.intval)(((0, o.attr)((0, o.geByClass1)("v_like", c), "data-like_count") || "").replace(/\D+/g, "")), l.likes_me = a;
                            c = (0, o.ce)("div", {
                                innerHTML: l.actions
                            });
                            var u = (0, o.geByClass1)("like_wrap", c);
                            (0, o.val)(u, i), l.actions = (0, o.val)(c), s.save(l)
                        }
                    }
                },
                onFail: h.onFail
            },
            A = {
                onDone: function(e) {
                    var t = window.photo;
                    if (this.photo_id) {
                        if (!e.error) {
                            var n = {};
                            "confirm" === e.type ? n = {
                                type: l.SNACKBAR_TYPE_SUCCESS,
                                text: getLang("mobile_msg_photos_tag_confirmed")
                            } : "delete" === e.type && (n = {
                                type: l.SNACKBAR_TYPE_SUCCESS,
                                text: getLang("mobile_msg_photos_tag_deleted")
                            }), Snackbar.init(n)
                        }
                        var i = t.get(this.photo_id);
                        i && (i.tag_info = "", t.save(i));
                        var a = (0, o.geByClass1)("photo_view"),
                            r = (0, o.geByClass1)("pv_tag_wrap", a);
                        (0, o.val)(r, "")
                    }
                }
            },
            m = {
                onDone: function(e, t, n) {
                    var i = window.photo,
                        a = window.menu,
                        r = (0, o.geByClass1)("photo_view"),
                        s = (0, o.geByClass1)("photo_msg"),
                        l = !!t;
                    if (r && s) {
                        (0, o.val)(s, t || ""), (0, o.toggleClass)("photo_deleted", r, l);
                        var c = i.get(e);
                        c && (c.deleted = t, i.save(c)), n && a && a.refresh({
                            pp: n
                        })
                    }
                }
            },
            _ = {
                onDone: function(e, t) {
                    var n = window.isNewMail && (0, a.$)(".messenger") && this.link.closest(".msg");
                    if ((0, o.val)(e, t), n) {
                        var i = Number(n.className.match(/msg_id_(\d+)/)[1]);
                        store.mail.msgs[i].textFull = n.$(".msg__text").innerHTML
                    }
                }
            },
            v = {
                onDone: function(e) {
                    this.link && ((0, o.after)(c(e), (0, o.gpeByClass)("pic_body_wrap", this.link)), (0, o.hide)(this.link))
                }
            },
            g = {
                onStart: function() {
                    (0, o.addClass)("cm_item_loading", this.link)
                },
                onDone: function(e) {
                    this.link && (0, o.val)(this.link.parentNode, e)
                }
            },
            y = {
                onDone: function(e, t) {
                    if (e) {
                        var n = window.photo;
                        (0, o.remove)(e + "_msg");
                        var i = (0, o.ge)(e);
                        if (i) {
                            if (t) {
                                var a = (0, o.ce)("div", {
                                    id: e + "_msg",
                                    className: (i.className || "") + " post_message_item"
                                });
                                (0, o.val)(a, '<div class="pi_cont">' + t + "</div>"), (0, o.after)(a, i), (0, o.hide)(i), (0, o.geByClass1)("rtm_reply_wrap", i) && window.reply && window.reply.edithide()
                            } else(0, o.show)(e);
                            if (this.photo_id) {
                                var r = n.get(this.photo_id);
                                if (r) {
                                    var s = (0, o.geByClass1)("photoview"),
                                        l = (0, o.geByClass1)("comments_wrap", s);
                                    r.comments_html = (0, o.val)(l)
                                }
                            }
                        }
                    }
                }
            },
            b = {
                onDone: function(e, t, n, i) {
                    if (e) {
                        (0, o.remove)(e + "_msg");
                        var a = (0, o.ge)(e);
                        if (a)
                            if (t) {
                                var r = (/^([a-z]+)_item$/i.exec(n || "") || [])[1] || "inline",
                                    s = (0, o.ce)("div", {
                                        id: e + "_msg",
                                        className: r + "_item " + r + "_message_item"
                                    }),
                                    l = i || "message_item_cont";
                                (0, o.val)(s, '<div class="' + l + '">' + t + "</div>"), (0, o.after)(s, a), (0, o.hide)(a)
                            } else !1 === t ? (0, o.hide)(a) : (0, o.show)(a)
                    }
                }
            },
            w = {
                onDone: function(e, t, n) {
                    if (e) {
                        var i = (0, o.ge)(e),
                            a = (0, o.getY)(i) || (0, o.getY)(e + "_msg"),
                            r = (0, o.getH)(i) || (0, o.getH)(e + "_msg"),
                            s = a + (u < 320 ? r : 0) - (0, o.scrollTop)();
                        if ((0, o.remove)(e + "_msg"), i) {
                            var l = (0, o.hasClass)("wall_item", i) || (0, o.hasClass)("post", i) ? "wall" : "post";
                            if (n) {
                                var c = (0, o.ce)("div", {
                                    id: e + "_msg",
                                    className: l + "_item post_message_item"
                                });
                                (0, o.val)(c, '<div class="pi_cont">' + n + "</div>"), (0, o.after)(c, i)
                            }
                            if (t) {
                                (0, o.each)((0, o.geByClass)(l + "_item"), function() {
                                    var e = !!this.id && this.id.match(/^wall((-?\d+)_(-?\d+)(_\d+)?)$/),
                                        i = (0, o.attr)(this, "data-copy"),
                                        a = !!i && i.match(/^(-?\d+)_(-?\d+)$/);
                                    if (!e) return !0;
                                    (!e[4] && e[2] == t || e[4] && e[3] == t || a && a[1] == t) && (0, o.toggleClass)("post_item_ignored", this, n)
                                });
                                var u = (0, o.getCw)(),
                                    d = (a = (0, o.getY)(i) || (0, o.getY)(e + "_msg"), r = (0, o.getH)(i) || (0, o.getH)(e + "_msg"), a + (u < 320 ? r : 0) - s);
                                (0, o.geByClass1)("wall_item") === i && (d = 0), (0, o.scrollTop)(d)
                            }
                        }
                    }
                }
            },
            k = {
                onDone: function(e, t) {
                    if (e) {
                        var n = (0, o.ge)(e);
                        if ((0, o.remove)(e + "_msg"), n && t) {
                            var i = (0, o.hasClass)("wall_item", n) || (0, o.hasClass)("post", n) ? "wall" : "post",
                                a = (0, o.ce)("div", {
                                    id: e + "_msg",
                                    className: i + "_item post_message_item"
                                });
                            (0, o.val)(a, '<div class="pi_cont">' + t + "</div>"), (0, o.after)(a, n)
                        }(0, o.toggleClass)("post_item_ignored", n, t)
                    }
                }
            },
            E = {
                onDone: function(e, t, n) {
                    if (e) {
                        var i = (0, o.ge)(e);
                        if ((0, o.remove)(e + "_msg"), i) {
                            if (n) {
                                var a = (0, o.ce)("div", {
                                    id: e + "_msg",
                                    className: "wall_item post_message_item"
                                });
                                (0, o.val)(a, '<div class="pi_cont">' + n + "</div>"), (0, o.after)(a, i)
                            }(0, o.toggleClass)("post_item_ignored", i)
                        }
                    }
                }
            },
            S = {
                onStart: function() {
                    var e = (0, o.gpeByClass)("show_more_wrap", this.link),
                        t = (0, o.geByClass1)("show_more", e) || this.link,
                        n = (0, o.ce)("div", {
                            id: "show_more_loading",
                            className: "show_more_loading",
                            innerHTML: '<i class="i_loading">&nbsp;</i>'
                        }),
                        i = (0, o.ce)("div", {
                            id: "show_more_wrap",
                            className: "show_more_wrap"
                        });
                    (0, o.attr)(n, "data-href", (0, o.getHref)(t)), i.appendChild(n), (0, o.before)(i, e), (0, o.remove)(e)
                },
                onDone: function(e) {
                    var t = window.cur;
                    u.tAlProcess = (new Date).getTime();
                    var n = (0, o.ge)("show_more_wrap"),
                        i = c(e);
                    (0, o.before)(i, n), (0, o.remove)(n), u.prepare_click("mcont"), (0, o.onBodyScrollForce)(100), u.tAlModule = t.module, u.tAlRender = (new Date).getTime(), Gif.onUpdate(), (0, r.resizePosters)()
                }
            },
            C = {
                onStart: S.onStart,
                onDone: function(e, t) {
                    S.onDone.apply(null, arguments), Bookmarks.pushItemsToStore(t)
                }
            },
            M = {
                onStart: S.onStart,
                onDone: function(e, t) {
                    var n = window.cur;
                    u.tAlProcess = (new Date).getTime();
                    var i = (0, o.geByClass1)("photos_page", "mcont"),
                        a = (0, o.ge)("show_more_wrap"),
                        s = c(t);
                    e = e.replace(/<img src="([^"]+)" class="/gi, '<img data-src="$1" class="_image ');
                    var l = c(e);
                    i && i.appendChild(l), (0, o.before)(s, a), (0, o.remove)(a), u.prepare_click("mcont"), (0, o.onBodyScrollForce)(100), u.tAlModule = n.module, u.tAlRender = (new Date).getTime(), (0, r.resizePosters)()
                }
            },
            P = {
                onStart: S.onStart,
                onDone: function(e, t) {
                    var n = window.cur;
                    u.tAlProcess = (new Date).getTime();
                    var i = (0, o.geByClass1)("audios_block", (0, o.geByClass1)("audios", "mcont")),
                        a = (0, o.ge)("show_more_wrap"),
                        r = c(t),
                        s = c(e);
                    i && i.appendChild(s), (0, o.before)(r, a), (0, o.remove)(a), u.prepare_click("mcont"), u.tAlModule = n.module, u.tAlRender = (new Date).getTime()
                }
            },
            T = {
                onDone: function(e) {
                    var t = this.link.parentNode;
                    (0, o.val)(t, e)
                }
            },
            D = {
                onStart: function() {
                    (0, o.addClass)("mva_item_loading", this.link)
                },
                onDone: function(e, t) {
                    (0, o.removeClass)("mva_item_loading", this.link), e.upload_url || t && f.hard_go(t), d && d.crop(e) || t && f.hard_go(t)
                },
                onFail: function() {
                    (0, o.removeClass)("mva_item_loading", this.link)
                }
            },
            I = {
                onStart: function() {
                    var e = this.link,
                        t = (0, o.gpeByClass)("notify_lite", e);
                    if (t) return (0, o.remove)(t);
                    for (; e = e.parentNode;)
                        if ((0, o.hasClass)("notify_item", e)) {
                            (0, o.hasClass)("notify_panel", e.parentNode) ? (0, o.remove)(e.parentNode) : (0, o.remove)(e);
                            break
                        }
                }
            },
            x = {
                onStart: function() {
                    var e = (0, o.geByClass)("pagination", "mcont");
                    (0, o.each)(e, function(e, t) {
                        (0, o.before)((0, o.ce)("div", {
                            className: "summary_loading",
                            innerHTML: '<i class="i_loading"></i>'
                        }), t.firstChild)
                    })
                },
                onDone: function(e, t, n) {
                    var i = window.mail,
                        a = (0, o.ge)("messages" + t);
                    a && ((0, o.val)(a, e), i.onMessagesRepainted(!0), !this.save && (0, o.scrollToEl)()), this.save && i.saveDialog({
                        messages: e
                    }, t), this.clear && ((0, o.val)((0, o.geByTag1)("textarea", "write_form"), ""), (0, o.remove)((0, o.geByClass1)("pi_medias", "write_form"))), (0, o.removeClass)("cp_attach_btn_sel", (0, o.geByClass1)("cp_attach_btn")), window.isNewMail && MailScrap.clearSystemMessage2(), n && n.play_animation_msg_id && StickersSettings.getAutoplay() && StickersAnimation.loadStickerInMvkIMAndPlay(n.play_animation_msg_id)
                },
                onFail: function() {
                    var e = Array.prototype.slice.call(arguments),
                        t = e.shift();
                    switch (t) {
                        case 2:
                            this.link.form && this.link.form.submit()
                    }
                }
            },
            O = {
                onStart: function() {
                    var e = (0, o.geByClass)("pagination", "mcont");
                    (0, o.each)(e, function(e, t) {
                        (0, o.before)((0, o.ce)("div", {
                            className: "summary_loading",
                            innerHTML: '<i class="i_loading"></i>'
                        }), t.firstChild)
                    })
                },
                onDone: function(e, t) {
                    var n = window.mail,
                        i = (0, o.ge)("dialogs");
                    i && ((0, o.val)(i, e), !this.no_scroll && (0, o.scrollToEl)(), n.cacheDialogsPage()), n.save(t)
                }
            },
            L = {
                onFail: function(e, t) {
                    if (e === u.RESPONSE_CAPTCHA) {
                        var n = this.link && this.link.form,
                            i = n && n.code ? n.code.value : "";
                        t += "&code=".concat(i), f.hard_go(t)
                    }
                }
            },
            B = {
                onStart: function() {
                    var e = (0, o.gpeByClass)("friendsList__showMoreBtnWrap", this.link),
                        t = (0, o.geByClass1)("friendsList__showMoreBtn", e) || this.link,
                        n = (0, o.ce)("div", {
                            id: "show_more_loading",
                            className: "wait_loading"
                        }),
                        i = (0, o.ce)("div", {
                            id: "show_more_wrap",
                            className: "friendsList__showMoreBtnWrap"
                        });
                    (0, o.attr)(n, "data-href", (0, o.getHref)(t)), i.appendChild(n), (0, o.before)(i, e), (0, o.remove)(e)
                },
                onFail: function() {
                    var e = this,
                        t = this.link.getAttribute("data-href") || this.link.getAttribute("href");
                    setTimeout(function() {
                        u.post(t, {
                            _ajax: 1
                        }, {
                            onDone: B.onDone.bind(e),
                            onFail: B.onFail.bind(e)
                        })
                    }, 500)
                },
                onDone: S.onDone
            },
            R = {
                onDone: function(e, t) {
                    if (e) {
                        var n = (0, o.ge)(e);
                        n && n.parentNode && t && (0, o.replace)(c(t), n.parentNode)
                    }
                }
            },
            N = {
                onDone: function(e, t) {
                    if (e) {
                        var n = (0, o.geByClass)(e);
                        if (n.length && t)
                            for (var i = 0, a = n.length; i < a; i++) n[i].parentNode && (0, o.replace)(c(t), n[i].parentNode)
                    }
                }
            },
            j = {
                onStart: function() {
                    this.link.classList.add("wia_item--loading")
                },
                onDone: function(e, t, n, i, a) {
                    if (e) {
                        var r = (0, o.geByClass)(e);
                        if (r.length && t)
                            for (var s = 0, l = r.length; s < l; s++) r[s].parentNode && (0, o.replace)(c(t), r[s].parentNode);
                        Share.setBookmarkState(i, a), n && Bookmarks.showSuccessSnack(n)
                    }
                }
            },
            F = {
                onDone: function(e, t, n, i) {
                    if (e) {
                        var a = (0, o.ge)(e);
                        if (a) {
                            var r = (0, o.geByClass1)("wia_close", a);
                            if (r && ((0, o.val)(r, n), r.href = t), (0, o.hasClass)("single_wall_item", a)) {
                                var s = (0, o.ge)("nc_form"),
                                    l = (0, o.geByClass1)("wall_replies");
                                s ? (0, o.toggle)(s, !!i) : i && (l ? domInsert(l, i) : (domInsertAfter((0, o.ce)("div", {
                                    innerHTML: i
                                }), a), l = (0, o.geByClass1)("wall_replies"))), (0, o.toggleClass)("closed_comments", l, !i)
                            }
                        }
                    }
                }
            },
            H = {
                onStart: function() {
                    var e = domPN(this.link),
                        t = (0, o.geByClass1)("Loading", e);
                    t || (t = (0, o.ceFromString)((0, s.default)({})), append(t, e)), (0, o.addClass)("RepliesThreadNext_loading", e)
                },
                onDone: function(e, t, n, i) {
                    var a, s = domPN(this.link),
                        l = (0, o.hasClass)("RepliesThreadNext_prev", s),
                        u = 0,
                        d = c(e);
                    if (domChildren(d).forEach(function(e) {
                            (0, o.ge)(e.id) && re(e)
                        }), l ? (a = (0, o.gpeByClass)("wall_replies", s), u = (0, o.getH)(a), (0, o.after)(d, s)) : (0, o.before)(d, s), i ? (this.link.href = i, (0, o.removeClass)("RepliesThreadNext_loading", s)) : re(s), Gif.onUpdate(), (0, r.resizePosters)(), n && (cur.replyNames = (0, o.extend)(cur.replyNames || {}, n)), t && t.length && Mention.addItems(t), l) {
                        var f = (0, o.getH)(a) - u;
                        (0, o.scrollTop)((0, o.scrollTop)() + f)
                    }(0, o.onBodyScrollForce)()
                },
                onFail: function() {
                    var e = domPN(this.link),
                        t = (0, o.geByClass1)("i_loading", e);
                    (0, o.hide)(t), (0, o.show)(this.link), (0, o.removeClass)("RepliesThreadNext_loading", e)
                }
            },
            V = {
                onDone: function(e, t, n) {
                    var i = (0, o.geByClass1)("RepliesWrap");
                    i.innerHTML = e, Gif.onUpdate(), (0, r.resizePosters)(), n && (0, o.extend)(cur.replyNames, n), t && t.length && Mention.addItems(t), (0, o.scrollTop)((0, o.getH)(i) + (0, o.getY)(i))
                }
            },
            U = {
                onDone: function(e, t, n, i) {
                    if (e) {
                        var a = (0, o.ge)(e);
                        if (a) {
                            if (i)(0, o.geByClass)("ReplyItem__message_type_" + i, a).forEach(function(e) {
                                re(e)
                            });
                            var r = (0, o.geByClass1)("ReplyItem__wrap", a),
                                s = (0, o.geByClass)("ReplyItem__message", a),
                                l = s.pop();
                            if (t) {
                                var u = c(t);
                                (0, o.hide)(l || r), (0, o.after)(u, l || r), (0, o.geByClass1)("rtm_reply_wrap", a) && window.reply && window.reply.edithide()
                            } else i || (re(l), l = s.pop()), (0, o.show)(l || r);
                            if (n) {
                                var d = (0, o.ge)("RepliesThread" + n);
                                d && (0, o.toggle)(d, !t)
                            }
                        }
                    }
                }
            };
        window.Like = h, window.PhotoLike = p, window.PhotoTag = A, window.PhotoDelete = m, window.Poll = _, window.CopyHistory = v, window.ToggleMenu = g, window.Comment = y, window.ItemDelete = b, window.FeedIgnore = w, window.FeedIgnoreItem = k, window.FeedIgnoreComments = E, window.Wall = S, window.Bookmark = C, window.BookmarkToggle = j, window.Photos = M, window.Audios = P, window.FixPost = T, window.ProfileMove = D, window.Notify = I, window.Dialog = x, window.Dialogs = O, window.LoginCheckAuthCodePage = L, window.WallSubscribe = R, window.FeedSubscribe = N, window.ImportedFriends = B, window.CloseComments = F, window.RepliesNext = H, window.RepliesLast = V, window.ReplyAction = U, window.MiniAppsCatalogResetRecent = function(e) {
            if (e.dataset.section) {
                var t = {
                    act: "mini_apps_reset_recent",
                    hash: e.dataset.hash || ""
                };
                u.post("/apps.php", t, {
                    onDone: function() {
                        var t = (0, o.ge)("mini_apps_" + e.dataset.section);
                        t && t.remove()
                    }
                })
            }
        }
    },
    gdug: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.initBrowserUtils = function() {
            (0, r.isIPadOS)(c) && !(0, o.getCookie)("remixforce_full") && function() {
                var e = function(e, t) {
                        return function(e) {
                            if (Array.isArray(e)) return e
                        }(e) || function(e, t) {
                            if (!(Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e))) return;
                            var n = [],
                                i = !0,
                                a = !1,
                                r = void 0;
                            try {
                                for (var o, s = e[Symbol.iterator](); !(i = (o = s.next()).done) && (n.push(o.value), !t || n.length !== t); i = !0);
                            } catch (e) {
                                a = !0, r = e
                            } finally {
                                try {
                                    i || null == s.return || s.return()
                                } finally {
                                    if (a) throw r
                                }
                            }
                            return n
                        }(e, t) || function() {
                            throw new TypeError("Invalid attempt to destructure non-iterable instance")
                        }()
                    }(location.href.split("?"), 2),
                    t = e[0],
                    n = e[1],
                    i = (0, s.fromQueryString)(n);
                if (i) {
                    if ("1" === i.m) return;
                    if (i.force_redirect_to_mvk) {
                        delete i.force_redirect_to_mvk;
                        var r = (0, s.toQueryString)(i);
                        return void(window.location = t.replace(/vk\.com/, "m.vk.com") + (r ? "?" + r : ""))
                    }
                }
                var o = (0, a.extend)(i, {
                        force_redirect_to_mvk: 1
                    }),
                    l = t + "?" + (0, s.toQueryString)(o);
                window.location = l
            }();
            window._ua || (window._ua = navigator.userAgent.toLowerCase());
            window.locDomain || (window.locDomain = location.host.toString().match(/[a-zA-Z]+\.[a-zA-Z]+\.?$/)[0]);
            window.locHost = location.host, window.locProtocol = location.protocol, window.locHash = location.hash.replace("#/", "").replace("#!", "")
        }, t.browserFeatures = t.mobPlatforms = t.browser = void 0;
        var i = n("zxIV"),
            a = n("t7n3"),
            r = n("2W9W"),
            o = n("J8bf"),
            s = n("cGUQ");
        var l = navigator.userAgent.toLowerCase(),
            c = {
                version: (l.match(/.+(?:me|ox|on|rv|it|era|opr|ie|edge)[\/: ]([\d.]+)/) || [0, "0"])[1],
                opera: /opera/i.test(l) || /opr/i.test(l),
                vivaldi: /vivaldi/i.test(l),
                amigo: /amigo.*mrchrome soc/i.test(l),
                msie: /msie/i.test(l) && !/opera/i.test(l) || /trident\//i.test(l) || /edge/i.test(l),
                msie6: /msie 6/i.test(l) && !/opera/i.test(l),
                msie7: /msie 7/i.test(l) && !/opera/i.test(l),
                msie8: /msie 8/i.test(l) && !/opera/i.test(l),
                msie9: /msie 9/i.test(l) && !/opera/i.test(l),
                msie_edge: /edge/i.test(l) && !/opera/i.test(l),
                mozilla: /firefox/i.test(l),
                chrome: /chrome/i.test(l) && !/edge/i.test(l),
                safari: !/chrome/i.test(l) && /webkit|safari|khtml/i.test(l),
                iphone: /iphone/i.test(l),
                ipod: /ipod/i.test(l),
                iphone4: /iphone.*OS 4/i.test(l),
                ipod4: /ipod.*OS 4/i.test(l),
                ipad: /ipad/i.test(l),
                android: /android/i.test(l),
                bada: /bada/i.test(l),
                mobile: /iphone|ipod|ipad|opera mini|opera mobi|iemobile|android/i.test(l),
                msie_mobile: /iemobile/i.test(l),
                safari_mobile: /iphone|ipod|ipad/i.test(l),
                opera_mobile: /opera mini|opera mobi/i.test(l),
                opera_mini: /opera mini/i.test(l),
                mac: /mac/i.test(l),
                windows7: /windows nt 6.1/i.test(l),
                windowsVista: /windows nt 6.0/i.test(l),
                windowsXp: /windows nt (5.2|5.1)/i.test(l),
                search_bot: /(yandex|google|stackrambler|aport|slurp|msnbot|bingbot|twitterbot|ia_archiver|facebookexternalhit)/i.test(l),
                smart_tv: /smart-tv|smarttv/i.test(l)
            };
        t.browser = c;
        t.mobPlatforms = {
            1: 1,
            2: 1,
            3: 1,
            4: 1,
            5: 1,
            8: 1
        };
        var u = {
            wheelEvent: "onwheel" in (0, i.ce)("div") ? "wheel" : void 0 !== document.onmousewheel ? "mousewheel" : c.mozilla ? "MozMousePixelScroll" : "DOMMouseScroll",
            hasBoundingClientRect: "getBoundingClientRect" in (0, i.ce)("div"),
            cmaEnabled: navigator.credentials && navigator.credentials.preventSilentAccess && window.vk && vk.cma
        };
        t.browserFeatures = u
    },
    gfsL: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i = o(n("29dZ")),
            a = o(n("pWCx")),
            r = o(n("14By"));

        function o(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        var s = function(e) {
            for (var t = [], n = 0, o = 0, s = 0; s < e.items.length; s++) {
                var l = e.items[s];
                t.push((0, a.default)(l, e.groupings, e.variantsData, e.priceTemplate)), o += l.quantity, l.deleted || (n += l.totalPrice)
            }
            return {
                class: "Cart",
                inner: [{
                    class: "CartItems",
                    inner: t
                }, {
                    class: "Cart__price",
                    inner: [{
                        tag: "span",
                        class: "Cart__price-inner",
                        inner: (0, r.default)({
                            count: o,
                            totalPrice: n,
                            priceTemplate: e.priceTemplate
                        })
                    }]
                }, (0, i.default)({
                    inner: lang("mobile_market_cart_go_to_order_button"),
                    stretch: !0,
                    size: "large",
                    on_click: ["Cart.goToOrder", e.group_id]
                })]
            }
        };
        t.default = s
    },
    giB6: function(e, t, n) {
        "use strict";
        var i;
        var a = {
            onClose: (0, ((i = n("+cqQ")) && i.__esModule ? i : {
                default: i
            }).default)(),
            inited: !1,
            width: !1,
            height: !1,
            onResize: null,
            _lastNav: !1,
            _opened: !1,
            _destroy: !1,
            init: function() {
                a.inited || (a.inited = !0, a.initEvents())
            },
            initEvents: function() {
                var e = function(e) {
                    a.fixHeight(vkNow() + 2e3, e)
                };
                addEvent(window, "orientationchange", e), onBodyResize(e), e(!0)
            },
            opened: function() {
                return hasClass("z_opened", window.bodyNode) !== a.opened && toggleClass("z_opened", window.bodyNode, a._opened), a._opened
            },
            toggle: function(e, t) {
                return !!checkEvent(e) || (a.opened() ? a.close(e, t) : a.open(e, t), !1)
            },
            open: function(e, t) {
                return !!checkEvent(e) || !a.opened() && (thover.clear(), a.init(), a._st = scrollTop(), a._lastNav = !1, addClass("z_opened", window.bodyNode), a._opened = !0, a.fixHeight(vkNow() + 2e3, !0), scrollTop(0), !1)
            },
            close: function(e, t) {
                return !!checkEvent(e) || !!a.opened() && (thover.clear(), val("z", ""), removeClass("z_opened", window.bodyNode), a._lastNav = {
                    cur: nav.cur,
                    path: nav.path,
                    params: nav.params,
                    hash: nav.hash
                }, a._opened = !1, a._destroy && (a._destroy(), a._destroy = !1), scrollTop(a._st, 1), a._st = !1, a.onResize = null, a.onClose(), !1)
            },
            updateSize: function() {
                var e = ge("z");
                e && e.offsetWidth && e.offsetHeight && (a.width = e.offsetWidth, a.height = e.offsetHeight, a.onResize && a.onResize())
            },
            fixHeight: function(e, t) {
                if ((a._opened || t) && (e && !(vkNow() > e) || t)) {
                    var n = getCw(),
                        i = getCh();
                    (a._lastWidth != n || a._lastHeight != i || t) && (a._lastWidth = n, a._lastHeight = i, setStyle("z", "height", i), a.updateSize(), scrollTop() || scrollTop(0)), clearTimeout(a._fixTo), a._fixTo = setTimeout(a.fixHeight, 50, e)
                }
            },
            create: function(e, t) {
                val("z", e), a._destroy = t
            }
        };
        window.zlayer = a
    },
    gmHQ: function(e, t, n) {
        "use strict";
        var i, a, r, o = n("UxAg"),
            s = m(n("gfsL")),
            l = m(n("HV9n")),
            c = m(n("r/ag")),
            u = m(n("el8Q")),
            d = m(n("14By")),
            f = function(e) {
                if (e && e.__esModule) return e;
                var t = A();
                if (t && t.has(e)) return t.get(e);
                var n = {};
                if (null != e) {
                    var i = Object.defineProperty && Object.getOwnPropertyDescriptor;
                    for (var a in e)
                        if (Object.prototype.hasOwnProperty.call(e, a)) {
                            var r = i ? Object.getOwnPropertyDescriptor(e, a) : null;
                            r && (r.get || r.set) ? Object.defineProperty(n, a, r) : n[a] = e[a]
                        }
                }
                n.default = e, t && t.set(e, n);
                return n
            }(n("t7Ww")),
            h = m(n("Y6JH")),
            p = m(n("gLrT"));

        function A() {
            if ("function" != typeof WeakMap) return null;
            var e = new WeakMap;
            return A = function() {
                return e
            }, e
        }

        function m(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }

        function _(e, t, n) {
            return t in e ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = n, e
        }

        function v(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }

        function g(e, t) {
            for (var n = 0; n < t.length; n++) {
                var i = t[n];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        }

        function y(e, t, n) {
            return t && g(e.prototype, t), n && g(e, n), e
        }
        var b = function() {
                function e(t) {
                    v(this, e), this.items = t, this.recalcTotalPrice()
                }
                return y(e, [{
                    key: "getItem",
                    value: function(e) {
                        return this.items.find(function(t) {
                            return t.id === e
                        })
                    }
                }, {
                    key: "changeQuantity",
                    value: function(e, t) {
                        var n = this.getItem(e);
                        n.quantity = t, n.totalPrice = n.quantity * n.price, n.totalPriceFormatted = langNumeric(n.totalPrice.toFixed(2), s.default.priceTemplate, !0), this.recalcTotalPrice(), this.onQuantityChange(n)
                    }
                }, {
                    key: "changeVariant",
                    value: function(e, t, n, a) {
                        var r = this,
                            o = Object.assign([], e.variants, _({}, t, n));
                        null !== a && (o[1] = a), ajax.post("market.php", {
                            act: "cart_change_variant",
                            grouping_id: e.groupingId,
                            group_id: e.groupId,
                            item_id: e.itemId,
                            variants: o,
                            hash: i
                        }, {
                            loader: !0,
                            onDone: function(e) {
                                var t = r.items.findIndex(function(t) {
                                    return t.id === e.id
                                });
                                r.items = Object.assign([], r.items, _({}, t, e)), r.recalcTotalPrice(), r.onVariantChanged(e)
                            },
                            onFail: function() {
                                r.onVariantChanged(e)
                            }
                        })
                    }
                }, {
                    key: "recalcTotalPrice",
                    value: function() {
                        this.totalPrice = this.items.reduce(function(e, t) {
                            return e + (t.deleted ? 0 : t.totalPrice)
                        }, 0)
                    }
                }, {
                    key: "deleteItem",
                    value: function(e) {
                        var t = this.getItem(e);
                        if (t) {
                            ajax.post("market.php", {
                                act: "cart_change_quantity",
                                group_id: t.groupId,
                                item_id: t.itemId,
                                quantity: 0,
                                hash: i
                            }, {
                                loader: !0
                            });
                            var n = this.items.findIndex(function(e) {
                                return e.id === t.id
                            });
                            this.items = this.items.slice(0, n).concat(this.items.slice(n + 1)), this.recalcTotalPrice(), this.onItemDelete(t.id)
                        }
                    }
                }]), e
            }(),
            w = function() {
                function e(t) {
                    var n = this;
                    v(this, e), this.openDeletePopup = function(e) {
                        var t = (0, f.default)({
                            class: "CartItem__deletePopup",
                            items: [(0, f.ModalMenuBtn)({
                                attrs: {
                                    "data-item-id": e
                                },
                                inner: [{
                                    class: "CartItem__deletePopupTrashIcon",
                                    inner: (0, h.default)("market", "cart_trash")
                                }, {
                                    tag: "span",
                                    inner: lang.mobile_market_cart_delete_item
                                }],
                                onclick: ["Cart.view.deleteItem", "this"]
                            }), (0, f.ModalMenuBtn)({
                                class: "CartItem__deletePopupCancelBtn",
                                theme: "secondary",
                                size: "large",
                                inner: lang.mobile_cancel,
                                onclick: "Cart.view.closeDeletePopup"
                            })]
                        });
                        n._deletePopupEl = c.default.open(Wd.elem(t), !0)
                    }, this.closeDeletePopup = function() {
                        c.default.close(n._deletePopupEl)
                    }, this.changeQuantity = function(e) {
                        var t = Number(e.$btn.dataset.itemId);
                        c.default.close(n._quantityPopupEl);
                        var a = n.vm.getItem(t),
                            o = n.vm.popupQuantity;
                        o && (r.changeQuantity(a.id, o), ajax.post("market.php", {
                            act: "cart_change_quantity",
                            group_id: a.groupId,
                            item_id: a.itemId,
                            quantity: o,
                            hash: i
                        }, {
                            loader: !0
                        })), n._quantityPopupEl = null, n.vm.popupQuantity = null
                    }, this.changeVariant = function(e, t, i) {
                        var a = e.value,
                            r = null;
                        if (0 === i) {
                            var l = s.default.groupings[t.groupingId][a];
                            r = Object.keys(l).find(function(e) {
                                return l[e]
                            })
                        }(0, o.$$)(".CartItem__variantSelect", e.closest(".CartItem__properties")).forEach(function(e) {
                            e.setAttribute("disabled", "")
                        }), n.vm.changeVariant(t, i, a, r)
                    }, this.deleteItem = function(e) {
                        var t = Number(e.dataset.itemId);
                        n.vm.deleteItem(t), n.closeDeletePopup()
                    }, this.vm = t, this.vm.onQuantityChange = function(e) {
                        var t = n.getItemEl(e.id);
                        (0, o.$)(".CartItem__quantity", t).innerHTML = langNumeric(e.quantity, lang.mobile_market_items_count_short), (0, o.$)(".CartItem__price", t).innerHTML = (0, p.default)(e.totalPrice, s.default.priceTemplate), n.renderTotalPrice()
                    }, this.vm.onVariantChanged = function(e) {
                        n.getItemEl(e.id).outerHTML = Wd.html((0, l.default)(e, s.default.groupings, s.default.variantsData, s.default.priceTemplate)), n.renderTotalPrice()
                    }, this.vm.onItemDelete = function(e) {
                        n.getItemEl(e).remove(), n.renderTotalPrice()
                    }
                }
                return y(e, [{
                    key: "getListEl",
                    value: function() {
                        return (0, o.$)(".CartItems")
                    }
                }, {
                    key: "getItemEl",
                    value: function(e) {
                        return (0, o.$)('[data-id="'.concat(e, '"]'), this.getListEl())
                    }
                }, {
                    key: "renderTotalPrice",
                    value: function() {
                        var e = this.vm.items.reduce(function(e, t) {
                            return e + t.quantity
                        }, 0);
                        (0, o.$)(".Cart__price").innerHTML = Wd.html((0, d.default)({
                            count: e,
                            totalPrice: r.totalPrice,
                            priceTemplate: s.default.priceTemplate
                        }))
                    }
                }, {
                    key: "openQuantityChangePopup",
                    value: function(e) {
                        var t = this.vm.getItem(e),
                            n = (0, u.default)(t);
                        this._quantityPopupEl = c.default.open(Wd.elem(n), !0)
                    }
                }, {
                    key: "setQuantity",
                    value: function(e) {
                        var t = Math.max(1, Math.min(Number(e.value), s.default.maxCartItemQuantity));
                        "" !== e.value && (e.value = t), this.vm.popupQuantity = t
                    }
                }]), e
            }();
        s.default.init = function(e) {
            s.default.groupings = e.groupings, s.default.variantsData = e.variantsData, s.default.priceTemplate = e.priceTemplate, s.default.maxCartItemQuantity = e.max_cart_item_quantity, i = e.hash, a = e.items, r = new b(a), s.default.view = new w(r)
        }, s.default.goToOrder = function(e) {
            nav.go("/cart_order".concat(e))
        }
    },
    gunf: function(e, t, n) {
        "use strict";
        window.LoginHistory = {
            _onSubmit: function(e, t, n) {
                var i = geByClass1("loginHistory__iframe");
                preventEvent(e), t.submit(), addEvent(i, "load", function() {
                    return nav.go(n, null, {
                        isForm: !0
                    })
                })
            }
        }
    },
    gy8s: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("9Hyc")) && i.__esModule ? i : {
            default: i
        };
        n("hJNM");
        var r = a.default;
        t.default = r, window.Unfold = a.default
    },
    h1CJ: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.open = function(e, t, n) {
            var i = (0, a.default)({
                class: "CopyrightPopup",
                header: {
                    title: getLang("mobile_wall_post_copyright_source")
                },
                content: {
                    inner: [t, {
                        class: "Popup__buttons",
                        inner: [Btn({
                            class: "Popup__button",
                            inner: getLang("mobile_wall_post_copyright_go"),
                            theme: "regular",
                            use_native_onclick: !0,
                            on_click: "CopyrightPopup.go(this, '".concat(n, "')")
                        })]
                    }]
                }
            });
            a.default.open(Wd.elem(i), !0)
        }, t.go = function(e, t) {
            if (a.default.close(e), t.startsWith("/story")) return void Stories.init(t.substr(1), {
                source: "view_source"
            });
            var n;
            if (n = /^\/?narrative(-?\d+)_(\d+)(\/?([a-z0-9_-]+))?$/i.exec(t)) return void Stories.init("".concat(n[1], "/narrative").concat(n[1], "_").concat(n[2]), {
                source: "view_source"
            });
            /^@-?[\d\w._]+-[\d\w.-]+/.test(t.substr(1)) && (t += "?from=".concat(nav.cur));
            return nav.go(t, null)
        };
        n("OcsD");
        var i, a = function(e) {
            if (e && e.__esModule) return e;
            var t = r();
            if (t && t.has(e)) return t.get(e);
            var n = {};
            if (null != e) {
                var i = Object.defineProperty && Object.getOwnPropertyDescriptor;
                for (var a in e)
                    if (Object.prototype.hasOwnProperty.call(e, a)) {
                        var o = i ? Object.getOwnPropertyDescriptor(e, a) : null;
                        o && (o.get || o.set) ? Object.defineProperty(n, a, o) : n[a] = e[a]
                    }
            }
            n.default = e, t && t.set(e, n);
            return n
        }(n("Po+v"));
        (i = n("z9sQ")) && i.__esModule;

        function r() {
            if ("function" != typeof WeakMap) return null;
            var e = new WeakMap;
            return r = function() {
                return e
            }, e
        }
    },
    h27l: function(e, t, n) {
        "use strict";
        n("PovR");

        function i(e) {
            pushNotifier.canBeEnabled().then(function(t) {
                var n = !!e.$control && geByTag1("input", e.$control);
                n && (t ? pushNotifier.setupSubscription().then(function() {
                    ! function(e) {
                        var t = ce("input", {
                            type: "submit"
                        }, {
                            display: "none"
                        });
                        e.$control.form.appendChild(t), ajax.click(t), e.$control.form.removeChild(t)
                    }(e)
                }).catch(function(e) {
                    PushNotifier.PUSH_NOTIFIER_BLOCKED_BY_BROWSER_SETTINGS === e ? (n.checked = !1, addClass("Popup_open", geByClass1("pageAllowPushPopup"))) : n.checked = !1
                }) : n.checked = !1)
            })
        }
        window.SettingsNotifyPush = {}, SettingsNotifyPush._onSwitch = i
    },
    hJNM: function(e, t, n) {
        "use strict";
        var i = function(e) {
                if (e && e.__esModule) return e;
                var t = s();
                if (t && t.has(e)) return t.get(e);
                var n = {};
                if (null != e) {
                    var i = Object.defineProperty && Object.getOwnPropertyDescriptor;
                    for (var a in e)
                        if (Object.prototype.hasOwnProperty.call(e, a)) {
                            var r = i ? Object.getOwnPropertyDescriptor(e, a) : null;
                            r && (r.get || r.set) ? Object.defineProperty(n, a, r) : n[a] = e[a]
                        }
                }
                n.default = e, t && t.set(e, n);
                return n
            }(n("jk6M")),
            a = o(n("AXyT")),
            r = o(n("9Hyc"));

        function o(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }

        function s() {
            if ("function" != typeof WeakMap) return null;
            var e = new WeakMap;
            return s = function() {
                return e
            }, e
        }
        Object.assign(r.default, {
            onOpen: befall.kind("unfoldName"),
            getByName: function(e) {
                return $(c.unfoldByName(e))
            },
            setActive: function(e, t) {
                var n, i;
                1 === arguments.length ? e = (i = e).closest(c.unfold) : i = e.$(c.itemByName(t));
                if ((n = e.$(c.itemActive)) && i) {
                    n.classList.remove(l.itemActive), i.classList.add(l.itemActive);
                    var a = e.$(c.triggerText),
                        r = i.$(c.itemText);
                    a.innerText = r.textContent.trim()
                }
            },
            setCount: function(e, t, n) {
                var i = e.$(c.itemCountByName(t));
                a.default.setValue(i, n)
            },
            setTitle: function(e, t, n) {
                e.$(c.itemByName(t)).$(c.itemText).innerText = n
            },
            toggleItemEnabled: function(e, t) {
                var n = !(arguments.length > 2 && void 0 !== arguments[2]) || arguments[2],
                    i = e.$(c.itemByName(t));
                i && i.classList.toggle(l.itemDisabled, !n)
            },
            changePosition: function(e) {
                var t, n = arguments.length > 1 && void 0 !== arguments[1] && arguments[1],
                    i = arguments.length > 2 && void 0 !== arguments[2] && arguments[2];
                e.classList.remove(l.positionTopLeft, l.positionTopRight, l.positionBottomLeft, l.positionBottomRight), t = n ? i ? l.positionTopLeft : l.positionBottomLeft : i ? l.positionTopRight : l.positionBottomRight;
                e.classList.add(t)
            }
        }), r.default._onTriggerMouseDown = d, r.default._onTriggerClick = u;
        var l = {
                itemActive: "Unfold__item_active",
                itemDisabled: "Unfold__item_disabled",
                open: "Unfold_open",
                positionTopLeft: "Unfold_position_topLeft",
                positionTopRight: "Unfold_position_topRight",
                positionBottomLeft: "Unfold_position_bottomLeft",
                positionBottomRight: "Unfold_position_bottomRight"
            },
            c = {
                unfold: ".Unfold",
                unfoldByName: function(e) {
                    return '.Unfold[data-name="'.concat(e, '"]')
                },
                itemActive: ".".concat(l.itemActive),
                itemByName: function(e) {
                    return ".Unfold__item_name_".concat(e)
                },
                itemCountByName: function(e) {
                    return "".concat(c.itemByName(e), " .Unfold__itemCount")
                },
                item: ".Unfold__item",
                itemDisabled: ".".concat(l.itemDisabled),
                triggerText: ".Unfold__triggerText",
                itemText: ".Unfold__itemText",
                popup: ".Unfold__popup"
            };

        function u(e) {
            preventEvent(e)
        }

        function d(e) {
            var t = e.closest(c.unfold),
                n = i.isTouch ? "touchend" : "mousedown",
                a = i.isTouch ? "touchend" : "mouseup",
                o = !i.isTouch && window.innerWidth < 882,
                s = t.getAttribute("data-name"),
                u = !1;

            function d() {
                t.classList.remove(l.open), document.removeEventListener("keydown", h), document.removeEventListener("touchmove", f), document.removeEventListener(n, A, !0), document.removeEventListener(a, p, !0)
            }

            function f(e) {
                e.target.closest(c.popup) || d(), u = !0
            }

            function h(e) {
                27 === e.keyCode && d()
            }

            function p() {
                document.addEventListener(n, A, !0)
            }

            function A(e) {
                if (u) u = !1;
                else {
                    var t = e.target.closest(c.itemDisabled);
                    if (!t) {
                        var n = e.target.closest("".concat(c.item, "[href]"));
                        if (n) return void(i.default.safari && i.default.safari_mobile && i.default.version < 9 ? setTimeout(d, 500) : (cancelEvent(e), nav.onBeforeGo(function() {
                            d()
                        }), nav.go(n)));
                        if (n = e.target.closest("".concat(c.item, "[onmousedown]"))) return void setTimeout(d);
                        if (n = e.target.closest("label".concat(c.item))) return void(i.default.safari && i.default.safari_mobile && i.default.version < 9 ? setTimeout(d, 500) : setTimeout(d));
                        if (n = e.target.closest("input[onchange]")) return void(i.default.safari && i.default.safari_mobile && i.default.version < 9 ? setTimeout(d, 500) : setTimeout(d))
                    }(i.isTouch || o || t) && (e.preventDefault(), e.stopImmediatePropagation()), (o || !i.isTouch && t) && document.addEventListener("click", m, !0), t || d()
                }
            }

            function m(e) {
                e.preventDefault(), e.stopImmediatePropagation(), document.removeEventListener("click", m, !0)
            }
            s && r.default.onOpen(s)(), t.classList.add(l.open), document.addEventListener("keydown", h), document.addEventListener("touchmove", f), i.default.msie_mobile ? document.addEventListener(a, p, !0) : document.addEventListener(n, A, !0)
        }
    },
    hOuX: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.random = function() {
            try {
                if (window.crypto) {
                    var e = new Int32Array(1);
                    return crypto.getRandomValues(e), Math.abs(e.reduce(function(e, t) {
                        return e + t
                    }))
                }
            } catch (e) {}
            return intval(rand(0, i).toFixed(0))
        }, t.MAX_INTERGER = t.MAX_SAFE_INTEGER = void 0;
        t.MAX_SAFE_INTEGER = 9007199254740991;
        var i = 2147483647;
        t.MAX_INTERGER = i
    },
    "hb+4": function(e, t, n) {
        "use strict";
        var i = n("OcsD"),
            a = d(n("TYsd")),
            r = u(n("t7Ww")),
            o = d(n("r/ag")),
            s = u(n("5s+S")),
            l = d(n("BoyB"));

        function c() {
            if ("function" != typeof WeakMap) return null;
            var e = new WeakMap;
            return c = function() {
                return e
            }, e
        }

        function u(e) {
            if (e && e.__esModule) return e;
            var t = c();
            if (t && t.has(e)) return t.get(e);
            var n = {};
            if (null != e) {
                var i = Object.defineProperty && Object.getOwnPropertyDescriptor;
                for (var a in e)
                    if (Object.prototype.hasOwnProperty.call(e, a)) {
                        var r = i ? Object.getOwnPropertyDescriptor(e, a) : null;
                        r && (r.get || r.set) ? Object.defineProperty(n, a, r) : n[a] = e[a]
                    }
            }
            return n.default = e, t && t.set(e, n), n
        }

        function d(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        var f = 2;
        window.Replies = {
            init: function(e) {
                ! function(e) {
                    e && function() {
                        var e = (0, i.geByClass1)("wall_replies"),
                            t = (0, i.domLC)(e);
                        if (!t || !(0, i.hasClass)("RepliesThreadNext", t)) return;
                        var n = (0, i.geByClass1)("RepliesThreadNext__link", t);
                        (0, i.autoScroll)(function() {
                            if ((0, i.domPN)(t) && !(0, i.hasClass)("RepliesThreadNext_loading", t)) return n
                        }, RepliesNext, {
                            no_cache: !0
                        })
                    }();
                    (function() {
                        var e = (0, i.ge)("reply_field");
                        if (!e || (0, i.hasClass)("RepliesField_static", e)) return;
                        var t = window.onBodyScroll,
                            n = !1;
                        t((0, i.throttle)(function(t) {
                            var a = t + (0, i.getCh)(),
                                r = (0, i.getH)(e),
                                o = a < (0, i.getY)(e) + r;
                            o && !n ? ((0, i.setStyle)(e, {
                                height: r
                            }), (0, i.addClass)("RepliesField_fixed", e)) : !o && n && ((0, i.removeClass)("RepliesField_fixed", e), (0, i.setStyle)(e, {
                                height: null
                            })), n = o
                        }, 10)), (0, i.onBodyScrollForce)()
                    })(),
                    function(e) {
                        var t = (0, i.ge)("replies_to_last"),
                            n = (0, i.geByClass1)("RepliesWrap");
                        if (!t || !n) return;
                        var a = (0, i.ge)("reply_field"),
                            r = (0, i.hasClass)("RepliesField_static", a),
                            o = (0, i.getY)(n),
                            s = window.onBodyScroll,
                            l = !1;
                        m(), s((0, i.throttle)(function(e) {
                            var s = e + (0, i.getCh)(),
                                c = a && !r ? (0, i.getY)(a) - h : o + (0, i.getH)(n) - h,
                                u = o < e && s < c;
                            u !== l && ((0, i.toggleClass)("Replies_last_shown", t, u), l = u)
                        }, 10))
                    }()
                }(e);
                var t = (0, i.ge)("reply_field"),
                    n = (0, i.ge)("reply_field_text");
                mediaUpload && t && (mediaUpload.onStart(_), mediaUpload.onRemove(function() {
                    _(), n.focus()
                }));
                if (t) {
                    var a = window.cur;
                    a.onStickersToggleCallbacks = a.onStickersToggleCallbacks || [], a.onStickersToggleCallbacks.push(function(e) {
                        if ((0, i.onBodyScrollForce)(), A(), e) {
                            var t = (0, i.geByTag1)("a", "stickers_panel");
                            t && t.focus()
                        } else n.focus()
                    }), p()
                }
            },
            replyTo: function(e, t, n, a) {
                if ((0, i.checkEvent)(e)) return !0;
                n = n || 0, (0, i.geByClass)("ReplyItem_active").forEach(function(e) {
                    (0, i.removeClass)("ReplyItem_active", e)
                });
                var r, o = (0, i.ge)("reply_field"),
                    s = (0, i.ge)("reply_field_text"),
                    l = (0, i.hasClass)("RepliesField_static", o),
                    c = !!window.post && window.post.replyNamesRE(),
                    u = (0, i.val)(s),
                    d = "";
                if (n) {
                    if (r = (0, i.ge)("wall_reply" + t + "_" + n))
                        if (l || (0, i.addClass)("ReplyItem_active", r), !(0, i.hasClass)("ReplyItem_deleted", r) && a) {
                            var f = window.cur.replyNames[a] || {},
                                h = f[0] || "";
                            d = f[1] || "", u = u ? c ? u.replace(c, h) : u : h, window.post && window.post.onReplyClick(!0, h)
                        } else u = c ? u.replace(c, "") : u
                } else u = c ? u.replace(c, "") : u;
                (0, i.val)(s, replaceEntities(u));
                var m = (0, i.ge)("reply_field_to"),
                    _ = (0, i.geByClass1)("RepliesField__infoName", m);
                (0, i.val)(_, (0, i.htsc)(d)), (0, i.toggleClass)("RepliesField__infoItem_shown", m, n && d), (0, i.toggleClass)("RepliesField__infoItem_shown", "reply_field_to_empty", n && !d);
                var v = (0, i.ge)("reply_field_info"),
                    g = (0, i.ge)("reply_field_from");
                if ((0, i.toggleClass)("RepliesField__info_shown", v, n || g), (0, i.toggleClass)("RepliesField__info_single", v, n && !g || !n && g), (0, i.val)("field_reply_to", n), (0, i.val)("field_reply_to_name", n && d ? "1" : ""), window.cur.replyTo = n, l)
                    if (r) Unfold.changePosition(Unfold.getByName("attaches"), !0, !1), domInsertAfter(o, r);
                    else {
                        Unfold.changePosition(Unfold.getByName("attaches"), !0, !0);
                        var y = (0, i.geByClass1)("wall_replies");
                        domInsertBefore(o, y)
                    }
                return A(), p(), elfocus(s), (0, i.cancelEvent)(e)
            },
            showMoreActions: function(e, t) {
                var n = (0, i.ge)("reply_more_" + e);
                if (!n) return;
                var s = (0, i.geByClass)("ReplyItem__action", n),
                    l = [];
                s.forEach(function(e) {
                    l.push((0, r.ModalMenuBtn)({
                        inner: (0, i.val)(e),
                        onclick: "Replies.onClickMoreAction('" + e.id + "', event)"
                    }))
                });
                var c = (0, r.default)({
                        close: !0,
                        items: l
                    }),
                    u = (0, i.ceFromString)(a.default.html(c));
                u = o.default.open(u, !0, {
                    oncloseCallback: function() {
                        var t = (0, i.ge)("reply_more" + e);
                        t && t.focus()
                    }
                });
                var d = (0, i.geByClass1)("ModalMenu__btn", u);
                d && d.focus();
                return (0, i.cancelEvent)(t)
            },
            onClickMoreAction: function(e, t) {
                t && o.default.close(t.target);
                var n = (0, i.ge)(e);
                if (!n) return;
                n.click()
            },
            onFieldInput: p,
            toggleStickers: function(e, t) {
                return window.post.stickersToggle(e), (0, i.cancelEvent)(t)
            },
            replyAsShow: function(e, t) {
                var n, s = !!window.cur.replyAs;
                s ? n = y(window.cur.replyAs) : (n = a.default.wrap((0, l.default)({
                    large: !0
                })), function(e) {
                    if (window.cur.replyAsLoading) return;
                    var t = window.ajax;
                    window.cur.replyAsLoading = !0, t.post("/wall.php", {
                        act: "get_reply_clubs_list",
                        post_oid: e,
                        modal: 1
                    }, {
                        onDone: function(e) {
                            window.cur.replyAs = e;
                            var t = (0, i.ge)("reply_as_users_list");
                            if (t) {
                                var n = y(e);
                                (0, i.val)(t, a.default.html(n));
                                var r = (0, i.geByClass1)("ModalMenuUserList__item", t);
                                r && r.focus()
                            }
                            delete window.cur.replyAsLoading
                        },
                        onFail: function() {
                            delete window.cur.replyAsLoading
                        }
                    })
                }(t));
                var c = (0, r.default)({
                        title: (0, i.getLang)("mobile_wall_reply_as_title"),
                        close: !0,
                        items: [{
                            id: "reply_as_users_list",
                            inner: n
                        }]
                    }),
                    u = (0, i.ceFromString)(a.default.html(c));
                if (o.default.open(u, !0), s) {
                    var d = (0, i.geByClass1)("ModalMenuUserList__item", (0, i.ge)("reply_as_users_list"));
                    d && d.focus()
                }
                return (0, i.cancelEvent)(e)
            },
            replyAsChange: function(e, t, n, a) {
                var o = (0, i.ge)("reply_field_from"),
                    s = (0, i.geByClass1)("RepliesField__infoName", o);
                return (0, i.val)(s, (0, i.htsc)(a)), (0, i.val)("field_from_oid", n), r.default.close(t), (0, i.ge)("reply_field_text").focus(), (0, i.cancelEvent)(e)
            },
            checkSendButton: function(e) {
                if (!g()) return (0, i.cancelEvent)(e)
            },
            onClickLastReplies: function(e, t) {
                var n = (0, i.geByClass1)("wall_replies"),
                    a = (0, i.domLC)(n),
                    r = a && (0, i.hasClass)("RepliesThreadNext", a);
                if (r) {
                    var o = (0, i.geByClass1)("Loading", a);
                    o || (o = (0, i.ceFromString)((0, l.default)({})), append(o, a)), (0, i.addClass)("RepliesThreadNext_loading", a)
                }
                if ((0, i.removeClass)("RepliesWrap_last_shown", e), window.scrollTo(0, document.body.scrollHeight), r) return a.focus(), ajax.click(e, window.RepliesLast);
                a && ((0, i.hasClass)("RepliesThread", a) && (a = (0, i.domPS)(a)), (0, i.hasClass)("ReplyItem", a) && (0, i.geByClass1)("ReplyItem__name", a).focus());
                return (0, i.cancelEvent)(t)
            }
        };
        var h = 50;

        function p() {
            var e = (0, i.ge)("reply_field_text"),
                t = (0, i.ge)("reply_field_text_fake"),
                n = e.value;
            t.innerText = n, "\n" === (0, i.last)(n) && (t.innerHTML += "&nbsp;");
            var a = (0, i.getH)(t);
            (0, i.getH)(e) !== a && ((0, i.setStyle)(e, {
                height: a
            }), A()), v()
        }

        function A() {
            var e = (0, i.ge)("reply_field");
            (0, i.hasClass)("RepliesField_static", e) || (0, i.hasClass)("RepliesField_fixed", e) && ((0, i.setStyle)(e, {
                height: (0, i.getH)((0, i.geByClass1)("RepliesField_wrap", e))
            }), m(), (0, i.onBodyScrollForce)())
        }

        function m() {
            var e = (0, i.ge)("replies_to_last"),
                t = (0, i.ge)("reply_field");
            if (e && t && !(0, i.hasClass)("RepliesField_static", t)) {
                var n = domData(e, "bottom");
                n || (n = parseInt(getStyle(e, "bottom")) || 20, domData(e, "bottom", n)), (0, i.setStyle)(e, "bottom", (0, i.getH)(t) + parseInt(n))
            }
        }

        function _() {
            v(), A();
            var e = (mediaUpload ? mediaUpload.getAttachesCount() : 0) < f;
            ["photo_device", "photo", "video", "audio", "doc"].forEach(function(t) {
                Unfold.toggleItemEnabled(Unfold.getByName("attaches"), t, e)
            })
        }

        function v() {
            var e = (0, i.ge)("nc_submit");
            e && (0, i.toggleClass)("RepliesField__action_send_active", e, g())
        }

        function g() {
            var e = ((0, i.ge)("reply_field_text") || {}).value;
            return trim(e) || mediaUpload && mediaUpload.getAttachesCount()
        }

        function y(e) {
            var t = [];
            return e.forEach(function(e) {
                t.push((0, s.ModalMenuUserListItem)({
                    href: e[2],
                    image: e[1],
                    name: e[3],
                    onclick: "return Replies.replyAsChange(event, this, ".concat(parseInt(e[0]), ", '").concat(e[4], "')")
                }))
            }), (0, s.default)({
                users: t
            })
        }
    },
    hclJ: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i = s(n("z9sQ")),
            a = s(n("29dZ")),
            r = s(n("Y6JH")),
            o = n("fdw3");

        function s(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        var l = function() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                t = !(!e.type || e.image),
                n = {
                    class: i.default.class("SnackbarItem__cell", {
                        left: !0,
                        image: !!e.image,
                        icon: t
                    })
                },
                s = {
                    class: i.default.class("SnackbarItem__cell", {
                        right: !0,
                        avatar: !!e.avatar
                    })
                },
                l = !1,
                c = !1;
            if (e.type) {
                l = !0;
                var u = null;
                switch (e.type) {
                    case 1:
                        u = (0, r.default)("common", "snackbar_done_24");
                        break;
                    case 2:
                        u = (0, r.default)("common", "snackbar_error_24");
                        break;
                    case 3:
                        u = (0, r.default)("common", "favorites_24")
                }
                n.inner = {
                    class: "SnackbarItem__icon",
                    inner: u
                }
            }
            e.image && (l = !0, n.inner = {
                class: "SnackbarItem__image",
                inner: {
                    tag: "img",
                    src: e.image
                }
            });
            e.action && (c = !0, s.inner = (0, a.default)({
                theme: "none",
                class: "SnackbarItem__action",
                url: e.action.url,
                on_click: e.action.onclick,
                use_native_onclick: !0,
                inner: Wd.wrap(e.action.text),
                attrs: e.action.attrs
            }));
            e.avatar && (c = !0, s.inner = {
                tag: "img",
                class: "SnackbarItem__avatar",
                src: e.avatar
            });
            return {
                style: e.style ? e.style : "",
                class: (0, o.concatValues)("SnackbarItem_".concat(e.id, " "), i.default.class("SnackbarItem", {
                    static: !!e.static,
                    vertical: !!e.vertical,
                    hasIcon: t
                }, "--")),
                attrs: {
                    "data-snackbar-id": e.id
                },
                inner: [{
                    class: "SnackbarItem__table",
                    inner: [l ? n : null, e.text ? {
                        class: i.default.class("SnackbarItem__cell", {
                            text: !0
                        }),
                        inner: {
                            class: "SnackbarItem__text",
                            inner: Wd.wrap(e.text)
                        }
                    } : null, c ? s : null]
                }]
            }
        };
        t.default = l
    },
    hm4I: function(e, t, n) {
        "use strict";
        var i;
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var a = ((i = n("C7ju")) && i.__esModule ? i : {
            default: i
        }).default;
        t.default = a
    },
    hrk0: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.NewPostBlock = o, t.default = void 0;
        var i = n("n9zS"),
            a = n("80md"),
            r = n("NJ1W");

        function o(e) {
            return {
                inner: [(0, r.Row)({
                    inner: [(0, r.Col)({
                        inner: [(0, i.Circle)({
                            size: 36
                        })],
                        auto: !0
                    }), (0, r.Col)({
                        inner: [(0, a.Line)()]
                    }), (0, r.Col)(), (0, r.Col)({
                        inner: [(0, i.Circle)({
                            size: 20
                        })],
                        auto: !0
                    })],
                    justify: "center"
                })],
                class: "SkeletonNewPostBlock",
                tag: "div"
            }
        }
        var s = o;
        t.default = s
    },
    hw56: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.getKeyboardState = function(e) {
            var t = store.mail.cur.keyboards,
                n = t[e];
            n || (n = t[e] = {});
            return n
        }, t.getKeyboardType = function() {
            if (!store.mail.cur) return "";
            return store.mail.cur.keyboardType || ""
        }, t.setKeyboardType = function(e) {
            if (!store.mail.cur) return;
            store.mail.cur.keyboardType = e
        }, t.loadDrafts = r, t.getPeerDraft = function(e, t) {
            var n = r(e);
            return n[t] || (n[t] = {})
        }, t.setPeerDraft = function(e, t, n, i) {
            var r = store.mail.cur.drafts;
            r || (r = store.mail.cur.drafts = r || {});
            if (i) {
                var o = r[t],
                    s = o && o.editing && o.editing.id === i ? o.editing : void 0;
                r[t] = a({}, o, {
                    editing: a({}, s, n, {
                        id: i
                    })
                })
            } else r[t] = a({}, r[t], n, {
                editing: void 0
            });
            lsSet("mail_drafts_".concat(e), r)
        }, t.pushPeerAttachments = function(e, t) {
            var n = store.mail.peers[e];
            n.attachmentsStack.push(n.attachmentsHTML), n.attachmentsHTML = t
        }, t.popPeerAttachments = function(e) {
            var t = store.mail.peers[e],
                n = t.attachmentsStack.pop();
            n || (n = Brick({
                mix: "cp_attached_wrap",
                attrs: 'id="attached_wrap"'
            }));
            t.attachmentsHTML = n
        }, t.setPeerTyping = function(e, t) {
            var n = store.mail.cur.typings[e];
            n || (n = store.mail.cur.typings[e] = {});
            "text" !== t.type && "audio" !== t.type || (t.count ? n[t.type] = t : n[t.type] = null);
            if (n.text && n.audio) {
                var i = s(n.text, n.audio);
                n.mixed = i.count > 1 ? i : null
            } else n.mixed = null
        }, t.removePeerTypingUser = function(e, t) {
            var n = store.mail.cur.typings[e];
            if (!n) return;
            var i = n.audio,
                a = n.text;
            i && ((i = o(i, t)).count ? n.audio = i : n.audio = null);
            a && ((a = o(a, t)).count ? n.text = a : n.text = null);
            if (n.text && n.audio) {
                var r = s(n.text, n.audio);
                n.mixed = r.count > 1 ? r : null
            } else n.mixed = null
        }, t.filterPeerTypingUser = o, t.replacePeer = function(e, t) {
            var n = store.mail,
                i = n.scraps.folder,
                a = i.indexOf(e); - 1 !== a && (t ? i.splice(a, 1, t) : i.splice(a, 1));
            Object.keys(n.rolls.folder).forEach(function(i) {
                var a = n.rolls.folder[i],
                    r = a.indexOf(e); - 1 !== r && (t ? a.splice(r, 1, t) : a.splice(r, 1))
            }), t && (n.rolls.peer[t] = n.rolls.peer[e], n.reached.peer.before[t] = n.reached.peer.before[e], n.reached.peer.after[t] = n.reached.peer.after[e]);
            e !== t && (n.rolls.peer[e] && n.rolls.peer[e].forEach(function(i) {
                var a = n.msgs[i];
                a && (t ? (a.peerId = t, a.authorId === e && (a.authorId = t)) : delete n.msgs[i])
            }), delete n.rolls.peer[e], delete n.reached.peer.before[e], delete n.reached.peer.after[e], delete n.members[e], delete n.peers[e])
        }, t.removePeer = function(e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},
                n = store.mail;
            if (!1 !== t.lists) {
                var i = n.scraps.folder,
                    a = i.indexOf(e); - 1 !== a && i.splice(a, 1), Object.keys(n.rolls.folder).forEach(function(t) {
                    var i = n.rolls.folder[t],
                        a = i.indexOf(e); - 1 !== a && i.splice(a, 1)
                })
            }!1 !== t.msgs && n.rolls.peer[e] && n.rolls.peer[e].forEach(function(e) {
                n.msgs[e] && delete n.msgs[e]
            });
            !1 !== t.lists && (delete n.rolls.peer[e], delete n.reached.peer.before[e], delete n.reached.peer.after[e]);
            !1 !== t.data && (delete n.members[e], delete n.peers[e])
        }, t.addPeer = function(e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},
                n = store.mail;
            if (t.msgs) {
                var i = t.msgs;
                n.rolls.peer[e] = i, n.reached.peer.before[e] = !1, n.reached.peer.after[e] = !1
            } else n.rolls.peer[e] || (n.rolls.peer[e] = [], n.reached.peer.before[e] = !1, n.reached.peer.after[e] = !1);
            var a = n.msgs[n.rolls.peer[e][0]];
            n.rolls.folder.all.unshift(e), n.cur.folder && n.scraps.folder.unshift(e);
            a && (a.isUnread && n.rolls.folder.unread.unshift(e), a.isImportant && n.rolls.folder.important.unshift(e))
        }, t.addPendingMsg = function(e) {
            var t = store.mail.presend;
            t.pending[e.peerId] || (t.pending[e.peerId] = []);
            t.msgs[e.sendId] = e, t.pending[e.peerId].push(e.sendId)
        }, t.getPendingMsg = function(e, t) {
            var n = store.mail.presend;
            if (!n.pending[t]) return null;
            return n.msgs[e]
        }, t.removePendingMsg = function(e) {
            var t = store.mail.presend;
            if (!t.pending[e.peerId]) return;
            var n = e.sendId;
            delete t.msgs[n], t.pending[e.peerId] = t.pending[e.peerId].filter(function(e) {
                return e !== n
            })
        }, t.removeFailedMsg = function(e) {
            var t = store.mail.presend;
            if (!t.failed[e.peerId]) return;
            var n = e.sendId;
            delete t.msgs[n], t.failed[e.peerId] = t.failed[e.peerId].filter(function(e) {
                return e !== n
            })
        }, t.failAllPendingMsgs = function() {
            var e = store.mail.presend,
                t = {};
            Object.keys(e.msgs).forEach(function(n) {
                var i = e.msgs[n];
                i.pending = !1, i.failed = !0, t[i.peerId] || (t[i.peerId] = []), t[i.peerId].push(n)
            }, {}), e.pending = {}, e.failed = t
        }, t.queueToPresendMsgs = function(e) {
            var t = {};
            Object.keys(e.items).forEach(function(n) {
                var a = e.items[n];
                t[n] = (0, i.sendDataToMessage)(a.data.data, -1 !== e.failed.indexOf(n))
            });
            var n = {};
            e.pending.forEach(function(e) {
                var i = t[e];
                n[i.peerId] || (n[i.peerId] = []), n[i.peerId].push(e)
            }, {});
            var a = {};
            e.failed.forEach(function(e) {
                var n = t[e];
                a[n.peerId] || (a[n.peerId] = []), a[n.peerId].push(e)
            }, {}), store.mail.presend = {
                msgs: t,
                pending: n,
                failed: a
            }
        }, n("2IoG");
        var i = n("qHA9");

        function a() {
            return (a = Object.assign || function(e) {
                for (var t = 1; t < arguments.length; t++) {
                    var n = arguments[t];
                    for (var i in n) Object.prototype.hasOwnProperty.call(n, i) && (e[i] = n[i])
                }
                return e
            }).apply(this, arguments)
        }

        function r(e) {
            var t = store.mail.cur.drafts;
            return t || (t = lsGet("mail_drafts_".concat(e)), t = store.mail.cur.drafts = t || {}), t
        }

        function o(e, t) {
            var n = e.users.filter(function(e) {
                return e !== t
            });
            return n.length !== e.users.length && (e.count = e.count - (e.users.length - n.length), e.users = n), e
        }

        function s() {
            for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++) t[n] = arguments[n];
            return t.reduce(function(e, t) {
                return e.count += t.count, t.users.reduce(function(e, t) {
                    return -1 === e.users.indexOf(t) ? e.users.push(t) : e.count--, e
                }, e)
            }, {
                users: [],
                count: 0,
                type: "mixed"
            })
        }
    },
    hxrZ: function(e, t, n) {
        "use strict";
        var i = n("TxR4"),
            a = n("S6+Z"),
            r = n("qHA9"),
            o = window,
            s = o.preventEvent,
            l = o.onDOMReady,
            c = o.lsCheck,
            u = o.geByClass1,
            d = o.qs2obj,
            f = o.geByTag1,
            h = o.gpeByTag,
            p = o.addEvent,
            A = o.onBodyResize,
            m = o.removeEvent,
            _ = o.hide,
            v = o.each,
            g = o.show,
            y = o.vkNow,
            b = o.gpeByClass,
            w = o.attr,
            k = o.val,
            E = o.escapeRE,
            S = (o.hasClass, o.lsGet),
            C = o.isEmpty,
            M = o.lsSet,
            P = o.geByClass,
            T = o.setStyle,
            D = window.ajax,
            I = (window.page, window.post),
            x = window.Scroller,
            O = window.Stickers;
        window.StickersHints = function() {
            var e, t, n, o, L, B, R, N, j = 864e5,
                F = 300,
                H = 30,
                V = 64,
                U = 8,
                z = 4,
                W = !0,
                q = 0,
                $ = a.EMOJI_HINTS;

            function G() {
                var t = window.cur;
                if ((o = f("textarea", h("form", u("cp_sticker_btn")))) && !o.initialized) {
                    var i = function(t) {
                        var n = o.value.length;
                        e = n - q > 1, q = n, Q(), W && (! function() {
                            ee() && y() - te() > j * (2 + Math.random()) && Y();
                            e = function(e) {
                                e *= 1e3, ee() && e > te() && Y()
                            }, D.post("/attachments", {
                                _ajax: 1,
                                act: "stickers_hints_change_date"
                            }, {
                                onDone: e
                            });
                            var e
                        }(), W = !1)
                    };
                    o.initialized = !0, B = u("stickersHints"), L = u("stickersHints__content"), p(o, "focus", Q), p(o, "input", i), p(document, "click", X), A(K), A(ie), t.destroy.push(function() {
                        B = null, L = null, m(o = null, "focus", Q), m(o, "input", i), m(document, "click", X), A("__clear", K), A("__clear", ie), n && n.destroy(), q = 0
                    }), document.activeElement === o && Q()
                }
            }

            function Q() {
                if (o) {
                    t && clearTimeout(t);
                    var a, r = function(t) {
                        if (t.length > H) return "";
                        v($, function(e, n) {
                            var a = new RegExp("(\\s|^)(" + E(n[1]) + (")" == n[1][n[1].length - 1] ? "+" : "") + ")([\\s\\.,]|$)", "g");
                            t = t.replace(a, function(t, n, a, r) {
                                return (n || "") + (0, i.emojiByteHexToSymbol)(e) + (r || "")
                            })
                        }), 0 === t.indexOf(N) && (t = t.replace(N, ""));
                        t = t.toLowerCase().replace(/^(\s+)|([\.!\?]+)$/g, "").replace("", ""), e && (t = t.replace(/\s+$/, ""));
                        return t = (0, i.emojiRemoveSkinToneModifiers)(t)
                    }(o.value);
                    a = function(e) {
                        var i = r && e[r];
                        i ? t = setTimeout(function() {
                            var e = i.userStickers || [],
                                t = i.promotedStickers || [];
                            if (e.length > 0 || t.length > 0) {
                                var a = [];
                                v(e, function(e, t) {
                                    a.push(J({
                                        stickerId: t,
                                        query: r,
                                        isPromoted: !1
                                    }))
                                }), v(t, function(e, t) {
                                    a.push(J({
                                        stickerId: t,
                                        query: r,
                                        isPromoted: !0
                                    }))
                                }), L.innerHTML = a.join(""), g(B), K(), ie(), (n = new x(B)).init()
                            }
                        }, F) : (n && n.destroy(), _(B))
                    }, R ? a(R) : ee() ? (R = S("stickers_keywords").keywords, a(R)) : Z(function(e) {
                        R = e, ne(e), a(e)
                    })
                }
            }

            function Y() {
                Z(function(e) {
                    R = e, ne(e), Q()
                })
            }

            function X(e) {
                var n = e.target;
                n === o || b(n, "stickersHints") || (_(B), t && clearTimeout(t))
            }

            function K() {
                w(L, "style", "")
            }

            function J(e) {
                var t = e.isPromoted,
                    n = t ? "" : "onclick=\"return StickersHints.onStickerThumbClick(event, this, {{stickerId}}, '{{stickerReferrer}}');\"",
                    i = t ? 'href="/attachments?' + ["act=stickers_store", "target=" + w(B, "data-target"), "sticker_id={{stickerId}}", "from=inline", "sticker_referrer={{stickerReferrer}}"].join("&") + '"' : "",
                    a = O.getStickerUrl(e.stickerId, (0, r.getStickerSize)());
                return ('<div class="sticker_item sticker{{stickerId}} {{promotedClass}}">        <a class="sticker_thumb thumb_item" ' + i + " " + n + '>          <img class="th_img" src="{{stickerUrl}}" />        </a>      </div>').replace(/{{stickerId}}/g, e.stickerId).replace(/{{stickerUrl}}/g, a).replace("{{promotedClass}}", t ? "sticker_item_promoted" : "").replace("{{stickerReferrer}}", "suggestion_" + e.query)
            }

            function Z(e) {
                D.post("/attachments", {
                    _ajax: 1,
                    act: "stickers_hints_keywords"
                }, {
                    onDone: function(t) {
                        e(function(e) {
                            var t = {};
                            return v(e, function(e, n) {
                                var i = n.user_stickers,
                                    a = n.promoted_stickers;
                                v(n.words, function(e, n) {
                                    t[n] = {
                                        userStickers: i,
                                        promotedStickers: a
                                    }
                                })
                            }), t
                        }(t))
                    }
                })
            }

            function ee() {
                return Boolean(S("stickers_keywords"))
            }

            function te() {
                return S("stickers_keywords").time
            }

            function ne(e) {
                !e || C(e) ? M("stickers_keywords") : M("stickers_keywords", {
                    keywords: e,
                    time: y()
                })
            }

            function ie() {
                var e = u("stickersHints__callout");
                if (e) {
                    var t = e.offsetWidth - z,
                        n = t / V,
                        i = n % 1;
                    i < .3 ? n = Math.floor(n) - .5 : i > .7 && (n = Math.ceil(n) - .5);
                    var a = Math.round(t / n - U);
                    v(P("sticker_item", e), function(e, t) {
                        var n = u("sticker_thumb", t),
                            i = u("th_img", t);
                        T(t, "width", a), T(t, "height", a), T(n, "width", a), T(n, "height", a), T(i, "height", a)
                    })
                }
            }
            return l(function() {
                c() && !u("vk_stickers_hints_support_no") && (I.onStickersInit(function() {
                    G()
                }), u("stickersHints") && G())
            }), D.onRedirect(function(e) {
                d(e.split("?")[1]).invalidate_stickers_hints && Y()
            }), I.onReplyClick(function(e) {
                var t = window.cur;
                N = e, setTimeout(Q, 10), t.destroy.push(function() {
                    N = ""
                })
            }), {
                actualizeVisibility: Q,
                init: G,
                onStickerThumbClick: function(e, n, i, a) {
                    window.isNewMail && s(e);
                    var r = b("sticker_item", n),
                        l = u("th_img", r);
                    return w(r, "style", ""), w(n, "style", ""), w(l, "style", ""), _(B), o.value = "", t && clearTimeout(t), I.sendSticker(n, i, !0, a)
                },
                onCheckboxLabelClick: function(e, t) {
                    setTimeout(function() {
                        ! function(e, t, n) {
                            var i = {
                                _ajax: 1,
                                act: "stickers_hints_enabled",
                                value: e,
                                hash: t
                            };
                            D.post("/attachments", i, {
                                onDone: n
                            })
                        }(k(f("input", e.parentElement)) ? 1 : 0, t, Y)
                    }, 0)
                },
                onCheckboxAutoAnimationLabelClick: function(e, t) {
                    setTimeout(function() {
                        ! function(e, t, n) {
                            var i = {
                                _ajax: 1,
                                act: "stickers_auto_animation_enabled",
                                value: e,
                                hash: t
                            };
                            D.post("/attachments", i, {
                                onDone: n
                            })
                        }(k(f("input", e.parentElement)) ? 1 : 0, t, Y)
                    }, 0)
                }
            }
        }()
    },
    "i/qW": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.fastResample = function(e, t) {
            var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : "peak";
            return new l({
                srcSampleRate: e.length,
                dstSampleRate: t,
                normalizeAlgorithm: n,
                truncateTo: 0
            }).push(e)
        }, t.Resampler = void 0;
        var i = n("JbZL"),
            a = n("KFXn"),
            r = n("UUtA");

        function o(e, t) {
            for (var n = 0; n < t.length; n++) {
                var i = t[n];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        }
        var s = {
                avg: i.AverageAlgorithm,
                peak: a.PeakAlgorithm,
                quad: r.QuadAlgorithm
            },
            l = function() {
                function e(t) {
                    ! function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, e), this._normalizeAlgorithm = !1, s[t.normalizeAlgorithm] && (this._normalizeAlgorithm = new s[t.normalizeAlgorithm]), this._srcSampleRate = parseInt(t.srcSampleRate || 0), this._dstSampleRate = parseInt(t.dstSampleRate || 0), this._truncateTo = 1, void 0 !== t.truncateTo && (this._truncateTo = t.truncateTo), this._dstSampleRate > 0 ? this._sampleRate = this._srcSampleRate / this._dstSampleRate : this._sampleRate = 0, s[t.algorithm] || (t.algorithm = "peak"), this._algorithm = new s[t.algorithm], this._sampleCount = 0, this._data = []
                }
                var t, n, i;
                return t = e, (n = [{
                    key: "push",
                    value: function(e) {
                        if (this._sampleRate <= 0) return [];
                        for (var t, n = [], i = 0; i < e.length; i++)
                            if (this._truncateTo > 0 && (e[i] = Math.min(this._truncateTo, Math.abs(e[i]))), this._sampleCount += 1, this._sampleCount >= this._sampleRate)
                                for (; this._sampleCount >= this._sampleRate;) this._sampleCount -= this._sampleRate, this._sampleCount <= .8 && this._algorithm.push(e[i]), t = this._algorithm.get(), n.push(t), this._normalizeAlgorithm && this._normalizeAlgorithm.push(t), this._algorithm.clear(), this._sampleCount > .2 && this._algorithm.push(e[i]);
                            else this._algorithm.push(e[i]);
                        if (this._normalizeAlgorithm) {
                            var a = this._normalizeAlgorithm.get();
                            if (this._normalizeAlgorithm.clear(), a > 0)
                                for (var r = 0; r < n.length; r++) n[r] = n[r] / a, this._truncateTo > 0 && (n[r] = Math.min(this._truncateTo, Math.abs(n[r])))
                        }
                        return n
                    }
                }]) && o(t.prototype, n), i && o(t, i), e
            }();
        t.Resampler = l
    },
    i0zL: function(e, t, n) {
        "use strict";
        var i = u(n("+cqQ")),
            a = (n("UxAg"), u(n("TYsd"))),
            r = u(n("HHQA")),
            o = u(n("i3N4")),
            s = u(n("5V+s")),
            l = (n("OcsD"), n("K0hv")),
            c = n("tqgD");

        function u(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        var d = window,
            f = d.hasClass,
            h = d.ge,
            p = d.geByClass1,
            A = d.getCw,
            m = d.getCh,
            _ = d.attr,
            v = d.setStyle,
            g = d.extend,
            y = d.preventEvent,
            b = d.isUndefined,
            w = d.val,
            k = d.vkNow,
            E = d.getW,
            S = d.getH,
            C = d.scrollTop,
            M = d.gpeByClass,
            P = d.toggleClass,
            T = d.cancelEvent,
            D = d.qs2obj,
            I = d.obj2qs,
            x = d.removeClass,
            O = d.addClass,
            L = d.addEvent,
            B = d.removeEvent,
            R = d.len,
            N = d.show,
            j = d.each,
            F = d.hide,
            H = d.escapeAttr,
            V = d.htsc,
            U = d.toggle,
            z = d.formatNum,
            W = d.remove,
            q = d.append,
            $ = d.reflow,
            G = 2,
            Q = window.ajax,
            Y = window.thover,
            X = window.nav,
            K = window.page,
            J = window.PhotoLike,
            Z = window.zlayer,
            ee = window.photo,
            te = 300,
            ne = function() {
                var e = !1,
                    t = !1,
                    n = !1,
                    u = !1,
                    d = !1,
                    ie = !1,
                    ae = !1,
                    re = !1,
                    oe = !1,
                    se = !1,
                    le = !1,
                    ue = !1,
                    de = !1,
                    fe = !1,
                    he = !1,
                    pe = !1,
                    Ae = !1,
                    me = !1,
                    _e = !1,
                    ve = !1,
                    ge = !1,
                    ye = !1,
                    be = !1,
                    we = {},
                    ke = {
                        min_scale: 1,
                        max_scale: 3,
                        min_scale_limit: .5,
                        max_scale_limit: 5,
                        anim_duration: te,
                        inertia_duration: 300,
                        bounce_diff: 1.5,
                        crop_padding: 20,
                        crop_size: 250,
                        fps: 0
                    };

                function Ee(e) {
                    var t = A() / 2,
                        n = m() / 2;
                    if (e.touches) {
                        for (var i = 0, a = 0, r = 0, o = Math.min(2, e.touches.length); i < o; i++) a += e.touches[i].pageX, r += e.touches[i].pageY, 0;
                        return o ? {
                            pageX: a / o - t,
                            pageY: r / o - n
                        } : {
                            pageX: -t,
                            pageY: -n
                        }
                    }
                    return {
                        pageX: e.pageX - t,
                        pageY: e.pageY - n
                    }
                }

                function Se(e, t) {
                    var n = null,
                        i = t ? _(le, "data-original-src") || le.src : e.src;
                    if (we[i]) return we[i];
                    if (t && (e = function() {
                            var e = ce("img");
                            return e.src = _(le, "data-original-src") || le.src, e
                        }()), void 0 !== e.naturalWidth) n = {
                        width: e.naturalWidth,
                        height: e.naturalHeight
                    };
                    else if ("VIDEO" === e.tagName) n = {
                        width: e.clientWidth,
                        height: e.clientHeight
                    };
                    else {
                        (new Image).src = e.src, n = {
                            width: e.width,
                            height: e.height
                        }
                    }
                    return n.width && n.height && (we[i] = n), n
                }

                function Ce(e) {
                    var t = _(e, "data-id");
                    return Me((Fn(On).tags || {})[t] || [])
                }

                function Me(e) {
                    return e[0] ? {
                        coords: {
                            x: e[0][0],
                            y: e[0][1],
                            w: e[0][2],
                            h: e[0][3]
                        },
                        name: e[1],
                        href: e[2],
                        al: e[3]
                    } : {}
                }

                function Pe(e) {
                    v(t, "overflow", e ? "visible" : "hidden")
                }
                var Te = null,
                    De = null;

                function Ie(e, n, i, a, r, o, s, l, c) {
                    if (!ke.fps || c) {
                        var u = !1,
                            f = !!l && function() {
                                u || (u = !0, l())
                            };
                        o ? (t && v.animate(t, "transform", {
                            duration: o,
                            func: s
                        }, f), le && v.animate(le, !1 === r ? "transform" : "transform, opacity", {
                            duration: o,
                            func: s
                        }, f), fe && v.animate(fe, !1 === r ? "transform" : "transform, opacity", {
                            duration: o,
                            func: s
                        }, f), he && v.animate(he, !1 === r ? "transform" : "transform, opacity", {
                            duration: o,
                            func: s
                        }, f), d && v.animate(d, !1 === r ? "transform" : "transform, opacity", {
                            duration: o,
                            func: s
                        }, f), Et = !0) : Et && (t && v.animate(t), le && v.animate(le), fe && v.animate(fe), he && v.animate(he), d && v.animate(d), Et = !1), v.transform(t, {
                            translate: [n, 0]
                        }), v.transform(le, e, [i, a]), bn(e, i, a), !1 !== r && (v(le, "opacity", r), st || lt ? (v(fe, "opacity", r), ct = !0) : (v(he, "opacity", r), ft = !0), function(e, t) {
                            var n = window.lang;
                            if (e) {
                                var i = Z.height,
                                    a = i / 5,
                                    r = i / 3.5,
                                    o = Math.abs(e),
                                    s = o > 20 ? e + (e > 0 ? 20 - e : -20 - e) / ke.bounce_diff : e,
                                    l = 0 === t ? 0 : Math.max(0, Math.min((o - 20) / a, .75));
                                t > 0 && v.transform(d, {
                                    translate: [0, s]
                                }), v(d, "opacity", l);
                                var c = o > r,
                                    u = c ? "" : e > 0 ? " zpv_close_move_down" : " zpv_close_move_up",
                                    f = c ? n.mobile_zphoto_release_to_close : n.mobile_zphoto_move_to_close;
                                w(d, '<div class="zpv_close_msg' + u + '">' + f + "</div>"), (d.is_down && e < 0 || !d.is_down && e > 0) && _n(e > 0)
                            } else v.transform(d, {
                                translate: [0, 0]
                            }), v(d, "opacity", 0)
                        }(a, r)), mn(e)
                    } else Te = [e, n, i, a, r, o, s, l, !0], De || xe()
                }

                function xe() {
                    Te && (Ie.apply(window, Te), Te = null), clearTimeout(De), De = ke.fps ? setTimeout(xe, 1e3 / ke.fps) : null
                }

                function Oe(e, t, n) {
                    Zt(!0), Ie(Ye, ze, Ge, Qe, St, e, t, n), St = !1
                }

                function Le(e, t, n, i) {
                    Ie(e.currentScale, e.curBodyX, e.currentX, e.currentY, !1, t, n, i)
                }

                function Be(e) {
                    e = function(e) {
                        if (!e) return e;
                        var t = {
                                width: le.width || le.clientWidth,
                                height: le.height || le.clientHeight
                            },
                            n = t.width / 2,
                            i = t.height / 2;
                        return [e[0] + n, e[1] + i]
                    }(e || [0, 0]), v.transformOrigin(le, e)
                }

                function Re() {
                    (be = Bn.max_src && Ye > 2) ? le.src !== Bn.max_src && (_(le, "data-original-src", Bn.src), _(le, "data-src", Bn.max_src), Vn(Bn.max_src)): !be && le.src !== Bn.src && le && (_(le, "data-src", Bn.src), Un(Bn.src), le.style.width = "")
                }
                var Ne, je, Fe, He, Ve, Ue, ze, We, qe, $e, Ge, Qe, Ye, Xe, Ke, Je, Ze, et, tt, nt, it, at, rt, ot, st, lt, ct, ut, dt, ft, ht, pt, At, mt, _t, vt, gt, yt, bt, wt, kt, Et, St, Ct = !1,
                    Mt = !1,
                    Pt = null;

                function Tt(e) {
                    var t = e[1].pageX - e[0].pageX,
                        n = e[1].pageY - e[0].pageY;
                    return {
                        distance: Math.sqrt(t * t + n * n),
                        angle: 180 * Math.atan2(n, t) / Math.PI
                    }
                }

                function Dt(e) {
                    var t = Tt(e);
                    if (Ct) {
                        var n = t.distance / Ct.scale,
                            i = t.angle - Ct.rotation;
                        i < -180 && (i += 360), i > 180 && (i -= 360), g(Ct, {
                            startDistance: n,
                            startAngle: i
                        })
                    } else Ct = {
                        startDistance: t.distance,
                        startAngle: t.angle,
                        scale: 1,
                        rotation: 0
                    }
                }

                function It(e) {
                    return g({
                        originalEvent: e
                    }, e, function(e) {
                        if (!Ct) return {
                            scale: 1,
                            rotation: 0
                        };
                        if (e.length < 2) return {
                            scale: Ct.scale,
                            rotation: Ct.rotation
                        };
                        var t = Tt(e),
                            n = t.distance / Ct.startDistance,
                            i = t.angle - Ct.startAngle;
                        i < -90 && (i += 360), i > 270 && (i -= 360);
                        var a = {
                            scale: n,
                            rotation: i
                        };
                        return g(Ct, a), a
                    }(e.touches), Ee(e))
                }

                function xt(e) {
                    var t = e.touches;
                    t && (t.length > 5 || t.length < 2 ? Ct && (An(It(e)), Ct = !1) : Ct ? Dt(t) : (hn(It(e)), Dt(t)))
                }

                function Ot(e) {
                    var t = e.touches;
                    t && (t.length > 5 || t.length < 2 ? Ct && (An(It(e)), Ct = !1) : Ct && pn(It(e)))
                }

                function Lt(e) {
                    var t = e.touches;
                    t && ((t.length > 5 || t.length < 2) && Ct && (An(It(e)), Ct = !1), Ct && Dt(t))
                }

                function Bt(e) {
                    y(e);
                    var t = (e.detail ? e.detail : e.wheelDelta) > 0 ? 1.05 : .95,
                        n = g({
                            originalEvent: e
                        }, e);
                    Mt || (Mt = 1, un(e), hn(g(n, {
                        scale: Mt
                    }))), pn(g(n, {
                        scale: Mt *= t
                    })), clearTimeout(Pt), Pt = setTimeout(function() {
                        An(g(n, {
                            scale: Mt
                        })), fn(e), Mt = !1
                    }, 200)
                }

                function Rt() {
                    Ne = 0, je = 0, Fe = 0, He = 0, Ve = 1, Ue = !0, ze = 0, We = 0, qe = 0, $e = 1, Ge = 0, Qe = 0, Ye = 1, Xe = !1, Ke = !1, Je = !1, Ze = !1, et = !1, tt = !1, nt = !1, it = !1, at = !1, ct = !1, ut = !1, dt = !1, ft = !1, ht = !1, pt = !1, At = !1, !1, yt = !1, bt = !1, wt = !1, kt = !1
                }

                function Nt() {
                    return {
                        lastScale: Ve,
                        deltaX: Ne,
                        deltaY: je,
                        pointX: Fe,
                        pointY: He,
                        curScale: $e,
                        currentScale: Ye,
                        curX: We,
                        curY: qe,
                        currentX: Ge,
                        currentY: Qe,
                        curBodyX: ze
                    }
                }

                function jt(e, t, n) {
                    n = n || Nt();
                    var i = g({}, n, e = e || {});
                    if (b(e.deltaX) || b(e.deltaY) ? b(e.pointX) || b(e.pointY) ? b(e.lastScale) ? b(e.currentScale) ? b(e.curScale) || (i.currentScale = i.lastScale * i.curScale, i.curX = i.pointX - i.deltaX * i.curScale, i.curY = i.pointY - i.deltaY * i.curScale, i.currentX = i.curX / i.currentScale, i.currentY = i.curY / i.currentScale) : (i.curScale = i.currentScale / i.lastScale, i.curX = i.pointX - i.deltaX * i.curScale, i.curY = i.pointY - i.deltaY * i.curScale, i.currentX = i.curX / i.currentScale, i.currentY = i.curY / i.currentScale) : (i.curScale = 1, i.currentScale = i.curScale * i.lastScale) : (i.curX = i.pointX - i.deltaX * i.curScale, i.curY = i.pointY - i.deltaY * i.curScale, i.currentX = i.curX / i.currentScale, i.currentY = i.curY / i.currentScale) : (i.pointX = i.curX + i.deltaX * i.curScale, i.pointY = i.curY + i.deltaY * i.curScale), b(e.curX) || (i.curX = e.curX, i.currentX = i.curX / i.currentScale), b(e.curY) || (i.curY = e.curY, i.currentY = i.curY / i.currentScale), t) return i;
                    Ne = i.deltaX, je = i.deltaY, Fe = i.pointX, He = i.pointY, Ve = i.lastScale, $e = i.curScale, Ye = i.currentScale, We = i.curX, qe = i.curY, Ge = i.currentX, Qe = i.currentY, ze = i.curBodyX
                }

                function Ft() {
                    var e = Z.width || A(),
                        t = Z.height || m();
                    if (ye) var n = e,
                        i = Math.min(ke.crop_size, n - 2 * ke.crop_padding),
                        a = i,
                        r = i;
                    else a = e, r = t;
                    return {
                        width: a,
                        height: r
                    }
                }

                function Ht(e) {
                    var t = Ft().width,
                        n = ((le.width || le.clientWidth) * e - t) / 2,
                        i = -n;
                    return n <= 0 && (i = n = 0), {
                        min: i,
                        max: n
                    }
                }

                function Vt(e) {
                    var t = Ft().height,
                        n = ((le.height || le.clientHeight) * e - t) / 2,
                        i = -n;
                    return n <= 0 && (i = n = 0), {
                        min: i,
                        max: n
                    }
                }

                function Ut() {
                    var e = 1,
                        t = ke.max_scale;
                    if (ye) {
                        e = 1, t = (In ? In[0] : {
                            max_scale: ke.max_scale
                        }).max_scale
                    } else {
                        var n = Se(le, !0);
                        e = ke.min_scale, t = Math.max(ke.max_scale, n.width / A(), (n.height || n.clientHeight) / m())
                    }
                    return {
                        min: e,
                        max: t
                    }
                }

                function zt(e) {
                    var t = Z.height || m(),
                        i = Math.abs(Ln) >= 10,
                        a = Math.abs(e) > 1,
                        r = t / 3.5,
                        o = Math.abs(qe);
                    return qe * e < 0 && (i = !0), e = e || 0, o > r || !i && a ? (function(e) {
                        var t = Z.height || m(),
                            i = 2 * Math.abs(Qe) > t ? .85 : 1.7;
                        jt({
                            curY: (e > 1 ? t : e < -1 ? -t : qe > 0 ? t : -t) / i
                        }), St = 0, Oe(150, "ease-in", Wt), v(n, "width", 0), vt = !0
                    }(e), !0) : (ln() && (St = 1, Oe(300), Ze = !1, lt && (lt = !1, kn(!0))), !1)
                }

                function Wt() {
                    _e && ne.close()
                }

                function qt() {
                    !1 !== mt && (Pe(!1), $n(mt), v.transform(ue), v.transform(de), Ie(1, 0, 0, 0, 1), Be(), mt = !1)
                }

                function $t() {
                    var e = 1.05 * (Z.width || A());
                    Ge -= (e + ze) / Ye, ze = -e, mt = On + 1, Ln--, Oe(te, "ease-out", qt), Pn(!1, !0), lt = !1, ne.onPhotoChange && ne.onPhotoChange(On + 1, {
                        no_open: !0,
                        local: ve,
                        crop: ye
                    })
                }

                function Gt() {
                    var e = 1.05 * (Z.width || A());
                    Ge += (e - ze) / Ye, ze = e, mt = On - 1, Ln++, Oe(te, "ease-out", qt), Pn(!1, !0), lt = !1, ne.onPhotoChange && ne.onPhotoChange(On - 1, {
                        no_open: !0,
                        local: ve,
                        crop: ye
                    })
                }

                function Qt() {
                    if (!bt) return !1;
                    var e = function() {
                            if (!bt || bt.length < 2) return [0, 0, 0];
                            for (var e = k(), t = !1, n = bt.pop(), i = bt.length - 1; i >= 0; i--) {
                                if ((a = e - bt[i][0]) > 150) break;
                                t = bt[i]
                            }
                            if (!t || !n) return [0, 0, 0];
                            var a, r = n[1].pageX - t[1].pageX,
                                o = n[1].pageY - t[1].pageY,
                                s = Math.sqrt(r * r + o * o);
                            return (a = n[0] - t[0]) ? [s / a, r / a, o / a] : [0, 0, 0]
                        }(),
                        t = e[0],
                        n = e[1],
                        i = e[2];
                    if (Xt(), !t) return !1;
                    var a = Je || Ze ? 5.1 : 4.7,
                        r = t / a,
                        o = n * r - a * r * r / 2,
                        s = i * r - a * r * r / 2;
                    if (r *= 530, o *= 140, s *= 140, t < .1 || !o && !s) return !1;
                    if (!Ze) {
                        var l = {};
                        Je || (l.curX = We + o, l.curY = qe + s), jt(l);
                        var c = Ht(Ye);
                        l = {}, We < c.min ? l.curBodyX = Ue ? We - c.min : 0 : We > c.max && (l.curBodyX = Ue ? We - c.max : 0), jt(l)
                    }
                    return Je ? 4.7 * n : Ze ? 4.7 * i : r
                }

                function Yt(e) {
                    bt || (bt = []), bt.push([k(), e]), bt = bt.slice(-20)
                }

                function Xt() {
                    bt = !1
                }

                function Kt(e, t) {
                    var n, i, a, r, o, s, l, c, u, d = (n = [e.curX, e.curY], i = e.currentScale, a = [t.curX, t.curY], r = t.currentScale, o = n[0], s = n[1], l = a[0], c = a[1], 1 != (u = r / i) && [o + (o - l) / (u - 1), s + (s - c) / (u - 1)]);
                    if (!d) return !1;
                    var f = d[0],
                        h = d[1];
                    return e.deltaX = f - e.curX, e.deltaY = h - e.curY, e.currentX = e.curX / e.currentScale + f - f / e.currentScale, e.currentY = e.curY / e.currentScale + h - h / e.currentScale, t.deltaX = f - t.curX, t.deltaY = h - t.curY, t.currentX = t.curX / t.currentScale + f - f / t.currentScale, t.currentY = t.curY / t.currentScale + h - h / t.currentScale, d
                }

                function Jt(e, t, n) {
                    var i, a, r, o, s, l, c, u, d, f, h, _, v, g, y, b = Z.width || A(),
                        w = Z.height || m(),
                        k = !1,
                        C = (Math.min(50, b / 7), Se(le)),
                        M = b / C.width,
                        P = w / C.height,
                        T = Math.min(1, M, P),
                        D = Ce(e).coords,
                        I = p("zpv_tl", e),
                        x = E(I),
                        O = S(I),
                        L = (Math.min((b - 30) / Math.max(D.w * C.width * T / 100, x), (w - 30) / (D.h * C.height * T / 100 + O + 5)), function() {
                            a = C.width * T * n.currentScale, r = C.height * T * n.currentScale, o = b / 2 - a / 2 + n.currentX * n.currentScale, s = w / 2 - r / 2 + n.currentY * n.currentScale, u = o + D.x * a / 100, d = s + D.y * r / 100, l = D.w * a / 100, c = D.h * r / 100, i = u + l / 2 - x / 2, d + c + 5, h = Math.min(u, i), f = Math.max(l, x), v = h + f, g = (_ = d) + (c + O + 5), y = {}
                        });
                    return n = (n = jt(y, t, n)) || Nt(), L(), h < 15 ? (y.curX = n.curX + (15 - h), k = !0) : v > b - 15 && (y.curX = n.curX - (v - b + 15), k = !0), _ < 15 && (y.curY = n.curY + (15 - _), k = !0), n = (n = jt(y, t, n)) || Nt(), L(), g > w - 15 && (y.curY = n.curY - (g - w + 15), k = !0), n = jt(y, t, n), t ? n : k
                }

                function Zt(e) {
                    kt && (kt = !1, Be(), e || Oe(), vn(st, !0), gn(!st, !0), setTimeout(function() {
                        Re()
                    }, 300))
                }

                function en(e, t, n) {
                    var i = {};
                    return n = n || Nt(), i.lastScale = e, n = jt(i, t, n), !!t && n
                }

                function tn(e, t, n) {
                    var i = {};
                    if (n = n || Nt(), !cn()) return !!t && n;
                    i.curScale = e, n = (n = jt(i, t, n)) || Nt();
                    var a = Ut();
                    return i = {
                        currentScale: n.currentScale
                    }, n.currentScale < a.min ? i.currentScale = n.currentScale + (a.min - n.currentScale) / ke.bounce_diff : n.currentScale > a.max && (i.currentScale = n.currentScale + (a.max - n.currentScale) / ke.bounce_diff), n = jt(i, t, n), !!t && n
                }

                function nn(e, t) {
                    if (!cn()) return !1;
                    var n = !1,
                        i = {};
                    t = t || Nt();
                    var a = Ut();
                    return t.currentScale < a.min ? (i.currentScale = a.min, n = !0) : t.currentScale > a.max && (i.currentScale = a.max, n = !0), t = jt(i, e, t), e ? t : n
                }

                function an(e) {
                    if (!cn()) return !1;
                    var t = {
                            pageX: 0,
                            pageY: 0
                        },
                        n = Nt(),
                        i = null,
                        a = Kt(n, i = ln(!0, i = sn(t, !0, i = nn(!0, i = tn(e = 1 == e ? 1 / Ve : e, !0, i = on(t, !0, n))))));
                    a && (Be(a), Le(n), kt = !0), kt && (vn(!1, !0), gn(!1, !0)), on(t), tn(e), nn(), sn(t), ln(), kt ? Le(i, te, !1, Zt) : Oe(300), en(Ye)
                }

                function rn(e) {
                    if (!cn()) return !1;
                    var t = Nt(),
                        n = null,
                        i = Kt(t, n = ln(!0, n = nn(!0, n = Jt(e, !0, t))));
                    i && (Be(i), Le(t), kt = !0), Jt(e) && (dt || (dt = t)), kt && (vn(!1, !0), gn(!1, !0)), nn(), ln(), kt ? Le(n, te, !1, Zt) : Oe(te), en(Ye)
                }

                function on(e, t, n) {
                    var i = {};
                    return n = n || Nt(), i.deltaX = (e.pageX - n.curX) / n.curScale, i.deltaY = (e.pageY - n.curY) / n.curScale, n = jt(i, t, n), !!t && n
                }

                function sn(e, t, n) {
                    var i = {};
                    n = n || Nt(), i.pointX = e.pageX, i.pointY = e.pageY;
                    var a = Ht(n.currentScale),
                        r = Vt(n.currentScale),
                        o = (!Xe && !r.max && !r.min || Je || !cn()) && !Ze;
                    (Ze || ye && !Xe && !a.max && !a.min) && (i.curX = 0), o && (i.curY = n.curY), n = jt(i, t, n), i = {};
                    var s = !1;
                    return (n = n || Nt()).curX <= a.min ? et ? (s = !0, i.curBodyX = n.curX - a.min) : (i.curX = n.curX + (a.min - n.curX) / ke.bounce_diff, i.curBodyX = Ue ? i.curX - a.min : 0) : n.curX >= a.max && (tt ? (s = !0, i.curBodyX = n.curX - a.max) : (i.curX = n.curX + (a.max - n.curX) / ke.bounce_diff, i.curBodyX = Ue ? i.curX - a.max : 0)), n.curY < r.min ? o ? i.curY = r.min : Ze || (i.curY = n.curY + (r.min - n.curY) / ke.bounce_diff) : n.curY > r.max && (o ? i.curY = r.max : Ze || (i.curY = n.curY + (r.max - n.curY) / ke.bounce_diff)), n = jt(i, t, n), t ? n : s
                }

                function ln(e, t) {
                    var n = !1,
                        i = {},
                        a = Ht((t = t || Nt()).currentScale),
                        r = Vt(t.currentScale),
                        o = !Xe && !r.max && !r.min || Je || !cn() && !Ze;
                    return Ze && (i.curX = 0), o && (i.curY = t.curY), t.curX < a.min ? (i.curX = a.min, i.curBodyX = 0, n = !0) : t.curX > a.max && (i.curX = a.max, i.curBodyX = 0, n = !0), t.curY < r.min ? (i.curY = r.min, n = !0) : t.curY > r.max && (i.curY = r.max, n = !0), t = jt(i, e, t), e ? t : n
                }

                function cn() {
                    return !me && (!!ye || xn[Bn.src])
                }

                function un(e) {
                    if (C() || C(0), !vt) {
                        if (e && "mousedown" == e.type && y(e), e.touches && e.touches.length || !pe) {
                            if (qt(), !Ke && !Xe) {
                                yt = Ee(e);
                                var t = Ht(Ye);
                                We <= t.min && (et = !1 !== Fn(On + 1)), We >= t.max && (tt = !1 !== Fn(On - 1))
                            }
                            if (Ke || me) nt = it = at = !1, rt = !1;
                            else {
                                clearTimeout(ot);
                                var n = Ee(e);
                                nt && k() - nt < 500 && it && (i = n, r = (a = it).pageX - i.pageX, o = a.pageY - i.pageY, Math.sqrt(r * r + o * o) < 50) ? (at = k(), rt = !1) : (nt = k(), it = n, rt = k())
                            }
                            me || (Ke = !0)
                        }
                        var i, a, r, o;
                        Xe || (Ue = !0, Pe(!0)), pt = Ee(e), Xt(), Yt(pt), on(pt)
                    }
                }

                function dn(e) {
                    if (!vt && (y(e), Ke)) {
                        if (nt = it = at = !1, rt = !1, Yt(pt = Ee(e)), wt) {
                            if (!(wt < k())) return void Xt();
                            wt = !1, on(pt), Oe()
                        }
                        if (yt && !Je && !Ze) {
                            var t = Math.abs(pt.pageX - yt.pageX),
                                n = Math.abs(pt.pageY - yt.pageY),
                                i = Vt(Ye);
                            if (!(n > 5 || t > 5)) return;
                            n > 5 && t <= 5 && (1 != Ye || Xe || me || ye ? (i.max || i.min) && (et = tt = !1) : (Ze = !0, st && (lt = !0), kn(!1), _n(pt.pageY - yt.pageY > 0))), yt = !1, on(pt)
                        }!sn(pt) || Je || Ze || me || (Je = !0, pt.pageX),
                            function() {
                                if (!Ze) return;
                                var e = Math.abs(qe),
                                    t = Z.height / 2;
                                St = 1 - .5 * e / t
                            }(), Oe(), Je && Math.abs(ze) > A() && fn(g({
                                originalEvent: e
                            }, e, {
                                touches: []
                            }))
                    }
                }

                function fn(e) {
                    if (!vt)
                        if (gt) gt = !1;
                        else {
                            if (y(e), e.touches && !e.touches.length || !pe) {
                                var t = Qt();
                                if (Je) c = t, u = (Z.width || A()) / 2, c = c || 0, ((ze < -u || c < -1) && et ? ($t(), 1) : (ze > u || c > 1) && tt ? (Gt(), 1) : (ln() && Oe(300), 0)) && (Rt(), Pe(!0));
                                else if (Ze) zt(t);
                                else if (at && k() - at < 1e3) {
                                    ! function(e) {
                                        if (!cn()) return !1;
                                        var t = Ut(),
                                            n = {
                                                pageX: Fe,
                                                pageY: He
                                            },
                                            i = (Ye > 1 ? 1 : t.max) / Ve,
                                            a = Nt(),
                                            r = null;
                                        r = ln(!0, r = sn(n, !0, r = tn(i, !0))), e && (r = ln(!0, r = Jt(e, !0, r)));
                                        var o = Kt(a, r);
                                        o && (Be(o), Le(a), kt = !0), kt && (vn(!1, !0), gn(!1, !0)), tn(i), sn(n), ln(), e && (Jt(e), ln()), kt ? Le(r, te, !1, Zt) : Oe(te), en(Ye), En()
                                    }(r = e && ct && (f("zpv_tag", e.target) ? e.target : M("zpv_tag", e.target))), nt = it = at = !1
                                } else ln() ? Oe(300) : t && (ln(), Oe(t, "cubic-bezier(0, 1, 1, 1)"));
                                if (setTimeout(function() {
                                        Re()
                                    }, 300), rt)
                                    if (k() - rt > 700 || e && "touchcancel" == e.type) rt = !1;
                                    else {
                                        if (rt = !1, e) var n = f("zpv_header", e.target) ? e.target : M("zpv_header", e.target),
                                            i = f("zpv_zoom_btns", e.target) ? e.target : M("zpv_zoom_btns", e.target),
                                            a = f("zpv_bottom_body", e.target) ? e.target : M("zpv_bottom_body", e.target),
                                            r = ct && (f("zpv_tag", e.target) ? e.target : M("zpv_tag", e.target)),
                                            o = ft && e.target.closest(".Photo__marketTag"),
                                            l = ct && e.target.closest(".Photo__marketShowMoreButton");
                                        e && (n || i || a || r || o || l) ? r ? function(e, t) {
                                            if (!_t) return !1;
                                            if (!ct) return !0;
                                            Ce(e);
                                            if (f("zpv_tag_selected", e)) return f("zpv_tl_wrap", t.target) || M("zpv_tl_wrap", t.target) ? X.go(e, t) : (rn(e), T(t), !1);
                                            ut && (nt = it = at = !1), x("zpv_tag_selected", ut), ut = e, wn(e), O("zpv_tag_selected", ut);
                                            st && (lt = !0);
                                            kn(!1), rn(e), T(t)
                                        }(r, e) : i ? (nt = it = at = !1, f("zpv_zoomin", e.target) || M("zpv_zoomin", e.target) ? function(e) {
                                            !!_t && (Y.highlight = !1, Y.end(e), !Xe && !Je && (!(Ut().max <= Ye) && (T(e), an(ye ? 1.25 : 1.45))))
                                        }(e) : function(e) {
                                            !!_t && (Y.highlight = !1, Y.end(e), !Xe && !Je && (!(Ut().min >= Ye) && (T(e), an(ye ? .8 : 1))))
                                        }(e)) : o ? X.go(o.dataset.url) : l && s.default._openItemsPopup(l.dataset.itemsJson) : ut ? Pn(e) : ye || (ot = setTimeout(function() {
                                            kn(), vn(st), gn(!st)
                                        }, 500))
                                    }
                                Ke = !1, Je = et = tt = !1, Xt()
                            }
                            var c, u;
                            e.touches && (e.touches.length > 1 || 1 == e.touches.length && Je) && on(pt = Ee(e)), (e.touches && !e.touches.length || !pe) && (yt = !1)
                        }
                }

                function hn(e) {
                    if (!vt && (y(e), nt = it = at = !1, rt = !1, Xt(), !Je && !Ze)) {
                        $e = 1, Ve = Ye, Xe = !0, et = tt = !1;
                        var t = Ht(Ye);
                        (t.min >= -5 || t.max <= 5) && (Ue = !1, Pe(!1)), on(Ee(e)), vn(!1, !0), gn(!1, !0)
                    }
                }

                function pn(e) {
                    vt || (y(e), nt = it = at = !1, rt = !1, Xt(), Je || Ze || (At = Ee(e), tn(e.scale), sn(At), Oe(), En()))
                }

                function An(e) {
                    vt || (y(e), nt = it = at = !1, rt = !1, Xt(), Je || Ze || (nn() && ((e.touches && e.touches.length || !pe) && sn(At), ln(), Oe(100), wt = k() + 100), Xe = !1, vn(st, !0), gn(!st, !0)))
                }

                function mn(e) {
                    var t = Ut(),
                        n = e < t.max,
                        i = e > t.min;
                    P("zpv_zb_disabled", oe, !n), P("zpv_zb_disabled", se, !i)
                }

                function _n(e) {
                    v(d, e ? {
                        top: -35,
                        bottom: "auto"
                    } : {
                        top: "auto",
                        bottom: -35
                    }), d.is_down = e
                }

                function vn(e, t) {
                    var n = ct;
                    if (e) {
                        if (!cn()) return;
                        if (!st && !lt || Xe) return
                    }
                    ct = e, e && bn(Ye, Ge, Qe, t || n !== e), n !== e && (e && wn(ut), yn(fe, e, t))
                }

                function gn(e, t) {
                    var n = ft;
                    ft = e, e && bn(Ye, Ge, Qe, t || n !== e), yn(he, e, t)
                }

                function yn(e, t, n) {
                    e && v.animate(e, !n && "opacity", {
                        duration: 200,
                        func: "linear"
                    }, function() {
                        v(e, "visibility", t ? "visible" : "hidden")
                    }), e && v(e, "visibility", t || !n ? "visible" : "hidden"), e && v(e, "opacity", t ? 1 : 0)
                }

                function bn(e, t, n, i) {
                    if (!Xe) {
                        var a = Z.width || A(),
                            r = Z.height || m(),
                            o = Se(le),
                            s = a / o.width,
                            l = r / o.height,
                            c = Math.min(1, s, l),
                            u = o.width * c * e,
                            d = o.height * c * e,
                            f = a / 2 - u / 2 + t * e,
                            h = r / 2 - d / 2 + n * e;
                        ct && (i && fe && v.animate(fe), v(fe, {
                            width: Math.round(u),
                            height: Math.round(d)
                        }), v.transform(fe, {
                            translate: [Math.round(f), Math.round(h)]
                        })), ft && (i && he && v.animate(he), v(he, {
                            width: Math.round(u),
                            height: Math.round(d)
                        }), v.transform(he, {
                            translate: [Math.round(f), Math.round(h)]
                        }), ht || (! function() {
                            function e(e, t) {
                                var n = e.getBoundingClientRect(),
                                    i = he.getBoundingClientRect();
                                n.left < i.left + t ? e.style.left = "".concat(i.left - n.left + t, "px") : n.right > i.left + i.width - t && (e.style.left = "".concat(i.left + i.width - n.right - t, "px"))
                            }
                            Array.from(he.children).forEach(function(t) {
                                if (t.classList.contains("Photo__marketTag")) {
                                    var n = t.$(".Photo__marketTagInner"),
                                        i = t.$(".Photo__marketTagArrow");
                                    e(n, 10), e(i, 20)
                                }
                            })
                        }(), ht = !0))
                    }
                }

                function wn(e) {
                    if (e) {
                        var t = Se(le),
                            n = Z.width || A(),
                            i = Z.height || m(),
                            a = n / t.width,
                            r = i / t.height,
                            o = Math.min(1, a, r),
                            s = t.width * o * Ye,
                            l = t.height * o * Ye,
                            c = Ce(e).coords,
                            u = p("zpv_tl", e),
                            d = E(u),
                            f = S(u),
                            h = c.x * s / 100,
                            _ = c.y * l / 100,
                            g = c.w * s / 100,
                            y = c.h * l / 100,
                            b = h + g / 2 - d / 2,
                            w = _ + y + 5,
                            k = n > s ? 0 - (n - s) / 2 : 0,
                            C = n > s ? s + (n - s) / 2 : s,
                            M = i > l ? l + (i - l) / 2 : l,
                            P = 0,
                            T = 0;
                        b < k + 2 ? P = k + 2 - b : b + d > C - 2 && (P = C - 2 - b - d), w + f > M - 5 && (T = y > 3 * f ? M - 5 - w - f : -y - f - 10), v.transform(u, {
                            translate: [Math.ceil(P), Math.ceil(T)]
                        })
                    }
                }

                function kn(e) {
                    if (void 0 !== e) {
                        if (st === e) return;
                        st = !e
                    } else lt = !1;
                    v(n, "width", "auto"), n && v.animate(n, "opacity", {
                        duration: 200,
                        func: "linear"
                    }, function() {
                        v.animate(n), v(n, "width", st ? "auto" : 0)
                    }), st ? (v(n, "opacity", 0), st = !1) : (v(n, "opacity", 1), st = !0)
                }

                function En() {
                    Z.height < 604 && !ut && !ye && (Ye > 1.25 ? (st && (lt = !0), kn(!1)) : lt && (lt = !1, kn(!0)))
                }

                function Sn(e) {
                    _t && (Ke || Xe || Je || e && e.touches && e.touches.length > 1 || (T(e), ne.close()))
                }

                function Cn(e) {
                    if (!(Ke || Xe || Je || !e || e.shiftKey || e.ctrlKey || e.metaKey || e.altKey)) {
                        var t = Ht(Ye);
                        37 == e.keyCode ? (T(e), We >= t.max && !1 !== Fn(On - 1) && (Pe(!0), Gt())) : 39 == e.keyCode ? (T(e), We <= t.min && !1 !== Fn(On + 1) && (Pe(!0), $t())) : 27 == e.keyCode && Sn(e)
                    }
                }

                function Mn() {
                    ye ? Qn() : (vn(ct, !0), gn(ft, !0))
                }

                function Pn(e, t) {
                    return !(!_t && !t) && (!ut || (x("zpv_tag_selected", ut), ut = !1, lt && Ye <= 1.25 && (lt = !1, kn(!0)), T(e), !1))
                }

                function Tn(e) {
                    "touchstart" == e.type ? _t = !e.touches || 1 == e.touches.length : "touchmove" == e.type ? (_t = !1, y(e)) : "click" == e.type && (_t || (T(e), _t = !0))
                }

                function Dn(e) {
                    "touchstart" == e.type ? vt = !0 : "touchmove" == e.type ? (vt = !0, y(e)) : (vt = e.touches && e.length, gt = !vt)
                }
                var In = !1,
                    xn = {},
                    On = !1,
                    Ln = !1,
                    Bn = !1,
                    Rn = !1,
                    Nn = !1;

                function jn(e, t, n, i) {
                    var a = t || R(e);
                    if (e && !n || (In = null), In || (In = new Array(a)), In.length != a) {
                        var r = In;
                        In = new Array(a), g(In, r)
                    }
                    g(In, e);
                    var o = function(e) {
                        for (var t in In)
                            if (In[t].id == e) return +t;
                        return -1
                    }(Bn.id); - 1 == o && (o = On), i || $n(o)
                }

                function Fn(e) {
                    return !(e >= In.length) && (!(e < 0) && (In[e] || {
                        src: !0
                    }))
                }

                function Hn(e, t, n) {
                    var i = Se(e),
                        a = Ft();
                    ye && (In[0].loaded = t, t && (i.width > i.height ? v(e, {
                        height: a.height
                    }) : v(e, {
                        width: a.width
                    }), v(e, {
                        minWidth: 0,
                        maxWidth: "none"
                    })), Qn(!0));
                    if (qn()) {
                        if (i.width * G >= a.width) {
                            var r = a.width / (i.width || i.clientWidth);
                            if (i.height * r >= a.height) return;
                            $e = r, Ve = r, Ye = r, v.transform(le, r)
                        }
                        "VIDEO" === e.tagName && e.play()
                    }
                    N(e), le === e && (vn(t, !t), gn(t && !st, !t))
                }

                function Vn(e) {
                    var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
                    if (xn[e]) Un(e);
                    else if (t) {
                        var n = ce("video", {
                                src: e
                            }),
                            i = !1,
                            a = function() {
                                i || (i = !0, xn[e] = !0, Un(e), n = null)
                            };
                        L(n, "canplay", a), L(n, "onload", a), n.load()
                    } else {
                        var r = new Image;
                        r.addEventListener("load", function t() {
                            xn[e] = !0, Un(e), r.removeEventListener("load", t), r = null
                        }, !1), r.src = e
                    }
                }

                function Un(e) {
                    [le, ue, de].forEach(function(t) {
                        var n = M("zpv_thumb_item", t),
                            i = _(t, "data-src");
                        i === e && (t.src = i, Hn(t, !0), "VIDEO" !== t.tagName && x("zpv_ti_loading", n), _(t, "data-src", !1), qn() && statlogsValueEvent("gif_play", 0, "VIDEO" === t.tagName ? "mp4" : "gif"))
                    })
                }

                function zn(e, t, n) {
                    var i = arguments.length > 3 && void 0 !== arguments[3] && arguments[3],
                        a = M("zpv_thumb_item", e);
                    i && (O("zpv_ti_loading", a), setTimeout(function() {
                        v(le, {
                            display: "block"
                        })
                    })), i && (n = !1), t ? !0 !== t ? e.src === t ? Hn(e, !0) : xn[t] ? (e.src = t, Hn(e, !0)) : (n ? (e.src = n, Hn(e, !1)) : F(e), _(e, "data-src", t), Vn(t, i), O("zpv_ti_loading", a)) : (n ? (e.src = n, Hn(e, !1)) : F(e), O("zpv_ti_loading", a)) : F(e)
                }

                function Wn() {
                    if (_e) {
                        ! function() {
                            window.lang;
                            var e = "";
                            if (qn()) e = getLang("mobile_gif_popup_title");
                            else {
                                e = getLang("mobile_photos_photoview_header") || "";
                                var t = !1 !== mt ? mt : On;
                                e = (e = e.replace("%s", t + 1)).replace(/%s|{count}/, In.length)
                            }
                            w("zpv_summary", e)
                        }(), mn(Ye);
                        var e = Fn(!1 !== mt ? mt : On);
                        if (e && !0 !== e.src) {
                            var t = "";
                            j(e.tags, function(e, n) {
                                if (!e || 0 == e) return !0;
                                var i = Me(n),
                                    a = i.coords,
                                    r = i.href ? ' data-href="' + i.href + '" data-name="' + H(i.name) + '"' : "",
                                    o = i.al ? (i.href ? " al" + i.al : "") + " " + i.al : "";
                                t += '<div class="zpv_tag' + o + '" style="left: ' + a.x + "%; top: " + a.y + "%; width: " + a.w + "%; height: " + a.h + '%;" data-id="' + e + '"' + r + '><div class="fill"></div><div class="zpv_tl_wrap" id="zpv_tl_wrap"><div class="zpv_tl' + (i.href ? "" : " zpv_tl_plain") + '">' + V(i.name) + "</div></div></div>"
                            });
                            var n = "",
                                i = e.market_tags && e.market_tags.tags,
                                s = i && i.length,
                                l = "";
                            s && (l = a.default.html((0, o.default)({
                                items: escape(JSON.stringify(i))
                            })), i.forEach(function(e) {
                                n += a.default.html((0, r.default)(e))
                            })), w(fe, t), w(he, n), w(ie, '<div class="zpv_photo_desc">'.concat(e.caption || "", "</div>").concat(l, '<div class="zpv_bottom_bg"></div>')), U(ie, !!e.caption || s);
                            var d = "";
                            if (ve || X.getQuery("community")) d = "";
                            else {
                                var f = e.tags && e.tags[0] || 0;
                                d = "<tr>" + ('<td class="row_table_column"><a href="' + e.like_url + '" class="item_button item_like' + (e.likes_me ? " item_likes_me" : "") + '" onclick="return photoview.likePhoto(this, \'' + e.id + '\');"><i class="i_icon i_like"></i>' + (e.likes_cnt ? '<b class="v_value v_like">' + z(e.likes_cnt) + "</b>" : "") + "</a></td>") + ('<td class="row_table_column"><a href="' + e.photo_url + '#comments" class="item_button item_replies al_photo" onclick="return photoview.openPhoto(this, event, true);"><i class="i_icon i_replies"></i>' + (e.replies_cnt ? '<b class="v_value v_replies">' + e.replies_cnt + "</b>" : "") + "</a></td>") + ('<td class="row_table_last_column"><a href="' + e.photo_url + '" class="item_button item_tags al_photo" onclick="return photoview.openPhoto(this, event);"><i class="i_icon i_tags"></i>' + (f ? '<b class="v_value v_tags">' + f + "</b>" : "") + "</a></td>") + "</tr>"
                            }
                            w(ae, d), (0, c.appendQRPhotoButton)(e.photo_url), N(u)
                        } else F(u)
                    }
                }

                function qn() {
                    return Bn.isDoc
                }

                function $n(e) {
                    _e && (On = Math.max(0, Math.min(e || 0, In.length)), Bn = Fn(On), Nn = Fn(On - 1), Rn = Fn(On + 1), zn(le, Bn.src, "/images/mobile/blank.gif", Bn.hasVideo), zn(de, Rn.src), zn(ue, Nn.src), Wn(), ne.onUpdate && ne.onUpdate())
                }

                function Gn() {
                    if (_e && ge && In) {
                        var e = In[0];
                        if (!e.loaded && e.progress) {
                            var t = p("zpvu_progress", "zpv_center");
                            v(t, {
                                width: 100 * e.progress + "%",
                                visibility: "visible"
                            })
                        }
                        if (!e.read && e.thumb) {
                            e.read = !0;
                            var n = p("zpv_upload_box", "zpv_center"),
                                i = p("zpv_upload_img", n);
                            v(i, {
                                backgroundImage: "url(" + e.thumb + ")"
                            }), x("zpv_thumb_uploading", n)
                        }
                    }
                }

                function Qn(t) {
                    if (_e && ye && In) {
                        var n = In[0],
                            i = !!n.saving;
                        if (P("item_disabled", "zpv_save_button", i || !n.loaded), P("item_disabled", "zpv_cancel_button", i), P("zpv_crop_saving", e, i), me = i, t || zn(le, n.src, "/images/mobile/blank.gif"), n.loaded && n.rect && !n.rect_inited) {
                            n.rect_inited = !0;
                            var a = Ft(),
                                r = n.rect[0],
                                o = n.rect[1],
                                s = n.rect[2],
                                l = {};
                            l.currentScale = 1 / s, jt(l), nn(), ln(), l = {};
                            var c = (le.width || le.clientWidth) * Ye,
                                u = (le.height || le.clientHeight) * Ye,
                                d = r * c,
                                f = o * u;
                            l.curX = (c - a.width) / 2 - d, l.curY = (u - a.height) / 2 - f, jt(l), ln(), Oe(0)
                        }
                    }
                }

                function Yn() {
                    var i = arguments.length > 0 && void 0 !== arguments[0] && arguments[0],
                        a = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
                    _e || (rt = !1, ot = !1, st = !0, lt = !1, mt = !1, _t = !0, vt = !1, gt = !1, Et = !1, St = !1, me = !1, ve = !1, ge = !1, ye = !1, Rt(), function() {
                        var i = arguments.length > 0 && void 0 !== arguments[0] && arguments[0],
                            a = arguments.length > 1 && void 0 !== arguments[1] && arguments[1],
                            r = window.lang,
                            o = "";
                        o = i ? (0, l._getLayer)(a) : '<div id="z_photoview"><div class="zpv_siblings"><div id="zpv_left" class="zpv_thumb_item"><img class="zpv_img" alt=""></div><div id="zpv_right" class="zpv_thumb_item"><img class="zpv_img" alt=""></div></div><div class="zpv_body"><div id="zpv_center" class="zpv_thumb_item"><img class="zpv_img" alt=""></div></div><div class="zpv_close_msg_wrap"><div class="zpv_close_msg">' + r.mobile_zphoto_move_to_close + '</div></div><div class="zpv_controls"><div class="mhead zpv_header"><a class="zpv_close_btn" onclick="return photoview.closePhoto(event);"><i class="zpv_close_icon"></i></a><div class="hb_wrap"><h1 id="zpv_summary" class="hb_btn mh_header"></h1></div></div><div class="zpv_zoom_btns"><a class="zpv_zoom_btn zpv_zoomin"><b class="zpv_zb_wrap"><i class="i_icon"></i></b></a><a class="zpv_zoom_btn zpv_zoomout"><b class="zpv_zb_wrap"><i class="i_icon"></i></b></a></div><div class="zpv_bottom"><div class="zpv_photo_desc_wrap"></div><div class="zpv_bottom_body"><table class="zpv_values like_box row_table"></table></div></div></div><div class="zpv_tags"></div><div class="zpv_market_tags"></div><div class="zpva zpv_crop"><div class="zpv_crop_box"></div><div class="zpv_crop_loading"></div></div></div>';
                        var s = "/images/mobile/zpv_icons" + (f("x2", window.bodyNode) ? "_2x" : "") + ".png?2";
                        (new Image).src = s, Z.create(o, Xn), e = h("z_photoview"), p("zpv_body", e), t = p("zpv_siblings", e), n = p("zpv_controls", e), re = p("zpv_zoom_btns", e), d = p("zpv_close_msg_wrap", e), u = p("zpv_bottom", e), ie = p("zpv_photo_desc_wrap", e), ae = p("zpv_values", u), oe = p("zpv_zoomin", re), se = p("zpv_zoomout", re), fe = p("zpv_tags", e), he = p("zpv_market_tags", e), p("zpv_crop", e), le = p("zpv_img", "zpv_center"), ue = p("zpv_img", "zpv_left"), de = p("zpv_img", "zpv_right"), "VIDEO" === le.tagName && (le.controls = !1)
                    }(i, a), function() {
                        if (pe = void 0 !== document.ontouchmove, Ae = !1, pe) {
                            var t = p("zpv_header", e),
                                n = p("zpv_bottom_body", e);
                            L(t, "touchstart touchmove touchend touchcancel", Dn), L(n, "touchstart touchmove touchend touchcancel", Dn), L(e, "touchstart touchmove click", Tn), L(e, "touchstart", un), L(e, "touchmove", dn), L(e, "touchend touchcancel", fn), Ae ? (L(e, "gesturestart", hn), L(e, "gesturechange", pn), L(e, "gestureend", An)) : (L(e, "touchstart", xt), L(e, "touchmove", Ot), L(e, "touchend touchcancel", Lt), L(e, "gesturestart gesturechange gestureend", T))
                        } else L(e, "mousedown", un), L(e, "mousemove", dn), L(window, "mouseup", fn), L(window, "mousewheel", Bt), L(window, "keydown", Cn)
                    }(), _e = !0, $(e), C() || C(0))
                }

                function Xn() {
                    _e && (! function() {
                        if (pe) {
                            var t = p("zpv_header", e),
                                n = p("zpv_bottom_body", e);
                            B(t, "touchstart touchmove touchend touchcancel", Dn), B(n, "touchstart touchmove touchend touchcancel", Dn), B(e, "touchstart touchmove click", Tn), B(e, "touchstart", un), B(e, "touchmove", dn), B(e, "touchend touchcancel", fn), Ae ? (B(e, "gesturestart", hn), B(e, "gesturechange", pn), B(e, "gestureend", An)) : (B(e, "touchstart", xt), B(e, "touchmove", Ot), B(e, "touchend touchcancel", Lt), B(e, "gesturestart gesturechange gestureend", T))
                        } else B(e, "mousedown", un), B(e, "mousemove", dn), B(window, "mouseup", fn), B(window, "mousewheel", Bt), B(window, "keydown", Cn)
                    }(), e = t = n = d = !1, u = ae = !1, re = oe = se = !1, le = ue = de = fe = !1, _e = !1, In = null)
                }
                return {
                    onShow: (0, i.default)(),
                    onHide: (0, i.default)(),
                    likePhoto: function(e, t) {
                        return !!_t && (Y.highlight = !1, Y.end(), Bn.likes_me ? (Bn.likes_me = !1, --Bn.likes_cnt) : (Bn.likes_me = !0, ++Bn.likes_cnt), Wn(), Q.click(e, g({
                            photo_id: t
                        }, J)))
                    },
                    openPhoto: function(e, t, n) {
                        var i = window.cur;
                        if (!_t) return !1;
                        var a = i.replyNames,
                            r = i.sticker_panel,
                            o = i.stickers,
                            s = X.go(e, t, {
                                local: !0,
                                fast: !0,
                                beforeAppend: function(e) {
                                    w(p("mcont", e), '<div class="pcont"><div class="media_view photo_view"><div class="pv_summary"><div class="summary_loading" style="display: none;"><i class="i_loading"></i></div></div><div class="pv_tag_wrap"></div><div class="pv_body pv_touch pv_touch_full pv_hidden_icons"><a class="thumb_item"><div class="pv_photo_wrap" id="pv_photo_tags" onclick="return photo.closeTags(event);"><img src="/images/mobile/blank.gif" class="ph_img" alt="" /></div></a><div class="pv_nav"><table class="row_table pv_nav_cont"><tr><td class="pv_nav_left"><a class="pv_nav_link"><span class="pv_icon"><i class="i_icon"></i></span></a></td><td class="pv_nav_z"><a class="pv_nav_link"><span class="pv_icon"><i class="i_icon"></i></span></a></td><td class="pv_nav_right"><a class="pv_nav_link"><span class="pv_icon"><i class="i_icon"></i></span></a></td></tr></table></div></div><div class="pv_footer"></div></div></div>'), w("m", e.innerHTML)
                                }
                            });
                        g(i, {
                            replyNames: a,
                            sticker_panel: r,
                            stickers: o,
                            processNav: function(e) {
                                var t;
                                if (t = /^\/photo(-?\d+_\d+)$/i.exec(e.nav.path)) {
                                    var n = D(e.nav.params),
                                        i = D(X.params);
                                    if (n.act) return !1;
                                    if (n.offset != i.offset) return !1;
                                    if (n.list != i.list && !i.z) return !1;
                                    e.onPreNav && e.onPreNav();
                                    var a = n.list || "",
                                        r = n.rev ? "/rev" : "";
                                    return !ee.open(t[1], a + r, null, n.from, !0)
                                }
                                return !1
                            }
                        }), i.destroy.push(function() {
                            ee.clear()
                        });
                        var l = window.lang;
                        if (!s && !(s = X.go(e, t, {
                                force: !0
                            }))) {
                            var c = !0;
                            if (Z._lastNav) {
                                var u = Z._lastNav,
                                    d = D(u.params);
                                delete d.z, c = u.path + I(d) + u.hash
                            }
                            K.setMhead("m", l.mobile_photos_photo_head_title, c), ee.showIcons()
                        }
                        return !0
                    },
                    closePhoto: Sn,
                    savePhoto: function(e, t) {
                        if (!_t) return !1;
                        if (Y.highlight = !1, Y.end(), f("item_disabled", e)) return !1;
                        if (!ye || !In) return !1;
                        var n = In[0],
                            i = Ft(),
                            a = le.width * Ye,
                            r = (le.height || le.clientHeight) * Ye,
                            o = (a - i.width) / 2 - We,
                            s = (r - i.height) / 2 - qe,
                            l = 1 / Ye,
                            c = o / a,
                            u = s / r;
                        return n.onSelect && n.onSelect(c, u, l), !1
                    },
                    cancelPhoto: function(e, t) {
                        return !!_t && (Y.highlight = !1, Y.end(), !f("item_disabled", e) && Sn())
                    },
                    onClose: null,
                    onUpdate: null,
                    onPhotoChange: null,
                    saveSource: jn,
                    opened: function() {
                        return _e
                    },
                    openCrop: function(t, n) {
                        n = n || {};
                        var i = !_e;
                        ge ? ge = !1 : Yn(), ye = !0, me = !1, In = [t], i && (Z.open(), Z.onResize = Mn),
                            function() {
                                if (_e && ye) {
                                    var t = window.lang;
                                    w("zpv_summary", t.mobile_zphoto_owner_crop_header), x("zpv_mode_[a-z]+", e, !0), O("zpv_mode_crop", e), mn(Ye), le.parentNode || (w("zpv_center", ""), q(le, "zpv_center"));
                                    var n = '<tr><td class="row_table_column"><a class="item_button" id="zpv_save_button" onclick="return photoview.savePhoto(this);"><i class="i_icon i_save"></i><span class="v_value">' + t.mobile_zphoto_save_btn + '</span></a></td><td class="row_table_last_column" width="50%"><a class="item_button" id="zpv_cancel_button" onclick="return photoview.cancelPhoto(this);"><i class="i_icon i_cancel"></i><span class="v_value">' + t.mobile_zphoto_cancel_btn + "</span></a></td></tr>";
                                    w(ae, n), N(u), Qn()
                                }
                            }()
                    },
                    updateCrop: function(e) {
                        if (!In) return !1;
                        e = g(In[0] || {}, e), In = [e], Qn()
                    },
                    openUpload: function(t, n) {
                        n = n || {}, Yn(), ge = !0, me = !0, In = [t], Z.open(), Z.onResize = Mn,
                            function() {
                                if (_e && ge) {
                                    var t = window.lang;
                                    w("zpv_summary", t.mobile_zphoto_upload_header), x("zpv_mode_[a-z]+", e, !0), O("zpv_mode_upload", e);
                                    W(le), w("zpv_center", '<div class="zpva zpv_upload_box zpv_thumb_uploading"><div class="zpv_upload_img"></div><div class="zpvu_progress_wrap"><div class="zpvu_progress"></div></div></div>');
                                    var n = '<tr><td class="row_table_column" width="50%"><a class="item_button item_disabled" onclick="return false;"><i class="i_icon i_save"></i><span class="v_value">' + t.mobile_zphoto_save_btn + '</span></a></td><td class="row_table_last_column" width="50%"><a class="item_button" onclick="return photoview.cancelPhoto(this);"><i class="i_icon i_cancel"></i><span class="v_value">' + t.mobile_zphoto_cancel_btn + "</span></a></td></tr>";
                                    w(ae, n), N(u), Gn()
                                }
                            }()
                    },
                    updateUpload: function(e) {
                        if (!In) return !1;
                        e = g(In[0] || {}, e), In = [e], Bn = !1, Gn()
                    },
                    open: function(e, t, n) {
                        var i, a;
                        ne.onShow(), Yn((n = n || {}).isDoc, n.hasVideo), ve = n.local || !1, t && jn(t, !1, !1, !0), $n(e), Ln = 0, Z.open(), Z.onResize = Mn, i = p("zpv_close_msg", d), a = E(i), v(d, {
                            width: a || 250
                        })
                    },
                    close: function() {
                        ne.onHide(), ne.onClose && ne.onClose({
                            local: ve
                        }) || Z.close()
                    }
                }
            }();
        window.photoview = ne
    },
    i3N4: function(e, t, n) {
        "use strict";
        var i;
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var a = ((i = n("8kEl")) && i.__esModule ? i : {
            default: i
        }).default;
        t.default = a
    },
    i5VY: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("eZEc")) && i.__esModule ? i : {
            default: i
        };
        var r = function(e) {
            var t = window.lang;
            return {
                inner: [{
                    inner: e.order_title,
                    tag: "h2",
                    class: "Order__title"
                }, {
                    tag: "a",
                    class: "Order__detailsLink",
                    inner: t.mobile_market_order_details,
                    href: "/orders?order_id=".concat(e.id)
                }, (0, a.default)({
                    class: "Order__info",
                    items: [{
                        title: t.mobile_market_order_status,
                        text: e.status_text
                    }, {
                        title: t.mobile_market_order_total_price,
                        text: e.total_price
                    }, {
                        title: t.mobile_market_order_date,
                        text: e.order_date
                    }, {
                        title: t.mobile_market_order_shop,
                        text: e.group_link
                    }]
                }), {
                    inner: o(e.items_thumbs, e.id),
                    class: "Order__thumb"
                }],
                class: "OrderList__item"
            }
        };

        function o(e, t) {
            return e.map(function(e) {
                var n = {};
                return e[1] && (n = {
                    inner: "+".concat(e[1]),
                    class: "Order__thumbOverlay",
                    href: "/orders?order_id=".concat(t)
                }), {
                    style: 'background-image: url("'.concat(e[0], '")'),
                    inner: n,
                    class: "Order__thumbItem"
                }
            })
        }
        t.default = r
    },
    i8t0: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), Object.defineProperty(t, "open", {
            enumerable: !0,
            get: function() {
                return i.open
            }
        }), Object.defineProperty(t, "go", {
            enumerable: !0,
            get: function() {
                return i.go
            }
        });
        var i = n("h1CJ");
        window.CopyrightPopup = {
            open: i.open,
            go: i.go
        }
    },
    iDzD: function(e, t, n) {
        "use strict";

        function i(e) {
            return {
                class: ["Anchor", e.mix],
                id: e.id,
                tag: "div"
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.Anchor = i, t.default = void 0;
        var a = i;
        t.default = a
    },
    "iE+E": function(e, t, n) {
        "use strict";
        var i, a, r, o, s, l, c = (i = n("+cqQ")) && i.__esModule ? i : {
            default: i
        };

        function u(e, t, n) {
            return t in e ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = n, e
        }
        var d = window,
            f = d.throttle,
            h = d.onDOMReady,
            p = d.addEvent,
            A = d.lsSet,
            m = d.lsGet,
            _ = d.hasClass,
            v = (d.clog, d.domCA),
            g = d.scrollGetY,
            y = d.getCh,
            b = d.nav,
            w = d.page,
            k = d.getCw,
            E = d.ajax,
            S = d.extend;
        window.FeedAssistanceStats = (u(a = {
            register: et,
            forceRegister: function(e, t) {
                e[j] = nt(e), e[H] = t, Ne.push(e)
            },
            onScroll: f(at, 50),
            onStartViewElement: (0, c.default)("element"),
            onEndViewElement: (0, c.default)("element"),
            onStopTrackElement: (0, c.default)("element"),
            onViewedElement: (0, c.default)("element"),
            onBeforePageChange: lt,
            onPageChanged: ct,
            getElementType: nt,
            registerElements: Je,
            registerTrackingCls: function(e) {
                Ye.push(e)
            },
            unregisterTrackingCls: Ke
        }, "unregisterTrackingCls", Ke), u(a, "setParenViewableX", function(e, t) {
            e[K] = t
        }), u(a, "forceProcessTrack", tt), u(a, "dispatchElementEvent", function(e, t) {
            var n = function(e) {
                return Te[e]
            }(Ot(t[j] || nt(t), e));
            ft({
                type: e,
                data: n(t)
            })
        }), u(a, "dispatchEvent", function(e) {
            ft(e)
        }), u(a, "serializeEventData", it), u(a, "clearElemsCache", function() {
            Ne.forEach(function(e) {
                e[W] = !1, e[q] = !1
            })
        }), u(a, "_debug", function() {
            return {
                started: je,
                tracking: Ne,
                events: Qe,
                blindTop: He,
                blindBottom: Ve
            }
        }), u(a, "getFromRef", Ut), u(a, "getRoot", zt), u(a, "BLOCKS", {}), u(a, "EVENTS", {}), a);
        var C = .5,
            M = .25,
            P = 500,
            T = 3e5,
            D = 2500,
            I = 1e4,
            x = 6e3,
            O = 2e4,
            L = 3e4,
            B = 5e3,
            R = 36e4,
            N = 100,
            j = "_feedAssistanceStatsType",
            F = "_feedAssistanceStatsIdled",
            H = "_feedAssistanceStatsModule",
            V = "_feedAssistanceStatsStarted",
            U = "_feedAssistanceStatsProcessed",
            z = "_feedAssistanceStatsEventTs",
            W = "_feedAssistanceStatsCachedY",
            q = "_feedAssistanceStatsCachedX",
            $ = "_feedAssistanceStatsLeft",
            G = "_feedAssistanceStatsHeight",
            Q = "_feedAssistanceStatsWidth",
            Y = "_feedAssistanceStatsTop",
            X = "_feedAssistanceStatsBottom",
            K = "_feedAssistanceStatsParentViewableX",
            J = "BLOCK_TYPE_RECOMMENDED_SLIDER",
            Z = "BLOCK_TYPE_DEFAULT",
            ee = "BLOCK_TYPE_EXPLORE_BAIT",
            te = "BLOCK_TYPE_PROFILE_PHOTO",
            ne = "BLOCK_TYPE_PROMO_BUTTON",
            ie = "BLOCK_TYPE_IMPORT_CONTACTS",
            ae = "BLOCK_TYPE_PUSH_SWITCH",
            re = "explore_bait",
            oe = "feed_assistance",
            se = "hide",
            le = "promo_button",
            ce = "SUB_EXPLORE_BAIT",
            ue = "view",
            de = "like",
            fe = "comment",
            he = "opened",
            pe = "subscribe",
            Ae = "unsubscribe",
            me = "open_user",
            _e = "open_group",
            ve = "hide",
            ye = "report",
            be = "seen",
            we = "filled",
            ke = "enable_push",
            Ee = "decline_push",
            Se = "SUB_PROMO_BUTTON",
            Ce = "clicked",
            Me = (u(r = {}, J, "view_block"), u(r, ne, "view_block"), u(r, ee, re), u(r, te, oe), u(r, ie, oe), u(r, ae, oe), r),
            Pe = (u(o = {}, J, 500), u(o, ee, P), u(o, te, P), u(o, ie, P), u(o, ae, P), o),
            Te = (u(s = {}, Ot(J, "view_block"), function(e) {
                var t = geByClass1("Slider__scroll", e),
                    n = domData(t, "code");
                return it("view_block", "", e, domData(t, "ref"), n)
            }), u(s, Ot(ne, "view_block"), function(e) {
                return it("view_block", geByClass1("feedAssistancePromoButtonInstallApp__button", e) ? "promo_install_app" : "promo_button", e)
            }), u(s, Ot(ee, re), function() {
                return it(ce, ue)
            }), u(s, Ot(te, oe), function(e) {
                return it(oe, e, "m_ph", be)
            }), u(s, Ot(ie, oe), function(e) {
                return it(oe, e, "m_mp", be)
            }), u(s, Ot(ae, oe), function(e) {
                return it(oe, e, "m_push_switch", be)
            }), s),
            De = (u(l = {}, "view_block", function(e, t, n, i) {
                return n = n || Ut(t), [e, domChildIndex(t), Wt(t), n, i].join("|")
            }), u(l, ce, function(e) {
                return e
            }), u(l, oe, function(e, t, n) {
                return [t, n, Ut(e)].join("|")
            }), u(l, se, function(e, t) {
                return [e, Wt(t), domChildIndex(t), Ut(t)].join("|")
            }), u(l, Se, function(e, t, n) {
                return [domChildIndex(e), t, n || ""].join("|")
            }), l),
            Ie = "feed_other",
            xe = "feedAssistance",
            Oe = "feedAssistanceStat.events",
            Le = "feedAssistanceStat.idled",
            Be = "/feed",
            Re = "assistance_stats",
            Ne = [],
            je = [],
            Fe = Date.now(),
            He = 0,
            Ve = 0,
            Ue = !1,
            ze = null,
            We = null,
            qe = null,
            $e = null,
            Ge = null,
            Qe = [],
            Ye = [],
            Xe = !1;

        function Ke(e) {
            Nt(Ye, e)
        }

        function Je() {
            var e = [];
            each(Ye, function() {
                e = e.concat(geByClass(this))
            }), each(e, function() {
                et(this, "feed")
            })
        }

        function Ze() {
            Je();
            var e = Tt();
            e.length && (St(e), Dt()), tt(), vt()
        }

        function et(e, t) {
            !e[j] && function(e) {
                return !~Ne.indexOf(e)
            }(e) && (e[j] = nt(e), e[H] = t, Ne.push(e))
        }

        function tt() {
            ut(g(), y())
        }

        function nt(e) {
            return e[j] ? e[j] : _("feedAssistance_recommendedFriends", e) ? J : _("post_exploreBait", e) ? ee : _("feedAssistance_profilePhoto", e) ? te : _("feedAssistance_promoButton", e) ? ne : _("feedAssistance_importContacts", e) ? ie : _("feedAssistance_pushNotificationsSwitch", e) ? ae : Z
        }

        function it(e) {
            for (var t = arguments.length, n = new Array(t > 1 ? t - 1 : 0), i = 1; i < t; i++) n[i - 1] = arguments[i];
            return De[e].apply(De, n)
        }

        function at(e, t) {
            var n, i = at;
            ut(e || g(), t || y()), Ue || Xe ? (clearTimeout(i.timer), i.timer = setTimeout(rt, 150), Xe = !1) : (Ue = !0, _t(), n = ge("vk_head"), He = n && n.offsetHeight, Ve = 0)
        }

        function rt() {
            _t(), mt(), Ue = !1
        }

        function ot() {
            _t(), Vt(je), St(Qe.concat(xt(je))), Ft(je), Qe = [], je = [], gt()
        }

        function st() {
            je.forEach(function(e) {
                e[V] = Date.now()
            }), Ct(null), Mt(null), mt(), gt(), vt()
        }

        function lt() {
            _t(), Vt(je), Qe = Qe.concat(xt(je)), Ft(je), je = [], Xe = !0, mt()
        }

        function ct() {
            Je(), tt()
        }

        function ut(e, t) {
            var n = [];
            Ne.forEach(function(i) {
                Rt(i) ? n.push(i) : ! function(e, t, n) {
                    return !e[V] && pt(e, C, t, n) && At(e, C)
                }(i, e, t) ? ! function(e, t, n) {
                    return e[V] && (!pt(e, M, t, n) || !At(e, M))
                }(i, e, t) ? ht(i) && (dt(i), FeedAssistanceStats.onViewedElement(i)) : (i[F] ? delete i[F] : (dt(i), FeedAssistanceStats.onEndViewElement(i)), delete i[V]) : (i[V] = Date.now(), je.push(i), FeedAssistanceStats.onStartViewElement(i))
            }), n.forEach(function(e) {
                Nt(Ne, e), FeedAssistanceStats.onStopTrackElement(e)
            })
        }

        function dt(e) {
            Nt(je, e), Ht(e), ft(Bt(e)), jt(e)
        }

        function ft(e) {
            e && Qe.push(e)
        }

        function ht(e) {
            return !!e[V] && Math.min(T, Date.now() - e[V]) > function(e) {
                var t = nt(e);
                return Pe[t] || P
            }(e)
        }

        function pt(e, t, n, i) {
            if (!e) return !1;
            e[W] || (e[W] = !0, e[G] = e.offsetHeight, e[Y] = n + e.getBoundingClientRect().top, e[X] = e[Y] + e[G]);
            var a = i - He - Ve,
                r = n + He,
                o = n + i - Ve,
                s = e[G],
                l = e[Y],
                c = e[X];
            return (c > r && l < o ? Math.min(o, c) - Math.max(r, l) : 0) >= Math.min(a * t, s * t)
        }

        function At(e, t) {
            var n = e[K];
            n && !n[q] && ~Ne.indexOf(n) && (n[q] = !0, n[Q] = n.clientWidth, n[$] = n.getBoundingClientRect().left + n.clientLeft), e[q] || (e[q] = !0, e[Q] = e.offsetWidth);
            var i = n ? n[Q] || n.clientWidth : k(),
                a = n ? n[$] || n.getBoundingClientRect().left + 0 : 0,
                r = i + a,
                o = e[Q],
                s = e.getBoundingClientRect().left,
                l = o + s,
                c = o * t,
                u = o * Math.max(0, 1 - t);
            return s + c >= a && l - u <= r
        }

        function mt() {
            ze = setTimeout(yt, D), We = setTimeout(bt, I), qe = setTimeout(wt, x), $e = setTimeout(kt, O)
        }

        function _t() {
            clearTimeout(ze), clearTimeout(We), clearTimeout(qe), clearTimeout($e)
        }

        function vt() {
            Ge = setInterval(Et, L)
        }

        function gt() {
            clearInterval(Ge)
        }

        function yt() {
            Qe.length && Ct(Qe)
        }

        function bt() {
            St(Qe), Qe = [], Ct(null)
        }

        function wt() {
            je.length && (Mt(xt(je)), qe = setTimeout(wt, B))
        }

        function kt() {
            clearTimeout(qe), Vt(je), St(xt(je)), Ft(je), je.forEach(function(e) {
                e[F] = !0
            }), je = [], Mt(null)
        }

        function Et() {
            Qe.length >= N && bt()
        }

        function St(e) {
            if (e && e.length) {
                var t = {
                    act: Re
                };
                t = S(t, (n = {}, each(e, function() {
                    n[this.type] ? n[this.type].push(this.data) : n[this.type] = [this.data]
                }), n)), E.post(Be, t)
            }
            var n
        }

        function Ct(e) {
            Pt(Oe, e)
        }

        function Mt(e) {
            Pt(Le, e)
        }

        function Pt(e, t) {
            var n = m(e) || {};
            t ? n[Fe] = t : delete n[Fe], A(e, n)
        }

        function Tt() {
            var e = Tt,
                t = [],
                n = m(Oe) || {},
                i = m(Le) || {};
            return e.iterator || (e.iterator = function(e) {
                return function(n) {
                    It(n) && (t = t.concat(e[n]))
                }
            }), Object.keys(n).forEach(e.iterator(n)), Object.keys(i).forEach(e.iterator(i)), t
        }

        function Dt() {
            var e = Dt,
                t = m(Oe) || {},
                n = m(Le) || {};
            e.iterator || (e.iterator = function(e) {
                return function(t) {
                    It(t) && delete e[t]
                }
            }), Object.keys(t).forEach(e.iterator(t)), Object.keys(n).forEach(e.iterator(n)), A(Oe, t), A(Le, n)
        }

        function It(e) {
            var t = Number(e);
            return t !== Fe && Date.now() - t >= R
        }

        function xt(e) {
            var t = [];
            return e.forEach(function(e) {
                var n = Bt(e);
                n && t.push(n)
            }), t
        }

        function Ot(e, t) {
            return e + "_" + t
        }

        function Lt(e, t) {
            return (0, Te[Ot(e[j], t)])(e)
        }

        function Bt(e) {
            if (Rt(e)) return null;
            if (!ht(e)) return null;
            var t = function(e) {
                return Me[e[j]]
            }(e);
            return {
                type: t,
                data: Lt(e, t)
            }
        }

        function Rt(e) {
            return e[U] || !document.body.contains(e)
        }

        function Nt(e, t) {
            var n = e.indexOf(t);
            n >= 0 && e.splice(n, 1)
        }

        function jt(e) {
            Rt(e) || ht(e) && (e[U] = !0)
        }

        function Ft(e) {
            each(e, function() {
                jt(this)
            })
        }

        function Ht(e) {
            e[z] = Date.now()
        }

        function Vt(e) {
            e.forEach(Ht)
        }

        function Ut(e) {
            return (e = zt(e)) && domData(e, "from-ref") || Ie
        }

        function zt(e) {
            return _(e, xe) || (e = v(e, "." + xe)), e
        }

        function Wt(e) {
            var t = (new Date).getTime();
            return e && (e[z] || e[V]) || t
        }
        FeedAssistanceStats.BLOCKS = {
            BLOCK_TYPE_RECOMMENDED_SLIDER: J,
            BLOCK_TYPE_EXPLORE_BAIT: ee,
            BLOCK_TYPE_PROFILE_PHOTO: te,
            BLOCK_TYPE_PROMO_BUTTON: ne,
            BLOCK_TYPE_IMPORT_CONTACTS: ie
        }, FeedAssistanceStats.EVENTS = {
            EVENT_EXPLORE_BAIT: re,
            EVENT_EXPLORE_BAIT_SUB: ce,
            EVENT_FEED_ASSISTANCE: oe,
            SUB_EVENT_EXPLORE_BAIT_VIEW: ue,
            SUB_EVENT_EXPLORE_BAIT_LIKE: de,
            SUB_EVENT_EXPLORE_BAIT_COMMENT: fe,
            SUB_EVENT_EXPLORE_BAIT_OPENED: he,
            SUB_EVENT_EXPLORE_BAIT_SUBSCRIBE: pe,
            SUB_EVENT_EXPLORE_BAIT_UNSUBSCRIBE: Ae,
            SUB_EVENT_EXPLORE_BAIT_OPEN_USER: me,
            SUB_EVENT_EXPLORE_BAIT_OPEN_GROUP: _e,
            SUB_EVENT_EXPLORE_BAIT_HIDE: ve,
            SUB_EVENT_EXPLORE_BAIT_REPORT: ye,
            SUB_EVENT_SEEN: be,
            SUB_EVENT_FILLED: we,
            EVENT_HIDE_BLOCK: se,
            SUB_EVENT_ENABLE_PUSH: ke,
            SUB_EVENT_DECLINE_PUSH: Ee,
            EVENT_PROMO_BUTTON: le,
            EVENT_PROMO_BUTTON_SUB: Se,
            SUB_EVENT_PROMO_BUTTON_CLICK: Ce
        }, p(window, "blur", ot), p(window, "focus", st), h(function() {
            setTimeout(Ze, 500)
        }), p(window, "scroll", function() {
            at(g(), y())
        }), b.onBeforeGo(function() {
            return lt()
        }), w.onChange(function() {
            return ct()
        })
    },
    iGfS: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("QQoL")) && i.__esModule ? i : {
            default: i
        };
        var r = function() {
            var e = window.store,
                t = "/feed?section=notifications";
            return (0, a.default)({
                url: t,
                count: e.notificationsCount,
                onclick: ["nav.onMenuItemClick", t]
            })
        };
        t.default = r
    },
    iN5q: function(e, t, n) {
        "use strict";
        n("RkGL"), n("21le"), n("4rnG")
    },
    iS9e: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("rUE2")) && i.__esModule ? i : {
            default: i
        };
        n("pYST");
        var r = a.default;
        t.default = r, window.MailDialog = a.default
    },
    iUjD: function(e, t, n) {
        "use strict";
        var i = n("UxAg"),
            a = l(n("bZ/P")),
            r = l(n("+cqQ")),
            o = l(n("gy8s")),
            s = n("k9Tg");

        function l(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }

        function c(e) {
            (0, i.$$)(".mailHat").forEach(function(t) {
                var n = a.default.parseClass("mailHat", t.getAttribute("class"));
                t.setAttribute("class", a.default.class("mailHat", Object.assign({}, n, e)))
            })
        }
        Object.assign(s.MailHat_main, {
            onUnreadClick: (0, r.default)(),
            onBurgerClick: (0, r.default)(),
            onCancelForwardTap: (0, r.default)(),
            setFolder: function(e) {
                (0, i.$$)(".mailHat__folder").forEach(function(t) {
                    o.default.setActive(t, e)
                })
            },
            setUnreadCount: function(e) {
                (0, i.$$)(".mailHat_type_main").forEach(function(t) {
                    var n = t.$(".mailHat__unread"),
                        i = t.$(".mailHat__unreadCount");
                    n.classList.toggle("mailHat__unread_hasUnread", e > 0), i.outerHTML = (0, s.MailHat__unreadCount)(e)
                })
            },
            setImportantCount: function(e) {
                (0, i.$$)(".mailHat__folder").forEach(function(t) {
                    o.default.setCount(t, "important", e)
                })
            },
            setForwarding: function(e) {
                (0, i.$$)(".mailHat_type_main").forEach(function(t) {
                    return t.classList.toggle("mailHat_forwarding", e)
                })
            },
            setModifiers: c
        }), Object.assign(s.MailHat_convo, {
            onBackTap: (0, r.default)(),
            onCancelEditingTap: (0, r.default)(),
            setOnline: function(e, t) {
                var n = (0, s.MailHat_getOnlineText)(e, t);
                (0, i.$$)(".mailHat__convoDetailsText").forEach(function(e) {
                    return e.innerText = n
                })
            },
            setMobile: function(e) {
                (0, i.$$)(".mailHat__convo").forEach(function(t) {
                    return t.classList.toggle("mailHat__convo_mobile", e)
                })
            },
            setHasPinnedMsg: function(e) {
                (0, i.$$)(".mailHat_type_convo").forEach(function(t) {
                    return t.classList.toggle("mailHat_hasPinnedMsg", e)
                })
            },
            setModifiers: c
        })
    },
    irqS: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), Object.defineProperty(t, "Messenger", {
            enumerable: !0,
            get: function() {
                return i.Messenger
            }
        }), t.default = void 0;
        var i = function(e) {
            if (e && e.__esModule) return e;
            var t = a();
            if (t && t.has(e)) return t.get(e);
            var n = {};
            if (null != e) {
                var i = Object.defineProperty && Object.getOwnPropertyDescriptor;
                for (var r in e)
                    if (Object.prototype.hasOwnProperty.call(e, r)) {
                        var o = i ? Object.getOwnPropertyDescriptor(e, r) : null;
                        o && (o.get || o.set) ? Object.defineProperty(n, r, o) : n[r] = e[r]
                    }
            }
            n.default = e, t && t.set(e, n);
            return n
        }(n("lQx8"));

        function a() {
            if ("function" != typeof WeakMap) return null;
            var e = new WeakMap;
            return a = function() {
                return e
            }, e
        }
        n("Zoa4"), n("FLY7");
        var r = i.default;
        t.default = r, window.uMessenger = i.default, window.Messenger = i.Messenger
    },
    "is+u": function(e, t, n) {
        "use strict";
        var i = need("Voting");

        function a(e) {
            o(e.$voting, e.url)
        }

        function r(e, t) {
            o(t.$voting, e, !0)
        }

        function o(e, t, n) {
            var a = setTimeout(function() {
                i.setLoading(e)
            }, 140);
            ajax.post(t, {
                _ajax: 1
            }, {
                onDone: function(t, r) {
                    domData(e, "is-web-view") && i._onPollChanged && i._onPollChanged(e, n), clearTimeout(a), i.setHtml(t, r)
                }
            })
        }
        window.uVoting = {}, uVoting._onSubmit = a, uVoting._onRevoteClick = r
    },
    jE2t: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.getNetworkType = function() {
            if (!1 === navigator.onLine) return "none";
            var e = navigator.connection || navigator.webkitConnection || navigator.mozConnection;
            if (!e) return "unknown";
            if (e.effectiveType) return e.effectiveType;
            var t = +(e.downlinkMax || e.downlink);
            if (t) return t < 50 ? "slow-2g" : t < 70 ? "2g" : t < 700 ? "3g" : "4g";
            return i[e.type] || "unknown"
        };
        var i = {
            bluetooth: "2g",
            cellular: "2g",
            ethernet: "4g",
            mixed: "unknown",
            none: "none",
            other: "unknown",
            unknown: "unknown",
            wifi: "3g",
            wimax: "4g"
        }
    },
    jIm5: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i = s(n("29dZ")),
            a = s(n("vpQl")),
            r = s(n("JAxc")),
            o = s(n("RVNN"));

        function s(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        var l = function(e) {
            var t = !e.is_orders_enabled && e.contact_cell;
            return Wd.html({
                class: "pcont",
                inner: {
                    class: "PageBlock MarketItem",
                    inner: [{
                        inner: e.message
                    }, {
                        class: "MarketItem__photoView photo_view",
                        inner: [{
                            class: "pv_body ".concat(e.photo_wrap_class),
                            inner: [Wd.wrap(e.photo), Wd.wrap(e.nav)]
                        }, {
                            class: "Biatlon",
                            id: "market_biatlon"
                        }]
                    }, {
                        id: "market".concat(e.item_raw),
                        class: "MarketItem__content",
                        inner: [(0, a.default)(e.price_cell), c(), e.is_orders_enabled && [{
                            class: "MarketItem__addButtonWrapper",
                            inner: (0, r.default)({
                                quantity: e.initial_quantity,
                                item_id: e.item_id,
                                group_id: e.group_id,
                                hash: e.hash
                            })
                        }, c()], (0, a.default)(e.author_cell), c(), e.is_my_mall && [(0, o.default)(), c()], {
                            inner: Wd.wrap(e.description),
                            class: "MarketItem__description"
                        }, {
                            inner: Wd.wrap(e.stats),
                            class: "MarketItem__stats"
                        }, t && [c(), (0, i.default)(e.contact_cell)], c(!0), Wd.wrap(e.likes_shares), Wd.wrap(e.likes)]
                    }, {
                        class: "comments_wrap bl_cont",
                        inner: Wd.wrap(e.comments)
                    }]
                }
            })
        };

        function c() {
            return {
                class: arguments.length > 0 && void 0 !== arguments[0] && arguments[0] ? "MarketItem__delimiter MarketItem__delimiter--top" : "MarketItem__delimiter"
            }
        }
        t.default = l
    },
    jLRy: function(e, t, n) {
        "use strict";
        var i = n("UxAg"),
            a = need("nav");
        window.PinnedMsg = {
            onHideClick: befall(),
            getByMsgId: function(e) {
                return (0, i.$)(r.pinnedMsg(e))
            }
        };
        var r = {
            pinnedMsg: function(e) {
                return '.pinnedMsg[data-msg-id="'.concat(e, '"]')
            }
        };

        function o(e, t) {
            a.go(t, e)
        }
        PinnedMsg._onClick = o, PinnedMsg._onHideClick = PinnedMsg.onHideClick
    },
    jMiB: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("fw35")) && i.__esModule ? i : {
            default: i
        };
        window.OfflinePage = a.default;
        var r = a.default;
        t.default = r
    },
    jXv2: function(e, t, n) {
        "use strict";
        var i = d(n("pOpT")),
            a = d(n("T9Df")),
            r = d(n("HON1")),
            o = d(n("TYsd")),
            s = n("V4qE"),
            l = n("OcsD"),
            c = n("UxAg"),
            u = n("J8bf");

        function d(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }

        function f(e) {
            return function(e) {
                if (Array.isArray(e)) {
                    for (var t = 0, n = new Array(e.length); t < e.length; t++) n[t] = e[t];
                    return n
                }
            }(e) || function(e) {
                if (Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e)) return Array.from(e)
            }(e) || function() {
                throw new TypeError("Invalid attempt to spread non-iterable instance")
            }()
        }

        function h(e, t) {
            return function(e) {
                if (Array.isArray(e)) return e
            }(e) || function(e, t) {
                if (!(Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e))) return;
                var n = [],
                    i = !0,
                    a = !1,
                    r = void 0;
                try {
                    for (var o, s = e[Symbol.iterator](); !(i = (o = s.next()).done) && (n.push(o.value), !t || n.length !== t); i = !0);
                } catch (e) {
                    a = !0, r = e
                } finally {
                    try {
                        i || null == s.return || s.return()
                    } finally {
                        if (a) throw r
                    }
                }
                return n
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance")
            }()
        }

        function p() {
            return (p = Object.assign || function(e) {
                for (var t = 1; t < arguments.length; t++) {
                    var n = arguments[t];
                    for (var i in n) Object.prototype.hasOwnProperty.call(n, i) && (e[i] = n[i])
                }
                return e
            }).apply(this, arguments)
        }
        var A = window.Popup,
            m = window.ActionMenu,
            _ = window.attr,
            v = window.val,
            g = window.ajax,
            y = window.replace,
            b = window.scrollTop,
            w = window.ceFromString,
            k = window.Btn;
        window.Bookmarks = {
            hideTagsList: x,
            showTagsList: function(e) {
                var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
                e && e.stopPropagation();
                var n = T(E.tagsListPopup),
                    a = j();
                if (n.classList.remove("BookmarksPopup__hideCorner"), t) {
                    var r = t.closest(E.bookmarkItem),
                        s = F(_(r, "id"));
                    a = a.filter(function(e) {
                        return s.includes(e.id)
                    }), n.classList.add("BookmarksPopup__hideCorner")
                }
                var u = (0, l.qs2obj)(nav.params),
                    d = Object.keys(a).reduce(function(e, t) {
                        var n = a[t];
                        return e.push((0, i.default)({
                            tag: n,
                            current_id: parseInt(u.tag)
                        })), e
                    }, []),
                    f = o.default.html(d);
                v(n.$(".Popup__scrollContent"), f);
                var h = (0, c.$$)(E.tagsListLinks, n);
                h && h.forEach(function(e) {
                    addEvent(e, "click", x)
                });
                return !1
            },
            hideDeletePopup: O,
            showDeletePopup: function(e) {
                var t = T(E.tagsDeletePopup),
                    n = _(e, "data-id"),
                    i = _(e, "data-hash"),
                    a = _(e, "data-name");
                return V(t, {
                    id: n,
                    hash: i
                }), v(t.$("[".concat(S.deleteName, "]")), (0, l.htsc)(a)), !1
            },
            submitDeleteTag: function() {
                var e = U(Array.from((0, c.$$)(E.tagsDeletePopup)).pop()),
                    t = e.id,
                    n = e.hash;
                g.post("/bookmarks", {
                    _ajax: 1,
                    act: "tag_delete",
                    id: t,
                    hash: n
                }, {
                    onDone: function(e) {
                        P(e), O()
                    }
                })
            },
            hideCreatePopup: L,
            showCreatePopup: function(e) {
                var t = T(E.tagsCreatePopup),
                    n = _(e, "data-hash");
                V(t, {
                    hash: n
                });
                var i = (0, c.$)("[name=".concat(S.createName, "]"), t),
                    a = (0, c.$)(E.tagsSubmitButton, t),
                    r = v(i).trim();
                return k.setDisabled(a, !r), !1
            },
            submitCreateTag: function() {
                var e = Array.from((0, c.$$)(E.tagsCreatePopup)).pop(),
                    t = Array.from((0, c.$$)(E.tagsSettings)).pop(),
                    n = U(e).hash,
                    i = v(e.$("[name=".concat(S.createName, "]"))),
                    a = +!!(0, c.$)(E.tagsSettings);
                g.post("/bookmarks", {
                    _ajax: 1,
                    act: "tag_edit",
                    tag: i,
                    hash: n,
                    id: 0,
                    from_settings: a
                }, {
                    onDone: function(e, n) {
                        if (a) {
                            var i = [];
                            Array.from(t.$$('[name="tag"][type="checkbox"]:checked') || []).forEach(function(e) {
                                i.push(e.value)
                            }), v(t, e), i.forEach(function(e) {
                                var n = t.$('[name="tag"][type="checkbox"][value="'.concat(e, '"]'));
                                n && (n.checked = !0)
                            })
                        } else P(e);
                        ! function(e) {
                            var t = N(),
                                n = h(e, 2),
                                i = n[0],
                                a = n[1];
                            t && t.tags && (t.tags[i] = {
                                id: i,
                                name: a,
                                order: 0
                            })
                        }(n), L()
                    }
                })
            },
            hideEditPopup: B,
            showEditPopup: function(e) {
                var t = T(E.tagsEditPopup),
                    n = _(e, "data-id"),
                    i = _(e, "data-hash"),
                    a = _(e, "data-name") || "",
                    r = t.$("[name=".concat(S.editName, "]"));
                v(r, a), V(t, {
                    id: n,
                    hash: i,
                    name: a
                });
                var o = Array.from((0, c.$$)(E.tagsSubmitButton, t)).pop(),
                    s = v(r).trim();
                return k.setDisabled(o, !s), !1
            },
            submitEditTag: function() {
                var e = Array.from((0, c.$$)(E.tagsEditPopup)).pop(),
                    t = U(e),
                    n = t.id,
                    i = t.hash,
                    a = v(e.$("[name=".concat(S.editName, "]")));
                g.post("/bookmarks", {
                    _ajax: 1,
                    act: "tag_edit",
                    tag: a,
                    hash: i,
                    id: n
                }, {
                    onDone: function(e) {
                        P(e), B()
                    }
                })
            },
            hideSettingsPopup: R,
            showSettingsPopup: function(e) {
                var t, n, i, a = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},
                    r = _(e, "data-item_id"),
                    s = _(e, "data-item_oid"),
                    l = _(e, "data-item_type"),
                    c = _(e, "data-hash"),
                    u = _(e, "data-raw");
                a.wrap || (t = T(E.tagsSettingsPopup), n = t.$(E.tagsSettings), i = F(u), v(n, o.default.html({
                    class: "Bookmarks__tagsSettingsLoading"
                })), V(t, {
                    id: r,
                    oid: s,
                    type: l,
                    hash: c,
                    itemRaw: u
                }));
                return g.post("/bookmarks", {
                    _ajax: 1,
                    act: "tag_settings",
                    hash: c,
                    item_id: r,
                    item_oid: s,
                    item_type: l,
                    wrap: a.wrap ? 1 : 0
                }, {
                    onDone: function(e) {
                        if (a.wrap) {
                            var o = w(e);
                            V(o = T(o), {
                                id: r,
                                oid: s,
                                type: l,
                                hash: c,
                                itemRaw: u,
                                needRemove: !0,
                                is_from_snackbar: a.is_from_snackbar
                            })
                        } else v(n, e), i.forEach(function(e) {
                            var n = t.$('[name="tag"][type="checkbox"][value="'.concat(e, '"]'));
                            n && (n.checked = !0)
                        })
                    }
                }), !1
            },
            submitSettingsTags: function() {
                var e = Array.from((0, c.$$)(E.tagsSettingsPopup)).pop(),
                    t = U(e),
                    n = t.id,
                    i = t.oid,
                    r = t.type,
                    s = t.hash,
                    l = t.itemRaw,
                    u = t.is_from_snackbar,
                    d = [];
                Array.from(e.$$('[name="tag"][type="checkbox"]:checked') || []).forEach(function(e) {
                    d.push(e.value)
                });
                var f = d.join(",");
                g.post("/bookmarks", {
                    _ajax: 1,
                    act: "tag_set",
                    hash: s,
                    item_id: n,
                    item_oid: i,
                    item_type: r,
                    tag_ids: f,
                    is_from_snackbar: u
                }, {
                    onDone: function(e) {
                        R();
                        var t = (0, c.$)("#".concat(l));
                        if (t) {
                            var n = (0, c.$)(".BookmarkListItem__tags, .BookmarksItem__tag", t);
                            if (n) v(n, e);
                            else if (n = (0, c.$)(".Owner__tags", t)) {
                                var i = j(),
                                    r = d.map(function(e) {
                                        return parseInt(e, 10)
                                    }),
                                    s = i.filter(function(e) {
                                        return r.includes(e.id)
                                    }),
                                    u = o.default.html((0, a.default)({
                                        tags: s
                                    }));
                                v(n.parentNode, u)
                            }
                            q(l, d, ""), cur && cur.search_bookmarks && cur.search_bookmarks.redraw()
                        }
                    }
                })
            },
            closeAll: function() {
                x(), O(), L(), B(), R()
            },
            initStore: H,
            pushItemsToStore: function(e) {
                var t = N();
                t && (t.items = p({}, t.items, e))
            },
            pushItemToStore: q,
            removeFromBookmarkLink: function(e) {
                var t = _(e, "data-item_id"),
                    n = _(e, "data-item_oid"),
                    i = _(e, "data-item_type"),
                    a = _(e, "data-hash"),
                    r = _(e, "data-raw"),
                    o = _(e, "data-link_url"),
                    s = _(e, "data-link_title"),
                    l = _(e, "data-link_img"),
                    u = (0, c.$)("#".concat(r));
                return m.closeMenu(), addClass(u, C.removed), g.post("/bookmarks", {
                    _ajax: 1,
                    act: "bookmark_remove",
                    hash: a,
                    item_id: t,
                    item_oid: n,
                    item_type: i,
                    link_url: o,
                    link_title: s,
                    link_img: l
                }, {
                    onDone: function(e) {
                        W(r, [C.removed]), Share.setBookmarkState(r, !1), cur && cur.search_bookmarks && cur.search_bookmarks.redraw()
                    }
                }), !1
            },
            addToBookmarkLink: function(e) {
                var t = _(e, "data-item_id"),
                    n = _(e, "data-item_oid"),
                    i = _(e, "data-item_type"),
                    a = _(e, "data-hash"),
                    r = _(e, "data-raw"),
                    o = _(e, "data-link_url"),
                    s = _(e, "data-link_title"),
                    l = _(e, "data-link_img"),
                    u = (0, c.$)("#".concat(r));
                return m.closeMenu(), removeClass(u, C.removed), g.post("/bookmarks", {
                    _ajax: 1,
                    act: "bookmark_add",
                    hash: a,
                    item_id: t,
                    item_oid: n,
                    item_type: i,
                    link_url: o,
                    link_title: s,
                    link_img: l
                }, {
                    onDone: function() {
                        var e = z(r),
                            t = e.indexOf(C.removed); - 1 !== t && e.splice(t, 1), W(r, e), Share.setBookmarkState(r, !0), cur && cur.search_bookmarks && cur.search_bookmarks.redraw()
                    }
                }), !1
            },
            showSuccessSnack: function(e) {
                var t, n = window.lang,
                    i = (0, l.geByClass1)("RepliesField_fixed");
                i && (t = (0, l.getH)(i) + 5);
                Snackbar.init({
                    type: s.SNACKBAR_TYPE_BOOKMARK,
                    text: n.mobile_bookmarks_snackbar_added,
                    bottom: t,
                    action: {
                        url: "/bookmarks",
                        text: n.mobile_bookmarks_snackbar_edit_tags,
                        onclick: "return Bookmarks.showSettingsPopup(this, { wrap: true, is_from_snackbar: 1 });",
                        attrs: Object.keys(e).reduce(function(t, n) {
                            return t["data-".concat(n)] = e[n], t
                        }, {})
                    }
                })
            },
            keyupCreateInput: function(e, t) {
                var n = gpeByClass("BookmarksPopup", t),
                    i = (0, c.$)(E.tagsSubmitButton, n),
                    a = v(t).trim();
                k.setDisabled(i, !a)
            },
            openSavedTab: function(e, t) {
                var n = (0, c.$)(".mm_counter", t),
                    i = (0, u.getCookie)(M.lastTab);
                i && !n && (e && e.preventDefault(), nav.go("/bookmarks?type=".concat(i)))
            },
            openLikesFeed: function(e) {
                var t = (0, c.$)(".mm_new", e);
                (0, l.remove)(t)
            },
            getStoreItemDataById: $,
            getTagsByItemId: G,
            renderSearchItem: function(e, t, n, i, s) {
                var l = "";
                if (!i || isEmpty(i)) l = n;
                else {
                    var c = G(e),
                        u = z(e);
                    i = JSON.parse(i), c && (t = c.reduce(function(e, t) {
                        return [].concat(f(e), [t.id])
                    }, []), i.subtitle = (0, a.default)({
                        tags: c
                    })), u && (i.mix = f(u)), i.title = o.default.wrap(s.highlight(i.title)), l = o.default.html((0, r.default)(i))
                }
                return q(e, t, n), l
            }
        };
        var E = {
                tagsListPopup: ".BookmarksPopup__filter",
                tagsDeletePopup: ".BookmarksPopup__delete",
                tagsCreatePopup: ".BookmarksPopup__create",
                tagsEditPopup: ".BookmarksPopup__edit",
                tagsSettingsPopup: ".BookmarksPopup__settings",
                tagsSettings: ".Bookmarks__tagsSettings",
                tagsListContainer: ".BookmarkListItem__tags",
                tagsListLinks: ".Bookmarks__tagsSelectItem",
                tagsListWrap: ".BookmarksTags",
                tagsListItem: ".BookmarksTags__item",
                tagsListItemMore: ".BookmarksTags__item_more",
                tagsContainer: ".basisDefault",
                tagsSubmitButton: ".BookmarksPopup__buttonSubmit",
                bookmarkItem: ".BookmarksItem"
            },
            S = {
                deleteName: "data-deletetagname",
                createName: "createtagname",
                editName: "edittagname"
            },
            C = {
                removed: "BookmarksItem_removed"
            },
            M = {
                lastTab: "remixblt"
            };

        function P(e) {
            var t = b(),
                n = (0, c.$)(E.tagsContainer),
                i = w(e);
            y(i, n), b(t)
        }

        function T(e) {
            var t;
            m.closeMenu(), t = "string" == typeof e ? (0, c.$)(e) : e, t = A.open(t, !0);
            var n = "popup" + Date.now();
            return _(t, "data-popupid", n), t
        }

        function D(e) {
            return _(e, "data-popupid")
        }

        function I(e) {
            var t;
            if (t = !("string" == typeof e) ? e : Array.from((0, c.$$)(e)).pop()) {
                A.close(t);
                var n = U(t),
                    i = n && n.needRemove;
                ! function(e) {
                    var t = D(e);
                    delete N().popup[t]
                }(t), i && (0, l.remove)(t)
            }
            return !1
        }

        function x() {
            var e = Array.from((0, c.$$)(E.tagsListPopup)).pop(),
                t = (0, c.$$)(E.tagsListLinks, e);
            return t && t.forEach(function(e) {
                removeEvent(e, "click", x)
            }), I(e)
        }

        function O() {
            return I(E.tagsDeletePopup)
        }

        function L() {
            var e = Array.from((0, c.$$)(E.tagsCreatePopup)).pop();
            if (e) {
                var t = e.$("[name=".concat(S.createName, "]"));
                v(t, "")
            }
            return I(E.tagsCreatePopup)
        }

        function B() {
            var e = Array.from((0, c.$$)(E.tagsEditPopup)).pop();
            if (e) {
                var t = e.$("[name=".concat(S.editName, "]"));
                v(t, "")
            }
            return I(E.tagsEditPopup)
        }

        function R() {
            return I(E.tagsSettingsPopup)
        }

        function N() {
            return window.store.bookmarks || H(), window.store.bookmarks
        }

        function j() {
            var e = N();
            return e.tags ? e.tags : {}
        }

        function F(e) {
            var t = N();
            return t.items[e] ? t.items[e][3] : []
        }

        function H() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
            window.store.bookmarks = p({}, e, {
                popup: {}
            })
        }

        function V(e, t) {
            var n = D(e);
            N().popup[n] = t
        }

        function U(e) {
            var t = D(e);
            return N().popup[t]
        }

        function z(e) {
            var t = N();
            return t && t.items && t.items[e] && t.items[e][5]
        }

        function W(e, t) {
            var n = N();
            n && n.items && n.items[e] && (n.items[e][5] ? n.items[e][5] = [].concat(f(n.items[e][5]), f(t)) : n.items[e][5] = f(t))
        }

        function q(e, t, n, i) {
            var a = N();
            a && a.items && (t = t.map(function(e) {
                return parseInt(e, 10)
            }), a.items[e] ? (a.items[e][3] = t, a.items[e][4] = i) : a.items[e] = ["", n, e, t, i])
        }

        function $(e) {
            var t = N();
            return t && t.items && t.items[e]
        }

        function G(e) {
            var t = $(e),
                n = j();
            if (t && n) {
                var i = t[3] || [];
                return n.filter(function(e) {
                    return i.includes(e.id)
                })
            }
            return !1
        }
    },
    jZPa: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("z9sQ")) && i.__esModule ? i : {
            default: i
        };
        var r = function(e) {
            var t = e.img ? e.img : "",
                n = !!e.url && e.url,
                i = e.title ? e.title : "",
                r = e.subtitle ? e.subtitle : "",
                o = e.verified ? e.verified : "",
                s = e.mix ? e.mix : "",
                l = e.online ? e.online : "",
                c = !!e.actions && e.actions,
                u = !!e.attrs && e.attrs,
                d = !!e.linkAttrs && e.linkAttrs;
            return {
                attrs: u,
                class: [a.default.class("OwnerRow", {
                    actions: !!c
                }), s],
                inner: [{
                    class: "OwnerRow__content al_artist",
                    href: n,
                    attrs: d,
                    inner: [{
                        class: "OwnerRow__left",
                        inner: {
                            style: t ? "background-image: url('".concat(t, "')") : null,
                            class: "OwnerRow__img",
                            inner: l ? {
                                class: a.default.class("OwnerRow__online", l)
                            } : null
                        }
                    }, {
                        class: "OwnerRow__right",
                        inner: [{
                            class: a.default.class("OwnerRow__header", {
                                verified: o
                            }),
                            inner: [{
                                class: "OwnerRow__title",
                                inner: i
                            }, o ? {
                                class: "OwnerRow__verified"
                            } : null]
                        }, {
                            class: "OwnerRow__subtitle",
                            inner: r
                        }]
                    }]
                }, c ? {
                    class: "OwnerRow__actions",
                    inner: c
                } : null]
            }
        };
        t.default = r
    },
    k9Tg: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.MailHat = v, t.MailHat__Title = function(e) {
            return i.default.html(d(), e.title)
        }, t.MailHat__icon = b, t.MailHat_main = function(e) {
            var t = (0, a.default)({
                    mix: "mailHat__burger",
                    icon: "burger",
                    attrs: i.default.onClick("MailHat_main.onBurgerClick")
                }),
                n = function(e, t, n, i) {
                    var a = window.lang;
                    return (0, r.default)({
                        mix: "mailHat__folder",
                        items: [{
                            name: "all",
                            text: a.mobile_mail_tab_all,
                            active: "all" === e,
                            url: t.all
                        }, n ? {
                            name: "unrespond",
                            text: a.mobile_mail_tab_unrespond,
                            active: "unrespond" === e,
                            url: t.unrespond
                        } : "", {
                            name: "unread",
                            text: a.mobile_mail_tab_unread,
                            active: "unread" === e,
                            url: t.unread
                        }, {
                            name: "important",
                            text: a.mobile_mail_tab_important,
                            active: "important" === e,
                            count: i,
                            url: t.important
                        }]
                    })
                }(e.folder, e.urls, e.withUnrespond, e.importantCount),
                o = (m = e.unreadCount, _ = i.default.class("mailHat__unread", {
                    hasUnread: m > 0
                }), y = (0, a.default)({
                    mix: "mailHat__unreadIcon",
                    icon: "msg"
                }), b = g(m), w = i.default.onClick("MailHat_main.onUnreadClick"), i.default.html(A(), _, w, y, b)),
                l = (0, a.default)({
                    mix: "mailHat__cancelForward",
                    icon: "back",
                    attrs: i.default.onMouseDown("MailHat_main.onCancelForwardTap")
                }),
                c = function() {
                    var e = window.lang;
                    return i.default.html(h(), e.mobile_mail_choose_recipient)
                }(),
                u = (0, a.default)({
                    mix: "mailFilter__create",
                    icon: "pencil",
                    url: e.urls.createChatUrl
                }),
                d = (0, s.isNewNavigation)(),
                f = d ? "".concat(l) : "".concat(t).concat(l),
                p = d ? "".concat(u) : "".concat(e.notifier).concat(o);
            var m, _, y, b, w;
            return v({
                type: "main",
                left: f,
                center: "".concat(n).concat(c),
                right: p,
                forwarding: e.forwarding
            })
        }, t.MailHat_convo = function(e) {
            var t = y(),
                n = (0, a.default)({
                    mix: "mailHat__cancelEditing",
                    icon: "close",
                    attrs: i.default.onMouseDown("MailHat_convo.onCancelEditingTap")
                }),
                s = function(e) {
                    var t = i.default.class("mailHat__convo", {
                            mobile: e.mobile
                        }),
                        n = (0, o.default)({
                            mix: "mailHat__convoAvatar",
                            photos: e.photos,
                            size: 36
                        }),
                        a = w(e);
                    return i.default.html(u(), t, e.url, n, e.title, a)
                }(e),
                l = function() {
                    var e = window.lang;
                    return i.default.html(f(), e.mobile_mail_message_editing)
                }();
            return v({
                type: "convo",
                left: "".concat(t).concat(n),
                center: "".concat(s).concat(l),
                right: (c = e.actions, (0, r.default)({
                    mix: "mailHat__actions",
                    icon: "dots",
                    position: "topRight",
                    items: c
                })),
                hasPinnedMsg: e.hasPinnedMsg,
                editing: e.editing
            });
            var c
        }, t.MailHat_page = function(e) {
            var t = y();
            return v({
                type: "page",
                left: "".concat(t),
                center: "",
                right: "",
                hasPinnedMsg: !1,
                editing: !1
            })
        }, t.MailHat_getOnlineText = k, t.MailHat__convoDetails = w, t.MailHat__unreadCount = g;
        var i = l(n("bZ/P")),
            a = l(n("9y81")),
            r = l(n("gy8s")),
            o = l(n("KMpi")),
            s = n("fdw3");

        function l(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }

        function c() {
            var e = _(['\n    <div class="mailHat__convoDetails">\n      <div class="mailHat__convoDetailsText">', "</div>\n      ", "\n    </div>\n  "]);
            return c = function() {
                return e
            }, e
        }

        function u() {
            var e = _(['\n    <a class="', '" href="', '">\n      ', '\n      <div class="mailHat__convoBody">\n        <div class="mailHat__convoTitle">', "</div>\n        ", "\n      </div>\n    </a>\n  "]);
            return u = function() {
                return e
            }, e
        }

        function d() {
            var e = _(['\n    <div class="mailHat__title">\n      ', "\n    </div>\n  "]);
            return d = function() {
                return e
            }, e
        }

        function f() {
            var e = _(['\n    <div class="mailHat__editingTitle">\n      ', "\n    </div>\n  "]);
            return f = function() {
                return e
            }, e
        }

        function h() {
            var e = _(['\n    <div class="mailHat__forwardTitle">\n      ', "\n    </div>\n  "]);
            return h = function() {
                return e
            }, e
        }

        function p() {
            var e = _(['\n    <div class="mailHat__unreadCount mailHat__unreadCount_length_', '">\n      ', "\n    </div>\n  "]);
            return p = function() {
                return e
            }, e
        }

        function A() {
            var e = _(['\n    <div class="', '" ', ">\n      ", "\n      ", "\n    </div>\n  "]);
            return A = function() {
                return e
            }, e
        }

        function m() {
            var e = _(['\n    <div class="mailHat ', " ", " ", " ", '">\n      <div class="mailHat__left">', '</div>\n      <div class="mailHat__center">', '</div>\n      <div class="mailHat__right">', "</div>\n    </div>\n  "]);
            return m = function() {
                return e
            }, e
        }

        function _(e, t) {
            return t || (t = e.slice(0)), Object.freeze(Object.defineProperties(e, {
                raw: {
                    value: Object.freeze(t)
                }
            }))
        }

        function v(e) {
            var t = e.forwarding ? "mailHat_forwarding" : "",
                n = e.hasPinnedMsg ? "mailHat_hasPinnedMsg" : "",
                a = "mailHat_type_".concat(e.type),
                r = e.editing ? "mailHat_editing" : "";
            return i.default.html(m(), a, t, n, r, e.left, e.center, e.right)
        }

        function g(e) {
            var t;
            return e > 999 ? (e = "999+", t = 4) : t = e > 99 ? 3 : e > 9 ? 2 : 1, i.default.html(p(), t, e)
        }

        function y() {
            return b({
                mix: "mailHat__back",
                icon: "back",
                attrs: i.default.onMouseDown("MailHat_convo.onBackTap")
            })
        }

        function b(e) {
            return (0, a.default)({
                mix: i.default.class("mailHat__icon", e.mix),
                icon: e.icon,
                attrs: e.attrs,
                url: e.url
            })
        }

        function w(e) {
            var t = window.lang,
                n = e.membersCount,
                r = "",
                o = "";
            if (n > 0) o = e.isChannel ? langNumeric(n, t.mobile_mail_channel_N_members) : langNumeric(n, t.mobile_mail_N_members);
            else {
                var s = e.onlinePlatform;
                o = k(e.isOnline, e.offlineText), "mobile" === s && (r = (0, a.default)({
                    mix: i.default.class("mailHat__onlineIcon", {
                        platform: "mobile"
                    }),
                    icon: "phoneMini"
                }))
            }
            return i.default.html(c(), o, r)
        }

        function k(e, t) {
            var n = window.lang;
            return e ? n.mobile_mail_online : t
        }
    },
    k9Tn: function(e, t, n) {
        "use strict";

        function i(e, t) {
            for (var n = 0; n < t.length; n++) {
                var i = t[n];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var a, r = window,
            o = r.intval,
            s = r.domData,
            l = r.isEmpty,
            c = r.isArray,
            u = r.setStyle,
            d = r.ce,
            f = [],
            h = !1,
            p = function() {
                function e() {
                    ! function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, e)
                }
                var t, n, a;
                return t = e, a = [{
                    key: "init",
                    value: function(e, t) {
                        var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};
                        if (h = n.mobile || n.isWebView, t && e.ads && !l(e.ads) && !(e.has_more || c(e.ads) && 0 == e.ads.length)) {
                            var i = d("ins");
                            addClass(i, "mrg-tag"), addClass(i, "article_adsblock"), n.mobile && addClass(i, "article_adsblock_mobile"), u(i, {
                                display: "block",
                                "text-decoration": "none"
                            });
                            var a = "";
                            for (var r in n.deviceInfo) n.deviceInfo.hasOwnProperty(r) && (a += "&" + r + "=" + n.deviceInfo[r]);
                            for (var o in e.ads.data["ad-query"] = e.ads.data["ad-query"].replace("%device_info%", a), e.ads.data) e.ads.data.hasOwnProperty(o) && s(i, o, "".concat(e.ads.data[o]));
                            t.appendChild(i), window.MRGtag || (window.MRGtag = []);
                            var f = n.isWebView ? {
                                    iframeMode: !0
                                } : {},
                                p = e.ads.eventsHash;
                            if (A(e, n, "requested", p), f.onNoAds = function() {
                                    A(e, n, "no_ads", p)
                                }, f.onAdsLoaded = function() {
                                    A(e, n, "ads_loaded", p)
                                }, f.onAdsClosed = function() {
                                    A(e, n, "ads_closed", p)
                                }, f.onAdsSuccess = function() {
                                    A(e, n, "ads_success", p)
                                }, f.onAdsClicked = function() {
                                    A(e, n, "ads_clicked", p)
                                }, f.onScriptError = function() {
                                    A(e, n, "script_error", p)
                                }, window.MRGtagOnAdsImpression = function() {
                                    A(e, n, "ads_impression", p)
                                }, window.MRGtag.push(f), !window.mailRuSdsScriptLoaded) {
                                var m = document.createElement("script");
                                m.setAttribute("src", e.ads.script), m.setAttribute("async", "true"), document.head.appendChild(m), window.mailRuSdsScriptLoaded = !0
                            }
                        }
                    }
                }, {
                    key: "wasShown",
                    value: function() {
                        return !1
                    }
                }], (n = null) && i(t.prototype, n), a && i(t, a), e
            }();

        function A(e, t, n, i) {
            f.push("".concat(n, "/").concat(e.owner_id, "_").concat(e.id, "/").concat(i)), clearTimeout(a), a = setTimeout(function() {
                var e = h ? "article.php" : "al_articles.php";
                ajax.post(e, {
                    act: "ads_event",
                    events: f.join(","),
                    is_web_view: o(t.isWebView)
                }), f = []
            }, 200)
        }
        t.default = p
    },
    kYGI: function(e, t, n) {
        "use strict";
        var i = window.each,
            a = {
                tt: !1,
                handlers: [],
                show: function() {
                    a.shown || (a.tt = Array.prototype.slice.call(arguments))
                },
                hide: function() {
                    a.tt && (a.tt = !1)
                },
                addHandler: function(e) {
                    e && a.handlers.push(e)
                },
                removeHandler: function(e) {
                    e ? i(a.handlers, function(t) {
                        if (e === this) return a.handlers.splice(t, 1), !1
                    }) : a.handlers = []
                },
                onClose: function() {
                    i(a.handlers, function() {
                        this()
                    })
                },
                clear: function() {
                    a.tt && (a.hide(), a.onClose(), a.removeHandler())
                },
                closeByTap: function(e) {
                    if (!a.tt || !e.target) return !1;
                    var t = e.target;
                    do {
                        for (var n = 0; n < a.tt.length; n++)
                            if (t === a.tt[n]) return !1
                    } while (t = t.parentNode);
                    return a.hide(), a.onClose(), !0
                }
            };
        window.tooltip = a
    },
    kr3z: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i = n("UxAg"),
            a = h(n("+cqQ")),
            r = h(n("jk6M")),
            o = n("OcsD"),
            s = n("j80l"),
            l = n("eGQV"),
            c = n("tgcV"),
            u = n("cGUQ"),
            d = n("izth"),
            f = h(n("Cbap"));

        function h(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        var p = window.clog,
            A = {
                onBeforeRedirect: (0, a.default)("url"),
                onBeforePageParse: (0, a.default)(),
                onRedirect: (0, o.se)(),
                _tStart: !1,
                _tAlStart: !1,
                RESPONSE_CAPTCHA: 2,
                _init: function() {
                    try {
                        new XMLHttpRequest && (A._req = function() {
                            return new XMLHttpRequest
                        })
                    } catch (t) {
                        var e = window.ActiveXObject;
                        try {
                            new e("Msxml2.XMLHTTP") && (A._req = function() {
                                return new e("Msxml2.XMLHTTP")
                            })
                        } catch (t) {
                            try {
                                new e("Microsoft.XMLHTTP") && (A._req = function() {
                                    return new e("Microsoft.XMLHTTP")
                                })
                            } catch (e) {
                                A._req = !1
                            }
                        }
                    }
                },
                _getreq: function() {
                    return A._req || A._init(), A._req()
                },
                _al_reqs: [],
                _last_req: null,
                save_req: function(e) {
                    A._al_reqs.push(e || A._last_req)
                },
                abort_reqs: function() {
                    (0, o.each)(A._al_reqs, function(e, t) {
                        t.readyState < 4 && t.abort()
                    }), A._al_reqs = []
                },
                _failed_relogin: !1,
                _failed_reqs: [],
                save_failed_req: function(e, t, n, i) {
                    A._failed_reqs.push([e, t, n, i])
                },
                repeat_reqs: function() {
                    (0, o.each)(A._failed_reqs, function() {
                        var e = this.shift();
                        A._post.apply(null, this), (0, o.remove)(e)
                    }), A._failed_reqs = []
                },
                plainpost: function(e, t, n, i, a, r, o, s) {
                    var c = A._last_req = A._getreq(),
                        d = "string" != typeof t ? (0, u.toQueryString)(t, !0) : t;
                    c.onreadystatechange = function() {
                        4 == c.readyState && (c.status >= 200 && c.status < 300 ? n && n(c.responseText, c) : i && i(c.responseText, c))
                    };
                    try {
                        c.open("POST", e, !0)
                    } catch (e) {
                        return !1
                    }
                    return c.setRequestHeader("Content-Type", "application/x-www-form-urlencoded"), a || s || c.setRequestHeader("X-Requested-With", "XMLHttpRequest"), s || ((0, l.isStandalone)() && c.setRequestHeader("X-View-Mode", "pwa"), r && r.headers && Object.keys(r.headers).forEach(function(e) {
                        try {
                            c.setRequestHeader(e, r.headers[e])
                        } catch (e) {}
                    })), c.send(d), c
                },
                post: function(e, t, n) {
                    return "/" != e.substr(0, 1) && (e = "/" + e), e = e.split("#")[0], A._post(e, t, n || {})
                },
                onPrepared: (0, o.se)(),
                prepare_click: function(e) {
                    var t = window.al;
                    if (r.default.ios && !(r.default.ios >= 7) && window.al && t.ver) {
                        var n = [],
                            i = !1;
                        e && "a" == (e.tagName || "").toLowerCase() ? n.push(e) : (0, o.isArray)(e) ? n = e : (n = (0, o.geByTag)("a", e), i = !0);
                        for (var a = 0, s = n.length; a < s; a++) {
                            var l = n[a],
                                c = l && l.target || "";
                            if (l && l.getAttribute && (!i || !l.getAttribute("data-href") && (0, o.checkElementNav)(l, {
                                    skip_onclick: !0
                                }) && "_blank" != c)) {
                                var u = l.getAttribute("href");
                                if (null == u || !(0, o.isHttpHref)(u)) continue;
                                (0, o.attr)(l, "data-href", (0, o.getHref)(l)), (0, o.attr)(l, "href", !1)
                            }
                        }
                    }
                },
                click: function(e, t, n) {
                    var i = window.nav;
                    t = t || {};
                    var a, r = !1,
                        s = {
                            _ajax: 1
                        },
                        l = (0, o.extend)(t, {
                            link: e
                        });
                    if (n = n || {}, t.onStart) {
                        var c = A.tAlGetParam();
                        A.tAlStart = (new Date).getTime(), c && (s._talstat = c)
                    }
                    if (n.use_cache) {
                        var u = (0, o.ge)(!0 === n.use_cache ? "preload_data" : n.use_cache),
                            d = u.innerHTML.replace(/(^<!--|-->$)/g, ""),
                            f = d.split("--\x3e\x3c!--");
                        if (d) u.innerHTML = "", t.onStart && t.onStart.apply(l), n.nav && i.go(r, null, {
                            push_only: !0
                        }), t.onDone && t.onDone.apply(l, f), (e = (0, o.geByClass1)("show_more", (0, o.geByClass1)("pcont", "mcont"))) && A.click(e, {
                            onDone: function() {
                                var e = "";
                                (0, o.each)(arguments, function(t, n) {
                                    e += "\x3c!--" + (n || "") + "--\x3e"
                                }), u.innerHTML = e, (0, o.ge)("show_more_loading") && A.click(!1, t, n)
                            }
                        });
                        else t.onStart && t.onStart.apply(l), n.nav && i.go(r, null, {
                            push_only: !0
                        });
                        return !1
                    }
                    if (!e) return !0;
                    if (e.form) {
                        if (e.disabled) return !0;
                        var h = e.form,
                            p = {};
                        r = (h.action || "").replace(/^https?:\/\/[^\/]+/i, ""), (0, o.each)(h, function(t, n) {
                            return !(n.name && !n.disabled) || ("radio" === n.type && !n.checked || ("checkbox" === n.type && !n.checked || ("button" === n.type || ("submit" === n.type && n !== e || ("image" === n.type && n !== e || void(p[n.name] = n.value))))))
                        }), "image" == e.type && (p[e.name] = e.value, p[e.name + ".x"] = 1, p[e.name + ".y"] = 1), h.method && "get" != h.method ? (0, o.extend)(s, p) : r = r.split("?", 1).shift() + (0, o.obj2qs)(p)
                    } else e.getAttribute && (r = e.getAttribute("data-href") || e.getAttribute("href"));
                    if (r || (r = e.pathname ? e.pathname + e.search + e.hash : e), !r) return !0;
                    (0, o.extend)(s, n.url_params || {});
                    var m = window.pStats,
                        _ = m.getSeenData();
                    if (_) {
                        var v = window.cur;
                        s._pstat = _.data, v && v.module && (s._pstatref = v.module)
                    }
                    return (a = A.post(r, s, {
                        onDone: function() {
                            _ && m.onSend(_.seen), n.lock && (0, o.unlockButton)(e), t.onDone && t.onDone.apply(l, arguments), (n.nav || n.scroll) && (0, o.scrollToHash)()
                        },
                        onFail: function() {
                            n.lock && (0, o.unlockButton)(e), t.onFail && t.onFail.apply(l, arguments), (n.nav || n.scroll) && (0, o.scrollToHash)()
                        }
                    })) && (t.onStart && t.onStart.apply(l), n.nav && i.go(r, null, {
                        push_only: !0
                    }), n.lock && (0, o.lockButton)(e)), !a
                },
                nav: function(e, t) {
                    var n = window.nav,
                        a = window.page,
                        s = window.menu,
                        l = window.cur,
                        u = window.Tabbar;
                    (t = t || {}).nav = t.nav || {};
                    var d, f = (0, o.getHref)(e),
                        h = a.getHash(t.nav);
                    if (!(f = n.checkUrl(f))) return !1;
                    "/" != f.substr(0, 1) && (f = "/" + f), s.close(null, !0);
                    var m = A.tGetParam();
                    if (A.tStart = (new Date).getTime(), t.need_restore && s && s.closeSearch(), window.isNewMail && (t.need_restore && t.nav.push && !t.need_check_updates && A.abort_reqs(), n.onBeforeGo2(t.nav.path, (0, o.qs2obj)(t.nav.params), t.nav.push, t))) return A.abort_reqs(), !0;
                    if (t.need_restore && t.nav.push && (d = a.restore(h)) && (A.abort_reqs(), d.lm && (0, o.extend)(d.lm, {
                            tn: !1,
                            bn: !1
                        }), window.isNewNavigation ? a.set(h, d, {}, t) : a.set(h, d), t.zProcess && (t.zProcess(d.st), delete t.zProcess), n.set(t), A.tModule = window.cur.module, A.tRestoreRender = (new Date).getTime(), !t.need_check_updates)) return !0;
                    var _ = !1,
                        v = !1;
                    if (t.need_check_updates && n.isTabHaveCache(t.tab, h));
                    else if (t.fast) _ = !0, a.set(h, !1, {
                        before: !0,
                        beforeAppend: t.beforeAppend,
                        afterAppend: t.afterAppend
                    }), v = t.onAfterFast || !1;
                    else if (t.target && t.target.className) {
                        var g, y = (g = /(?:^|\s)(al_([a-z_]+)(-?[0-9]+)?)(?:\s|$)/i.exec(t.target.className)) && g[1] || !1,
                            b = g && g[2] || !1;
                        switch (b) {
                            case "menu":
                                _ = !0, a.set(h, !1, {
                                    before: !0,
                                    beforeAppend: function(e) {
                                        var n = (0, i.$)(".vk__page");
                                        if (n.className = n.className.replace("vk__page_notifications", ""), window.isNewMail) {
                                            var r = (0, o.geByClass1)("mcont", e) || (0, o.geByClass1)("layout__basis");
                                            (0, o.val)(r, '<div class="pcont bl_cont"><div id="al_loading"></div></div>')
                                        } else(0, o.val)((0, o.geByClass1)("mcont", e), '<div class="pcont bl_cont"><div id="al_loading"></div></div>');
                                        a.setMhead(e, (0, o.attr)(t.target, "data-header"), "/")
                                    },
                                    afterAppend: function() {
                                        window.isNewMail && "/mail" === h ? (0, o.alLoadingFix)((0, o.geByClass1)("layout").offsetHeight) : (0, o.alLoadingFix)(), (0, o.scrollTop)(0)
                                    }
                                });
                                break;
                            case "tab":
                                _ = !0, a.set(h, !1, {
                                    before: !0,
                                    beforeAppend: function(e) {
                                        (0, o.val)((0, o.geByClass1)("upanel", e), '<div id="al_loading"></div>'), (0, o.val)((0, o.geByClass1)("basisDefault", e), '<div id="al_loading"></div>');
                                        var t = (0, o.geByClass1)("tabs_block", e) || (0, o.geByClass1)("tabs", e),
                                            n = (0, o.geByClass1)("active", t);
                                        n && ((0, o.hasClass)("tab_item_top", n) ? ((0, o.removeClass)("tab_item_cur", (0, o.geByClass1)("tab_item_cur", t)), (0, o.addClass)("tab_item_cur", (0, o.geByClass1)("tab_item", t))) : ((0, o.removeClass)("tab_item_cur", (0, o.geByClass1)("tab_item_cur", t)), (0, o.addClass)("tab_item_cur", n)))
                                    },
                                    afterAppend: function() {
                                        (0, o.alLoadingFix)()
                                    }
                                }, t);
                                break;
                            case "post":
                                _ = !0, a.set(h, !1, {
                                    before: !0,
                                    beforeAppend: function(e) {
                                        var n = window.lang,
                                            i = (0, o.clone)((0, o.gpeByClass)("post_item", t.target)),
                                            r = i.id,
                                            s = (0, o.outer)((0, o.gpeByTag)("a", (0, o.geByClass1)("pi_img", i))).replace("pi_img", "op_img"),
                                            l = (0, o.gpeByTag)("div", (0, o.geByClass1)("pi_author", i)),
                                            c = (0, o.remove)((0, o.geByClass1)("pi_date", i)),
                                            u = (0, o.outer)((0, o.remove)((0, o.geByClass1)("explain", l))),
                                            d = (0, o.remove)((0, o.geByClass1)("pi_fronly", i)),
                                            f = (0, o.outer)(l),
                                            h = (0, o.geByClass1)("pi_body", i),
                                            p = (0, o.geByClass1)("pi_text_more", h),
                                            A = (c = (0, o.geByClass1)("pi_date", i), (0, o.geByClass1)("pi_info", h)),
                                            m = (0, o.geByClass1)("pi_links", h),
                                            _ = (0, o.geByClass1)("replies_link", m),
                                            v = (0, o.val)((0, o.remove)((0, o.geByClass1)("pi_actions_wrap", i))),
                                            g = (0, o.val)((0, o.remove)((0, o.geByClass1)("item_replies", A))) ? (0, o.val)(_) : n.mobile_wall_post_replies_title,
                                            y = _ ? '<a name="comments"></a><h4 class="slim_header">' + (g || "") + '</h4><div id="al_loading"></div>' : "";
                                        if (p) {
                                            var b = p.nextSibling ? p : p.parentNode;
                                            b.nextSibling.style.display = "inline", b.style.display = "none"
                                        }(0, o.val)(m, (0, o.outer)((0, o.geByClass1)("like_wrap", h))), c && (0, o.attr)(c, "data-date") && (0, o.val)(c, (0, o.attr)(c, "data-date")), a.setMhead(e, (0, o.attr)(t.target, "data-header"), !0), (0, o.val)((0, o.geByClass1)("mcont", e), function(e, t, n, i, a, r, o, s) {
                                            return '<div class="pcont bl_cont"><div class="owner_panel">' + (t || "") + '<div class="op_cont">' + (n || "") + '<div class="op_info"><span class="item_date">' + (i || "") + '</span></div></div></div><div id="' + (e || "") + '" class="post_item single_post_item"><div class="pi_cont"><div class="pi_head">' + (a || "") + '</div><div class="pi_body">' + (r || "") + "</div></div>" + (s || "") + "</div>" + (o || "") + "</div>"
                                        }(r, s, f, (0, o.val)(c) + (d ? '<b class="pi_fronly"></b>' : ""), u, (0, o.val)(h), y, v))
                                    },
                                    afterAppend: function(e) {
                                        var n = (0, o.geByTag1)("h4", e);
                                        n && (0, o.alLoadingFix)(t.nav.hash ? (0, o.getCh)() - n.offsetHeight : 0), t.nav.hash ? (0, o.scrollToHash)(t.nav.hash) : (0, o.scrollTop)(0)
                                    }
                                }, t);
                                break;
                            case "wall":
                                _ = !0, a.set(h, !1, {
                                    before: !0,
                                    beforeAppend: function(e) {
                                        var n = window.lang,
                                            i = (0, o.clone)((0, o.hasClass)("wall_item", t.target) ? t.target : (0, o.gpeByClass)("wall_item", t.target)),
                                            r = i.id,
                                            s = (0, o.geByClass1)("wi_body", i),
                                            l = (0, o.geByClass1)("wi_buttons", i),
                                            c = (0, o.geByClass1)("item_like", l),
                                            u = (0, o.geByClass1)("v_like", c),
                                            d = (0, o.geByClass1)("item_share", l),
                                            f = (0, o.geByClass1)("v_share", d),
                                            h = (0, o.remove)((0, o.geByClass1)("item_replies", l)),
                                            A = !!h && (0, o.geByClass1)("v_replies", h),
                                            m = +(0, o.stripTags)((0, o.val)(A)).replace(/\D/g, ""),
                                            _ = (0, o.geByClass1)("pi_text_more", s),
                                            v = (0, o.geByClass1)("wi_date", i),
                                            g = m ? (0, o.langNumeric)(m, n.mobile_wall_post_comments) : n.mobile_wall_post_replies_title,
                                            y = h && m < 50 ? '<a name="comments"></a><h4 class="slim_header">' + (g || "") + '</h4><div id="al_loading"></div>' : "";
                                        if (p("item_replies", h), (0, o.remove)((0, o.geByClass1)("wi_actions_btn", i)), (0, o.remove)((0, o.geByClass1)("post__subscribeBtn", i)), (0, o.remove)((0, o.geByClass1)("post__extraHeader", i)), u ? (0, o.val)(u) : (0, o.append)((0, o.ce)("span", {
                                                className: "v_like"
                                            }), c), f ? (0, o.val)(f) : (0, o.append)((0, o.ce)("span", {
                                                className: "v_share"
                                            }), d), _) {
                                            var b = _.nextSibling ? _ : _.parentNode;
                                            b.nextSibling.style.display = "inline", b.style.display = "none"
                                        }
                                        v && (0, o.attr)(v, "data-date") && (0, o.val)(v, (0, o.attr)(v, "data-date")), a.setMhead(e, (0, o.attr)(t.target, "data-header"), !0), (0, o.val)((0, o.geByClass1)("mcont", e), function(e, t, n) {
                                            return '<div class="pcont"><div class="wall_item single_wall_item" id="' + (e || "") + '">' + (t || "") + "</div>" + (n || "") + "</div>"
                                        }(r, (0, o.val)(i), y)), (0, o.addClass)("vk__page_singlePost", document.body)
                                    },
                                    afterAppend: function(e) {
                                        var n = (0, o.geByTag1)("h4", e);
                                        n && (0, o.alLoadingFix)(t.nav.hash ? (0, o.getCh)() - n.offsetHeight : 0), t.nav.hash ? (0, o.scrollToHash)(t.nav.hash) : (0, o.scrollTop)(0)
                                    }
                                }, t);
                                break;
                            case "pinfo":
                                _ = !0, a.set(h, !1, {
                                    before: !0,
                                    beforeAppend: function(e) {
                                        var t = window.lang,
                                            n = (0, o.geByClass1)("owner_panel", e),
                                            i = (0, o.geByClass1)("pp_img", n),
                                            r = (0, o.geByClass1)("op_header", n),
                                            s = (0, o.geByClass1)("lvi", r),
                                            l = (0, o.geByClass1)("pp_last_activity", n),
                                            c = (0, o.ce)("div");
                                        (0, o.addClass)("mhi_back", (0, o.geByClass1)("mh_header", e)), (0, o.val)(n, '<img src="' + (0, o.escapeAttr)((0, o.attr)(i, "src") || "") + '" class="op_img"><div class="op_cont"><h2 class="op_header">' + (0, o.stripTags)((0, o.val)(r)) + '</h2><div class="pp_online">' + (s ? t.mobile_online : (0, o.val)(l)) + "</div></div>"), (0, o.val)((0, o.geByClass1)("ipanel", e), "<div>" + (0, o.val)(c) + '</div><div id="al_loading"></div>'), a.setMhead(e, !1, !0)
                                    },
                                    afterAppend: function() {
                                        (0, o.alLoadingFix)(), (0, o.scrollTop)(0, 10)
                                    }
                                }, t);
                                break;
                            case "player":
                                _ = !0, a.set(h, !1, {
                                    before: !0,
                                    beforeAppend: function(e) {
                                        var t = window.lang,
                                            n = window.audio,
                                            i = n.playlist(),
                                            r = n.playlist_q(),
                                            s = ((i[0] || {}).id || "").split("_").slice(2).join("_") || "";
                                        a.setMhead(e, t.mobile_menu_player_head_title, !0), (0, o.val)((0, o.geByClass1)("mcont", e), '\n                <div class="pcont audioPage">\n                  <div class="PageBlock">\n                    <div class="audioPage__header">\n                      '.concat(AudioPlaylist.tplPlayerSearch(s), '\n                    </div>\n                    <div id="au_search_items" class="upanel bl_cont">\n                      <div class="audios_block audios_list _si_container" data-query="').concat((0, o.escapeAttr)(r), '">').concat("", "</div>\n                    </div>\n                  </div>\n                </div>")), (0, o.val)("m", e.innerHTML)
                                    }
                                }, t), v = function() {
                                    var e = window,
                                        n = e.qsearch,
                                        i = e.audio,
                                        s = i.playlist(),
                                        l = ((s[0] || {}).id || "").split("_").slice(2).join("_") || "",
                                        c = "/audio" + (0, o.obj2qs)({
                                            act: "player",
                                            list: l
                                        }),
                                        u = [],
                                        d = {};
                                    (0, o.each)(s, function(e, t) {
                                        u.push(t.id);
                                        d[t.id] = [t.artist + " " + t.title, t.id, t.src, t.performer, t.title, t.duration, t.can_add, !1, t.cover_style, t.is_disabled, t.mix, t.subtitle, t.is_explicit, t.ads, t.track_code, t.action_hash, t.action_hash]
                                    });
                                    var f = [];
                                    n.init({
                                        action: c,
                                        al_action: c,
                                        container: (0, o.ge)("au_search_items"),
                                        field: (0, o.ge)("au_search_field"),
                                        btn: (0, o.ge)("au_search_btn"),
                                        top_items: u,
                                        _cache: d,
                                        tpl: function(e, t, n, a) {
                                            return t ? a || ("" == a ? '<div class="audios_block audios_list _si_container" data-query="' + (0, o.escapeAttr)(t) + '">' + e + "</div>" : '<div class="audios_block audios_list _si_container" data-query="' + (0, o.escapeAttr)(t) + '"><div class="al_loading qs_loading">&nbsp;</div></div>') : '<div class="audios_block audios_list _si_container" data-query="' + (0, o.escapeAttr)(i.playlist_q()) + '">' + e + "</div>"
                                        },
                                        item_tpl: function(e, t, n, i, a, r, o, s, l, c, u, d, h, p, A) {
                                            var m = window.audioplayer,
                                                _ = {
                                                    id: e,
                                                    src: t,
                                                    duration: a,
                                                    performer: this.highlight(n),
                                                    title: this.highlight(i),
                                                    can_add: r,
                                                    can_del: o,
                                                    cover_style: s,
                                                    is_disabled: l,
                                                    mix: c,
                                                    subtitle: u,
                                                    is_explicit: d,
                                                    ads: h,
                                                    track_code: p,
                                                    action_hash: A
                                                };
                                            return f.push(_), m && m.getDOMFromAudio(_, !0, this.q) || ""
                                        },
                                        null_tpl: function(e) {
                                            var t = window.lang;
                                            return '<div class="service_msg_box"><div class="service_msg service_msg_null">' + (e ? t.mobile_audio_search_not_found.replace("%s", (0, o.htsc)(e)) : t.mobile_audio_no_audio) + "</div></div>"
                                        },
                                        soft_filter: !0,
                                        need_invalid_keys: r.default.desktop,
                                        top_len: 50,
                                        global_search: !0,
                                        onRendered: function() {
                                            var e = window,
                                                t = e.audioplayer,
                                                n = e.audio;
                                            t && t.initAudio(), n.addToPlaylist(f)
                                        },
                                        al_need: !0,
                                        init_offset: 0
                                    });
                                    var p = i.getCurrentId(),
                                        A = (0, o.ge)("audio" + p);
                                    if (A) {
                                        var m = (0, o.getY)(A) + A.offsetHeight / 2 - (0, o.getCh)() / 2;
                                        (0, o.scrollTop)(m), window.isNewNavigation && a.save(h, {
                                            html: null,
                                            st: (0, o.scrollTop)(),
                                            page: (0, o.ge)("m"),
                                            state: a.stash(),
                                            cur: window.cur,
                                            options: t || {}
                                        }, !1)
                                    }
                                };
                                break;
                            case "photo":
                                _ = !0, a.set(h, !1, {
                                    before: !0,
                                    beforeAppend: function(e) {
                                        var n = (0, o.geByTag1)("img", t.target),
                                            i = n && n.src || "/images/mobile/blank.gif",
                                            r = "",
                                            s = "",
                                            l = ((0, o.attr)(n, "data-src_big") || "").split("|"),
                                            c = l[0],
                                            u = +l[1] || 0,
                                            d = +l[2] || 0,
                                            f = !0;
                                        if (u && d || (u = n && n.width || 0, d = n && n.height || 0, f = !1), c) {
                                            if (u && d) {
                                                var h = Math.min(604, (0, o.getCw)()) / u,
                                                    p = Math.min(604, Math.ceil(h >= 1 && f ? d : d * h));
                                                r += "height:" + p + "px;"
                                            }
                                            r += "background:url(" + i + ") #f7f7f7 no-repeat center top;", p > 100 && (0, o.each)(["-moz-", "-o-", "-webkit-", ""], function(e, t) {
                                                r += t + "background-size:contain;"
                                            }), i = c
                                        } else s += "width:100%;";
                                        a.setMhead(e, (0, o.attr)(t.target, "data-header"), !0), (0, o.val)((0, o.geByClass1)("mcont", e), function(e, t, n) {
                                            return '<div class="pcont bl_cont"><div class="media_view photo_view"><div class="pv_summary">&nbsp;<div class="summary_loading" style="float:left;"><i class="i_loading"></i></div></div><div class="pv_body"><div class="thumb_item" style="' + (t || "") + '"><img src="' + e + '" class="ph_img" alt="" style="' + (n || "") + '" /></div></div><div id="al_fill"></div></div></div>'
                                        }(i, r, s))
                                    },
                                    afterAppend: function() {
                                        (0, o.alLoadingFix)(0, "al_fill"), (0, o.scrollTop)(0)
                                    }
                                }, t);
                                break;
                            case "u":
                            case "g":
                            case "p":
                            case "e":
                                _ = !0, a.set(h, !1, {
                                    before: !0,
                                    beforeAppend: function(e) {
                                        if (window.isNewNavigation) u.drawLoader(e);
                                        else {
                                            var n, i = window.lang,
                                                r = y.substr(2),
                                                s = (0, o.geByClass1)(r, e, "a") || (0, o.geByClass1)(r, e, "span"),
                                                l = (0, o.stripTags)((0, o.attr)(t.target, "data-name") || (0, o.attr)(s, "data-name") || (0, o.val)(s) || ""),
                                                c = s && s.parentNode && (0, o.geByClass1)("lvi", s.parentNode),
                                                d = ((0, o.outer)(c), (0, o.geByClass1)(r, e, "img")),
                                                f = d && d.src || (0, o.attr)(t.target, "data-photo") || "/images/mobile/blank.gif";
                                            "u" == b ? n = l.split(" ").shift() : "g" == b ? n = i.mobile_group_head_title : "p" == b ? n = i.mobile_public_head_title : "e" == b && (n = i.mobile_event_head_title), a.setMhead(e, n, "/"), (0, o.val)((0, o.geByClass1)("mcont", e), function(e, t, n) {
                                                return "g" === b || "p" === b || "e" === b ? '<div class="al_loading"></div>' : '<div class="pcont fit_box"><div class="PageBlock"><div class="owner_panel profile_panel"><img src="' + (e || "") + '" class="pp_img" /><div class="pp_cont"><h2 class="op_header">' + (t || "") + '</h2></div></div><div id="al_loading"></div></div>'
                                            }(f, l))
                                        }
                                    },
                                    afterAppend: function() {
                                        (0, o.alLoadingFix)(), (0, o.scrollTop)(0)
                                    }
                                }, t);
                                break;
                            case "playlists":
                                _ = !0, a.set(h, !1, {
                                    before: !0,
                                    beforeAppend: function(e) {
                                        var n = (0, o.geByClass)("audioPlaylists__item", e),
                                            i = "";
                                        n && (0, o.each)(n, function(e, t) {
                                            i += AudioPlaylist.tplSearchListItem({
                                                href: (0, o.attr)((0, o.geByClass1)("audioPlaylists__itemLink", t), "href"),
                                                thumb_style: (0, o.attr)((0, o.geByClass1)("audioPlaylists__itemCover", t), "style"),
                                                grid_covers: (0, o.val)((0, o.geByClass1)("audioPlaylists__itemCover", t)),
                                                title: (0, o.val)((0, o.geByClass1)("audioPlaylists__itemTitle", t)),
                                                author_name: (0, o.val)((0, o.geByClass1)("audioPlaylists__itemAuthor", t)),
                                                short_stats: (0, o.val)((0, o.geByClass1)("audioPlaylists__itemStats", t))
                                            }, !0)
                                        });
                                        var r = AudioPlaylist.tplPlayerSearch("", !0),
                                            s = AudioPlaylist.tplPlaylistsPage(i, r);
                                        (0, o.val)((0, o.geByClass1)("mcont", e), '<div class="pcont bl_cont">' + s + "</div>"), a.setMhead(e, (0, o.attr)(t.target, "data-header"), !0), window.isNewNavigation || (0, o.scrollTop)(0)
                                    }
                                });
                                break;
                            case "empty":
                            case "artist":
                            case "playlist":
                                _ = !0, a.set(h, !1, {
                                    before: !0,
                                    beforeAppend: function(e) {
                                        window.isNewNavigation ? u.drawLoader(e) : (0, o.val)((0, o.geByClass1)("mcont", e), '<div class="pcont bl_cont"><div id="al_loading"></div></div>')
                                    },
                                    afterAppend: function() {
                                        (0, o.alLoadingFix)(), window.isNewNavigation && (0, o.scrollTop)(0)
                                    }
                                }, t);
                                break;
                            case "news_subsection":
                                _ = !0, a.set(h, !1, {
                                    before: !0,
                                    beforeAppend: function(e) {
                                        var t = (0, o.geByClass1)("news_subsections", e);
                                        t && !(0, o.hasClass)("summary_loading", t.firstChild) && (0, o.before)((0, o.ce)("div", {
                                            className: "summary_loading",
                                            innerHTML: '<i class="i_loading"></i>'
                                        }), t.firstChild)
                                    }
                                });
                                break;
                            case "tabbar":
                                _ = !0, t.is_fast = !0;
                                var w = !1,
                                    k = {
                                        options: {
                                            is_fast: !0,
                                            tab: t.tab,
                                            prev_tab: t.prev_tab
                                        }
                                    };
                                t.need_check_updates && d && (k = (0, o.extend)(k, d), w = !0), a.set(h, k, {
                                    before: !w,
                                    beforeAppend: function(e) {
                                        window.isNewNavigation && (a.setMhead(e, (0, o.attr)(t.target, "data-header"), !1), u.drawSkeletonLoader(e, t.tab)), document.body.classList.contains("vk_tabbar_bottom") && a.hideHeader(e)
                                    },
                                    afterAppend: function() {
                                        (0, o.alLoadingFix)()
                                    }
                                });
                                break;
                            default:
                                l = window.cur;
                                var E = !!(0, o.geByClass1)("mhi_logo", "mhead");
                                if (_ = !0, l.al_fast && l.al_fast[b]) a.set(h, !1, l.al_fast[b](t), t);
                                else if (window.isNewNavigation && !E) {
                                    var S = {
                                        options: {
                                            is_fast: !0,
                                            tab: t.tab,
                                            removeAfterNextResponse: t.removeAfterNextResponse
                                        }
                                    };
                                    a.set(h, S, {
                                        before: !0,
                                        afterAppend: function() {
                                            (0, o.alLoadingFix)()
                                        }
                                    })
                                }
                        }
                    }
                    if (t.need_check_updates || A.abort_reqs(), t.local) {
                        var C = !0;
                        a.set(h, {}, {
                            after: !0,
                            no_scroll: !0,
                            force: !0
                        }, !1), v && v()
                    } else {
                        var M = (0, o.qs2obj)(t.nav.params);
                        (0, o.extend)(M, t.params || {}), window.al && window.al.menu || (M._nlm = 1), m && (M._tstat = m);
                        var P = window.pStats,
                            T = P.getSeenData();
                        T && (M._pstat = T.data, l && l.module && (M._pstatref = l.module)), M._ref || (M._ref = (n.path || "").substr(1));
                        var D = f.split("#");
                        !M._hash && D.length > 1 && (M._hash = "#" + D[1]), (0, c.preloadStaticForNavigation)(f);
                        var I = Object.assign({}, t.headers, {
                            "X-Ajax-Nav": "true"
                        });
                        C = A.post(f, M, {
                            onPageDone: function(e, n, r, o, s) {
                                A.fastNav = !1;
                                var l = window.cur;
                                if (T && P.onSend(T.seen), A.tProcess = (new Date).getTime(), a.set(h, {
                                        title: e,
                                        html: n,
                                        js: r,
                                        lm: o,
                                        bc: s,
                                        st: t.st || 0
                                    }, {
                                        after: _,
                                        no_scroll: _
                                    }, !_ && t), t.back) {
                                    var c = (0, i.$)(".layout");
                                    a.setMhead(c, !1, t.back)
                                }
                                A.tModule = l.module, A.tRender = (new Date).getTime()
                            },
                            redirectToLoginPage: t.redirectToLoginPage,
                            headers: I
                        });
                        A.save_req()
                    }
                    return _ && (t.zProcess && (t.zProcess(), delete t.zProcess), n.set(t), A.tModule = l.module, A.tFastRender = (new Date).getTime(), A.fastNav = !0), C
                },
                confirm: function(e) {
                    function t(t, n, i, a) {
                        return e.apply(this, arguments)
                    }
                    return t.toString = function() {
                        return e.toString()
                    }, t
                }(function(e, t, n, i) {
                    return !!confirm(t) && A.click(e, i, {
                        url_params: {
                            hash: n
                        }
                    })
                }),
                _post: function(e, t, n) {
                    var i = function(e, t) {
                            n.onFail && n.onFail.call(window, 0, e, t)
                        },
                        a = window.debuglogSent ? window.debuglogSent(e) : -1;
                    return A.plainpost(e, t, function(r, l) {
                        if (204 === l.status && l.getResponseHeader("X-AppShell-Fallback")) {
                            var c = (0, s.makeUrl)(location.href, {
                                __appshell_fallback: l.getResponseHeader("X-AppShell-Fallback")
                            });
                            location.replace(c)
                        } else {
                            var u = !1;
                            try {
                                u = (0, o.parseJSON)(r)
                            } catch (e) {
                                u = !1
                            }!1 === u ? i() : (A.parseResponse(u, e, t, n), A._debugLog(a, u.debugLog))
                        }
                    }, i, null, {
                        headers: n.headers
                    })
                },
                _debugLog: function(e, t) {
                    window.debuglogGot && window.debuglogGot(e, t)
                },
                parseResponse: function(e, t, n, a) {
                    var r, s = window.al,
                        l = window.nav,
                        u = window.menu,
                        h = window.page,
                        p = e.version,
                        m = e.counters,
                        _ = e.type,
                        v = t.indexOf("community") >= 0,
                        g = !1;
                    if (v ? g = !(!window.al || p === s.ver) : window.al && p !== s.ver ? g = !0 : !window.menu || e.lm_data && e.lm_data.lm || window.al && window.al.menu && window.al.menu.length && (g = !u.refreshCounters(m)), !1 !== m && !v) {
                        var y = window.isNewNavigation ? 3 : 2;
                        (0, o.setNotify)(m[y])
                    }
                    switch (e.lm_data && e.lm_data.lm && m && (e.lm_data.counters = m), _) {
                        case 0:
                            if (g) return l.hard_go(l.cur, null, {
                                replace: !0
                            });
                            var b = e.data;
                            if (r = b && isObject(b[0]) && b[0]._snackbar) {
                                if (Snackbar.init(r), 2 === r.type) return photoview.opened() ? void photoview.close() : Stories.opened ? void Stories.close() : zlayer.opened() ? void zlayer.close() : void(A.fastNav && history.back());
                                delete b[0]._snackbar
                            }
                            a && a.onDone && a.onDone.apply(window, b);
                            break;
                        case 1:
                            var w = e.location;
                            A.onRedirect(!0, w);
                            var k = e.hard,
                                E = e.frame,
                                S = e.clear;
                            if (!E && window.isNewMail && A.onBeforeRedirect(w)) break;
                            if (S && l.clear(), (r = e._snackbar) && (Snackbar.init(r), delete e.snackbar), g || k) l.hard_go(w);
                            else if (E) {
                                (0, d.setDocumentDomain)();
                                var C = w + (-1 == w.indexOf("?") ? "?" : "&") + "__extra=1",
                                    M = (0, o.createIframe)({
                                        src: C
                                    })
                            } else l.go(w, null, {
                                ignore_cur_process: !0
                            });
                            break;
                        case A.RESPONSE_CAPTCHA:
                            var P = e.location,
                                T = e.img,
                                D = e.post,
                                I = e.key;
                            a && a.onFail ? a.onFail(_, P, {
                                location: P,
                                img: T,
                                post: D,
                                key: I
                            }) : l.hard_go(P);
                            break;
                        case 3:
                            var x = e.lm_data;
                            if (window.isNewNavigation && x && !!x.is_new_nav !== window.isNewNavigation && (g = !0), h.need_hard_go = g, x && x.rdr && window.al && s.menu && (0, o.getW)("vk_wrap") >= 614) {
                                l.go(x.rdr, null, {
                                    replace: !0
                                });
                                break
                            }
                            f.default.getRouter().deactivateAllRoutes(), cur.share && cur.share.destroy(), (a = a || {}).onPageDone || (a.onPageDone = function(e, n, i, a, r) {
                                l.go(t, null, {
                                    push_only: !0
                                }), h.set(h.getHash(l), {
                                    title: e,
                                    html: n,
                                    js: i,
                                    lm: a,
                                    bc: r
                                })
                            });
                            var O = e.title,
                                L = e.html,
                                B = e.js,
                                R = e.body_class,
                                N = e.top_bar,
                                j = (0, o.ge)("vk_topbar");
                            N && !j ? (j = (0, o.ce)("div", {
                                id: "vk_topbar",
                                innerHTML: N
                            }), (0, o.before)(j, (0, i.$)(".layout"))) : (0, o.val)(j, N), (0, c.addStatic)(e.static_files).then(function() {
                                a.onPageDone(O, L, B, x, R)
                            });
                            break;
                        case 4:
                            if (a.redirectToLoginPage) return window.location = e.location, !1;
                            if (!A._failed_relogin) {
                                var F = e.location;
                                (0, d.setDocumentDomain)();
                                M = (0, o.createIframe)({
                                    src: F
                                })
                            }
                            A._failed_relogin = !0, A.save_failed_req(M, t, n, a)
                    }
                },
                onReLoginDone: function() {
                    A.repeat_reqs(), A._failed_relogin = !1
                },
                tGetParam: function() {
                    if (A.tStart && A.tModule) {
                        var e = A.tFastRender - A.tStart,
                            t = A.tRestoreRender - A.tStart,
                            n = A.tProcess - A.tStart,
                            i = A.tRender - A.tProcess,
                            a = ["/" == A.tModule.substr(0, 1) ? A.tModule.substr(1) : A.tModule, e, t, n, i];
                        for (var r in a)(!a[r] || a[r] < 0) && (a[r] = 0);
                        return A.tStart = !1, a.join(",")
                    }
                },
                tAlGetParam: function() {
                    if (A.tAlStart && A.tAlModule) {
                        var e = A.tAlProcess - A.tAlStart,
                            t = A.tAlRender - A.tAlProcess,
                            n = ["al_" + ("/" == A.tAlModule.substr(0, 1) ? A.tAlModule.substr(1) : A.tAlModule), e, t];
                        for (var i in n)(!n[i] || n[i] < 0) && (n[i] = 0);
                        return A.tAlStart = !1, n.join(",")
                    }
                },
                refreshLinks: function(e, t) {
                    if (e) {
                        var n = (0, o.geByClass1)("mmi_fv", "lm_cont"),
                            i = n && (0, o.geByClass1)("lfm_item", n),
                            a = (0, o.geByClass1)("mmi_fv", "mfoot"),
                            r = a && (0, o.geByClass1)("lfm_item", a),
                            s = (0, o.ge)("fv_link"),
                            l = (0, o.ge)("menu_fv_link"),
                            c = (0, o.geBySel1)('link[rel="canonical"]');
                        (0, o.attr)(i, "href", e), (0, o.attr)(r, "href", e), (0, o.attr)(s, "href", e), (0, o.attr)(c, "href", (0, o.attr)((0, o.ge)("mcont"), "data-canonical")), window.nav.prev_fv_link && (0, o.attr)(l, "href", window.nav.prev_fv_link), window.nav.fv_link = e
                    }
                    if (t) {
                        var u = (0, o.geByClass1)("mmi_app", "lm_cont"),
                            d = u && (0, o.geByClass1)("lfm_item", u),
                            f = (0, o.geByClass1)("mmi_app", "mfoot"),
                            h = f && (0, o.geByClass1)("lfm_item", f),
                            p = (0, o.ge)("app_link"),
                            A = !!t && "return nav.app_go(this, event, '" + (0, o.escapeStr)(t) + "');";
                        (0, o.attr)(d, "onclick", A), (0, o.attr)(h, "onclick", A), (0, o.attr)(p, "onclick", A)
                    }
                }
            };
        window.ajax = A;
        var m = A;
        t.default = m
    },
    l51W: function(e, t, n) {
        "use strict";
        var i = window,
            a = (i.nav, i.attr, i.ajax),
            r = function() {
                function e(e) {
                    var t = e.closest(".si_body");
                    return {
                        buttons: $(".si_links", t),
                        message: $(".si_msg", t)
                    }
                }
                return {
                    sendRequest: function(t, n) {
                        t && t.preventDefault();
                        var i = n.getAttribute("href");
                        ActionMenu.closeMenu();
                        var r = e(n);
                        a.post(i, {
                            _ajax: 1
                        }, {
                            onDone: function(e) {
                                ! function(e) {
                                    hide(e.buttons), show(e.message)
                                }(r), val(r.message, e)
                            }
                        })
                    },
                    cancelRequest: function(t, n) {
                        t && t.preventDefault();
                        var i = n.getAttribute("href"),
                            r = e(n);
                        a.post(i, {
                                _ajax: 1
                            }, {
                                onDone: function(e) {}
                            }),
                            function(e) {
                                hide(e.message), show(e.buttons)
                            }(r)
                    }
                }
            }();
        window.GroupsInvite = r
    },
    l57W: function(e, t, n) {
        "use strict";
        var i = n("UxAg"),
            a = s(n("r/ag")),
            r = s(n("29dZ")),
            o = s(n("Q8gl"));

        function s(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        window.SwitcherConfirm = {}, SwitcherConfirm._onSwitcherChange = u, SwitcherConfirm._onConfirmClick = d, SwitcherConfirm._onCancelClick = function(e) {
            return f(e.$btn)
        }, SwitcherConfirm._onPopupOverlayClick = function(e) {
            return f(e.$popup)
        };
        var l = {
                checked: function(e) {
                    return "SwitcherConfirm_checked_".concat(e ? "yes" : "no")
                }
            },
            c = {
                switcher: ".SwitcherConfirm",
                popup: ".SwitcherConfirm__popup",
                confirm: ".SwitcherConfirm__confirm",
                cancel: ".SwitcherConfirm__cancel"
            };

        function u(e) {
            var t = e.$control,
                n = t.closest(c.switcher),
                r = (0, i.$)(c.popup, n);
            a.default.open(r), n.$popup = r, n.$control = t, n.checked = e.checked
        }

        function d(e, t) {
            var n = t.$btn.closest(c.switcher),
                o = (0, i.$)(c.confirm, n),
                s = (0, i.$)(c.cancel, n),
                u = n.checked;
            n.isSaving = !0, r.default.setLoading(o, !0), r.default.setDisabled(s, !0), Wd.handle(e, {
                checked: u,
                onSuccess: function() {
                    n.isSaving = !1, a.default.close(n.$popup), r.default.setLoading(o, !1), r.default.setDisabled(s, !1), n.classList.toggle(l.checked(!0), u), n.classList.toggle(l.checked(!1), !u)
                }
            })
        }

        function f(e) {
            var t = e.closest(c.switcher);
            t.isSaving || (o.default.setChecked(t.$control, !t.checked), a.default.close(t.$popup))
        }
    },
    l90V: function(e, t, n) {
        "use strict";
        var i, a = (i = n("SRbS")) && i.__esModule ? i : {
            default: i
        };
        Object.assign(a.default, {
            list: function(e) {
                var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null;
                Array.isArray(e) || (e = [e]);
                return t ? e.map(t).join("") : e.join("")
            }
        })
    },
    lQx8: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.Messenger = M, t.Messenger_renderConvoLayer = P, t.Messenger_renderLoadingPage = function(e) {
            var t = (0, h.MailHat_page)(),
                n = (0, o.default)({
                    mix: "messenger__body",
                    inner: [T()]
                });
            return i.default.html(b(), t, n)
        }, t.uMessenger_class = O, t.uMessenger_getBanner = I, t.uMessenger_getPinnedMsg = D, t.uMessenger_renderMRsHint = B, t.uMessenger_hasSelectedMsgs = L, t.default = void 0;
        var i = A(n("bZ/P")),
            a = A(n("Mc5h")),
            r = (A(n("9y81")), A(n("O5lf"))),
            o = A(n("AgBx")),
            s = A(n("QBkA")),
            l = A(n("rKp0")),
            c = A(n("u33z")),
            u = A(n("HPEO")),
            d = A(n("CkGd")),
            f = A(n("yNeG")),
            h = n("DkIl"),
            p = A(n("2eJH"));

        function A(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }

        function m() {
            var e = S(['\n    <a href="/mail?act=mrs" class="messenger__mrsHintBox _touched">\n      ', "\n    </a>\n  "]);
            return m = function() {
                return e
            }, e
        }

        function _(e, t, n) {
            return t in e ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = n, e
        }

        function v() {
            var e = S(["\n    ", '\n    <div class="messenger__banner_content">\n      <div class="messenger__banner_text" ', ">\n        ", '\n      </div>\n      <div class="messenger__banner_buttons">\n        ', "\n      </div>\n    </div>\n    ", "\n  "]);
            return v = function() {
                return e
            }, e
        }

        function g() {
            var e = S(['\n      <div class="messenger__banner_icon">\n        <img class="messenger__banner_icon_img" src="', '">\n      </div>\n    ']);
            return g = function() {
                return e
            }, e
        }

        function y() {
            var e = S(['\n    <div class="messenger__spinner">\n      ', "\n    </div>\n  "]);
            return y = function() {
                return e
            }, e
        }

        function b() {
            var e = S(['\n    <div class="messenger__header">\n      ', "\n    </div>\n    ", "\n  "]);
            return b = function() {
                return e
            }, e
        }

        function w() {
            var e = S(['\n    <div class="messenger__convoListNotice">\n      ', "\n    </div>\n  "]);
            return w = function() {
                return e
            }, e
        }

        function k() {
            var e = S(['\n    <div class="messenger__header">\n      ', '\n      <div class="', '">', '</div>\n      <div class="messenger__pinned">', "</div>\n    </div>\n    ", '\n    <div class="', '">\n      <div class="messenger__mrbox">', '</div>\n      <div class="messenger__write">', '</div>\n      <div class="messenger__acts">', "</div>\n    </div>\n  "]);
            return k = function() {
                return e
            }, e
        }

        function E() {
            var e = S(['\n    <div class="', '">\n      <div class="messenger__layer messenger__layer_main">\n        <div class="messenger__header">', "</div>\n        ", '\n      </div>\n      <div class="messenger__layer messenger__layer_convo">\n        ', '\n      </div>\n      <div class="messenger__layer messenger__layer_page">', '</div>\n      <div class="messenger__dialog"></div>\n    </div>\n  ']);
            return E = function() {
                return e
            }, e
        }

        function S(e, t) {
            return t || (t = e.slice(0)), Object.freeze(Object.defineProperties(e, {
                raw: {
                    value: Object.freeze(t)
                }
            }))
        }
        var C = function() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                t = store.mail.cur,
                n = t.query,
                i = (0, l.default)({
                    scrap: "folder"
                }),
                a = (0, l.default)({
                    scrap: "search"
                }),
                r = e.page,
                o = "all" !== t.folder || t.query || t.forwardFromId ? 0 : t.countMR;
            return M({
                mix: O(),
                mailHat: (0, f.default)(),
                convo: P(),
                page: r,
                mrs: o,
                query: n,
                createChatUrl: "/mail?act=new_chat",
                scrapFolder: i,
                scrapSearch: a
            })
        };

        function M(e) {
            var t = window.lang.mobile_mail_search_only_messages,
                n = (0, s.default)({
                    query: e.query,
                    createUrl: e.createChatUrl
                }),
                r = e.mrs ? B(e.mrs) : "",
                l = i.default.onClick("Messenger._onSearchMsgsClick"),
                c = (0, o.default)({
                    mix: "messenger__body",
                    attrs: i.default.onScroll("Messenger._onMainScroll", "this"),
                    inner: [(0, a.default)({
                        mix: "messenger__filter",
                        inner: n
                    }), (0, a.default)({
                        mix: i.default.class("messenger__mrsHint", {
                            hidden: !e.mrs
                        }),
                        inner: r
                    }), (0, a.default)({
                        mix: "messenger__searchMsgs",
                        attrs: l,
                        inner: t
                    }), (0, a.default)({
                        mix: "messenger__loadable",
                        inner: [(0, a.default)({
                            mix: "messenger__folderList",
                            inner: e.scrapFolder
                        }), (0, a.default)({
                            mix: "messenger__searchList",
                            inner: e.scrapSearch
                        }), T()]
                    })]
                });
            return i.default.html(E(), e.mix, e.mailHat, c, e.convo, e.page)
        }

        function P() {
            var e = store.mail,
                t = e.cur,
                n = e.peers[t.peerId],
                r = (0, f.default)(),
                s = D(),
                c = I(),
                h = (0, u.default)(),
                A = n && n.canPin,
                m = (0, d.default)({
                    canPin: A,
                    isChannel: n.isChannel
                }),
                _ = (0, l.default)({
                    scrap: "peer"
                }),
                v = n.isIncomingMR ? (0, p.default)(t.peerId) : "",
                g = n.isRejectedMR ? function() {
                    var e = window.lang;
                    return i.default.html(w(), e.mobile_mail_mrs_rejected_info)
                }() : "",
                y = (0, o.default)({
                    mix: "messenger__body",
                    attrs: i.default.onScroll("Messenger._onConvoScroll", "this"),
                    inner: [(0, a.default)({
                        mix: "messenger__spacer"
                    }), (0, a.default)({
                        mix: "messenger__convoList",
                        inner: [_, g]
                    }), T()]
                }),
                b = "messenger__banner";
            c && (b = "".concat(b, " messenger__bannerVisible"));
            var E = i.default.class("messenger__footer", {
                actionsOpen: L(),
                isIncomingMR: n.isIncomingMR
            });
            return i.default.html(k(), r, b, c, s, y, E, v, h, m)
        }

        function T() {
            var e = (0, r.default)({
                mix: ""
            });
            return i.default.html(y(), e)
        }

        function D() {
            var e = store.mail,
                t = e.cur.peerId;
            return t && e.peers[t].pinnedMsg
        }

        function I() {
            var e = store.mail,
                t = e.cur.peerId,
                n = t && e.peers[t],
                a = n && n.banner;
            if (!a) return "";
            var r = "";
            a.icon && (r = i.default.html(g(), a.icon));
            for (var o = a.buttons, s = o.length, l = [], u = 0; u < s; u++) l.push(x(o[u]));
            l = i.default.list(l);
            var d = (0, c.default)({
                    class: "messenger__banner_close",
                    onClick: i.default.onClick("uMessenger.onBannerButtonClick", "event")
                }),
                f = i.default.onClick("uMessenger.onBannerTextClick", "event");
            return i.default.html(v(), r, f, a.text, l, d)
        }

        function x(e) {
            var t, n, a = i.default.class("messenger__banner_button", {
                primary: "secondary" !== e.layout,
                secondary: "secondary" === e.layout
            });
            return "link" === e.type ? t = {
                href: e.link
            } : "callback" === e.type && (n = i.default.onClick("uMessenger.onBannerButtonClick", "event", e.callback_data)), (0, c.default)({
                class: a,
                text: e.text,
                type: "link" === e.type ? "link" : "button",
                link: t,
                onClick: n
            })
        }

        function O() {
            var e, t, n = store.mail.cur;
            t = n.page ? "view_page" : n.peerId ? "view_dialog" : n.query && "msgs" === n.tab ? "view_searchMsgs" : n.query ? "view_searchPeers" : "folder_".concat(n.folder);
            var a = n.peerId ? store.mail.peers[n.peerId] : null;
            return i.default.class("e", "messenger", {
                isIncomingMR: !!a && a.isIncomingMR,
                isRejectedMR: !!a && a.isRejectedMR
            }, "uMessenger", (_(e = {}, t, !0), _(e, "community", !!n.groupId), e))
        }

        function L() {
            var e = store.mail.cur.msgSelected;
            return Object.keys(e).length > 0
        }

        function B(e) {
            var t = window.lang,
                n = langNumeric(e, t.mobile_mail_mrs_request_count);
            return i.default.html(m(), n)
        }
        t.default = C
    },
    lcib: function(e, t, n) {
        "use strict";
        var i, a = n("UxAg"),
            r = (i = n("TYsd")) && i.__esModule ? i : {
                default: i
            };
        window.SearchPanel = {
            setQuery: function(e, t) {
                var n = (0, a.$)(s.inputById(e));
                t = t || "", n.value !== t && (n.value = t, d(n, t))
            }
        }, SearchPanel._onInput = c, SearchPanel._onClearClick = u, SearchPanel._onFocus = l;
        var o = {
                hasQuery: "SearchPanel_hasQuery"
            },
            s = {
                searchPanel: ".SearchPanel",
                input: ".SearchPanel__input",
                inputById: function(e) {
                    return '.SearchPanel[data-id="'.concat(e, '"] .SearchPanel__input')
                }
            };

        function l() {}

        function c(e, t) {
            var n = e.value;
            d(e, n), r.default.handle(t, {
                query: n
            })
        }

        function u(e) {
            var t = e.closest(s.searchPanel).$(s.input);
            t.value = "", t.oninput()
        }

        function d(e, t) {
            e.closest(s.searchPanel).classList.toggle(o.hasQuery, !!t)
        }
    },
    ldCb: function(e, t, n) {
        "use strict";
        var i = window.hide;
        window.Informer = {
            close: function(e) {
                i(e)
            }
        }
    },
    lkNA: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.loadScript = function(e, t) {
            var n, i = t.timeout,
                a = t.onLoad,
                r = t.onError,
                o = document.createElement("script");
            o.addEventListener("load", s), o.addEventListener("readystatechange", s), o.addEventListener("error", l), o.src = e, document.head.appendChild(o), i && (n = setTimeout(l, i));

            function s(e) {
                o.readyState && "loaded" != o.readyState && "complete" != o.readyState || (c(), a && a())
            }

            function l(e) {
                c(), r && r()
            }

            function c() {
                clearTimeout(n), o.removeEventListener("load", s), o.removeEventListener("readystatechange", s), o.removeEventListener("error", l)
            }
            return {
                destroy: function() {
                    c()
                }
            }
        }
    },
    ll1Q: function(e, t, n) {
        "use strict";
        var i, a = (i = n("sXaZ")) && i.__esModule ? i : {
            default: i
        };
        Object.assign(a.default, {
            setPrefix: function(e, t) {
                e.$(r.prefix).innerText = t
            },
            getValue: function(e) {
                return e.$(r.native).value
            }
        });
        var r = {
            native: ".TextInput__native",
            prefix: ".TextInput__prefix"
        }
    },
    m9bs: function(e, t, n) {
        "use strict";
        var i, a = (i = n("TYsd")) && i.__esModule ? i : {
            default: i
        };
        window.SettingsRow_select = {}, SettingsRow_select._onChange = o;
        var r = {
            row: ".settingsRow",
            description: ".settingsRow__description"
        };

        function o(e, t) {
            ! function(e) {
                var t = e.$select,
                    n = e.label;
                t.closest(r.row).$(r.description).textContent = n
            }(t), a.default.handle(e, t)
        }
    },
    mOHq: function(e, t, n) {
        "use strict";
        var i, a = (i = n("jk6M")) && i.__esModule ? i : {
            default: i
        };
        var r = window,
            o = r.isUndefined,
            s = r.getX,
            l = r.getY,
            c = r.vkNow,
            u = r.clog,
            d = r.cancelEvent,
            f = r.getW,
            h = r.setStyle,
            p = r.getH,
            A = r.scrollTop,
            m = r.getCh,
            _ = r.preventEvent,
            v = r.extend,
            g = r.hasClass,
            y = r.gpeByClass,
            b = r.attr,
            w = r.toggleClass,
            k = r.geByClass1,
            E = r.removeClass,
            S = r.addClass,
            C = r.geByClass,
            M = r.addEvent,
            P = r.onBodyResize,
            T = r.removeEvent,
            D = window.thover;
        window.Scroller = function(e, t) {
            var n, i, r, I, x, O = t && t.ignoreMouseWheel,
                L = t && t.noAutoScroll,
                B = !o(document.ontouchmove),
                R = !0,
                N = !1,
                j = !1,
                F = !1,
                H = !1,
                V = 0,
                U = 0,
                z = !1,
                W = 0,
                q = !1,
                $ = !1,
                G = !1,
                Q = !1;

            function Y(e) {
                var t = e.touches,
                    n = s(i),
                    a = l(i);
                return {
                    x: ((t && t[0] ? t[0].pageX : e.pageX) || 0) - n,
                    y: ((t && t[0] ? t[0].pageY : e.pageY) || 0) - a
                }
            }

            function X(e) {
                z || (z = []), z.push([c(), e]), z = z.slice(-20)
            }

            function K() {
                z = !1
            }

            function J() {
                if (!z || z.length < 2) return [0, 0, 0];
                for (var e = c(), t = !1, n = z.pop(), i = z.length - 1; i >= 0; i--) {
                    if ((a = e - z[i][0]) > 150) break;
                    t = z[i]
                }
                if (!t || !n) return [0, 0, 0];
                var a, r = n[1].x - t[1].x,
                    o = n[1].y - t[1].y,
                    s = Math.sqrt(r * r + o * o);
                return (a = n[0] - t[0]) ? [s / a, r / a, o / a] : [0, 0, 0]
            }

            function Z(e) {
                "touchstart" == e.type ? R = !e.touches || 1 == e.touches.length : "touchmove" == e.type ? R = !1 : "click" == e.type && (R || (d(e), R = !0))
            }

            function ee(e) {
                if (!(window.isNewMail && e.target.closest(".stickers_panel") && e.target.closest(".messenger") || Q && e.touches && e.touches.length > 1)) {
                    if (K(), j) {
                        if (U <= 1) return
                    } else if (f(i) - f(r) >= 0) return;
                    F = Y(e), X(H = F), G = !0, h.animate(r)
                }
            }

            function te(e) {
                if (F && (Q || G)) {
                    D && D.cancel(e);
                    var t = Y(e);
                    if (X(H = t), G) {
                        var n = F.x - t.x,
                            a = F.y - t.y;
                        if (Math.abs(n) >= Math.abs(a) && (d(e), Q = !0), G = !1, Q) {
                            var o = l(i),
                                s = p(i),
                                c = A(),
                                u = m();
                            !L && (o - 7 < c ? A(o - 7) : o + s + 7 > c + u && A(o + s + 7 - u))
                        }
                    }
                    if (Q)
                        if (d(e), j) {
                            var _ = f(i);
                            n = F.x - t.x;
                            (V <= 0 && n < 0 || V >= U - 1 && n > 0) && (n /= 3);
                            var v = -V - n / _,
                                g = N ? 100 * v + "%" : v * _;
                            h.transform(r, {
                                translate: [g, 0]
                            })
                        } else {
                            var y = f(i) - f(r);
                            n = F.x - t.x;
                            if (y > 0 && (y = 0), (v = W - n) < y) g = y - (y - v) / 3;
                            else if (v > 0) g = 0 + (v - 0) / 3;
                            else g = W - n;
                            re(g), h.transform(r, {
                                translate: [g, 0]
                            })
                        }
                }
            }

            function ne(e) {
                if (F && Q) {
                    if (d(e), j) {
                        var t = 4.7 * J()[1],
                            n = F.x - H.x,
                            a = f(i),
                            o = Math.abs(n) >= a / 2;
                        (V > 0 && (o && n < 0 || t > 1) || V < U - 1 && (o && n > 0 || t < -1)) && (V += n > 0 ? 1 : -1);
                        var s = -V,
                            l = N ? 100 * s + "%" : s * a;
                        F = !1, K(), oe(), h.animate(r, "transform", {
                            duration: 200,
                            func: "ease"
                        }), h.transform(r, {
                            translate: [l, 0]
                        })
                    } else {
                        var c = function() {
                                if (!z) return !1;
                                var e = J(),
                                    t = e[0],
                                    n = e[1];
                                if (K(), !t) return !1;
                                var i = t / 4.7,
                                    a = n * i - 4.7 * i * i / 2;
                                return u("dx", a *= 140, "t", i *= 530), !(t < .1 || !a) && {
                                    dx: a,
                                    t: i
                                }
                            }(),
                            p = f(i) - f(r);
                        n = F.x - H.x, s = W - n;
                        c && (s += c.dx), p > 0 && (p = 0), W = s < p ? p : s > 0 ? 0 : s;
                        var A = {
                            duration: 200,
                            func: "ease"
                        };
                        c && (A = {
                            duration: c.t,
                            func: "cubic-bezier(0, 1, 1, 1)"
                        }), re(W), h.animate(r, "transform", A), h.transform(r, {
                            translate: [W, 0]
                        })
                    }
                    Q = !1
                }
            }

            function ie(e) {
                if (!(O || window.isNewMail && e.target.closest(".stickers_panel") && e.target.closest(".messenger"))) {
                    if (_(e), j) {
                        if (U <= 1) return
                    } else if ((n = f(i) - f(r)) >= 0) return;
                    var t = (e.detail ? e.detail : e.wheelDelta) > 0 ? 3 : -3;
                    if (!1 === q && (q = 0), q += t, !j) {
                        var n = f(i) - f(r),
                            a = W - q;
                        if (n > 0 && (n = 0), a < n) var o = n - (n - a) / 3;
                        else if (a > 0) o = 0 + (a - 0) / 3;
                        else o = W - q;
                        re(o), h.transform(r, {
                            translate: [o, 0]
                        })
                    }
                    clearTimeout($), $ = setTimeout(function() {
                        if (j) {
                            (V > 0 && q < 0 || V < U - 1 && q > 0) && (V += q > 0 ? 1 : -1);
                            var e = -V,
                                t = f(i),
                                n = N ? 100 * e + "%" : e * t;
                            oe(), h.animate(r, "transform", {
                                duration: 200,
                                func: "ease"
                            }), h.transform(r, {
                                translate: [n, 0]
                            })
                        } else {
                            var a = f(i) - f(r);
                            a > 0 && (a = 0), (e = W - q) < a ? W = a : e > 0 ? W = 0 : W -= q, re(n), h.animate(r, "transform", {
                                duration: 200,
                                func: "ease"
                            }), h.transform(r, {
                                translate: [W, 0]
                            })
                        }
                        q = !1
                    }, 200)
                }
            }

            function ae(e) {
                if (j) {
                    var t = V;
                    if (e && e.target) {
                        var n = g("sp_ppt", e.target) ? e.target : y("sp_ppt", e.target),
                            a = +b(n, "data-i");
                        V = a < 0 ? 0 : a > U - 1 ? U - 1 : a
                    }
                    F = !1, K(), Q = !1;
                    var o = f(i),
                        s = -V,
                        l = N ? 100 * s + "%" : s * o;
                    oe(), t != V && h.animate(r, "transform", {
                        duration: 200,
                        func: "ease"
                    }), h.transform(r, {
                        translate: [l, 0]
                    })
                }
            }

            function re(e) {
                if (!j) {
                    e = e || W;
                    var t = f(i) - f(r);
                    w("sw_left", i, e < 0), w("sw_right", i, e > t)
                }
            }

            function oe() {
                if (j) {
                    var e = k("sp_ppt_sel", n);
                    e && e === x[V] || (E("sp_ppt_sel", e), S("sp_ppt_sel", x[V]))
                }
            }
            v(this, {
                init: function() {
                    i = k("scroller_wrap", n), r = k("scroller_cont", i), j ? (I = k("sp_pages_pts", n), x = C("sp_ppt", I), U = (C("scroller_page", r) || []).length, V = 0, oe()) : re(W = 0), z = !1, h.transform(r, {
                        translate: [0, 0]
                    }), B ? (M(i, "touchstart touchmove click", Z), M(i, "touchstart", ee), M(i, "touchmove", te), M(i, "touchend touchcancel", ne)) : (M(i, "mousewheel", ie), M(I, "click", ae)), N || P(ae)
                },
                destroy: function() {
                    B ? (T(i, "touchstart touchmove click", Z), T(i, "touchstart", ee), T(i, "touchmove", te), T(i, "touchend touchcancel", ne)) : (T(i, "mousewheel", ie), T(I, "click", ae)), N || P("__clear", ae)
                },
                onShow: function() {
                    j ? oe() : re(W)
                },
                canClick: function() {
                    return R
                }
            }), n = e, (t = t || {}).byPage ? (j = !0, N = !a.default.android) : (j = !1, N = !1, this.showElem = function(e) {
                if (!j) {
                    var t = s(e) - s(i),
                        n = t + W,
                        a = n + f(e),
                        o = f(i),
                        l = !1;
                    n < 0 ? l = 0 - t + 20 : a > o && (l = o - f(e) - t - 20);
                    var c = f(i) - f(r);
                    if (c > 0 && (c = 0), l < c) l = c;
                    else if (l > 0) l = 0;
                    u(t, W, n, a, 0, o, l), !1 !== l && (re(W = l), h.animate(r, "transform", {
                        duration: 200,
                        func: "ease"
                    }), h.transform(r, {
                        translate: [W, 0]
                    }))
                }
            })
        }
    },
    mXGF: function(e, t, n) {
        "use strict";
        var i, a, r, o, s, l, c, u = window,
            d = u.preventEvent,
            f = u.toggleClass,
            h = u.attr,
            p = u.gpeByClass,
            A = u.geByClass1,
            m = u.ajax,
            _ = u.val,
            v = u.ge,
            g = u.addClass,
            y = u.removeClass,
            b = u.geBySel1,
            w = (i = "_audioSnippet", a = "audio_item", r = "audioPlaylist__add_added", o = "data-follow_text", s = "data-unfollow_text", l = "_audioPlaylistsPage__item", c = "audioPlaylistsPage__item_removed", {
                playPause: function(e, t) {
                    d(e);
                    var n = p(i, t),
                        r = A(a, n);
                    audioplayer.playPause(e, h(r, "data-id")), f("audioSnippet__playpause_paused", t)
                },
                followPlaylist: function(e, t) {
                    d(e);
                    var n = A(l + h(t, "data-playlist_owner_id") + "_" + h(t, "data-playlist_id"));
                    hasClass(r, t) ? (t.innerText = h(t, o), g(c, n)) : (t.innerText = h(t, s), y(c, n)),
                        function(e) {
                            m.post("/audio", {
                                _ajax: 1,
                                act: "follow_playlist",
                                playlist_owner_id: h(e, "data-playlist_owner_id"),
                                playlist_id: h(e, "data-playlist_id"),
                                hash: h(e, "data-hash")
                            }, {
                                redirectToLoginPage: !0
                            })
                        }(t), f(r, t)
                },
                tplSearchBlockItem: function(e) {
                    return '<div class="audioPlaylists__item">\n              <a href="'.concat(e.href, '" class="audioPlaylists__itemLink al_playlist">').concat(e.title, '</a>\n              <span class="audioPlaylists__itemCover" style="').concat(e.thumb_style, '">').concat(e.grid_covers, '</span>\n              <span class="audioPlaylists__itemTitle">').concat(e.title, '</span>\n              <span class="audioPlaylists__itemAuthor">').concat(e.author_name, '</span>\n              <span class="audioPlaylists__itemStats">').concat(e.short_stats, "</span>\n            </div>")
                },
                tplSearchBlock: function(e, t, n, i) {
                    return e ? '<div class="audioPlaylists">\n                <div class="audioPlaylists__header">\n                  <div class="audioPlaylists__cell">\n                    <div class="audioPlaylists__title">'.concat(n, '</div>\n                  </div>\n                  <div class="audioPlaylists__cell">').concat(i, '</div>\n                </div>\n                <div class="audioPlaylists__body _preventMenuOpen">\n                  <div class="audioPlaylists__items">\n                    ').concat(e, "\n                  </div>\n                </div>\n              </div>") : ""
                },
                tplSearchListItem: function(e) {
                    var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1],
                        n = '<div class="audioPlaylistsPage__cell audioPlaylistsPage__cell_actions">\n                <div class="audioPlaylistsPage__menu ai_menu_wrap">\n                  <a href="#" class="ai_menu_toggle_button" onclick="ActionMenu.toggleMenu(event, this);"></a>\n                  <i class="i_pointer"></i>\n                  <div class="ai_menu wi_actions">\n                    '.concat(e.follow_link, "\n                    ").concat(e.publish_link, "\n                  </div>\n                </div>\n             </div>\n             ").concat(e.actions);
                    return t && (n = '<div class="audioPlaylistsPage__cell audioPlaylistsPage__cell_actions">\n                   <div class="audioPlaylistsPage__menu ai_menu_wrap">\n                     <a href="#" class="ai_menu_toggle_button"></a>\n                   </div>\n                 </div>'), '<div class="audioPlaylistsPage__item _audioPlaylistsPage__item'.concat(e.owner_id, "_").concat(e.id, '">\n              <div class="audioPlaylistsPage__cell audioPlaylistsPage__cell_link">\n                <a href="').concat(e.href, '" class="audioPlaylistsPage__itemLink">').concat(e.title, '</a>\n                <span class="audioPlaylistsPage__container">\n                  <span class="audioPlaylistsPage__cell audioPlaylistsPage__cell_cover">\n                    <span class="audioPlaylistsPage__cover" style="').concat(e.thumb_style, '">').concat(e.grid_covers, '</span>\n                  </span>\n                  <span class="audioPlaylistsPage__cell audioPlaylistsPage__cell_desc">\n                    <span class="audioPlaylistsPage__title">').concat(e.title, '</span>\n                    <span class="audioPlaylistsPage__author">').concat(e.author_name, '</span>\n                    <span class="audioPlaylistsPage__stats">').concat(e.short_stats, "</span>\n                  </span>\n                </span>\n              </div>\n              ").concat(n, "\n            </div>")
                },
                tplSearchListNull: function(e) {
                    return '<div class="audioPlaylistsPage__notFound">\n              '.concat(e, "\n            </div>")
                },
                tplPlaylistsPage: function(e) {
                    var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "";
                    return '<div class="PageBlock">\n              <div class="audioPlaylistsPage">\n                <div class="audioPage__search">\n                  '.concat(t, '\n                </div>\n                <div class="audioPlaylistsPage__list _si_container" id="au_search_playlist_items">\n                  ').concat(e, "\n                </div>\n              </div>\n            </div>")
                },
                tplPlayerSearch: function() {
                    var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "",
                        t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1],
                        n = window.lang,
                        i = ('<input type="hidden" name="act" value="player"><input type="hidden" name="list" value="'.concat(escapeAttr(e), '">'), '<input id="au_search_btn" class="button qs_button al_tab" type="submit" value="'.concat(n.mobile_audio_search_btn, '" />'), function() {
                            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "",
                                t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "";
                            return '<div class="audioPage__search">\n              <div class="hp_block">\n                '.concat(e, '\n                <div class="qsearch">\n                  <table class="row_table">\n                    <tr>\n                      <td class="row_table_main_column">\n                        <div class="qs_field_wrap">\n                          <div class="iwrap">\n                            <input id="au_search_field" type="text" class="textfield qs_textfield" name="q" placeholder="').concat(n.mobile_audio_search_placeholder_simple, '">\n                          </div>\n                        </div>\n                      </td>\n                      <td class="row_table_last_column">\n                        ').concat(t, "\n                      </td>\n                    </tr>\n                  </table>\n                </div>\n              </div>\n            </div>")
                        });
                    return t ? i() : function(e, t, n) {
                        return '<form action="/audio" class="qsearch" onsubmit="return cur.au_search.go(event);">'.concat(e(t, n), "</form>")
                    }(i)
                },
                copyValue: function(e, t) {
                    var n = _(e),
                        i = v(t + "_field");
                    _(i, n), cur && cur[t] && cur[t].go();
                    var a = b(".audioPage__tabs .tab_item_cur");
                    a && f("tab_item_cur_noactive", a, n)
                }
            });
        window.AudioPlaylist = w
    },
    mmza: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i = function(e) {
            if (e.inner) return e;
            var t = {
                inner: Wd.wrap(e.head.inner),
                class: "CellLeft__head ".concat(e.head.class || "")
            };
            e.head_href && (t.href = e.head_href);
            var n = {
                inner: Wd.wrap(e.description.inner),
                class: "CellLeft__description ".concat(e.description.class || "")
            };
            e.description.href && (n.href = e.description.href);
            var i = {
                class: "CellLeft ".concat(e.class || ""),
                inner: [{
                    class: "CellLeft__left",
                    inner: [t, n]
                }, {
                    class: "CallLeft__photo",
                    inner: "string" != typeof e.photo ? e.photo : Wd.wrap(e.photo)
                }]
            };
            e.href && (i.href = e.href);
            return i
        };
        t.default = i
    },
    myok: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i = r(n("TYsd")),
            a = r(n("BoyB"));

        function r(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        var o = {
                className: "Btn",
                setLoading: function(e, t) {
                    var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : "";
                    if (!e) return;
                    var i = e.classList.contains(l.loading);
                    if (t) {
                        if (i) return;
                        var r = e.classList.contains(l.secondary);
                        !n && r && (n = "white");
                        var o = (0, a.default)({
                            mix: l.loader,
                            white: "white" === n,
                            large: !0
                        });
                        e.classList.add(l.loading), e.insertAdjacentHTML("afterbegin", o)
                    } else {
                        if (!i) return;
                        var s = e.$(c.loader);
                        e.classList.remove(l.loading), s.remove()
                    }
                },
                setDisabled: function(e) {
                    var t = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1];
                    e.disabled = t
                }
            },
            s = o;
        t.default = s, o._onClick = u;
        var l = {
                loading: "Btn_loading",
                secondary: "Btn_theme_secondary",
                loader: "Btn__loader"
            },
            c = {
                loader: ".".concat(l.loader)
            };

        function u(e, t, n) {
            e.preventDefault(), i.default.handle(n, {
                $btn: t
            })
        }
    },
    mz6W: function(e, t, n) {
        "use strict";
        var i = {
            init: function(e) {
                store.market = extend(store.market || {}, e)
            }
        };
        window.OrderDetails = i
    },
    n4VL: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.PlayerHTML5 = void 0;
        var i = n("1V+M");

        function a(e) {
            return (a = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function r(e, t) {
            for (var n = 0; n < t.length; n++) {
                var i = t[n];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        }

        function o(e, t, n) {
            return t && r(e.prototype, t), n && r(e, n), e
        }
        var s = "data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQAAAAA=",
            l = function() {
                function e(t) {
                    ! function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, e), this.opts = t || {}, this._trackOptions = {}, this._audioNodes = [], this._currentAudioEl = this._createAudioNode(), this._prefetchAudioEl = this._createAudioNode()
                }
                return o(e, null, [{
                    key: "isSupported",
                    value: function(e) {
                        var t = document.createElement("audio");
                        return !!t.canPlayType && (e = e || 'audio/mpeg; codecs="mp3"', !!t.canPlayType(e).replace(/no/, ""))
                    }
                }]), o(e, [{
                    key: "destroy",
                    value: function() {}
                }, {
                    key: "getPlayedTime",
                    value: function() {
                        for (var e = this._currentAudioEl.played, t = 0, n = 0; n < e.length; n++) t += e.end(n) - e.start(n);
                        return t
                    }
                }, {
                    key: "_setAudioNodeUrl",
                    value: function(e, t) {
                        window.data && data(e, "setUrlTimesetUrlTime", t == s ? 0 : vkNow()), e.src = t
                    }
                }, {
                    key: "_createAudioNode",
                    value: function(e) {
                        var t = new Audio,
                            n = this;
                        return this.opts.onBufferUpdate && addEvent(t, "progress", function() {
                            n._currentAudioEl == t && n.opts.onBufferUpdate(n.getCurrentBuffered());
                            var e = t.buffered;
                            e.length;
                            1 == e.length && 0 == e.start(0) && e.end(0) == t.duration && (t._fullyLoaded = !0)
                        }), addEvent(t, "stalled", function() {
                            n._currentAudioEl == t && n._isInvalidDuration() && n._currentAudioEl.currentTime >= n.duration - 1 && n._currentAudioEl.dispatchEvent(new Event("ended"))
                        }), this.opts.onProgressUpdate && addEvent(t, "timeupdate", function() {
                            n._currentAudioEl == t && n.opts.onProgressUpdate(n.getCurrentProgress())
                        }), this.opts.onEnd && addEvent(t, "ended", function() {
                            n._currentAudioEl == t && n.opts.onEnd()
                        }), this.opts.onSeeked && addEvent(t, "seeked", function() {
                            n._currentAudioEl == t && n.opts.onSeeked()
                        }), this.opts.onSeek && addEvent(t, "seeking", function() {
                            n._currentAudioEl == t && n.opts.onSeek()
                        }), addEvent(t, "error", function() {
                            n._prefetchAudioEl == t ? n._prefetchAudioEl = n._createAudioNode() : n._currentAudioEl == t && n.opts.onFail && n.opts.onFail()
                        }), addEvent(t, "canplay", function() {
                            if (window.data) {
                                var e = data(t, "setUrlTime");
                                e && (cur.audioLoadTimings = cur.audioLoadTimings || [], cur.audioLoadTimings.push(vkNow() - e), data(t, "setUrlTime", 0))
                            }
                            n._prefetchAudioEl, n._currentAudioEl == t && (n.opts.onCanPlay && n.opts.onCanPlay(), n._seekOnReady && (n.seek(n._seekOnReady), n._seekOnReady = !1))
                        }), e && (this._setAudioNodeUrl(t, e), t.preload = "auto", t.volume = this._volume || 1, t.load()), this._audioNodes.push(t), t
                    }
                }, {
                    key: "onReady",
                    value: function(e) {
                        e(!0)
                    }
                }, {
                    key: "prefetch",
                    value: function(e) {
                        this._prefetchAudioEl && this._setAudioNodeUrl(this._prefetchAudioEl, s), this._prefetchAudioEl = this._createAudioNode(e)
                    }
                }, {
                    key: "seek",
                    value: function(e) {
                        var t = this._currentAudioEl;
                        this.duration ? t.currentTime = this.duration * e : this._seekOnReady = e
                    }
                }, {
                    key: "setVolume",
                    value: function(e) {
                        void 0 === e && (e = this._currentAudioEl.volume), this._currentAudioEl.volume = e, this._prefetchAudioEl && (this._prefetchAudioEl.volume = e), this._volume = e
                    }
                }, {
                    key: "_isInvalidDuration",
                    value: function() {
                        var e = this._currentAudioEl;
                        return isNaN(e.duration) || e.duration == 1 / 0 || 0 == e.duration
                    }
                }, {
                    key: "getCurrentProgress",
                    value: function() {
                        var e = this._currentAudioEl;
                        return this.duration ? Math.max(0, Math.min(1, e.currentTime / this.duration)) : 0
                    }
                }, {
                    key: "getCurrentBuffered",
                    value: function() {
                        var e = this._currentAudioEl;
                        return e && e.buffered.length ? Math.min(1, e.buffered.end(0) / e.duration) : 0
                    }
                }, {
                    key: "isFullyLoaded",
                    value: function() {
                        return this._currentAudioEl._fullyLoaded
                    }
                }, {
                    key: "setUrl",
                    value: function(t, n) {
                        var i = this._currentAudioEl;
                        if (this._seekOnReady = !1, this._trackOptions = {}, n && "object" === a(n) && (this._trackOptions = n, n = n.callback), i.src == t) return this.opts.onCanPlay && this.opts.onCanPlay(), n && n(!0);
                        if (this._prefetchAudioEl && this._prefetchAudioEl.readyState > e.STATE_HAVE_NOTHING)
                            if (this._prefetchAudioEl.src == t) {
                                this._currentAudioEl.pause(0), this._setAudioNodeUrl(this._currentAudioEl, s);
                                var r = this;
                                this._prefetchAudioEl.readyState >= e.STATE_HAVE_FUTURE_DATA && setTimeout(function() {
                                    r.opts.onCanPlay && r.opts.onCanPlay()
                                }), i = this._currentAudioEl = this._prefetchAudioEl, this._prefetchAudioEl = !1
                            } else this._prefetchAudioEl.src && this._setAudioNodeUrl(this._prefetchAudioEl, s);
                        return i.src != t && (this._setAudioNodeUrl(i, t), i.load()), n && n(!0)
                    }
                }, {
                    key: "play",
                    value: function(t) {
                        this._prefetchAudioEl.src == t && this._prefetchAudioEl.readyState > e.STATE_HAVE_NOTHING && (this._setAudioNodeUrl(this._currentAudioEl, s), this._currentAudioEl = this._prefetchAudioEl, this._prefetchAudioEl = this._createAudioNode(), this.opts.onCanPlay && this.opts.onCanPlay());
                        var n = this._currentAudioEl;
                        if (n.src) try {
                            (0, i.wrapAudioPlay)(n)
                        } catch (e) {
                            debugLog("Audio: url set failed (html5 impl)")
                        }
                    }
                }, {
                    key: "pause",
                    value: function() {
                        var e = this._currentAudioEl;
                        e.src && e.pause()
                    }
                }, {
                    key: "stop",
                    value: function() {
                        var e = this._currentAudioEl;
                        this._setAudioNodeUrl(e, s)
                    }
                }, {
                    key: "_setFadeVolumeInterval",
                    value: function(e) {
                        if (e) {
                            if (!this._fadeVolumeWorker && window.Worker && window.Blob) {
                                var t = new Blob(["         var interval;         onmessage = function(e) {           clearInterval(interval);           if (e.data == 'start') {             interval = setInterval(function() { postMessage({}); }, 20);           }         }       "]);
                                try {
                                    this._fadeVolumeWorker = new Worker(window.URL.createObjectURL(t))
                                } catch (e) {
                                    this._fadeVolumeWorker = !1
                                }
                            }
                            this._fadeVolumeWorker ? (this._fadeVolumeWorker.onmessage = e, this._fadeVolumeWorker.postMessage("start")) : this._fadeVolumeInterval = setInterval(e, 60)
                        } else this._fadeVolumeWorker && (this._fadeVolumeWorker.terminate(), this._fadeVolumeWorker = null), this._fadeVolumeInterval && clearInterval(this._fadeVolumeInterval)
                    }
                }, {
                    key: "fadeVolume",
                    value: function(e, t) {
                        e = Math.max(0, Math.min(1, e));
                        var n = this._currentAudioEl,
                            i = 0;
                        if (i = e < n.volume ? -.04 : .001, Math.abs(e - n.volume) <= .001) return this._setFadeVolumeInterval(), t && t();
                        var a = n.volume;
                        this._setFadeVolumeInterval(function() {
                            i > 0 && (i *= 1.2), a += i;
                            if (i < 0 ? a <= e : a >= e) return this.setVolume(e), this._setFadeVolumeInterval(), t && t();
                            this.setVolume(a)
                        }.bind(this))
                    }
                }, {
                    key: "type",
                    get: function() {
                        return "html5"
                    }
                }, {
                    key: "loaded",
                    get: function() {
                        return !0
                    }
                }, {
                    key: "duration",
                    get: function() {
                        var e = this._currentAudioEl,
                            t = isNaN(e.duration) || e.duration == 1 / 0 ? 0 : e.duration;
                        return !t && this._trackOptions.duration && (t = parseInt(this._trackOptions.duration)), t
                    }
                }]), e
            }();
        t.PlayerHTML5 = l, l.STATE_HAVE_NOTHING = 0, l.STATE_HAVE_FUTURE_DATA = 3, l.HAVE_ENOUGH_DATA = 4, l.AUDIO_EL_ID = "ap_audio"
    },
    n9zS: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.Circle = o, t.default = void 0;
        var i, a = n("/xuI"),
            r = (i = n("z9sQ")) && i.__esModule ? i : {
                default: i
            };

        function o() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                t = (0, a.getRandomId)("skeleton-circle"),
                n = (0, a.stylesObjectToString)({
                    width: "".concat(e.size, "px"),
                    height: "".concat(e.size, "px")
                }) + (e.style || ""),
                i = [r.default.class("SkeletonCircle", {
                    header: e.header
                }), e.class].filter(function(e) {
                    return e
                }).join(" ");
            return (0, a.applyAnimation)(t), {
                id: t,
                class: i,
                style: n,
                tag: "div"
            }
        }
        var s = o;
        t.default = s
    },
    nJnv: function(module, exports, __webpack_require__) {
        var __WEBPACK_AMD_DEFINE_RESULT__, root, factory;
        root = window || {}, factory = function(window) {
            var svgNS = "http://www.w3.org/2000/svg",
                locationHref = "",
                subframeEnabled = !0,
                expressionsPlugin, isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent),
                cachedColors = {},
                bm_rounder = Math.round,
                bm_rnd, bm_pow = Math.pow,
                bm_sqrt = Math.sqrt,
                bm_abs = Math.abs,
                bm_floor = Math.floor,
                bm_max = Math.max,
                bm_min = Math.min,
                blitter = 10,
                BMMath = {};

            function ProjectInterface() {
                return {}
            }! function() {
                var e, t = Object.getOwnPropertyNames(Math),
                    n = t.length;
                for (e = 0; e < n; e += 1) BMMath[t[e]] = Math[t[e]]
            }(), BMMath.random = Math.random, BMMath.abs = function(e) {
                if ("object" == typeof e && e.length) {
                    var t, n = Array.apply(null, {
                            length: e.length
                        }),
                        i = e.length;
                    for (t = 0; t < i; t += 1) n[t] = Math.abs(e[t]);
                    return n
                }
                return Math.abs(e)
            };
            var defaultCurveSegments = 150,
                degToRads = Math.PI / 180,
                roundCorner = .5519;

            function roundValues(e) {
                bm_rnd = e ? Math.round : function(e) {
                    return e
                }
            }

            function roundTo2Decimals(e) {
                return Math.round(1e4 * e) / 1e4
            }

            function roundTo3Decimals(e) {
                return Math.round(100 * e) / 100
            }

            function styleDiv(e) {
                e.style.position = "absolute", e.style.top = 0, e.style.left = 0, e.style.display = "block", e.style.transformOrigin = e.style.webkitTransformOrigin = "0 0", e.style.backfaceVisibility = e.style.webkitBackfaceVisibility = "visible", e.style.transformStyle = e.style.webkitTransformStyle = e.style.mozTransformStyle = "preserve-3d"
            }

            function styleUnselectableDiv(e) {
                e.style.userSelect = "none", e.style.MozUserSelect = "none", e.style.webkitUserSelect = "none", e.style.oUserSelect = "none"
            }

            function BMEnterFrameEvent(e, t, n, i) {
                this.type = e, this.currentTime = t, this.totalTime = n, this.direction = i < 0 ? -1 : 1
            }

            function BMCompleteEvent(e, t) {
                this.type = e, this.direction = t < 0 ? -1 : 1
            }

            function BMCompleteLoopEvent(e, t, n, i) {
                this.type = e, this.currentLoop = t, this.totalLoops = n, this.direction = i < 0 ? -1 : 1
            }

            function BMSegmentStartEvent(e, t, n) {
                this.type = e, this.firstFrame = t, this.totalFrames = n
            }

            function BMDestroyEvent(e, t) {
                this.type = e, this.target = t
            }

            function _addEventListener(e, t) {
                return this._cbs[e] || (this._cbs[e] = []), this._cbs[e].push(t),
                    function() {
                        this.removeEventListener(e, t)
                    }.bind(this)
            }

            function _removeEventListener(e, t) {
                if (t) {
                    if (this._cbs[e]) {
                        for (var n = 0, i = this._cbs[e].length; n < i;) this._cbs[e][n] === t && (this._cbs[e].splice(n, 1), n -= 1, i -= 1), n += 1;
                        this._cbs[e].length || (this._cbs[e] = null)
                    }
                } else this._cbs[e] = null
            }

            function _triggerEvent(e, t) {
                if (this._cbs[e])
                    for (var n = this._cbs[e].length, i = 0; i < n; i++) this._cbs[e][i](t)
            }

            function randomString(e, t) {
                var n;
                void 0 === t && (t = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890");
                var i = "";
                for (n = e; n > 0; --n) i += t[Math.round(Math.random() * (t.length - 1))];
                return i
            }

            function HSVtoRGB(e, t, n) {
                var i, a, r, o, s, l, c, u;
                switch (1 === arguments.length && (t = e.s, n = e.v, e = e.h), l = n * (1 - t), c = n * (1 - (s = 6 * e - (o = Math.floor(6 * e))) * t), u = n * (1 - (1 - s) * t), o % 6) {
                    case 0:
                        i = n, a = u, r = l;
                        break;
                    case 1:
                        i = c, a = n, r = l;
                        break;
                    case 2:
                        i = l, a = n, r = u;
                        break;
                    case 3:
                        i = l, a = c, r = n;
                        break;
                    case 4:
                        i = u, a = l, r = n;
                        break;
                    case 5:
                        i = n, a = l, r = c
                }
                return [i, a, r]
            }

            function RGBtoHSV(e, t, n) {
                1 === arguments.length && (t = e.g, n = e.b, e = e.r);
                var i, a = Math.max(e, t, n),
                    r = Math.min(e, t, n),
                    o = a - r,
                    s = 0 === a ? 0 : o / a,
                    l = a / 255;
                switch (a) {
                    case r:
                        i = 0;
                        break;
                    case e:
                        i = t - n + o * (t < n ? 6 : 0), i /= 6 * o;
                        break;
                    case t:
                        i = n - e + 2 * o, i /= 6 * o;
                        break;
                    case n:
                        i = e - t + 4 * o, i /= 6 * o
                }
                return [i, s, l]
            }

            function addSaturationToRGB(e, t) {
                var n = RGBtoHSV(255 * e[0], 255 * e[1], 255 * e[2]);
                return n[1] += t, n[1] > 1 ? n[1] = 1 : n[1] <= 0 && (n[1] = 0), HSVtoRGB(n[0], n[1], n[2])
            }

            function addBrightnessToRGB(e, t) {
                var n = RGBtoHSV(255 * e[0], 255 * e[1], 255 * e[2]);
                return n[2] += t, n[2] > 1 ? n[2] = 1 : n[2] < 0 && (n[2] = 0), HSVtoRGB(n[0], n[1], n[2])
            }

            function addHueToRGB(e, t) {
                var n = RGBtoHSV(255 * e[0], 255 * e[1], 255 * e[2]);
                return n[0] += t / 360, n[0] > 1 ? n[0] -= 1 : n[0] < 0 && (n[0] += 1), HSVtoRGB(n[0], n[1], n[2])
            }

            function componentToHex(e) {
                var t = e.toString(16);
                return 1 == t.length ? "0" + t : t
            }
            roundValues(!1);
            var rgbToHex = function() {
                var e, t, n = [];
                for (e = 0; e < 256; e += 1) t = e.toString(16), n[e] = 1 == t.length ? "0" + t : t;
                return function(e, t, i) {
                    return e < 0 && (e = 0), t < 0 && (t = 0), i < 0 && (i = 0), "#" + n[e] + n[t] + n[i]
                }
            }();

            function fillToRgba(e, t) {
                if (!cachedColors[e]) {
                    var n = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);
                    cachedColors[e] = parseInt(n[1], 16) + "," + parseInt(n[2], 16) + "," + parseInt(n[3], 16)
                }
                return "rgba(" + cachedColors[e] + "," + t + ")"
            }
            var fillColorToString = (colorMap = [], function(e, t) {
                    return void 0 !== t && (e[3] = t), colorMap[e[0]] || (colorMap[e[0]] = {}), colorMap[e[0]][e[1]] || (colorMap[e[0]][e[1]] = {}), colorMap[e[0]][e[1]][e[2]] || (colorMap[e[0]][e[1]][e[2]] = {}), colorMap[e[0]][e[1]][e[2]][e[3]] || (colorMap[e[0]][e[1]][e[2]][e[3]] = "rgba(" + e.join(",") + ")"), colorMap[e[0]][e[1]][e[2]][e[3]]
                }),
                colorMap;

            function RenderedFrame(e, t) {
                this.tr = e, this.o = t
            }

            function iterateDynamicProperties(e) {
                var t, n = this.dynamicProperties;
                for (t = 0; t < n; t += 1) this.dynamicProperties[t].getValue(e)
            }

            function reversePath(e) {
                var t, n, i = [],
                    a = [],
                    r = [],
                    o = {},
                    s = 0;
                e.c && (i[0] = e.o[0], a[0] = e.i[0], r[0] = e.v[0], s = 1);
                var l = (n = e.i.length) - 1;
                for (t = s; t < n; t += 1) i.push(e.o[l]), a.push(e.i[l]), r.push(e.v[l]), l -= 1;
                return o.i = i, o.o = a, o.v = r, o
            }
            var Matrix = function() {
                function e() {
                    return this.props[0] = 1, this.props[1] = 0, this.props[2] = 0, this.props[3] = 0, this.props[4] = 0, this.props[5] = 1, this.props[6] = 0, this.props[7] = 0, this.props[8] = 0, this.props[9] = 0, this.props[10] = 1, this.props[11] = 0, this.props[12] = 0, this.props[13] = 0, this.props[14] = 0, this.props[15] = 1, this
                }

                function t(e) {
                    if (0 === e) return this;
                    var t = Math.cos(e),
                        n = Math.sin(e);
                    return this._t(t, -n, 0, 0, n, t, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)
                }

                function n(e) {
                    if (0 === e) return this;
                    var t = Math.cos(e),
                        n = Math.sin(e);
                    return this._t(1, 0, 0, 0, 0, t, -n, 0, 0, n, t, 0, 0, 0, 0, 1)
                }

                function i(e) {
                    if (0 === e) return this;
                    var t = Math.cos(e),
                        n = Math.sin(e);
                    return this._t(t, 0, n, 0, 0, 1, 0, 0, -n, 0, t, 0, 0, 0, 0, 1)
                }

                function a(e) {
                    if (0 === e) return this;
                    var t = Math.cos(e),
                        n = Math.sin(e);
                    return this._t(t, -n, 0, 0, n, t, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)
                }

                function r(e, t) {
                    return this._t(1, t, e, 1, 0, 0)
                }

                function o(e, t) {
                    return this.shear(Math.tan(e), Math.tan(t))
                }

                function s(e, t) {
                    var n = Math.cos(t),
                        i = Math.sin(t);
                    return this._t(n, i, 0, 0, -i, n, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)._t(1, 0, 0, 0, Math.tan(e), 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)._t(n, -i, 0, 0, i, n, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)
                }

                function l(e, t, n) {
                    return n = isNaN(n) ? 1 : n, 1 == e && 1 == t && 1 == n ? this : this._t(e, 0, 0, 0, 0, t, 0, 0, 0, 0, n, 0, 0, 0, 0, 1)
                }

                function c(e, t, n, i, a, r, o, s, l, c, u, d, f, h, p, A) {
                    return this.props[0] = e, this.props[1] = t, this.props[2] = n, this.props[3] = i, this.props[4] = a, this.props[5] = r, this.props[6] = o, this.props[7] = s, this.props[8] = l, this.props[9] = c, this.props[10] = u, this.props[11] = d, this.props[12] = f, this.props[13] = h, this.props[14] = p, this.props[15] = A, this
                }

                function u(e, t, n) {
                    return n = n || 0, 0 !== e || 0 !== t || 0 !== n ? this._t(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, e, t, n, 1) : this
                }

                function d(e, t, n, i, a, r, o, s, l, c, u, d, f, h, p, A) {
                    if (1 === e && 0 === t && 0 === n && 0 === i && 0 === a && 1 === r && 0 === o && 0 === s && 0 === l && 0 === c && 1 === u && 0 === d) return 0 === f && 0 === h && 0 === p || (this.props[12] = this.props[12] * e + this.props[13] * a + this.props[14] * l + this.props[15] * f, this.props[13] = this.props[12] * t + this.props[13] * r + this.props[14] * c + this.props[15] * h, this.props[14] = this.props[12] * n + this.props[13] * o + this.props[14] * u + this.props[15] * p, this.props[15] = this.props[12] * i + this.props[13] * s + this.props[14] * d + this.props[15] * A), this._identityCalculated = !1, this;
                    var m = this.props[0],
                        _ = this.props[1],
                        v = this.props[2],
                        g = this.props[3],
                        y = this.props[4],
                        b = this.props[5],
                        w = this.props[6],
                        k = this.props[7],
                        E = this.props[8],
                        S = this.props[9],
                        C = this.props[10],
                        M = this.props[11],
                        P = this.props[12],
                        T = this.props[13],
                        D = this.props[14],
                        I = this.props[15];
                    return this.props[0] = m * e + _ * a + v * l + g * f, this.props[1] = m * t + _ * r + v * c + g * h, this.props[2] = m * n + _ * o + v * u + g * p, this.props[3] = m * i + _ * s + v * d + g * A, this.props[4] = y * e + b * a + w * l + k * f, this.props[5] = y * t + b * r + w * c + k * h, this.props[6] = y * n + b * o + w * u + k * p, this.props[7] = y * i + b * s + w * d + k * A, this.props[8] = E * e + S * a + C * l + M * f, this.props[9] = E * t + S * r + C * c + M * h, this.props[10] = E * n + S * o + C * u + M * p, this.props[11] = E * i + S * s + C * d + M * A, this.props[12] = P * e + T * a + D * l + I * f, this.props[13] = P * t + T * r + D * c + I * h, this.props[14] = P * n + T * o + D * u + I * p, this.props[15] = P * i + T * s + D * d + I * A, this._identityCalculated = !1, this
                }

                function f() {
                    return this._identityCalculated || (this._identity = !(1 !== this.props[0] || 0 !== this.props[1] || 0 !== this.props[2] || 0 !== this.props[3] || 0 !== this.props[4] || 1 !== this.props[5] || 0 !== this.props[6] || 0 !== this.props[7] || 0 !== this.props[8] || 0 !== this.props[9] || 1 !== this.props[10] || 0 !== this.props[11] || 0 !== this.props[12] || 0 !== this.props[13] || 0 !== this.props[14] || 1 !== this.props[15]), this._identityCalculated = !0), this._identity
                }

                function h(e) {
                    var t;
                    for (t = 0; t < 16; t += 1) e.props[t] = this.props[t]
                }

                function p(e) {
                    var t;
                    for (t = 0; t < 16; t += 1) this.props[t] = e[t]
                }

                function A(e, t, n) {
                    return {
                        x: e * this.props[0] + t * this.props[4] + n * this.props[8] + this.props[12],
                        y: e * this.props[1] + t * this.props[5] + n * this.props[9] + this.props[13],
                        z: e * this.props[2] + t * this.props[6] + n * this.props[10] + this.props[14]
                    }
                }

                function m(e, t, n) {
                    return e * this.props[0] + t * this.props[4] + n * this.props[8] + this.props[12]
                }

                function _(e, t, n) {
                    return e * this.props[1] + t * this.props[5] + n * this.props[9] + this.props[13]
                }

                function v(e, t, n) {
                    return e * this.props[2] + t * this.props[6] + n * this.props[10] + this.props[14]
                }

                function g(e) {
                    var t = this.props[0] * this.props[5] - this.props[1] * this.props[4],
                        n = this.props[5] / t,
                        i = -this.props[1] / t,
                        a = -this.props[4] / t,
                        r = this.props[0] / t,
                        o = (this.props[4] * this.props[13] - this.props[5] * this.props[12]) / t,
                        s = -(this.props[0] * this.props[13] - this.props[1] * this.props[12]) / t;
                    return [e[0] * n + e[1] * a + o, e[0] * i + e[1] * r + s, 0]
                }

                function y(e) {
                    var t, n = e.length,
                        i = [];
                    for (t = 0; t < n; t += 1) i[t] = g(e[t]);
                    return i
                }

                function b(e, t, n, i) {
                    if (i && 2 === i) {
                        var a = point_pool.newPoint();
                        return a[0] = e * this.props[0] + t * this.props[4] + n * this.props[8] + this.props[12], a[1] = e * this.props[1] + t * this.props[5] + n * this.props[9] + this.props[13], a
                    }
                    return [e * this.props[0] + t * this.props[4] + n * this.props[8] + this.props[12], e * this.props[1] + t * this.props[5] + n * this.props[9] + this.props[13], e * this.props[2] + t * this.props[6] + n * this.props[10] + this.props[14]]
                }

                function w(e, t) {
                    return this.isIdentity() ? e + "," + t : bm_rnd(e * this.props[0] + t * this.props[4] + this.props[12]) + "," + bm_rnd(e * this.props[1] + t * this.props[5] + this.props[13])
                }

                function k() {
                    return [this.props[0], this.props[1], this.props[2], this.props[3], this.props[4], this.props[5], this.props[6], this.props[7], this.props[8], this.props[9], this.props[10], this.props[11], this.props[12], this.props[13], this.props[14], this.props[15]]
                }

                function E() {
                    return isSafari ? "matrix3d(" + roundTo2Decimals(this.props[0]) + "," + roundTo2Decimals(this.props[1]) + "," + roundTo2Decimals(this.props[2]) + "," + roundTo2Decimals(this.props[3]) + "," + roundTo2Decimals(this.props[4]) + "," + roundTo2Decimals(this.props[5]) + "," + roundTo2Decimals(this.props[6]) + "," + roundTo2Decimals(this.props[7]) + "," + roundTo2Decimals(this.props[8]) + "," + roundTo2Decimals(this.props[9]) + "," + roundTo2Decimals(this.props[10]) + "," + roundTo2Decimals(this.props[11]) + "," + roundTo2Decimals(this.props[12]) + "," + roundTo2Decimals(this.props[13]) + "," + roundTo2Decimals(this.props[14]) + "," + roundTo2Decimals(this.props[15]) + ")" : (this.cssParts[1] = this.props.join(","), this.cssParts.join(""))
                }

                function S() {
                    return "matrix(" + roundTo2Decimals(this.props[0]) + "," + roundTo2Decimals(this.props[1]) + "," + roundTo2Decimals(this.props[4]) + "," + roundTo2Decimals(this.props[5]) + "," + roundTo2Decimals(this.props[12]) + "," + roundTo2Decimals(this.props[13]) + ")"
                }

                function C() {
                    return "" + this.toArray()
                }
                return function() {
                    this.reset = e, this.rotate = t, this.rotateX = n, this.rotateY = i, this.rotateZ = a, this.skew = o, this.skewFromAxis = s, this.shear = r, this.scale = l, this.setTransform = c, this.translate = u, this.transform = d, this.applyToPoint = A, this.applyToX = m, this.applyToY = _, this.applyToZ = v, this.applyToPointArray = b, this.applyToPointStringified = w, this.toArray = k, this.toCSS = E, this.to2dCSS = S, this.toString = C, this.clone = h, this.cloneFromProps = p, this.inversePoints = y, this.inversePoint = g, this._t = this.transform, this.isIdentity = f, this._identity = !0, this._identityCalculated = !1, this.props = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1], this.cssParts = ["matrix3d(", "", ")"]
                }
            }();

            function Matrix() {}! function(e, t) {
                var n, i = this,
                    a = 256,
                    r = 6,
                    o = "random",
                    s = t.pow(a, r),
                    l = t.pow(2, 52),
                    c = 2 * l,
                    u = a - 1;

                function d(e) {
                    var t, n = e.length,
                        i = this,
                        r = 0,
                        o = i.i = i.j = 0,
                        s = i.S = [];
                    for (n || (e = [n++]); r < a;) s[r] = r++;
                    for (r = 0; r < a; r++) s[r] = s[o = u & o + e[r % n] + (t = s[r])], s[o] = t;
                    (i.g = function(e) {
                        for (var t, n = 0, r = i.i, o = i.j, s = i.S; e--;) t = s[r = u & r + 1], n = n * a + s[u & (s[r] = s[o = u & o + t]) + (s[o] = t)];
                        return i.i = r, i.j = o, n
                    })(a)
                }

                function f(e, t) {
                    return t.i = e.i, t.j = e.j, t.S = e.S.slice(), t
                }

                function h(e, t) {
                    for (var n, i = e + "", a = 0; a < i.length;) t[u & a] = u & (n ^= 19 * t[u & a]) + i.charCodeAt(a++);
                    return p(t)
                }

                function p(e) {
                    return String.fromCharCode.apply(0, e)
                }
                t["seed" + o] = function(u, A, m) {
                    var _ = [],
                        v = h(function e(t, n) {
                            var i, a = [],
                                r = typeof t;
                            if (n && "object" == r)
                                for (i in t) try {
                                    a.push(e(t[i], n - 1))
                                } catch (e) {}
                            return a.length ? a : "string" == r ? t : t + "\0"
                        }((A = 1 == A ? {
                            entropy: !0
                        } : A || {}).entropy ? [u, p(e)] : null == u ? function() {
                            try {
                                if (n) return p(n.randomBytes(a));
                                var t = new Uint8Array(a);
                                return (i.crypto || i.msCrypto).getRandomValues(t), p(t)
                            } catch (t) {
                                var r = i.navigator,
                                    o = r && r.plugins;
                                return [+new Date, i, o, i.screen, p(e)]
                            }
                        }() : u, 3), _),
                        g = new d(_),
                        y = function() {
                            for (var e = g.g(r), t = s, n = 0; e < l;) e = (e + n) * a, t *= a, n = g.g(1);
                            for (; e >= c;) e /= 2, t /= 2, n >>>= 1;
                            return (e + n) / t
                        };
                    return y.int32 = function() {
                        return 0 | g.g(4)
                    }, y.quick = function() {
                        return g.g(4) / 4294967296
                    }, y.double = y, h(p(g.S), e), (A.pass || m || function(e, n, i, a) {
                        return a && (a.S && f(a, g), e.state = function() {
                            return f(g, {})
                        }), i ? (t[o] = e, n) : e
                    })(y, v, "global" in A ? A.global : this == t, A.state)
                }, h(t.random(), e)
            }([], BMMath);
            var BezierFactory = function() {
                var e = {
                        getBezierEasing: function(e, n, i, a, r) {
                            var o = r || ("bez_" + e + "_" + n + "_" + i + "_" + a).replace(/\./g, "p");
                            if (t[o]) return t[o];
                            var s = new h([e, n, i, a]);
                            return t[o] = s, s
                        }
                    },
                    t = {},
                    n = 4,
                    i = 1e-7,
                    a = 10,
                    r = 11,
                    o = 1 / (r - 1),
                    s = "function" == typeof Float32Array;

                function l(e, t) {
                    return 1 - 3 * t + 3 * e
                }

                function c(e, t) {
                    return 3 * t - 6 * e
                }

                function u(e) {
                    return 3 * e
                }

                function d(e, t, n) {
                    return ((l(t, n) * e + c(t, n)) * e + u(t)) * e
                }

                function f(e, t, n) {
                    return 3 * l(t, n) * e * e + 2 * c(t, n) * e + u(t)
                }

                function h(e) {
                    this._p = e, this._mSampleValues = s ? new Float32Array(r) : new Array(r), this._precomputed = !1, this.get = this.get.bind(this)
                }
                return h.prototype = {
                    get: function(e) {
                        var t = this._p[0],
                            n = this._p[1],
                            i = this._p[2],
                            a = this._p[3];
                        return this._precomputed || this._precompute(), t === n && i === a ? e : 0 === e ? 0 : 1 === e ? 1 : d(this._getTForX(e), n, a)
                    },
                    _precompute: function() {
                        var e = this._p[0],
                            t = this._p[1],
                            n = this._p[2],
                            i = this._p[3];
                        this._precomputed = !0, e === t && n === i || this._calcSampleValues()
                    },
                    _calcSampleValues: function() {
                        for (var e = this._p[0], t = this._p[2], n = 0; n < r; ++n) this._mSampleValues[n] = d(n * o, e, t)
                    },
                    _getTForX: function(e) {
                        for (var t = this._p[0], s = this._p[2], l = this._mSampleValues, c = 0, u = 1, h = r - 1; u !== h && l[u] <= e; ++u) c += o;
                        var p = c + (e - l[--u]) / (l[u + 1] - l[u]) * o,
                            A = f(p, t, s);
                        return A >= .001 ? function(e, t, i, a) {
                            for (var r = 0; r < n; ++r) {
                                var o = f(t, i, a);
                                if (0 === o) return t;
                                t -= (d(t, i, a) - e) / o
                            }
                            return t
                        }(e, p, t, s) : 0 === A ? p : function(e, t, n, r, o) {
                            var s, l, c = 0;
                            do {
                                (s = d(l = t + (n - t) / 2, r, o) - e) > 0 ? n = l : t = l
                            } while (Math.abs(s) > i && ++c < a);
                            return l
                        }(e, c, c + o, t, s)
                    }
                }, e
            }();

            function createElement(e, t, n) {
                if (!t) {
                    var i = Object.create(e.prototype, n);
                    return i && "[object Function]" === {}.toString.call(i.init) && i.init(), i
                }
                t.prototype = Object.create(e.prototype), t.prototype.constructor = t, t.prototype._parent = e.prototype
            }

            function extendPrototype(e, t) {
                for (var n in e.prototype) e.prototype.hasOwnProperty(n) && (t.prototype[n] = e.prototype[n])
            }

            function bezFunction() {
                function e(e, t, n, i, a, r) {
                    var o = e * i + t * a + n * r - a * i - r * e - n * t;
                    return o > -1e-4 && o < 1e-4
                }
                Math;
                var t = function() {
                    function e(e, t) {
                        this.l = e, this.p = t
                    }
                    return function(t, n, i, a) {
                        var r, o, s, l, c, u, d = defaultCurveSegments,
                            f = 0,
                            h = [],
                            p = [],
                            A = {
                                addedLength: 0,
                                segments: []
                            };
                        for (s = i.length, r = 0; r < d; r += 1) {
                            for (c = r / (d - 1), u = 0, o = 0; o < s; o += 1) l = bm_pow(1 - c, 3) * t[o] + 3 * bm_pow(1 - c, 2) * c * i[o] + 3 * (1 - c) * bm_pow(c, 2) * a[o] + bm_pow(c, 3) * n[o], h[o] = l, null !== p[o] && (u += bm_pow(h[o] - p[o], 2)), p[o] = h[o];
                            u && (f += u = bm_sqrt(u)), A.segments.push(new e(f, c))
                        }
                        return A.addedLength = f, A
                    }
                }();

                function n(e) {
                    this.segmentLength = 0, this.points = new Array(e)
                }

                function i(e, t) {
                    this.partialLength = e, this.point = t
                }
                var a, r = (a = {}, function(t) {
                    var r = t.s,
                        o = t.e,
                        s = t.to,
                        l = t.ti,
                        c = (r.join("_") + "_" + o.join("_") + "_" + s.join("_") + "_" + l.join("_")).replace(/\./g, "p");
                    if (a[c]) t.bezierData = a[c];
                    else {
                        var u, d, f, h, p, A, m, _ = defaultCurveSegments,
                            v = 0,
                            g = null;
                        2 === r.length && (r[0] != o[0] || r[1] != o[1]) && e(r[0], r[1], o[0], o[1], r[0] + s[0], r[1] + s[1]) && e(r[0], r[1], o[0], o[1], o[0] + l[0], o[1] + l[1]) && (_ = 2);
                        var y = new n(_);
                        for (f = s.length, u = 0; u < _; u += 1) {
                            for (m = new Array(f), p = u / (_ - 1), A = 0, d = 0; d < f; d += 1) h = bm_pow(1 - p, 3) * r[d] + 3 * bm_pow(1 - p, 2) * p * (r[d] + s[d]) + 3 * (1 - p) * bm_pow(p, 2) * (o[d] + l[d]) + bm_pow(p, 3) * o[d], m[d] = h, null !== g && (A += bm_pow(m[d] - g[d], 2));
                            v += A = bm_sqrt(A), y.points[u] = new i(A, m), g = m
                        }
                        y.segmentLength = v, t.bezierData = y, a[c] = y
                    }
                });

                function o(e, t) {
                    var n = t.segments,
                        i = n.length,
                        a = bm_floor((i - 1) * e),
                        r = e * t.addedLength,
                        o = 0;
                    if (r == n[a].l) return n[a].p;
                    for (var s = n[a].l > r ? -1 : 1, l = !0; l;) n[a].l <= r && n[a + 1].l > r ? (o = (r - n[a].l) / (n[a + 1].l - n[a].l), l = !1) : a += s, (a < 0 || a >= i - 1) && (l = !1);
                    return n[a].p + (n[a + 1].p - n[a].p) * o
                }

                function s() {
                    this.pt1 = new Array(2), this.pt2 = new Array(2), this.pt3 = new Array(2), this.pt4 = new Array(2)
                }
                return {
                    getBezierLength: t,
                    getSegmentsLength: function(e) {
                        var n, i = e.c,
                            a = e.v,
                            r = e.o,
                            o = e.i,
                            s = e._length,
                            l = [],
                            c = 0;
                        for (n = 0; n < s - 1; n += 1) l[n] = t(a[n], a[n + 1], r[n], o[n + 1]), c += l[n].addedLength;
                        return i && (l[n] = t(a[n], a[0], r[n], o[0]), c += l[n].addedLength), {
                            lengths: l,
                            totalLength: c
                        }
                    },
                    getNewSegment: function(e, t, n, i, a, r, l) {
                        var c, u = new s,
                            d = o(a = a < 0 ? 0 : a > 1 ? 1 : a, l),
                            f = o(r = r > 1 ? 1 : r, l),
                            h = e.length,
                            p = 1 - d,
                            A = 1 - f;
                        for (c = 0; c < h; c += 1) u.pt1[c] = Math.round(1e3 * (p * p * p * e[c] + (d * p * p + p * d * p + p * p * d) * n[c] + (d * d * p + p * d * d + d * p * d) * i[c] + d * d * d * t[c])) / 1e3, u.pt3[c] = Math.round(1e3 * (p * p * A * e[c] + (d * p * A + p * d * A + p * p * f) * n[c] + (d * d * A + p * d * f + d * p * f) * i[c] + d * d * f * t[c])) / 1e3, u.pt4[c] = Math.round(1e3 * (p * A * A * e[c] + (d * A * A + p * f * A + p * A * f) * n[c] + (d * f * A + p * f * f + d * A * f) * i[c] + d * f * f * t[c])) / 1e3, u.pt2[c] = Math.round(1e3 * (A * A * A * e[c] + (f * A * A + A * f * A + A * A * f) * n[c] + (f * f * A + A * f * f + f * A * f) * i[c] + f * f * f * t[c])) / 1e3;
                        return u
                    },
                    getPointInSegment: function(e, t, n, i, a, r) {
                        var s = o(a, r),
                            l = 1 - s;
                        return [Math.round(1e3 * (l * l * l * e[0] + (s * l * l + l * s * l + l * l * s) * n[0] + (s * s * l + l * s * s + s * l * s) * i[0] + s * s * s * t[0])) / 1e3, Math.round(1e3 * (l * l * l * e[1] + (s * l * l + l * s * l + l * l * s) * n[1] + (s * s * l + l * s * s + s * l * s) * i[1] + s * s * s * t[1])) / 1e3]
                    },
                    buildBezierData: r,
                    pointOnLine2D: e,
                    pointOnLine3D: function(t, n, i, a, r, o, s, l, c) {
                        if (0 === i && 0 === o && 0 === c) return e(t, n, a, r, s, l);
                        var u, d = Math.sqrt(Math.pow(a - t, 2) + Math.pow(r - n, 2) + Math.pow(o - i, 2)),
                            f = Math.sqrt(Math.pow(s - t, 2) + Math.pow(l - n, 2) + Math.pow(c - i, 2)),
                            h = Math.sqrt(Math.pow(s - a, 2) + Math.pow(l - r, 2) + Math.pow(c - o, 2));
                        return (u = d > f ? d > h ? d - f - h : h - f - d : h > f ? h - f - d : f - d - h) > -1e-4 && u < 1e-4
                    }
                }
            }! function() {
                for (var e = 0, t = ["ms", "moz", "webkit", "o"], n = 0; n < t.length && !window.requestAnimationFrame; ++n) window.requestAnimationFrame = window[t[n] + "RequestAnimationFrame"], window.cancelAnimationFrame = window[t[n] + "CancelAnimationFrame"] || window[t[n] + "CancelRequestAnimationFrame"];
                window.requestAnimationFrame || (window.requestAnimationFrame = function(t, n) {
                    var i = (new Date).getTime(),
                        a = Math.max(0, 16 - (i - e)),
                        r = setTimeout(function() {
                            t(i + a)
                        }, a);
                    return e = i + a, r
                }), window.cancelAnimationFrame || (window.cancelAnimationFrame = function(e) {
                    clearTimeout(e)
                })
            }();
            var bez = bezFunction();

            function dataFunctionManager() {
                function e(e, t) {
                    for (var n = 0, i = t.length; n < i;) {
                        if (t[n].id === e) return t[n].layers.__used ? JSON.parse(JSON.stringify(t[n].layers)) : (t[n].layers.__used = !0, t[n].layers);
                        n += 1
                    }
                }

                function t(e) {
                    var i, a, r;
                    for (i = e.length - 1; i >= 0; i -= 1)
                        if ("sh" == e[i].ty)
                            if (e[i].ks.k.i) n(e[i].ks.k);
                            else
                                for (r = e[i].ks.k.length, a = 0; a < r; a += 1) e[i].ks.k[a].s && n(e[i].ks.k[a].s[0]), e[i].ks.k[a].e && n(e[i].ks.k[a].e[0]);
                    else "gr" == e[i].ty && t(e[i].it)
                }

                function n(e) {
                    var t, n = e.i.length;
                    for (t = 0; t < n; t += 1) e.i[t][0] += e.v[t][0], e.i[t][1] += e.v[t][1], e.o[t][0] += e.v[t][0], e.o[t][1] += e.v[t][1]
                }

                function i(e, t) {
                    var n = t ? t.split(".") : [100, 100, 100];
                    return e[0] > n[0] || !(n[0] > e[0]) && (e[1] > n[1] || !(n[1] > e[1]) && (e[2] > n[2] || !(n[2] > e[2]) && void 0))
                }
                var a, r = function() {
                        var e = [4, 4, 14];

                        function t(e) {
                            var t, n, i, a = e.length;
                            for (t = 0; t < a; t += 1) 5 === e[t].ty && (n = e[t], i = void 0, i = n.t.d, n.t.d = {
                                k: [{
                                    s: i,
                                    t: 0
                                }]
                            })
                        }
                        return function(n) {
                            if (i(e, n.v) && (t(n.layers), n.assets)) {
                                var a, r = n.assets.length;
                                for (a = 0; a < r; a += 1) n.assets[a].layers && t(n.assets[a].layers)
                            }
                        }
                    }(),
                    o = (a = [4, 7, 99], function(e) {
                        if (e.chars && !i(a, e.v)) {
                            var t, r, o, s, l, c = e.chars.length;
                            for (t = 0; t < c; t += 1)
                                if (e.chars[t].data && e.chars[t].data.shapes)
                                    for (o = (l = e.chars[t].data.shapes[0].it).length, r = 0; r < o; r += 1)(s = l[r].ks.k).__converted || (n(l[r].ks.k), s.__converted = !0)
                        }
                    }),
                    s = function() {
                        var e = [4, 1, 9];

                        function t(e) {
                            var n, i, a, r = e.length;
                            for (n = 0; n < r; n += 1)
                                if ("gr" === e[n].ty) t(e[n].it);
                                else if ("fl" === e[n].ty || "st" === e[n].ty)
                                if (e[n].c.k && e[n].c.k[0].i)
                                    for (a = e[n].c.k.length, i = 0; i < a; i += 1) e[n].c.k[i].s && (e[n].c.k[i].s[0] /= 255, e[n].c.k[i].s[1] /= 255, e[n].c.k[i].s[2] /= 255, e[n].c.k[i].s[3] /= 255), e[n].c.k[i].e && (e[n].c.k[i].e[0] /= 255, e[n].c.k[i].e[1] /= 255, e[n].c.k[i].e[2] /= 255, e[n].c.k[i].e[3] /= 255);
                                else e[n].c.k[0] /= 255, e[n].c.k[1] /= 255, e[n].c.k[2] /= 255, e[n].c.k[3] /= 255
                        }

                        function n(e) {
                            var n, i = e.length;
                            for (n = 0; n < i; n += 1) 4 === e[n].ty && t(e[n].shapes)
                        }
                        return function(t) {
                            if (i(e, t.v) && (n(t.layers), t.assets)) {
                                var a, r = t.assets.length;
                                for (a = 0; a < r; a += 1) t.assets[a].layers && n(t.assets[a].layers)
                            }
                        }
                    }(),
                    l = function() {
                        var e = [4, 4, 18];

                        function t(e) {
                            var n, i, a;
                            for (n = e.length - 1; n >= 0; n -= 1)
                                if ("sh" == e[n].ty)
                                    if (e[n].ks.k.i) e[n].ks.k.c = e[n].closed;
                                    else
                                        for (a = e[n].ks.k.length, i = 0; i < a; i += 1) e[n].ks.k[i].s && (e[n].ks.k[i].s[0].c = e[n].closed), e[n].ks.k[i].e && (e[n].ks.k[i].e[0].c = e[n].closed);
                            else "gr" == e[n].ty && t(e[n].it)
                        }

                        function n(e) {
                            var n, i, a, r, o, s, l = e.length;
                            for (i = 0; i < l; i += 1) {
                                if ((n = e[i]).hasMask) {
                                    var c = n.masksProperties;
                                    for (r = c.length, a = 0; a < r; a += 1)
                                        if (c[a].pt.k.i) c[a].pt.k.c = c[a].cl;
                                        else
                                            for (s = c[a].pt.k.length, o = 0; o < s; o += 1) c[a].pt.k[o].s && (c[a].pt.k[o].s[0].c = c[a].cl), c[a].pt.k[o].e && (c[a].pt.k[o].e[0].c = c[a].cl)
                                }
                                4 === n.ty && t(n.shapes)
                            }
                        }
                        return function(t) {
                            if (i(e, t.v) && (n(t.layers), t.assets)) {
                                var a, r = t.assets.length;
                                for (a = 0; a < r; a += 1) t.assets[a].layers && n(t.assets[a].layers)
                            }
                        }
                    }();

                function c(e, t) {
                    0 !== e.t.a.length || "m" in e.t.p || (e.singleShape = !0)
                }
                var u = {};
                return u.completeData = function(i, a) {
                    i.__complete || (s(i), r(i), o(i), l(i), function i(a, r, o) {
                        var s, l, u, d, f, h, p = a.length;
                        for (l = 0; l < p; l += 1)
                            if ("ks" in (s = a[l]) && !s.completed) {
                                if (s.completed = !0, s.tt && (a[l - 1].td = s.tt), s.hasMask) {
                                    var A = s.masksProperties;
                                    for (d = A.length, u = 0; u < d; u += 1)
                                        if (A[u].pt.k.i) n(A[u].pt.k);
                                        else
                                            for (h = A[u].pt.k.length, f = 0; f < h; f += 1) A[u].pt.k[f].s && n(A[u].pt.k[f].s[0]), A[u].pt.k[f].e && n(A[u].pt.k[f].e[0])
                                }
                                0 === s.ty ? (s.layers = e(s.refId, r), i(s.layers, r, o)) : 4 === s.ty ? t(s.shapes) : 5 == s.ty && c(s)
                            }
                    }(i.layers, i.assets, a), i.__complete = !0)
                }, u
            }
            var dataManager = dataFunctionManager(),
                FontManager = function() {
                    var e = 5e3;

                    function t(e, t) {
                        var n = document.createElement("span");
                        n.style.fontFamily = t;
                        var i = document.createElement("span");
                        i.innerHTML = "giItT1WQy@!-/#", n.style.position = "absolute", n.style.left = "-10000px", n.style.top = "-10000px", n.style.fontSize = "300px", n.style.fontVariant = "normal", n.style.fontStyle = "normal", n.style.fontWeight = "normal", n.style.letterSpacing = "0", n.appendChild(i), document.body.appendChild(n);
                        var a = i.offsetWidth;
                        return i.style.fontFamily = e + ", " + t, {
                            node: i,
                            w: a,
                            parent: n
                        }
                    }

                    function n(e, t) {
                        var n = document.createElementNS(svgNS, "text");
                        n.style.fontSize = "100px", n.style.fontFamily = t.fFamily, n.textContent = "1", t.fClass ? (n.style.fontFamily = "inherit", n.className = t.fClass) : n.style.fontFamily = t.fFamily, e.appendChild(n);
                        var i = document.createElement("canvas").getContext("2d");
                        return i.font = "100px " + t.fFamily, i
                    }
                    var i = function() {
                        this.fonts = [], this.chars = null, this.typekitLoaded = 0, this.loaded = !1, this.initTime = Date.now()
                    };
                    return i.prototype.addChars = function(e) {
                        if (e) {
                            this.chars || (this.chars = []);
                            var t, n, i, a = e.length,
                                r = this.chars.length;
                            for (t = 0; t < a; t += 1) {
                                for (n = 0, i = !1; n < r;) this.chars[n].style === e[t].style && this.chars[n].fFamily === e[t].fFamily && this.chars[n].ch === e[t].ch && (i = !0), n += 1;
                                i || (this.chars.push(e[t]), r += 1)
                            }
                        }
                    }, i.prototype.addFonts = function(i, a) {
                        if (i) {
                            if (this.chars) return this.loaded = !0, void(this.fonts = i.list);
                            var r, o = i.list,
                                s = o.length;
                            for (r = 0; r < s; r += 1) {
                                if (o[r].loaded = !1, o[r].monoCase = t(o[r].fFamily, "monospace"), o[r].sansCase = t(o[r].fFamily, "sans-serif"), o[r].fPath) {
                                    if ("p" === o[r].fOrigin || 3 === o[r].origin) {
                                        var l = document.createElement("style");
                                        l.type = "text/css", l.innerHTML = "@font-face {font-family: " + o[r].fFamily + "; font-style: normal; src: url('" + o[r].fPath + "');}", a.appendChild(l)
                                    } else if ("g" === o[r].fOrigin || 1 === o[r].origin) {
                                        var c = document.createElement("link");
                                        c.type = "text/css", c.rel = "stylesheet", c.href = o[r].fPath, a.appendChild(c)
                                    } else if ("t" === o[r].fOrigin || 2 === o[r].origin) {
                                        var u = document.createElement("script");
                                        u.setAttribute("src", o[r].fPath), a.appendChild(u)
                                    }
                                } else o[r].loaded = !0;
                                o[r].helper = n(a, o[r]), this.fonts.push(o[r])
                            }(function t() {
                                var n, i, a, r = this.fonts.length,
                                    o = r;
                                for (n = 0; n < r; n += 1)
                                    if (this.fonts[n].loaded) o -= 1;
                                    else if ("t" === this.fonts[n].fOrigin || 2 === this.fonts[n].origin) {
                                    if (window.Typekit && window.Typekit.load && 0 === this.typekitLoaded) {
                                        this.typekitLoaded = 1;
                                        try {
                                            window.Typekit.load({
                                                async: !0,
                                                active: function() {
                                                    this.typekitLoaded = 2
                                                }.bind(this)
                                            })
                                        } catch (e) {}
                                    }
                                    2 === this.typekitLoaded && (this.fonts[n].loaded = !0)
                                } else "n" === this.fonts[n].fOrigin || 0 === this.fonts[n].origin ? this.fonts[n].loaded = !0 : (i = this.fonts[n].monoCase.node, a = this.fonts[n].monoCase.w, i.offsetWidth !== a ? (o -= 1, this.fonts[n].loaded = !0) : (i = this.fonts[n].sansCase.node, a = this.fonts[n].sansCase.w, i.offsetWidth !== a && (o -= 1, this.fonts[n].loaded = !0)), this.fonts[n].loaded && (this.fonts[n].sansCase.parent.parentNode.removeChild(this.fonts[n].sansCase.parent), this.fonts[n].monoCase.parent.parentNode.removeChild(this.fonts[n].monoCase.parent)));
                                0 !== o && Date.now() - this.initTime < e ? setTimeout(t.bind(this), 20) : setTimeout(function() {
                                    this.loaded = !0
                                }.bind(this), 0)
                            }).bind(this)()
                        } else this.loaded = !0
                    }, i.prototype.getCharData = function(e, t, n) {
                        for (var i = 0, a = this.chars.length; i < a;) {
                            if (this.chars[i].ch === e && this.chars[i].style === t && this.chars[i].fFamily === n) return this.chars[i];
                            i += 1
                        }
                    }, i.prototype.getFontByName = function(e) {
                        for (var t = 0, n = this.fonts.length; t < n;) {
                            if (this.fonts[t].fName === e) return this.fonts[t];
                            t += 1
                        }
                        return "sans-serif"
                    }, i.prototype.measureText = function(e, t, n) {
                        return this.getFontByName(t).helper.measureText(e).width * n / 100
                    }, i
                }(),
                PropertyFactory = function() {
                    var e = -999999;

                    function t(e, t, n, i) {
                        var a, r = this.offsetTime;
                        n.constructor === Array && (a = Array.apply(null, {
                            length: n.length
                        }));
                        for (var o, s, l, c, u, d, f, h, p = t, A = this.keyframes.length - 1, m = !0; m;) {
                            if (o = this.keyframes[p], s = this.keyframes[p + 1], p == A - 1 && e >= s.t - r) {
                                o.h && (o = s), t = 0;
                                break
                            }
                            if (s.t - r > e) {
                                t = p;
                                break
                            }
                            p < A - 1 ? p += 1 : (t = 0, m = !1)
                        }
                        if (o.to) {
                            o.bezierData || bez.buildBezierData(o);
                            var _ = o.bezierData;
                            if (e >= s.t - r || e < o.t - r) {
                                var v = e >= s.t - r ? _.points.length - 1 : 0;
                                for (c = _.points[v].point.length, l = 0; l < c; l += 1) a[l] = _.points[v].point[l];
                                i._lastBezierData = null
                            } else {
                                o.__fnct ? h = o.__fnct : (h = BezierFactory.getBezierEasing(o.o.x, o.o.y, o.i.x, o.i.y, o.n).get, o.__fnct = h), u = h((e - (o.t - r)) / (s.t - r - (o.t - r)));
                                var g, y = _.segmentLength * u,
                                    b = i.lastFrame < e && i._lastBezierData === _ ? i._lastAddedLength : 0;
                                for (f = i.lastFrame < e && i._lastBezierData === _ ? i._lastPoint : 0, m = !0, d = _.points.length; m;) {
                                    if (b += _.points[f].partialLength, 0 === y || 0 === u || f == _.points.length - 1) {
                                        for (c = _.points[f].point.length, l = 0; l < c; l += 1) a[l] = _.points[f].point[l];
                                        break
                                    }
                                    if (y >= b && y < b + _.points[f + 1].partialLength) {
                                        for (g = (y - b) / _.points[f + 1].partialLength, c = _.points[f].point.length, l = 0; l < c; l += 1) a[l] = _.points[f].point[l] + (_.points[f + 1].point[l] - _.points[f].point[l]) * g;
                                        break
                                    }
                                    f < d - 1 ? f += 1 : m = !1
                                }
                                i._lastPoint = f, i._lastAddedLength = b - _.points[f].partialLength, i._lastBezierData = _
                            }
                        } else {
                            var w, k, E, S, C;
                            for (A = o.s.length, p = 0; p < A; p += 1) {
                                if (1 !== o.h && (e >= s.t - r ? u = 1 : e < o.t - r ? u = 0 : (o.o.x.constructor === Array ? (o.__fnct || (o.__fnct = []), o.__fnct[p] ? h = o.__fnct[p] : (w = o.o.x[p] || o.o.x[0], k = o.o.y[p] || o.o.y[0], E = o.i.x[p] || o.i.x[0], S = o.i.y[p] || o.i.y[0], h = BezierFactory.getBezierEasing(w, k, E, S).get, o.__fnct[p] = h)) : o.__fnct ? h = o.__fnct : (w = o.o.x, k = o.o.y, E = o.i.x, S = o.i.y, h = BezierFactory.getBezierEasing(w, k, E, S).get, o.__fnct = h), u = h((e - (o.t - r)) / (s.t - r - (o.t - r))))), this.sh && 1 !== o.h) {
                                    var M = o.s[p],
                                        P = o.e[p];
                                    M - P < -180 ? M += 360 : M - P > 180 && (M -= 360), C = M + (P - M) * u
                                } else C = 1 === o.h ? o.s[p] : o.s[p] + (o.e[p] - o.s[p]) * u;
                                1 === A ? a = C : a[p] = C
                            }
                        }
                        return {
                            value: a,
                            iterationIndex: t
                        }
                    }

                    function n() {
                        if (this.elem.globalData.frameId !== this.frameId) {
                            this.mdf = !1;
                            var t = this.comp.renderedFrame - this.offsetTime,
                                n = this.keyframes[0].t - this.offsetTime,
                                i = this.keyframes[this.keyframes.length - 1].t - this.offsetTime;
                            if (!(t === this._caching.lastFrame || this._caching.lastFrame !== e && (this._caching.lastFrame >= i && t >= i || this._caching.lastFrame < n && t < n))) {
                                var a = this._caching.lastFrame < t ? this._caching.lastIndex : 0,
                                    r = this.interpolateValue(t, a, this.pv, this._caching);
                                if (this._caching.lastIndex = r.iterationIndex, this.pv.constructor === Array)
                                    for (a = 0; a < this.v.length;) this.pv[a] = r.value[a], this.v[a] = this.mult ? this.pv[a] * this.mult : this.pv[a], this.lastPValue[a] !== this.pv[a] && (this.mdf = !0, this.lastPValue[a] = this.pv[a]), a += 1;
                                else this.pv = r.value, this.v = this.mult ? this.pv * this.mult : this.pv, this.lastPValue != this.pv && (this.mdf = !0, this.lastPValue = this.pv)
                            }
                            this._caching.lastFrame = t, this.frameId = this.elem.globalData.frameId
                        }
                    }

                    function i() {}

                    function a(e, t, n) {
                        this.mult = n, this.v = n ? t.k * n : t.k, this.pv = t.k, this.mdf = !1, this.comp = e.comp, this.k = !1, this.kf = !1, this.vel = 0, this.getValue = i
                    }

                    function r(e, t, n) {
                        this.mult = n, this.data = t, this.mdf = !1, this.comp = e.comp, this.k = !1, this.kf = !1, this.frameId = -1, this.v = Array.apply(null, {
                            length: t.k.length
                        }), this.pv = Array.apply(null, {
                            length: t.k.length
                        }), this.lastValue = Array.apply(null, {
                            length: t.k.length
                        });
                        var a = Array.apply(null, {
                            length: t.k.length
                        });
                        this.vel = a.map(function() {
                            return 0
                        });
                        var r, o = t.k.length;
                        for (r = 0; r < o; r += 1) this.v[r] = n ? t.k[r] * n : t.k[r], this.pv[r] = t.k[r];
                        this.getValue = i
                    }

                    function o(i, a, r) {
                        this.keyframes = a.k, this.offsetTime = i.data.st, this.lastValue = -99999, this.lastPValue = -99999, this.frameId = -1, this._caching = {
                            lastFrame: e,
                            lastIndex: 0
                        }, this.k = !0, this.kf = !0, this.data = a, this.mult = r, this.elem = i, this.comp = i.comp, this.v = r ? a.k[0].s[0] * r : a.k[0].s[0], this.pv = a.k[0].s[0], this.getValue = n, this.interpolateValue = t
                    }

                    function s(i, a, r) {
                        var o, s, l, c, u, d = a.k.length;
                        for (o = 0; o < d - 1; o += 1) a.k[o].to && a.k[o].s && a.k[o].e && (s = a.k[o].s, l = a.k[o].e, c = a.k[o].to, u = a.k[o].ti, (2 === s.length && (s[0] !== l[0] || s[1] !== l[1]) && bez.pointOnLine2D(s[0], s[1], l[0], l[1], s[0] + c[0], s[1] + c[1]) && bez.pointOnLine2D(s[0], s[1], l[0], l[1], l[0] + u[0], l[1] + u[1]) || 3 === s.length && (s[0] !== l[0] || s[1] !== l[1] || s[2] !== l[2]) && bez.pointOnLine3D(s[0], s[1], s[2], l[0], l[1], l[2], s[0] + c[0], s[1] + c[1], s[2] + c[2]) && bez.pointOnLine3D(s[0], s[1], s[2], l[0], l[1], l[2], l[0] + u[0], l[1] + u[1], l[2] + u[2])) && (a.k[o].to = null, a.k[o].ti = null));
                        this.keyframes = a.k, this.offsetTime = i.data.st, this.k = !0, this.kf = !0, this.mult = r, this.elem = i, this.comp = i.comp, this._caching = {
                            lastFrame: e,
                            lastIndex: 0
                        }, this.getValue = n, this.interpolateValue = t, this.frameId = -1, this.v = Array.apply(null, {
                            length: a.k[0].s.length
                        }), this.pv = Array.apply(null, {
                            length: a.k[0].s.length
                        }), this.lastValue = Array.apply(null, {
                            length: a.k[0].s.length
                        }), this.lastPValue = Array.apply(null, {
                            length: a.k[0].s.length
                        })
                    }
                    var l = function() {
                        function e() {
                            return this.p ? ExpressionValue(this.p) : [this.px.v, this.py.v, this.pz ? this.pz.v : 0]
                        }

                        function t() {
                            return ExpressionValue(this.px)
                        }

                        function n() {
                            return ExpressionValue(this.py)
                        }

                        function i() {
                            return ExpressionValue(this.a)
                        }

                        function a() {
                            return ExpressionValue(this.or)
                        }

                        function r() {
                            return this.r ? ExpressionValue(this.r, 1 / degToRads) : ExpressionValue(this.rz, 1 / degToRads)
                        }

                        function o() {
                            return ExpressionValue(this.s, 100)
                        }

                        function s() {
                            return ExpressionValue(this.o, 100)
                        }

                        function l() {
                            return ExpressionValue(this.sk)
                        }

                        function c() {
                            return ExpressionValue(this.sa)
                        }

                        function u(e) {
                            var t, n = this.dynamicProperties.length;
                            for (t = 0; t < n; t += 1) this.dynamicProperties[t].getValue(), this.dynamicProperties[t].mdf && (this.mdf = !0);
                            this.a && e.translate(-this.a.v[0], -this.a.v[1], this.a.v[2]), this.s && e.scale(this.s.v[0], this.s.v[1], this.s.v[2]), this.r ? e.rotate(-this.r.v) : e.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]), this.data.p.s ? this.data.p.z ? e.translate(this.px.v, this.py.v, -this.pz.v) : e.translate(this.px.v, this.py.v, 0) : e.translate(this.p.v[0], this.p.v[1], -this.p.v[2])
                        }

                        function d() {
                            if (this.elem.globalData.frameId !== this.frameId) {
                                this.mdf = !1;
                                var e, t, n, i = this.dynamicProperties.length;
                                for (e = 0; e < i; e += 1) this.dynamicProperties[e].getValue(), this.dynamicProperties[e].mdf && (this.mdf = !0);
                                if (this.mdf) this.v.reset(), this.a && this.v.translate(-this.a.v[0], -this.a.v[1], this.a.v[2]), this.s && this.v.scale(this.s.v[0], this.s.v[1], this.s.v[2]), this.sk && this.v.skewFromAxis(-this.sk.v, this.sa.v), this.r ? this.v.rotate(-this.r.v) : this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]), this.autoOriented && this.p.keyframes && this.p.getValueAtTime && (this.p._caching.lastFrame + this.p.offsetTime <= this.p.keyframes[0].t ? (t = this.p.getValueAtTime((this.p.keyframes[0].t + .01) / this.elem.globalData.frameRate, 0), n = this.p.getValueAtTime(this.p.keyframes[0].t / this.elem.globalData.frameRate, 0)) : this.p._caching.lastFrame + this.p.offsetTime >= this.p.keyframes[this.p.keyframes.length - 1].t ? (t = this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length - 1].t / this.elem.globalData.frameRate, 0), n = this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length - 1].t - .01) / this.elem.globalData.frameRate, 0)) : (t = this.p.pv, n = this.p.getValueAtTime((this.p._caching.lastFrame + this.p.offsetTime - .01) / this.elem.globalData.frameRate, this.p.offsetTime)), this.v.rotate(-Math.atan2(t[1] - n[1], t[0] - n[0]))), this.data.p.s ? this.data.p.z ? this.v.translate(this.px.v, this.py.v, -this.pz.v) : this.v.translate(this.px.v, this.py.v, 0) : this.v.translate(this.p.v[0], this.p.v[1], -this.p.v[2]);
                                this.frameId = this.elem.globalData.frameId
                            }
                        }

                        function f() {
                            this.inverted = !0, this.iv = new Matrix, this.k || (this.data.p.s ? this.iv.translate(this.px.v, this.py.v, -this.pz.v) : this.iv.translate(this.p.v[0], this.p.v[1], -this.p.v[2]), this.r ? this.iv.rotate(-this.r.v) : this.iv.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v), this.s && this.iv.scale(this.s.v[0], this.s.v[1], 1), this.a && this.iv.translate(-this.a.v[0], -this.a.v[1], this.a.v[2]))
                        }

                        function h() {}
                        return function(p, A, m) {
                            this.elem = p, this.frameId = -1, this.type = "transform", this.dynamicProperties = [], this.mdf = !1, this.data = A, this.getValue = d, this.applyToMatrix = u, this.setInverted = f, this.autoOrient = h, this.v = new Matrix, A.p.s ? (this.px = PropertyFactory.getProp(p, A.p.x, 0, 0, this.dynamicProperties), this.py = PropertyFactory.getProp(p, A.p.y, 0, 0, this.dynamicProperties), A.p.z && (this.pz = PropertyFactory.getProp(p, A.p.z, 0, 0, this.dynamicProperties))) : this.p = PropertyFactory.getProp(p, A.p, 1, 0, this.dynamicProperties), A.r ? this.r = PropertyFactory.getProp(p, A.r, 0, degToRads, this.dynamicProperties) : A.rx && (this.rx = PropertyFactory.getProp(p, A.rx, 0, degToRads, this.dynamicProperties), this.ry = PropertyFactory.getProp(p, A.ry, 0, degToRads, this.dynamicProperties), this.rz = PropertyFactory.getProp(p, A.rz, 0, degToRads, this.dynamicProperties), this.or = PropertyFactory.getProp(p, A.or, 1, degToRads, this.dynamicProperties), this.or.sh = !0), A.sk && (this.sk = PropertyFactory.getProp(p, A.sk, 0, degToRads, this.dynamicProperties), this.sa = PropertyFactory.getProp(p, A.sa, 0, degToRads, this.dynamicProperties)), A.a && (this.a = PropertyFactory.getProp(p, A.a, 1, 0, this.dynamicProperties)), A.s && (this.s = PropertyFactory.getProp(p, A.s, 1, .01, this.dynamicProperties)), A.o ? this.o = PropertyFactory.getProp(p, A.o, 0, .01, this.dynamicProperties) : this.o = {
                                mdf: !1,
                                v: 1
                            }, this.dynamicProperties.length ? m.push(this) : (this.a && this.v.translate(-this.a.v[0], -this.a.v[1], this.a.v[2]), this.s && this.v.scale(this.s.v[0], this.s.v[1], this.s.v[2]), this.sk && this.v.skewFromAxis(-this.sk.v, this.sa.v), this.r ? this.v.rotate(-this.r.v) : this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]), this.data.p.s ? A.p.z ? this.v.translate(this.px.v, this.py.v, -this.pz.v) : this.v.translate(this.px.v, this.py.v, 0) : this.v.translate(this.p.v[0], this.p.v[1], -this.p.v[2])), Object.defineProperty(this, "position", {
                                get: e
                            }), Object.defineProperty(this, "xPosition", {
                                get: t
                            }), Object.defineProperty(this, "yPosition", {
                                get: n
                            }), Object.defineProperty(this, "orientation", {
                                get: a
                            }), Object.defineProperty(this, "anchorPoint", {
                                get: i
                            }), Object.defineProperty(this, "rotation", {
                                get: r
                            }), Object.defineProperty(this, "scale", {
                                get: o
                            }), Object.defineProperty(this, "opacity", {
                                get: s
                            }), Object.defineProperty(this, "skew", {
                                get: l
                            }), Object.defineProperty(this, "skewAxis", {
                                get: c
                            })
                        }
                    }();

                    function c(e, t, n, i, c) {
                        var u;
                        if (2 === n) u = new l(e, t, c);
                        else if (0 === t.a) u = 0 === n ? new a(e, t, i) : new r(e, t, i);
                        else if (1 === t.a) u = 0 === n ? new o(e, t, i) : new s(e, t, i);
                        else if (t.k.length)
                            if ("number" == typeof t.k[0]) u = new r(e, t, i);
                            else switch (n) {
                                case 0:
                                    u = new o(e, t, i);
                                    break;
                                case 1:
                                    u = new s(e, t, i)
                            } else u = new a(e, t, i);
                        return u.k && c.push(u), u
                    }
                    var u = function() {
                            function e(e) {
                                if (this.prop.getValue(), this.cmdf = !1, this.omdf = !1, this.prop.mdf || e) {
                                    var t, n, i, a = 4 * this.data.p;
                                    for (t = 0; t < a; t += 1) n = t % 4 == 0 ? 100 : 255, i = Math.round(this.prop.v[t] * n), this.c[t] !== i && (this.c[t] = i, this.cmdf = !0);
                                    if (this.o.length)
                                        for (a = this.prop.v.length, t = 4 * this.data.p; t < a; t += 1) n = t % 2 == 0 ? 100 : 1, i = t % 2 == 0 ? Math.round(100 * this.prop.v[t]) : this.prop.v[t], this.o[t - 4 * this.data.p] !== i && (this.o[t - 4 * this.data.p] = i, this.omdf = !0)
                                }
                            }

                            function t(t, n, i) {
                                this.prop = c(t, n.k, 1, null, []), this.data = n, this.k = this.prop.k, this.c = Array.apply(null, {
                                    length: 4 * n.p
                                });
                                var a = n.k.k[0].s ? n.k.k[0].s.length - 4 * n.p : n.k.k.length - 4 * n.p;
                                this.o = Array.apply(null, {
                                    length: a
                                }), this.cmdf = !1, this.omdf = !1, this.getValue = e, this.prop.k && i.push(this), this.getValue(!0)
                            }
                            return function(e, n, i) {
                                return new t(e, n, i)
                            }
                        }(),
                        d = function() {
                            function e(e) {
                                var t = 0,
                                    n = this.dataProps.length;
                                if (this.elem.globalData.frameId !== this.frameId || e) {
                                    for (this.mdf = !1, this.frameId = this.elem.globalData.frameId; t < n;) {
                                        if (this.dataProps[t].p.mdf) {
                                            this.mdf = !0;
                                            break
                                        }
                                        t += 1
                                    }
                                    if (this.mdf || e)
                                        for ("svg" === this.renderer && (this.dasharray = ""), t = 0; t < n; t += 1) "o" != this.dataProps[t].n ? "svg" === this.renderer ? this.dasharray += " " + this.dataProps[t].p.v : this.dasharray[t] = this.dataProps[t].p.v : this.dashoffset = this.dataProps[t].p.v
                                }
                            }
                            return function(t, n, i, a) {
                                this.elem = t, this.frameId = -1, this.dataProps = new Array(n.length), this.renderer = i, this.mdf = !1, this.k = !1, "svg" === this.renderer ? this.dasharray = "" : this.dasharray = new Array(n.length - 1), this.dashoffset = 0;
                                var r, o, s = n.length;
                                for (r = 0; r < s; r += 1) o = PropertyFactory.getProp(t, n[r].v, 0, 0, a), this.k = !!o.k || this.k, this.dataProps[r] = {
                                    n: n[r].n,
                                    p: o
                                };
                                this.getValue = e, this.k ? a.push(this) : this.getValue(!0)
                            }
                        }(),
                        f = function() {
                            var e = Math.max,
                                t = Math.min,
                                n = Math.floor;

                            function i(e) {
                                if (this.mdf = e || !1, this.dynamicProperties.length) {
                                    var t, n = this.dynamicProperties.length;
                                    for (t = 0; t < n; t += 1) this.dynamicProperties[t].getValue(), this.dynamicProperties[t].mdf && (this.mdf = !0)
                                }
                                var i = this.elem.textProperty.currentData ? this.elem.textProperty.currentData.l.length : 0;
                                e && 2 === this.data.r && (this.e.v = i);
                                var a = 2 === this.data.r ? 1 : 100 / i,
                                    r = this.o.v / a,
                                    o = this.s.v / a + r,
                                    s = this.e.v / a + r;
                                if (o > s) {
                                    var l = o;
                                    o = s, s = l
                                }
                                this.finalS = o, this.finalE = s
                            }

                            function a(i) {
                                var a = BezierFactory.getBezierEasing(this.ne.v / 100, 0, 1 - this.xe.v / 100, 1).get,
                                    r = 0,
                                    o = this.finalS,
                                    s = this.finalE,
                                    l = this.data.sh;
                                if (2 == l) r = a(r = s === o ? i >= s ? 1 : 0 : e(0, t(.5 / (s - o) + (i - o) / (s - o), 1)));
                                else if (3 == l) r = a(r = s === o ? i >= s ? 0 : 1 : 1 - e(0, t(.5 / (s - o) + (i - o) / (s - o), 1)));
                                else if (4 == l) s === o ? r = 0 : (r = e(0, t(.5 / (s - o) + (i - o) / (s - o), 1))) < .5 ? r *= 2 : r = 1 - 2 * (r - .5), r = a(r);
                                else if (5 == l) {
                                    if (s === o) r = 0;
                                    else {
                                        var c = s - o,
                                            u = -c / 2 + (i = t(e(0, i + .5 - o), s - o)),
                                            d = c / 2;
                                        r = Math.sqrt(1 - u * u / (d * d))
                                    }
                                    r = a(r)
                                } else 6 == l ? (s === o ? r = 0 : (i = t(e(0, i + .5 - o), s - o), r = (1 + Math.cos(Math.PI + 2 * Math.PI * i / (s - o))) / 2), r = a(r)) : (i >= n(o) && (r = i - o < 0 ? 1 - (o - i) : e(0, t(s - i, 1))), r = a(r));
                                return r * this.a.v
                            }
                            return function(e, t, n) {
                                this.mdf = !1, this.k = !1, this.data = t, this.dynamicProperties = [], this.getValue = i, this.getMult = a, this.elem = e, this.comp = e.comp, this.finalS = 0, this.finalE = 0, this.s = PropertyFactory.getProp(e, t.s || {
                                    k: 0
                                }, 0, 0, this.dynamicProperties), this.e = "e" in t ? PropertyFactory.getProp(e, t.e, 0, 0, this.dynamicProperties) : {
                                    v: 100
                                }, this.o = PropertyFactory.getProp(e, t.o || {
                                    k: 0
                                }, 0, 0, this.dynamicProperties), this.xe = PropertyFactory.getProp(e, t.xe || {
                                    k: 0
                                }, 0, 0, this.dynamicProperties), this.ne = PropertyFactory.getProp(e, t.ne || {
                                    k: 0
                                }, 0, 0, this.dynamicProperties), this.a = PropertyFactory.getProp(e, t.a, 0, .01, this.dynamicProperties), this.dynamicProperties.length ? n.push(this) : this.getValue()
                            }
                        }();
                    return {
                        getProp: c,
                        getDashProp: function(e, t, n, i) {
                            return new d(e, t, n, i)
                        },
                        getTextSelectorProp: function(e, t, n) {
                            return new f(e, t, n)
                        },
                        getGradientProp: u
                    }
                }();

            function ShapePath() {
                this.c = !1, this._length = 0, this._maxLength = 8, this.v = Array.apply(null, {
                    length: this._maxLength
                }), this.o = Array.apply(null, {
                    length: this._maxLength
                }), this.i = Array.apply(null, {
                    length: this._maxLength
                })
            }
            ShapePath.prototype.setPathData = function(e, t) {
                this.c = e, this.setLength(t);
                for (var n = 0; n < t;) this.v[n] = point_pool.newPoint(), this.o[n] = point_pool.newPoint(), this.i[n] = point_pool.newPoint(), n += 1
            }, ShapePath.prototype.setLength = function(e) {
                for (; this._maxLength < e;) this.doubleArrayLength();
                this._length = e
            }, ShapePath.prototype.doubleArrayLength = function() {
                this.v = this.v.concat(Array.apply(null, {
                    length: this._maxLength
                })), this.i = this.i.concat(Array.apply(null, {
                    length: this._maxLength
                })), this.o = this.o.concat(Array.apply(null, {
                    length: this._maxLength
                })), this._maxLength *= 2
            }, ShapePath.prototype.setXYAt = function(e, t, n, i, a) {
                var r;
                switch (this._length = Math.max(this._length, i + 1), this._length >= this._maxLength && this.doubleArrayLength(), n) {
                    case "v":
                        r = this.v;
                        break;
                    case "i":
                        r = this.i;
                        break;
                    case "o":
                        r = this.o
                }(!r[i] || r[i] && !a) && (r[i] = point_pool.newPoint()), r[i][0] = e, r[i][1] = t
            }, ShapePath.prototype.setTripleAt = function(e, t, n, i, a, r, o, s) {
                this.setXYAt(e, t, "v", o, s), this.setXYAt(n, i, "o", o, s), this.setXYAt(a, r, "i", o, s)
            };
            var ShapePropertyFactory = function() {
                    var e = -999999;

                    function t(e, t, n, i) {
                        var a, r, o;
                        if (e < this.keyframes[0].t - this.offsetTime) a = this.keyframes[0].s[0], o = !0, t = 0;
                        else if (e >= this.keyframes[this.keyframes.length - 1].t - this.offsetTime) a = 1 === this.keyframes[this.keyframes.length - 2].h ? this.keyframes[this.keyframes.length - 1].s[0] : this.keyframes[this.keyframes.length - 2].e[0], o = !0;
                        else {
                            for (var s, l, c, u, d, f, h, p = t, A = this.keyframes.length - 1, m = !0; m && (s = this.keyframes[p], !((l = this.keyframes[p + 1]).t - this.offsetTime > e));) p < A - 1 ? p += 1 : m = !1;
                            if (t = p, !(o = 1 === s.h)) {
                                if (e >= l.t - this.offsetTime) h = 1;
                                else if (e < s.t - this.offsetTime) h = 0;
                                else {
                                    var _;
                                    s.__fnct ? _ = s.__fnct : (_ = BezierFactory.getBezierEasing(s.o.x, s.o.y, s.i.x, s.i.y).get, s.__fnct = _), h = _((e - (s.t - this.offsetTime)) / (l.t - this.offsetTime - (s.t - this.offsetTime)))
                                }
                                r = s.e[0]
                            }
                            a = s.s[0]
                        }
                        u = n._length, f = a.i[0].length;
                        var v, g = !1;
                        for (c = 0; c < u; c += 1)
                            for (d = 0; d < f; d += 1) o ? (v = a.i[c][d], n.i[c][d] !== v && (n.i[c][d] = v, i && (this.pv.i[c][d] = v), g = !0), v = a.o[c][d], n.o[c][d] !== v && (n.o[c][d] = v, i && (this.pv.o[c][d] = v), g = !0), v = a.v[c][d], n.v[c][d] !== v && (n.v[c][d] = v, i && (this.pv.v[c][d] = v), g = !0)) : (v = a.i[c][d] + (r.i[c][d] - a.i[c][d]) * h, n.i[c][d] !== v && (n.i[c][d] = v, i && (this.pv.i[c][d] = v), g = !0), v = a.o[c][d] + (r.o[c][d] - a.o[c][d]) * h, n.o[c][d] !== v && (n.o[c][d] = v, i && (this.pv.o[c][d] = v), g = !0), v = a.v[c][d] + (r.v[c][d] - a.v[c][d]) * h, n.v[c][d] !== v && (n.v[c][d] = v, i && (this.pv.v[c][d] = v), g = !0));
                        return g && (n.c = a.c), {
                            iterationIndex: t,
                            hasModified: g
                        }
                    }

                    function n() {
                        this.paths = this.localShapeCollection, this.k || (this.mdf = !1)
                    }

                    function i(e, t, i) {
                        this.__shapeObject = 1, this.comp = e.comp, this.k = !1, this.mdf = !1;
                        var a = 3 === i ? t.pt.k : t.ks.k;
                        this.v = shape_pool.clone(a), this.pv = shape_pool.clone(this.v), this.localShapeCollection = shapeCollection_pool.newShapeCollection(), this.paths = this.localShapeCollection, this.paths.addShape(this.v), this.reset = n
                    }

                    function a(t, i, a) {
                        this.__shapeObject = 1, this.comp = t.comp, this.elem = t, this.offsetTime = t.data.st, this._lastIndex = 0, this.keyframes = 3 === a ? i.pt.k : i.ks.k, this.k = !0, this.kf = !0;
                        var r = this.keyframes[0].s[0].i.length;
                        this.keyframes[0].s[0].i[0].length, this.v = shape_pool.newShape(), this.v.setPathData(this.keyframes[0].s[0].c, r), this.pv = shape_pool.clone(this.v), this.localShapeCollection = shapeCollection_pool.newShapeCollection(), this.paths = this.localShapeCollection, this.paths.addShape(this.v), this.lastFrame = e, this.reset = n
                    }
                    i.prototype.interpolateShape = t, i.prototype.getValue = function() {
                        return this.v
                    }, a.prototype.getValue = function() {
                        if (this.elem.globalData.frameId !== this.frameId) {
                            this.mdf = !1;
                            var t = this.comp.renderedFrame - this.offsetTime,
                                n = this.keyframes[0].t - this.offsetTime,
                                i = this.keyframes[this.keyframes.length - 1].t - this.offsetTime;
                            if (this.lastFrame === e || !(this.lastFrame < n && t < n || this.lastFrame > i && t > i)) {
                                var a = this.lastFrame < t ? this._lastIndex : 0,
                                    r = this.interpolateShape(t, a, this.v, !0);
                                this._lastIndex = r.iterationIndex, this.mdf = r.hasModified, r.hasModified && (this.paths = this.localShapeCollection)
                            }
                            this.lastFrame = t, this.frameId = this.elem.globalData.frameId
                        }
                    }, a.prototype.interpolateShape = t;
                    var r = function() {
                            var e = roundCorner;

                            function t() {
                                var t = this.p.v[0],
                                    n = this.p.v[1],
                                    i = this.s.v[0] / 2,
                                    a = this.s.v[1] / 2;
                                3 !== this.d ? (this.v.v[0][0] = t, this.v.v[0][1] = n - a, this.v.v[1][0] = t + i, this.v.v[1][1] = n, this.v.v[2][0] = t, this.v.v[2][1] = n + a, this.v.v[3][0] = t - i, this.v.v[3][1] = n, this.v.i[0][0] = t - i * e, this.v.i[0][1] = n - a, this.v.i[1][0] = t + i, this.v.i[1][1] = n - a * e, this.v.i[2][0] = t + i * e, this.v.i[2][1] = n + a, this.v.i[3][0] = t - i, this.v.i[3][1] = n + a * e, this.v.o[0][0] = t + i * e, this.v.o[0][1] = n - a, this.v.o[1][0] = t + i, this.v.o[1][1] = n + a * e, this.v.o[2][0] = t - i * e, this.v.o[2][1] = n + a, this.v.o[3][0] = t - i, this.v.o[3][1] = n - a * e) : (this.v.v[0][0] = t, this.v.v[0][1] = n - a, this.v.v[1][0] = t - i, this.v.v[1][1] = n, this.v.v[2][0] = t, this.v.v[2][1] = n + a, this.v.v[3][0] = t + i, this.v.v[3][1] = n, this.v.i[0][0] = t + i * e, this.v.i[0][1] = n - a, this.v.i[1][0] = t - i, this.v.i[1][1] = n - a * e, this.v.i[2][0] = t - i * e, this.v.i[2][1] = n + a, this.v.i[3][0] = t + i, this.v.i[3][1] = n + a * e, this.v.o[0][0] = t - i * e, this.v.o[0][1] = n - a, this.v.o[1][0] = t - i, this.v.o[1][1] = n + a * e, this.v.o[2][0] = t + i * e, this.v.o[2][1] = n + a, this.v.o[3][0] = t + i, this.v.o[3][1] = n - a * e)
                            }

                            function i(e) {
                                var t, n = this.dynamicProperties.length;
                                if (this.elem.globalData.frameId !== this.frameId) {
                                    for (this.mdf = !1, this.frameId = this.elem.globalData.frameId, t = 0; t < n; t += 1) this.dynamicProperties[t].getValue(e), this.dynamicProperties[t].mdf && (this.mdf = !0);
                                    this.mdf && this.convertEllToPath()
                                }
                            }
                            return function(e, a) {
                                this.v = shape_pool.newShape(), this.v.setPathData(!0, 4), this.localShapeCollection = shapeCollection_pool.newShapeCollection(), this.paths = this.localShapeCollection, this.localShapeCollection.addShape(this.v), this.d = a.d, this.dynamicProperties = [], this.elem = e, this.comp = e.comp, this.frameId = -1, this.mdf = !1, this.getValue = i, this.convertEllToPath = t, this.reset = n, this.p = PropertyFactory.getProp(e, a.p, 1, 0, this.dynamicProperties), this.s = PropertyFactory.getProp(e, a.s, 1, 0, this.dynamicProperties), this.dynamicProperties.length ? this.k = !0 : this.convertEllToPath()
                            }
                        }(),
                        o = function() {
                            function e() {
                                var e, t = Math.floor(this.pt.v),
                                    n = 2 * Math.PI / t,
                                    i = this.or.v,
                                    a = this.os.v,
                                    r = 2 * Math.PI * i / (4 * t),
                                    o = -Math.PI / 2,
                                    s = 3 === this.data.d ? -1 : 1;
                                for (o += this.r.v, this.v._length = 0, e = 0; e < t; e += 1) {
                                    var l = i * Math.cos(o),
                                        c = i * Math.sin(o),
                                        u = 0 === l && 0 === c ? 0 : c / Math.sqrt(l * l + c * c),
                                        d = 0 === l && 0 === c ? 0 : -l / Math.sqrt(l * l + c * c);
                                    l += +this.p.v[0], c += +this.p.v[1], this.v.setTripleAt(l, c, l - u * r * a * s, c - d * r * a * s, l + u * r * a * s, c + d * r * a * s, e, !0), o += n * s
                                }
                                this.paths.length = 0, this.paths[0] = this.v
                            }

                            function t() {
                                var e, t, n, i, a = 2 * Math.floor(this.pt.v),
                                    r = 2 * Math.PI / a,
                                    o = !0,
                                    s = this.or.v,
                                    l = this.ir.v,
                                    c = this.os.v,
                                    u = this.is.v,
                                    d = 2 * Math.PI * s / (2 * a),
                                    f = 2 * Math.PI * l / (2 * a),
                                    h = -Math.PI / 2;
                                h += this.r.v;
                                var p = 3 === this.data.d ? -1 : 1;
                                for (this.v._length = 0, e = 0; e < a; e += 1) {
                                    n = o ? c : u, i = o ? d : f;
                                    var A = (t = o ? s : l) * Math.cos(h),
                                        m = t * Math.sin(h),
                                        _ = 0 === A && 0 === m ? 0 : m / Math.sqrt(A * A + m * m),
                                        v = 0 === A && 0 === m ? 0 : -A / Math.sqrt(A * A + m * m);
                                    A += +this.p.v[0], m += +this.p.v[1], this.v.setTripleAt(A, m, A - _ * i * n * p, m - v * i * n * p, A + _ * i * n * p, m + v * i * n * p, e, !0), o = !o, h += r * p
                                }
                            }

                            function i() {
                                if (this.elem.globalData.frameId !== this.frameId) {
                                    this.mdf = !1, this.frameId = this.elem.globalData.frameId;
                                    var e, t = this.dynamicProperties.length;
                                    for (e = 0; e < t; e += 1) this.dynamicProperties[e].getValue(), this.dynamicProperties[e].mdf && (this.mdf = !0);
                                    this.mdf && this.convertToPath()
                                }
                            }
                            return function(a, r) {
                                this.v = shape_pool.newShape(), this.v.setPathData(!0, 0), this.elem = a, this.comp = a.comp, this.data = r, this.frameId = -1, this.d = r.d, this.dynamicProperties = [], this.mdf = !1, this.getValue = i, this.reset = n, 1 === r.sy ? (this.ir = PropertyFactory.getProp(a, r.ir, 0, 0, this.dynamicProperties), this.is = PropertyFactory.getProp(a, r.is, 0, .01, this.dynamicProperties), this.convertToPath = t) : this.convertToPath = e, this.pt = PropertyFactory.getProp(a, r.pt, 0, 0, this.dynamicProperties), this.p = PropertyFactory.getProp(a, r.p, 1, 0, this.dynamicProperties), this.r = PropertyFactory.getProp(a, r.r, 0, degToRads, this.dynamicProperties), this.or = PropertyFactory.getProp(a, r.or, 0, 0, this.dynamicProperties), this.os = PropertyFactory.getProp(a, r.os, 0, .01, this.dynamicProperties), this.localShapeCollection = shapeCollection_pool.newShapeCollection(), this.localShapeCollection.addShape(this.v), this.paths = this.localShapeCollection, this.dynamicProperties.length ? this.k = !0 : this.convertToPath()
                            }
                        }(),
                        s = function() {
                            function e(e) {
                                if (this.elem.globalData.frameId !== this.frameId) {
                                    this.mdf = !1, this.frameId = this.elem.globalData.frameId;
                                    var t, n = this.dynamicProperties.length;
                                    for (t = 0; t < n; t += 1) this.dynamicProperties[t].getValue(e), this.dynamicProperties[t].mdf && (this.mdf = !0);
                                    this.mdf && this.convertRectToPath()
                                }
                            }

                            function t() {
                                var e = this.p.v[0],
                                    t = this.p.v[1],
                                    n = this.s.v[0] / 2,
                                    i = this.s.v[1] / 2,
                                    a = bm_min(n, i, this.r.v),
                                    r = a * (1 - roundCorner);
                                this.v._length = 0, 2 === this.d || 1 === this.d ? (this.v.setTripleAt(e + n, t - i + a, e + n, t - i + a, e + n, t - i + r, 0, !0), this.v.setTripleAt(e + n, t + i - a, e + n, t + i - r, e + n, t + i - a, 1, !0), 0 !== a ? (this.v.setTripleAt(e + n - a, t + i, e + n - a, t + i, e + n - r, t + i, 2, !0), this.v.setTripleAt(e - n + a, t + i, e - n + r, t + i, e - n + a, t + i, 3, !0), this.v.setTripleAt(e - n, t + i - a, e - n, t + i - a, e - n, t + i - r, 4, !0), this.v.setTripleAt(e - n, t - i + a, e - n, t - i + r, e - n, t - i + a, 5, !0), this.v.setTripleAt(e - n + a, t - i, e - n + a, t - i, e - n + r, t - i, 6, !0), this.v.setTripleAt(e + n - a, t - i, e + n - r, t - i, e + n - a, t - i, 7, !0)) : (this.v.setTripleAt(e - n, t + i, e - n + r, t + i, e - n, t + i, 2), this.v.setTripleAt(e - n, t - i, e - n, t - i + r, e - n, t - i, 3))) : (this.v.setTripleAt(e + n, t - i + a, e + n, t - i + r, e + n, t - i + a, 0, !0), 0 !== a ? (this.v.setTripleAt(e + n - a, t - i, e + n - a, t - i, e + n - r, t - i, 1, !0), this.v.setTripleAt(e - n + a, t - i, e - n + r, t - i, e - n + a, t - i, 2, !0), this.v.setTripleAt(e - n, t - i + a, e - n, t - i + a, e - n, t - i + r, 3, !0), this.v.setTripleAt(e - n, t + i - a, e - n, t + i - r, e - n, t + i - a, 4, !0), this.v.setTripleAt(e - n + a, t + i, e - n + a, t + i, e - n + r, t + i, 5, !0), this.v.setTripleAt(e + n - a, t + i, e + n - r, t + i, e + n - a, t + i, 6, !0), this.v.setTripleAt(e + n, t + i - a, e + n, t + i - a, e + n, t + i - r, 7, !0)) : (this.v.setTripleAt(e - n, t - i, e - n + r, t - i, e - n, t - i, 1, !0), this.v.setTripleAt(e - n, t + i, e - n, t + i - r, e - n, t + i, 2, !0), this.v.setTripleAt(e + n, t + i, e + n - r, t + i, e + n, t + i, 3, !0)))
                            }
                            return function(i, a) {
                                this.v = shape_pool.newShape(), this.v.c = !0, this.localShapeCollection = shapeCollection_pool.newShapeCollection(), this.localShapeCollection.addShape(this.v), this.paths = this.localShapeCollection, this.elem = i, this.comp = i.comp, this.frameId = -1, this.d = a.d, this.dynamicProperties = [], this.mdf = !1, this.getValue = e, this.convertRectToPath = t, this.reset = n, this.p = PropertyFactory.getProp(i, a.p, 1, 0, this.dynamicProperties), this.s = PropertyFactory.getProp(i, a.s, 1, 0, this.dynamicProperties), this.r = PropertyFactory.getProp(i, a.r, 0, 0, this.dynamicProperties), this.dynamicProperties.length ? this.k = !0 : this.convertRectToPath()
                            }
                        }(),
                        l = {
                            getShapeProp: function(e, t, n, l) {
                                var c;
                                if (3 === n || 4 === n) {
                                    var u = 3 === n ? t.pt : t.ks,
                                        d = u.k;
                                    c = 1 === u.a || d.length ? new a(e, t, n) : new i(e, t, n)
                                } else 5 === n ? c = new s(e, t) : 6 === n ? c = new r(e, t) : 7 === n && (c = new o(e, t));
                                return c.k && l.push(c), c
                            },
                            getConstructorFunction: function() {
                                return i
                            },
                            getKeyframedConstructorFunction: function() {
                                return a
                            }
                        };
                    return l
                }(),
                ShapeModifiers = (ob = {}, modifiers = {}, ob.registerModifier = function(e, t) {
                    modifiers[e] || (modifiers[e] = t)
                }, ob.getModifier = function(e, t, n, i) {
                    return new modifiers[e](t, n, i)
                }, ob),
                ob, modifiers;

            function ShapeModifier() {}

            function TrimModifier() {}

            function RoundCornersModifier() {}

            function RepeaterModifier() {}

            function ShapeCollection() {
                this._length = 0, this._maxLength = 4, this.shapes = Array.apply(null, {
                    length: this._maxLength
                })
            }
            ShapeModifier.prototype.initModifierProperties = function() {}, ShapeModifier.prototype.addShapeToModifier = function() {}, ShapeModifier.prototype.addShape = function(e) {
                this.closed || (this.shapes.push({
                    shape: e.sh,
                    data: e,
                    localShapeCollection: shapeCollection_pool.newShapeCollection()
                }), this.addShapeToModifier(e.sh))
            }, ShapeModifier.prototype.init = function(e, t, n) {
                this.elem = e, this.frameId = -1, this.shapes = [], this.dynamicProperties = [], this.mdf = !1, this.closed = !1, this.k = !1, this.comp = e.comp, this.initModifierProperties(e, t), this.dynamicProperties.length ? (this.k = !0, n.push(this)) : this.getValue(!0)
            }, extendPrototype(ShapeModifier, TrimModifier), TrimModifier.prototype.processKeys = function(e) {
                if (this.elem.globalData.frameId !== this.frameId || e) {
                    this.mdf = !!e, this.frameId = this.elem.globalData.frameId;
                    var t, n = this.dynamicProperties.length;
                    for (t = 0; t < n; t += 1) this.dynamicProperties[t].getValue(), this.dynamicProperties[t].mdf && (this.mdf = !0);
                    if (this.mdf || e) {
                        var i = this.o.v % 360 / 360;
                        i < 0 && (i += 1);
                        var a = this.s.v + i,
                            r = this.e.v + i;
                        if (a > r) {
                            var o = a;
                            a = r, r = o
                        }
                        this.sValue = a, this.eValue = r, this.oValue = i
                    }
                }
            }, TrimModifier.prototype.initModifierProperties = function(e, t) {
                this.sValue = 0, this.eValue = 0, this.oValue = 0, this.getValue = this.processKeys, this.s = PropertyFactory.getProp(e, t.s, 0, .01, this.dynamicProperties), this.e = PropertyFactory.getProp(e, t.e, 0, .01, this.dynamicProperties), this.o = PropertyFactory.getProp(e, t.o, 0, 0, this.dynamicProperties), this.m = t.m, this.dynamicProperties.length || this.getValue(!0)
            }, TrimModifier.prototype.calculateShapeEdges = function(e, t, n, i, a) {
                var r = [];
                t <= 1 ? r.push({
                    s: e,
                    e: t
                }) : e >= 1 ? r.push({
                    s: e - 1,
                    e: t - 1
                }) : (r.push({
                    s: e,
                    e: 1
                }), r.push({
                    s: 0,
                    e: t - 1
                }));
                var o, s, l = [],
                    c = r.length;
                for (o = 0; o < c; o += 1) {
                    var u, d;
                    (s = r[o]).e * a < i || s.s * a > i + n || (u = s.s * a <= i ? 0 : (s.s * a - i) / n, d = s.e * a >= i + n ? 1 : (s.e * a - i) / n, l.push([u, d]))
                }
                return l.length || l.push([0, 0]), l
            }, TrimModifier.prototype.processShapes = function(e) {
                var t, n, i, a, r, o = this.shapes.length,
                    s = this.sValue,
                    l = this.eValue,
                    c = 0;
                if (l === s)
                    for (n = 0; n < o; n += 1) this.shapes[n].localShapeCollection.releaseShapes(), this.shapes[n].shape.mdf = !0, this.shapes[n].shape.paths = this.shapes[n].localShapeCollection;
                else if (1 === l && 0 === s || 0 === l && 1 === s) {
                    if (this.mdf)
                        for (n = 0; n < o; n += 1) this.shapes[n].shape.mdf = !0
                } else {
                    var u, d, f = [];
                    for (n = 0; n < o; n += 1)
                        if ((u = this.shapes[n]).shape.mdf || this.mdf || e || 2 === this.m) {
                            if (p = (t = u.shape.paths)._length, r = 0, !u.shape.mdf && u.pathsData) r = u.totalShapeLength;
                            else {
                                for (i = [], h = 0; h < p; h += 1) a = bez.getSegmentsLength(t.shapes[h]), i.push(a), r += a.totalLength;
                                u.totalShapeLength = r, u.pathsData = i
                            }
                            c += r, u.shape.mdf = !0
                        } else u.shape.paths = u.localShapeCollection;
                    var h, p, A = s,
                        m = l,
                        _ = 0;
                    for (n = o - 1; n >= 0; n -= 1)
                        if ((u = this.shapes[n]).shape.mdf) {
                            if ((d = u.localShapeCollection).releaseShapes(), 2 === this.m && o > 1) {
                                var v = this.calculateShapeEdges(s, l, u.totalShapeLength, _, c);
                                _ += u.totalShapeLength
                            } else v = [
                                [A, m]
                            ];
                            for (p = v.length, h = 0; h < p; h += 1) {
                                A = v[h][0], m = v[h][1], f.length = 0, m <= 1 ? f.push({
                                    s: u.totalShapeLength * A,
                                    e: u.totalShapeLength * m
                                }) : A >= 1 ? f.push({
                                    s: u.totalShapeLength * (A - 1),
                                    e: u.totalShapeLength * (m - 1)
                                }) : (f.push({
                                    s: u.totalShapeLength * A,
                                    e: u.totalShapeLength
                                }), f.push({
                                    s: 0,
                                    e: u.totalShapeLength * (m - 1)
                                }));
                                var g = this.addShapes(u, f[0]);
                                if (f[0].s !== f[0].e) {
                                    if (f.length > 1)
                                        if (u.shape.v.c) {
                                            var y = g.pop();
                                            this.addPaths(g, d), g = this.addShapes(u, f[1], y)
                                        } else this.addPaths(g, d), g = this.addShapes(u, f[1]);
                                    this.addPaths(g, d)
                                }
                            }
                            u.shape.paths = d
                        }
                }
                this.dynamicProperties.length || (this.mdf = !1)
            }, TrimModifier.prototype.addPaths = function(e, t) {
                var n, i = e.length;
                for (n = 0; n < i; n += 1) t.addShape(e[n])
            }, TrimModifier.prototype.addSegment = function(e, t, n, i, a, r, o) {
                a.setXYAt(t[0], t[1], "o", r), a.setXYAt(n[0], n[1], "i", r + 1), o && a.setXYAt(e[0], e[1], "v", r), a.setXYAt(i[0], i[1], "v", r + 1)
            }, TrimModifier.prototype.addShapes = function(e, t, n) {
                var i, a, r, o, s, l, c, u, d = e.pathsData,
                    f = e.shape.paths.shapes,
                    h = e.shape.paths._length,
                    p = 0,
                    A = [],
                    m = !0;
                for (n ? (s = n._length, u = n._length) : (n = shape_pool.newShape(), s = 0, u = 0), A.push(n), i = 0; i < h; i += 1) {
                    for (l = d[i].lengths, n.c = f[i].c, r = f[i].c ? l.length : l.length + 1, a = 1; a < r; a += 1)
                        if (p + (o = l[a - 1]).addedLength < t.s) p += o.addedLength, n.c = !1;
                        else {
                            if (p > t.e) {
                                n.c = !1;
                                break
                            }
                            t.s <= p && t.e >= p + o.addedLength ? (this.addSegment(f[i].v[a - 1], f[i].o[a - 1], f[i].i[a], f[i].v[a], n, s, m), m = !1) : (c = bez.getNewSegment(f[i].v[a - 1], f[i].v[a], f[i].o[a - 1], f[i].i[a], (t.s - p) / o.addedLength, (t.e - p) / o.addedLength, l[a - 1]), this.addSegment(c.pt1, c.pt3, c.pt4, c.pt2, n, s, m), m = !1, n.c = !1), p += o.addedLength, s += 1
                        }
                    if (f[i].c) {
                        if (o = l[a - 1], p <= t.e) {
                            var _ = l[a - 1].addedLength;
                            t.s <= p && t.e >= p + _ ? (this.addSegment(f[i].v[a - 1], f[i].o[a - 1], f[i].i[0], f[i].v[0], n, s, m), m = !1) : (c = bez.getNewSegment(f[i].v[a - 1], f[i].v[0], f[i].o[a - 1], f[i].i[0], (t.s - p) / _, (t.e - p) / _, l[a - 1]), this.addSegment(c.pt1, c.pt3, c.pt4, c.pt2, n, s, m), m = !1, n.c = !1)
                        } else n.c = !1;
                        p += o.addedLength, s += 1
                    }
                    if (n._length && (n.setXYAt(n.v[u][0], n.v[u][1], "i", u), n.setXYAt(n.v[n._length - 1][0], n.v[n._length - 1][1], "o", n._length - 1)), p > t.e) break;
                    i < h - 1 && (n = shape_pool.newShape(), m = !0, A.push(n), s = 0)
                }
                return A
            }, ShapeModifiers.registerModifier("tm", TrimModifier), extendPrototype(ShapeModifier, RoundCornersModifier), RoundCornersModifier.prototype.processKeys = function(e) {
                if (this.elem.globalData.frameId !== this.frameId || e) {
                    this.mdf = !!e, this.frameId = this.elem.globalData.frameId;
                    var t, n = this.dynamicProperties.length;
                    for (t = 0; t < n; t += 1) this.dynamicProperties[t].getValue(), this.dynamicProperties[t].mdf && (this.mdf = !0)
                }
            }, RoundCornersModifier.prototype.initModifierProperties = function(e, t) {
                this.getValue = this.processKeys, this.rd = PropertyFactory.getProp(e, t.r, 0, null, this.dynamicProperties), this.dynamicProperties.length || this.getValue(!0)
            }, RoundCornersModifier.prototype.processPath = function(e, t) {
                var n = shape_pool.newShape();
                n.c = e.c;
                var i, a, r, o, s, l, c, u, d, f, h, p, A, m = e._length,
                    _ = 0;
                for (i = 0; i < m; i += 1) a = e.v[i], o = e.o[i], r = e.i[i], a[0] === o[0] && a[1] === o[1] && a[0] === r[0] && a[1] === r[1] ? 0 !== i && i !== m - 1 || e.c ? (s = 0 === i ? e.v[m - 1] : e.v[i - 1], c = (l = Math.sqrt(Math.pow(a[0] - s[0], 2) + Math.pow(a[1] - s[1], 2))) ? Math.min(l / 2, t) / l : 0, u = p = a[0] + (s[0] - a[0]) * c, d = A = a[1] - (a[1] - s[1]) * c, f = u - (u - a[0]) * roundCorner, h = d - (d - a[1]) * roundCorner, n.setTripleAt(u, d, f, h, p, A, _), _ += 1, s = i === m - 1 ? e.v[0] : e.v[i + 1], c = (l = Math.sqrt(Math.pow(a[0] - s[0], 2) + Math.pow(a[1] - s[1], 2))) ? Math.min(l / 2, t) / l : 0, u = f = a[0] + (s[0] - a[0]) * c, d = h = a[1] + (s[1] - a[1]) * c, p = u - (u - a[0]) * roundCorner, A = d - (d - a[1]) * roundCorner, n.setTripleAt(u, d, f, h, p, A, _), _ += 1) : (n.setTripleAt(a[0], a[1], o[0], o[1], r[0], r[1], _), _ += 1) : (n.setTripleAt(e.v[i][0], e.v[i][1], e.o[i][0], e.o[i][1], e.i[i][0], e.i[i][1], _), _ += 1);
                return n
            }, RoundCornersModifier.prototype.processShapes = function(e) {
                var t, n, i, a, r, o, s = this.shapes.length,
                    l = this.rd.v;
                if (0 !== l)
                    for (n = 0; n < s; n += 1) {
                        if ((r = this.shapes[n]).shape.paths, o = r.localShapeCollection, r.shape.mdf || this.mdf || e)
                            for (o.releaseShapes(), r.shape.mdf = !0, t = r.shape.paths.shapes, a = r.shape.paths._length, i = 0; i < a; i += 1) o.addShape(this.processPath(t[i], l));
                        r.shape.paths = r.localShapeCollection
                    }
                this.dynamicProperties.length || (this.mdf = !1)
            }, ShapeModifiers.registerModifier("rd", RoundCornersModifier), RepeaterModifier.prototype.processKeys = function(e) {
                if (this.elem.globalData.frameId !== this.frameId || e) {
                    this.mdf = !!e;
                    var t, n = this.dynamicProperties.length;
                    for (t = 0; t < n; t += 1) this.dynamicProperties[t].getValue(), this.dynamicProperties[t].mdf && (this.mdf = !0)
                }
            }, RepeaterModifier.prototype.initModifierProperties = function(e, t) {
                this.getValue = this.processKeys, this.c = PropertyFactory.getProp(e, t.c, 0, null, this.dynamicProperties), this.o = PropertyFactory.getProp(e, t.o, 0, null, this.dynamicProperties), this.tr = PropertyFactory.getProp(e, t.tr, 2, null, this.dynamicProperties), this.data = t, this.dynamicProperties.length || this.getValue(!0), this.pMatrix = new Matrix, this.rMatrix = new Matrix, this.sMatrix = new Matrix, this.tMatrix = new Matrix, this.matrix = new Matrix
            }, RepeaterModifier.prototype.applyTransforms = function(e, t, n, i, a, r) {
                var o = r ? -1 : 1,
                    s = i.s.v[0] + (1 - i.s.v[0]) * (1 - a),
                    l = i.s.v[1] + (1 - i.s.v[1]) * (1 - a);
                e.translate(i.p.v[0] * o * a, i.p.v[1] * o * a, i.p.v[2]), t.translate(-i.a.v[0], -i.a.v[1], i.a.v[2]), t.rotate(-i.r.v * o * a), t.translate(i.a.v[0], i.a.v[1], i.a.v[2]), n.translate(-i.a.v[0], -i.a.v[1], i.a.v[2]), n.scale(r ? 1 / s : s, r ? 1 / l : l), n.translate(i.a.v[0], i.a.v[1], i.a.v[2])
            }, RepeaterModifier.prototype.init = function(e, t, n, i, a) {
                for (this.elem = e, this.arr = t, this.pos = n, this.elemsData = i, this._currentCopies = 0, this._elements = [], this._groups = [], this.dynamicProperties = [], this.frameId = -1, this.initModifierProperties(e, t[n]); n > 0;) n -= 1, this._elements.unshift(t[n]);
                this.dynamicProperties.length ? (this.k = !0, a.push(this)) : this.getValue(!0)
            }, RepeaterModifier.prototype.resetElements = function(e) {
                var t, n = e.length;
                for (t = 0; t < n; t += 1) e[t]._processed = !1, "gr" === e[t].ty && this.resetElements(e[t].it)
            }, RepeaterModifier.prototype.cloneElements = function(e) {
                e.length;
                var t = JSON.parse(JSON.stringify(e));
                return this.resetElements(t), t
            }, RepeaterModifier.prototype.changeGroupRender = function(e, t) {
                var n, i = e.length;
                for (n = 0; n < i; n += 1) e[n]._render = t, "gr" === e[n].ty && this.changeGroupRender(e[n].it, t)
            }, RepeaterModifier.prototype.processShapes = function(e) {
                if (this.elem.globalData.frameId !== this.frameId && (this.frameId = this.elem.globalData.frameId, this.dynamicProperties.length || e || (this.mdf = !1), this.mdf)) {
                    var t = Math.ceil(this.c.v);
                    if (this._groups.length < t) {
                        for (; this._groups.length < t;) {
                            var n = {
                                it: this.cloneElements(this._elements),
                                ty: "gr"
                            };
                            n.it.push({
                                a: {
                                    a: 0,
                                    ix: 1,
                                    k: [0, 0]
                                },
                                nm: "Transform",
                                o: {
                                    a: 0,
                                    ix: 7,
                                    k: 100
                                },
                                p: {
                                    a: 0,
                                    ix: 2,
                                    k: [0, 0]
                                },
                                r: {
                                    a: 0,
                                    ix: 6,
                                    k: 0
                                },
                                s: {
                                    a: 0,
                                    ix: 3,
                                    k: [100, 100]
                                },
                                sa: {
                                    a: 0,
                                    ix: 5,
                                    k: 0
                                },
                                sk: {
                                    a: 0,
                                    ix: 4,
                                    k: 0
                                },
                                ty: "tr"
                            }), this.arr.splice(0, 0, n), this._groups.splice(0, 0, n), this._currentCopies += 1
                        }
                        this.elem.reloadShapes()
                    }
                    var i, a, r = 0;
                    for (i = 0; i <= this._groups.length - 1; i += 1) a = r < t, this._groups[i]._render = a, this.changeGroupRender(this._groups[i].it, a), r += 1;
                    this._currentCopies = t, this.elem.firstFrame = !0;
                    var o = this.o.v,
                        s = o % 1,
                        l = o > 0 ? Math.floor(o) : Math.ceil(o),
                        c = (this.tr.v.props, this.pMatrix.props),
                        u = this.rMatrix.props,
                        d = this.sMatrix.props;
                    this.pMatrix.reset(), this.rMatrix.reset(), this.sMatrix.reset(), this.tMatrix.reset(), this.matrix.reset();
                    var f = 0;
                    if (o > 0) {
                        for (; f < l;) this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, 1, !1), f += 1;
                        s && (this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, s, !1), f += s)
                    } else if (o < 0) {
                        for (; f > l;) this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, 1, !0), f -= 1;
                        s && (this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, -s, !0), f -= s)
                    }
                    i = 1 === this.data.m ? 0 : this._currentCopies - 1;
                    var h = 1 === this.data.m ? 1 : -1;
                    for (r = this._currentCopies; r;) {
                        if (0 !== f) {
                            (0 !== i && 1 === h || i !== this._currentCopies - 1 && -1 === h) && this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, 1, !1), this.matrix.transform(u[0], u[1], u[2], u[3], u[4], u[5], u[6], u[7], u[8], u[9], u[10], u[11], u[12], u[13], u[14], u[15]), this.matrix.transform(d[0], d[1], d[2], d[3], d[4], d[5], d[6], d[7], d[8], d[9], d[10], d[11], d[12], d[13], d[14], d[15]), this.matrix.transform(c[0], c[1], c[2], c[3], c[4], c[5], c[6], c[7], c[8], c[9], c[10], c[11], c[12], c[13], c[14], c[15]);
                            var p = (m = (A = this.elemsData[i].it)[A.length - 1].transform.mProps.v.props).length;
                            for (_ = 0; _ < p; _ += 1) m[_] = this.matrix.props[_];
                            this.matrix.reset()
                        } else {
                            var A, m, _;
                            for (this.matrix.reset(), p = (m = (A = this.elemsData[i].it)[A.length - 1].transform.mProps.v.props).length, _ = 0; _ < p; _ += 1) m[_] = this.matrix.props[_]
                        }
                        f += 1, r -= 1, i += h
                    }
                }
            }, RepeaterModifier.prototype.addShape = function() {}, ShapeModifiers.registerModifier("rp", RepeaterModifier), ShapeCollection.prototype.addShape = function(e) {
                this._length === this._maxLength && (this.shapes = this.shapes.concat(Array.apply(null, {
                    length: this._maxLength
                })), this._maxLength *= 2), this.shapes[this._length] = e, this._length += 1
            }, ShapeCollection.prototype.releaseShapes = function() {
                var e;
                for (e = 0; e < this._length; e += 1) shape_pool.release(this.shapes[e]);
                this._length = 0
            };
            var ImagePreloader = function() {
                    var e;

                    function t() {
                        this.loadedAssets += 1, this.loadedAssets === this.totalImages && e && e(null)
                    }

                    function n(e) {
                        var t = "";
                        if (this.assetsPath) {
                            var n = e.p; - 1 !== n.indexOf("images/") && (n = n.split("/")[1]), t = this.assetsPath + n
                        } else t = this.path, t += e.u ? e.u : "", t += e.p;
                        return t
                    }

                    function i(e) {
                        var n = document.createElement("img");
                        n.addEventListener("load", t.bind(this), !1), n.addEventListener("error", t.bind(this), !1), n.src = e
                    }

                    function a(t, a) {
                        var r;
                        for (e = a, this.totalAssets = t.length, r = 0; r < this.totalAssets; r += 1) t[r].layers || (i.bind(this)(n.bind(this)(t[r])), this.totalImages += 1)
                    }

                    function r(e) {
                        this.path = e || ""
                    }

                    function o(e) {
                        this.assetsPath = e || ""
                    }
                    return function() {
                        this.loadAssets = a, this.setAssetsPath = o, this.setPath = r, this.assetsPath = "", this.path = "", this.totalAssets = 0, this.totalImages = 0, this.loadedAssets = 0
                    }
                }(),
                featureSupport = function() {
                    var e = {
                        maskType: !0
                    };
                    return (/MSIE 10/i.test(navigator.userAgent) || /MSIE 9/i.test(navigator.userAgent) || /rv:11.0/i.test(navigator.userAgent) || /Edge\/\d./i.test(navigator.userAgent)) && (e.maskType = !1), e
                }(),
                filtersFactory = function() {
                    var e = {
                        createFilter: function(e) {
                            var t = document.createElementNS(svgNS, "filter");
                            return t.setAttribute("id", e), t.setAttribute("filterUnits", "objectBoundingBox"), t.setAttribute("x", "0%"), t.setAttribute("y", "0%"), t.setAttribute("width", "100%"), t.setAttribute("height", "100%"), t
                        },
                        createAlphaToLuminanceFilter: function() {
                            var e = document.createElementNS(svgNS, "feColorMatrix");
                            return e.setAttribute("type", "matrix"), e.setAttribute("color-interpolation-filters", "sRGB"), e.setAttribute("values", "0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"), e
                        }
                    };
                    return e
                }();

            function TextAnimatorProperty(e, t, n) {
                this.mdf = !1, this._firstFrame = !0, this._hasMaskedPath = !1, this._frameId = -1, this._dynamicProperties = [], this._textData = e, this._renderType = t, this._elem = n, this._animatorsData = Array.apply(null, {
                    length: this._textData.a.length
                }), this._pathData = {}, this._moreOptions = {
                    alignment: {}
                }, this.renderedLetters = [], this.lettersChangedFlag = !1
            }

            function LetterProps(e, t, n, i, a, r) {
                this.o = e, this.sw = t, this.sc = n, this.fc = i, this.m = a, this.p = r, this.mdf = {
                    o: !0,
                    sw: !!t,
                    sc: !!n,
                    fc: !!i,
                    m: !0,
                    p: !0
                }
            }

            function TextProperty(e, t, n) {
                this._frameId = -99999, this.pv = "", this.v = "", this.kf = !1, this.firstFrame = !0, this.mdf = !0, this.data = t, this.elem = e, this.keysIndex = -1, this.currentData = {
                    ascent: 0,
                    boxWidth: [0, 0],
                    f: "",
                    fStyle: "",
                    fWeight: "",
                    fc: "",
                    j: "",
                    justifyOffset: "",
                    l: [],
                    lh: 0,
                    lineWidths: [],
                    ls: "",
                    of: "",
                    s: "",
                    sc: "",
                    sw: 0,
                    t: 0,
                    tr: 0,
                    fillColorAnim: !1,
                    strokeColorAnim: !1,
                    strokeWidthAnim: !1,
                    yOffset: 0,
                    __complete: !1
                }, this.searchProperty() ? n.push(this) : this.getValue(!0)
            }
            TextAnimatorProperty.prototype.searchProperties = function(e) {
                var t, n, i, a = this._textData.a.length,
                    r = PropertyFactory.getProp;
                for (t = 0; t < a; t += 1) n = {
                    a: {},
                    s: {}
                }, "r" in (i = this._textData.a[t]).a && (n.a.r = r(this._elem, i.a.r, 0, degToRads, this._dynamicProperties)), "rx" in i.a && (n.a.rx = r(this._elem, i.a.rx, 0, degToRads, this._dynamicProperties)), "ry" in i.a && (n.a.ry = r(this._elem, i.a.ry, 0, degToRads, this._dynamicProperties)), "sk" in i.a && (n.a.sk = r(this._elem, i.a.sk, 0, degToRads, this._dynamicProperties)), "sa" in i.a && (n.a.sa = r(this._elem, i.a.sa, 0, degToRads, this._dynamicProperties)), "s" in i.a && (n.a.s = r(this._elem, i.a.s, 1, .01, this._dynamicProperties)), "a" in i.a && (n.a.a = r(this._elem, i.a.a, 1, 0, this._dynamicProperties)), "o" in i.a && (n.a.o = r(this._elem, i.a.o, 0, .01, this._dynamicProperties)), "p" in i.a && (n.a.p = r(this._elem, i.a.p, 1, 0, this._dynamicProperties)), "sw" in i.a && (n.a.sw = r(this._elem, i.a.sw, 0, 0, this._dynamicProperties)), "sc" in i.a && (n.a.sc = r(this._elem, i.a.sc, 1, 0, this._dynamicProperties)), "fc" in i.a && (n.a.fc = r(this._elem, i.a.fc, 1, 0, this._dynamicProperties)), "fh" in i.a && (n.a.fh = r(this._elem, i.a.fh, 0, 0, this._dynamicProperties)), "fs" in i.a && (n.a.fs = r(this._elem, i.a.fs, 0, .01, this._dynamicProperties)), "fb" in i.a && (n.a.fb = r(this._elem, i.a.fb, 0, .01, this._dynamicProperties)), "t" in i.a && (n.a.t = r(this._elem, i.a.t, 0, 0, this._dynamicProperties)), n.s = PropertyFactory.getTextSelectorProp(this._elem, i.s, this._dynamicProperties), n.s.t = i.s.t, this._animatorsData[t] = n;
                this._textData.p && "m" in this._textData.p ? (this._pathData = {
                    f: r(this._elem, this._textData.p.f, 0, 0, this._dynamicProperties),
                    l: r(this._elem, this._textData.p.l, 0, 0, this._dynamicProperties),
                    r: this._textData.p.r,
                    m: this._elem.maskManager.getMaskProperty(this._textData.p.m)
                }, this._hasMaskedPath = !0) : this._hasMaskedPath = !1, this._moreOptions.alignment = r(this._elem, this._textData.m.a, 1, 0, this._dynamicProperties), this._dynamicProperties.length && e.push(this)
            }, TextAnimatorProperty.prototype.getMeasures = function(e, t) {
                if (this.lettersChangedFlag = t, this.mdf || this._firstFrame || t || this._hasMaskedPath && this._pathData.m.mdf) {
                    this._firstFrame = !1;
                    var n, i, a, r, o = this._moreOptions.alignment.v,
                        s = this._animatorsData,
                        l = this._textData,
                        c = this.mHelper,
                        u = this._renderType,
                        d = this.renderedLetters.length,
                        f = (this.data, e.l);
                    if (this._hasMaskedPath) {
                        var h = this._pathData.m;
                        if (!this._pathData.n || this._pathData.mdf) {
                            var p = h.v;
                            this._pathData.r && (p = reversePath(p));
                            var A, m = {
                                tLength: 0,
                                segments: []
                            };
                            r = p._length - 1;
                            var _ = 0;
                            for (a = 0; a < r; a += 1) A = {
                                s: p.v[a],
                                e: p.v[a + 1],
                                to: [p.o[a][0] - p.v[a][0], p.o[a][1] - p.v[a][1]],
                                ti: [p.i[a + 1][0] - p.v[a + 1][0], p.i[a + 1][1] - p.v[a + 1][1]]
                            }, bez.buildBezierData(A), m.tLength += A.bezierData.segmentLength, m.segments.push(A), _ += A.bezierData.segmentLength;
                            a = r, h.v.c && (A = {
                                s: p.v[a],
                                e: p.v[0],
                                to: [p.o[a][0] - p.v[a][0], p.o[a][1] - p.v[a][1]],
                                ti: [p.i[0][0] - p.v[0][0], p.i[0][1] - p.v[0][1]]
                            }, bez.buildBezierData(A), m.tLength += A.bezierData.segmentLength, m.segments.push(A), _ += A.bezierData.segmentLength), this._pathData.pi = m
                        }
                        m = this._pathData.pi;
                        var v, g, y, b = this._pathData.f.v,
                            w = 0,
                            k = 1,
                            E = 0,
                            S = !0,
                            C = m.segments;
                        if (b < 0 && h.v.c)
                            for (m.tLength < Math.abs(b) && (b = -Math.abs(b) % m.tLength), k = (y = C[w = C.length - 1].bezierData.points).length - 1; b < 0;) b += y[k].partialLength, (k -= 1) < 0 && (k = (y = C[w -= 1].bezierData.points).length - 1);
                        g = (y = C[w].bezierData.points)[k - 1];
                        var M, P, T = (v = y[k]).partialLength
                    }
                    r = f.length, n = 0, i = 0;
                    var D, I, x, O, L = 1.2 * e.s * .714,
                        B = !0;
                    if (x = s.length, t)
                        for (I = 0; I < x; I += 1) s[I].s.getValue(!0);
                    var R, N, j, F, H, V, U, z, W, q, $, G, Q, Y = -1,
                        X = b,
                        K = w,
                        J = k,
                        Z = -1,
                        ee = "",
                        te = this.defaultPropsArray;
                    for (a = 0; a < r; a += 1) {
                        if (c.reset(), H = 1, f[a].n) n = 0, i += e.yOffset, i += B ? 1 : 0, b = X, B = !1, this._hasMaskedPath && (k = J, g = (y = C[w = K].bezierData.points)[k - 1], T = (v = y[k]).partialLength, E = 0), Q = q = G = ee = "", te = this.defaultPropsArray;
                        else {
                            if (this._hasMaskedPath) {
                                if (Z !== f[a].line) {
                                    switch (e.j) {
                                        case 1:
                                            b += _ - e.lineWidths[f[a].line];
                                            break;
                                        case 2:
                                            b += (_ - e.lineWidths[f[a].line]) / 2
                                    }
                                    Z = f[a].line
                                }
                                Y !== f[a].ind && (f[Y] && (b += f[Y].extra), b += f[a].an / 2, Y = f[a].ind), b += o[0] * f[a].an / 200;
                                var ne = 0;
                                for (I = 0; I < x; I += 1) "p" in (D = s[I].a) && ((R = s[I].s.getMult(f[a].anIndexes[I], l.a[I].s.totalChars)).length ? ne += D.p.v[0] * R[0] : ne += D.p.v[0] * R), "a" in D && ((R = s[I].s.getMult(f[a].anIndexes[I], l.a[I].s.totalChars)).length ? ne += D.a.v[0] * R[0] : ne += D.a.v[0] * R);
                                for (S = !0; S;) E + T >= b + ne || !y ? (M = (b + ne - E) / v.partialLength, j = g.point[0] + (v.point[0] - g.point[0]) * M, F = g.point[1] + (v.point[1] - g.point[1]) * M, c.translate(-o[0] * f[a].an / 200, -o[1] * L / 100), S = !1) : y && (E += v.partialLength, (k += 1) >= y.length && (k = 0, C[w += 1] ? y = C[w].bezierData.points : h.v.c ? (k = 0, y = C[w = 0].bezierData.points) : (E -= v.partialLength, y = null)), y && (g = v, T = (v = y[k]).partialLength));
                                N = f[a].an / 2 - f[a].add, c.translate(-N, 0, 0)
                            } else N = f[a].an / 2 - f[a].add, c.translate(-N, 0, 0), c.translate(-o[0] * f[a].an / 200, -o[1] * L / 100, 0);
                            for (f[a].l, I = 0; I < x; I += 1) "t" in (D = s[I].a) && (R = s[I].s.getMult(f[a].anIndexes[I], l.a[I].s.totalChars), this._hasMaskedPath ? R.length ? b += D.t * R[0] : b += D.t * R : R.length ? n += D.t.v * R[0] : n += D.t.v * R);
                            for (f[a].l, e.strokeWidthAnim && (U = e.sw || 0), e.strokeColorAnim && (V = e.sc ? [e.sc[0], e.sc[1], e.sc[2]] : [0, 0, 0]), e.fillColorAnim && e.fc && (z = [e.fc[0], e.fc[1], e.fc[2]]), I = 0; I < x; I += 1) "a" in (D = s[I].a) && ((R = s[I].s.getMult(f[a].anIndexes[I], l.a[I].s.totalChars)).length ? c.translate(-D.a.v[0] * R[0], -D.a.v[1] * R[1], D.a.v[2] * R[2]) : c.translate(-D.a.v[0] * R, -D.a.v[1] * R, D.a.v[2] * R));
                            for (I = 0; I < x; I += 1) "s" in (D = s[I].a) && ((R = s[I].s.getMult(f[a].anIndexes[I], l.a[I].s.totalChars)).length ? c.scale(1 + (D.s.v[0] - 1) * R[0], 1 + (D.s.v[1] - 1) * R[1], 1) : c.scale(1 + (D.s.v[0] - 1) * R, 1 + (D.s.v[1] - 1) * R, 1));
                            for (I = 0; I < x; I += 1) {
                                if (D = s[I].a, R = s[I].s.getMult(f[a].anIndexes[I], l.a[I].s.totalChars), "sk" in D && (R.length ? c.skewFromAxis(-D.sk.v * R[0], D.sa.v * R[1]) : c.skewFromAxis(-D.sk.v * R, D.sa.v * R)), "r" in D && (R.length ? c.rotateZ(-D.r.v * R[2]) : c.rotateZ(-D.r.v * R)), "ry" in D && (R.length ? c.rotateY(D.ry.v * R[1]) : c.rotateY(D.ry.v * R)), "rx" in D && (R.length ? c.rotateX(D.rx.v * R[0]) : c.rotateX(D.rx.v * R)), "o" in D && (R.length ? H += (D.o.v * R[0] - H) * R[0] : H += (D.o.v * R - H) * R), e.strokeWidthAnim && "sw" in D && (R.length ? U += D.sw.v * R[0] : U += D.sw.v * R), e.strokeColorAnim && "sc" in D)
                                    for (W = 0; W < 3; W += 1) R.length ? V[W] = V[W] + (D.sc.v[W] - V[W]) * R[0] : V[W] = V[W] + (D.sc.v[W] - V[W]) * R;
                                if (e.fillColorAnim && e.fc) {
                                    if ("fc" in D)
                                        for (W = 0; W < 3; W += 1) R.length ? z[W] = z[W] + (D.fc.v[W] - z[W]) * R[0] : z[W] = z[W] + (D.fc.v[W] - z[W]) * R;
                                    "fh" in D && (z = R.length ? addHueToRGB(z, D.fh.v * R[0]) : addHueToRGB(z, D.fh.v * R)), "fs" in D && (z = R.length ? addSaturationToRGB(z, D.fs.v * R[0]) : addSaturationToRGB(z, D.fs.v * R)), "fb" in D && (z = R.length ? addBrightnessToRGB(z, D.fb.v * R[0]) : addBrightnessToRGB(z, D.fb.v * R))
                                }
                            }
                            for (I = 0; I < x; I += 1) "p" in (D = s[I].a) && (R = s[I].s.getMult(f[a].anIndexes[I], l.a[I].s.totalChars), this._hasMaskedPath ? R.length ? c.translate(0, D.p.v[1] * R[0], -D.p.v[2] * R[1]) : c.translate(0, D.p.v[1] * R, -D.p.v[2] * R) : R.length ? c.translate(D.p.v[0] * R[0], D.p.v[1] * R[1], -D.p.v[2] * R[2]) : c.translate(D.p.v[0] * R, D.p.v[1] * R, -D.p.v[2] * R));
                            if (e.strokeWidthAnim && (q = U < 0 ? 0 : U), e.strokeColorAnim && ($ = "rgb(" + Math.round(255 * V[0]) + "," + Math.round(255 * V[1]) + "," + Math.round(255 * V[2]) + ")"), e.fillColorAnim && e.fc && (G = "rgb(" + Math.round(255 * z[0]) + "," + Math.round(255 * z[1]) + "," + Math.round(255 * z[2]) + ")"), this._hasMaskedPath) {
                                if (c.translate(0, -e.ls), c.translate(0, o[1] * L / 100 + i, 0), l.p.p) {
                                    P = (v.point[1] - g.point[1]) / (v.point[0] - g.point[0]);
                                    var ie = 180 * Math.atan(P) / Math.PI;
                                    v.point[0] < g.point[0] && (ie += 180), c.rotate(-ie * Math.PI / 180)
                                }
                                c.translate(j, F, 0), b -= o[0] * f[a].an / 200, f[a + 1] && Y !== f[a + 1].ind && (b += f[a].an / 2, b += e.tr / 1e3 * e.s)
                            } else {
                                switch (c.translate(n, i, 0), e.ps && c.translate(e.ps[0], e.ps[1] + e.ascent, 0), e.j) {
                                    case 1:
                                        c.translate(e.justifyOffset + (e.boxWidth - e.lineWidths[f[a].line]), 0, 0);
                                        break;
                                    case 2:
                                        c.translate(e.justifyOffset + (e.boxWidth - e.lineWidths[f[a].line]) / 2, 0, 0)
                                }
                                c.translate(0, -e.ls), c.translate(N, 0, 0), c.translate(o[0] * f[a].an / 200, o[1] * L / 100, 0), n += f[a].l + e.tr / 1e3 * e.s
                            }
                            "html" === u ? ee = c.toCSS() : "svg" === u ? ee = c.to2dCSS() : te = [c.props[0], c.props[1], c.props[2], c.props[3], c.props[4], c.props[5], c.props[6], c.props[7], c.props[8], c.props[9], c.props[10], c.props[11], c.props[12], c.props[13], c.props[14], c.props[15]], Q = H
                        }
                        d <= a ? (O = new LetterProps(Q, q, $, G, ee, te), this.renderedLetters.push(O), d += 1, this.lettersChangedFlag = !0) : (O = this.renderedLetters[a], this.lettersChangedFlag = O.update(Q, q, $, G, ee, te) || this.lettersChangedFlag)
                    }
                }
            }, TextAnimatorProperty.prototype.getValue = function() {
                if (this._elem.globalData.frameId !== this._frameId) {
                    this._frameId = this._elem.globalData.frameId;
                    var e, t = this._dynamicProperties.length;
                    for (this.mdf = !1, e = 0; e < t; e += 1) this._dynamicProperties[e].getValue(), this.mdf = this._dynamicProperties[e].mdf || this.mdf
                }
            }, TextAnimatorProperty.prototype.mHelper = new Matrix, TextAnimatorProperty.prototype.defaultPropsArray = [], LetterProps.prototype.update = function(e, t, n, i, a, r) {
                this.mdf.o = !1, this.mdf.sw = !1, this.mdf.sc = !1, this.mdf.fc = !1, this.mdf.m = !1, this.mdf.p = !1;
                var o = !1;
                return this.o !== e && (this.o = e, this.mdf.o = !0, o = !0), this.sw !== t && (this.sw = t, this.mdf.sw = !0, o = !0), this.sc !== n && (this.sc = n, this.mdf.sc = !0, o = !0), this.fc !== i && (this.fc = i, this.mdf.fc = !0, o = !0), this.m !== a && (this.m = a, this.mdf.m = !0, o = !0), !r.length || this.p[0] === r[0] && this.p[1] === r[1] && this.p[4] === r[4] && this.p[5] === r[5] && this.p[12] === r[12] && this.p[13] === r[13] || (this.p = r, this.mdf.p = !0, o = !0), o
            }, TextProperty.prototype.setCurrentData = function(e) {
                var t = this.currentData;
                t.ascent = e.ascent, t.boxWidth = e.boxWidth ? e.boxWidth : t.boxWidth, t.f = e.f, t.fStyle = e.fStyle, t.fWeight = e.fWeight, t.fc = e.fc, t.j = e.j, t.justifyOffset = e.justifyOffset, t.l = e.l, t.lh = e.lh, t.lineWidths = e.lineWidths, t.ls = e.ls, t.of = e.of, t.s = e.s, t.sc = e.sc, t.sw = e.sw, t.t = e.t, t.tr = e.tr, t.fillColorAnim = e.fillColorAnim || t.fillColorAnim, t.strokeColorAnim = e.strokeColorAnim || t.strokeColorAnim, t.strokeWidthAnim = e.strokeWidthAnim || t.strokeWidthAnim, t.yOffset = e.yOffset, t.__complete = !1
            }, TextProperty.prototype.searchProperty = function() {
                return this.kf = this.data.d.k.length > 1, this.kf
            }, TextProperty.prototype.getValue = function() {
                this.mdf = !1;
                var e = this.elem.globalData.frameId;
                if (e !== this._frameId && this.kf || this.firstFrame) {
                    for (var t, n = this.data.d.k, i = 0, a = n.length; i <= a - 1 && (t = n[i].s, !(i === a - 1 || n[i + 1].t > e));) i += 1;
                    this.keysIndex !== i && (t.__complete || this.completeTextData(t), this.setCurrentData(t), this.mdf = !this.firstFrame, this.pv = this.v = this.currentData.t, this.keysIndex = i), this._frameId = e
                }
            }, TextProperty.prototype.completeTextData = function(e) {
                e.__complete = !0;
                var t, n, i, a, r, o, s, l = this.elem.globalData.fontManager,
                    c = this.data,
                    u = [],
                    d = 0,
                    f = c.m.g,
                    h = 0,
                    p = 0,
                    A = 0,
                    m = [],
                    _ = 0,
                    v = 0,
                    g = l.getFontByName(e.f),
                    y = 0,
                    b = g.fStyle.split(" "),
                    w = "normal",
                    k = "normal";
                for (n = b.length, t = 0; t < n; t += 1) switch (b[t].toLowerCase()) {
                    case "italic":
                        k = "italic";
                        break;
                    case "bold":
                        w = "700";
                        break;
                    case "black":
                        w = "900";
                        break;
                    case "medium":
                        w = "500";
                        break;
                    case "regular":
                    case "normal":
                        w = "400";
                    case "light":
                    case "thin":
                        w = "200"
                }
                e.fWeight = w, e.fStyle = k, n = e.t.length;
                var E = e.tr / 1e3 * e.s;
                if (e.sz) {
                    var S = e.sz[0],
                        C = -1;
                    for (t = 0; t < n; t += 1) i = !1, " " === e.t.charAt(t) ? C = t : 13 === e.t.charCodeAt(t) && (_ = 0, i = !0), l.chars ? (s = l.getCharData(e.t.charAt(t), g.fStyle, g.fFamily), y = i ? 0 : s.w * e.s / 100) : y = l.measureText(e.t.charAt(t), e.f, e.s), _ + y > S && " " !== e.t.charAt(t) ? (-1 === C ? n += 1 : t = C, e.t = e.t.substr(0, t) + "\r" + e.t.substr(t === C ? t + 1 : t), C = -1, _ = 0) : (_ += y, _ += E);
                    n = e.t.length
                }
                _ = -E, y = 0;
                var M, P = 0;
                for (t = 0; t < n; t += 1)
                    if (i = !1, " " === (M = e.t.charAt(t)) ? a = "" : 13 === M.charCodeAt(0) ? (P = 0, m.push(_), v = _ > v ? _ : v, _ = -2 * E, a = "", i = !0, A += 1) : a = e.t.charAt(t), l.chars ? (s = l.getCharData(M, g.fStyle, l.getFontByName(e.f).fFamily), y = i ? 0 : s.w * e.s / 100) : y = l.measureText(a, e.f, e.s), " " === M ? P += y + E : (_ += y + E + P, P = 0), u.push({
                            l: y,
                            an: y,
                            add: h,
                            n: i,
                            anIndexes: [],
                            val: a,
                            line: A
                        }), 2 == f) {
                        if (h += y, "" == a || "" == a || t == n - 1) {
                            for ("" != a && "" != a || (h -= y); p <= t;) u[p].an = h, u[p].ind = d, u[p].extra = y, p += 1;
                            d += 1, h = 0
                        }
                    } else if (3 == f) {
                    if (h += y, "" == a || t == n - 1) {
                        for ("" == a && (h -= y); p <= t;) u[p].an = h, u[p].ind = d, u[p].extra = y, p += 1;
                        h = 0, d += 1
                    }
                } else u[d].ind = d, u[d].extra = 0, d += 1;
                if (e.l = u, v = _ > v ? _ : v, m.push(_), e.sz) e.boxWidth = e.sz[0], e.justifyOffset = 0;
                else switch (e.boxWidth = v, e.j) {
                    case 1:
                        e.justifyOffset = -e.boxWidth;
                        break;
                    case 2:
                        e.justifyOffset = -e.boxWidth / 2;
                        break;
                    default:
                        e.justifyOffset = 0
                }
                e.lineWidths = m;
                var T, D, I = c.a;
                o = I.length;
                var x, O, L = [];
                for (r = 0; r < o; r += 1) {
                    for ((T = I[r]).a.sc && (e.strokeColorAnim = !0), T.a.sw && (e.strokeWidthAnim = !0), (T.a.fc || T.a.fh || T.a.fs || T.a.fb) && (e.fillColorAnim = !0), O = 0, x = T.s.b, t = 0; t < n; t += 1)(D = u[t]).anIndexes[r] = O, (1 == x && "" != D.val || 2 == x && "" != D.val && "" != D.val || 3 == x && (D.n || "" == D.val || t == n - 1) || 4 == x && (D.n || t == n - 1)) && (1 === T.s.rn && L.push(O), O += 1);
                    c.a[r].s.totalChars = O;
                    var B, R = -1;
                    if (1 === T.s.rn)
                        for (t = 0; t < n; t += 1) R != (D = u[t]).anIndexes[r] && (R = D.anIndexes[r], B = L.splice(Math.floor(Math.random() * L.length), 1)[0]), D.anIndexes[r] = B
                }
                e.yOffset = e.lh || 1.2 * e.s, e.ls = e.ls || 0, e.ascent = g.ascent * e.s / 100
            }, TextProperty.prototype.updateDocumentData = function(e, t) {
                t = void 0 === t ? this.keysIndex : t;
                var n = this.data.d.k[t].s;
                n.__complete = !1, n.t = e.t, this.keysIndex = -1, this.firstFrame = !0, this.getValue()
            };
            var pooling = {
                    double: function(e) {
                        return e.concat(Array.apply(null, {
                            length: e.length
                        }))
                    }
                },
                point_pool = function() {
                    var e = {
                            newPoint: function() {
                                return t ? i[t -= 1] : [.1, .1]
                            },
                            release: function(e) {
                                t === n && (i = pooling.double(i), n *= 2), i[t] = e, t += 1
                            }
                        },
                        t = 0,
                        n = 8,
                        i = Array.apply(null, {
                            length: n
                        });
                    return e
                }(),
                shape_pool = function() {
                    var e = {
                            clone: function(e, t) {
                                var n, i, r = void 0 === e._length ? e.v.length : e._length,
                                    o = a();
                                for (o.setLength(r), o.c = e.c, n = 0; n < r; n += 1) t ? (i = t.applyToPointArray(e.v[n][0], e.v[n][1], 0, 2), o.setXYAt(i[0], i[1], "v", n), point_pool.release(i), i = t.applyToPointArray(e.o[n][0], e.o[n][1], 0, 2), o.setXYAt(i[0], i[1], "o", n), point_pool.release(i), i = t.applyToPointArray(e.i[n][0], e.i[n][1], 0, 2), o.setXYAt(i[0], i[1], "i", n), point_pool.release(i)) : o.setTripleAt(e.v[n][0], e.v[n][1], e.o[n][0], e.o[n][1], e.i[n][0], e.i[n][1], n);
                                return o
                            },
                            newShape: a,
                            release: r,
                            releaseArray: function(e, t) {
                                for (; t--;) r(e[t])
                            }
                        },
                        t = 0,
                        n = 4,
                        i = Array.apply(null, {
                            length: n
                        });

                    function a() {
                        return t ? i[t -= 1] : new ShapePath
                    }

                    function r(e) {
                        t === n && (i = pooling.double(i), n *= 2);
                        var a, r = e._length;
                        for (a = 0; a < r; a += 1) point_pool.release(e.v[a]), point_pool.release(e.i[a]), point_pool.release(e.o[a]), e.v[a] = null, e.i[a] = null, e.o[a] = null;
                        e._length = 0, e.c = !1, i[t] = e, t += 1
                    }
                    return e
                }(),
                shapeCollection_pool = function() {
                    var e = {
                            newShapeCollection: function() {
                                return t ? i[t -= 1] : new ShapeCollection
                            },
                            release: a,
                            clone: function(e, r) {
                                a(e), t === n && (i = pooling.double(i), n *= 2), i[t] = e, t += 1
                            }
                        },
                        t = 0,
                        n = 4,
                        i = Array.apply(null, {
                            length: n
                        });

                    function a(e) {
                        var a, r = e._length;
                        for (a = 0; a < r; a += 1) shape_pool.release(e.shapes[a]);
                        e._length = 0, t === n && (i = pooling.double(i), n *= 2), i[t] = e, t += 1
                    }
                    return e
                }();

            function BaseRenderer() {}

            function SVGRenderer(e, t) {
                this.animationItem = e, this.layers = null, this.renderedFrame = -1, this.globalData = {
                    frameNum: -1
                }, this.renderConfig = {
                    preserveAspectRatio: t && t.preserveAspectRatio || "xMidYMid meet",
                    progressiveLoad: t && t.progressiveLoad || !1,
                    hideOnTransparent: !t || !1 !== t.hideOnTransparent,
                    viewBoxOnly: t && t.viewBoxOnly || !1,
                    className: t && t.className || ""
                }, this.globalData.renderConfig = this.renderConfig, this.elements = [], this.pendingElements = [], this.destroyed = !1
            }

            function MaskElement(e, t, n) {
                this.dynamicProperties = [], this.data = e, this.element = t, this.globalData = n, this.storedData = [], this.masksProperties = this.data.masksProperties, this.viewData = Array.apply(null, {
                    length: this.masksProperties.length
                }), this.maskElement = null, this.firstFrame = !0;
                var i, a, r, o, s, l, c, u, d = this.globalData.defs,
                    f = this.masksProperties.length,
                    h = this.masksProperties,
                    p = 0,
                    A = [],
                    m = randomString(10),
                    _ = "clipPath",
                    v = "clip-path";
                for (i = 0; i < f; i++)
                    if (("a" !== h[i].mode && "n" !== h[i].mode || h[i].inv || 100 !== h[i].o.k) && (_ = "mask", v = "mask"), "s" != h[i].mode && "i" != h[i].mode || 0 != p ? s = null : ((s = document.createElementNS(svgNS, "rect")).setAttribute("fill", "#ffffff"), s.setAttribute("width", this.element.comp.data.w), s.setAttribute("height", this.element.comp.data.h), A.push(s)), a = document.createElementNS(svgNS, "path"), "n" != h[i].mode) {
                        if (p += 1, "s" == h[i].mode ? a.setAttribute("fill", "#000000") : a.setAttribute("fill", "#ffffff"), a.setAttribute("clip-rule", "nonzero"), 0 !== h[i].x.k) {
                            _ = "mask", v = "mask", u = PropertyFactory.getProp(this.element, h[i].x, 0, null, this.dynamicProperties);
                            var g = "fi_" + randomString(10);
                            (l = document.createElementNS(svgNS, "filter")).setAttribute("id", g), (c = document.createElementNS(svgNS, "feMorphology")).setAttribute("operator", "dilate"), c.setAttribute("in", "SourceGraphic"), c.setAttribute("radius", "0"), l.appendChild(c), d.appendChild(l), "s" == h[i].mode ? a.setAttribute("stroke", "#000000") : a.setAttribute("stroke", "#ffffff")
                        } else c = null, u = null;
                        if (this.storedData[i] = {
                                elem: a,
                                x: u,
                                expan: c,
                                lastPath: "",
                                lastOperator: "",
                                filterId: g,
                                lastRadius: 0
                            }, "i" == h[i].mode) {
                            o = A.length;
                            var y = document.createElementNS(svgNS, "g");
                            for (r = 0; r < o; r += 1) y.appendChild(A[r]);
                            var b = document.createElementNS(svgNS, "mask");
                            b.setAttribute("mask-type", "alpha"), b.setAttribute("id", m + "_" + p), b.appendChild(a), d.appendChild(b), y.setAttribute("mask", "url(" + locationHref + "#" + m + "_" + p + ")"), A.length = 0, A.push(y)
                        } else A.push(a);
                        h[i].inv && !this.solidPath && (this.solidPath = this.createLayerSolidPath()), this.viewData[i] = {
                            elem: a,
                            lastPath: "",
                            op: PropertyFactory.getProp(this.element, h[i].o, 0, .01, this.dynamicProperties),
                            prop: ShapePropertyFactory.getShapeProp(this.element, h[i], 3, this.dynamicProperties, null)
                        }, s && (this.viewData[i].invRect = s), this.viewData[i].prop.k || this.drawPath(h[i], this.viewData[i].prop.v, this.viewData[i])
                    } else this.viewData[i] = {
                        op: PropertyFactory.getProp(this.element, h[i].o, 0, .01, this.dynamicProperties),
                        prop: ShapePropertyFactory.getShapeProp(this.element, h[i], 3, this.dynamicProperties, null),
                        elem: a
                    }, d.appendChild(a);
                for (this.maskElement = document.createElementNS(svgNS, _), f = A.length, i = 0; i < f; i += 1) this.maskElement.appendChild(A[i]);
                this.maskElement.setAttribute("id", m), p > 0 && this.element.maskedElement.setAttribute(v, "url(" + locationHref + "#" + m + ")"), d.appendChild(this.maskElement)
            }

            function BaseElement() {}

            function SVGBaseElement(e, t, n, i, a) {
                this.globalData = n, this.comp = i, this.data = e, this.matteElement = null, this.transformedElement = null, this.isTransparent = !1, this.parentContainer = t, this.layerId = a ? a.layerId : "ly_" + randomString(10), this.placeholder = a, this._sizeChanged = !1, this.init()
            }

            function IShapeElement(e, t, n, i, a) {
                this.shapes = [], this.shapesData = e.shapes, this.stylesList = [], this.itemsData = [], this.prevViewData = [], this.shapeModifiers = [], this.processedElements = [], this._parent.constructor.call(this, e, t, n, i, a)
            }
            BaseRenderer.prototype.checkLayers = function(e) {
                var t, n, i = this.layers.length;
                for (this.completeLayers = !0, t = i - 1; t >= 0; t--) this.elements[t] || (n = this.layers[t]).ip - n.st <= e - this.layers[t].st && n.op - n.st > e - this.layers[t].st && this.buildItem(t), this.completeLayers = !!this.elements[t] && this.completeLayers;
                this.checkPendingElements()
            }, BaseRenderer.prototype.createItem = function(e) {
                switch (e.ty) {
                    case 2:
                        return this.createImage(e);
                    case 0:
                        return this.createComp(e);
                    case 1:
                        return this.createSolid(e);
                    case 4:
                        return this.createShape(e);
                    case 5:
                        return this.createText(e);
                    case 13:
                        return this.createCamera(e);
                    case 99:
                        return null
                }
                return this.createBase(e)
            }, BaseRenderer.prototype.createCamera = function() {
                throw new Error("You're using a 3d camera. Try the html renderer.")
            }, BaseRenderer.prototype.buildAllItems = function() {
                var e, t = this.layers.length;
                for (e = 0; e < t; e += 1) this.buildItem(e);
                this.checkPendingElements()
            }, BaseRenderer.prototype.includeLayers = function(e) {
                this.completeLayers = !1;
                var t, n, i = e.length,
                    a = this.layers.length;
                for (t = 0; t < i; t += 1)
                    for (n = 0; n < a;) {
                        if (this.layers[n].id == e[t].id) {
                            this.layers[n] = e[t];
                            break
                        }
                        n += 1
                    }
            }, BaseRenderer.prototype.setProjectInterface = function(e) {
                this.globalData.projectInterface = e
            }, BaseRenderer.prototype.initItems = function() {
                this.globalData.progressiveLoad || this.buildAllItems()
            }, BaseRenderer.prototype.buildElementParenting = function(e, t, n) {
                n = n || [];
                for (var i = this.elements, a = this.layers, r = 0, o = a.length; r < o;) a[r].ind == t && (i[r] && !0 !== i[r] ? void 0 !== a[r].parent ? (n.push(i[r]), i[r]._isParent = !0, this.buildElementParenting(e, a[r].parent, n)) : (n.push(i[r]), i[r]._isParent = !0, e.setHierarchy(n)) : (this.buildItem(r), this.addPendingElement(e))), r += 1
            }, BaseRenderer.prototype.addPendingElement = function(e) {
                this.pendingElements.push(e)
            }, extendPrototype(BaseRenderer, SVGRenderer), SVGRenderer.prototype.createBase = function(e) {
                return new SVGBaseElement(e, this.layerElement, this.globalData, this)
            }, SVGRenderer.prototype.createShape = function(e) {
                return new IShapeElement(e, this.layerElement, this.globalData, this)
            }, SVGRenderer.prototype.createText = function(e) {
                return new SVGTextElement(e, this.layerElement, this.globalData, this)
            }, SVGRenderer.prototype.createImage = function(e) {
                return new IImageElement(e, this.layerElement, this.globalData, this)
            }, SVGRenderer.prototype.createComp = function(e) {
                return new ICompElement(e, this.layerElement, this.globalData, this)
            }, SVGRenderer.prototype.createSolid = function(e) {
                return new ISolidElement(e, this.layerElement, this.globalData, this)
            }, SVGRenderer.prototype.configAnimation = function(e) {
                this.layerElement = document.createElementNS(svgNS, "svg"), this.layerElement.setAttribute("xmlns", "http://www.w3.org/2000/svg"), this.layerElement.setAttribute("viewBox", "0 0 " + e.w + " " + e.h), this.renderConfig.viewBoxOnly || (this.layerElement.setAttribute("width", e.w), this.layerElement.setAttribute("height", e.h), this.layerElement.style.width = "100%", this.layerElement.style.height = "100%"), this.renderConfig.className && this.layerElement.setAttribute("class", this.renderConfig.className), this.layerElement.setAttribute("preserveAspectRatio", this.renderConfig.preserveAspectRatio), this.animationItem.wrapper.appendChild(this.layerElement);
                var t = document.createElementNS(svgNS, "defs");
                this.globalData.defs = t, this.layerElement.appendChild(t), this.globalData.getAssetData = this.animationItem.getAssetData.bind(this.animationItem), this.globalData.getAssetsPath = this.animationItem.getAssetsPath.bind(this.animationItem), this.globalData.progressiveLoad = this.renderConfig.progressiveLoad, this.globalData.frameId = 0, this.globalData.nm = e.nm, this.globalData.compSize = {
                    w: e.w,
                    h: e.h
                }, this.data = e, this.globalData.frameRate = e.fr;
                var n = document.createElementNS(svgNS, "clipPath"),
                    i = document.createElementNS(svgNS, "rect");
                i.setAttribute("width", e.w), i.setAttribute("height", e.h), i.setAttribute("x", 0), i.setAttribute("y", 0);
                var a = "animationMask_" + randomString(10);
                n.setAttribute("id", a), n.appendChild(i);
                var r = document.createElementNS(svgNS, "g");
                r.setAttribute("clip-path", "url(" + locationHref + "#" + a + ")"), this.layerElement.appendChild(r), t.appendChild(n), this.layerElement = r, this.layers = e.layers, this.globalData.fontManager = new FontManager, this.globalData.fontManager.addChars(e.chars), this.globalData.fontManager.addFonts(e.fonts, t), this.elements = Array.apply(null, {
                    length: e.layers.length
                })
            }, SVGRenderer.prototype.destroy = function() {
                this.animationItem.wrapper.innerHTML = "", this.layerElement = null, this.globalData.defs = null;
                var e, t = this.layers ? this.layers.length : 0;
                for (e = 0; e < t; e++) this.elements[e] && this.elements[e].destroy();
                this.elements.length = 0, this.destroyed = !0, this.animationItem = null
            }, SVGRenderer.prototype.updateContainerSize = function() {}, SVGRenderer.prototype.buildItem = function(e) {
                var t = this.elements;
                if (!t[e] && 99 != this.layers[e].ty) {
                    t[e] = !0;
                    var n = this.createItem(this.layers[e]);
                    t[e] = n, expressionsPlugin && (0 === this.layers[e].ty && this.globalData.projectInterface.registerComposition(n), n.initExpressions()), this.appendElementInPos(n, e), this.layers[e].tt && (this.elements[e - 1] && !0 !== this.elements[e - 1] ? n.setMatte(t[e - 1].layerId) : (this.buildItem(e - 1), this.addPendingElement(n)))
                }
            }, SVGRenderer.prototype.checkPendingElements = function() {
                for (; this.pendingElements.length;) {
                    var e = this.pendingElements.pop();
                    if (e.checkParenting(), e.data.tt)
                        for (var t = 0, n = this.elements.length; t < n;) {
                            if (this.elements[t] === e) {
                                e.setMatte(this.elements[t - 1].layerId);
                                break
                            }
                            t += 1
                        }
                }
            }, SVGRenderer.prototype.renderFrame = function(e) {
                if (this.renderedFrame != e && !this.destroyed) {
                    null === e ? e = this.renderedFrame : this.renderedFrame = e, this.globalData.frameNum = e, this.globalData.frameId += 1, this.globalData.projectInterface.currentFrame = e;
                    var t, n = this.layers.length;
                    for (this.completeLayers || this.checkLayers(e), t = n - 1; t >= 0; t--)(this.completeLayers || this.elements[t]) && this.elements[t].prepareFrame(e - this.layers[t].st);
                    for (t = n - 1; t >= 0; t--)(this.completeLayers || this.elements[t]) && this.elements[t].renderFrame()
                }
            }, SVGRenderer.prototype.appendElementInPos = function(e, t) {
                var n = e.getBaseElement();
                if (n) {
                    for (var i, a = 0; a < t;) this.elements[a] && !0 !== this.elements[a] && this.elements[a].getBaseElement() && (i = this.elements[a].getBaseElement()), a += 1;
                    i ? this.layerElement.insertBefore(n, i) : this.layerElement.appendChild(n)
                }
            }, SVGRenderer.prototype.hide = function() {
                this.layerElement.style.display = "none"
            }, SVGRenderer.prototype.show = function() {
                this.layerElement.style.display = "block"
            }, SVGRenderer.prototype.searchExtraCompositions = function(e) {
                var t, n = e.length,
                    i = document.createElementNS(svgNS, "g");
                for (t = 0; t < n; t += 1)
                    if (e[t].xt) {
                        var a = this.createComp(e[t], i, this.globalData.comp, null);
                        a.initExpressions(), this.globalData.projectInterface.registerComposition(a)
                    }
            }, MaskElement.prototype.getMaskProperty = function(e) {
                return this.viewData[e].prop
            }, MaskElement.prototype.prepareFrame = function() {
                var e, t = this.dynamicProperties.length;
                for (e = 0; e < t; e += 1) this.dynamicProperties[e].getValue()
            }, MaskElement.prototype.renderFrame = function(e) {
                var t, n = this.masksProperties.length;
                for (t = 0; t < n; t++)
                    if ((this.viewData[t].prop.mdf || this.firstFrame) && this.drawPath(this.masksProperties[t], this.viewData[t].prop.v, this.viewData[t]), (this.viewData[t].op.mdf || this.firstFrame) && this.viewData[t].elem.setAttribute("fill-opacity", this.viewData[t].op.v), "n" !== this.masksProperties[t].mode && (this.viewData[t].invRect && (this.element.finalTransform.mProp.mdf || this.firstFrame) && (this.viewData[t].invRect.setAttribute("x", -e.props[12]), this.viewData[t].invRect.setAttribute("y", -e.props[13])), this.storedData[t].x && (this.storedData[t].x.mdf || this.firstFrame))) {
                        var i = this.storedData[t].expan;
                        this.storedData[t].x.v < 0 ? ("erode" !== this.storedData[t].lastOperator && (this.storedData[t].lastOperator = "erode", this.storedData[t].elem.setAttribute("filter", "url(" + locationHref + "#" + this.storedData[t].filterId + ")")), i.setAttribute("radius", -this.storedData[t].x.v)) : ("dilate" !== this.storedData[t].lastOperator && (this.storedData[t].lastOperator = "dilate", this.storedData[t].elem.setAttribute("filter", null)), this.storedData[t].elem.setAttribute("stroke-width", 2 * this.storedData[t].x.v))
                    }
                this.firstFrame = !1
            }, MaskElement.prototype.getMaskelement = function() {
                return this.maskElement
            }, MaskElement.prototype.createLayerSolidPath = function() {
                var e = "M0,0 ";
                return e += " h" + this.globalData.compSize.w, e += " v" + this.globalData.compSize.h, e += " h-" + this.globalData.compSize.w, e += " v-" + this.globalData.compSize.h + " "
            }, MaskElement.prototype.drawPath = function(e, t, n) {
                var i, a, r = " M" + t.v[0][0] + "," + t.v[0][1];
                for (a = t._length, i = 1; i < a; i += 1) r += " C" + bm_rnd(t.o[i - 1][0]) + "," + bm_rnd(t.o[i - 1][1]) + " " + bm_rnd(t.i[i][0]) + "," + bm_rnd(t.i[i][1]) + " " + bm_rnd(t.v[i][0]) + "," + bm_rnd(t.v[i][1]);
                t.c && a > 1 && (r += " C" + bm_rnd(t.o[i - 1][0]) + "," + bm_rnd(t.o[i - 1][1]) + " " + bm_rnd(t.i[0][0]) + "," + bm_rnd(t.i[0][1]) + " " + bm_rnd(t.v[0][0]) + "," + bm_rnd(t.v[0][1])), n.lastPath !== r && (n.elem && (t.c ? e.inv ? n.elem.setAttribute("d", this.solidPath + r) : n.elem.setAttribute("d", r) : n.elem.setAttribute("d", "")), n.lastPath = r)
            }, MaskElement.prototype.destroy = function() {
                this.element = null, this.globalData = null, this.maskElement = null, this.data = null, this.masksProperties = null
            }, BaseElement.prototype.checkMasks = function() {
                if (!this.data.hasMask) return !1;
                for (var e = 0, t = this.data.masksProperties.length; e < t;) {
                    if ("n" !== this.data.masksProperties[e].mode && !1 !== this.data.masksProperties[e].cl) return !0;
                    e += 1
                }
                return !1
            }, BaseElement.prototype.checkParenting = function() {
                void 0 !== this.data.parent && this.comp.buildElementParenting(this, this.data.parent)
            }, BaseElement.prototype.prepareFrame = function(e) {
                this.data.ip - this.data.st <= e && this.data.op - this.data.st > e ? !0 !== this.isVisible && (this.elemMdf = !0, this.globalData.mdf = !0, this.isVisible = !0, this.firstFrame = !0, this.data.hasMask && (this.maskManager.firstFrame = !0)) : !1 !== this.isVisible && (this.elemMdf = !0, this.globalData.mdf = !0, this.isVisible = !1);
                var t, n = this.dynamicProperties.length;
                for (t = 0; t < n; t += 1)(this.isVisible || this._isParent && "transform" === this.dynamicProperties[t].type) && (this.dynamicProperties[t].getValue(), this.dynamicProperties[t].mdf && (this.elemMdf = !0, this.globalData.mdf = !0));
                return this.data.hasMask && this.isVisible && this.maskManager.prepareFrame(e * this.data.sr), this.currentFrameNum = e * this.data.sr, this.isVisible
            }, BaseElement.prototype.globalToLocal = function(e) {
                var t = [];
                t.push(this.finalTransform);
                for (var n = !0, i = this.comp; n;) i.finalTransform ? (i.data.hasMask && t.splice(0, 0, i.finalTransform), i = i.comp) : n = !1;
                var a, r, o = t.length;
                for (a = 0; a < o; a += 1) r = t[a].mat.applyToPointArray(0, 0, 0), e = [e[0] - r[0], e[1] - r[1], 0];
                return e
            }, BaseElement.prototype.initExpressions = function() {
                this.layerInterface = LayerExpressionInterface(this), this.data.hasMask && this.layerInterface.registerMaskInterface(this.maskManager);
                var e = EffectsExpressionInterface.createEffectsInterface(this, this.layerInterface);
                this.layerInterface.registerEffectsInterface(e), 0 === this.data.ty || this.data.xt ? this.compInterface = CompExpressionInterface(this) : 4 === this.data.ty ? this.layerInterface.shapeInterface = ShapeExpressionInterface.createShapeInterface(this.shapesData, this.itemsData, this.layerInterface) : 5 === this.data.ty && (this.layerInterface.textInterface = TextExpressionInterface(this))
            }, BaseElement.prototype.setBlendMode = function() {
                var e = "";
                switch (this.data.bm) {
                    case 1:
                        e = "multiply";
                        break;
                    case 2:
                        e = "screen";
                        break;
                    case 3:
                        e = "overlay";
                        break;
                    case 4:
                        e = "darken";
                        break;
                    case 5:
                        e = "lighten";
                        break;
                    case 6:
                        e = "color-dodge";
                        break;
                    case 7:
                        e = "color-burn";
                        break;
                    case 8:
                        e = "hard-light";
                        break;
                    case 9:
                        e = "soft-light";
                        break;
                    case 10:
                        e = "difference";
                        break;
                    case 11:
                        e = "exclusion";
                        break;
                    case 12:
                        e = "hue";
                        break;
                    case 13:
                        e = "saturation";
                        break;
                    case 14:
                        e = "color";
                        break;
                    case 15:
                        e = "luminosity"
                }(this.baseElement || this.layerElement).style["mix-blend-mode"] = e
            }, BaseElement.prototype.init = function() {
                this.data.sr || (this.data.sr = 1), this.dynamicProperties = this.dynamicProperties || [], this.data.ef && (this.effects = new EffectsManager(this.data, this, this.dynamicProperties)), this.hidden = !1, this.firstFrame = !0, this.isVisible = !1, this._isParent = !1, this.currentFrameNum = -99999, this.lastNum = -99999, this.data.ks && (this.finalTransform = {
                    mProp: PropertyFactory.getProp(this, this.data.ks, 2, null, this.dynamicProperties),
                    matMdf: !1,
                    opMdf: !1,
                    mat: new Matrix,
                    opacity: 1
                }, this.data.ao && (this.finalTransform.mProp.autoOriented = !0), this.finalTransform.op = this.finalTransform.mProp.o, this.transform = this.finalTransform.mProp, 11 !== this.data.ty && this.createElements(), this.data.hasMask && this.addMasks(this.data)), this.elemMdf = !1
            }, BaseElement.prototype.getType = function() {
                return this.type
            }, BaseElement.prototype.resetHierarchy = function() {
                this.hierarchy ? this.hierarchy.length = 0 : this.hierarchy = []
            }, BaseElement.prototype.getHierarchy = function() {
                return this.hierarchy || (this.hierarchy = []), this.hierarchy
            }, BaseElement.prototype.setHierarchy = function(e) {
                this.hierarchy = e
            }, BaseElement.prototype.getLayerSize = function() {
                return 5 === this.data.ty ? {
                    w: this.data.textData.width,
                    h: this.data.textData.height
                } : {
                    w: this.data.width,
                    h: this.data.height
                }
            }, BaseElement.prototype.hide = function() {}, BaseElement.prototype.sourceRectAtTime = function() {
                return {
                    top: 0,
                    left: 0,
                    width: 100,
                    height: 100
                }
            }, BaseElement.prototype.mHelper = new Matrix, createElement(BaseElement, SVGBaseElement), SVGBaseElement.prototype.createElements = function() {
                this.layerElement = document.createElementNS(svgNS, "g"), this.transformedElement = this.layerElement, this.data.hasMask && (this.maskedElement = this.layerElement);
                var e = null;
                if (this.data.td) {
                    if (3 == this.data.td || 1 == this.data.td) {
                        var t = document.createElementNS(svgNS, "mask");
                        if (t.setAttribute("id", this.layerId), t.setAttribute("mask-type", 3 == this.data.td ? "luminance" : "alpha"), t.appendChild(this.layerElement), e = t, this.globalData.defs.appendChild(t), !featureSupport.maskType && 1 == this.data.td) {
                            t.setAttribute("mask-type", "luminance");
                            var n = randomString(10),
                                i = filtersFactory.createFilter(n);
                            this.globalData.defs.appendChild(i), i.appendChild(filtersFactory.createAlphaToLuminanceFilter()), (l = document.createElementNS(svgNS, "g")).appendChild(this.layerElement), e = l, t.appendChild(l), l.setAttribute("filter", "url(" + locationHref + "#" + n + ")")
                        }
                    } else if (2 == this.data.td) {
                        var a = document.createElementNS(svgNS, "mask");
                        a.setAttribute("id", this.layerId), a.setAttribute("mask-type", "alpha");
                        var r = document.createElementNS(svgNS, "g");
                        a.appendChild(r), n = randomString(10), i = filtersFactory.createFilter(n);
                        var o = document.createElementNS(svgNS, "feColorMatrix");
                        o.setAttribute("type", "matrix"), o.setAttribute("color-interpolation-filters", "sRGB"), o.setAttribute("values", "1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 -1 1"), i.appendChild(o), this.globalData.defs.appendChild(i);
                        var s = document.createElementNS(svgNS, "rect");
                        if (s.setAttribute("width", this.comp.data.w), s.setAttribute("height", this.comp.data.h), s.setAttribute("x", "0"), s.setAttribute("y", "0"), s.setAttribute("fill", "#ffffff"), s.setAttribute("opacity", "0"), r.setAttribute("filter", "url(" + locationHref + "#" + n + ")"), r.appendChild(s), r.appendChild(this.layerElement), e = r, !featureSupport.maskType) {
                            a.setAttribute("mask-type", "luminance"), i.appendChild(filtersFactory.createAlphaToLuminanceFilter());
                            var l = document.createElementNS(svgNS, "g");
                            r.appendChild(s), l.appendChild(this.layerElement), e = l, r.appendChild(l)
                        }
                        this.globalData.defs.appendChild(a)
                    }
                } else(this.data.hasMask || this.data.tt) && this.data.tt ? (this.matteElement = document.createElementNS(svgNS, "g"), this.matteElement.appendChild(this.layerElement), e = this.matteElement, this.baseElement = this.matteElement) : this.baseElement = this.layerElement;
                if (!this.data.ln && !this.data.cl || 4 !== this.data.ty && 0 !== this.data.ty || (this.data.ln && this.layerElement.setAttribute("id", this.data.ln), this.data.cl && this.layerElement.setAttribute("class", this.data.cl)), 0 === this.data.ty) {
                    var c = document.createElementNS(svgNS, "clipPath"),
                        u = document.createElementNS(svgNS, "path");
                    u.setAttribute("d", "M0,0 L" + this.data.w + ",0 L" + this.data.w + "," + this.data.h + " L0," + this.data.h + "z");
                    var d = "cp_" + randomString(8);
                    if (c.setAttribute("id", d), c.appendChild(u), this.globalData.defs.appendChild(c), this.checkMasks()) {
                        var f = document.createElementNS(svgNS, "g");
                        f.setAttribute("clip-path", "url(" + locationHref + "#" + d + ")"), f.appendChild(this.layerElement), this.transformedElement = f, e ? e.appendChild(this.transformedElement) : this.baseElement = this.transformedElement
                    } else this.layerElement.setAttribute("clip-path", "url(" + locationHref + "#" + d + ")")
                }
                0 !== this.data.bm && this.setBlendMode(), this.layerElement !== this.parentContainer && (this.placeholder = null), this.data.ef && (this.effectsManager = new SVGEffects(this)), this.checkParenting()
            }, SVGBaseElement.prototype.setBlendMode = BaseElement.prototype.setBlendMode, SVGBaseElement.prototype.renderFrame = function(e) {
                if (3 === this.data.ty || this.data.hd || !this.isVisible) return !1;
                var t;
                this.lastNum = this.currentFrameNum, this.finalTransform.opMdf = this.firstFrame || this.finalTransform.op.mdf, this.finalTransform.matMdf = this.firstFrame || this.finalTransform.mProp.mdf, this.finalTransform.opacity = this.finalTransform.op.v;
                var n = this.finalTransform.mat;
                if (this.hierarchy) {
                    var i = 0,
                        a = this.hierarchy.length;
                    if (!this.finalTransform.matMdf)
                        for (; i < a;) {
                            if (this.hierarchy[i].finalTransform.mProp.mdf) {
                                this.finalTransform.matMdf = !0;
                                break
                            }
                            i += 1
                        }
                    if (this.finalTransform.matMdf)
                        for (t = this.finalTransform.mProp.v.props, n.cloneFromProps(t), i = 0; i < a; i += 1) t = this.hierarchy[i].finalTransform.mProp.v.props, n.transform(t[0], t[1], t[2], t[3], t[4], t[5], t[6], t[7], t[8], t[9], t[10], t[11], t[12], t[13], t[14], t[15])
                } else this.isVisible && (n = this.finalTransform.mProp.v);
                return this.finalTransform.matMdf && this.layerElement && this.transformedElement.setAttribute("transform", n.to2dCSS()), this.finalTransform.opMdf && this.layerElement && (this.finalTransform.op.v <= 0 ? !this.isTransparent && this.globalData.renderConfig.hideOnTransparent && (this.isTransparent = !0, this.hide()) : this.hidden && this.isTransparent && (this.isTransparent = !1, this.show()), this.transformedElement.setAttribute("opacity", this.finalTransform.op.v)), this.data.hasMask && this.maskManager.renderFrame(n), this.effectsManager && this.effectsManager.renderFrame(this.firstFrame), this.isVisible
            }, SVGBaseElement.prototype.destroy = function() {
                this.layerElement = null, this.parentContainer = null, this.matteElement && (this.matteElement = null), this.maskManager && this.maskManager.destroy()
            }, SVGBaseElement.prototype.getBaseElement = function() {
                return this.baseElement
            }, SVGBaseElement.prototype.addMasks = function(e) {
                this.maskManager = new MaskElement(e, this, this.globalData)
            }, SVGBaseElement.prototype.setMatte = function(e) {
                this.matteElement && this.matteElement.setAttribute("mask", "url(" + locationHref + "#" + e + ")")
            }, SVGBaseElement.prototype.hide = function() {
                this.hidden || (this.layerElement.style.display = "none", this.hidden = !0)
            }, SVGBaseElement.prototype.show = function() {
                this.isVisible && !this.isTransparent && (this.hidden = !1, this.layerElement.style.display = "block")
            }, createElement(SVGBaseElement, IShapeElement), IShapeElement.prototype.identityMatrix = new Matrix, IShapeElement.prototype.lcEnum = {
                1: "butt",
                2: "round",
                3: "square"
            }, IShapeElement.prototype.ljEnum = {
                1: "miter",
                2: "round",
                3: "butt"
            }, IShapeElement.prototype.searchProcessedElement = function(e) {
                for (var t = this.processedElements.length; t;)
                    if (t -= 1, this.processedElements[t].elem === e) return this.processedElements[t].pos;
                return 0
            }, IShapeElement.prototype.addProcessedElement = function(e, t) {
                for (var n = this.processedElements.length; n;)
                    if (n -= 1, this.processedElements[n].elem === e) {
                        this.processedElements[n].pos = t;
                        break
                    }
                0 === n && this.processedElements.push({
                    elem: e,
                    pos: t
                })
            }, IShapeElement.prototype.buildExpressionInterface = function() {}, IShapeElement.prototype.createElements = function() {
                this._parent.createElements.call(this), this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, this.layerElement, this.dynamicProperties, 0, [], !0), this.data.hd && !this.data.td || styleUnselectableDiv(this.layerElement)
            }, IShapeElement.prototype.setGradientData = function(e, t, n) {
                var i, a = "gr_" + randomString(10);
                (i = 1 === t.t ? document.createElementNS(svgNS, "linearGradient") : document.createElementNS(svgNS, "radialGradient")).setAttribute("id", a), i.setAttribute("spreadMethod", "pad"), i.setAttribute("gradientUnits", "userSpaceOnUse");
                var r, o, s, l = [];
                for (s = 4 * t.g.p, o = 0; o < s; o += 4) r = document.createElementNS(svgNS, "stop"), i.appendChild(r), l.push(r);
                e.setAttribute("gf" === t.ty ? "fill" : "stroke", "url(#" + a + ")"), this.globalData.defs.appendChild(i), n.gf = i, n.cst = l
            }, IShapeElement.prototype.setGradientOpacity = function(e, t, n) {
                if (e.g.k.k[0].s && e.g.k.k[0].s.length > 4 * e.g.p || e.g.k.k.length > 4 * e.g.p) {
                    var i, a, r, o, s = document.createElementNS(svgNS, "mask"),
                        l = document.createElementNS(svgNS, "path");
                    s.appendChild(l);
                    var c = "op_" + randomString(10),
                        u = "mk_" + randomString(10);
                    s.setAttribute("id", u), (i = 1 === e.t ? document.createElementNS(svgNS, "linearGradient") : document.createElementNS(svgNS, "radialGradient")).setAttribute("id", c), i.setAttribute("spreadMethod", "pad"), i.setAttribute("gradientUnits", "userSpaceOnUse"), o = e.g.k.k[0].s ? e.g.k.k[0].s.length : e.g.k.k.length;
                    var d = [];
                    for (r = 4 * e.g.p; r < o; r += 2)(a = document.createElementNS(svgNS, "stop")).setAttribute("stop-color", "rgb(255,255,255)"), i.appendChild(a), d.push(a);
                    return l.setAttribute("gf" === e.ty ? "fill" : "stroke", "url(#" + c + ")"), this.globalData.defs.appendChild(i), this.globalData.defs.appendChild(s), t.of = i, t.ost = d, n.msElem = l, u
                }
            }, IShapeElement.prototype.createStyleElement = function(e, t, n) {
                var i = {},
                    a = {
                        data: e,
                        type: e.ty,
                        d: "",
                        ld: "",
                        lvl: t,
                        mdf: !1,
                        closed: !1
                    },
                    r = document.createElementNS(svgNS, "path");
                if (i.o = PropertyFactory.getProp(this, e.o, 0, .01, n), ("st" == e.ty || "gs" == e.ty) && (r.setAttribute("stroke-linecap", this.lcEnum[e.lc] || "round"), r.setAttribute("stroke-linejoin", this.ljEnum[e.lj] || "round"), r.setAttribute("fill-opacity", "0"), 1 == e.lj && r.setAttribute("stroke-miterlimit", e.ml), i.w = PropertyFactory.getProp(this, e.w, 0, null, n), e.d)) {
                    var o = PropertyFactory.getDashProp(this, e.d, "svg", n);
                    o.k || (r.setAttribute("stroke-dasharray", o.dasharray), r.setAttribute("stroke-dashoffset", o.dashoffset)), i.d = o
                }
                if ("fl" == e.ty || "st" == e.ty) i.c = PropertyFactory.getProp(this, e.c, 1, 255, n);
                else {
                    i.g = PropertyFactory.getGradientProp(this, e.g, n), 2 == e.t && (i.h = PropertyFactory.getProp(this, e.h, 0, .01, n), i.a = PropertyFactory.getProp(this, e.a, 0, degToRads, n)), i.s = PropertyFactory.getProp(this, e.s, 1, null, n), i.e = PropertyFactory.getProp(this, e.e, 1, null, n), this.setGradientData(r, e, i, a);
                    var s = this.setGradientOpacity(e, i, a);
                    s && r.setAttribute("mask", "url(#" + s + ")")
                }
                return i.elem = r, 2 === e.r && r.setAttribute("fill-rule", "evenodd"), e.ln && r.setAttribute("id", e.ln), e.cl && r.setAttribute("class", e.cl), a.pElem = r, this.stylesList.push(a), i.style = a, i
            }, IShapeElement.prototype.createGroupElement = function(e) {
                var t = {
                        it: [],
                        prevViewData: []
                    },
                    n = document.createElementNS(svgNS, "g");
                return t.gr = n, e.ln && t.gr.setAttribute("id", e.ln), t
            }, IShapeElement.prototype.createTransformElement = function(e, t) {
                return {
                    transform: {
                        op: PropertyFactory.getProp(this, e.o, 0, .01, t),
                        mProps: PropertyFactory.getProp(this, e, 2, null, t)
                    },
                    elements: []
                }
            }, IShapeElement.prototype.createShapeElement = function(e, t, n, i) {
                var a = {
                        elements: [],
                        caches: [],
                        styles: [],
                        transformers: t,
                        lStr: ""
                    },
                    r = 4;
                return "rc" == e.ty ? r = 5 : "el" == e.ty ? r = 6 : "sr" == e.ty && (r = 7), a.sh = ShapePropertyFactory.getShapeProp(this, e, r, i), a.lvl = n, this.shapes.push(a.sh), this.addShapeToModifiers(a), a
            };
            var cont = 0;

            function ITextElement(e, t, n, i) {}

            function SVGTextElement(e, t, n, i, a) {
                this.textSpans = [], this.renderType = "svg", this._parent.constructor.call(this, e, t, n, i, a)
            }

            function SVGTintFilter(e, t) {
                this.filterManager = t;
                var n = document.createElementNS(svgNS, "feColorMatrix");
                if (n.setAttribute("type", "matrix"), n.setAttribute("color-interpolation-filters", "linearRGB"), n.setAttribute("values", "0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"), n.setAttribute("result", "f1"), e.appendChild(n), (n = document.createElementNS(svgNS, "feColorMatrix")).setAttribute("type", "matrix"), n.setAttribute("color-interpolation-filters", "sRGB"), n.setAttribute("values", "1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"), n.setAttribute("result", "f2"), e.appendChild(n), this.matrixFilter = n, 100 !== t.effectElements[2].p.v || t.effectElements[2].p.k) {
                    var i, a = document.createElementNS(svgNS, "feMerge");
                    e.appendChild(a), (i = document.createElementNS(svgNS, "feMergeNode")).setAttribute("in", "SourceGraphic"), a.appendChild(i), (i = document.createElementNS(svgNS, "feMergeNode")).setAttribute("in", "f2"), a.appendChild(i)
                }
            }

            function SVGFillFilter(e, t) {
                this.filterManager = t;
                var n = document.createElementNS(svgNS, "feColorMatrix");
                n.setAttribute("type", "matrix"), n.setAttribute("color-interpolation-filters", "sRGB"), n.setAttribute("values", "1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"), e.appendChild(n), this.matrixFilter = n
            }

            function SVGStrokeEffect(e, t) {
                this.initialized = !1, this.filterManager = t, this.elem = e, this.paths = []
            }

            function SVGTritoneFilter(e, t) {
                this.filterManager = t;
                var n = document.createElementNS(svgNS, "feColorMatrix");
                n.setAttribute("type", "matrix"), n.setAttribute("color-interpolation-filters", "linearRGB"), n.setAttribute("values", "0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"), n.setAttribute("result", "f1"), e.appendChild(n);
                var i = document.createElementNS(svgNS, "feComponentTransfer");
                i.setAttribute("color-interpolation-filters", "sRGB"), e.appendChild(i), this.matrixFilter = i;
                var a = document.createElementNS(svgNS, "feFuncR");
                a.setAttribute("type", "table"), i.appendChild(a), this.feFuncR = a;
                var r = document.createElementNS(svgNS, "feFuncG");
                r.setAttribute("type", "table"), i.appendChild(r), this.feFuncG = r;
                var o = document.createElementNS(svgNS, "feFuncB");
                o.setAttribute("type", "table"), i.appendChild(o), this.feFuncB = o
            }

            function SVGProLevelsFilter(e, t) {
                this.filterManager = t;
                var n = this.filterManager.effectElements,
                    i = document.createElementNS(svgNS, "feComponentTransfer");
                (n[9].p.k || 0 !== n[9].p.v || n[10].p.k || 1 !== n[10].p.v || n[11].p.k || 1 !== n[11].p.v || n[12].p.k || 0 !== n[12].p.v || n[13].p.k || 1 !== n[13].p.v) && (this.feFuncR = this.createFeFunc("feFuncR", i)), (n[16].p.k || 0 !== n[16].p.v || n[17].p.k || 1 !== n[17].p.v || n[18].p.k || 1 !== n[18].p.v || n[19].p.k || 0 !== n[19].p.v || n[20].p.k || 1 !== n[20].p.v) && (this.feFuncG = this.createFeFunc("feFuncG", i)), (n[23].p.k || 0 !== n[23].p.v || n[24].p.k || 1 !== n[24].p.v || n[25].p.k || 1 !== n[25].p.v || n[26].p.k || 0 !== n[26].p.v || n[27].p.k || 1 !== n[27].p.v) && (this.feFuncB = this.createFeFunc("feFuncB", i)), (n[30].p.k || 0 !== n[30].p.v || n[31].p.k || 1 !== n[31].p.v || n[32].p.k || 1 !== n[32].p.v || n[33].p.k || 0 !== n[33].p.v || n[34].p.k || 1 !== n[34].p.v) && (this.feFuncA = this.createFeFunc("feFuncA", i)), (this.feFuncR || this.feFuncG || this.feFuncB || this.feFuncA) && (i.setAttribute("color-interpolation-filters", "sRGB"), e.appendChild(i), i = document.createElementNS(svgNS, "feComponentTransfer")), (n[2].p.k || 0 !== n[2].p.v || n[3].p.k || 1 !== n[3].p.v || n[4].p.k || 1 !== n[4].p.v || n[5].p.k || 0 !== n[5].p.v || n[6].p.k || 1 !== n[6].p.v) && (i.setAttribute("color-interpolation-filters", "sRGB"), e.appendChild(i), this.feFuncRComposed = this.createFeFunc("feFuncR", i), this.feFuncGComposed = this.createFeFunc("feFuncG", i), this.feFuncBComposed = this.createFeFunc("feFuncB", i))
            }

            function SVGDropShadowEffect(e, t) {
                e.setAttribute("x", "-100%"), e.setAttribute("y", "-100%"), e.setAttribute("width", "400%"), e.setAttribute("height", "400%"), this.filterManager = t;
                var n = document.createElementNS(svgNS, "feGaussianBlur");
                n.setAttribute("in", "SourceAlpha"), n.setAttribute("result", "drop_shadow_1"), n.setAttribute("stdDeviation", "0"), this.feGaussianBlur = n, e.appendChild(n);
                var i = document.createElementNS(svgNS, "feOffset");
                i.setAttribute("dx", "25"), i.setAttribute("dy", "0"), i.setAttribute("in", "drop_shadow_1"), i.setAttribute("result", "drop_shadow_2"), this.feOffset = i, e.appendChild(i);
                var a = document.createElementNS(svgNS, "feFlood");
                a.setAttribute("flood-color", "#00ff00"), a.setAttribute("flood-opacity", "1"), a.setAttribute("result", "drop_shadow_3"), this.feFlood = a, e.appendChild(a);
                var r = document.createElementNS(svgNS, "feComposite");
                r.setAttribute("in", "drop_shadow_3"), r.setAttribute("in2", "drop_shadow_2"), r.setAttribute("operator", "in"), r.setAttribute("result", "drop_shadow_4"), e.appendChild(r);
                var o, s = document.createElementNS(svgNS, "feMerge");
                e.appendChild(s), o = document.createElementNS(svgNS, "feMergeNode"), s.appendChild(o), (o = document.createElementNS(svgNS, "feMergeNode")).setAttribute("in", "SourceGraphic"), this.feMergeNode = o, this.feMerge = s, this.originalNodeAdded = !1, s.appendChild(o)
            }

            function SVGMatte3Effect(e, t, n) {
                this.initialized = !1, this.filterManager = t, this.filterElem = e, this.elem = n, n.matteElement = document.createElementNS(svgNS, "g"), n.matteElement.appendChild(n.layerElement), n.matteElement.appendChild(n.transformedElement), n.baseElement = n.matteElement
            }

            function SVGEffects(e) {
                var t, n, i = e.data.ef.length,
                    a = randomString(10),
                    r = filtersFactory.createFilter(a),
                    o = 0;
                for (this.filters = [], t = 0; t < i; t += 1) 20 === e.data.ef[t].ty ? (o += 1, n = new SVGTintFilter(r, e.effects.effectElements[t]), this.filters.push(n)) : 21 === e.data.ef[t].ty ? (o += 1, n = new SVGFillFilter(r, e.effects.effectElements[t]), this.filters.push(n)) : 22 === e.data.ef[t].ty ? (n = new SVGStrokeEffect(e, e.effects.effectElements[t]), this.filters.push(n)) : 23 === e.data.ef[t].ty ? (o += 1, n = new SVGTritoneFilter(r, e.effects.effectElements[t]), this.filters.push(n)) : 24 === e.data.ef[t].ty ? (o += 1, n = new SVGProLevelsFilter(r, e.effects.effectElements[t]), this.filters.push(n)) : 25 === e.data.ef[t].ty ? (o += 1, n = new SVGDropShadowEffect(r, e.effects.effectElements[t]), this.filters.push(n)) : 28 === e.data.ef[t].ty && (n = new SVGMatte3Effect(r, e.effects.effectElements[t], e), this.filters.push(n));
                o && (e.globalData.defs.appendChild(r), e.layerElement.setAttribute("filter", "url(" + locationHref + "#" + a + ")"))
            }

            function ICompElement(e, t, n, i, a) {
                this._parent.constructor.call(this, e, t, n, i, a), this.layers = e.layers, this.supports3d = !0, this.completeLayers = !1, this.pendingElements = [], this.elements = this.layers ? Array.apply(null, {
                    length: this.layers.length
                }) : [], this.data.tm && (this.tm = PropertyFactory.getProp(this, this.data.tm, 0, n.frameRate, this.dynamicProperties)), this.data.xt ? (this.layerElement = document.createElementNS(svgNS, "g"), this.buildAllItems()) : n.progressiveLoad || this.buildAllItems()
            }

            function IImageElement(e, t, n, i, a) {
                this.assetData = n.getAssetData(e.refId), this._parent.constructor.call(this, e, t, n, i, a)
            }

            function ISolidElement(e, t, n, i, a) {
                this._parent.constructor.call(this, e, t, n, i, a)
            }
            IShapeElement.prototype.setElementStyles = function() {
                var e, t = this.stylesList.length,
                    n = [];
                for (e = 0; e < t; e += 1) this.stylesList[e].closed || n.push(this.stylesList[e]);
                return n
            }, IShapeElement.prototype.reloadShapes = function() {
                this.firstFrame = !0;
                var e, t = this.itemsData.length;
                for (e = 0; e < t; e += 1) this.prevViewData[e] = this.itemsData[e];
                for (this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, this.layerElement, this.dynamicProperties, 0, [], !0), t = this.dynamicProperties.length, e = 0; e < t; e += 1) this.dynamicProperties[e].getValue();
                this.renderModifiers()
            }, IShapeElement.prototype.searchShapes = function(e, t, n, i, a, r, o, s) {
                var l, c, u, d, f, h, p = [].concat(o),
                    A = e.length - 1,
                    m = [],
                    _ = [];
                for (l = A; l >= 0; l -= 1) {
                    if ((h = this.searchProcessedElement(e[l])) ? t[l] = n[h - 1] : e[l]._render = s, "fl" == e[l].ty || "st" == e[l].ty || "gf" == e[l].ty || "gs" == e[l].ty) h ? t[l].style.closed = !1 : t[l] = this.createStyleElement(e[l], r, a), e[l]._render && i.appendChild(t[l].elem), m.push(t[l].style);
                    else if ("gr" == e[l].ty) {
                        if (h)
                            for (u = t[l].it.length, c = 0; c < u; c += 1) t[l].prevViewData[c] = t[l].it[c];
                        else t[l] = this.createGroupElement(e[l]);
                        this.searchShapes(e[l].it, t[l].it, t[l].prevViewData, t[l].gr, a, r + 1, p, s), e[l]._render && i.appendChild(t[l].gr)
                    } else "tr" == e[l].ty ? (h || (t[l] = this.createTransformElement(e[l], a)), d = t[l].transform, p.push(d)) : "sh" == e[l].ty || "rc" == e[l].ty || "el" == e[l].ty || "sr" == e[l].ty ? (h || (t[l] = this.createShapeElement(e[l], p, r, a)), t[l].elements = this.setElementStyles()) : "tm" == e[l].ty || "rd" == e[l].ty || "ms" == e[l].ty ? (h ? (f = t[l]).closed = !1 : ((f = ShapeModifiers.getModifier(e[l].ty)).init(this, e[l], a), t[l] = f, this.shapeModifiers.push(f)), _.push(f)) : "rp" == e[l].ty && (h ? (f = t[l]).closed = !0 : (f = ShapeModifiers.getModifier(e[l].ty), t[l] = f, f.init(this, e, l, t, a), this.shapeModifiers.push(f), s = !1), _.push(f));
                    this.addProcessedElement(e[l], l + 1)
                }
                for (A = m.length, l = 0; l < A; l += 1) m[l].closed = !0;
                for (A = _.length, l = 0; l < A; l += 1) _[l].closed = !0
            }, IShapeElement.prototype.addShapeToModifiers = function(e) {
                var t, n = this.shapeModifiers.length;
                for (t = 0; t < n; t += 1) this.shapeModifiers[t].addShape(e)
            }, IShapeElement.prototype.renderModifiers = function() {
                if (this.shapeModifiers.length) {
                    var e, t = this.shapes.length;
                    for (e = 0; e < t; e += 1) this.shapes[e].reset();
                    for (e = (t = this.shapeModifiers.length) - 1; e >= 0; e -= 1) this.shapeModifiers[e].processShapes(this.firstFrame)
                }
            }, IShapeElement.prototype.renderFrame = function(e) {
                if (!1 !== this._parent.renderFrame.call(this, e)) {
                    this.hidden && (this.layerElement.style.display = "block", this.hidden = !1), this.renderModifiers();
                    var t, n = this.stylesList.length;
                    for (t = 0; t < n; t += 1) this.stylesList[t].d = "", this.stylesList[t].mdf = !1;
                    for (this.renderShape(this.shapesData, this.itemsData, null), t = 0; t < n; t += 1) "0" === this.stylesList[t].ld && (this.stylesList[t].ld = "1", this.stylesList[t].pElem.style.display = "block"), (this.stylesList[t].mdf || this.firstFrame) && (this.stylesList[t].pElem.setAttribute("d", this.stylesList[t].d), this.stylesList[t].msElem && this.stylesList[t].msElem.setAttribute("d", this.stylesList[t].d));
                    this.firstFrame && (this.firstFrame = !1)
                } else this.hide()
            }, IShapeElement.prototype.hide = function() {
                if (!this.hidden) {
                    var e;
                    for (this.layerElement.style.display = "none", e = this.stylesList.length - 1; e >= 0; e -= 1) "0" !== this.stylesList[e].ld && (this.stylesList[e].ld = "0", this.stylesList[e].pElem.style.display = "none", this.stylesList[e].pElem.parentNode && (this.stylesList[e].parent = this.stylesList[e].pElem.parentNode));
                    this.hidden = !0
                }
            }, IShapeElement.prototype.renderShape = function(e, t, n) {
                var i, a;
                for (i = e.length - 1; i >= 0; i -= 1) "tr" == (a = e[i].ty) ? ((this.firstFrame || t[i].transform.op.mdf && n) && n.setAttribute("opacity", t[i].transform.op.v), (this.firstFrame || t[i].transform.mProps.mdf && n) && n.setAttribute("transform", t[i].transform.mProps.v.to2dCSS())) : "sh" == a || "el" == a || "rc" == a || "sr" == a ? this.renderPath(e[i], t[i]) : "fl" == a ? this.renderFill(e[i], t[i]) : "gf" == a ? this.renderGradient(e[i], t[i]) : "gs" == a ? (this.renderGradient(e[i], t[i]), this.renderStroke(e[i], t[i])) : "st" == a ? this.renderStroke(e[i], t[i]) : "gr" == a && this.renderShape(e[i].it, t[i].it, t[i].gr)
            }, IShapeElement.prototype.buildShapeString = function(e, t, n, i) {
                var a, r = "";
                for (a = 1; a < t; a += 1) 1 === a && (r += " M" + i.applyToPointStringified(e.v[0][0], e.v[0][1])), r += " C" + i.applyToPointStringified(e.o[a - 1][0], e.o[a - 1][1]) + " " + i.applyToPointStringified(e.i[a][0], e.i[a][1]) + " " + i.applyToPointStringified(e.v[a][0], e.v[a][1]);
                return 1 === t && (r += " M" + i.applyToPointStringified(e.v[0][0], e.v[0][1])), n && t && (r += " C" + i.applyToPointStringified(e.o[a - 1][0], e.o[a - 1][1]) + " " + i.applyToPointStringified(e.i[0][0], e.i[0][1]) + " " + i.applyToPointStringified(e.v[0][0], e.v[0][1]), r += "z"), r
            }, IShapeElement.prototype.renderPath = function(e, t) {
                var n, i, a, r, o, s, l = t.elements.length,
                    c = t.lvl;
                if (e._render)
                    for (s = 0; s < l; s += 1)
                        if (t.elements[s].data._render) {
                            r = t.sh.mdf || this.firstFrame, a = "M0 0";
                            var u = t.sh.paths;
                            if (i = u._length, t.elements[s].lvl < c) {
                                for (var d, f = this.mHelper.reset(), h = c - t.elements[s].lvl, p = t.transformers.length - 1; h > 0;) r = t.transformers[p].mProps.mdf || r, d = t.transformers[p].mProps.v.props, f.transform(d[0], d[1], d[2], d[3], d[4], d[5], d[6], d[7], d[8], d[9], d[10], d[11], d[12], d[13], d[14], d[15]), h--, p--;
                                if (r) {
                                    for (n = 0; n < i; n += 1)(o = u.shapes[n]) && o._length && (a += this.buildShapeString(o, o._length, o.c, f));
                                    t.caches[s] = a
                                } else a = t.caches[s]
                            } else if (r) {
                                for (n = 0; n < i; n += 1)(o = u.shapes[n]) && o._length && (a += this.buildShapeString(o, o._length, o.c, this.identityMatrix));
                                t.caches[s] = a
                            } else a = t.caches[s];
                            t.elements[s].d += a, t.elements[s].mdf = r || t.elements[s].mdf
                        } else t.elements[s].mdf = !0
            }, IShapeElement.prototype.renderFill = function(e, t) {
                var n = t.style;
                (t.c.mdf || this.firstFrame) && n.pElem.setAttribute("fill", "rgb(" + bm_floor(t.c.v[0]) + "," + bm_floor(t.c.v[1]) + "," + bm_floor(t.c.v[2]) + ")"), (t.o.mdf || this.firstFrame) && n.pElem.setAttribute("fill-opacity", t.o.v)
            }, IShapeElement.prototype.renderGradient = function(e, t) {
                var n, i, a, r, o, s = t.gf,
                    l = t.of,
                    c = t.s.v,
                    u = t.e.v;
                if (t.o.mdf || this.firstFrame) {
                    var d = "gf" === e.ty ? "fill-opacity" : "stroke-opacity";
                    t.elem.setAttribute(d, t.o.v)
                }
                if (t.s.mdf || this.firstFrame) {
                    var f = 1 === e.t ? "x1" : "cx",
                        h = "x1" === f ? "y1" : "cy";
                    s.setAttribute(f, c[0]), s.setAttribute(h, c[1]), l && (l.setAttribute(f, c[0]), l.setAttribute(h, c[1]))
                }
                if (t.g.cmdf || this.firstFrame) {
                    n = t.cst;
                    var p = t.g.c;
                    for (a = n.length, i = 0; i < a; i += 1)(r = n[i]).setAttribute("offset", p[4 * i] + "%"), r.setAttribute("stop-color", "rgb(" + p[4 * i + 1] + "," + p[4 * i + 2] + "," + p[4 * i + 3] + ")")
                }
                if (l && (t.g.omdf || this.firstFrame)) {
                    n = t.ost;
                    var A = t.g.o;
                    for (a = n.length, i = 0; i < a; i += 1)(r = n[i]).setAttribute("offset", A[2 * i] + "%"), r.setAttribute("stop-opacity", A[2 * i + 1])
                }
                if (1 === e.t)(t.e.mdf || this.firstFrame) && (s.setAttribute("x2", u[0]), s.setAttribute("y2", u[1]), l && (l.setAttribute("x2", u[0]), l.setAttribute("y2", u[1])));
                else if ((t.s.mdf || t.e.mdf || this.firstFrame) && (o = Math.sqrt(Math.pow(c[0] - u[0], 2) + Math.pow(c[1] - u[1], 2)), s.setAttribute("r", o), l && l.setAttribute("r", o)), t.e.mdf || t.h.mdf || t.a.mdf || this.firstFrame) {
                    o || (o = Math.sqrt(Math.pow(c[0] - u[0], 2) + Math.pow(c[1] - u[1], 2)));
                    var m = Math.atan2(u[1] - c[1], u[0] - c[0]),
                        _ = o * (t.h.v >= 1 ? .99 : t.h.v <= -1 ? -.99 : t.h.v),
                        v = Math.cos(m + t.a.v) * _ + c[0],
                        g = Math.sin(m + t.a.v) * _ + c[1];
                    s.setAttribute("fx", v), s.setAttribute("fy", g), l && (l.setAttribute("fx", v), l.setAttribute("fy", g))
                }
            }, IShapeElement.prototype.renderStroke = function(e, t) {
                var n = t.style,
                    i = t.d;
                i && i.k && (i.mdf || this.firstFrame) && (n.pElem.setAttribute("stroke-dasharray", i.dasharray), n.pElem.setAttribute("stroke-dashoffset", i.dashoffset)), t.c && (t.c.mdf || this.firstFrame) && n.pElem.setAttribute("stroke", "rgb(" + bm_floor(t.c.v[0]) + "," + bm_floor(t.c.v[1]) + "," + bm_floor(t.c.v[2]) + ")"), (t.o.mdf || this.firstFrame) && n.pElem.setAttribute("stroke-opacity", t.o.v), (t.w.mdf || this.firstFrame) && (n.pElem.setAttribute("stroke-width", t.w.v), n.msElem && n.msElem.setAttribute("stroke-width", t.w.v))
            }, IShapeElement.prototype.destroy = function() {
                this._parent.destroy.call(this._parent), this.shapeData = null, this.itemsData = null, this.parentContainer = null, this.placeholder = null
            }, ITextElement.prototype.init = function() {
                this.lettersChangedFlag = !0, this.dynamicProperties = this.dynamicProperties || [], this.textAnimator = new TextAnimatorProperty(this.data.t, this.renderType, this), this.textProperty = new TextProperty(this, this.data.t, this.dynamicProperties), this._parent.init.call(this), this.textAnimator.searchProperties(this.dynamicProperties)
            }, ITextElement.prototype.prepareFrame = function(e) {
                this._parent.prepareFrame.call(this, e), (this.textProperty.mdf || this.textProperty.firstFrame) && (this.buildNewText(), this.textProperty.firstFrame = !1)
            }, ITextElement.prototype.createPathShape = function(e, t) {
                var n, i, a = t.length,
                    r = "";
                for (n = 0; n < a; n += 1) i = t[n].ks.k, r += this.buildShapeString(i, i.i.length, !0, e);
                return r
            }, ITextElement.prototype.updateDocumentData = function(e, t) {
                this.textProperty.updateDocumentData(e, t)
            }, ITextElement.prototype.applyTextPropertiesToMatrix = function(e, t, n, i, a) {
                switch (e.ps && t.translate(e.ps[0], e.ps[1] + e.ascent, 0), t.translate(0, -e.ls, 0), e.j) {
                    case 1:
                        t.translate(e.justifyOffset + (e.boxWidth - e.lineWidths[n]), 0, 0);
                        break;
                    case 2:
                        t.translate(e.justifyOffset + (e.boxWidth - e.lineWidths[n]) / 2, 0, 0)
                }
                t.translate(i, a, 0)
            }, ITextElement.prototype.buildColor = function(e) {
                return "rgb(" + Math.round(255 * e[0]) + "," + Math.round(255 * e[1]) + "," + Math.round(255 * e[2]) + ")"
            }, ITextElement.prototype.buildShapeString = IShapeElement.prototype.buildShapeString, ITextElement.prototype.emptyProp = new LetterProps, ITextElement.prototype.destroy = function() {
                this._parent.destroy.call(this._parent)
            }, createElement(SVGBaseElement, SVGTextElement), extendPrototype(ITextElement, SVGTextElement), SVGTextElement.prototype.createElements = function() {
                this._parent.createElements.call(this), this.data.ln && this.layerElement.setAttribute("id", this.data.ln), this.data.cl && this.layerElement.setAttribute("class", this.data.cl), this.data.singleShape && !this.globalData.fontManager.chars && (this.textContainer = document.createElementNS(svgNS, "text"))
            }, SVGTextElement.prototype.buildNewText = function() {
                var e, t, n = this.textProperty.currentData;
                this.renderedLetters = Array.apply(null, {
                    length: n ? n.l.length : 0
                }), n.fc ? this.layerElement.setAttribute("fill", this.buildColor(n.fc)) : this.layerElement.setAttribute("fill", "rgba(0,0,0,0)"), n.sc && (this.layerElement.setAttribute("stroke", this.buildColor(n.sc)), this.layerElement.setAttribute("stroke-width", n.sw)), this.layerElement.setAttribute("font-size", n.s);
                var i = this.globalData.fontManager.getFontByName(n.f);
                if (i.fClass) this.layerElement.setAttribute("class", i.fClass);
                else {
                    this.layerElement.setAttribute("font-family", i.fFamily);
                    var a = n.fWeight,
                        r = n.fStyle;
                    this.layerElement.setAttribute("font-style", r), this.layerElement.setAttribute("font-weight", a)
                }
                var o = n.l || [],
                    s = this.globalData.fontManager.chars;
                if (t = o.length) {
                    var l, c, u = this.mHelper,
                        d = "",
                        f = this.data.singleShape,
                        h = 0,
                        p = 0,
                        A = !0,
                        m = n.tr / 1e3 * n.s;
                    if (f && !s) {
                        var _ = this.textContainer,
                            v = "";
                        switch (n.j) {
                            case 1:
                                v = "end";
                                break;
                            case 2:
                                v = "middle";
                                break;
                            case 2:
                                v = "start"
                        }
                        _.setAttribute("text-anchor", v), _.setAttribute("letter-spacing", m);
                        var g = n.t.split(String.fromCharCode(13));
                        for (t = g.length, p = n.ps ? n.ps[1] + n.ascent : 0, e = 0; e < t; e += 1)(l = this.textSpans[e] || document.createElementNS(svgNS, "tspan")).textContent = g[e], l.setAttribute("x", 0), l.setAttribute("y", p), l.style.display = "inherit", _.appendChild(l), this.textSpans[e] = l, p += n.lh;
                        this.layerElement.appendChild(_)
                    } else {
                        var y, b, w = this.textSpans.length;
                        for (e = 0; e < t; e += 1) s && f && 0 !== e || (l = w > e ? this.textSpans[e] : document.createElementNS(svgNS, s ? "path" : "text"), w <= e && (l.setAttribute("stroke-linecap", "butt"), l.setAttribute("stroke-linejoin", "round"), l.setAttribute("stroke-miterlimit", "4"), this.textSpans[e] = l, this.layerElement.appendChild(l)), l.style.display = "inherit"), u.reset(), s ? (u.scale(n.s / 100, n.s / 100), f && (o[e].n && (h = -m, p += n.yOffset, p += A ? 1 : 0, A = !1), this.applyTextPropertiesToMatrix(n, u, o[e].line, h, p), h += o[e].l || 0, h += m), c = (y = (b = this.globalData.fontManager.getCharData(n.t.charAt(e), i.fStyle, this.globalData.fontManager.getFontByName(n.f).fFamily)) && b.data || {}).shapes ? y.shapes[0].it : [], f ? d += this.createPathShape(u, c) : l.setAttribute("d", this.createPathShape(u, c))) : (l.textContent = o[e].val, l.setAttributeNS("http://www.w3.org/XML/1998/namespace", "xml:space", "preserve"));
                        f && l.setAttribute("d", d)
                    }
                    for (; e < this.textSpans.length;) this.textSpans[e].style.display = "none", e += 1;
                    this._sizeChanged = !0
                }
            }, SVGTextElement.prototype.sourceRectAtTime = function(e) {
                if (this.prepareFrame(this.comp.renderedFrame - this.data.st), this.renderLetters(), this._sizeChanged) {
                    this._sizeChanged = !1;
                    var t = this.layerElement.getBBox();
                    this.bbox = {
                        top: t.y,
                        left: t.x,
                        width: t.width,
                        height: t.height
                    }
                }
                return this.bbox
            }, SVGTextElement.prototype.renderLetters = function() {
                if (!this.data.singleShape && (this.textAnimator.getMeasures(this.textProperty.currentData, this.lettersChangedFlag), this.lettersChangedFlag || this.textAnimator.lettersChangedFlag)) {
                    var e, t;
                    this._sizeChanged = !0;
                    var n, i, a = this.textAnimator.renderedLetters,
                        r = this.textProperty.currentData.l;
                    for (t = r.length, e = 0; e < t; e += 1) r[e].n || (n = a[e], i = this.textSpans[e], n.mdf.m && i.setAttribute("transform", n.m), n.mdf.o && i.setAttribute("opacity", n.o), n.mdf.sw && i.setAttribute("stroke-width", n.sw), n.mdf.sc && i.setAttribute("stroke", n.sc), n.mdf.fc && i.setAttribute("fill", n.fc))
                }
            }, SVGTextElement.prototype.renderFrame = function(e) {
                !1 !== this._parent.renderFrame.call(this, e) ? (this.hidden && this.show(), this.firstFrame && (this.firstFrame = !1), this.renderLetters()) : this.hide()
            }, SVGTintFilter.prototype.renderFrame = function(e) {
                if (e || this.filterManager.mdf) {
                    var t = this.filterManager.effectElements[0].p.v,
                        n = this.filterManager.effectElements[1].p.v,
                        i = this.filterManager.effectElements[2].p.v / 100;
                    this.matrixFilter.setAttribute("values", n[0] - t[0] + " 0 0 0 " + t[0] + " " + (n[1] - t[1]) + " 0 0 0 " + t[1] + " " + (n[2] - t[2]) + " 0 0 0 " + t[2] + " 0 0 0 " + i + " 0")
                }
            }, SVGFillFilter.prototype.renderFrame = function(e) {
                if (e || this.filterManager.mdf) {
                    var t = this.filterManager.effectElements[2].p.v,
                        n = this.filterManager.effectElements[6].p.v;
                    this.matrixFilter.setAttribute("values", "0 0 0 0 " + t[0] + " 0 0 0 0 " + t[1] + " 0 0 0 0 " + t[2] + " 0 0 0 " + n + " 0")
                }
            }, SVGStrokeEffect.prototype.initialize = function() {
                var e, t, n, i, a = this.elem.layerElement.children || this.elem.layerElement.childNodes;
                for (1 === this.filterManager.effectElements[1].p.v ? (i = this.elem.maskManager.masksProperties.length, n = 0) : i = 1 + (n = this.filterManager.effectElements[0].p.v - 1), (t = document.createElementNS(svgNS, "g")).setAttribute("fill", "none"), t.setAttribute("stroke-linecap", "round"), t.setAttribute("stroke-dashoffset", 1); n < i; n += 1) e = document.createElementNS(svgNS, "path"), t.appendChild(e), this.paths.push({
                    p: e,
                    m: n
                });
                if (3 === this.filterManager.effectElements[10].p.v) {
                    var r = document.createElementNS(svgNS, "mask"),
                        o = "stms_" + randomString(10);
                    r.setAttribute("id", o), r.setAttribute("mask-type", "alpha"), r.appendChild(t), this.elem.globalData.defs.appendChild(r);
                    var s = document.createElementNS(svgNS, "g");
                    s.setAttribute("mask", "url(" + locationHref + "#" + o + ")"), a[0] && s.appendChild(a[0]), this.elem.layerElement.appendChild(s), this.masker = r, t.setAttribute("stroke", "#fff")
                } else if (1 === this.filterManager.effectElements[10].p.v || 2 === this.filterManager.effectElements[10].p.v) {
                    if (2 === this.filterManager.effectElements[10].p.v)
                        for (a = this.elem.layerElement.children || this.elem.layerElement.childNodes; a.length;) this.elem.layerElement.removeChild(a[0]);
                    this.elem.layerElement.appendChild(t), this.elem.layerElement.removeAttribute("mask"), t.setAttribute("stroke", "#fff")
                }
                this.initialized = !0, this.pathMasker = t
            }, SVGStrokeEffect.prototype.renderFrame = function(e) {
                this.initialized || this.initialize();
                var t, n, i, a = this.paths.length;
                for (t = 0; t < a; t += 1)
                    if (n = this.elem.maskManager.viewData[this.paths[t].m], i = this.paths[t].p, (e || this.filterManager.mdf || n.prop.mdf) && i.setAttribute("d", n.lastPath), e || this.filterManager.effectElements[9].p.mdf || this.filterManager.effectElements[4].p.mdf || this.filterManager.effectElements[7].p.mdf || this.filterManager.effectElements[8].p.mdf || n.prop.mdf) {
                        var r;
                        if (0 !== this.filterManager.effectElements[7].p.v || 100 !== this.filterManager.effectElements[8].p.v) {
                            var o = Math.min(this.filterManager.effectElements[7].p.v, this.filterManager.effectElements[8].p.v) / 100,
                                s = Math.max(this.filterManager.effectElements[7].p.v, this.filterManager.effectElements[8].p.v) / 100,
                                l = i.getTotalLength();
                            r = "0 0 0 " + l * o + " ";
                            var c, u = l * (s - o),
                                d = 1 + 2 * this.filterManager.effectElements[4].p.v * this.filterManager.effectElements[9].p.v / 100,
                                f = Math.floor(u / d);
                            for (c = 0; c < f; c += 1) r += "1 " + 2 * this.filterManager.effectElements[4].p.v * this.filterManager.effectElements[9].p.v / 100 + " ";
                            r += "0 " + 10 * l + " 0 0"
                        } else r = "1 " + 2 * this.filterManager.effectElements[4].p.v * this.filterManager.effectElements[9].p.v / 100;
                        i.setAttribute("stroke-dasharray", r)
                    }
                if ((e || this.filterManager.effectElements[4].p.mdf) && this.pathMasker.setAttribute("stroke-width", 2 * this.filterManager.effectElements[4].p.v), (e || this.filterManager.effectElements[6].p.mdf) && this.pathMasker.setAttribute("opacity", this.filterManager.effectElements[6].p.v), (1 === this.filterManager.effectElements[10].p.v || 2 === this.filterManager.effectElements[10].p.v) && (e || this.filterManager.effectElements[3].p.mdf)) {
                    var h = this.filterManager.effectElements[3].p.v;
                    this.pathMasker.setAttribute("stroke", "rgb(" + bm_floor(255 * h[0]) + "," + bm_floor(255 * h[1]) + "," + bm_floor(255 * h[2]) + ")")
                }
            }, SVGTritoneFilter.prototype.renderFrame = function(e) {
                if (e || this.filterManager.mdf) {
                    var t = this.filterManager.effectElements[0].p.v,
                        n = this.filterManager.effectElements[1].p.v,
                        i = this.filterManager.effectElements[2].p.v,
                        a = i[0] + " " + n[0] + " " + t[0],
                        r = i[1] + " " + n[1] + " " + t[1],
                        o = i[2] + " " + n[2] + " " + t[2];
                    this.feFuncR.setAttribute("tableValues", a), this.feFuncG.setAttribute("tableValues", r), this.feFuncB.setAttribute("tableValues", o)
                }
            }, SVGProLevelsFilter.prototype.createFeFunc = function(e, t) {
                var n = document.createElementNS(svgNS, e);
                return n.setAttribute("type", "table"), t.appendChild(n), n
            }, SVGProLevelsFilter.prototype.getTableValue = function(e, t, n, i, a) {
                for (var r, o, s = 0, l = Math.min(e, t), c = Math.max(e, t), u = Array.call(null, {
                        length: 256
                    }), d = 0, f = a - i, h = t - e; s <= 256;) o = (r = s / 256) <= l ? h < 0 ? a : i : r >= c ? h < 0 ? i : a : i + f * Math.pow((r - e) / h, 1 / n), u[d++] = o, s += 256 / 255;
                return u.join(" ")
            }, SVGProLevelsFilter.prototype.renderFrame = function(e) {
                if (e || this.filterManager.mdf) {
                    var t, n = this.filterManager.effectElements;
                    this.feFuncRComposed && (e || n[2].p.mdf || n[3].p.mdf || n[4].p.mdf || n[5].p.mdf || n[6].p.mdf) && (t = this.getTableValue(n[2].p.v, n[3].p.v, n[4].p.v, n[5].p.v, n[6].p.v), this.feFuncRComposed.setAttribute("tableValues", t), this.feFuncGComposed.setAttribute("tableValues", t), this.feFuncBComposed.setAttribute("tableValues", t)), this.feFuncR && (e || n[9].p.mdf || n[10].p.mdf || n[11].p.mdf || n[12].p.mdf || n[13].p.mdf) && (t = this.getTableValue(n[9].p.v, n[10].p.v, n[11].p.v, n[12].p.v, n[13].p.v), this.feFuncR.setAttribute("tableValues", t)), this.feFuncG && (e || n[16].p.mdf || n[17].p.mdf || n[18].p.mdf || n[19].p.mdf || n[20].p.mdf) && (t = this.getTableValue(n[16].p.v, n[17].p.v, n[18].p.v, n[19].p.v, n[20].p.v), this.feFuncG.setAttribute("tableValues", t)), this.feFuncB && (e || n[23].p.mdf || n[24].p.mdf || n[25].p.mdf || n[26].p.mdf || n[27].p.mdf) && (t = this.getTableValue(n[23].p.v, n[24].p.v, n[25].p.v, n[26].p.v, n[27].p.v), this.feFuncB.setAttribute("tableValues", t)), this.feFuncA && (e || n[30].p.mdf || n[31].p.mdf || n[32].p.mdf || n[33].p.mdf || n[34].p.mdf) && (t = this.getTableValue(n[30].p.v, n[31].p.v, n[32].p.v, n[33].p.v, n[34].p.v), this.feFuncA.setAttribute("tableValues", t))
                }
            }, SVGDropShadowEffect.prototype.renderFrame = function(e) {
                if (e || this.filterManager.mdf) {
                    if ((e || this.filterManager.effectElements[4].p.mdf) && this.feGaussianBlur.setAttribute("stdDeviation", this.filterManager.effectElements[4].p.v / 4), e || this.filterManager.effectElements[0].p.mdf) {
                        var t = this.filterManager.effectElements[0].p.v;
                        this.feFlood.setAttribute("flood-color", rgbToHex(Math.round(255 * t[0]), Math.round(255 * t[1]), Math.round(255 * t[2])))
                    }
                    if ((e || this.filterManager.effectElements[1].p.mdf) && this.feFlood.setAttribute("flood-opacity", this.filterManager.effectElements[1].p.v / 255), e || this.filterManager.effectElements[2].p.mdf || this.filterManager.effectElements[3].p.mdf) {
                        var n = this.filterManager.effectElements[3].p.v,
                            i = (this.filterManager.effectElements[2].p.v - 90) * degToRads,
                            a = n * Math.cos(i),
                            r = n * Math.sin(i);
                        this.feOffset.setAttribute("dx", a), this.feOffset.setAttribute("dy", r)
                    }
                }
            }, SVGMatte3Effect.prototype.setElementAsMask = function(e, t) {
                var n = document.createElementNS(svgNS, "mask");
                n.setAttribute("id", t.layerId), n.setAttribute("mask-type", "alpha"), n.appendChild(t.layerElement), e.setMatte(t.layerId), t.data.hd = !1, e.globalData.defs.appendChild(n)
            }, SVGMatte3Effect.prototype.initialize = function() {
                for (var e = this.filterManager.effectElements[0].p.v, t = 0, n = this.elem.comp.elements.length; t < n;) this.elem.comp.elements[t].data.ind === e && this.setElementAsMask(this.elem, this.elem.comp.elements[t]), t += 1;
                this.initialized = !0
            }, SVGMatte3Effect.prototype.renderFrame = function() {
                this.initialized || this.initialize()
            }, SVGEffects.prototype.renderFrame = function(e) {
                var t, n = this.filters.length;
                for (t = 0; t < n; t += 1) this.filters[t].renderFrame(e)
            }, createElement(SVGBaseElement, ICompElement), ICompElement.prototype.hide = function() {
                if (!this.hidden) {
                    this._parent.hide.call(this);
                    var e, t = this.elements.length;
                    for (e = 0; e < t; e += 1) this.elements[e] && this.elements[e].hide()
                }
            }, ICompElement.prototype.prepareFrame = function(e) {
                if (this._parent.prepareFrame.call(this, e), !1 !== this.isVisible || this.data.xt) {
                    if (this.tm) {
                        var t = this.tm.v;
                        t === this.data.op && (t = this.data.op - 1), this.renderedFrame = t
                    } else this.renderedFrame = e / this.data.sr;
                    var n, i = this.elements.length;
                    for (this.completeLayers || this.checkLayers(this.renderedFrame), n = 0; n < i; n += 1)(this.completeLayers || this.elements[n]) && this.elements[n].prepareFrame(this.renderedFrame - this.layers[n].st)
                }
            }, ICompElement.prototype.renderFrame = function(e) {
                var t, n = this._parent.renderFrame.call(this, e),
                    i = this.layers.length;
                if (!1 !== n) {
                    for (this.hidden && this.show(), t = 0; t < i; t += 1)(this.completeLayers || this.elements[t]) && this.elements[t].renderFrame();
                    this.firstFrame && (this.firstFrame = !1)
                } else this.hide()
            }, ICompElement.prototype.setElements = function(e) {
                this.elements = e
            }, ICompElement.prototype.getElements = function() {
                return this.elements
            }, ICompElement.prototype.destroy = function() {
                this._parent.destroy.call(this._parent);
                var e, t = this.layers.length;
                for (e = 0; e < t; e += 1) this.elements[e] && this.elements[e].destroy()
            }, ICompElement.prototype.checkLayers = SVGRenderer.prototype.checkLayers, ICompElement.prototype.buildItem = SVGRenderer.prototype.buildItem, ICompElement.prototype.buildAllItems = SVGRenderer.prototype.buildAllItems, ICompElement.prototype.buildElementParenting = SVGRenderer.prototype.buildElementParenting, ICompElement.prototype.createItem = SVGRenderer.prototype.createItem, ICompElement.prototype.createImage = SVGRenderer.prototype.createImage, ICompElement.prototype.createComp = SVGRenderer.prototype.createComp, ICompElement.prototype.createSolid = SVGRenderer.prototype.createSolid, ICompElement.prototype.createShape = SVGRenderer.prototype.createShape, ICompElement.prototype.createText = SVGRenderer.prototype.createText, ICompElement.prototype.createBase = SVGRenderer.prototype.createBase, ICompElement.prototype.appendElementInPos = SVGRenderer.prototype.appendElementInPos, ICompElement.prototype.checkPendingElements = SVGRenderer.prototype.checkPendingElements, ICompElement.prototype.addPendingElement = SVGRenderer.prototype.addPendingElement, createElement(SVGBaseElement, IImageElement), IImageElement.prototype.createElements = function() {
                var e = this.globalData.getAssetsPath(this.assetData);
                this._parent.createElements.call(this), this.innerElem = document.createElementNS(svgNS, "image"), this.innerElem.setAttribute("width", this.assetData.w + "px"), this.innerElem.setAttribute("height", this.assetData.h + "px"), this.innerElem.setAttribute("preserveAspectRatio", "xMidYMid slice"), this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink", "href", e), this.maskedElement = this.innerElem, this.layerElement.appendChild(this.innerElem), this.data.ln && this.layerElement.setAttribute("id", this.data.ln), this.data.cl && this.layerElement.setAttribute("class", this.data.cl)
            }, IImageElement.prototype.renderFrame = function(e) {
                !1 !== this._parent.renderFrame.call(this, e) ? (this.hidden && this.show(), this.firstFrame && (this.firstFrame = !1)) : this.hide()
            }, IImageElement.prototype.destroy = function() {
                this._parent.destroy.call(this._parent), this.innerElem = null
            }, createElement(SVGBaseElement, ISolidElement), ISolidElement.prototype.createElements = function() {
                this._parent.createElements.call(this);
                var e = document.createElementNS(svgNS, "rect");
                e.setAttribute("width", this.data.sw), e.setAttribute("height", this.data.sh), e.setAttribute("fill", this.data.sc), this.layerElement.appendChild(e), this.innerElem = e, this.data.ln && this.layerElement.setAttribute("id", this.data.ln), this.data.cl && this.layerElement.setAttribute("class", this.data.cl)
            }, ISolidElement.prototype.renderFrame = IImageElement.prototype.renderFrame, ISolidElement.prototype.destroy = IImageElement.prototype.destroy;
            var animationManager = function() {
                    var e = {},
                        t = [],
                        n = 0,
                        i = 0,
                        a = !0,
                        r = 0;

                    function o(e) {
                        for (var n = 0, a = e.target; n < i;) t[n].animation === a && (t.splice(n, 1), n -= 1, i -= 1, a.isPaused || c()), n += 1
                    }

                    function s(e, n) {
                        if (!e) return null;
                        for (var a = 0; a < i;) {
                            if (t[a].elem == e && null !== t[a].elem) return t[a].animation;
                            a += 1
                        }
                        var r = new AnimationItem;
                        return u(r, e), r.setData(e, n), r
                    }

                    function l() {
                        r += 1, a && (a = !1, window.requestAnimationFrame(f))
                    }

                    function c() {
                        0 == (r -= 1) && (a = !0)
                    }

                    function u(e, n) {
                        e.addEventListener("destroy", o), e.addEventListener("_active", l), e.addEventListener("_idle", c), t.push({
                            elem: n,
                            animation: e
                        }), i += 1
                    }

                    function d(e) {
                        var r, o = e - n;
                        for (r = 0; r < i; r += 1) t[r].animation.advanceTime(o);
                        n = e, a || window.requestAnimationFrame(d)
                    }

                    function f(e) {
                        n = e, window.requestAnimationFrame(d)
                    }

                    function h() {
                        window.requestAnimationFrame(f)
                    }
                    return setTimeout(h, 0), e.registerAnimation = s, e.loadAnimation = function(e) {
                        var t = new AnimationItem;
                        return u(t, null), t.setParams(e), t
                    }, e.setSpeed = function(e, n) {
                        var a;
                        for (a = 0; a < i; a += 1) t[a].animation.setSpeed(e, n)
                    }, e.setDirection = function(e, n) {
                        var a;
                        for (a = 0; a < i; a += 1) t[a].animation.setDirection(e, n)
                    }, e.play = function(e) {
                        var n;
                        for (n = 0; n < i; n += 1) t[n].animation.play(e)
                    }, e.moveFrame = function(e, a) {
                        var r;
                        for (n = Date.now(), r = 0; r < i; r += 1) t[r].animation.moveFrame(e, a)
                    }, e.pause = function(e) {
                        var n;
                        for (n = 0; n < i; n += 1) t[n].animation.pause(e)
                    }, e.stop = function(e) {
                        var n;
                        for (n = 0; n < i; n += 1) t[n].animation.stop(e)
                    }, e.togglePause = function(e) {
                        var n;
                        for (n = 0; n < i; n += 1) t[n].animation.togglePause(e)
                    }, e.searchAnimations = function(e, t, n) {
                        var i, a = document.getElementsByClassName("bodymovin"),
                            r = a.length;
                        for (i = 0; i < r; i += 1) n && a[i].setAttribute("data-bm-type", n), s(a[i], e);
                        if (t && 0 === r) {
                            n || (n = "svg");
                            var o = document.getElementsByTagName("body")[0];
                            o.innerHTML = "";
                            var l = document.createElement("div");
                            l.style.width = "100%", l.style.height = "100%", l.setAttribute("data-bm-type", n), o.appendChild(l), s(l, e)
                        }
                    }, e.resize = function() {
                        var e;
                        for (e = 0; e < i; e += 1) t[e].animation.resize()
                    }, e.start = h, e.goToAndStop = function(e, n, a) {
                        var r;
                        for (r = 0; r < i; r += 1) t[r].animation.goToAndStop(e, n, a)
                    }, e.destroy = function(e) {
                        var n;
                        for (n = i - 1; n >= 0; n -= 1) t[n].animation.destroy(e)
                    }, e
                }(),
                AnimationItem = function() {
                    this._cbs = [], this.name = "", this.path = "", this.isLoaded = !1, this.currentFrame = 0, this.currentRawFrame = 0, this.totalFrames = 0, this.frameRate = 0, this.frameMult = 0, this.playSpeed = 1, this.playDirection = 1, this.pendingElements = 0, this.playCount = 0, this.prerenderFramesFlag = !0, this.animationData = {}, this.layers = [], this.assets = [], this.isPaused = !0, this.autoplay = !1, this.loop = !0, this.renderer = null, this.animationID = randomString(10), this.scaleMode = "fit", this.assetsPath = "", this.timeCompleted = 0, this.segmentPos = 0, this.subframeEnabled = subframeEnabled, this.segments = [], this.pendingSegment = !1, this._idle = !0, this.projectInterface = ProjectInterface()
                };

            function CanvasRenderer(e, t) {
                var n;
                for (this.animationItem = e, this.renderConfig = {
                        clearCanvas: !t || void 0 === t.clearCanvas || t.clearCanvas,
                        context: t && t.context || null,
                        progressiveLoad: t && t.progressiveLoad || !1,
                        preserveAspectRatio: t && t.preserveAspectRatio || "xMidYMid meet",
                        className: t && t.className || ""
                    }, this.renderConfig.dpr = t && t.dpr || 1, this.animationItem.wrapper && (this.renderConfig.dpr = t && t.dpr || window.devicePixelRatio || 1), this.renderedFrame = -1, this.globalData = {
                        frameNum: -1
                    }, this.contextData = {
                        saved: Array.apply(null, {
                            length: 15
                        }),
                        savedOp: Array.apply(null, {
                            length: 15
                        }),
                        cArrPos: 0,
                        cTr: new Matrix,
                        cO: 1
                    }, n = 0; n < 15; n += 1) this.contextData.saved[n] = Array.apply(null, {
                    length: 16
                });
                this.elements = [], this.pendingElements = [], this.transformMat = new Matrix, this.completeLayers = !1
            }

            function HybridRenderer(e, t) {
                this.animationItem = e, this.layers = null, this.renderedFrame = -1, this.globalData = {
                    frameNum: -1
                }, this.renderConfig = {
                    className: t && t.className || ""
                }, this.pendingElements = [], this.elements = [], this.threeDElements = [], this.destroyed = !1, this.camera = null, this.supports3d = !0
            }

            function CVBaseElement(e, t, n) {
                this.globalData = n, this.data = e, this.comp = t, this.canvasContext = n.canvasContext, this.init()
            }

            function CVCompElement(e, t, n) {
                this._parent.constructor.call(this, e, t, n);
                var i, a = {};
                for (var r in n) n.hasOwnProperty(r) && (a[r] = n[r]);
                for (a.renderer = this, a.compHeight = this.data.h, a.compWidth = this.data.w, this.renderConfig = {
                        clearCanvas: !0
                    }, this.contextData = {
                        saved: Array.apply(null, {
                            length: 15
                        }),
                        savedOp: Array.apply(null, {
                            length: 15
                        }),
                        cArrPos: 0,
                        cTr: new Matrix,
                        cO: 1
                    }, this.completeLayers = !1, i = 0; i < 15; i += 1) this.contextData.saved[i] = Array.apply(null, {
                    length: 16
                });
                this.transformMat = new Matrix, this.parentGlobalData = this.globalData;
                var o = document.createElement("canvas");
                a.canvasContext = o.getContext("2d"), this.canvasContext = a.canvasContext, o.width = this.data.w, o.height = this.data.h, this.canvas = o, this.globalData = a, this.layers = e.layers, this.pendingElements = [], this.elements = Array.apply(null, {
                    length: this.layers.length
                }), this.data.tm && (this.tm = PropertyFactory.getProp(this, this.data.tm, 0, n.frameRate, this.dynamicProperties)), !this.data.xt && n.progressiveLoad || this.buildAllItems()
            }

            function CVImageElement(e, t, n) {
                this.assetData = n.getAssetData(e.refId), this._parent.constructor.call(this, e, t, n), this.globalData.addPendingElement()
            }

            function CVMaskElement(e, t) {
                this.data = e, this.element = t, this.dynamicProperties = [], this.masksProperties = this.data.masksProperties, this.viewData = Array.apply(null, {
                    length: this.masksProperties.length
                });
                var n, i = this.masksProperties.length;
                for (n = 0; n < i; n++) this.viewData[n] = ShapePropertyFactory.getShapeProp(this.element, this.masksProperties[n], 3, this.dynamicProperties, null)
            }

            function CVShapeElement(e, t, n) {
                this.shapes = [], this.shapesData = e.shapes, this.stylesList = [], this.itemsData = [], this.prevViewData = [], this.shapeModifiers = [], this.processedElements = [], this._parent.constructor.call(this, e, t, n)
            }

            function CVSolidElement(e, t, n) {
                this._parent.constructor.call(this, e, t, n)
            }

            function CVTextElement(e, t, n) {
                this.textSpans = [], this.yOffset = 0, this.fillColorAnim = !1, this.strokeColorAnim = !1, this.strokeWidthAnim = !1, this.stroke = !1, this.fill = !1, this.justifyOffset = 0, this.currentRender = null, this.renderType = "canvas", this.values = {
                    fill: "rgba(0,0,0,0)",
                    stroke: "rgba(0,0,0,0)",
                    sWidth: 0,
                    fValue: ""
                }, this._parent.constructor.call(this, e, t, n)
            }

            function HBaseElement(e, t, n, i, a) {
                this.globalData = n, this.comp = i, this.data = e, this.matteElement = null, this.parentContainer = t, this.layerId = a ? a.layerId : "ly_" + randomString(10), this.placeholder = a, this.init()
            }

            function HSolidElement(e, t, n, i, a) {
                this._parent.constructor.call(this, e, t, n, i, a)
            }

            function HCompElement(e, t, n, i, a) {
                this._parent.constructor.call(this, e, t, n, i, a), this.layers = e.layers, this.supports3d = !0, this.completeLayers = !1, this.pendingElements = [], this.elements = Array.apply(null, {
                    length: this.layers.length
                }), this.data.tm && (this.tm = PropertyFactory.getProp(this, this.data.tm, 0, n.frameRate, this.dynamicProperties)), this.data.hasMask && (this.supports3d = !1), this.data.xt && (this.layerElement = document.createElement("div")), this.buildAllItems()
            }

            function HShapeElement(e, t, n, i, a) {
                this.shapes = [], this.shapesData = e.shapes, this.stylesList = [], this.itemsData = [], this.prevViewData = [], this.shapeModifiers = [], this.processedElements = [], this._parent.constructor.call(this, e, t, n, i, a), this.currentBBox = {
                    x: 999999,
                    y: -999999,
                    h: 0,
                    w: 0
                }
            }
            AnimationItem.prototype.setParams = function(e) {
                var t = this;
                e.context && (this.context = e.context), (e.wrapper || e.container) && (this.wrapper = e.wrapper || e.container);
                var n = e.animType ? e.animType : e.renderer ? e.renderer : "svg";
                switch (n) {
                    case "canvas":
                        this.renderer = new CanvasRenderer(this, e.rendererSettings);
                        break;
                    case "svg":
                        this.renderer = new SVGRenderer(this, e.rendererSettings);
                        break;
                    case "hybrid":
                    case "html":
                    default:
                        this.renderer = new HybridRenderer(this, e.rendererSettings)
                }
                if (this.renderer.setProjectInterface(this.projectInterface), this.animType = n, "" === e.loop || null === e.loop || (!1 === e.loop ? this.loop = !1 : !0 === e.loop ? this.loop = !0 : this.loop = parseInt(e.loop)), this.autoplay = !("autoplay" in e) || e.autoplay, this.name = e.name ? e.name : "", this.prerenderFramesFlag = !("prerender" in e) || e.prerender, this.autoloadSegments = !e.hasOwnProperty("autoloadSegments") || e.autoloadSegments, e.animationData) t.configAnimation(e.animationData);
                else if (e.path) {
                    "json" != e.path.substr(-4) && ("/" != e.path.substr(-1, 1) && (e.path += "/"), e.path += "data.json");
                    var i = new XMLHttpRequest; - 1 != e.path.lastIndexOf("\\") ? this.path = e.path.substr(0, e.path.lastIndexOf("\\") + 1) : this.path = e.path.substr(0, e.path.lastIndexOf("/") + 1), this.assetsPath = e.assetsPath, this.fileName = e.path.substr(e.path.lastIndexOf("/") + 1), this.fileName = this.fileName.substr(0, this.fileName.lastIndexOf(".json")), i.open("GET", e.path, !0), i.send(), i.onreadystatechange = function() {
                        if (4 == i.readyState)
                            if (200 == i.status) t.configAnimation(JSON.parse(i.responseText));
                            else try {
                                var e = JSON.parse(i.responseText);
                                t.configAnimation(e)
                            } catch (e) {}
                    }
                }
            }, AnimationItem.prototype.setData = function(e, t) {
                var n = {
                        wrapper: e,
                        animationData: t ? "object" == typeof t ? t : JSON.parse(t) : null
                    },
                    i = e.attributes;
                n.path = i.getNamedItem("data-animation-path") ? i.getNamedItem("data-animation-path").value : i.getNamedItem("data-bm-path") ? i.getNamedItem("data-bm-path").value : i.getNamedItem("bm-path") ? i.getNamedItem("bm-path").value : "", n.animType = i.getNamedItem("data-anim-type") ? i.getNamedItem("data-anim-type").value : i.getNamedItem("data-bm-type") ? i.getNamedItem("data-bm-type").value : i.getNamedItem("bm-type") ? i.getNamedItem("bm-type").value : i.getNamedItem("data-bm-renderer") ? i.getNamedItem("data-bm-renderer").value : i.getNamedItem("bm-renderer") ? i.getNamedItem("bm-renderer").value : "canvas";
                var a = i.getNamedItem("data-anim-loop") ? i.getNamedItem("data-anim-loop").value : i.getNamedItem("data-bm-loop") ? i.getNamedItem("data-bm-loop").value : i.getNamedItem("bm-loop") ? i.getNamedItem("bm-loop").value : "";
                "" === a || (n.loop = "false" !== a && ("true" === a || parseInt(a)));
                var r = i.getNamedItem("data-anim-autoplay") ? i.getNamedItem("data-anim-autoplay").value : i.getNamedItem("data-bm-autoplay") ? i.getNamedItem("data-bm-autoplay").value : !i.getNamedItem("bm-autoplay") || i.getNamedItem("bm-autoplay").value;
                n.autoplay = "false" !== r, n.name = i.getNamedItem("data-name") ? i.getNamedItem("data-name").value : i.getNamedItem("data-bm-name") ? i.getNamedItem("data-bm-name").value : i.getNamedItem("bm-name") ? i.getNamedItem("bm-name").value : "", "false" === (i.getNamedItem("data-anim-prerender") ? i.getNamedItem("data-anim-prerender").value : i.getNamedItem("data-bm-prerender") ? i.getNamedItem("data-bm-prerender").value : i.getNamedItem("bm-prerender") ? i.getNamedItem("bm-prerender").value : "") && (n.prerender = !1), this.setParams(n)
            }, AnimationItem.prototype.includeLayers = function(e) {
                e.op > this.animationData.op && (this.animationData.op = e.op, this.totalFrames = Math.floor(e.op - this.animationData.ip), this.animationData.tf = this.totalFrames);
                var t, n, i = this.animationData.layers,
                    a = i.length,
                    r = e.layers,
                    o = r.length;
                for (n = 0; n < o; n += 1)
                    for (t = 0; t < a;) {
                        if (i[t].id == r[n].id) {
                            i[t] = r[n];
                            break
                        }
                        t += 1
                    }
                if ((e.chars || e.fonts) && (this.renderer.globalData.fontManager.addChars(e.chars), this.renderer.globalData.fontManager.addFonts(e.fonts, this.renderer.globalData.defs)), e.assets)
                    for (a = e.assets.length, t = 0; t < a; t += 1) this.animationData.assets.push(e.assets[t]);
                this.animationData.__complete = !1, dataManager.completeData(this.animationData, this.renderer.globalData.fontManager), this.renderer.includeLayers(e.layers), expressionsPlugin && expressionsPlugin.initExpressions(this), this.renderer.renderFrame(null), this.loadNextSegment()
            }, AnimationItem.prototype.loadNextSegment = function() {
                var e = this.animationData.segments;
                if (!e || 0 === e.length || !this.autoloadSegments) return this.trigger("data_ready"), void(this.timeCompleted = this.animationData.tf);
                var t = e.shift();
                this.timeCompleted = t.time * this.frameRate;
                var n = new XMLHttpRequest,
                    i = this,
                    a = this.path + this.fileName + "_" + this.segmentPos + ".json";
                this.segmentPos += 1, n.open("GET", a, !0), n.send(), n.onreadystatechange = function() {
                    if (4 == n.readyState)
                        if (200 == n.status) i.includeLayers(JSON.parse(n.responseText));
                        else try {
                            var e = JSON.parse(n.responseText);
                            i.includeLayers(e)
                        } catch (e) {}
                }
            }, AnimationItem.prototype.loadSegments = function() {
                this.animationData.segments || (this.timeCompleted = this.animationData.tf), this.loadNextSegment()
            }, AnimationItem.prototype.configAnimation = function(e) {
                var t = this;
                this.renderer && this.renderer.destroyed || (this.animationData = e, this.totalFrames = Math.floor(this.animationData.op - this.animationData.ip), this.animationData.tf = this.totalFrames, this.renderer.configAnimation(e), e.assets || (e.assets = []), e.comps && (e.assets = e.assets.concat(e.comps), e.comps = null), this.renderer.searchExtraCompositions(e.assets), this.layers = this.animationData.layers, this.assets = this.animationData.assets, this.frameRate = this.animationData.fr, this.firstFrame = Math.round(this.animationData.ip), this.frameMult = this.animationData.fr / 1e3, this.trigger("config_ready"), this.imagePreloader = new ImagePreloader, this.imagePreloader.setAssetsPath(this.assetsPath), this.imagePreloader.setPath(this.path), this.imagePreloader.loadAssets(e.assets, function(e) {
                    e || t.trigger("loaded_images")
                }), this.loadSegments(), this.updaFrameModifier(), this.renderer.globalData.fontManager ? this.waitForFontsLoaded() : (dataManager.completeData(this.animationData, this.renderer.globalData.fontManager), this.checkLoaded()))
            }, AnimationItem.prototype.waitForFontsLoaded = function() {
                (function e() {
                    this.renderer.globalData.fontManager.loaded ? (dataManager.completeData(this.animationData, this.renderer.globalData.fontManager), this.checkLoaded()) : setTimeout(e.bind(this), 20)
                }).bind(this)()
            }, AnimationItem.prototype.addPendingElement = function() {
                this.pendingElements += 1
            }, AnimationItem.prototype.elementLoaded = function() {
                this.pendingElements--, this.checkLoaded()
            }, AnimationItem.prototype.checkLoaded = function() {
                0 === this.pendingElements && (expressionsPlugin && expressionsPlugin.initExpressions(this), this.renderer.initItems(), setTimeout(function() {
                    this.trigger("DOMLoaded")
                }.bind(this), 0), this.isLoaded = !0, this.gotoFrame(), this.autoplay && this.play())
            }, AnimationItem.prototype.resize = function() {
                this.renderer.updateContainerSize()
            }, AnimationItem.prototype.setSubframe = function(e) {
                this.subframeEnabled = !!e
            }, AnimationItem.prototype.gotoFrame = function() {
                this.subframeEnabled ? this.currentFrame = this.currentRawFrame : this.currentFrame = Math.floor(this.currentRawFrame), this.timeCompleted !== this.totalFrames && this.currentFrame > this.timeCompleted && (this.currentFrame = this.timeCompleted), this.trigger("enterFrame"), this.renderFrame()
            }, AnimationItem.prototype.renderFrame = function() {
                !1 !== this.isLoaded && this.renderer.renderFrame(this.currentFrame + this.firstFrame)
            }, AnimationItem.prototype.play = function(e) {
                e && this.name != e || !0 === this.isPaused && (this.isPaused = !1, this._idle && (this._idle = !1, this.trigger("_active")))
            }, AnimationItem.prototype.pause = function(e) {
                e && this.name != e || !1 === this.isPaused && (this.isPaused = !0, this.pendingSegment || (this._idle = !0, this.trigger("_idle")))
            }, AnimationItem.prototype.togglePause = function(e) {
                e && this.name != e || (!0 === this.isPaused ? this.play() : this.pause())
            }, AnimationItem.prototype.stop = function(e) {
                e && this.name != e || (this.pause(), this.currentFrame = this.currentRawFrame = 0, this.playCount = 0, this.gotoFrame())
            }, AnimationItem.prototype.goToAndStop = function(e, t, n) {
                n && this.name != n || (t ? this.setCurrentRawFrameValue(e) : this.setCurrentRawFrameValue(e * this.frameModifier), this.pause())
            }, AnimationItem.prototype.goToAndPlay = function(e, t, n) {
                this.goToAndStop(e, t, n), this.play()
            }, AnimationItem.prototype.advanceTime = function(e) {
                if (this.pendingSegment) return this.pendingSegment = !1, this.adjustSegment(this.segments.shift()), void(this.isPaused && this.play());
                !0 !== this.isPaused && !1 !== this.isLoaded && this.setCurrentRawFrameValue(this.currentRawFrame + e * this.frameModifier)
            }, AnimationItem.prototype.updateAnimation = function(e) {
                this.setCurrentRawFrameValue(this.totalFrames * e)
            }, AnimationItem.prototype.moveFrame = function(e, t) {
                t && this.name != t || this.setCurrentRawFrameValue(this.currentRawFrame + e)
            }, AnimationItem.prototype.adjustSegment = function(e) {
                this.playCount = 0, e[1] < e[0] ? (this.frameModifier > 0 && (this.playSpeed < 0 ? this.setSpeed(-this.playSpeed) : this.setDirection(-1)), this.totalFrames = e[0] - e[1], this.firstFrame = e[1], this.setCurrentRawFrameValue(this.totalFrames - .01)) : e[1] > e[0] && (this.frameModifier < 0 && (this.playSpeed < 0 ? this.setSpeed(-this.playSpeed) : this.setDirection(1)), this.totalFrames = e[1] - e[0], this.firstFrame = e[0], this.setCurrentRawFrameValue(0)), this.trigger("segmentStart")
            }, AnimationItem.prototype.setSegment = function(e, t) {
                var n = -1;
                this.isPaused && (this.currentRawFrame + this.firstFrame < e ? n = e : this.currentRawFrame + this.firstFrame > t && (n = t - e - .01)), this.firstFrame = e, this.totalFrames = t - e, -1 !== n && this.goToAndStop(n, !0)
            }, AnimationItem.prototype.playSegments = function(e, t) {
                if ("object" == typeof e[0]) {
                    var n, i = e.length;
                    for (n = 0; n < i; n += 1) this.segments.push(e[n])
                } else this.segments.push(e);
                t && this.adjustSegment(this.segments.shift()), this.isPaused && this.play()
            }, AnimationItem.prototype.resetSegments = function(e) {
                this.segments.length = 0, this.segments.push([this.animationData.ip * this.frameRate, Math.floor(this.animationData.op - this.animationData.ip + this.animationData.ip * this.frameRate)]), e && this.adjustSegment(this.segments.shift())
            }, AnimationItem.prototype.checkSegments = function() {
                this.segments.length && (this.pendingSegment = !0)
            }, AnimationItem.prototype.remove = function(e) {
                e && this.name != e || this.renderer.destroy()
            }, AnimationItem.prototype.destroy = function(e) {
                e && this.name != e || this.renderer && this.renderer.destroyed || (this.renderer.destroy(), this.trigger("destroy"), this._cbs = null, this.onEnterFrame = this.onLoopComplete = this.onComplete = this.onSegmentStart = this.onDestroy = null)
            }, AnimationItem.prototype.setCurrentRawFrameValue = function(e) {
                if (this.currentRawFrame = e, this.currentRawFrame >= this.totalFrames) {
                    if (this.checkSegments(), !1 === this.loop) return this.currentRawFrame = this.totalFrames - .01, this.gotoFrame(), this.pause(), void this.trigger("complete");
                    if (this.trigger("loopComplete"), this.playCount += 1, !0 !== this.loop && this.playCount == this.loop || this.pendingSegment) return this.currentRawFrame = this.totalFrames - .01, this.gotoFrame(), this.pause(), void this.trigger("complete");
                    this.currentRawFrame = this.currentRawFrame % this.totalFrames
                } else if (this.currentRawFrame < 0) return this.checkSegments(), this.playCount -= 1, this.playCount < 0 && (this.playCount = 0), !1 === this.loop || this.pendingSegment ? (this.currentRawFrame = 0, this.gotoFrame(), this.pause(), void this.trigger("complete")) : (this.trigger("loopComplete"), this.currentRawFrame = (this.totalFrames + this.currentRawFrame) % this.totalFrames, void this.gotoFrame());
                this.gotoFrame()
            }, AnimationItem.prototype.setSpeed = function(e) {
                this.playSpeed = e, this.updaFrameModifier()
            }, AnimationItem.prototype.setDirection = function(e) {
                this.playDirection = e < 0 ? -1 : 1, this.updaFrameModifier()
            }, AnimationItem.prototype.updaFrameModifier = function() {
                this.frameModifier = this.frameMult * this.playSpeed * this.playDirection
            }, AnimationItem.prototype.getPath = function() {
                return this.path
            }, AnimationItem.prototype.getAssetsPath = function(e) {
                var t = "";
                if (this.assetsPath) {
                    var n = e.p; - 1 !== n.indexOf("images/") && (n = n.split("/")[1]), t = this.assetsPath + n
                } else t = this.path, t += e.u ? e.u : "", t += e.p;
                return t
            }, AnimationItem.prototype.getAssetData = function(e) {
                for (var t = 0, n = this.assets.length; t < n;) {
                    if (e == this.assets[t].id) return this.assets[t];
                    t += 1
                }
            }, AnimationItem.prototype.hide = function() {
                this.renderer.hide()
            }, AnimationItem.prototype.show = function() {
                this.renderer.show()
            }, AnimationItem.prototype.getAssets = function() {
                return this.assets
            }, AnimationItem.prototype.trigger = function(e) {
                if (this._cbs && this._cbs[e]) switch (e) {
                    case "enterFrame":
                        this.triggerEvent(e, new BMEnterFrameEvent(e, this.currentFrame, this.totalFrames, this.frameMult));
                        break;
                    case "loopComplete":
                        this.triggerEvent(e, new BMCompleteLoopEvent(e, this.loop, this.playCount, this.frameMult));
                        break;
                    case "complete":
                        this.triggerEvent(e, new BMCompleteEvent(e, this.frameMult));
                        break;
                    case "segmentStart":
                        this.triggerEvent(e, new BMSegmentStartEvent(e, this.firstFrame, this.totalFrames));
                        break;
                    case "destroy":
                        this.triggerEvent(e, new BMDestroyEvent(e, this));
                        break;
                    default:
                        this.triggerEvent(e)
                }
                "enterFrame" === e && this.onEnterFrame && this.onEnterFrame.call(this, new BMEnterFrameEvent(e, this.currentFrame, this.totalFrames, this.frameMult)), "loopComplete" === e && this.onLoopComplete && this.onLoopComplete.call(this, new BMCompleteLoopEvent(e, this.loop, this.playCount, this.frameMult)), "complete" === e && this.onComplete && this.onComplete.call(this, new BMCompleteEvent(e, this.frameMult)), "segmentStart" === e && this.onSegmentStart && this.onSegmentStart.call(this, new BMSegmentStartEvent(e, this.firstFrame, this.totalFrames)), "destroy" === e && this.onDestroy && this.onDestroy.call(this, new BMDestroyEvent(e, this))
            }, AnimationItem.prototype.addEventListener = _addEventListener, AnimationItem.prototype.removeEventListener = _removeEventListener, AnimationItem.prototype.triggerEvent = _triggerEvent, extendPrototype(BaseRenderer, CanvasRenderer), CanvasRenderer.prototype.createBase = function(e) {
                return new CVBaseElement(e, this, this.globalData)
            }, CanvasRenderer.prototype.createShape = function(e) {
                return new CVShapeElement(e, this, this.globalData)
            }, CanvasRenderer.prototype.createText = function(e) {
                return new CVTextElement(e, this, this.globalData)
            }, CanvasRenderer.prototype.createImage = function(e) {
                return new CVImageElement(e, this, this.globalData)
            }, CanvasRenderer.prototype.createComp = function(e) {
                return new CVCompElement(e, this, this.globalData)
            }, CanvasRenderer.prototype.createSolid = function(e) {
                return new CVSolidElement(e, this, this.globalData)
            }, CanvasRenderer.prototype.ctxTransform = function(e) {
                if (1 !== e[0] || 0 !== e[1] || 0 !== e[4] || 1 !== e[5] || 0 !== e[12] || 0 !== e[13])
                    if (this.renderConfig.clearCanvas) {
                        this.transformMat.cloneFromProps(e), this.transformMat.transform(this.contextData.cTr.props[0], this.contextData.cTr.props[1], this.contextData.cTr.props[2], this.contextData.cTr.props[3], this.contextData.cTr.props[4], this.contextData.cTr.props[5], this.contextData.cTr.props[6], this.contextData.cTr.props[7], this.contextData.cTr.props[8], this.contextData.cTr.props[9], this.contextData.cTr.props[10], this.contextData.cTr.props[11], this.contextData.cTr.props[12], this.contextData.cTr.props[13], this.contextData.cTr.props[14], this.contextData.cTr.props[15]), this.contextData.cTr.cloneFromProps(this.transformMat.props);
                        var t = this.contextData.cTr.props;
                        this.canvasContext.setTransform(t[0], t[1], t[4], t[5], t[12], t[13])
                    } else this.canvasContext.transform(e[0], e[1], e[4], e[5], e[12], e[13])
            }, CanvasRenderer.prototype.ctxOpacity = function(e) {
                1 !== e && (this.renderConfig.clearCanvas ? (this.contextData.cO *= e < 0 ? 0 : e, this.canvasContext.globalAlpha = this.contextData.cO) : this.canvasContext.globalAlpha *= e < 0 ? 0 : e)
            }, CanvasRenderer.prototype.reset = function() {
                this.renderConfig.clearCanvas ? (this.contextData.cArrPos = 0, this.contextData.cTr.reset(), this.contextData.cO = 1) : this.canvasContext.restore()
            }, CanvasRenderer.prototype.save = function(e) {
                if (this.renderConfig.clearCanvas) {
                    e && this.canvasContext.save();
                    var t = this.contextData.cTr.props;
                    null !== this.contextData.saved[this.contextData.cArrPos] && void 0 !== this.contextData.saved[this.contextData.cArrPos] || (this.contextData.saved[this.contextData.cArrPos] = new Array(16));
                    var n, i = this.contextData.saved[this.contextData.cArrPos];
                    for (n = 0; n < 16; n += 1) i[n] = t[n];
                    this.contextData.savedOp[this.contextData.cArrPos] = this.contextData.cO, this.contextData.cArrPos += 1
                } else this.canvasContext.save()
            }, CanvasRenderer.prototype.restore = function(e) {
                if (this.renderConfig.clearCanvas) {
                    e && this.canvasContext.restore(), this.contextData.cArrPos -= 1;
                    var t, n = this.contextData.saved[this.contextData.cArrPos],
                        i = this.contextData.cTr.props;
                    for (t = 0; t < 16; t += 1) i[t] = n[t];
                    this.canvasContext.setTransform(n[0], n[1], n[4], n[5], n[12], n[13]), n = this.contextData.savedOp[this.contextData.cArrPos], this.contextData.cO = n, this.canvasContext.globalAlpha = n
                } else this.canvasContext.restore()
            }, CanvasRenderer.prototype.configAnimation = function(e) {
                this.animationItem.wrapper ? (this.animationItem.container = document.createElement("canvas"), this.animationItem.container.style.width = "100%", this.animationItem.container.style.height = "100%", this.animationItem.container.style.transformOrigin = this.animationItem.container.style.mozTransformOrigin = this.animationItem.container.style.webkitTransformOrigin = this.animationItem.container.style["-webkit-transform"] = "0px 0px 0px", this.animationItem.wrapper.appendChild(this.animationItem.container), this.canvasContext = this.animationItem.container.getContext("2d"), this.renderConfig.className && this.animationItem.container.setAttribute("class", this.renderConfig.className)) : this.canvasContext = this.renderConfig.context, this.data = e, this.globalData.canvasContext = this.canvasContext, this.globalData.renderer = this, this.globalData.isDashed = !1, this.globalData.totalFrames = Math.floor(e.tf), this.globalData.compWidth = e.w, this.globalData.compHeight = e.h, this.globalData.frameRate = e.fr, this.globalData.frameId = 0, this.globalData.compSize = {
                    w: e.w,
                    h: e.h
                }, this.globalData.progressiveLoad = this.renderConfig.progressiveLoad, this.layers = e.layers, this.transformCanvas = {}, this.transformCanvas.w = e.w, this.transformCanvas.h = e.h, this.globalData.fontManager = new FontManager, this.globalData.fontManager.addChars(e.chars), this.globalData.fontManager.addFonts(e.fonts, document.body), this.globalData.getAssetData = this.animationItem.getAssetData.bind(this.animationItem), this.globalData.getAssetsPath = this.animationItem.getAssetsPath.bind(this.animationItem), this.globalData.elementLoaded = this.animationItem.elementLoaded.bind(this.animationItem), this.globalData.addPendingElement = this.animationItem.addPendingElement.bind(this.animationItem), this.globalData.transformCanvas = this.transformCanvas, this.elements = Array.apply(null, {
                    length: e.layers.length
                }), this.updateContainerSize()
            }, CanvasRenderer.prototype.updateContainerSize = function() {
                var e, t, n, i;
                if (this.animationItem.wrapper && this.animationItem.container ? (e = this.animationItem.wrapper.offsetWidth, t = this.animationItem.wrapper.offsetHeight, this.animationItem.container.setAttribute("width", e * this.renderConfig.dpr), this.animationItem.container.setAttribute("height", t * this.renderConfig.dpr)) : (e = this.canvasContext.canvas.width * this.renderConfig.dpr, t = this.canvasContext.canvas.height * this.renderConfig.dpr), -1 !== this.renderConfig.preserveAspectRatio.indexOf("meet") || -1 !== this.renderConfig.preserveAspectRatio.indexOf("slice")) {
                    var a = this.renderConfig.preserveAspectRatio.split(" "),
                        r = a[1] || "meet",
                        o = a[0] || "xMidYMid",
                        s = o.substr(0, 4),
                        l = o.substr(4);
                    n = e / t, (i = this.transformCanvas.w / this.transformCanvas.h) > n && "meet" === r || i < n && "slice" === r ? (this.transformCanvas.sx = e / (this.transformCanvas.w / this.renderConfig.dpr), this.transformCanvas.sy = e / (this.transformCanvas.w / this.renderConfig.dpr)) : (this.transformCanvas.sx = t / (this.transformCanvas.h / this.renderConfig.dpr), this.transformCanvas.sy = t / (this.transformCanvas.h / this.renderConfig.dpr)), this.transformCanvas.tx = "xMid" === s && (i < n && "meet" === r || i > n && "slice" === r) ? (e - this.transformCanvas.w * (t / this.transformCanvas.h)) / 2 * this.renderConfig.dpr : "xMax" === s && (i < n && "meet" === r || i > n && "slice" === r) ? (e - this.transformCanvas.w * (t / this.transformCanvas.h)) * this.renderConfig.dpr : 0, this.transformCanvas.ty = "YMid" === l && (i > n && "meet" === r || i < n && "slice" === r) ? (t - this.transformCanvas.h * (e / this.transformCanvas.w)) / 2 * this.renderConfig.dpr : "YMax" === l && (i > n && "meet" === r || i < n && "slice" === r) ? (t - this.transformCanvas.h * (e / this.transformCanvas.w)) * this.renderConfig.dpr : 0
                } else "none" == this.renderConfig.preserveAspectRatio ? (this.transformCanvas.sx = e / (this.transformCanvas.w / this.renderConfig.dpr), this.transformCanvas.sy = t / (this.transformCanvas.h / this.renderConfig.dpr), this.transformCanvas.tx = 0, this.transformCanvas.ty = 0) : (this.transformCanvas.sx = this.renderConfig.dpr, this.transformCanvas.sy = this.renderConfig.dpr, this.transformCanvas.tx = 0, this.transformCanvas.ty = 0);
                this.transformCanvas.props = [this.transformCanvas.sx, 0, 0, 0, 0, this.transformCanvas.sy, 0, 0, 0, 0, 1, 0, this.transformCanvas.tx, this.transformCanvas.ty, 0, 1];
                var c, u = this.elements.length;
                for (c = 0; c < u; c += 1) this.elements[c] && 0 === this.elements[c].data.ty && this.elements[c].resize(this.globalData.transformCanvas)
            }, CanvasRenderer.prototype.destroy = function() {
                var e;
                for (this.renderConfig.clearCanvas && (this.animationItem.wrapper.innerHTML = ""), e = (this.layers ? this.layers.length : 0) - 1; e >= 0; e -= 1) this.elements[e] && this.elements[e].destroy();
                this.elements.length = 0, this.globalData.canvasContext = null, this.animationItem.container = null, this.destroyed = !0
            }, CanvasRenderer.prototype.renderFrame = function(e) {
                if (!(this.renderedFrame == e && !0 === this.renderConfig.clearCanvas || this.destroyed || null === e)) {
                    this.renderedFrame = e, this.globalData.frameNum = e - this.animationItem.firstFrame, this.globalData.frameId += 1, this.globalData.projectInterface.currentFrame = e, !0 === this.renderConfig.clearCanvas ? (this.reset(), this.canvasContext.save(), this.canvasContext.clearRect(this.transformCanvas.tx, this.transformCanvas.ty, this.transformCanvas.w * this.transformCanvas.sx, this.transformCanvas.h * this.transformCanvas.sy)) : this.save(), this.ctxTransform(this.transformCanvas.props), this.canvasContext.beginPath(), this.canvasContext.rect(0, 0, this.transformCanvas.w, this.transformCanvas.h), this.canvasContext.closePath(), this.canvasContext.clip();
                    var t, n = this.layers.length;
                    for (this.completeLayers || this.checkLayers(e), t = 0; t < n; t++)(this.completeLayers || this.elements[t]) && this.elements[t].prepareFrame(e - this.layers[t].st);
                    for (t = n - 1; t >= 0; t -= 1)(this.completeLayers || this.elements[t]) && this.elements[t].renderFrame();
                    !0 !== this.renderConfig.clearCanvas ? this.restore() : this.canvasContext.restore()
                }
            }, CanvasRenderer.prototype.buildItem = function(e) {
                var t = this.elements;
                if (!t[e] && 99 != this.layers[e].ty) {
                    var n = this.createItem(this.layers[e], this, this.globalData);
                    t[e] = n, n.initExpressions(), 0 === this.layers[e].ty && n.resize(this.globalData.transformCanvas)
                }
            }, CanvasRenderer.prototype.checkPendingElements = function() {
                for (; this.pendingElements.length;) this.pendingElements.pop().checkParenting()
            }, CanvasRenderer.prototype.hide = function() {
                this.animationItem.container.style.display = "none"
            }, CanvasRenderer.prototype.show = function() {
                this.animationItem.container.style.display = "block"
            }, CanvasRenderer.prototype.searchExtraCompositions = function(e) {
                var t, n = e.length;
                for (document.createElementNS(svgNS, "g"), t = 0; t < n; t += 1)
                    if (e[t].xt) {
                        var i = this.createComp(e[t], this.globalData.comp, this.globalData);
                        i.initExpressions(), this.globalData.projectInterface.registerComposition(i)
                    }
            }, extendPrototype(BaseRenderer, HybridRenderer), HybridRenderer.prototype.buildItem = SVGRenderer.prototype.buildItem, HybridRenderer.prototype.checkPendingElements = function() {
                for (; this.pendingElements.length;) this.pendingElements.pop().checkParenting()
            }, HybridRenderer.prototype.appendElementInPos = function(e, t) {
                var n = e.getBaseElement();
                if (n) {
                    var i = this.layers[t];
                    if (i.ddd && this.supports3d) this.addTo3dContainer(n, t);
                    else {
                        for (var a, r, o = 0; o < t;) this.elements[o] && !0 !== this.elements[o] && this.elements[o].getBaseElement && (r = this.elements[o], a = this.layers[o].ddd ? this.getThreeDContainerByPos(o) : r.getBaseElement()), o += 1;
                        a ? i.ddd && this.supports3d || this.layerElement.insertBefore(n, a) : i.ddd && this.supports3d || this.layerElement.appendChild(n)
                    }
                }
            }, HybridRenderer.prototype.createBase = function(e) {
                return new SVGBaseElement(e, this.layerElement, this.globalData, this)
            }, HybridRenderer.prototype.createShape = function(e) {
                return this.supports3d ? new HShapeElement(e, this.layerElement, this.globalData, this) : new IShapeElement(e, this.layerElement, this.globalData, this)
            }, HybridRenderer.prototype.createText = function(e) {
                return this.supports3d ? new HTextElement(e, this.layerElement, this.globalData, this) : new SVGTextElement(e, this.layerElement, this.globalData, this)
            }, HybridRenderer.prototype.createCamera = function(e) {
                return this.camera = new HCameraElement(e, this.layerElement, this.globalData, this), this.camera
            }, HybridRenderer.prototype.createImage = function(e) {
                return this.supports3d ? new HImageElement(e, this.layerElement, this.globalData, this) : new IImageElement(e, this.layerElement, this.globalData, this)
            }, HybridRenderer.prototype.createComp = function(e) {
                return this.supports3d ? new HCompElement(e, this.layerElement, this.globalData, this) : new ICompElement(e, this.layerElement, this.globalData, this)
            }, HybridRenderer.prototype.createSolid = function(e) {
                return this.supports3d ? new HSolidElement(e, this.layerElement, this.globalData, this) : new ISolidElement(e, this.layerElement, this.globalData, this)
            }, HybridRenderer.prototype.getThreeDContainerByPos = function(e) {
                for (var t = 0, n = this.threeDElements.length; t < n;) {
                    if (this.threeDElements[t].startPos <= e && this.threeDElements[t].endPos >= e) return this.threeDElements[t].perspectiveElem;
                    t += 1
                }
            }, HybridRenderer.prototype.createThreeDContainer = function(e) {
                var t = document.createElement("div");
                styleDiv(t), t.style.width = this.globalData.compSize.w + "px", t.style.height = this.globalData.compSize.h + "px", t.style.transformOrigin = t.style.mozTransformOrigin = t.style.webkitTransformOrigin = "50% 50%";
                var n = document.createElement("div");
                styleDiv(n), n.style.transform = n.style.webkitTransform = "matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)", t.appendChild(n), this.resizerElem.appendChild(t);
                var i = {
                    container: n,
                    perspectiveElem: t,
                    startPos: e,
                    endPos: e
                };
                return this.threeDElements.push(i), i
            }, HybridRenderer.prototype.build3dContainers = function() {
                var e, t, n = this.layers.length;
                for (e = 0; e < n; e += 1) this.layers[e].ddd ? (t || (t = this.createThreeDContainer(e)), t.endPos = Math.max(t.endPos, e)) : t = null
            }, HybridRenderer.prototype.addTo3dContainer = function(e, t) {
                for (var n = 0, i = this.threeDElements.length; n < i;) {
                    if (t <= this.threeDElements[n].endPos) {
                        for (var a, r = this.threeDElements[n].startPos; r < t;) this.elements[r] && this.elements[r].getBaseElement && (a = this.elements[r].getBaseElement()), r += 1;
                        a ? this.threeDElements[n].container.insertBefore(e, a) : this.threeDElements[n].container.appendChild(e);
                        break
                    }
                    n += 1
                }
            }, HybridRenderer.prototype.configAnimation = function(e) {
                var t = document.createElement("div"),
                    n = this.animationItem.wrapper;
                t.style.width = e.w + "px", t.style.height = e.h + "px", this.resizerElem = t, styleDiv(t), t.style.transformStyle = t.style.webkitTransformStyle = t.style.mozTransformStyle = "flat", this.renderConfig.className && n.setAttribute("class", this.renderConfig.className), n.appendChild(t), t.style.overflow = "hidden";
                var i = document.createElementNS(svgNS, "svg");
                i.setAttribute("width", "1"), i.setAttribute("height", "1"), styleDiv(i), this.resizerElem.appendChild(i);
                var a = document.createElementNS(svgNS, "defs");
                i.appendChild(a), this.globalData.defs = a, this.data = e, this.globalData.getAssetData = this.animationItem.getAssetData.bind(this.animationItem), this.globalData.getAssetsPath = this.animationItem.getAssetsPath.bind(this.animationItem), this.globalData.elementLoaded = this.animationItem.elementLoaded.bind(this.animationItem), this.globalData.frameId = 0, this.globalData.compSize = {
                    w: e.w,
                    h: e.h
                }, this.globalData.frameRate = e.fr, this.layers = e.layers, this.globalData.fontManager = new FontManager, this.globalData.fontManager.addChars(e.chars), this.globalData.fontManager.addFonts(e.fonts, i), this.layerElement = this.resizerElem, this.build3dContainers(), this.updateContainerSize()
            }, HybridRenderer.prototype.destroy = function() {
                this.animationItem.wrapper.innerHTML = "", this.animationItem.container = null, this.globalData.defs = null;
                var e, t = this.layers ? this.layers.length : 0;
                for (e = 0; e < t; e++) this.elements[e].destroy();
                this.elements.length = 0, this.destroyed = !0, this.animationItem = null
            }, HybridRenderer.prototype.updateContainerSize = function() {
                var e, t, n, i, a = this.animationItem.wrapper.offsetWidth,
                    r = this.animationItem.wrapper.offsetHeight,
                    o = a / r;
                this.globalData.compSize.w / this.globalData.compSize.h > o ? (e = a / this.globalData.compSize.w, t = a / this.globalData.compSize.w, n = 0, i = (r - this.globalData.compSize.h * (a / this.globalData.compSize.w)) / 2) : (e = r / this.globalData.compSize.h, t = r / this.globalData.compSize.h, n = (a - this.globalData.compSize.w * (r / this.globalData.compSize.h)) / 2, i = 0), this.resizerElem.style.transform = this.resizerElem.style.webkitTransform = "matrix3d(" + e + ",0,0,0,0," + t + ",0,0,0,0,1,0," + n + "," + i + ",0,1)"
            }, HybridRenderer.prototype.renderFrame = SVGRenderer.prototype.renderFrame, HybridRenderer.prototype.hide = function() {
                this.resizerElem.style.display = "none"
            }, HybridRenderer.prototype.show = function() {
                this.resizerElem.style.display = "block"
            }, HybridRenderer.prototype.initItems = function() {
                if (this.buildAllItems(), this.camera) this.camera.setup();
                else {
                    var e, t = this.globalData.compSize.w,
                        n = this.globalData.compSize.h,
                        i = this.threeDElements.length;
                    for (e = 0; e < i; e += 1) this.threeDElements[e].perspectiveElem.style.perspective = this.threeDElements[e].perspectiveElem.style.webkitPerspective = Math.sqrt(Math.pow(t, 2) + Math.pow(n, 2)) + "px"
                }
            }, HybridRenderer.prototype.searchExtraCompositions = function(e) {
                var t, n = e.length,
                    i = document.createElement("div");
                for (t = 0; t < n; t += 1)
                    if (e[t].xt) {
                        var a = this.createComp(e[t], i, this.globalData.comp, null);
                        a.initExpressions(), this.globalData.projectInterface.registerComposition(a)
                    }
            }, createElement(BaseElement, CVBaseElement), CVBaseElement.prototype.createElements = function() {
                this.checkParenting()
            }, CVBaseElement.prototype.checkBlendMode = function(e) {
                if (e.blendMode !== this.data.bm) {
                    e.blendMode = this.data.bm;
                    var t = "";
                    switch (this.data.bm) {
                        case 0:
                            t = "normal";
                            break;
                        case 1:
                            t = "multiply";
                            break;
                        case 2:
                            t = "screen";
                            break;
                        case 3:
                            t = "overlay";
                            break;
                        case 4:
                            t = "darken";
                            break;
                        case 5:
                            t = "lighten";
                            break;
                        case 6:
                            t = "color-dodge";
                            break;
                        case 7:
                            t = "color-burn";
                            break;
                        case 8:
                            t = "hard-light";
                            break;
                        case 9:
                            t = "soft-light";
                            break;
                        case 10:
                            t = "difference";
                            break;
                        case 11:
                            t = "exclusion";
                            break;
                        case 12:
                            t = "hue";
                            break;
                        case 13:
                            t = "saturation";
                            break;
                        case 14:
                            t = "color";
                            break;
                        case 15:
                            t = "luminosity"
                    }
                    e.canvasContext.globalCompositeOperation = t
                }
            }, CVBaseElement.prototype.renderFrame = function(e) {
                if (3 === this.data.ty) return !1;
                if (this.checkBlendMode(0 === this.data.ty ? this.parentGlobalData : this.globalData), !this.isVisible) return this.isVisible;
                var t;
                this.finalTransform.opMdf = this.finalTransform.op.mdf, this.finalTransform.matMdf = this.finalTransform.mProp.mdf, this.finalTransform.opacity = this.finalTransform.op.v;
                var n = this.finalTransform.mat;
                if (this.hierarchy) {
                    var i, a = this.hierarchy.length;
                    for (t = this.finalTransform.mProp.v.props, n.cloneFromProps(t), i = 0; i < a; i += 1) this.finalTransform.matMdf = !!this.hierarchy[i].finalTransform.mProp.mdf || this.finalTransform.matMdf, t = this.hierarchy[i].finalTransform.mProp.v.props, n.transform(t[0], t[1], t[2], t[3], t[4], t[5], t[6], t[7], t[8], t[9], t[10], t[11], t[12], t[13], t[14], t[15])
                } else e ? (t = this.finalTransform.mProp.v.props, n.cloneFromProps(t)) : n.cloneFromProps(this.finalTransform.mProp.v.props);
                return e && (t = e.mat.props, n.transform(t[0], t[1], t[2], t[3], t[4], t[5], t[6], t[7], t[8], t[9], t[10], t[11], t[12], t[13], t[14], t[15]), this.finalTransform.opacity *= e.opacity, this.finalTransform.opMdf = !!e.opMdf || this.finalTransform.opMdf, this.finalTransform.matMdf = !!e.matMdf || this.finalTransform.matMdf), this.data.hasMask && (this.globalData.renderer.save(!0), this.maskManager.renderFrame(0 === this.data.ty ? null : n)), this.data.hd && (this.isVisible = !1), this.isVisible
            }, CVBaseElement.prototype.addMasks = function(e) {
                this.maskManager = new CVMaskElement(e, this, this.globalData)
            }, CVBaseElement.prototype.destroy = function() {
                this.canvasContext = null, this.data = null, this.globalData = null, this.maskManager && this.maskManager.destroy()
            }, CVBaseElement.prototype.mHelper = new Matrix, createElement(CVBaseElement, CVCompElement), CVCompElement.prototype.ctxTransform = CanvasRenderer.prototype.ctxTransform, CVCompElement.prototype.ctxOpacity = CanvasRenderer.prototype.ctxOpacity, CVCompElement.prototype.save = CanvasRenderer.prototype.save, CVCompElement.prototype.restore = CanvasRenderer.prototype.restore, CVCompElement.prototype.reset = function() {
                this.contextData.cArrPos = 0, this.contextData.cTr.reset(), this.contextData.cO = 1
            }, CVCompElement.prototype.resize = function(e) {
                var t = Math.max(e.sx, e.sy);
                this.canvas.width = this.data.w * t, this.canvas.height = this.data.h * t, this.transformCanvas = {
                    sc: t,
                    w: this.data.w * t,
                    h: this.data.h * t,
                    props: [t, 0, 0, 0, 0, t, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]
                };
                var n, i = this.elements.length;
                for (n = 0; n < i; n += 1) this.elements[n] && 0 === this.elements[n].data.ty && this.elements[n].resize(e)
            }, CVCompElement.prototype.prepareFrame = function(e) {
                if (this.globalData.frameId = this.parentGlobalData.frameId, this.globalData.mdf = !1, this._parent.prepareFrame.call(this, e), !1 !== this.isVisible || this.data.xt) {
                    var t = e;
                    this.tm && (t = this.tm.v) === this.data.op && (t = this.data.op - 1), this.renderedFrame = t / this.data.sr;
                    var n, i = this.elements.length;
                    for (this.completeLayers || this.checkLayers(e), n = 0; n < i; n += 1)(this.completeLayers || this.elements[n]) && (this.elements[n].prepareFrame(t / this.data.sr - this.layers[n].st), 0 === this.elements[n].data.ty && this.elements[n].globalData.mdf && (this.globalData.mdf = !0));
                    this.globalData.mdf && !this.data.xt && (this.canvasContext.clearRect(0, 0, this.data.w, this.data.h), this.ctxTransform(this.transformCanvas.props))
                }
            }, CVCompElement.prototype.renderFrame = function(e) {
                if (!1 !== this._parent.renderFrame.call(this, e)) {
                    var t;
                    if (this.globalData.mdf)
                        for (t = this.layers.length - 1; t >= 0; t -= 1)(this.completeLayers || this.elements[t]) && this.elements[t].renderFrame();
                    this.data.hasMask && this.globalData.renderer.restore(!0), this.firstFrame && (this.firstFrame = !1), this.parentGlobalData.renderer.save(), this.parentGlobalData.renderer.ctxTransform(this.finalTransform.mat.props), this.parentGlobalData.renderer.ctxOpacity(this.finalTransform.opacity), this.parentGlobalData.renderer.canvasContext.drawImage(this.canvas, 0, 0, this.data.w, this.data.h), this.parentGlobalData.renderer.restore(), this.globalData.mdf && this.reset()
                }
            }, CVCompElement.prototype.setElements = function(e) {
                this.elements = e
            }, CVCompElement.prototype.getElements = function() {
                return this.elements
            }, CVCompElement.prototype.destroy = function() {
                var e;
                for (e = this.layers.length - 1; e >= 0; e -= 1) this.elements[e].destroy();
                this.layers = null, this.elements = null, this._parent.destroy.call(this._parent)
            }, CVCompElement.prototype.checkLayers = CanvasRenderer.prototype.checkLayers, CVCompElement.prototype.buildItem = CanvasRenderer.prototype.buildItem, CVCompElement.prototype.checkPendingElements = CanvasRenderer.prototype.checkPendingElements, CVCompElement.prototype.addPendingElement = CanvasRenderer.prototype.addPendingElement, CVCompElement.prototype.buildAllItems = CanvasRenderer.prototype.buildAllItems, CVCompElement.prototype.createItem = CanvasRenderer.prototype.createItem, CVCompElement.prototype.createImage = CanvasRenderer.prototype.createImage, CVCompElement.prototype.createComp = CanvasRenderer.prototype.createComp, CVCompElement.prototype.createSolid = CanvasRenderer.prototype.createSolid, CVCompElement.prototype.createShape = CanvasRenderer.prototype.createShape, CVCompElement.prototype.createText = CanvasRenderer.prototype.createText, CVCompElement.prototype.createBase = CanvasRenderer.prototype.createBase, CVCompElement.prototype.buildElementParenting = CanvasRenderer.prototype.buildElementParenting, createElement(CVBaseElement, CVImageElement), CVImageElement.prototype.createElements = function() {
                var e = function() {
                        if (this.globalData.elementLoaded(), this.assetData.w !== this.img.width || this.assetData.h !== this.img.height) {
                            var e = document.createElement("canvas");
                            e.width = this.assetData.w, e.height = this.assetData.h;
                            var t, n, i = e.getContext("2d"),
                                a = this.img.width,
                                r = this.img.height,
                                o = a / r,
                                s = this.assetData.w / this.assetData.h;
                            o > s ? t = (n = r) * s : n = (t = a) / s, i.drawImage(this.img, (a - t) / 2, (r - n) / 2, t, n, 0, 0, this.assetData.w, this.assetData.h), this.img = e
                        }
                    }.bind(this),
                    t = function() {
                        this.failed = !0, this.globalData.elementLoaded()
                    }.bind(this);
                this.img = new Image, this.img.addEventListener("load", e, !1), this.img.addEventListener("error", t, !1);
                var n = this.globalData.getAssetsPath(this.assetData);
                this.img.src = n, this._parent.createElements.call(this)
            }, CVImageElement.prototype.renderFrame = function(e) {
                if (!this.failed && !1 !== this._parent.renderFrame.call(this, e)) {
                    var t = this.canvasContext;
                    this.globalData.renderer.save();
                    var n = this.finalTransform.mat.props;
                    this.globalData.renderer.ctxTransform(n), this.globalData.renderer.ctxOpacity(this.finalTransform.opacity), t.drawImage(this.img, 0, 0), this.globalData.renderer.restore(this.data.hasMask), this.firstFrame && (this.firstFrame = !1)
                }
            }, CVImageElement.prototype.destroy = function() {
                this.img = null, this._parent.destroy.call(this._parent)
            }, CVMaskElement.prototype.prepareFrame = function(e) {
                var t, n = this.dynamicProperties.length;
                for (t = 0; t < n; t += 1) this.dynamicProperties[t].getValue(e), this.dynamicProperties[t].mdf && (this.element.globalData.mdf = !0)
            }, CVMaskElement.prototype.renderFrame = function(e) {
                var t, n, i, a, r, o = this.element.canvasContext,
                    s = this.data.masksProperties.length,
                    l = !1;
                for (t = 0; t < s; t++)
                    if ("n" !== this.masksProperties[t].mode) {
                        !1 === l && (o.beginPath(), l = !0), this.masksProperties[t].inv && (o.moveTo(0, 0), o.lineTo(this.element.globalData.compWidth, 0), o.lineTo(this.element.globalData.compWidth, this.element.globalData.compHeight), o.lineTo(0, this.element.globalData.compHeight), o.lineTo(0, 0)), r = this.viewData[t].v, n = e ? e.applyToPointArray(r.v[0][0], r.v[0][1], 0) : r.v[0], o.moveTo(n[0], n[1]);
                        var c, u = r._length;
                        for (c = 1; c < u; c++) n = e ? e.applyToPointArray(r.o[c - 1][0], r.o[c - 1][1], 0) : r.o[c - 1], i = e ? e.applyToPointArray(r.i[c][0], r.i[c][1], 0) : r.i[c], a = e ? e.applyToPointArray(r.v[c][0], r.v[c][1], 0) : r.v[c], o.bezierCurveTo(n[0], n[1], i[0], i[1], a[0], a[1]);
                        n = e ? e.applyToPointArray(r.o[c - 1][0], r.o[c - 1][1], 0) : r.o[c - 1], i = e ? e.applyToPointArray(r.i[0][0], r.i[0][1], 0) : r.i[0], a = e ? e.applyToPointArray(r.v[0][0], r.v[0][1], 0) : r.v[0], o.bezierCurveTo(n[0], n[1], i[0], i[1], a[0], a[1])
                    }
                l && o.clip()
            }, CVMaskElement.prototype.getMaskProperty = MaskElement.prototype.getMaskProperty, CVMaskElement.prototype.destroy = function() {
                this.element = null
            }, createElement(CVBaseElement, CVShapeElement), CVShapeElement.prototype.transformHelper = {
                opacity: 1,
                mat: new Matrix,
                matMdf: !1,
                opMdf: !1
            }, CVShapeElement.prototype.dashResetter = [], CVShapeElement.prototype.createElements = function() {
                this._parent.createElements.call(this), this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, this.dynamicProperties, !0)
            }, CVShapeElement.prototype.createStyleElement = function(e, t) {
                var n = {
                        data: e,
                        type: e.ty,
                        elements: []
                    },
                    i = {};
                if ("fl" != e.ty && "st" != e.ty || (i.c = PropertyFactory.getProp(this, e.c, 1, 255, t), i.c.k || (n.co = "rgb(" + bm_floor(i.c.v[0]) + "," + bm_floor(i.c.v[1]) + "," + bm_floor(i.c.v[2]) + ")")), i.o = PropertyFactory.getProp(this, e.o, 0, .01, t), "st" == e.ty) {
                    if (n.lc = this.lcEnum[e.lc] || "round", n.lj = this.ljEnum[e.lj] || "round", 1 == e.lj && (n.ml = e.ml), i.w = PropertyFactory.getProp(this, e.w, 0, null, t), i.w.k || (n.wi = i.w.v), e.d) {
                        var a = PropertyFactory.getDashProp(this, e.d, "canvas", t);
                        i.d = a, i.d.k || (n.da = i.d.dasharray, n.do = i.d.dashoffset)
                    }
                } else n.r = 2 === e.r ? "evenodd" : "nonzero";
                return this.stylesList.push(n), i.style = n, i
            }, CVShapeElement.prototype.createGroupElement = function(e) {
                return {
                    it: [],
                    prevViewData: []
                }
            }, CVShapeElement.prototype.createTransformElement = function(e, t) {
                return {
                    transform: {
                        mat: new Matrix,
                        opacity: 1,
                        matMdf: !1,
                        opMdf: !1,
                        op: PropertyFactory.getProp(this, e.o, 0, .01, t),
                        mProps: PropertyFactory.getProp(this, e, 2, null, t)
                    },
                    elements: []
                }
            }, CVShapeElement.prototype.createShapeElement = function(e, t) {
                var n = {
                        nodes: [],
                        trNodes: [],
                        tr: [0, 0, 0, 0, 0, 0]
                    },
                    i = 4;
                "rc" == e.ty ? i = 5 : "el" == e.ty ? i = 6 : "sr" == e.ty && (i = 7), n.sh = ShapePropertyFactory.getShapeProp(this, e, i, t), this.shapes.push(n.sh), this.addShapeToModifiers(n), jLen = this.stylesList.length;
                var a = !1,
                    r = !1;
                for (j = 0; j < jLen; j += 1) this.stylesList[j].closed || (this.stylesList[j].elements.push(n), "st" === this.stylesList[j].type ? a = !0 : r = !0);
                return n.st = a, n.fl = r, n
            }, CVShapeElement.prototype.reloadShapes = function() {
                this.firstFrame = !0;
                var e, t = this.itemsData.length;
                for (e = 0; e < t; e += 1) this.prevViewData[e] = this.itemsData[e];
                for (this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, this.dynamicProperties, !0), t = this.dynamicProperties.length, e = 0; e < t; e += 1) this.dynamicProperties[e].getValue();
                this.renderModifiers()
            }, CVShapeElement.prototype.searchShapes = function(e, t, n, i, a) {
                var r, o, s, l, c = e.length - 1,
                    u = [],
                    d = [];
                for (r = c; r >= 0; r -= 1) {
                    if ((l = this.searchProcessedElement(e[r])) ? t[r] = n[l - 1] : e[r]._render = a, "fl" == e[r].ty || "st" == e[r].ty) l ? t[r].style.closed = !1 : t[r] = this.createStyleElement(e[r], i), u.push(t[r].style);
                    else if ("gr" == e[r].ty) {
                        if (l)
                            for (s = t[r].it.length, o = 0; o < s; o += 1) t[r].prevViewData[o] = t[r].it[o];
                        else t[r] = this.createGroupElement(e[r]);
                        this.searchShapes(e[r].it, t[r].it, t[r].prevViewData, i, a)
                    } else if ("tr" == e[r].ty) l || (t[r] = this.createTransformElement(e[r], i));
                    else if ("sh" == e[r].ty || "rc" == e[r].ty || "el" == e[r].ty || "sr" == e[r].ty) l || (t[r] = this.createShapeElement(e[r], i));
                    else if ("tm" == e[r].ty || "rd" == e[r].ty) {
                        if (l)(f = t[r]).closed = !1;
                        else {
                            var f = ShapeModifiers.getModifier(e[r].ty);
                            f.init(this, e[r], i), t[r] = f, this.shapeModifiers.push(f)
                        }
                        d.push(f)
                    } else "rp" == e[r].ty && (l ? (f = t[r]).closed = !0 : (f = ShapeModifiers.getModifier(e[r].ty), t[r] = f, f.init(this, e, r, t, i), this.shapeModifiers.push(f), a = !1), d.push(f));
                    this.addProcessedElement(e[r], r + 1)
                }
                for (c = u.length, r = 0; r < c; r += 1) u[r].closed = !0;
                for (c = d.length, r = 0; r < c; r += 1) d[r].closed = !0
            }, CVShapeElement.prototype.addShapeToModifiers = IShapeElement.prototype.addShapeToModifiers, CVShapeElement.prototype.renderModifiers = IShapeElement.prototype.renderModifiers, CVShapeElement.prototype.lcEnum = IShapeElement.prototype.lcEnum, CVShapeElement.prototype.ljEnum = IShapeElement.prototype.ljEnum, CVShapeElement.prototype.searchProcessedElement = IShapeElement.prototype.searchProcessedElement, CVShapeElement.prototype.addProcessedElement = IShapeElement.prototype.addProcessedElement, CVShapeElement.prototype.renderFrame = function(e) {
                !1 !== this._parent.renderFrame.call(this, e) && (this.transformHelper.mat.reset(), this.transformHelper.opacity = this.finalTransform.opacity, this.transformHelper.matMdf = !1, this.transformHelper.opMdf = this.finalTransform.opMdf, this.renderModifiers(), this.renderShape(this.transformHelper, null, null, !0), this.data.hasMask && this.globalData.renderer.restore(!0))
            }, CVShapeElement.prototype.renderShape = function(e, t, n, i) {
                var a, r, o, s;
                if (!t)
                    for (t = this.shapesData, r = this.stylesList.length, a = 0; a < r; a += 1) this.stylesList[a].d = "", this.stylesList[a].mdf = !1;
                for (n || (n = this.itemsData), o = e, a = r = t.length - 1; a >= 0; a -= 1)
                    if ("tr" == t[a].ty) {
                        o = n[a].transform;
                        var l = n[a].transform.mProps.v.props;
                        if (o.matMdf = o.mProps.mdf, o.opMdf = o.op.mdf, (s = o.mat).cloneFromProps(l), e) {
                            var c = e.mat.props;
                            o.opacity = e.opacity, o.opacity *= n[a].transform.op.v, o.matMdf = !!e.matMdf || o.matMdf, o.opMdf = !!e.opMdf || o.opMdf, s.transform(c[0], c[1], c[2], c[3], c[4], c[5], c[6], c[7], c[8], c[9], c[10], c[11], c[12], c[13], c[14], c[15])
                        } else o.opacity = o.op.o
                    } else "sh" == t[a].ty || "el" == t[a].ty || "rc" == t[a].ty || "sr" == t[a].ty ? this.renderPath(t[a], n[a], o) : "fl" == t[a].ty ? this.renderFill(t[a], n[a], o) : "st" == t[a].ty ? this.renderStroke(t[a], n[a], o) : "gr" == t[a].ty ? this.renderShape(o, t[a].it, n[a].it) : t[a].ty;
                if (i) {
                    r = this.stylesList.length;
                    var u, d, f, h, p, A, m, _ = this.globalData.renderer,
                        v = this.globalData.canvasContext;
                    for (_.save(), _.ctxTransform(this.finalTransform.mat.props), a = 0; a < r; a += 1)
                        if (("st" !== (m = this.stylesList[a].type) || 0 !== this.stylesList[a].wi) && this.stylesList[a].data._render) {
                            for (_.save(), p = this.stylesList[a].elements, "st" === m ? (v.strokeStyle = this.stylesList[a].co, v.lineWidth = this.stylesList[a].wi, v.lineCap = this.stylesList[a].lc, v.lineJoin = this.stylesList[a].lj, v.miterLimit = this.stylesList[a].ml || 0) : v.fillStyle = this.stylesList[a].co, _.ctxOpacity(this.stylesList[a].coOp), "st" !== m && v.beginPath(), d = p.length, u = 0; u < d; u += 1) {
                                for ("st" === m && (v.beginPath(), this.stylesList[a].da ? (v.setLineDash(this.stylesList[a].da), v.lineDashOffset = this.stylesList[a].do, this.globalData.isDashed = !0) : this.globalData.isDashed && (v.setLineDash(this.dashResetter), this.globalData.isDashed = !1)), h = (A = p[u].trNodes).length, f = 0; f < h; f += 1) "m" == A[f].t ? v.moveTo(A[f].p[0], A[f].p[1]) : "c" == A[f].t ? v.bezierCurveTo(A[f].p1[0], A[f].p1[1], A[f].p2[0], A[f].p2[1], A[f].p3[0], A[f].p3[1]) : v.closePath();
                                "st" === m && v.stroke()
                            }
                            "st" !== m && v.fill(this.stylesList[a].r), _.restore()
                        }
                    _.restore(), this.firstFrame && (this.firstFrame = !1)
                }
            }, CVShapeElement.prototype.renderPath = function(e, t, n) {
                var i, a, r, o;
                if (n.matMdf || t.sh.mdf || this.firstFrame) {
                    var s = t.sh.paths,
                        l = n.mat;
                    o = s._length;
                    var c = t.trNodes;
                    for (c.length = 0, r = 0; r < o; r += 1) {
                        var u = s.shapes[r];
                        if (u && u.v) {
                            for (i = u._length, a = 1; a < i; a += 1) 1 == a && c.push({
                                t: "m",
                                p: l.applyToPointArray(u.v[0][0], u.v[0][1], 0)
                            }), c.push({
                                t: "c",
                                p1: l.applyToPointArray(u.o[a - 1][0], u.o[a - 1][1], 0),
                                p2: l.applyToPointArray(u.i[a][0], u.i[a][1], 0),
                                p3: l.applyToPointArray(u.v[a][0], u.v[a][1], 0)
                            });
                            1 == i && c.push({
                                t: "m",
                                p: l.applyToPointArray(u.v[0][0], u.v[0][1], 0)
                            }), u.c && i && (c.push({
                                t: "c",
                                p1: l.applyToPointArray(u.o[a - 1][0], u.o[a - 1][1], 0),
                                p2: l.applyToPointArray(u.i[0][0], u.i[0][1], 0),
                                p3: l.applyToPointArray(u.v[0][0], u.v[0][1], 0)
                            }), c.push({
                                t: "z"
                            })), t.lStr = c
                        }
                    }
                    if (t.st)
                        for (a = 0; a < 16; a += 1) t.tr[a] = n.mat.props[a];
                    t.trNodes = c
                }
            }, CVShapeElement.prototype.renderFill = function(e, t, n) {
                var i = t.style;
                (t.c.mdf || this.firstFrame) && (i.co = "rgb(" + bm_floor(t.c.v[0]) + "," + bm_floor(t.c.v[1]) + "," + bm_floor(t.c.v[2]) + ")"), (t.o.mdf || n.opMdf || this.firstFrame) && (i.coOp = t.o.v * n.opacity)
            }, CVShapeElement.prototype.renderStroke = function(e, t, n) {
                var i = t.style,
                    a = t.d;
                a && (a.mdf || this.firstFrame) && (i.da = a.dasharray, i.do = a.dashoffset), (t.c.mdf || this.firstFrame) && (i.co = "rgb(" + bm_floor(t.c.v[0]) + "," + bm_floor(t.c.v[1]) + "," + bm_floor(t.c.v[2]) + ")"), (t.o.mdf || n.opMdf || this.firstFrame) && (i.coOp = t.o.v * n.opacity), (t.w.mdf || this.firstFrame) && (i.wi = t.w.v)
            }, CVShapeElement.prototype.destroy = function() {
                this.shapesData = null, this.globalData = null, this.canvasContext = null, this.stylesList.length = 0, this.itemData.length = 0, this._parent.destroy.call(this._parent)
            }, createElement(CVBaseElement, CVSolidElement), CVSolidElement.prototype.renderFrame = function(e) {
                if (!1 !== this._parent.renderFrame.call(this, e)) {
                    var t = this.canvasContext;
                    this.globalData.renderer.save(), this.globalData.renderer.ctxTransform(this.finalTransform.mat.props), this.globalData.renderer.ctxOpacity(this.finalTransform.opacity), t.fillStyle = this.data.sc, t.fillRect(0, 0, this.data.sw, this.data.sh), this.globalData.renderer.restore(this.data.hasMask), this.firstFrame && (this.firstFrame = !1)
                }
            }, createElement(CVBaseElement, CVTextElement), extendPrototype(ITextElement, CVTextElement), CVTextElement.prototype.tHelper = document.createElement("canvas").getContext("2d"), CVTextElement.prototype.createElements = function() {
                this._parent.createElements.call(this)
            }, CVTextElement.prototype.buildNewText = function() {
                var e = this.textProperty.currentData;
                this.renderedLetters = Array.apply(null, {
                    length: e.l ? e.l.length : 0
                });
                var t = !1;
                e.fc ? (t = !0, this.values.fill = this.buildColor(e.fc)) : this.values.fill = "rgba(0,0,0,0)", this.fill = t;
                var n = !1;
                e.sc && (n = !0, this.values.stroke = this.buildColor(e.sc), this.values.sWidth = e.sw);
                var i, a, r = this.globalData.fontManager.getFontByName(e.f),
                    o = e.l,
                    s = this.mHelper;
                this.stroke = n, this.values.fValue = e.s + "px " + this.globalData.fontManager.getFontByName(e.f).fFamily, a = e.t.length;
                var l, c, u, d, f, h, p, A, m, _, v = this.data.singleShape,
                    g = e.tr / 1e3 * e.s,
                    y = 0,
                    b = 0,
                    w = !0,
                    k = 0;
                for (i = 0; i < a; i += 1) {
                    for (c = (l = this.globalData.fontManager.getCharData(e.t.charAt(i), r.fStyle, this.globalData.fontManager.getFontByName(e.f).fFamily)) && l.data || {}, s.reset(), v && o[i].n && (y = -g, b += e.yOffset, b += w ? 1 : 0, w = !1), p = (f = c.shapes ? c.shapes[0].it : []).length, s.scale(e.s / 100, e.s / 100), v && this.applyTextPropertiesToMatrix(e, s, o[i].line, y, b), m = Array.apply(null, {
                            length: p
                        }), h = 0; h < p; h += 1) {
                        for (d = f[h].ks.k.i.length, A = f[h].ks.k, _ = [], u = 1; u < d; u += 1) 1 == u && _.push(s.applyToX(A.v[0][0], A.v[0][1], 0), s.applyToY(A.v[0][0], A.v[0][1], 0)), _.push(s.applyToX(A.o[u - 1][0], A.o[u - 1][1], 0), s.applyToY(A.o[u - 1][0], A.o[u - 1][1], 0), s.applyToX(A.i[u][0], A.i[u][1], 0), s.applyToY(A.i[u][0], A.i[u][1], 0), s.applyToX(A.v[u][0], A.v[u][1], 0), s.applyToY(A.v[u][0], A.v[u][1], 0));
                        _.push(s.applyToX(A.o[u - 1][0], A.o[u - 1][1], 0), s.applyToY(A.o[u - 1][0], A.o[u - 1][1], 0), s.applyToX(A.i[0][0], A.i[0][1], 0), s.applyToY(A.i[0][0], A.i[0][1], 0), s.applyToX(A.v[0][0], A.v[0][1], 0), s.applyToY(A.v[0][0], A.v[0][1], 0)), m[h] = _
                    }
                    v && (y += o[i].l, y += g), this.textSpans[k] ? this.textSpans[k].elem = m : this.textSpans[k] = {
                        elem: m
                    }, k += 1
                }
            }, CVTextElement.prototype.renderFrame = function(e) {
                if (!1 !== this._parent.renderFrame.call(this, e)) {
                    var t, n, i, a, r, o, s = this.canvasContext,
                        l = this.finalTransform.mat.props;
                    this.globalData.renderer.save(), this.globalData.renderer.ctxTransform(l), this.globalData.renderer.ctxOpacity(this.finalTransform.opacity), s.font = this.values.fValue, s.lineCap = "butt", s.lineJoin = "miter", s.miterLimit = 4, this.data.singleShape || this.textAnimator.getMeasures(this.textProperty.currentData, this.lettersChangedFlag);
                    var c, u = this.textAnimator.renderedLetters,
                        d = this.textProperty.currentData.l;
                    n = d.length;
                    var f, h, p = null,
                        A = null,
                        m = null;
                    for (t = 0; t < n; t += 1)
                        if (!d[t].n) {
                            if ((c = u[t]) && (this.globalData.renderer.save(), this.globalData.renderer.ctxTransform(c.p), this.globalData.renderer.ctxOpacity(c.o)), this.fill) {
                                for (c && c.fc ? p !== c.fc && (p = c.fc, s.fillStyle = c.fc) : p !== this.values.fill && (p = this.values.fill, s.fillStyle = this.values.fill), a = (f = this.textSpans[t].elem).length, this.globalData.canvasContext.beginPath(), i = 0; i < a; i += 1)
                                    for (o = (h = f[i]).length, this.globalData.canvasContext.moveTo(h[0], h[1]), r = 2; r < o; r += 6) this.globalData.canvasContext.bezierCurveTo(h[r], h[r + 1], h[r + 2], h[r + 3], h[r + 4], h[r + 5]);
                                this.globalData.canvasContext.closePath(), this.globalData.canvasContext.fill()
                            }
                            if (this.stroke) {
                                for (c && c.sw ? m !== c.sw && (m = c.sw, s.lineWidth = c.sw) : m !== this.values.sWidth && (m = this.values.sWidth, s.lineWidth = this.values.sWidth), c && c.sc ? A !== c.sc && (A = c.sc, s.strokeStyle = c.sc) : A !== this.values.stroke && (A = this.values.stroke, s.strokeStyle = this.values.stroke), a = (f = this.textSpans[t].elem).length, this.globalData.canvasContext.beginPath(), i = 0; i < a; i += 1)
                                    for (o = (h = f[i]).length, this.globalData.canvasContext.moveTo(h[0], h[1]), r = 2; r < o; r += 6) this.globalData.canvasContext.bezierCurveTo(h[r], h[r + 1], h[r + 2], h[r + 3], h[r + 4], h[r + 5]);
                                this.globalData.canvasContext.closePath(), this.globalData.canvasContext.stroke()
                            }
                            c && this.globalData.renderer.restore()
                        }
                    this.globalData.renderer.restore(this.data.hasMask), this.firstFrame && (this.firstFrame = !1)
                }
            }, createElement(BaseElement, HBaseElement), HBaseElement.prototype.checkBlendMode = function() {}, HBaseElement.prototype.setBlendMode = BaseElement.prototype.setBlendMode, HBaseElement.prototype.getBaseElement = function() {
                return this.baseElement
            }, HBaseElement.prototype.createElements = function() {
                this.data.hasMask ? (this.layerElement = document.createElementNS(svgNS, "svg"), styleDiv(this.layerElement), this.baseElement = this.layerElement, this.maskedElement = this.layerElement) : this.layerElement = this.parentContainer, this.transformedElement = this.layerElement, !this.data.ln || 4 !== this.data.ty && 0 !== this.data.ty || (this.layerElement === this.parentContainer && (this.layerElement = document.createElementNS(svgNS, "g"), this.baseElement = this.layerElement), this.layerElement.setAttribute("id", this.data.ln)), this.setBlendMode(), this.layerElement !== this.parentContainer && (this.placeholder = null), this.checkParenting()
            }, HBaseElement.prototype.renderFrame = function(e) {
                if (3 === this.data.ty) return !1;
                if (this.currentFrameNum === this.lastNum || !this.isVisible) return this.isVisible;
                var t;
                this.lastNum = this.currentFrameNum, this.finalTransform.opMdf = this.finalTransform.op.mdf, this.finalTransform.matMdf = this.finalTransform.mProp.mdf, this.finalTransform.opacity = this.finalTransform.op.v, this.firstFrame && (this.finalTransform.opMdf = !0, this.finalTransform.matMdf = !0);
                var n = this.finalTransform.mat;
                if (this.hierarchy) {
                    var i, a = this.hierarchy.length;
                    for (t = this.finalTransform.mProp.v.props, n.cloneFromProps(t), i = 0; i < a; i += 1) this.finalTransform.matMdf = !!this.hierarchy[i].finalTransform.mProp.mdf || this.finalTransform.matMdf, t = this.hierarchy[i].finalTransform.mProp.v.props, n.transform(t[0], t[1], t[2], t[3], t[4], t[5], t[6], t[7], t[8], t[9], t[10], t[11], t[12], t[13], t[14], t[15])
                } else this.isVisible && this.finalTransform.matMdf && (e ? (t = this.finalTransform.mProp.v.props, n.cloneFromProps(t)) : n.cloneFromProps(this.finalTransform.mProp.v.props));
                return this.data.hasMask && this.maskManager.renderFrame(n), e && (t = e.mat.props, n.cloneFromProps(t), this.finalTransform.opacity *= e.opacity, this.finalTransform.opMdf = !!e.opMdf || this.finalTransform.opMdf, this.finalTransform.matMdf = !!e.matMdf || this.finalTransform.matMdf), this.finalTransform.matMdf && (this.transformedElement.style.transform = this.transformedElement.style.webkitTransform = n.toCSS(), this.finalMat = n), this.finalTransform.opMdf && (this.transformedElement.style.opacity = this.finalTransform.opacity), this.isVisible
            }, HBaseElement.prototype.destroy = function() {
                this.layerElement = null, this.transformedElement = null, this.parentContainer = null, this.matteElement && (this.matteElement = null), this.maskManager && (this.maskManager.destroy(), this.maskManager = null)
            }, HBaseElement.prototype.getDomElement = function() {
                return this.layerElement
            }, HBaseElement.prototype.addMasks = function(e) {
                this.maskManager = new MaskElement(e, this, this.globalData)
            }, HBaseElement.prototype.hide = function() {}, HBaseElement.prototype.setMatte = function() {}, HBaseElement.prototype.buildElementParenting = HybridRenderer.prototype.buildElementParenting, createElement(HBaseElement, HSolidElement), HSolidElement.prototype.createElements = function() {
                var e = document.createElement("div");
                styleDiv(e);
                var t = document.createElementNS(svgNS, "svg");
                styleDiv(t), t.setAttribute("width", this.data.sw), t.setAttribute("height", this.data.sh), e.appendChild(t), this.layerElement = e, this.transformedElement = e, this.baseElement = e, this.innerElem = e, this.data.ln && this.innerElem.setAttribute("id", this.data.ln), 0 !== this.data.bm && this.setBlendMode();
                var n = document.createElementNS(svgNS, "rect");
                n.setAttribute("width", this.data.sw), n.setAttribute("height", this.data.sh), n.setAttribute("fill", this.data.sc), t.appendChild(n), this.data.hasMask && (this.maskedElement = n), this.checkParenting()
            }, HSolidElement.prototype.hide = SVGBaseElement.prototype.hide, HSolidElement.prototype.show = SVGBaseElement.prototype.show, HSolidElement.prototype.renderFrame = IImageElement.prototype.renderFrame, HSolidElement.prototype.destroy = IImageElement.prototype.destroy, createElement(HBaseElement, HCompElement), HCompElement.prototype.createElements = function() {
                var e = document.createElement("div");
                if (styleDiv(e), this.data.ln && e.setAttribute("id", this.data.ln), e.style.clip = "rect(0px, " + this.data.w + "px, " + this.data.h + "px, 0px)", this.data.hasMask) {
                    var t = document.createElementNS(svgNS, "svg");
                    styleDiv(t), t.setAttribute("width", this.data.w), t.setAttribute("height", this.data.h);
                    var n = document.createElementNS(svgNS, "g");
                    t.appendChild(n), e.appendChild(t), this.maskedElement = n, this.baseElement = e, this.layerElement = n, this.transformedElement = e
                } else this.layerElement = e, this.baseElement = this.layerElement, this.transformedElement = e;
                this.checkParenting()
            }, HCompElement.prototype.hide = ICompElement.prototype.hide, HCompElement.prototype.prepareFrame = ICompElement.prototype.prepareFrame, HCompElement.prototype.setElements = ICompElement.prototype.setElements, HCompElement.prototype.getElements = ICompElement.prototype.getElements, HCompElement.prototype.destroy = ICompElement.prototype.destroy, HCompElement.prototype.renderFrame = function(e) {
                var t, n = this._parent.renderFrame.call(this, e),
                    i = this.layers.length;
                if (!1 !== n) {
                    for (this.hidden = !1, t = 0; t < i; t += 1)(this.completeLayers || this.elements[t]) && this.elements[t].renderFrame();
                    this.firstFrame && (this.firstFrame = !1)
                } else this.hide()
            }, HCompElement.prototype.checkLayers = BaseRenderer.prototype.checkLayers, HCompElement.prototype.buildItem = HybridRenderer.prototype.buildItem, HCompElement.prototype.checkPendingElements = HybridRenderer.prototype.checkPendingElements, HCompElement.prototype.addPendingElement = HybridRenderer.prototype.addPendingElement, HCompElement.prototype.buildAllItems = BaseRenderer.prototype.buildAllItems, HCompElement.prototype.createItem = HybridRenderer.prototype.createItem, HCompElement.prototype.buildElementParenting = HybridRenderer.prototype.buildElementParenting, HCompElement.prototype.createImage = HybridRenderer.prototype.createImage, HCompElement.prototype.createComp = HybridRenderer.prototype.createComp, HCompElement.prototype.createSolid = HybridRenderer.prototype.createSolid, HCompElement.prototype.createShape = HybridRenderer.prototype.createShape, HCompElement.prototype.createText = HybridRenderer.prototype.createText, HCompElement.prototype.createBase = HybridRenderer.prototype.createBase, HCompElement.prototype.appendElementInPos = HybridRenderer.prototype.appendElementInPos, createElement(HBaseElement, HShapeElement);
            var parent = HShapeElement.prototype._parent;

            function HTextElement(e, t, n, i, a) {
                this.textSpans = [], this.textPaths = [], this.currentBBox = {
                    x: 999999,
                    y: -999999,
                    h: 0,
                    w: 0
                }, this.renderType = "svg", this.isMasked = !1, this._parent.constructor.call(this, e, t, n, i, a)
            }

            function HImageElement(e, t, n, i, a) {
                this.assetData = n.getAssetData(e.refId), this._parent.constructor.call(this, e, t, n, i, a)
            }

            function HCameraElement(e, t, n, i, a) {
                this._parent.constructor.call(this, e, t, n, i, a);
                var r = PropertyFactory.getProp;
                if (this.pe = r(this, e.pe, 0, 0, this.dynamicProperties), e.ks.p.s ? (this.px = r(this, e.ks.p.x, 1, 0, this.dynamicProperties), this.py = r(this, e.ks.p.y, 1, 0, this.dynamicProperties), this.pz = r(this, e.ks.p.z, 1, 0, this.dynamicProperties)) : this.p = r(this, e.ks.p, 1, 0, this.dynamicProperties), e.ks.a && (this.a = r(this, e.ks.a, 1, 0, this.dynamicProperties)), e.ks.or.k.length && e.ks.or.k[0].to) {
                    var o, s = e.ks.or.k.length;
                    for (o = 0; o < s; o += 1) e.ks.or.k[o].to = null, e.ks.or.k[o].ti = null
                }
                this.or = r(this, e.ks.or, 1, degToRads, this.dynamicProperties), this.or.sh = !0, this.rx = r(this, e.ks.rx, 0, degToRads, this.dynamicProperties), this.ry = r(this, e.ks.ry, 0, degToRads, this.dynamicProperties), this.rz = r(this, e.ks.rz, 0, degToRads, this.dynamicProperties), this.mat = new Matrix
            }
            extendPrototype(IShapeElement, HShapeElement), HShapeElement.prototype._parent = parent, HShapeElement.prototype._renderShapeFrame = HShapeElement.prototype.renderFrame, HShapeElement.prototype.createElements = function() {
                var e = document.createElement("div");
                styleDiv(e);
                var t = document.createElementNS(svgNS, "svg");
                styleDiv(t);
                var n = this.comp.data ? this.comp.data : this.globalData.compSize;
                if (t.setAttribute("width", n.w), t.setAttribute("height", n.h), this.data.hasMask) {
                    var i = document.createElementNS(svgNS, "g");
                    e.appendChild(t), t.appendChild(i), this.maskedElement = i, this.layerElement = i, this.shapesContainer = i
                } else e.appendChild(t), this.layerElement = t, this.shapesContainer = document.createElementNS(svgNS, "g"), this.layerElement.appendChild(this.shapesContainer);
                this.data.hd || (this.baseElement = e), this.innerElem = e, this.data.ln && this.innerElem.setAttribute("id", this.data.ln), this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, this.layerElement, this.dynamicProperties, 0, [], !0), this.buildExpressionInterface(), this.layerElement = e, this.transformedElement = e, this.shapeCont = t, 0 !== this.data.bm && this.setBlendMode(), this.checkParenting()
            }, HShapeElement.prototype.renderFrame = function(e) {
                var t = this.firstFrame;
                if (this._renderShapeFrame(), this.isVisible && (this.elemMdf || t)) {
                    var n = this.shapeCont.getBBox(),
                        i = !1;
                    this.currentBBox.w !== n.width && (this.currentBBox.w = n.width, this.shapeCont.setAttribute("width", n.width), i = !0), this.currentBBox.h !== n.height && (this.currentBBox.h = n.height, this.shapeCont.setAttribute("height", n.height), i = !0), (i || this.currentBBox.x !== n.x || this.currentBBox.y !== n.y) && (this.currentBBox.w = n.width, this.currentBBox.h = n.height, this.currentBBox.x = n.x, this.currentBBox.y = n.y, this.shapeCont.setAttribute("viewBox", this.currentBBox.x + " " + this.currentBBox.y + " " + this.currentBBox.w + " " + this.currentBBox.h), this.shapeCont.style.transform = this.shapeCont.style.webkitTransform = "translate(" + this.currentBBox.x + "px," + this.currentBBox.y + "px)")
                }
            }, createElement(HBaseElement, HTextElement), extendPrototype(ITextElement, HTextElement), HTextElement.prototype.createElements = function() {
                this.isMasked = this.checkMasks();
                var e = document.createElement("div");
                if (styleDiv(e), this.layerElement = e, this.transformedElement = e, this.isMasked) {
                    this.renderType = "svg";
                    var t = document.createElementNS(svgNS, "svg");
                    styleDiv(t), this.cont = t, this.compW = this.comp.data.w, this.compH = this.comp.data.h, t.setAttribute("width", this.compW), t.setAttribute("height", this.compH);
                    var n = document.createElementNS(svgNS, "g");
                    t.appendChild(n), e.appendChild(t), this.maskedElement = n, this.innerElem = n
                } else this.renderType = "html", this.innerElem = e;
                this.baseElement = e, this.checkParenting()
            }, HTextElement.prototype.buildNewText = function() {
                var e = this.textProperty.currentData;
                this.renderedLetters = Array.apply(null, {
                    length: this.textProperty.currentData.l ? this.textProperty.currentData.l.length : 0
                });
                var t = this.innerElem.style;
                t.color = t.fill = e.fc ? this.buildColor(e.fc) : "rgba(0,0,0,0)", e.sc && (t.stroke = this.buildColor(e.sc), t.strokeWidth = e.sw + "px");
                var n, i, a = this.globalData.fontManager.getFontByName(e.f);
                if (!this.globalData.fontManager.chars)
                    if (t.fontSize = e.s + "px", t.lineHeight = e.s + "px", a.fClass) this.innerElem.className = a.fClass;
                    else {
                        t.fontFamily = a.fFamily;
                        var r = e.fWeight,
                            o = e.fStyle;
                        t.fontStyle = o, t.fontWeight = r
                    }
                var s, l, c, u = e.l;
                i = u.length;
                var d, f = this.mHelper,
                    h = "",
                    p = 0;
                for (n = 0; n < i; n += 1) {
                    if (this.globalData.fontManager.chars ? (this.textPaths[p] ? s = this.textPaths[p] : ((s = document.createElementNS(svgNS, "path")).setAttribute("stroke-linecap", "butt"), s.setAttribute("stroke-linejoin", "round"), s.setAttribute("stroke-miterlimit", "4")), this.isMasked || (this.textSpans[p] ? c = (l = this.textSpans[p]).children[0] : (l = document.createElement("div"), (c = document.createElementNS(svgNS, "svg")).appendChild(s), styleDiv(l)))) : this.isMasked ? s = this.textPaths[p] ? this.textPaths[p] : document.createElementNS(svgNS, "text") : this.textSpans[p] ? (l = this.textSpans[p], s = this.textPaths[p]) : (styleDiv(l = document.createElement("span")), styleDiv(s = document.createElement("span")), l.appendChild(s)), this.globalData.fontManager.chars) {
                        var A, m = this.globalData.fontManager.getCharData(e.t.charAt(n), a.fStyle, this.globalData.fontManager.getFontByName(e.f).fFamily);
                        if (A = m ? m.data : null, f.reset(), A && A.shapes && (d = A.shapes[0].it, f.scale(e.s / 100, e.s / 100), h = this.createPathShape(f, d), s.setAttribute("d", h)), this.isMasked) this.innerElem.appendChild(s);
                        else if (this.innerElem.appendChild(l), A && A.shapes) {
                            document.body.appendChild(c);
                            var _ = c.getBBox();
                            c.setAttribute("width", _.width + 2), c.setAttribute("height", _.height + 2), c.setAttribute("viewBox", _.x - 1 + " " + (_.y - 1) + " " + (_.width + 2) + " " + (_.height + 2)), c.style.transform = c.style.webkitTransform = "translate(" + (_.x - 1) + "px," + (_.y - 1) + "px)", u[n].yOffset = _.y - 1, l.appendChild(c)
                        } else c.setAttribute("width", 1), c.setAttribute("height", 1)
                    } else s.textContent = u[n].val, s.setAttributeNS("http://www.w3.org/XML/1998/namespace", "xml:space", "preserve"), this.isMasked ? this.innerElem.appendChild(s) : (this.innerElem.appendChild(l), s.style.transform = s.style.webkitTransform = "translate3d(0," + -e.s / 1.2 + "px,0)");
                    this.isMasked ? this.textSpans[p] = s : this.textSpans[p] = l, this.textSpans[p].style.display = "block", this.textPaths[p] = s, p += 1
                }
                for (; p < this.textSpans.length;) this.textSpans[p].style.display = "none", p += 1
            }, HTextElement.prototype.hide = SVGTextElement.prototype.hide, HTextElement.prototype.renderFrame = function(e) {
                if (!1 !== this._parent.renderFrame.call(this, e)) {
                    if (this.hidden && (this.hidden = !1, this.innerElem.style.display = "block", this.layerElement.style.display = "block"), this.data.singleShape) {
                        if (!this.firstFrame && !this.lettersChangedFlag) return;
                        this.isMasked && this.finalTransform.matMdf && (this.cont.setAttribute("viewBox", -this.finalTransform.mProp.p.v[0] + " " + -this.finalTransform.mProp.p.v[1] + " " + this.compW + " " + this.compH), this.cont.style.transform = this.cont.style.webkitTransform = "translate(" + -this.finalTransform.mProp.p.v[0] + "px," + -this.finalTransform.mProp.p.v[1] + "px)")
                    }
                    if (this.textAnimator.getMeasures(this.textProperty.currentData, this.lettersChangedFlag), this.lettersChangedFlag || this.textAnimator.lettersChangedFlag) {
                        var t, n, i, a, r, o = 0,
                            s = this.textAnimator.renderedLetters,
                            l = this.textProperty.currentData.l;
                        for (n = l.length, t = 0; t < n; t += 1) l[t].n ? o += 1 : (a = this.textSpans[t], r = this.textPaths[t], i = s[o], o += 1, this.isMasked ? a.setAttribute("transform", i.m) : a.style.transform = a.style.webkitTransform = i.m, a.style.opacity = i.o, i.sw && r.setAttribute("stroke-width", i.sw), i.sc && r.setAttribute("stroke", i.sc), i.fc && (r.setAttribute("fill", i.fc), r.style.color = i.fc));
                        if (this.isVisible && (this.elemMdf || this.firstFrame) && this.innerElem.getBBox) {
                            var c = this.innerElem.getBBox();
                            this.currentBBox.w !== c.width && (this.currentBBox.w = c.width, this.cont.setAttribute("width", c.width)), this.currentBBox.h !== c.height && (this.currentBBox.h = c.height, this.cont.setAttribute("height", c.height)), this.currentBBox.w === c.width + 2 && this.currentBBox.h === c.height + 2 && this.currentBBox.x === c.x - 1 && this.currentBBox.y === c.y - 1 || (this.currentBBox.w = c.width + 2, this.currentBBox.h = c.height + 2, this.currentBBox.x = c.x - 1, this.currentBBox.y = c.y - 1, this.cont.setAttribute("viewBox", this.currentBBox.x + " " + this.currentBBox.y + " " + this.currentBBox.w + " " + this.currentBBox.h), this.cont.style.transform = this.cont.style.webkitTransform = "translate(" + this.currentBBox.x + "px," + this.currentBBox.y + "px)")
                        }
                        this.firstFrame && (this.firstFrame = !1)
                    }
                } else this.hide()
            }, createElement(HBaseElement, HImageElement), HImageElement.prototype.createElements = function() {
                var e = this.globalData.getAssetsPath(this.assetData),
                    t = new Image;
                if (this.data.hasMask) {
                    var n = document.createElement("div");
                    styleDiv(n);
                    var i = document.createElementNS(svgNS, "svg");
                    styleDiv(i), i.setAttribute("width", this.assetData.w), i.setAttribute("height", this.assetData.h), n.appendChild(i), this.imageElem = document.createElementNS(svgNS, "image"), this.imageElem.setAttribute("width", this.assetData.w + "px"), this.imageElem.setAttribute("height", this.assetData.h + "px"), this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink", "href", e), i.appendChild(this.imageElem), this.layerElement = n, this.transformedElement = n, this.baseElement = n, this.innerElem = n, this.maskedElement = this.imageElem
                } else styleDiv(t), this.layerElement = t, this.baseElement = t, this.innerElem = t, this.transformedElement = t;
                t.src = e, this.data.ln && this.innerElem.setAttribute("id", this.data.ln), this.checkParenting()
            }, HImageElement.prototype.show = HSolidElement.prototype.show, HImageElement.prototype.hide = HSolidElement.prototype.hide, HImageElement.prototype.renderFrame = HSolidElement.prototype.renderFrame, HImageElement.prototype.destroy = HSolidElement.prototype.destroy, createElement(HBaseElement, HCameraElement), HCameraElement.prototype.setup = function() {
                var e, t, n = this.comp.threeDElements.length;
                for (e = 0; e < n; e += 1)(t = this.comp.threeDElements[e]).perspectiveElem.style.perspective = t.perspectiveElem.style.webkitPerspective = this.pe.v + "px", t.container.style.transformOrigin = t.container.style.mozTransformOrigin = t.container.style.webkitTransformOrigin = "0px 0px 0px", t.perspectiveElem.style.transform = t.perspectiveElem.style.webkitTransform = "matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)"
            }, HCameraElement.prototype.createElements = function() {}, HCameraElement.prototype.hide = function() {}, HCameraElement.prototype.renderFrame = function() {
                var e, t, n = this.firstFrame;
                if (this.hierarchy)
                    for (t = this.hierarchy.length, e = 0; e < t; e += 1) n = !!this.hierarchy[e].finalTransform.mProp.mdf || n;
                if (n || this.p && this.p.mdf || this.px && (this.px.mdf || this.py.mdf || this.pz.mdf) || this.rx.mdf || this.ry.mdf || this.rz.mdf || this.or.mdf || this.a && this.a.mdf) {
                    if (this.mat.reset(), this.p ? this.mat.translate(-this.p.v[0], -this.p.v[1], this.p.v[2]) : this.mat.translate(-this.px.v, -this.py.v, this.pz.v), this.a) {
                        var i = [this.p.v[0] - this.a.v[0], this.p.v[1] - this.a.v[1], this.p.v[2] - this.a.v[2]],
                            a = Math.sqrt(Math.pow(i[0], 2) + Math.pow(i[1], 2) + Math.pow(i[2], 2)),
                            r = [i[0] / a, i[1] / a, i[2] / a],
                            o = Math.sqrt(r[2] * r[2] + r[0] * r[0]),
                            s = Math.atan2(r[1], o),
                            l = Math.atan2(r[0], -r[2]);
                        this.mat.rotateY(l).rotateX(-s)
                    }
                    var c, u;
                    if (this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v), this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]), this.mat.translate(this.globalData.compSize.w / 2, this.globalData.compSize.h / 2, 0), this.mat.translate(0, 0, this.pe.v), this.hierarchy)
                        for (t = this.hierarchy.length, e = 0; e < t; e += 1) c = this.hierarchy[e].finalTransform.mProp.iv.props, this.mat.transform(c[0], c[1], c[2], c[3], c[4], c[5], c[6], c[7], c[8], c[9], c[10], c[11], -c[12], -c[13], c[14], c[15]);
                    for (t = this.comp.threeDElements.length, e = 0; e < t; e += 1)(u = this.comp.threeDElements[e]).container.style.transform = u.container.style.webkitTransform = this.mat.toCSS()
                }
                this.firstFrame = !1
            }, HCameraElement.prototype.destroy = function() {};
            var Expressions = function() {
                var e = {
                    initExpressions: function(e) {
                        e.renderer.compInterface = CompExpressionInterface(e.renderer), e.renderer.globalData.projectInterface.registerComposition(e.renderer)
                    }
                };
                return e
            }();
            expressionsPlugin = Expressions,
                function() {
                    function e() {
                        return this.pv
                    }

                    function t(e, t, n) {
                        if (!this.k || !this.keyframes) return this.pv;
                        var i, a, r = this.comp.renderedFrame,
                            o = this.keyframes,
                            s = o[o.length - 1].t;
                        if (r <= s) return this.pv;
                        n ? a = s - (i = t ? Math.abs(s - elem.comp.globalData.frameRate * t) : Math.max(0, s - this.elem.data.ip)) : ((!t || t > o.length - 1) && (t = o.length - 1), i = s - (a = o[o.length - 1 - t].t));
                        var l, c, u, d = this.offsetTime || 0;
                        if ("pingpong" === e.toLowerCase()) {
                            if (Math.floor((r - a) / i) % 2 != 0) return this.getValueAtTime((i - (r - a) % i + a - d) / this.comp.globalData.frameRate, 0)
                        } else {
                            if ("offset" === e) {
                                var f = this.getValueAtTime(a / this.comp.globalData.frameRate, 0),
                                    h = this.getValueAtTime(s / this.comp.globalData.frameRate, 0),
                                    p = this.getValueAtTime(((r - a) % i + a) / this.comp.globalData.frameRate, 0),
                                    A = Math.floor((r - a) / i);
                                if (this.pv.length) {
                                    for (c = (u = new Array(f.length)).length, l = 0; l < c; l += 1) u[l] = (h[l] - f[l]) * A + p[l];
                                    return u
                                }
                                return (h - f) * A + p
                            }
                            if ("continue" === e) {
                                var m = this.getValueAtTime(s / this.comp.globalData.frameRate, 0),
                                    _ = this.getValueAtTime((s - .001) / this.comp.globalData.frameRate, 0);
                                if (this.pv.length) {
                                    for (c = (u = new Array(m.length)).length, l = 0; l < c; l += 1) u[l] = m[l] + (m[l] - _[l]) * ((r - s) / this.comp.globalData.frameRate) / 5e-4;
                                    return u
                                }
                                return m + (r - s) / .001 * (m - _)
                            }
                        }
                        return this.getValueAtTime(((r - a) % i + a - d) / this.comp.globalData.frameRate, 0)
                    }

                    function n(e, t, n) {
                        if (!this.k) return this.pv;
                        var i, a, r, o, s, l = time * elem.comp.globalData.frameRate,
                            c = this.keyframes,
                            u = c[0].t,
                            d = this.offsetTime || 0;
                        if (l >= u) return this.pv;
                        if (n ? a = u + (i = t ? Math.abs(elem.comp.globalData.frameRate * t) : Math.max(0, this.elem.data.op - u)) : ((!t || t > c.length - 1) && (t = c.length - 1), i = (a = c[t].t) - u), "pingpong" === e) {
                            if (Math.floor((u - l) / i) % 2 == 0) return this.getValueAtTime(((u - l) % i + u - d) / this.comp.globalData.frameRate, 0)
                        } else {
                            if ("offset" === e) {
                                var f = this.getValueAtTime(u / this.comp.globalData.frameRate, 0),
                                    h = this.getValueAtTime(a / this.comp.globalData.frameRate, 0),
                                    p = this.getValueAtTime((i - (u - l) % i + u) / this.comp.globalData.frameRate, 0),
                                    A = Math.floor((u - l) / i) + 1;
                                if (this.pv.length) {
                                    for (o = (s = new Array(f.length)).length, r = 0; r < o; r += 1) s[r] = p[r] - (h[r] - f[r]) * A;
                                    return s
                                }
                                return p - (h - f) * A
                            }
                            if ("continue" === e) {
                                var m = this.getValueAtTime(u / this.comp.globalData.frameRate, 0),
                                    _ = this.getValueAtTime((u + .001) / this.comp.globalData.frameRate, 0);
                                if (this.pv.length) {
                                    for (o = (s = new Array(m.length)).length, r = 0; r < o; r += 1) s[r] = m[r] + (m[r] - _[r]) * (u - l) / .001;
                                    return s
                                }
                                return m + (m - _) * (u - l) / .001
                            }
                        }
                        return this.getValueAtTime((i - (u - l) % i + u - d) / this.comp.globalData.frameRate, 0)
                    }

                    function i(e) {
                        if (this._cachingAtTime || (this._cachingAtTime = {
                                lastValue: -99999,
                                lastIndex: 0
                            }), e !== this._cachingAtTime.lastFrame) {
                            e *= this.elem.globalData.frameRate, e -= this.offsetTime;
                            var t = this._caching.lastFrame < e ? this._caching.lastIndex : 0,
                                n = this.interpolateValue(e, t, this.pv, this._cachingAtTime);
                            this._cachingAtTime.lastIndex = n.iterationIndex, this._cachingAtTime.value = n.value, this._cachingAtTime.lastFrame = e
                        }
                        return this._cachingAtTime.value
                    }

                    function a(e) {
                        if (void 0 !== this.vel) return this.vel;
                        var t, n, i = this.getValueAtTime(e),
                            a = this.getValueAtTime(e + -.01);
                        if (i.length)
                            for (t = Array.apply(null, {
                                    length: i.length
                                }), n = 0; n < i.length; n += 1) t[n] = (a[n] - i[n]) / -.01;
                        else t = (a - i) / -.01;
                        return t
                    }

                    function r(e) {
                        this.propertyGroup = e
                    }

                    function o(e, t, n) {
                        t.x && (n.k = !0, n.x = !0, n.getValue && (n.getPreValue = n.getValue), n.getValue = ExpressionManager.initiateExpression.bind(n)(e, t, n))
                    }
                    var s = function() {
                            function t(e, t) {
                                return this.textIndex = e + 1, this.textTotal = t, this.getValue(), this.v
                            }
                            return function(n, s) {
                                this.pv = 1, this.comp = n.comp, this.elem = n, this.mult = .01, this.type = "textSelector", this.textTotal = s.totalChars, this.selectorValue = 100, this.lastValue = [1, 1, 1], o.bind(this)(n, s, this), this.getMult = t, this.getVelocityAtTime = a, this.kf ? this.getValueAtTime = i.bind(this) : this.getValueAtTime = e.bind(this), this.setGroupProperty = r
                            }
                        }(),
                        l = PropertyFactory.getProp;
                    PropertyFactory.getProp = function(s, c, u, d, f) {
                        var h = l(s, c, u, d, f);
                        2 === u ? h.dynamicProperties.length ? h.getValueAtTime = function(e) {
                            console.log("time:", e)
                        }.bind(h) : h.getValueAtTime = function(e) {}.bind(h) : h.kf ? h.getValueAtTime = i.bind(h) : h.getValueAtTime = e.bind(h), h.setGroupProperty = r, h.loopOut = t, h.loopIn = n, h.getVelocityAtTime = a, h.numKeys = 1 === c.a ? c.k.length : 0;
                        var p = h.k;
                        return void 0 !== c.ix && Object.defineProperty(h, "propertyIndex", {
                            get: function() {
                                return c.ix
                            }
                        }), o(s, c, h), !p && h.x && f.push(h), h
                    };
                    var c = ShapePropertyFactory.getConstructorFunction(),
                        u = ShapePropertyFactory.getKeyframedConstructorFunction();
                    c.prototype.vertices = function(e, t) {
                        var n = this.v;
                        void 0 !== t && (n = this.getValueAtTime(t, 0));
                        var i, a = n._length,
                            r = n[e],
                            o = n.v,
                            s = Array.apply(null, {
                                length: a
                            });
                        for (i = 0; i < a; i += 1) s[i] = "i" === e || "o" === e ? [r[i][0] - o[i][0], r[i][1] - o[i][1]] : [r[i][0], r[i][1]];
                        return s
                    }, c.prototype.points = function(e) {
                        return this.vertices("v", e)
                    }, c.prototype.inTangents = function(e) {
                        return this.vertices("i", e)
                    }, c.prototype.outTangents = function(e) {
                        return this.vertices("o", e)
                    }, c.prototype.isClosed = function() {
                        return this.v.c
                    }, c.prototype.pointOnPath = function(e, t) {
                        var n = this.v;
                        void 0 !== t && (n = this.getValueAtTime(t, 0)), this._segmentsLength || (this._segmentsLength = bez.getSegmentsLength(n));
                        for (var i = this._segmentsLength, a = i.lengths, r = i.totalLength * e, o = 0, s = a.length, l = 0; o < s;) {
                            if (l + a[o].addedLength > r) {
                                a[o].segments;
                                var c = o,
                                    u = n.c && o === s - 1 ? 0 : o + 1,
                                    d = (r - l) / a[o].addedLength,
                                    f = bez.getPointInSegment(n.v[c], n.v[u], n.o[c], n.i[u], d, a[o]);
                                break
                            }
                            l += a[o].addedLength, o += 1
                        }
                        return f || (f = n.c ? [n.v[0][0], n.v[0][1]] : [n.v[n._length - 1][0], n.v[n._length - 1][1]]), f
                    }, c.prototype.vectorOnPath = function(e, t, n) {
                        e = 1 == e ? this.v.c ? 0 : .999 : e;
                        var i = this.pointOnPath(e, t),
                            a = this.pointOnPath(e + .001, t),
                            r = a[0] - i[0],
                            o = a[1] - i[1],
                            s = Math.sqrt(Math.pow(r, 2) + Math.pow(o, 2));
                        return "tangent" === n ? [r / s, o / s] : [-o / s, r / s]
                    }, c.prototype.tangentOnPath = function(e, t) {
                        return this.vectorOnPath(e, t, "tangent")
                    }, c.prototype.normalOnPath = function(e, t) {
                        return this.vectorOnPath(e, t, "normal")
                    }, c.prototype.setGroupProperty = r, c.prototype.getValueAtTime = e, u.prototype.vertices = c.prototype.vertices, u.prototype.points = c.prototype.points, u.prototype.inTangents = c.prototype.inTangents, u.prototype.outTangents = c.prototype.outTangents, u.prototype.isClosed = c.prototype.isClosed, u.prototype.pointOnPath = c.prototype.pointOnPath, u.prototype.vectorOnPath = c.prototype.vectorOnPath, u.prototype.tangentOnPath = c.prototype.tangentOnPath, u.prototype.normalOnPath = c.prototype.normalOnPath, u.prototype.setGroupProperty = c.prototype.setGroupProperty, u.prototype.getValueAtTime = function(e) {
                        if (this._shapeValueAtTime || (this._lastIndexAtTime = 0, this._lastTimeAtTime = -999999, this._shapeValueAtTime = shape_pool.clone(this.pv)), e !== this._lastTimeAtTime) {
                            this._lastTimeAtTime = e, e *= this.elem.globalData.frameRate;
                            var t = this.interpolateShape(e, this._lastIndexAtTime, this._shapeValueAtTime, !1);
                            this._lastIndexAtTime = t.iterationIndex
                        }
                        return this._shapeValueAtTime
                    };
                    var d = ShapePropertyFactory.getShapeProp;
                    ShapePropertyFactory.getShapeProp = function(e, t, n, i, a) {
                        var r = d(e, t, n, i, a),
                            s = r.k;
                        return void 0 !== t.ix && Object.defineProperty(r, "propertyIndex", {
                            get: function() {
                                return t.ix
                            }
                        }), 3 === n ? o(e, t.pt, r) : 4 === n && o(e, t.ks, r), !s && r.x && i.push(r), r
                    };
                    var f = PropertyFactory.getTextSelectorProp;
                    PropertyFactory.getTextSelectorProp = function(e, t, n) {
                        return 1 === t.t ? new s(e, t, n) : f(e, t, n)
                    }
                }(), TextProperty.prototype.searchProperty = function() {
                    return this.kf = this.searchExpressions() || this.data.d.k.length > 1, this.kf
                }, TextProperty.prototype.getExpressionValue = function(e) {
                    this.calculateExpression(), this.mdf && (this.currentData.t = this.v.toString(), this.completeTextData(this.currentData))
                }, TextProperty.prototype.searchExpressions = function() {
                    return !!this.data.d.x && (this.comp = this.elem.comp, this.getValue && (this.getPreValue = this.getValue), this.calculateExpression = ExpressionManager.initiateExpression.bind(this)(this.elem, this.data.d, this), this.getValue = this.getExpressionValue, !0)
                };
            var ExpressionManager = function() {
                    var ob = {},
                        Math = BMMath,
                        window = null,
                        document = null;

                    function duplicatePropertyValue(e, t) {
                        if (t = t || 1, "number" == typeof e || e instanceof Number) return e * t;
                        if (e.i) return JSON.parse(JSON.stringify(e));
                        var n, i = Array.apply(null, {
                                length: e.length
                            }),
                            a = e.length;
                        for (n = 0; n < a; n += 1) i[n] = e[n] * t;
                        return i
                    }

                    function shapesEqual(e, t) {
                        if (e._length !== t._length || e.c !== t.c) return !1;
                        var n, i = e._length;
                        for (n = 0; n < i; n += 1)
                            if (e.v[n][0] !== t.v[n][0] || e.v[n][1] !== t.v[n][1] || e.o[n][0] !== t.o[n][0] || e.o[n][1] !== t.o[n][1] || e.i[n][0] !== t.i[n][0] || e.i[n][1] !== t.i[n][1]) return !1;
                        return !0
                    }

                    function $bm_neg(e) {
                        var t = typeof e;
                        if ("number" === t || "boolean" === t || e instanceof Number) return -e;
                        if (e.constructor === Array) {
                            var n, i = e.length,
                                a = [];
                            for (n = 0; n < i; n += 1) a[n] = -e[n];
                            return a
                        }
                    }

                    function sum(e, t) {
                        var n = typeof e,
                            i = typeof t;
                        if ("string" === n || "string" === i) return e + t;
                        if (("number" === n || "boolean" === n || "string" === n || e instanceof Number) && ("number" === i || "boolean" === i || "string" === i || t instanceof Number)) return e + t;
                        if (e.constructor === Array && ("number" === i || "boolean" === i || "string" === i || t instanceof Number)) return e[0] = e[0] + t, e;
                        if (("number" === n || "boolean" === n || "string" === n || e instanceof Number) && t.constructor === Array) return t[0] = e + t[0], t;
                        if (e.constructor === Array && t.constructor === Array) {
                            for (var a = 0, r = e.length, o = t.length, s = []; a < r || a < o;)("number" == typeof e[a] || e[a] instanceof Number) && ("number" == typeof t[a] || t[a] instanceof Number) ? s[a] = e[a] + t[a] : s[a] = null == t[a] ? e[a] : e[a] || t[a], a += 1;
                            return s
                        }
                        return 0
                    }
                    var add = sum;

                    function sub(e, t) {
                        var n = typeof e,
                            i = typeof t;
                        if (("number" === n || "boolean" === n || "string" === n || e instanceof Number) && ("number" === i || "boolean" === i || "string" === i || t instanceof Number)) return "string" === n && (e = parseInt(e)), "string" === i && (t = parseInt(t)), e - t;
                        if (e.constructor === Array && ("number" === i || "boolean" === i || "string" === i || t instanceof Number)) return e[0] = e[0] - t, e;
                        if (("number" === n || "boolean" === n || "string" === n || e instanceof Number) && t.constructor === Array) return t[0] = e - t[0], t;
                        if (e.constructor === Array && t.constructor === Array) {
                            for (var a = 0, r = e.length, o = t.length, s = []; a < r || a < o;)("number" == typeof e[a] || e[a] instanceof Number) && ("number" == typeof t[a] || (t[a], Number), 1) ? s[a] = e[a] - t[a] : s[a] = null == t[a] ? e[a] : e[a] || t[a], a += 1;
                            return s
                        }
                        return 0
                    }

                    function mul(e, t) {
                        var n, i, a, r = typeof e,
                            o = typeof t;
                        if (("number" === r || "boolean" === r || "string" === r || e instanceof Number) && ("number" === o || "boolean" === o || "string" === o || t instanceof Number)) return e * t;
                        if (e.constructor === Array && ("number" === o || "boolean" === o || "string" === o || t instanceof Number)) {
                            for (a = e.length, n = Array.apply(null, {
                                    length: a
                                }), i = 0; i < a; i += 1) n[i] = e[i] * t;
                            return n
                        }
                        if (("number" === r || "boolean" === r || "string" === r || e instanceof Number) && t.constructor === Array) {
                            for (a = t.length, n = Array.apply(null, {
                                    length: a
                                }), i = 0; i < a; i += 1) n[i] = e * t[i];
                            return n
                        }
                        return 0
                    }

                    function div(e, t) {
                        var n, i, a, r = typeof e,
                            o = typeof t;
                        if (("number" === r || "boolean" === r || "string" === r || e instanceof Number) && ("number" === o || "boolean" === o || "string" === o || t instanceof Number)) return e / t;
                        if (e.constructor === Array && ("number" === o || "boolean" === o || "string" === o || t instanceof Number)) {
                            for (a = e.length, n = Array.apply(null, {
                                    length: a
                                }), i = 0; i < a; i += 1) n[i] = e[i] / t;
                            return n
                        }
                        if (("number" === r || "boolean" === r || "string" === r || e instanceof Number) && t.constructor === Array) {
                            for (a = t.length, n = Array.apply(null, {
                                    length: a
                                }), i = 0; i < a; i += 1) n[i] = e / t[i];
                            return n
                        }
                        return 0
                    }

                    function mod(e, t) {
                        return "string" == typeof e && (e = parseInt(e)), "string" == typeof t && (t = parseInt(t)), e % t
                    }

                    function clamp(e, t, n) {
                        if (t > n) {
                            var i = n;
                            n = t, t = i
                        }
                        return Math.min(Math.max(e, t), n)
                    }

                    function radiansToDegrees(e) {
                        return e / degToRads
                    }
                    var radians_to_degrees = radiansToDegrees;

                    function degreesToRadians(e) {
                        return e * degToRads
                    }
                    var degrees_to_radians = radiansToDegrees,
                        helperLengthArray = [0, 0, 0, 0, 0, 0];

                    function length(e, t) {
                        if ("number" == typeof e || e instanceof Number) return t = t || 0, Math.abs(e - t);
                        t || (t = helperLengthArray);
                        var n, i = Math.min(e.length, t.length),
                            a = 0;
                        for (n = 0; n < i; n += 1) a += Math.pow(t[n] - e[n], 2);
                        return Math.sqrt(a)
                    }

                    function normalize(e) {
                        return div(e, length(e))
                    }

                    function rgbToHsl(e) {
                        var t, n, i = e[0],
                            a = e[1],
                            r = e[2],
                            o = Math.max(i, a, r),
                            s = Math.min(i, a, r),
                            l = (o + s) / 2;
                        if (o == s) t = n = 0;
                        else {
                            var c = o - s;
                            switch (n = l > .5 ? c / (2 - o - s) : c / (o + s), o) {
                                case i:
                                    t = (a - r) / c + (a < r ? 6 : 0);
                                    break;
                                case a:
                                    t = (r - i) / c + 2;
                                    break;
                                case r:
                                    t = (i - a) / c + 4
                            }
                            t /= 6
                        }
                        return [t, n, l, e[3]]
                    }

                    function hslToRgb(e) {
                        var t, n, i, a = e[0],
                            r = e[1],
                            o = e[2];
                        if (0 == r) t = n = i = o;
                        else {
                            function s(e, t, n) {
                                return n < 0 && (n += 1), n > 1 && (n -= 1), n < 1 / 6 ? e + 6 * (t - e) * n : n < .5 ? t : n < 2 / 3 ? e + (t - e) * (2 / 3 - n) * 6 : e
                            }
                            var l = o < .5 ? o * (1 + r) : o + r - o * r,
                                c = 2 * o - l;
                            t = s(c, l, a + 1 / 3), n = s(c, l, a), i = s(c, l, a - 1 / 3)
                        }
                        return [t, n, i, e[3]]
                    }

                    function linear(e, t, n, i, a) {
                        if (void 0 === i || void 0 === a) return linear(e, 0, 1, t, n);
                        if (e <= t) return i;
                        if (e >= n) return a;
                        var r = n === t ? 0 : (e - t) / (n - t);
                        if (!i.length) return i + (a - i) * r;
                        var o, s = i.length,
                            l = Array.apply(null, {
                                length: s
                            });
                        for (o = 0; o < s; o += 1) l[o] = i[o] + (a[o] - i[o]) * r;
                        return l
                    }

                    function random(e, t) {
                        if (void 0 === t && (void 0 === e ? (e = 0, t = 1) : (t = e, e = void 0)), t.length) {
                            var n, i = t.length;
                            e || (e = Array.apply(null, {
                                length: i
                            }));
                            var a = Array.apply(null, {
                                    length: i
                                }),
                                r = BMMath.random();
                            for (n = 0; n < i; n += 1) a[n] = e[n] + r * (t[n] - e[n]);
                            return a
                        }
                        return void 0 === e && (e = 0), e + BMMath.random() * (t - e)
                    }

                    function createPath(e, t, n, a) {
                        t = t && t.length ? t : e, n = n && n.length ? n : e;
                        var r = shape_pool.newShape(),
                            o = e.length;
                        for (r.setPathData(a, o), i = 0; i < o; i += 1) r.setTripleAt(e[i][0], e[i][1], n[i][0] + e[i][0], n[i][1] + e[i][1], t[i][0] + e[i][0], t[i][1] + e[i][1], i, !0);
                        return r
                    }

                    function initiateExpression(elem, data, property) {
                        var val = data.x,
                            needsVelocity = /velocity(?![\w\d])/.test(val),
                            _needsRandom = -1 !== val.indexOf("random"),
                            elemType = elem.data.ty,
                            transform, content, effect, thisComp = elem.comp,
                            thisProperty = property;
                        elem.comp.frameDuration = 1 / elem.comp.globalData.frameRate;
                        var inPoint = elem.data.ip / elem.comp.globalData.frameRate,
                            outPoint = elem.data.op / elem.comp.globalData.frameRate,
                            width = elem.data.sw ? elem.data.sw : 0,
                            height = elem.data.sh ? elem.data.sh : 0,
                            loopIn, loop_in, loopOut, loop_out, toWorld, fromWorld, fromComp, fromCompToSurface, anchorPoint, thisLayer, thisComp, mask, valueAtTime, velocityAtTime, fn = new Function,
                            fn = eval("[function(){" + val + ";if($bm_rt.__shapeObject){this.v=shape_pool.clone($bm_rt.v);}else{this.v=$bm_rt;}}]")[0],
                            bindedFn = fn.bind(this),
                            numKeys = property.kf ? data.k.length : 0,
                            wiggle = function(e, t) {
                                var n, i, a = this.pv.length ? this.pv.length : 1,
                                    r = Array.apply(null, {
                                        len: a
                                    });
                                for (i = 0; i < a; i += 1) r[i] = 0;
                                var o = Math.floor(5 * time);
                                for (n = 0, i = 0; n < o;) {
                                    for (i = 0; i < a; i += 1) r[i] += -t + 2 * t * BMMath.random();
                                    n += 1
                                }
                                var s = 5 * time,
                                    l = s - Math.floor(s),
                                    c = Array.apply({
                                        length: a
                                    });
                                if (a > 1) {
                                    for (i = 0; i < a; i += 1) c[i] = this.pv[i] + r[i] + (-t + 2 * t * BMMath.random()) * l;
                                    return c
                                }
                                return this.pv + r[0] + (-t + 2 * t * BMMath.random()) * l
                            }.bind(this);
                        thisProperty.loopIn && (loopIn = thisProperty.loopIn.bind(thisProperty), loop_in = loopIn), thisProperty.loopOut && (loopOut = thisProperty.loopOut.bind(thisProperty), loop_out = loopOut);
                        var loopInDuration = function(e, t) {
                                return loopIn(e, t, !0)
                            }.bind(this),
                            loopOutDuration = function(e, t) {
                                return loopOut(e, t, !0)
                            }.bind(this);
                        this.getValueAtTime && (valueAtTime = this.getValueAtTime.bind(this)), this.getVelocityAtTime && (velocityAtTime = this.getVelocityAtTime.bind(this));
                        var comp = elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface),
                            time, velocity, value, textIndex, textTotal, selectorValue;

                        function lookAt(e, t) {
                            var n = [t[0] - e[0], t[1] - e[1], t[2] - e[2]],
                                i = Math.atan2(n[0], Math.sqrt(n[1] * n[1] + n[2] * n[2])) / degToRads;
                            return [-Math.atan2(n[1], n[2]) / degToRads, i, 0]
                        }

                        function easeOut(e, t, n) {
                            return -(n - t) * e * (e - 2) + t
                        }

                        function nearestKey(e) {
                            var t, n, i, a = data.k.length;
                            if (data.k.length && "number" != typeof data.k[0])
                                if (n = -1, (e *= elem.comp.globalData.frameRate) < data.k[0].t) n = 1, i = data.k[0].t;
                                else {
                                    for (t = 0; t < a - 1; t += 1) {
                                        if (e === data.k[t].t) {
                                            n = t + 1, i = data.k[t].t;
                                            break
                                        }
                                        if (e > data.k[t].t && e < data.k[t + 1].t) {
                                            e - data.k[t].t > data.k[t + 1].t - e ? (n = t + 2, i = data.k[t + 1].t) : (n = t + 1, i = data.k[t].t);
                                            break
                                        }
                                    } - 1 === n && (n = t + 1, i = data.k[t].t)
                                }
                            else n = 0, i = 0;
                            var r = {};
                            return r.index = n, r.time = i / elem.comp.globalData.frameRate, r
                        }

                        function key(e) {
                            var t, n, i, a;
                            if (!data.k.length || "number" == typeof data.k[0]) throw new Error("The property has no keyframe at index " + e);
                            for (e -= 1, t = {
                                    time: data.k[e].t / elem.comp.globalData.frameRate
                                }, i = (a = e !== data.k.length - 1 || data.k[e].h ? data.k[e].s : data.k[e - 1].e).length, n = 0; n < i; n += 1) t[n] = a[n];
                            return t
                        }

                        function framesToTime(e, t) {
                            return t || (t = elem.comp.globalData.frameRate), e / t
                        }

                        function timeToFrames(e, t) {
                            return e || 0 === e || (e = time), t || (t = elem.comp.globalData.frameRate), e * t
                        }

                        function seedRandom(e) {
                            BMMath.seedrandom(randSeed + e)
                        }

                        function sourceRectAtTime() {
                            return elem.sourceRectAtTime()
                        }
                        var index = elem.data.ind,
                            hasParent = !(!elem.hierarchy || !elem.hierarchy.length),
                            parent, randSeed = Math.floor(1e6 * Math.random());

                        function executeExpression() {
                            if (_needsRandom && seedRandom(randSeed), this.frameExpressionId !== elem.globalData.frameId || "textSelector" === this.type) {
                                if (this.lock) return this.v = duplicatePropertyValue(this.pv, this.mult), !0;
                                var e, t;
                                if ("textSelector" === this.type && (textIndex = this.textIndex, textTotal = this.textTotal, selectorValue = this.selectorValue), thisLayer || (thisLayer = elem.layerInterface, thisComp = elem.comp.compInterface, toWorld = thisLayer.toWorld.bind(thisLayer), fromWorld = thisLayer.fromWorld.bind(thisLayer), fromComp = thisLayer.fromComp.bind(thisLayer), mask = thisLayer.mask ? thisLayer.mask.bind(thisLayer) : null, fromCompToSurface = fromComp), transform || (transform = elem.layerInterface("ADBE Transform Group"), anchorPoint = transform.anchorPoint), 4 !== elemType || content || (content = thisLayer("ADBE Root Vectors Group")), effect || (effect = thisLayer(4)), (hasParent = !(!elem.hierarchy || !elem.hierarchy.length)) && !parent && (parent = elem.hierarchy[0].layerInterface), this.lock = !0, this.getPreValue && this.getPreValue(), value = this.pv, time = this.comp.renderedFrame / this.comp.globalData.frameRate, needsVelocity && (velocity = velocityAtTime(time)), bindedFn(), this.frameExpressionId = elem.globalData.frameId, this.mult)
                                    if ("number" == typeof this.v || this.v instanceof Number || this.v instanceof String || "string" == typeof this.v) this.v *= this.mult;
                                    else if (1 === this.v.length) this.v = this.v[0] * this.mult;
                                else
                                    for (t = this.v.length, value === this.v && (this.v = 2 === t ? [value[0], value[1]] : [value[0], value[1], value[2]]), e = 0; e < t; e += 1) this.v[e] *= this.mult;
                                if (1 === this.v.length && (this.v = this.v[0]), "number" == typeof this.v || this.v instanceof Number || this.v instanceof String || "string" == typeof this.v) this.lastValue !== this.v && (this.lastValue = this.v, this.mdf = !0);
                                else if (this.v._length) shapesEqual(this.v, this.localShapeCollection.shapes[0]) || (this.mdf = !0, this.localShapeCollection.releaseShapes(), this.localShapeCollection.addShape(shape_pool.clone(this.v)));
                                else
                                    for (t = this.v.length, e = 0; e < t; e += 1) this.v[e] !== this.lastValue[e] && (this.lastValue[e] = this.v[e], this.mdf = !0);
                                this.lock = !1
                            }
                        }
                        return executeExpression
                    }
                    return ob.initiateExpression = initiateExpression, ob
                }(),
                ShapeExpressionInterface = function() {
                    var e = {
                        createShapeInterface: function(e, t, i) {
                            return n(e, t, i)
                        },
                        createGroupInterface: function(e, t, n) {
                            return a(e, t, n)
                        },
                        createTrimInterface: function(e, t, n) {
                            return s(e, t, n)
                        },
                        createStrokeInterface: function(e, t, n) {
                            return o(e, t, n)
                        },
                        createTransformInterface: function(e, t, n) {
                            return l(e, t, n)
                        },
                        createEllipseInterface: function(e, t, n) {
                            return c(e, t, n)
                        },
                        createStarInterface: function(e, t, n) {
                            return u(e, t, n)
                        },
                        createRectInterface: function(e, t, n) {
                            return d(e, t, n)
                        },
                        createRoundedInterface: function(e, t, n) {
                            return f(e, t, n)
                        },
                        createRepatearInterface: function(e, t, n) {
                            return h(e, t, n)
                        },
                        createPathInterface: function(e, t, n) {
                            return p(e, t, n)
                        },
                        createFillInterface: function(e, t, n) {
                            return r(e, t, n)
                        }
                    };

                    function t(e, t, n) {
                        var i, a = [],
                            r = e ? e.length : 0;
                        for (i = 0; i < r; i += 1) "gr" == e[i].ty ? a.push(ShapeExpressionInterface.createGroupInterface(e[i], t[i], n)) : "fl" == e[i].ty ? a.push(ShapeExpressionInterface.createFillInterface(e[i], t[i], n)) : "st" == e[i].ty ? a.push(ShapeExpressionInterface.createStrokeInterface(e[i], t[i], n)) : "tm" == e[i].ty ? a.push(ShapeExpressionInterface.createTrimInterface(e[i], t[i], n)) : "tr" == e[i].ty || ("el" == e[i].ty ? a.push(ShapeExpressionInterface.createEllipseInterface(e[i], t[i], n)) : "sr" == e[i].ty ? a.push(ShapeExpressionInterface.createStarInterface(e[i], t[i], n)) : "sh" == e[i].ty ? a.push(ShapeExpressionInterface.createPathInterface(e[i], t[i], n)) : "rc" == e[i].ty ? a.push(ShapeExpressionInterface.createRectInterface(e[i], t[i], n)) : "rd" == e[i].ty ? a.push(ShapeExpressionInterface.createRoundedInterface(e[i], t[i], n)) : "rp" == e[i].ty && a.push(ShapeExpressionInterface.createRepatearInterface(e[i], t[i], n)));
                        return a
                    }
                    var n = function(e, n, i) {
                            var a;

                            function r(e) {
                                if ("number" == typeof e) return a[e - 1];
                                for (var t = 0, n = a.length; t < n;) {
                                    if (a[t]._name === e) return a[t];
                                    t += 1
                                }
                            }
                            return r.propertyGroup = i, a = t(e, n, r), r
                        },
                        i = function(e, n, i) {
                            var a, r = function(e) {
                                for (var t = 0, n = a.length; t < n;) {
                                    if (a[t]._name === e || a[t].mn === e || a[t].propertyIndex === e || a[t].ix === e || a[t].ind === e) return a[t];
                                    t += 1
                                }
                                if ("number" == typeof e) return a[e - 1]
                            };
                            return r.propertyGroup = function(e) {
                                return 1 === e ? r : i(e - 1)
                            }, a = t(e.it, n.it, r.propertyGroup), r.numProperties = a.length, r.propertyIndex = e.cix, r
                        },
                        a = function(e, t, n) {
                            var a = function(e) {
                                switch (e) {
                                    case "ADBE Vectors Group":
                                    case "Contents":
                                    case 2:
                                        return a.content;
                                    case "ADBE Vector Transform Group":
                                    case 3:
                                    default:
                                        return a.transform
                                }
                            };
                            a.propertyGroup = function(e) {
                                return 1 === e ? a : n(e - 1)
                            };
                            var r = i(e, t, a.propertyGroup),
                                o = ShapeExpressionInterface.createTransformInterface(e.it[e.it.length - 1], t.it[t.it.length - 1], a.propertyGroup);
                            return a.content = r, a.transform = o, Object.defineProperty(a, "_name", {
                                get: function() {
                                    return e.nm
                                }
                            }), a.numProperties = e.np, a.propertyIndex = e.ix, a.nm = e.nm, a.mn = e.mn, a
                        },
                        r = function(e, t, n) {
                            function i(e) {
                                return "Color" === e || "color" === e ? i.color : "Opacity" === e || "opacity" === e ? i.opacity : void 0
                            }
                            return Object.defineProperty(i, "color", {
                                get: function() {
                                    return ExpressionValue(t.c, 1 / t.c.mult, "color")
                                }
                            }), Object.defineProperty(i, "opacity", {
                                get: function() {
                                    return ExpressionValue(t.o, 100)
                                }
                            }), Object.defineProperty(i, "_name", {
                                value: e.nm
                            }), Object.defineProperty(i, "mn", {
                                value: e.mn
                            }), t.c.setGroupProperty(n), t.o.setGroupProperty(n), i
                        },
                        o = function(t, n, i) {
                            function a(t) {
                                return 1 === t ? e : i(t - 1)
                            }

                            function r(e) {
                                return 1 === e ? c : a(e - 1)
                            }

                            function o(e) {
                                Object.defineProperty(c, t.d[e].nm, {
                                    get: function() {
                                        return ExpressionValue(n.d.dataProps[e].p)
                                    }
                                })
                            }
                            var s, l = t.d ? t.d.length : 0,
                                c = {};
                            for (s = 0; s < l; s += 1) o(s), n.d.dataProps[s].p.setGroupProperty(r);

                            function u(e) {
                                return "Color" === e || "color" === e ? u.color : "Opacity" === e || "opacity" === e ? u.opacity : "Stroke Width" === e || "stroke width" === e ? u.strokeWidth : void 0
                            }
                            return Object.defineProperty(u, "color", {
                                get: function() {
                                    return ExpressionValue(n.c, 1 / n.c.mult, "color")
                                }
                            }), Object.defineProperty(u, "opacity", {
                                get: function() {
                                    return ExpressionValue(n.o, 100)
                                }
                            }), Object.defineProperty(u, "strokeWidth", {
                                get: function() {
                                    return ExpressionValue(n.w)
                                }
                            }), Object.defineProperty(u, "dash", {
                                get: function() {
                                    return c
                                }
                            }), Object.defineProperty(u, "_name", {
                                value: t.nm
                            }), Object.defineProperty(u, "mn", {
                                value: t.mn
                            }), n.c.setGroupProperty(a), n.o.setGroupProperty(a), n.w.setGroupProperty(a), u
                        },
                        s = function(e, t, n) {
                            function i(e) {
                                return 1 == e ? a : n(--e)
                            }

                            function a(t) {
                                return t === e.e.ix || "End" === t || "end" === t ? a.end : t === e.s.ix ? a.start : t === e.o.ix ? a.offset : void 0
                            }
                            return a.propertyIndex = e.ix, t.s.setGroupProperty(i), t.e.setGroupProperty(i), t.o.setGroupProperty(i), a.propertyIndex = e.ix, Object.defineProperty(a, "start", {
                                get: function() {
                                    return ExpressionValue(t.s, 1 / t.s.mult)
                                }
                            }), Object.defineProperty(a, "end", {
                                get: function() {
                                    return ExpressionValue(t.e, 1 / t.e.mult)
                                }
                            }), Object.defineProperty(a, "offset", {
                                get: function() {
                                    return ExpressionValue(t.o)
                                }
                            }), Object.defineProperty(a, "_name", {
                                get: function() {
                                    return e.nm
                                }
                            }), a.mn = e.mn, a
                        },
                        l = function(e, t, n) {
                            function i(e) {
                                return 1 == e ? a : n(--e)
                            }

                            function a(t) {
                                return e.a.ix === t ? a.anchorPoint : e.o.ix === t ? a.opacity : e.p.ix === t ? a.position : e.r.ix === t ? a.rotation : e.s.ix === t ? a.scale : e.sk && e.sk.ix === t ? a.skew : e.sa && e.sa.ix === t ? a.skewAxis : "Opacity" === t ? a.opacity : "Position" === t ? a.position : "Anchor Point" === t ? a.anchorPoint : "Scale" === t ? a.scale : "Rotation" === t || "ADBE Vector Rotation" === t ? a.rotation : "Skew" === t ? a.skew : "Skew Axis" === t ? a.skewAxis : void 0
                            }
                            return t.transform.mProps.o.setGroupProperty(i), t.transform.mProps.p.setGroupProperty(i), t.transform.mProps.a.setGroupProperty(i), t.transform.mProps.s.setGroupProperty(i), t.transform.mProps.r.setGroupProperty(i), t.transform.mProps.sk && (t.transform.mProps.sk.setGroupProperty(i), t.transform.mProps.sa.setGroupProperty(i)), t.transform.op.setGroupProperty(i), Object.defineProperty(a, "opacity", {
                                get: function() {
                                    return ExpressionValue(t.transform.mProps.o, 1 / t.transform.mProps.o.mult)
                                }
                            }), Object.defineProperty(a, "position", {
                                get: function() {
                                    return ExpressionValue(t.transform.mProps.p)
                                }
                            }), Object.defineProperty(a, "anchorPoint", {
                                get: function() {
                                    return ExpressionValue(t.transform.mProps.a)
                                }
                            }), Object.defineProperty(a, "scale", {
                                get: function() {
                                    return ExpressionValue(t.transform.mProps.s, 1 / t.transform.mProps.s.mult)
                                }
                            }), Object.defineProperty(a, "rotation", {
                                get: function() {
                                    return ExpressionValue(t.transform.mProps.r, 1 / t.transform.mProps.r.mult)
                                }
                            }), Object.defineProperty(a, "skew", {
                                get: function() {
                                    return ExpressionValue(t.transform.mProps.sk)
                                }
                            }), Object.defineProperty(a, "skewAxis", {
                                get: function() {
                                    return ExpressionValue(t.transform.mProps.sa)
                                }
                            }), Object.defineProperty(a, "_name", {
                                get: function() {
                                    return e.nm
                                }
                            }), a.ty = "tr", a.mn = e.mn, a
                        },
                        c = function(e, t, n) {
                            function i(e) {
                                return 1 == e ? r : n(--e)
                            }
                            r.propertyIndex = e.ix;
                            var a = "tm" === t.sh.ty ? t.sh.prop : t.sh;

                            function r(t) {
                                return e.p.ix === t ? r.position : e.s.ix === t ? r.size : void 0
                            }
                            return a.s.setGroupProperty(i), a.p.setGroupProperty(i), Object.defineProperty(r, "size", {
                                get: function() {
                                    return ExpressionValue(a.s)
                                }
                            }), Object.defineProperty(r, "position", {
                                get: function() {
                                    return ExpressionValue(a.p)
                                }
                            }), Object.defineProperty(r, "_name", {
                                get: function() {
                                    return e.nm
                                }
                            }), r.mn = e.mn, r
                        },
                        u = function(e, t, n) {
                            function i(e) {
                                return 1 == e ? r : n(--e)
                            }
                            var a = "tm" === t.sh.ty ? t.sh.prop : t.sh;

                            function r(t) {
                                return e.p.ix === t ? r.position : e.r.ix === t ? r.rotation : e.pt.ix === t ? r.points : e.or.ix === t || "ADBE Vector Star Outer Radius" === t ? r.outerRadius : e.os.ix === t ? r.outerRoundness : !e.ir || e.ir.ix !== t && "ADBE Vector Star Inner Radius" !== t ? e.is && e.is.ix === t ? r.innerRoundness : void 0 : r.innerRadius
                            }
                            return r.propertyIndex = e.ix, a.or.setGroupProperty(i), a.os.setGroupProperty(i), a.pt.setGroupProperty(i), a.p.setGroupProperty(i), a.r.setGroupProperty(i), e.ir && (a.ir.setGroupProperty(i), a.is.setGroupProperty(i)), Object.defineProperty(r, "position", {
                                get: function() {
                                    return ExpressionValue(a.p)
                                }
                            }), Object.defineProperty(r, "rotation", {
                                get: function() {
                                    return ExpressionValue(a.r, 1 / a.r.mult)
                                }
                            }), Object.defineProperty(r, "points", {
                                get: function() {
                                    return ExpressionValue(a.pt)
                                }
                            }), Object.defineProperty(r, "outerRadius", {
                                get: function() {
                                    return ExpressionValue(a.or)
                                }
                            }), Object.defineProperty(r, "outerRoundness", {
                                get: function() {
                                    return ExpressionValue(a.os)
                                }
                            }), Object.defineProperty(r, "innerRadius", {
                                get: function() {
                                    return a.ir ? ExpressionValue(a.ir) : 0
                                }
                            }), Object.defineProperty(r, "innerRoundness", {
                                get: function() {
                                    return a.is ? ExpressionValue(a.is, 1 / a.is.mult) : 0
                                }
                            }), Object.defineProperty(r, "_name", {
                                get: function() {
                                    return e.nm
                                }
                            }), r.mn = e.mn, r
                        },
                        d = function(e, t, n) {
                            function i(e) {
                                return 1 == e ? r : n(--e)
                            }
                            var a = "tm" === t.sh.ty ? t.sh.prop : t.sh;

                            function r(t) {
                                return e.p.ix === t ? r.position : e.r.ix === t ? r.roundness : e.s.ix === t || "Size" === t ? r.size : void 0
                            }
                            return r.propertyIndex = e.ix, a.p.setGroupProperty(i), a.s.setGroupProperty(i), a.r.setGroupProperty(i), Object.defineProperty(r, "position", {
                                get: function() {
                                    return ExpressionValue(a.p)
                                }
                            }), Object.defineProperty(r, "roundness", {
                                get: function() {
                                    return ExpressionValue(a.r)
                                }
                            }), Object.defineProperty(r, "size", {
                                get: function() {
                                    return ExpressionValue(a.s)
                                }
                            }), Object.defineProperty(r, "_name", {
                                get: function() {
                                    return e.nm
                                }
                            }), r.mn = e.mn, r
                        },
                        f = function(e, t, n) {
                            var i = t;

                            function a(t) {
                                if (e.r.ix === t || "Round Corners 1" === t) return a.radius
                            }
                            return a.propertyIndex = e.ix, i.rd.setGroupProperty(function(e) {
                                return 1 == e ? a : n(--e)
                            }), Object.defineProperty(a, "radius", {
                                get: function() {
                                    return ExpressionValue(i.rd)
                                }
                            }), Object.defineProperty(a, "_name", {
                                get: function() {
                                    return e.nm
                                }
                            }), a.mn = e.mn, a
                        },
                        h = function(e, t, n) {
                            function i(e) {
                                return 1 == e ? r : n(--e)
                            }
                            var a = t;

                            function r(t) {
                                return e.c.ix === t || "Copies" === t ? r.copies : e.o.ix === t || "Offset" === t ? r.offset : void 0
                            }
                            return r.propertyIndex = e.ix, a.c.setGroupProperty(i), a.o.setGroupProperty(i), Object.defineProperty(r, "copies", {
                                get: function() {
                                    return ExpressionValue(a.c)
                                }
                            }), Object.defineProperty(r, "offset", {
                                get: function() {
                                    return ExpressionValue(a.o)
                                }
                            }), Object.defineProperty(r, "_name", {
                                get: function() {
                                    return e.nm
                                }
                            }), r.mn = e.mn, r
                        },
                        p = function(e, t, n) {
                            var i = t.sh;

                            function a(e) {
                                if ("Shape" === e || "shape" === e || "Path" === e || "path" === e || "ADBE Vector Shape" === e || 2 === e) return a.path
                            }
                            return i.setGroupProperty(function(e) {
                                return 1 == e ? a : n(--e)
                            }), Object.defineProperty(a, "path", {
                                get: function() {
                                    return i.k && i.getValue(), i
                                }
                            }), Object.defineProperty(a, "shape", {
                                get: function() {
                                    return i.k && i.getValue(), i
                                }
                            }), Object.defineProperty(a, "_name", {
                                value: e.nm
                            }), Object.defineProperty(a, "ix", {
                                value: e.ix
                            }), Object.defineProperty(a, "mn", {
                                value: e.mn
                            }), a
                        };
                    return e
                }(),
                TextExpressionInterface = function(e) {
                    var t;

                    function n() {}
                    return Object.defineProperty(n, "sourceText", {
                        get: function() {
                            var n = e.textProperty.currentData.t;
                            return void 0 !== e.textProperty.currentData.t && (e.textProperty.currentData.t = void 0, (t = new String(n)).value = n || new String(n)), t
                        }
                    }), n
                },
                LayerExpressionInterface = function() {
                    function e(e, t) {
                        var n = new Matrix;
                        if (n.reset(), this._elem.finalTransform.mProp.applyToMatrix(n), this._elem.hierarchy && this._elem.hierarchy.length) {
                            var i, a = this._elem.hierarchy.length;
                            for (i = 0; i < a; i += 1) this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(n);
                            return n.applyToPointArray(e[0], e[1], e[2] || 0)
                        }
                        return n.applyToPointArray(e[0], e[1], e[2] || 0)
                    }

                    function t(e, t) {
                        var n = new Matrix;
                        if (n.reset(), this._elem.finalTransform.mProp.applyToMatrix(n), this._elem.hierarchy && this._elem.hierarchy.length) {
                            var i, a = this._elem.hierarchy.length;
                            for (i = 0; i < a; i += 1) this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(n);
                            return n.inversePoint(e)
                        }
                        return n.inversePoint(e)
                    }

                    function n(e) {
                        var t = new Matrix;
                        if (t.reset(), this._elem.finalTransform.mProp.applyToMatrix(t), this._elem.hierarchy && this._elem.hierarchy.length) {
                            var n, i = this._elem.hierarchy.length;
                            for (n = 0; n < i; n += 1) this._elem.hierarchy[n].finalTransform.mProp.applyToMatrix(t);
                            return t.inversePoint(e)
                        }
                        return t.inversePoint(e)
                    }
                    return function(i) {
                        var a = TransformExpressionInterface(i.transform);

                        function r(e) {
                            switch (e) {
                                case "ADBE Root Vectors Group":
                                case "Contents":
                                case 2:
                                    return r.shapeInterface;
                                case 1:
                                case 6:
                                case "Transform":
                                case "transform":
                                case "ADBE Transform Group":
                                    return a;
                                case 4:
                                case "ADBE Effect Parade":
                                    return r.effect
                            }
                        }
                        return r.toWorld = e, r.fromWorld = t, r.toComp = e, r.fromComp = n, r.sourceRectAtTime = i.sourceRectAtTime.bind(i), r._elem = i, Object.defineProperty(r, "hasParent", {
                            get: function() {
                                return !!i.hierarchy
                            }
                        }), Object.defineProperty(r, "parent", {
                            get: function() {
                                return i.hierarchy[0].layerInterface
                            }
                        }), Object.defineProperty(r, "rotation", {
                            get: function() {
                                return a.rotation
                            }
                        }), Object.defineProperty(r, "scale", {
                            get: function() {
                                return a.scale
                            }
                        }), Object.defineProperty(r, "position", {
                            get: function() {
                                return a.position
                            }
                        }), Object.defineProperty(r, "anchorPoint", {
                            get: function() {
                                return a.anchorPoint
                            }
                        }), Object.defineProperty(r, "transform", {
                            get: function() {
                                return a
                            }
                        }), Object.defineProperty(r, "width", {
                            get: function() {
                                return 0 === i.data.ty ? i.data.w : 100
                            }
                        }), Object.defineProperty(r, "height", {
                            get: function() {
                                return 0 === i.data.ty ? i.data.h : 100
                            }
                        }), Object.defineProperty(r, "source", {
                            get: function() {
                                return i.data.refId
                            }
                        }), Object.defineProperty(r, "index", {
                            get: function() {
                                return i.data.ind
                            }
                        }), Object.defineProperty(r, "_name", {
                            value: i.data.nm
                        }), Object.defineProperty(r, "content", {
                            get: function() {
                                return r.shapeInterface
                            }
                        }), Object.defineProperty(r, "active", {
                            get: function() {
                                return i.isVisible
                            }
                        }), Object.defineProperty(r, "text", {
                            get: function() {
                                return r.textInterface
                            }
                        }), r.registerMaskInterface = function(e) {
                            r.mask = new MaskManagerInterface(e, i)
                        }, r.registerEffectsInterface = function(e) {
                            r.effect = e
                        }, r
                    }
                }(),
                CompExpressionInterface = function(e) {
                    function t(t) {
                        for (var n = 0, i = e.layers.length; n < i;) {
                            if (e.layers[n].nm === t || e.layers[n].ind === t) return e.elements[n].layerInterface;
                            n += 1
                        }
                        return {
                            active: !1
                        }
                    }
                    return Object.defineProperty(t, "_name", {
                        value: e.data.nm
                    }), t.layer = t, t.pixelAspect = 1, t.height = e.globalData.compSize.h, t.width = e.globalData.compSize.w, t.pixelAspect = 1, t.frameDuration = 1 / e.globalData.frameRate, t
                },
                TransformExpressionInterface = function(e) {
                    function t(n) {
                        switch (n) {
                            case "scale":
                            case "Scale":
                            case "ADBE Scale":
                            case 6:
                                return t.scale;
                            case "rotation":
                            case "Rotation":
                            case "ADBE Rotation":
                            case "ADBE Rotate Z":
                            case 10:
                                return t.rotation;
                            case "position":
                            case "Position":
                            case "ADBE Position":
                            case 2:
                                return e.position;
                            case "anchorPoint":
                            case "AnchorPoint":
                            case "Anchor Point":
                            case "ADBE AnchorPoint":
                            case 1:
                                return t.anchorPoint;
                            case "opacity":
                            case "Opacity":
                            case 11:
                                return t.opacity
                        }
                    }
                    return Object.defineProperty(t, "rotation", {
                        get: function() {
                            return e.rotation
                        }
                    }), Object.defineProperty(t, "scale", {
                        get: function() {
                            return e.scale
                        }
                    }), Object.defineProperty(t, "position", {
                        get: function() {
                            return e.position
                        }
                    }), Object.defineProperty(t, "xPosition", {
                        get: function() {
                            return e.xPosition
                        }
                    }), Object.defineProperty(t, "yPosition", {
                        get: function() {
                            return e.yPosition
                        }
                    }), Object.defineProperty(t, "anchorPoint", {
                        get: function() {
                            return e.anchorPoint
                        }
                    }), Object.defineProperty(t, "opacity", {
                        get: function() {
                            return e.opacity
                        }
                    }), Object.defineProperty(t, "skew", {
                        get: function() {
                            return e.skew
                        }
                    }), Object.defineProperty(t, "skewAxis", {
                        get: function() {
                            return e.skewAxis
                        }
                    }), t
                },
                ProjectInterface = function() {
                    function e(e) {
                        this.compositions.push(e)
                    }
                    return function() {
                        function t(e) {
                            for (var t = 0, n = this.compositions.length; t < n;) {
                                if (this.compositions[t].data && this.compositions[t].data.nm === e) return this.compositions[t].prepareFrame && this.compositions[t].prepareFrame(this.currentFrame), this.compositions[t].compInterface;
                                t += 1
                            }
                        }
                        return t.compositions = [], t.currentFrame = 0, t.registerComposition = e, t
                    }
                }(),
                EffectsExpressionInterface = function() {
                    function e(n, i, a, r) {
                        var o, s = [],
                            l = n.ef.length;
                        for (o = 0; o < l; o += 1) 5 === n.ef[o].ty ? s.push(e(n.ef[o], i.effectElements[o], i.effectElements[o].propertyGroup, r)) : s.push(t(i.effectElements[o], n.ef[o].ty, r, c));

                        function c(e) {
                            return 1 === e ? u : a(e - 1)
                        }
                        var u = function(e) {
                            for (var t = n.ef, i = 0, a = t.length; i < a;) {
                                if (e === t[i].nm || e === t[i].mn || e === t[i].ix) return 5 === t[i].ty ? s[i] : s[i]();
                                i += 1
                            }
                            return s[0]()
                        };
                        return u.propertyGroup = c, "ADBE Color Control" === n.mn && Object.defineProperty(u, "color", {
                            get: function() {
                                return s[0]()
                            }
                        }), Object.defineProperty(u, "numProperties", {
                            get: function() {
                                return n.np
                            }
                        }), u.active = 0 !== n.en, u
                    }

                    function t(e, t, n, i) {
                        return e.p.setGroupProperty && e.p.setGroupProperty(i),
                            function() {
                                return 10 === t ? n.comp.compInterface(e.p.v) : ExpressionValue(e.p)
                            }
                    }
                    return {
                        createEffectsInterface: function(t, n) {
                            if (t.effects) {
                                var i, a = [],
                                    r = t.data.ef,
                                    o = t.effects.effectElements.length;
                                for (i = 0; i < o; i += 1) a.push(e(r[i], t.effects.effectElements[i], n, t));
                                return function(e) {
                                    for (var n = t.data.ef, i = 0, r = n.length; i < r;) {
                                        if (e === n[i].nm || e === n[i].mn || e === n[i].ix) return a[i];
                                        i += 1
                                    }
                                }
                            }
                        }
                    }
                }(),
                MaskManagerInterface = function() {
                    function e(e, t) {
                        this._mask = e, this._data = t
                    }
                    return Object.defineProperty(e.prototype, "maskPath", {
                            get: function() {
                                return this._mask.prop.k && this._mask.prop.getValue(), this._mask.prop
                            }
                        }),
                        function(t, n) {
                            var i, a = Array.apply(null, {
                                    length: t.viewData.length
                                }),
                                r = t.viewData.length;
                            for (i = 0; i < r; i += 1) a[i] = new e(t.viewData[i], t.masksProperties[i]);
                            return function(e) {
                                for (i = 0; i < r;) {
                                    if (t.masksProperties[i].nm === e) return a[i];
                                    i += 1
                                }
                            }
                        }
                }(),
                ExpressionValue = function(e, t, n) {
                    var i, a, r, o;
                    if (e.k && e.getValue(), n) {
                        if ("color" === n) {
                            for (r = 4, i = Array.apply(null, {
                                    length: r
                                }), o = Array.apply(null, {
                                    length: r
                                }), a = 0; a < r; a += 1) i[a] = o[a] = t && a < 3 ? e.v[a] * t : 1;
                            i.value = o
                        }
                    } else if ("number" == typeof e.v || e.v instanceof Number)(i = t ? new Number(e.v * t) : new Number(e.v)).value = t ? e.v * t : e.v;
                    else {
                        for (r = e.v.length, i = Array.apply(null, {
                                length: r
                            }), o = Array.apply(null, {
                                length: r
                            }), a = 0; a < r; a += 1) i[a] = o[a] = t ? e.v[a] * t : e.v[a];
                        i.value = o
                    }
                    return i.numKeys = e.keyframes ? e.keyframes.length : 0, i.key = function(t) {
                        return i.numKeys ? e.keyframes[t - 1].t : 0
                    }, i.valueAtTime = e.getValueAtTime, i.propertyGroup = e.propertyGroup, i
                };

            function SliderEffect(e, t, n) {
                this.p = PropertyFactory.getProp(t, e.v, 0, 0, n)
            }

            function AngleEffect(e, t, n) {
                this.p = PropertyFactory.getProp(t, e.v, 0, 0, n)
            }

            function ColorEffect(e, t, n) {
                this.p = PropertyFactory.getProp(t, e.v, 1, 0, n)
            }

            function PointEffect(e, t, n) {
                this.p = PropertyFactory.getProp(t, e.v, 1, 0, n)
            }

            function LayerIndexEffect(e, t, n) {
                this.p = PropertyFactory.getProp(t, e.v, 0, 0, n)
            }

            function MaskIndexEffect(e, t, n) {
                this.p = PropertyFactory.getProp(t, e.v, 0, 0, n)
            }

            function CheckboxEffect(e, t, n) {
                this.p = PropertyFactory.getProp(t, e.v, 0, 0, n)
            }

            function NoValueEffect() {
                this.p = {}
            }

            function EffectsManager(e, t, n) {
                var i = e.ef;
                this.effectElements = [];
                var a, r, o = i.length;
                for (a = 0; a < o; a++) r = new GroupEffect(i[a], t, n), this.effectElements.push(r)
            }

            function GroupEffect(e, t, n) {
                this.dynamicProperties = [], this.init(e, t, this.dynamicProperties), this.dynamicProperties.length && n.push(this)
            }
            GroupEffect.prototype.getValue = function() {
                this.mdf = !1;
                var e, t = this.dynamicProperties.length;
                for (e = 0; e < t; e += 1) this.dynamicProperties[e].getValue(), this.mdf = !!this.dynamicProperties[e].mdf || this.mdf
            }, GroupEffect.prototype.init = function(e, t, n) {
                this.data = e, this.mdf = !1, this.effectElements = [];
                var i, a, r = this.data.ef.length,
                    o = this.data.ef;
                for (i = 0; i < r; i += 1) switch (o[i].ty) {
                    case 0:
                        a = new SliderEffect(o[i], t, n), this.effectElements.push(a);
                        break;
                    case 1:
                        a = new AngleEffect(o[i], t, n), this.effectElements.push(a);
                        break;
                    case 2:
                        a = new ColorEffect(o[i], t, n), this.effectElements.push(a);
                        break;
                    case 3:
                        a = new PointEffect(o[i], t, n), this.effectElements.push(a);
                        break;
                    case 4:
                    case 7:
                        a = new CheckboxEffect(o[i], t, n), this.effectElements.push(a);
                        break;
                    case 10:
                        a = new LayerIndexEffect(o[i], t, n), this.effectElements.push(a);
                        break;
                    case 11:
                        a = new MaskIndexEffect(o[i], t, n), this.effectElements.push(a);
                        break;
                    case 5:
                        a = new EffectsManager(o[i], t, n), this.effectElements.push(a);
                        break;
                    case 6:
                        a = new NoValueEffect(o[i], t, n), this.effectElements.push(a)
                }
            };
            var bodymovinjs = {};

            function setLocationHref(e) {
                locationHref = e
            }

            function play(e) {
                animationManager.play(e)
            }

            function pause(e) {
                animationManager.pause(e)
            }

            function togglePause(e) {
                animationManager.togglePause(e)
            }

            function setSpeed(e, t) {
                animationManager.setSpeed(e, t)
            }

            function setDirection(e, t) {
                animationManager.setDirection(e, t)
            }

            function stop(e) {
                animationManager.stop(e)
            }

            function moveFrame(e) {
                animationManager.moveFrame(e)
            }

            function searchAnimations() {
                !0 === standalone ? animationManager.searchAnimations(animationData, standalone, renderer) : animationManager.searchAnimations()
            }

            function registerAnimation(e) {
                return animationManager.registerAnimation(e)
            }

            function resize() {
                animationManager.resize()
            }

            function start() {
                animationManager.start()
            }

            function goToAndStop(e, t, n) {
                animationManager.goToAndStop(e, t, n)
            }

            function setSubframeRendering(e) {
                subframeEnabled = e
            }

            function loadAnimation(e) {
                return !0 === standalone && (e.animationData = JSON.parse(animationData)), animationManager.loadAnimation(e)
            }

            function destroy(e) {
                return animationManager.destroy(e)
            }

            function setQuality(e) {
                if ("string" == typeof e) switch (e) {
                    case "high":
                        defaultCurveSegments = 200;
                        break;
                    case "medium":
                        defaultCurveSegments = 50;
                        break;
                    case "low":
                        defaultCurveSegments = 10
                } else !isNaN(e) && e > 1 && (defaultCurveSegments = e);
                roundValues(!(defaultCurveSegments >= 50))
            }

            function inBrowser() {
                return "undefined" != typeof navigator
            }

            function installPlugin(e, t) {
                "expressions" === e && (expressionsPlugin = t)
            }

            function getFactory(e) {
                switch (e) {
                    case "propertyFactory":
                        return PropertyFactory;
                    case "shapePropertyFactory":
                        return ShapePropertyFactory;
                    case "matrix":
                        return Matrix
                }
            }

            function checkReady() {
                "complete" === document.readyState && (clearInterval(readyStateCheckInterval), searchAnimations())
            }

            function getQueryVariable(e) {
                for (var t = queryString.split("&"), n = 0; n < t.length; n++) {
                    var i = t[n].split("=");
                    if (decodeURIComponent(i[0]) == e) return decodeURIComponent(i[1])
                }
            }
            bodymovinjs.play = play, bodymovinjs.pause = pause, bodymovinjs.setLocationHref = setLocationHref, bodymovinjs.togglePause = togglePause, bodymovinjs.setSpeed = setSpeed, bodymovinjs.setDirection = setDirection, bodymovinjs.stop = stop, bodymovinjs.moveFrame = moveFrame, bodymovinjs.searchAnimations = searchAnimations, bodymovinjs.registerAnimation = registerAnimation, bodymovinjs.loadAnimation = loadAnimation, bodymovinjs.setSubframeRendering = setSubframeRendering, bodymovinjs.resize = resize, bodymovinjs.start = start, bodymovinjs.goToAndStop = goToAndStop, bodymovinjs.destroy = destroy, bodymovinjs.setQuality = setQuality, bodymovinjs.inBrowser = inBrowser, bodymovinjs.installPlugin = installPlugin, bodymovinjs.__getFactory = getFactory, bodymovinjs.version = "4.13.0";
            var standalone = "__[STANDALONE]__",
                animationData = "__[ANIMATIONDATA]__",
                renderer = "";
            if (standalone) {
                var scripts = document.getElementsByTagName("script"),
                    index = scripts.length - 1,
                    myScript = scripts[index] || {
                        src: ""
                    },
                    queryString = myScript.src.replace(/^[^\?]+\??/, "");
                renderer = getQueryVariable("renderer")
            }
            var readyStateCheckInterval = setInterval(checkReady, 100);
            return bodymovinjs
        }, void 0 === (__WEBPACK_AMD_DEFINE_RESULT__ = function() {
            return factory(root)
        }.call(exports, __webpack_require__, exports, module)) || (module.exports = __WEBPACK_AMD_DEFINE_RESULT__)
    },
    nXjO: function(e, t, n) {
        "use strict";
        var i = window,
            a = i.geBySel1,
            r = i.geByClass1,
            o = i.gpeByClass,
            s = i.each,
            l = i.removeClass,
            c = i.addClass,
            u = i.hasClass,
            d = i.attr,
            f = i.addEvent,
            h = i.removeEvent,
            p = i.ajax,
            A = (i.replace, i.domClosestOverflowHidden),
            m = {
                OPEN_CLASS: "reply_owner_show",
                OPEN_BOTTOM_CLASS: "reply_owner_open_bottom",
                NO_LIMIT_CLASS: "reply_owner_picker_nolimit",
                CONTAINER_CLASS: "reply_owner_picker_container",
                PICKER_CLASS: "reply_owner_picker",
                PICKER_ITEM_CLASS: "reply_owner_option",
                LOADING_CLASS: "reply_owner_loading",
                IMAGE_CLASS: "_reply_owner_image",
                SELECTED_IMAGE_CLASS: "_reply_owner_selected_image",
                SELECTED_IMAGE_CONTAINER_CLASS: "reply_owner_selected_image",
                OPTION_CLASS: "reply_owner_option",
                PICKER_MAX_HEIGHT: null,
                LOADING_SHOW_TIME: 300,
                container: null,
                picker: null,
                clickEvent: "ontouchend" in document.documentElement ? "touchend" : "click",
                clickHandler: null,
                requestHandler: null,
                request: null,
                loading: !1,
                setElements: function(e) {
                    this.container = o(this.CONTAINER_CLASS, e), this.picker = r(this.PICKER_CLASS, this.container), this.clickHandler = this.clickHandler || bind(this.onDocumentClick, this), this.requestHandler = this.requestHandler || bind(this.onDocumentClickBeforeLoad, this)
                },
                unsetElements: function() {
                    h(document.body, this.clickEvent, this.clickHandler), h(document.body, this.clickEvent, this.requestHandler), this.container = this.picker = null
                },
                show: function(e) {
                    this.setElements(e), c(this.OPEN_CLASS, this.container), this.calcPosition()
                },
                hide: function() {
                    l(this.OPEN_CLASS, this.container), l(this.OPEN_BOTTOM_CLASS, this.container), this.unsetElements()
                },
                toggle: function() {
                    toggleClass(this.OPEN_CLASS, this.container), this.calcPosition(), u(this.OPEN_CLASS, this.container) ? (this.scrollToSelected(), f(document.body, this.clickEvent, this.clickHandler)) : (this.hide(), this.unsetElements())
                },
                calcPosition: function() {
                    var e = ge("mhead").offsetHeight,
                        t = this.picker.getBoundingClientRect(),
                        n = A(this.picker),
                        i = !0;
                    n && n.getBoundingClientRect().bottom < this.container.getBoundingClientRect().bottom + this.PICKER_MAX_HEIGHT ? i = !1 : u(this.LOADING_CLASS, this.container) ? i = t.top - e - this.PICKER_MAX_HEIGHT + t.height < 0 : u(this.OPEN_BOTTOM_CLASS, this.container) || (i = t.top - e < 0), toggleClass(this.OPEN_BOTTOM_CLASS, this.container, i)
                },
                onDocumentClick: function(e) {
                    var t = e.target;
                    t === this.container || o(this.CONTAINER_CLASS, t) || this.hide()
                },
                onDocumentClickBeforeLoad: function(e) {
                    var t = e.target;
                    t === this.container || o(this.CONTAINER_CLASS, t) || this.cancelRequest()
                },
                cancelRequest: function() {
                    this.request && (this.request.abort(), this.unsetElements())
                },
                getList: function() {
                    var e = this;
                    if (!this.loading) {
                        this.PICKER_MAX_HEIGHT = parseInt(getStyle(this.picker, "maxHeight"), 10);
                        var t = a('input[name="from_oid"]', this.container).value,
                            n = a('input[name="post_oid"]', this.container).value;
                        this.loading = !0;
                        var i = setTimeout(function() {
                            c(e.LOADING_CLASS, e.container), e.calcPosition()
                        }, this.LOADING_SHOW_TIME);
                        f(document.body, this.clickEvent, this.requestHandler), this.request = p.post("/wall.php", {
                            act: "get_reply_clubs_list",
                            oid: t,
                            post_oid: n
                        }, {
                            onDone: function(t) {
                                clearTimeout(i), e.picker.innerHTML = t, e.onLoadEnd(), e.toggle(e.picker)
                            },
                            onFail: function() {
                                e.onLoadEnd()
                            }
                        })
                    }
                },
                onLoadEnd: function() {
                    this.loading = !1, l(this.LOADING_CLASS, this.container), h(document.body, this.clickEvent, this.requestHandler)
                },
                onChange: function(e) {
                    var t = o(this.OPTION_CLASS, e),
                        n = r(this.IMAGE_CLASS, t).src;
                    s(geByClass(this.SELECTED_IMAGE_CLASS), function() {
                        this.src = n
                    }), d(r("al" + this.SELECTED_IMAGE_CLASS), "href", d(t, "data-href")), this.hide()
                },
                onClick: function(e) {
                    this.setElements(e), geByClass(this.PICKER_ITEM_CLASS, this.picker).length ? this.toggle() : this.getList()
                },
                scrollToSelected: function() {
                    var e = o(this.OPTION_CLASS, a(":checked", this.picker));
                    this.PICKER_MAX_HEIGHT || (this.PICKER_MAX_HEIGHT = parseInt(getStyle(this.picker, "maxHeight"), 10)), e && (this.picker.scrollTop = e.offsetTop - this.PICKER_MAX_HEIGHT / 2 + e.offsetHeight / 2)
                }
            };
        window.replyOwnerPicker = m
    },
    nggH: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i = r(n("bZ/P")),
            a = r(n("9y81"));

        function r(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }

        function o() {
            var e = u(['\n    <div class="', '" ', ">", "</div>\n  "]);
            return o = function() {
                return e
            }, e
        }

        function s() {
            var e = u(['\n    <button class="', '" aria-label="', '" ', "></button>\n  "]);
            return s = function() {
                return e
            }, e
        }

        function l() {
            var e = u(['\n    <button class="', '" ', ">\n      ", "\n    </button>\n  "]);
            return l = function() {
                return e
            }, e
        }

        function c() {
            var e = u(['\n    <div class="', '">\n\n      ', '\n\n      <div class="mailActs__counter"></div>\n\n      <div class="mailActs__buttons">\n        <div class="mailActs__buttonsIn">\n          ', "\n          ", '\n        </div>\n        <div class="mailActs__chevron">\n          <div class="mailActs__chevronIn">\n            ', "\n            ", "\n            ", "\n            ", "\n            ", '\n          </div>\n          <div class="mailActs__chevronMore">\n            <div class="mailActs__chevronMoreIcon" ', '></div>\n            <div class="mailActs__chevronList">\n              ', "\n              ", "\n              ", "\n              ", "\n              ", "\n            </div>\n          </div>\n        </div>\n      </div>\n\n    </div>\n  "]);
            return c = function() {
                return e
            }, e
        }

        function u(e, t) {
            return t || (t = e.slice(0)), Object.freeze(Object.defineProperties(e, {
                raw: {
                    value: Object.freeze(t)
                }
            }))
        }
        var d = function(e) {
            e || (e = {});
            window.lang;
            var t = i.default.onClick("MailActs._onMoreClick"),
                n = (0, a.default)({
                    mix: "mailActs__close",
                    icon: "close12",
                    attrs: i.default.onClick("MailActs._onCloseClick")
                }),
                r = f("reply"),
                o = f("forward"),
                s = h("edit", e),
                l = h("pin", e),
                u = h("important", e),
                d = h("remove", e),
                A = h("spam", e),
                m = p("edit", e),
                _ = p("pin", e),
                v = p("important", e),
                g = p("remove", e),
                y = p("spam", e),
                b = i.default.class("mailActs", {
                    canPin: e.canPin,
                    pinned: e.isPinned,
                    important: e.isImportant,
                    isChannel: e.isChannel
                });
            return i.default.html(c(), b, n, r, o, s, l, u, d, A, t, m, _, v, g, y)
        };

        function f(e) {
            var t = window.lang,
                n = i.default.class("mailActs__button", {
                    type: e
                }),
                a = i.default.onClick("MailActs._onButtonClick", e),
                r = "reply" === e ? t.mobile_mail_messages_actions_reply : t.mobile_mail_messages_actions_forward;
            return i.default.html(l(), n, a, r)
        }

        function h(e, t) {
            var n, a = window.lang,
                r = i.default.class("mailActs__icon", {
                    type: e
                }),
                o = i.default.onClick("MailActs._onButtonClick", e),
                l = t.isPinned ? a.mobile_mail_messages_actions_unpin : a.mobile_mail_messages_actions_pin,
                c = t.isImportant ? a.mobile_mail_messages_actions_important_off : a.mobile_mail_messages_actions_important;
            switch (e) {
                case "edit":
                    n = a.mobile_mail_messages_actions_edit;
                    break;
                case "pin":
                    n = l;
                    break;
                case "important":
                    n = c;
                    break;
                case "remove":
                    n = a.mobile_mail_messages_actions_delete;
                    break;
                case "spam":
                    n = a.mobile_mail_messages_actions_spam
            }
            return i.default.html(s(), r, n, o)
        }

        function p(e, t) {
            var n, a = window.lang,
                r = i.default.class("mailActs__chevronListItem", {
                    type: e
                }),
                s = i.default.onClick("MailActs._onButtonClick", e),
                l = t.isPinned ? a.mobile_mail_messages_actions_unpin : a.mobile_mail_messages_actions_pin,
                c = t.isImportant ? a.mobile_mail_messages_actions_important_off : a.mobile_mail_messages_actions_important;
            switch (e) {
                case "edit":
                    n = a.mobile_mail_messages_actions_edit;
                    break;
                case "pin":
                    n = l;
                    break;
                case "important":
                    n = c;
                    break;
                case "remove":
                    n = a.mobile_mail_messages_actions_delete;
                    break;
                case "spam":
                    n = a.mobile_mail_messages_actions_spam
            }
            return i.default.html(o(), r, s, n)
        }
        t.default = d
    },
    nj7l: function(e, t, n) {
        "use strict";
        var i = n("UxAg");
        onDOMReady(function() {
            addEvent(window, "click", function(e) {
                if ((0, i.$$)(".Tooltip").forEach(function(e) {
                        return re(e)
                    }), e.target && e.target.classList.contains("Tooltip") || e.target.closest(".Tooltip")) {
                    var t = e.target.getAttribute("tooltip-id");
                    ajax.post("/?act=tooltip_click&id=".concat(t))
                }
            })
        })
    },
    nlPs: function(e, t, n) {
        "use strict";
        var i = r(n("9qLg")),
            a = r(n("WwUR"));

        function r(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        window.isNewLongpoll ? window.im = a.default : window.im = i.default
    },
    "o+0k": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i = r(n("z9sQ")),
            a = r(n("1IPy"));

        function r(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        var o = function(e, t) {
            return {
                tag: "label",
                class: i.default.class("VotingForm__bcg", {
                    light: "default" === t.type
                }),
                inner: [{
                    class: "VotingForm__bcgPreview",
                    inner: [(0, a.default)({
                        bcg: t,
                        photoHeight: 48
                    }), {
                        class: i.default.class("VotingForm__bcgTextGhost", {
                            0: !0
                        })
                    }, {
                        class: i.default.class("VotingForm__bcgTextGhost", {
                            1: !0
                        })
                    }, {
                        class: i.default.class("VotingForm__bcgTextGhost", {
                            2: !0
                        })
                    }, {
                        class: i.default.class("VotingForm__bcgTextGhost", {
                            3: !0
                        })
                    }, {
                        class: i.default.class("VotingForm__bcgTextGhost", {
                            4: !0
                        })
                    }, {
                        class: i.default.class("VotingForm__bcgTextGhost", {
                            5: !0
                        })
                    }]
                }, {
                    tag: "input",
                    class: "VotingForm__bcgRadio",
                    type: "radio",
                    name: e,
                    checked: t.checked ? "checked" : null,
                    value: t.id
                }, {
                    class: "VotingForm__bcgControl"
                }]
            }
        };
        t.default = o
    },
    o3gn: function(e, t, n) {
        "use strict";
        var i = n("d8Vu"),
            a = n("UuS6"),
            r = n("sljx");
        window.Stickers = i.Stickers, window.StickersAnimation = a.StickersAnimation, window.StickersSettings = r.StickersSettings
    },
    oHC7: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i = d(n("TYsd")),
            a = d(n("j80l")),
            r = d(n("+cqQ")),
            o = d(n("3Wjs")),
            s = n("jk6M"),
            l = n("fntf"),
            c = d(n("29dZ")),
            u = d(n("Y6JH"));

        function d(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }

        function f(e, t) {
            return function(e) {
                if (Array.isArray(e)) return e
            }(e) || function(e, t) {
                if (!(Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e))) return;
                var n = [],
                    i = !0,
                    a = !1,
                    r = void 0;
                try {
                    for (var o, s = e[Symbol.iterator](); !(i = (o = s.next()).done) && (n.push(o.value), !t || n.length !== t); i = !0);
                } catch (e) {
                    a = !0, r = e
                } finally {
                    try {
                        i || null == s.return || s.return()
                    } finally {
                        if (a) throw r
                    }
                }
                return n
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance")
            }()
        }

        function h(e, t, n) {
            return t in e ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = n, e
        }

        function p(e, t) {
            for (var n = 0; n < t.length; n++) {
                var i = t[n];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        }
        var A = function() {
            function e(t, n, i, a) {
                if (function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, e), this.store = Stories.getStore(), this.state = {
                        authorIndex: i,
                        storyIndex: a
                    }, this.date = t.date, this.preview = t.preview_url, this.type = t.type, this.photo_url = t.photo_url, this.video_url = t.video_url, this.first_frame = t.first_frame, this.videoSupport = !!window.HTMLVideoElement, this.views = t.views, this.answers = t.answers, this.link = t.link, this.unread = t.unread, this.raw_id = t.raw_id, this.is_expired = t.is_expired, this.isAds = t.isAds, this.isPromo = t.isPromo, this.promoCaption = t.promoCaption, this.track_code = t.track_code, this.can_comment = t.can_comment, this.can_share = t.can_share, this.can_remove = t.can_remove, this.can_report = !t.can_manage, this.can_ask = t.can_ask, this.can_ask_anonymous = t.can_ask_anonymous, this.isNewQuestions = t.isNewQuestions, this.name = n.name, this.firstName = n.firstName, this.avatar = n.photo, this.href = n.href, this.prometheus = n.verify.includes("page_top_author"), this.verified = n.verify.includes("page_verified"), this.authorIcon = this.prometheus || this.verified, this.content = null, this.paused = !0, this.stats = t.stats, this.narrative = t.narrative, this.isNarrativeSlide = this.narrative && !this.narrative.is_cover, this.isNarrativeMetaStory = !!t.isNarrativeMetaStory, this.isOpenNarrativeFromFeed = !!t.isOpenNarrativeFromFeed, this.onAutoPlay = (0, r.default)(), this.onDestroy = (0, r.default)(), this.onVideoBuffering = (0, r.default)(), this.onVideoData = (0, r.default)(), this.onVideoPlayEvent = (0, r.default)(), this.onVideoPauseEvent = (0, r.default)(), this.onVideoEndedEvent = (0, r.default)(), this.reply = t.reply_to, this.reply) {
                    var s = this.reply.list;
                    this.reply = extend(this.reply, {
                        onclick: 'Stories.openReplies("'.concat(s, '");')
                    })
                }
                this.duration = 8e3, this.views && (this.viewsText = this.views), this.answers && (this.answersText = this.answers.count), this.bookmark_add_hash = t.bookmark_add_hash, this.is_bookmarked = t.is_bookmarked, this.clickable_stickers = t.clickable_stickers, this.stickers = [], this.narrative && (this.bookmark_add_hash = this.narrative.bookmark_hash, this.is_bookmarked = this.narrative.is_bookmarked), this.StoryMenu = new o.default(extend(t, {
                    can_report: this.can_report,
                    can_bookmark: !!this.bookmark_add_hash,
                    is_bookmarked: this.is_bookmarked
                })), this.needMenu = this.StoryMenu.needMenu(), this.storyMenuHTML = this.StoryMenu.render()
            }
            var t, n, d;
            return t = e, (n = [{
                key: "update",
                value: function(e) {
                    var t = Stories.getCurrentStoryIndex(),
                        n = Stories.getCurrentAuthorIndex();
                    this.state.authorIndex === n && this.state.storyIndex === t ? (this.loadContent(e), Stories.setHistory(this.raw_id)) : (this.destroy(), val(e, ""))
                }
            }, {
                key: "getDuration",
                value: function() {
                    return this.duration
                }
            }, {
                key: "getPreview",
                value: function() {
                    return this.preview
                }
            }, {
                key: "hasLink",
                value: function() {
                    return !!this.link
                }
            }, {
                key: "getLinkUrl",
                value: function() {
                    var e = this.link.url,
                        t = Stories.getFrom(!1);
                    return a.default.make(e, {
                        from: t
                    })
                }
            }, {
                key: "loadContent",
                value: function(e) {
                    var t = window.lang;
                    if (this.is_expired) {
                        Stories.hideLoading();
                        var n = {
                            class: "Story__content_expired",
                            inner: i.default.wrap(t.mobile_stories_error_expired)
                        };
                        val(e, i.default.html(n)), Stories.restoreAudio()
                    } else if ("photo" === this.type) {
                        this.isNarrativeMetaStory || Stories.showLoading(), this.img = new Image, this.onLoadImgBind = this.onLoadImg.bind(this), this.onLoadStory = this.onLoadStory.bind(this), addEvent(this.img, "load", this.onLoadImgBind), addEvent(this.img, "load", this.onLoadStory), this.img.src = this.photo_url;
                        var a = {
                            style: "background-image: url(".concat(this.photo_url, ")"),
                            class: "Story__content_image"
                        };
                        this.narrative && this.narrative.is_cover ? val(e, i.default.html(this.renderNarrativeCover())) : this.isNarrativeMetaStory ? (val(e, ""), e && e.parentNode.insertAdjacentHTML("beforeend", i.default.html(this.renderNarrativeMetaStory())), addEvent(geByClass1("NarrativeMeta__recommendations"), "scroll wheel touchmove", this.handleRecommendationsScroll.bind(this))) : val(e, i.default.html(a)), Stories.restoreAudio()
                    } else if ("video" === this.type)
                        if (this.videoSupport && Stories.isAutoplaySupport()) Stories.showLoading(), this.video = ce("video", {
                            src: this.video_url,
                            className: "Story__content_video"
                        }), attr(this.video, "autoplay", "autoplay"), attr(this.video, "playsinline", "playsinline"), attr(this.video, "webkit-playsinline", "webkit-playsinline"), attr(this.video, "muted", "muted"), this.onCanPlayBind = this.onCanPlay.bind(this), this.onVideoWaitingBind = this.onVideoBuffer.bind(this), this.onVideoLoadedDataBind = this.onVideoLoadedData.bind(this), this.onVideoPlayBind = this.onVideoPlay.bind(this), this.onVideoPauseBind = this.onVideoPause.bind(this), this.onVideoEndedBind = this.onVideoEnded.bind(this), this.onLoadStory = this.onLoadStory.bind(this), addEvent(this.video, "ended", this.onVideoEndedBind), addEvent(this.video, "play", this.onVideoPlayBind), addEvent(this.video, "pause", this.onVideoPauseBind), addEvent(this.video, "canplaythrough", this.onCanPlayBind), addEvent(this.video, "waiting", this.onVideoWaitingBind), addEvent(this.video, "loadedmetadata", this.onVideoLoadedDataBind), addEvent(this.video, "canplaythrough", this.onLoadStory), append(this.video, e), Stories.pauseAudio();
                        else {
                            var r = Stories.getAuthorElems()[this.state.authorIndex];
                            this.renderError(r, e, t.mobile_stories_inline_video_error)
                        }
                    this.markSeen()
                }
            }, {
                key: "onLoadStory",
                value: function() {
                    if (this.clickable_stickers) {
                        var e = geByClass1("Story", this.authorElem);
                        e && this.renderStickersLayer.call(this, e)
                    }
                    this._loadingStartTime && (this.loadingTime = Date.now() - this._loadingStartTime, Stories._sendViewerStartTime(this.raw_id, this.loadingTime), this._loadingStartTime = 0, Stories.sendAnalyticsEvent("view_story", {
                        preloading_duration: this.loadingTime
                    }))
                }
            }, {
                key: "markSeen",
                value: function() {
                    var e = this.raw_id;
                    this.track_code && (e += "_" + this.track_code), this.store.readedStories[e] = !0, this.store.authors[this.state.authorIndex].items[this.state.storyIndex].unread = !1
                }
            }, {
                key: "pause",
                value: function() {
                    this.paused || (this.paused = !0, this.video && this.video.pause())
                }
            }, {
                key: "play",
                value: function() {
                    this.paused && (this.paused = !1, this.video && this.video.play())
                }
            }, {
                key: "onVideoEnded",
                value: function() {
                    this.onVideoEndedEvent()
                }
            }, {
                key: "onVideoPlay",
                value: function() {
                    this.onVideoPlayEvent()
                }
            }, {
                key: "onVideoPause",
                value: function() {
                    this.onVideoPauseEvent()
                }
            }, {
                key: "onLoadImg",
                value: function() {
                    Stories.hideLoading(), this.onVideoData({
                        paused: this.paused,
                        authorIndex: this.state.authorIndex,
                        storyIndex: this.state.storyIndex
                    })
                }
            }, {
                key: "onVideoBuffer",
                value: function() {
                    this.onVideoBuffering()
                }
            }, {
                key: "onVideoLoadedData",
                value: function() {
                    0 === this.video.duration ? this.duration = 16e3 : this.duration = 1e3 * this.video.duration + 100, this.onVideoData({
                        paused: this.paused,
                        authorIndex: this.state.authorIndex,
                        storyIndex: this.state.storyIndex
                    })
                }
            }, {
                key: "onCanPlay",
                value: function() {
                    Stories.hideLoading(), this.onAutoPlay({
                        paused: this.paused,
                        authorIndex: this.state.authorIndex,
                        storyIndex: this.state.storyIndex
                    }), this.store.isStopped && this.video.pause()
                }
            }, {
                key: "getType",
                value: function() {
                    return this.type
                }
            }, {
                key: "getVideoState",
                value: function() {
                    return this.video ? this.video.readyState : 0
                }
            }, {
                key: "getVideo",
                value: function() {
                    if (this.video) return this.video
                }
            }, {
                key: "renderError",
                value: function(e, t, n) {
                    var a = this,
                        r = {
                            class: "Story__content_expired",
                            inner: i.default.wrap(n)
                        };
                    val(t, i.default.html(r)), Stories.hideLoading(), this.type = "broken", addClass(e, l.ERROR_CLASS), requestAnimationFrame(function() {
                        a.onVideoData({
                            paused: a.paused,
                            authorIndex: a.state.authorIndex,
                            storyIndex: a.state.storyIndex
                        })
                    })
                }
            }, {
                key: "render",
                value: function() {
                    var e, t, n = window,
                        a = n.lang,
                        r = n.winToUtf;
                    addEvent(window, "resize", this._onResizeHandle.bind(this));
                    var o = s.isTouch ? "ontouchstart" : "onmousedown",
                        l = s.isTouch ? "ontouchend" : "onmouseup";
                    return this._onLoadingStart(), i.default.html({
                        class: "Story",
                        inner: [{
                            class: "Story__header",
                            inner: [this.reply ? {
                                class: "Story__reply",
                                inner: this.reply.is_deleted || this.reply.is_private || this.reply.is_expired ? {
                                    class: "Story__replyDeleted",
                                    inner: {
                                        class: "Story__replyDeletedContainer",
                                        inner: [{
                                            class: Bem.class("Story__icon", {
                                                deleted: this.reply.is_deleted,
                                                private: this.reply.is_private || this.reply.is_expired
                                            })
                                        }, {
                                            class: "Story__replyDeletedTitle",
                                            inner: this.reply.is_deleted ? a.mobile_stories_reply_deleted_title : this.reply.is_expired ? a.mobile_stories_reply_expired_title : a.mobile_stories_reply_private_title
                                        }]
                                    }
                                } : {
                                    class: "Story__replyPreview",
                                    onclick: this.reply.onclick,
                                    style: "background-image: url(".concat(this.reply.photo_url, ")"),
                                    inner: {
                                        class: "Story__replyTitle",
                                        inner: r(this.reply.name)
                                    }
                                }
                            } : null, {
                                class: "Story__table",
                                inner: [{
                                    class: "Story__cell Story__cell_header",
                                    inner: {
                                        class: "Story__table Story__link al_empty",
                                        href: this.href,
                                        onclick: "return Stories.clickAuthor();",
                                        "data-skiponclick": 1,
                                        inner: [this.isNarrativeSlide ? null : {
                                            class: "Story__cell Story__cell_avatar",
                                            inner: {
                                                class: "Story__avatar",
                                                src: this.avatar,
                                                tag: "img"
                                            }
                                        }, {
                                            class: "Story__cell Story__cell_title",
                                            inner: [{
                                                class: "Story__title",
                                                inner: [{
                                                    class: "Story__name",
                                                    inner: this.isNarrativeSlide ? r(this.narrative.title) : r(this.name)
                                                }, this.authorIcon ? {
                                                    class: "Story__verified",
                                                    inner: {
                                                        class: Bem.class("Story__icon", {
                                                            verified: this.verified,
                                                            prometheus: this.prometheus
                                                        })
                                                    }
                                                } : null]
                                            }, this.isNarrativeSlide ? {
                                                class: "Story__date",
                                                inner: "".concat(this.name, "  ").concat(a.global_type_narrative)
                                            } : {
                                                class: "Story__date",
                                                inner: this.isPromo ? this.promoCaption : this.isAds ? a.mobile_stories_is_promo_title : this.date
                                            }]
                                        }]
                                    }
                                }, {
                                    class: "Story__cell Story__cell_close",
                                    onclick: "return Stories.clickClose();",
                                    inner: {
                                        class: "Story__close",
                                        inner: {
                                            class: "Story__icon Story__icon_close"
                                        }
                                    }
                                }]
                            }]
                        }, {
                            class: "Story__footer",
                            inner: this.isNarrativeMetaStory || this.is_expired ? null : {
                                class: "Story__table",
                                inner: [this.isNarrativeSlide ? null : {
                                    class: Bem.class("Story__cell", {
                                        empty: !!this.link && !this.answers && !this.views,
                                        hidden: !this.answers && !this.views && !this.link,
                                        stats: !0
                                    }),
                                    inner: this.answers || this.views ? {
                                        class: Bem.class("Story__stats", {
                                            new_questions: this.isNewQuestions
                                        }),
                                        inner: [this.answers ? {
                                            class: "Story__replies Story__cell",
                                            onclick: 'Stories.showViews("'.concat(this.raw_id, '")'),
                                            inner: [{
                                                class: "Story__cell",
                                                inner: {
                                                    class: "Story__icon Story__icon_replies Story__repliesIcon"
                                                }
                                            }, {
                                                class: "Story__cell Story__repliesText",
                                                inner: this.link ? this.answers.count : this.answersText
                                            }]
                                        } : null, this.views ? {
                                            class: "Story__views Story__cell",
                                            onclick: 'Stories.showViews("'.concat(this.raw_id, '")'),
                                            inner: [{
                                                class: "Story__cell",
                                                inner: {
                                                    class: "Story__icon Story__icon_views Story__viewsIcon"
                                                }
                                            }, {
                                                class: "Story__cell Story__viewsText",
                                                inner: this.link ? this.views : this.viewsText
                                            }]
                                        } : null]
                                    } : null
                                }, this.link && this.link.text ? {
                                    class: "Story__cell Story__cell_moreLink",
                                    inner: {
                                        class: "Story__moreLink",
                                        inner: [{
                                            class: "Story__moreLinkText",
                                            inner: r(this.link.text)
                                        }, {
                                            class: "Story__icon Story__icon_topArrow"
                                        }],
                                        href: this.getLinkUrl(),
                                        onclick: "Stories.openCustomButton(event, this); return;",
                                        "data-skiponclick": 1
                                    }
                                } : this.can_comment ? {
                                    class: "Story__cell Story__cell_comment",
                                    inner: {
                                        class: "Story__commentButton",
                                        inner: {
                                            class: "Story__commentButtonText",
                                            inner: a.mobile_stories_comment_placeholder
                                        },
                                        onclick: "Stories.showComment();"
                                    }
                                } : null, this.can_share ? {
                                    class: "Story__cell Story__cell_share",
                                    inner: {
                                        class: "Story__share",
                                        onclick: 'Stories.share("'.concat(this.narrative ? this.narrative.raw_id : this.raw_id, '", ').concat(!!this.narrative, ");"),
                                        inner: {
                                            class: "Story__icon Story__icon_share",
                                            "data-skiponclick": 1
                                        }
                                    }
                                } : null, this.needMenu ? {
                                    class: "Story__cell Story__cell_menu",
                                    inner: i.default.wrap(this.storyMenuHTML)
                                } : null]
                            }
                        }, this.can_comment ? {
                            class: "Story__form Story__form_comment",
                            inner: [(e = {
                                class: "Story__formOverlay"
                            }, h(e, o, "cancelEvent(event);"), h(e, l, "cancelEvent(event);"), h(e, "ontouchmove", "cancelEvent(event);"), e), {
                                class: "Story__formPopout",
                                ontouchmove: "cancelEvent(event);",
                                onmousedown: "event.stopPropagation();",
                                ontouchend: "event.stopPropagation();",
                                inner: [{
                                    class: "Story__formHeader",
                                    inner: this.isNarrativeSlide ? a.mobile_stories_comment_narrative_title : a.mobile_stories_comment_title
                                }, {
                                    class: "Story__formBody",
                                    inner: {
                                        class: "Story__formTextarea Story__commentTextarea",
                                        tag: "textarea",
                                        placeholder: a.mobile_stories_comment_textarea,
                                        oninput: "Stories.onInputComment(this);"
                                    }
                                }, {
                                    class: "Story__formFooter",
                                    inner: [{
                                        class: "Story__formSend Story__commentSend",
                                        onclick: "Stories.sendComment();",
                                        inner: a.mobile_stories_comment_ok
                                    }, {
                                        class: "Story__formCancel",
                                        inner: a.mobile_stories_comment_cancel,
                                        onclick: "Stories.hideComment();"
                                    }]
                                }]
                            }]
                        } : null, this.can_ask ? this.renderAskForm() : null, (t = {
                            class: "Story__overlay"
                        }, h(t, o, "cancelEvent(event);"), h(t, l, "cancelEvent(event); Stories.hideMenu();"), h(t, "ontouchmove", "cancelEvent(event);"), t), this.clickable_stickers ? {
                            class: "Story__stickers"
                        } : null, {
                            class: "Story__body",
                            style: "background-image: url(".concat(this.preview, ")")
                        }]
                    })
                }
            }, {
                key: "renderAskForm",
                value: function() {
                    var e, t = window.lang,
                        n = s.isTouch ? "ontouchstart" : "onmousedown",
                        i = s.isTouch ? "ontouchend" : "onmouseup",
                        a = (t.mobile_stories_ask_question_anonymous_info || "").replace("{name}", this.firstName);
                    return {
                        class: "Story__form Story__form_question",
                        onClick: "Stories.toggleQuestionTooltip(event, true);",
                        inner: [(e = {
                            class: "Story__formOverlay"
                        }, h(e, n, "cancelEvent(event);"), h(e, i, "Stories.toggleQuestionTooltip(event, true);"), h(e, "ontouchmove", "cancelEvent(event);"), e), {
                            class: "Story__formPopout",
                            ontouchmove: "cancelEvent(event);",
                            onmousedown: "event.stopPropagation();",
                            ontouchend: "event.stopPropagation();",
                            inner: [{
                                class: "Story__formHeader",
                                inner: [this.can_ask_anonymous ? {
                                    class: "Story__formHeaderInner",
                                    inner: [{
                                        tag: "button",
                                        class: "Btn Btn_theme_none Story__formHeaderBtn",
                                        inner: t.mobile_stories_ask_question_own_name,
                                        onclick: "Stories.changeAskAnonymous(event);",
                                        "data-anonymous": 0
                                    }, {
                                        class: "QuestionSupport Icon Icon_menu_support",
                                        onclick: "Stories.toggleQuestionTooltip(event);",
                                        inner: {
                                            class: "QuestionSupport__tooltip",
                                            inner: a
                                        }
                                    }]
                                } : {
                                    inner: t.mobile_stories_ask_question_own_name
                                }]
                            }, {
                                class: "Story__formBody",
                                inner: {
                                    class: "Story__formTextarea Story__questionTextarea",
                                    tag: "textarea",
                                    placeholder: t.mobile_stories_ask_question_placeholder,
                                    oninput: "Stories.onInputQuestion(this);",
                                    maxlength: 80
                                }
                            }, {
                                class: "Story__formFooter",
                                inner: [(0, c.default)({
                                    class: "Story__questionSend",
                                    theme: "regular",
                                    inner: t.mobile_stories_ask_question_ok,
                                    on_click: ["Stories.sendQuestion"],
                                    disabled: !0
                                }), (0, c.default)({
                                    class: "Story__questionSend",
                                    theme: "link",
                                    inner: t.mobile_stories_ask_question_cancel,
                                    on_click: ["Stories.hideAskQuestion"]
                                })]
                            }]
                        }]
                    }
                }
            }, {
                key: "_getStickerStyle",
                value: function(e, t) {
                    var n = this.clickable_stickers,
                        i = n.original_width,
                        a = n.original_height,
                        r = e.top,
                        o = e.left,
                        s = e.width,
                        l = e.height,
                        c = e.rotate,
                        u = f(getSize(t), 2),
                        d = u[0],
                        h = u[1],
                        p = d,
                        A = h;
                    return h / d > 1.77 ? p = i * h / a : A = a * d / i, "\n      top: ".concat(r * A - (A - h) / 2, "px;\n      left: ").concat(o * p - (p - d) / 2, "px;\n      width: ").concat(s * p, "px;\n      height: ").concat(l * A, "px;\n      transform: rotate(").concat(c, "deg);\n    ")
                }
            }, {
                key: "renderStickersLayer",
                value: function(e) {
                    var t = this,
                        n = geByClass1("Story__stickers", e),
                        a = (isObject(this.clickable_stickers) ? this.clickable_stickers : {}).stickers;
                    n && (n.innerHTML = ""), a.forEach(function(a) {
                        var r, o = a.type,
                            c = a.style,
                            u = void 0 === c ? "" : c;
                        if ([l.StickerTypes.hashtag, l.StickerTypes.mention, l.StickerTypes.question, l.StickerTypes.place, l.StickerTypes.music, l.StickerTypes.marketItem].includes(o)) {
                            var d = s.isTouch ? "ontouchstart" : "onmousedown",
                                f = s.isTouch ? "ontouchend" : "onmouseup",
                                p = i.default.elem((h(r = {
                                    class: "Story__sticker"
                                }, d, "Stories.onTouchStart(event);"), h(r, f, "Stories.onTouchEnd(event);"), h(r, "ontouchcancel", "Stories.onTouchEnd(event);"), h(r, "style", "".concat(t._getStickerStyle(a, e))), r));
                            switch (domData(p, "type", o), domData(p, "style", u), o) {
                                case l.StickerTypes.hashtag:
                                    domData(p, "hashtag", a.hashtag);
                                    break;
                                case l.StickerTypes.mention:
                                    domData(p, "mention", a.mention);
                                    break;
                                case l.StickerTypes.question:
                                    domData(p, "question", a.question);
                                    break;
                                case l.StickerTypes.place:
                                    if (t.store.list === "place" + a.placeId) return;
                                    domData(p, "place_id", a.placeId);
                                    break;
                                case l.StickerTypes.music:
                                    var A = Stories.getCurrentStory(),
                                        m = a.audioId,
                                        _ = a.audioData,
                                        v = a.audioRestriction;
                                    if (v) {
                                        var g = t.getVideo();
                                        if (g && A.needMute) {
                                            var y = Stories.getAuthorElems()[t.state.authorIndex];
                                            removeClass(y, l.VIDEO_MUTED_CLASS), g.muted = !0
                                        }
                                        n.appendChild(i.default.elem({
                                            class: "StoryRestriction",
                                            inner: {
                                                class: "StoryRestriction__inner",
                                                inner: [{
                                                    class: "StoryRestriction__title",
                                                    inner: v.title
                                                }, v.buttonUrl ? {
                                                    class: "StoryRestriction__link",
                                                    href: v.buttonUrl,
                                                    inner: v.buttonText
                                                } : null]
                                            }
                                        })), domData(p, "disabled", 1)
                                    }
                                    addClass(p, "audio_item"), domData(p, "id", m), domData(p, "audio", _);
                                    try {
                                        domData(p, "track-code", JSON.parse(_).track_code)
                                    } catch (e) {}
                                    p.setAttribute("id", "audio".concat(m));
                                    break;
                                case l.StickerTypes.marketItem:
                                    domData(p, "photoUrl", a.photoUrl), domData(p, "link", a.link), a.isRestricted && domData(p, "isRestricted", "isRestricted")
                            }
                            n.appendChild(p), t.stickers.push(p)
                        }
                    })
                }
            }, {
                key: "_onResizeHandle",
                value: function() {
                    var e = this,
                        t = geByClass1("Story", this.authorElem),
                        n = (isObject(this.clickable_stickers) ? this.clickable_stickers : {}).stickers;
                    isArray(n) && n.forEach(function(n, i) {
                        e.stickers[i] && setStyle(e.stickers[i], e._getStickerStyle(n, t))
                    })
                }
            }, {
                key: "_createStickerLink",
                value: function(e) {
                    var t = intval(domData(e, "type")),
                        n = intval(domData(e, "disabled"));
                    if (t && !n) {
                        var a, r, o, s = "a",
                            c = !0,
                            d = function() {},
                            f = {
                                type: t,
                                style: domData(e, "style")
                            };
                        switch (t) {
                            case l.StickerTypes.hashtag:
                                var h = domData(e, "hashtag") || "",
                                    p = h.replace("#", "%23");
                                a = "/feed?section=search&q=".concat(p), r = lang.mobile_stories_show_hashtag_link, o = "search", f.text = h;
                                break;
                            case l.StickerTypes.mention:
                                var A = (domData(e, "mention") || "").slice(1, -1).split("|");
                                a = "/".concat(A[0]), r = A[0].startsWith("id") ? lang.mobile_stories_go_to_profile : lang.mobile_stories_go_to_group, o = "profile";
                                break;
                            case l.StickerTypes.place:
                                var m = domData(e, "place_id"),
                                    _ = Stories.getFrom();
                                a = "/place" + m, r = lang.mobile_stories_go_to_place, this.store.list.includes("place") ? c = !0 : (a += "?from=" + _, d = function() {
                                    s = "div", c = !1, Stories._hideTooltip(!0), Stories.showLoading(), nav.go(a)
                                }), o = "place";
                                break;
                            case l.StickerTypes.music:
                                s = "div", r = lang.mobile_stories_music_more, d = function() {
                                    var t = domData(e, "id"),
                                        n = domData(e, "audio");
                                    Stories.openMusicStickerActions(t, n)
                                };
                                break;
                            case l.StickerTypes.marketItem:
                                var v = domData(e, "photoUrl"),
                                    g = !!domData(e, "isRestricted");
                                g && (d = function(e) {
                                    e.preventDefault(), window.AlertBox(getLang("mobile_stories_market_access_error_text"), getLang("mobile_stories_market_access_error_title"))
                                }), r = i.default.html([v && !g ? {
                                    class: "Stories__marketItemThumb",
                                    tag: "img",
                                    src: v
                                } : {
                                    class: "Stories__marketItemThumb Stories__marketItemThumb--stub",
                                    inner: (0, u.default)("market", "item_stub")
                                }, {
                                    class: "Stories__marketItemText",
                                    tag: "span",
                                    inner: getLang("mobile_stories_market_item_more")
                                }]), a = domData(e, "link")
                        }
                        return Stories._requestStickerStat("click", f), Stories.sendAnalyticsEvent("click_on_clickable_sticker"), ce(s, {
                            href: "a" === s ? a : null,
                            target: c ? "_blank" : null,
                            innerHTML: r,
                            className: "Stories__tooltip-link",
                            onclick: function(e) {
                                d && d(e), Stories._requestStickerStat(o, f)
                            }
                        })
                    }
                }
            }, {
                key: "_onLoadingStart",
                value: function() {
                    this._loadingStartTime = new Date
                }
            }, {
                key: "renderNarrativeCover",
                value: function() {
                    var e = this.photo_url || this.first_frame,
                        t = this.narrative.views ? "  ".concat(this.narrative.views) : "";
                    return {
                        class: "NarrativeCover",
                        inner: [{
                            style: "background-image: url(".concat(e, ")"),
                            class: "NarrativeCover__image",
                            onclick: "Stories._showTooltip(event, Stories._createNarrativeTooltipLink());"
                        }, {
                            class: "NarrativeCover__views",
                            inner: [{
                                tag: "span",
                                class: "NarrativeCover__label",
                                inner: "".concat(lang.global_type_narrative)
                            }, {
                                tag: "span",
                                inner: "".concat(t)
                            }]
                        }, {
                            class: "NarrativeCover__title",
                            innerHTML: "".concat(this.narrative.title)
                        }, {
                            class: "NarrativeCover__author",
                            inner: "".concat(this.narrative.owner_name)
                        }]
                    }
                }
            }, {
                key: "renderNarrativeMetaStory",
                value: function() {
                    var e = this.store.list + "_recommendations",
                        t = window.store.stories[e] && window.store.stories[e].authors,
                        n = Math.max(document.documentElement.clientHeight, window.innerHeight || 0),
                        i = [];
                    return this.store.list.match(/narrative-?\d+_\d+$/) && t && (this.coverItems = t.map(function(e) {
                        return e.narrative_cover
                    }), this.coverCount = this.coverItems ? this.coverItems.length : 0, this.coverRowsCount = Math.ceil(this.coverCount / 3), this.elemOffset = 0, 1 === this.coverRowsCount ? this.elemOffset = 26.4 : this.coverRowsCount > 1 && (this.elemOffset = 26.4 * 1.5), this.scrollOffset = n / 100 * this.elemOffset + 53, this.coverItems.forEach(function(n) {
                        var a = {
                            tag: "span",
                            class: "NarrativePreview",
                            style: "background-image: url(".concat(n.preview_url, ")"),
                            onclick: 'Stories.openNarrative("'.concat(n.raw_id, "/").concat(e, '", { narrativeId: ').concat(n.narrative.id, ", source: 'narrative_recommendations' })"),
                            inner: [{
                                class: "NarrativePreview__inner",
                                style: "background-image: url(".concat(n.photo_url, ")"),
                                inner: [{
                                    tag: "a",
                                    href: t[0].author.href,
                                    class: "NarrativePreview__author",
                                    style: "background-image: url(".concat(t[0].author.photo, ")")
                                }, {
                                    tag: "span",
                                    class: "NarrativePreview__title",
                                    innerHTML: n.narrative.title
                                }]
                            }]
                        };
                        i.push(a)
                    })), {
                        class: "NarrativeMeta",
                        inner: [{
                            class: "NarrativeMeta__buttons",
                            style: "padding-bottom: ".concat(this.elemOffset, "vh"),
                            inner: [{
                                class: "NarrativeMeta__button",
                                onclick: "Stories.narrativeReply();",
                                inner: [{
                                    class: "NarrativeMeta__circle NarrativeMeta__circle_replay"
                                }, {
                                    class: "NarrativeMeta__text",
                                    inner: lang.mobile_narratives_repeat_bottom
                                }]
                            }, this.isOpenNarrativeFromFeed ? {
                                class: "NarrativeMeta__button",
                                onclick: "Stories.narrativeGoToStories();",
                                inner: [{
                                    class: "NarrativeMeta__circle NarrativeMeta__circle_back"
                                }, {
                                    class: "NarrativeMeta__text",
                                    inner: lang.mobile_narratives_back_bottom
                                }]
                            } : null]
                        }, i.length ? {
                            class: "NarrativeMeta__recommendations",
                            inner: [{
                                class: "NarrativeMeta__recommendations-inner",
                                inner: [{
                                    class: "NarrativeMeta__recommendations-title",
                                    inner: lang.mobile_narratives_more_bottom,
                                    style: "margin-top: calc(100vh - ".concat(this.elemOffset, "vh - 70px - 53px)")
                                }, {
                                    class: "NarrativeMeta__recommendations-items",
                                    inner: i
                                }]
                            }]
                        } : null]
                    }
                }
            }, {
                key: "handleRecommendationsScroll",
                value: function() {
                    event.stopPropagation && event.stopPropagation(), event.stopImmediatePropagation && event.stopImmediatePropagation();
                    var e = geByClass1("NarrativeMeta__recommendations"),
                        t = geByClass1("NarrativeMeta__recommendations-inner"),
                        n = Math.min(t.scrollTop / (this.scrollOffset / 100), 70) / 100;
                    setStyle(e, {
                        backgroundColor: "rgba(0, 0, 0, ".concat(n, ")")
                    }), t.scrollTop ? (addClass(e, "scroll"), Stories.pauseStory()) : (Stories.playStory(), removeClass(e, "scroll"))
                }
            }, {
                key: "pauseAudio",
                value: function() {
                    window.Stories.pauseAudio()
                }
            }, {
                key: "destroy",
                value: function() {
                    this.img && removeEvent(this.video, "load", this.onLoadImgBind), this.video && (removeEvent(this.video, "ended", this.onVideoEndedBind), removeEvent(this.video, "play", this.onVideoPlayBind), removeEvent(this.video, "pause", this.onVideoPauseBind), removeEvent(this.video, "canplaythrough", this.onCanPlayBind), removeEvent(this.video, "waiting", this.onVideoWaitingBind), removeEvent(this.video, "loadedmetadata", this.onVideoLoadedDataBind), this.video.src = "", this.video.load()), this.onDestroy(), this.onAutoPlay.off(), this.onDestroy.off(), this.onVideoBuffering.off(), this.onVideoData.off(), this.onVideoPlayEvent.off(), this.onVideoPauseEvent.off(), this.onVideoEndedEvent.off(), Stories._hideTooltip()
                }
            }]) && p(t.prototype, n), d && p(t, d), e
        }();
        t.default = A
    },
    ohv3: function(e, t, n) {
        "use strict";
        n("W9Tc");

        function i(e) {
            return (i = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function a(e, t) {
            return function(e) {
                if (Array.isArray(e)) return e
            }(e) || function(e, t) {
                if (!(Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e))) return;
                var n = [],
                    i = !0,
                    a = !1,
                    r = void 0;
                try {
                    for (var o, s = e[Symbol.iterator](); !(i = (o = s.next()).done) && (n.push(o.value), !t || n.length !== t); i = !0);
                } catch (e) {
                    a = !0, r = e
                } finally {
                    try {
                        i || null == s.return || s.return()
                    } finally {
                        if (a) throw r
                    }
                }
                return n
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance")
            }()
        }
        var r = window,
            o = r.parseRusKeys,
            s = r.parseLatKeys,
            l = r.parseLat,
            c = r.parseCyr,
            u = r.escapeRE,
            d = r.val,
            f = r.onBodyScrollForce,
            h = r.extend,
            p = r.len,
            A = r.removeClass,
            m = r.geByClass1,
            _ = r.addClass,
            v = r.show,
            g = r.hide,
            y = r.alLoadingFix,
            b = r.cancelEvent,
            w = r.elfocus,
            k = r.elblur,
            E = r.ge,
            S = r.addEvent,
            C = r.attr,
            M = r.initAutoScroll,
            P = window.ajax,
            T = {};

        function D(e) {
            var t, n, r;
            D.getQueryREs = _e;
            var x, O, L, B, R, N, j, F, H, V, U = !1,
                z = [],
                W = {},
                q = {},
                $ = {},
                G = {},
                Q = !1,
                Y = null,
                X = null,
                K = null,
                J = 0,
                Z = [],
                ee = null,
                te = null,
                ne = null,
                ie = !1,
                ae = !1,
                re = 10,
                oe = 30,
                se = [],
                le = !0,
                ce = !1,
                ue = !1,
                de = !1,
                fe = 0,
                he = 0,
                pe = !1,
                Ae = {},
                me = e && "au_search_field" === e.field && C(E(e.field), "data-newsearch");

            function _e(e) {
                e = e.replace(/https?:\/\/(m\.)?vk\.com\/([^#]+#\/)?/, "");
                for (var t, n, i, a = ae, r = [e, n = o(e, a) || e, i = s(e, a) || e, l(n), c(i)], d = {}, f = [], h = 0, p = r.length; h < p; h++) r[h] && !d[r[h]] && (d[r[h]] = !0, t = (t = u(r[h])).replace(/[]/gi, "[]").replace(/(e|yo)/gi, "(?:e|yo)"), f.push(new RegExp("(^|\\s|\\(|>)(" + t + ")", "gi")));
                return f
            }

            function ve(e, n, i, a) {
                if (clearTimeout(X), !i) return X = setTimeout(function() {
                    ve(e, n, !0)
                }, 10), !1;
                var r = d(e) || "";
                if (Y === r && !a) return !1;
                var o, s = "_" + r,
                    l = q[s],
                    c = _e(r);
                if (!me && !l && r.length > 2 && q["_" + r.slice(0, -2)]) {
                    var u = "_" + r.slice(0, -2);
                    q[u] && G[u] && !q[u].length && (!de || de && !$[u]) && (G[s] = !0, l = q[s] = [], de && ($[s] = ""))
                }
                a && (delete G[s], delete q[s], delete $[s]);
                var v = 0;
                if (!l) {
                    l = [];
                    if (I.isCachedPage) v = (m("_si_container", x) || x).childNodes.length;
                    if (!r && z.length)
                        for (var g = J, y = J + Math.min(Math.max(re, v), z.length); g < y; g++) l.push([z[g]]), 0;
                    else {
                        var b = {},
                            w = 0;
                        for (g = 0, y = z.length; g < y; g++) {
                            var k = z[g];
                            if (W[k]) {
                                if (b[k] = !0, (o = ge(c, W[k][0])) && (l.push([k, o]), ++w >= oe)) break;
                                0
                            }
                        }
                        if (w < oe)
                            for (var k in W)
                                if (!b[k] && (o = ge(c, W[k][0]))) {
                                    if (l.push([k, o]), ++w >= oe) break;
                                    0
                                }
                    }
                    G[s] = G[s] || !r && z.length || l.length > 2 * re, G[s] = G[s] || de && l.length > re
                }
                return (G[s] || !le && !de) && !a || N || function e(n, i, a) {
                    var r = me ? 800 : 200;
                    clearTimeout(K);
                    if (!a) return K = setTimeout(function() {
                        e(n, i, !0)
                    }, r), !1;
                    P.post(t, {
                        _ajax: 1,
                        q: i
                    }, {
                        onDone: function(e, t, a) {
                            j && j.apply(null, arguments);
                            for (var r, o = "_" + i, s = q[o] || [], l = {}, c = _e(i), u = 0; u < s.length; u++) l[s[u][0]] = !0;
                            for (var d = 0; d < t.length; d++) {
                                var m = t[d];
                                l[m] || ((r = ge(c, e[m][0])) || ie || !i) && s.push([m, r])
                            }
                            G[o] = !0, q[o] = s, de && ($[o] = a || ""), W = h(e, W), Ae._cache = W, le = !ce || p(W) < ce, Y === i ? (ye(s, $[o]), f()) : delete q[o], le || A("input_loading", n), R && (le = !1, ce = Object.keys(W).length)
                        },
                        onFail: function() {
                            delete q["_" + i], A("input_loading", n)
                        }
                    });
                    m("al_loading", x) || _("input_loading", n)
                }(e, r), q[s] = l, Y = r, ye(l, $[s]), F && F(r), ue && !Y && (fe = Math.max(re, v)), f(), !1
            }

            function ge(e, t) {
                if (!t) return !1;
                "string" != typeof t && (t = t.toString());
                var n = [t],
                    i = /([])/gi; - 1 !== t.search(i) && n.push(t.replace(i, ""));
                for (var a = 0; a < n.length; a++)
                    for (var r = 0, o = e.length; r < o; r++)
                        if (-1 !== n[a].search(e[r])) return e[r];
                return !1
            }

            function ye(e, t) {
                var n = "";
                if (te && x) {
                    var r = Object.keys(se).filter(function(e) {
                        return !!se[e]
                    }).map(function(e) {
                        return e + ""
                    });
                    r.length && "" === Y && (e = e.filter(function(e) {
                        return !r.includes(String(e[0]))
                    }), r.forEach(function(t) {
                        e.unshift([t, !1])
                    }));
                    for (var o = function(t) {
                            var r = a(e[t], 2),
                                o = r[0],
                                s = r[1];
                            if (!W[o]) return "continue";
                            var l = W[o].slice(1);
                            if (s)
                                for (var c in Z) {
                                    var u = Z[c];
                                    l[u] && (l[u] = l[u].replace(s, '$1<em class="found">$2</em>'))
                                }
                            n += te.apply({
                                id: o,
                                q: Y,
                                highlight: function(e) {
                                    if ("string" != typeof e) throw new Error("Highlighting expected string but got ".concat(i(e)));
                                    return e.replace(s, '$1<em class="found">$2</em>')
                                },
                                template: function(e, t) {
                                    var n = this;
                                    return e.replace(/%(\d+)%|#(\d+)#/g, function(e, i, a) {
                                        return a && t[a - 1] ? n.highlight(t[a - 1]) : i && t[i - 1] ? t[i - 1] : ""
                                    })
                                }
                            }, l)
                        }, s = 0; s < e.length; s++) o(s);
                    n || G["_" + Y] || !le && !de || N || (A("input_loading", O), A("_si_container_loading", x), n = Y ? '<div class="al_loading qs_loading">&nbsp;</div>' : '<div id="al_loading"></div>'), !n && ne && (n = ne(Y)), d(x, ee ? ee(n, Y, ue, t) : n + (t || "")), B && (Y ? v(B) : g(B)), !Y && y(), H && H(Y)
                }
            }
            h(this, {
                go: function(e) {
                    return !O || (ve(O, e, !0, !0), O.blur(), b(e), !1)
                },
                redraw: function() {
                    var e = "_" + Y;
                    ye(q[e], $[e]), f()
                },
                clear: function(e, t) {
                    return d(O, ""), t ? w(O) : k(O), ve(O, e, !0), b(e), !1
                },
                blur: function() {
                    k(O)
                },
                toggleAttach: function(e, t) {
                    se[e] = t
                },
                init: function(e) {
                    if (x = E((e = e || {}).container) || null, O = E(e.field) || null, L = E(e.btn) || null, B = E(e.clear_btn) || null, Y = null, !Q || t != e.action || !e.init_once) {
                        q = {}, $ = {}, G = {}, t = e.action || "", U = null !== e.next_from, r = e.next_from, n = e.al_action || t, z = e.top_items || [], W = e._cache || {}, Z = e.hl_fields || [], ee = e.tpl || null, te = e.item_tpl || null, ne = e.null_tpl || null, ie = e.soft_filter || !1, ae = e.need_invalid_keys || !1, re = e.top_len || 10, ce = e.load_limit || !1, j = e.onLoaded || !1, F = e.onFiltered || !1, H = e.onRendered || !1, V = e.onFocusChanged || !1, ue = e.al_need || !1, J = !ue && e.init_offset || 0, de = e.global_search || !1, N = e.no_search_query || !1, R = e.load_once || !1;
                        var i = e.action + e.container;
                        T[i] ? Ae = T[i] : (Ae._cache = W, Ae.top_items = z, T[i] = Ae), I.isCachedPage && (z = Ae.top_items, W = Ae._cache)
                    }
                    var a = null;
                    t && x && O && te && (le = !0 !== t && (!ce || p(W) < ce), S(O, "focus", function(e) {
                        e && e.preventDefault();
                        clearTimeout(a), V && V.call({
                                q: Y
                            }, !0),
                            function t(n) {
                                !n && ve(O, e, !0), a = setTimeout(t, 100)
                            }(!0)
                    }), S(O, "keydown keypress change blur", function(e) {
                        "blur" == e.type && (clearTimeout(a), V && V.call({
                            q: Y
                        }, !1)), ve(O, e, "keydown" != e.type && "keypress" != e.type)
                    }), e._new || L && !C(L, "onclick") && C(L, "onclick", "return qsearch.go(event);"), !ue || Q && e.init_once || (fe = re, he = p(W), M(function() {
                        var e = (m("_si_container", x) || x).childNodes;
                        return e[fe] || e[e.length - 1]
                    }, function() {
                        var e = m("_si_container", x) || x;
                        if (!pe && !Y) {
                            if (U ? !!r : fe + re > he && le) pe = !0, _(e, "_si_container_loading"), P.post(n, {
                                _ajax: 1,
                                offset: he,
                                next_from: r
                            }, {
                                onDone: function(n, i, a) {
                                    r = a, j && j.apply(null, arguments);
                                    var o = p(n);
                                    if (pe = !1, A(e, "_si_container_loading"), ce || (z = z.slice(0, he).concat(i), Ae.top_items = z), he += o, W = h(n, W), Ae._cache = W, le = !0 !== t && (!ce && o || p(W) < ce), !Y) {
                                        fe += re;
                                        for (var s = [], l = 0, c = Math.min(fe, z.length); l < c; l++) s.push([z[l]]);
                                        ye(s, $._), f()
                                    }
                                },
                                onFail: function() {
                                    pe = !1, A(e, "_si_container_loading")
                                }
                            });
                            else if (fe < z.length) {
                                fe += re;
                                for (var i = [], a = 0, o = Math.min(fe, z.length); a < o; a++) i.push([z[a]]);
                                ye(i, $._), f()
                            }
                        }
                    })), !e.skip_init_filter && ve(O, null, !0), Q = !0)
                }
            }), e && this.init(e)
        }
        var I = new D;
        window.QuickSearch = D, window.QuickSearchCache = T, window.qsearch = I
    },
    ok75: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.start = function() {
            i || ((i = new r.default({
                id: "mail_user",
                element: document,
                focusElement: window,
                triggerEvents: "mouseover mousedown keypress touchstart",
                idleTimeout: 15e3
            })).on("unidle", l), i.on("unidle", s));
            a = {}, i.start()
        }, t.stop = function() {
            a = null, i && i.stop()
        }, t.addAction = function(e, t) {
            if (!i) return;
            if (!i.is_idle) return void setTimeout(t, 0);
            a[e] = t
        }, t.flushActions = l, t.onUnidle = void 0;
        var i, a, r = o(n("gF8j"));

        function o(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        var s = (0, o(n("+cqQ")).default)();

        function l() {
            var e = a;
            a = {}, Object.keys(e).forEach(function(t) {
                (0, e[t])()
            })
        }
        t.onUnidle = s
    },
    omrv: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("9y81")) && i.__esModule ? i : {
            default: i
        };
        var r = function(e) {
            var t = e ? e.mix : "";
            return (0, a.default)({
                mix: "".concat(t, " Spinner"),
                icon: "spinner"
            })
        };
        t.default = r
    },
    onYX: function(e, t, n) {
        "use strict";
        var i;
        (i = n("+cqQ")) && i.__esModule;
        var a = "tabs_block",
            r = "mhb_back",
            o = "TopMenu_open",
            s = "TopMenu__switcher_on",
            l = function() {
                return geByClass1(a)
            },
            c = function() {
                return geByClass1(r)
            },
            u = function() {
                return geByClass1("TopMenu__switcher")
            },
            d = function() {
                return geByClass1("tab_item_top")
            },
            f = !0,
            h = 0;

        function p(e) {
            stopEvent(e), preventEvent(e), h = 300, f && (toggleClass(s, u()), "touchstart" === e.type && setTimeout(function() {
                nav.go(d(), null)
            }, 130))
        }

        function A(e) {
            gpeByClass(a, e.target) || gpeByClass(r, e.target) || (stopEvent(e), preventEvent(e), removeClass(o, l()), m())
        }

        function m() {
            removeEvent(window, "touchstart mousedown", A)
        }
        window.TopMenu = {
            onHeaderClick: function(e) {
                if (!f) return;
                var t = l();
                if (stopEvent(e), preventEvent(e), hasClass(o, t)) removeClass(o, t);
                else {
                    var n = c(),
                        i = d();
                    addClass(o, t), geByClass1("_hfixed") && setStyle(t, "max-height", window.innerHeight - 70), append(t, n), addEvent(window, "touchstart mousedown", A), addEvent(i, "touchstart mousedown", p), addEvent(i, "click", function(e) {
                        stopEvent(e), preventEvent(e)
                    }), cur.destroy.push(m), cur.destroy.push(function() {
                        return removeEvent(i, "touchstart mousedown", p)
                    })
                }
            }
        }, nav.onBeforeGo(function() {
            f = !1, setTimeout(function() {
                removeClass(o, l()), h = 0, f = !0
            }, h)
        })
    },
    "p/K1": function(e, t, n) {
        "use strict";
        var i, a = (i = n("wRgB")) && i.__esModule ? i : {
            default: i
        };
        window.landingsSlider = a.default
    },
    p5n7: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("sXaZ")) && i.__esModule ? i : {
            default: i
        };
        n("ll1Q");
        var r = a.default;
        t.default = r, window.TextInput = a.default
    },
    pBF5: function(e, t, n) {
        "use strict";
        var i = n("UxAg"),
            a = d(n("TYsd")),
            r = d(n("z9sQ")),
            o = n("OcsD"),
            s = d(n("+cqQ")),
            l = n("jk6M"),
            c = n("6ng+"),
            u = n("1dTo");

        function d(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }

        function f(e, t) {
            return function(e) {
                if (Array.isArray(e)) return e
            }(e) || function(e, t) {
                if (!(Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e))) return;
                var n = [],
                    i = !0,
                    a = !1,
                    r = void 0;
                try {
                    for (var o, s = e[Symbol.iterator](); !(i = (o = s.next()).done) && (n.push(o.value), !t || n.length !== t); i = !0);
                } catch (e) {
                    a = !0, r = e
                } finally {
                    try {
                        i || null == s.return || s.return()
                    } finally {
                        if (a) throw r
                    }
                }
                return n
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance")
            }()
        }
        var h = window,
            p = h.lsGet,
            A = h.ge,
            m = h.addClass,
            _ = h.removeClass,
            v = h.each,
            g = h.geByClass,
            y = h.hide,
            b = h.show,
            w = h.val,
            k = h.geByClass1,
            E = h.gpeByClass,
            S = h.attr,
            C = h.addEvent,
            M = h.cancelEvent,
            P = h.hasClass,
            T = h.getX,
            D = h.geByTag1,
            I = h.htsc,
            x = h.stripTags,
            O = h.toggleClass,
            L = h.lsSet,
            B = h.geBySel,
            R = h.HTMLAudioElement,
            N = window.ajax,
            j = window.nav,
            F = window.audio,
            H = 1e4,
            V = "ad_placeholder",
            U = "ad_mode",
            z = function() {
                if (!R) return {
                    init: function() {},
                    initAudio: function() {}
                };
                var e = !1,
                    t = "1" == p("audio_time_left"),
                    n = "",
                    d = "",
                    h = "",
                    W = null,
                    q = {},
                    $ = !1,
                    G = !1,
                    Q = !1,
                    Y = [],
                    X = null,
                    K = null,
                    J = !1;

                function Z(e, t) {
                    e && M(e);
                    var n = F.getCurrent(),
                        i = E("_audioPlaylist", t),
                        a = !!n && n.id;
                    if (!a || !k("ai_current", i)) {
                        var r = (i || A("mcont")).$(".audio_item[data-id]");
                        a = r && r.getAttribute("data-id")
                    }
                    a && Se(e, a)
                }

                function ee(e) {
                    if (e && isString(e)) {
                        var t = f(e.split("_"), 4);
                        return t[2] + "_" + t[3]
                    }
                }

                function te(e) {
                    if (e) {
                        $$("#lm_player").forEach(function(e) {
                            b(e)
                        }), $$("#lm_audio").forEach(function(t) {
                            t && (w(k("ai_artist", t), e.performer), w(k("ai_title", t), e.title), S(k("ai_play", t), "style", e.cover_style)), F.isAdsPlaying() && Me(e, !0)
                        });
                        var t = B('.audio_item[data-id="' + e.id + '"]');
                        t && v(t, function(t, n) {
                            pe(n, 0), Ae(n, 0), he(n, ge(0, F.duration())), me(n, F.volume()), m("ai_current", n), F.isAdsPlaying() && Ce(e, !0)
                        })
                    } else $$("#lm_player").forEach(function(e) {
                        y(e)
                    })
                }

                function ne(e) {
                    var t = e.id,
                        n = e.duration;
                    $$("#lm_audio").forEach(function(e) {
                        _("ai_playing", e)
                    });
                    var i = B('.audio_item[data-id="'.concat(t, '"]'));
                    i && (v(i, function(e, t) {
                        he(t, ve(n)), _("ai_playing", t), _("ai_current", t)
                    }), q[t] && delete q[t], F.isAdsPlaying() && Ce(e, !1))
                }

                function ie(e, t, n) {
                    var i = B('.audio_item[data-id="' + e + '"]');
                    if (i.length) {
                        var a = t / n;
                        t <= .01 && n <= 1 && (a = 0), v(i, function(e, i) {
                            se || Ae(i, a), he(i, z.getFormatedTime(t, n))
                        }), t > 1 && (q[e] = 1), ae(e, F.played())
                    }
                }

                function ae(e, t) {
                    (t = Math.round(t) || 0) && !J && (K = {
                        id: e,
                        listenedTime: t
                    }, clearTimeout(W), W = setTimeout(function() {
                        return z.playback(e)
                    }, H))
                }

                function re(e, t) {
                    N.post("/audio", {
                        act: "block_playlist",
                        block_id: e
                    }, {
                        onDone: function(e, n) {
                            e && (F.playlist(e), t && t(e, n))
                        }
                    })
                }

                function oe(e) {
                    var t = E("audios_list", "audio" + e) || E("AudioBlock", "audio" + e),
                        n = g("audio_item", t),
                        i = [],
                        a = !1;
                    v(n, function(t, n) {
                        var r = JSON.parse(domData(n, "audio"));
                        if (!r && !(r = _e(n))) return !0;
                        i.push(r), r.id == e && (a = !0)
                    }), F.playlist(i, {
                        q: S(t, "data-query")
                    }), a && F.play(e)
                }
                F.onPlay(function(e) {
                    var t = F.getCurrent();
                    if (t && F.playing()) {
                        var n = f(t.id.split("_"), 2),
                            i = n[0],
                            a = n[1];
                        N.post("/audio", {
                            act: "start_playback",
                            audio_id: a,
                            owner_id: i,
                            hash: t.action_hash,
                            uuid: F.getDeviceId()
                        })
                    }
                    X !== e && X && z.playback(X);
                    X = e, $$("#lm_audio").forEach(function(e) {
                        m("ai_playing", e)
                    });
                    var r = B('.audio_item[data-id="'.concat(e, '"]'));
                    if (!r) return;
                    v(r, function(e, t) {
                        m("ai_playing", t), m("ai_current", t)
                    }), ae(e, 0);
                    var o = Y[Y.length - 1];
                    o !== e && (ee(o) !== ee(e) && z.onPlaylistChanged(), Y.push(e));
                    Q ? Q = !1 : (G = $, $ = !1, z.onPlay(e))
                }), F.onPause(function(e) {
                    $$("#lm_audio").forEach(function(e) {
                        _("ai_playing", e)
                    });
                    var t = B('.audio_item[data-id="' + e + '"]');
                    if (!t) return;
                    v(t, function(e, t) {
                        _("ai_playing", t), m("ai_current", t)
                    }), ae(e, F.played()), Q || z.onPause(e)
                }), F.onSelect(te), F.onDeselect(ne), F.onProgress(function(e, t, n) {
                    var i = B('.audio_item[data-id="' + e + '"]');
                    F.playing() ? (v(i, function(e, t) {
                        m("ai_playing", t)
                    }), $$("#lm_audio").forEach(function(e) {
                        m("ai_playing", e)
                    })) : (v(i, function(e, t) {
                        _("ai_playing", t)
                    }), $$("#lm_audio").forEach(function(e) {
                        _("ai_playing", e)
                    })), i && v(i, function(e, i) {
                        pe(i, t / n), m("ai_current", i)
                    })
                }), F.onPositionChanged(ie), F.onTimeUpdate(function(e) {
                    z.onProgress(e)
                }), F.onVolumeChanged(function(e, t) {
                    var n = B('.audio_item[data-id="' + e + '"]');
                    n && (v(n, function(e, n) {
                        me(n, t)
                    }), z.onVolume(e, t))
                }), F.onEnded(function(e) {
                    var t = B('.audio_item[data-id="' + e + '"]');
                    t && (v(t, function(e, t) {
                        Ae(t, 1)
                    }), $ = !0, z.onEnded(e))
                }), F.onAdStart(function(e) {
                    Ce(e, !0), Me(e, !0)
                }), F.onAdComplete(function(e) {
                    Ce(e, !1), Me(e, !1), ie(e.id, 0, 0)
                }), F.onNotFoundError(oe), F.onEmptyPlaylistError(oe);
                var se = null,
                    le = null,
                    ce = !1,
                    ue = !1;

                function de(e) {
                    if (se) {
                        var t = E("audio_item", se),
                            n = fe(se, e);
                        e && M(e);
                        var i = B('.audio_item[data-id="' + S(t, "data-id") + '"]');
                        v(i, function(e, t) {
                            ce && Ae(t, n), ue && (me(t, n), F.volume(n))
                        }), le = n
                    }
                }

                function fe(e, t) {
                    var n = E("Slider__scroll", e),
                        i = P("touch", window.bodyNode) ? 10 : 8,
                        a = (t.pageX || t.touches && t.touches[0] && t.touches[0].pageX || 0) - (n ? function(e) {
                            return e.getBoundingClientRect().left
                        }(e) : T(e)) - i / 2,
                        r = e.offsetWidth - i;
                    return r ? Math.max(0, Math.min(a / r, 1)) : 0
                }

                function he(e, t) {
                    if (e) {
                        var n = k("ai_dur", e);
                        w(n, t)
                    }
                }

                function pe(e, t) {
                    if (e) {
                        var n = k("aic_progress_wrap", e),
                            i = k("aic_load_line", n);
                        i && (i.style.width = 100 * Math.max(0, Math.min(t, 1)) + "%")
                    }
                }

                function Ae(e, t) {
                    if (e) {
                        var n = k("aic_progress_wrap", e),
                            i = k("aic_progress_line", n);
                        i && (i.style.width = 100 * t + "%")
                    }
                }

                function me(e, t) {
                    if (e) {
                        var n = k("aic_volume_wrap", e),
                            i = k("aic_progress_line", n);
                        i && (i.style.width = 100 * t + "%")
                    }
                }

                function _e(e) {
                    if (!(e = A(e)) || !S(e, "data-id")) return !1;
                    if (P("ai_deleted", e)) return !1;
                    var t = S(e, "data-id"),
                        n = w(D("input", e)),
                        i = S(k("ai_dur", e), "data-dur"),
                        a = w(k("ai_artist", e)),
                        r = w(k("ai_title", e)),
                        s = w(k("ai_subtitle", e)),
                        l = !!k("ai_add", e),
                        c = !!k("ai_del", e),
                        u = S(k("ai_play", e), "style"),
                        d = !!k("audio_item_disabled", e),
                        f = (0, o.parseJSON)(S(e, "data-ads")),
                        h = !!k("ai_explicit", e),
                        p = S(e, "data-action-hash"),
                        m = S(e, "data-track-code"),
                        _ = {};
                    return v((S(e, "class") || []).split(" "), function(e, t) {
                        "audio_item_" === t.slice(0, "audio_item_".length) && (_[t.slice("audio_item_".length)] = !0)
                    }), {
                        id: t,
                        src: n,
                        duration: i,
                        performer: I(x(a)),
                        title: I(x(r)),
                        can_add: l,
                        can_del: c,
                        cover_style: u,
                        is_disabled: d,
                        mix: _,
                        subtitle: s,
                        is_explicit: h,
                        ads: f,
                        track_code: m,
                        action_hash: p
                    }
                }

                function ve(e) {
                    var t, n, i, a = e < 0;
                    return t = (n = (e = Math.round(a ? -e : e)) % 60) < 10 ? "0" + n : n, t = (i = (e = Math.floor(e / 60)) % 60) + ":" + t, (e = Math.floor(e / 60)) > 0 && (i < 10 && (t = "0" + t), t = e + ":" + t), a && (t = "-" + t), t
                }

                function ge(e, n) {
                    return ve(t && n ? e - n : e)
                }

                function ye(e) {
                    var t = window.cur;
                    t.deletedAudios || (t.deletedAudios = {}), t.deletedAudios[e] = !0
                }

                function be(e) {
                    var t = window.cur;
                    t.deletedAudios && delete t.deletedAudios[e]
                }

                function we(e, t) {
                    t ? function(e) {
                        var t = window.cur;
                        t.addedAudios || (t.addedAudios = {}), t.addedAudios[e] = !0
                    }(e) : function(e) {
                        var t = window.cur;
                        t.addedAudios && delete t.addedAudios[e]
                    }(e);
                    var n = B('.audio_item[data-id="' + e + '"]');
                    v(n, function(e, n) {
                        O("ai_added", n, t), w(k("ai_add", n), t ? lang.global_delete_audio : lang.global_add_to_audio)
                    });
                    var i = geBySel1('body > [id="ai_menu_' + e + '"]'),
                        a = k("ai_add", i);
                    w(a, t ? lang.global_delete_audio : lang.global_add_to_audio), ActionMenu.update()
                }

                function ke(e, t) {
                    t ? ye(e) : be(e);
                    var n = B('.audio_item[data-id="' + e + '"]');
                    v(n, function(e, n) {
                        O("ai_deleted", n, t), w(k("ai_del", n), t ? lang.global_add_to_audio : lang.global_delete_audio)
                    });
                    var i = geBySel1('body > [id="ai_menu_' + e + '"]'),
                        a = k("ai_del", i);
                    w(a, t ? lang.global_add_to_audio : lang.global_delete_audio), ActionMenu.update()
                }

                function Ee() {
                    var e = F.getCurrentId(),
                        t = A("audio" + e),
                        n = !1;
                    e && (n = E("audios_list", t) || E("mcont", t)), v(g("_AudioPlayStatus"), function(e, t) {
                        O("playing", t, !1)
                    }), n && v(g("_AudioPlayStatus", n), function(t, n) {
                        var i = F.playing();
                        O("playing", n, i), i && (n.dataset.id = e)
                    })
                }

                function Se(e, t, n) {
                    if (window.isArticleWebView) return Article.audioPlay(F.getCurrentId(), F.playlist()), M(e), !1;
                    var i = window.lang;
                    if (F.support) {
                        var a = A("audio" + t);
                        if (a && P("ai_deleted", a) && !P("ai_current", a)) return !0;
                        n && t != F.getCurrentId() ? oe(t) : F.operate(t), Ee()
                    } else alert(i.mobile_audio_player_not_support);
                    return M(e), !1
                }

                function Ce(e, t) {
                    var n = A("audio" + e.id);
                    O(U, n, t);
                    var i = k("ai_title", n);
                    w(i, t ? getLang("global_audio_ad") : e.title), O(V, i, t)
                }

                function Me(e, t) {
                    B(".audio_item.al_player.ai_playing").forEach(function(n) {
                        if (n) {
                            var i = k("ai_title", n);
                            w(i, t ? getLang("global_audio_ad") : e.title), O(V, i, t), O(U, n, t), toggle(k("ai_artist"), !t)
                        }
                    })
                }
                return C(document, l.isTouch ? "touchend touchcancel" : "mouseup", function(e) {
                    if (!se) return;
                    var t = E("audio_item", se),
                        n = fe(se, e) || le;
                    e && M(e);
                    var i = B('.audio_item[data-id="' + S(t, "data-id") + '"]');
                    v(i, function(e, i) {
                        ce && (Ae(i, n), F.setPosition(n, !0)), ue && me(t, n)
                    }), ce && (Q = F.playing(), z.onSeek(n));
                    se = le = null, ce = ue = !1
                }), C(document, l.isTouch ? "touchmove" : "mousemove", de), {
                    init: function(t) {
                        e || (e = !0, n = t.add_hash || "", d = t.del_hash || "", h = t.res_hash || "", (J = t.use_new_stats) && (window.playerAdapter = new u.MvkPlayerAdapter(z), new c.AudioStats(window.playerAdapter)), onDOMReady(function() {
                            window.nav && window.audio && window.audioplayer && "#player" == j.hash && F.playlist().length && z.openPlayer(A("lm_audio"), !0)
                        }))
                    },
                    initAudio: function() {
                        v(g("ai_current"), function(e, t) {
                            ne(t = _e(t))
                        });
                        var e = F.getCurrentId(),
                            t = B('.audio_item[data-id="' + e + '"]'),
                            n = F.loaded(),
                            i = F.getPosition(),
                            a = F.duration();
                        F.playing() ? (v(t, function(e, t) {
                            m("ai_playing", t)
                        }), $$("#lm_audio").forEach(function(e) {
                            m("ai_playing", e)
                        })) : (v(t, function(e, t) {
                            _("ai_playing", t)
                        }), $$("#lm_audio").forEach(function(e) {
                            _("ai_playing", e)
                        })), te(F.getCurrent()), v(t, function(e, t) {
                            pe(t, n / a)
                        }), ie(F.getCurrentId(), i, a), setTimeout(function() {
                            Ee()
                        }, 1)
                    },
                    getDOMFromAudio: function(e, t, n) {
                        if (!e) return "";
                        var i = I(e.id),
                            s = I(e.src),
                            c = +e.duration,
                            u = e.performer,
                            d = e.title,
                            f = e.subtitle,
                            h = e.is_explicit,
                            p = e.can_add,
                            A = e.can_del,
                            m = d ? '<span class="divider"> &ndash; </span>' : "",
                            _ = l.isTouch ? "ontouchstart" : "onmousedown",
                            v = "",
                            g = "",
                            y = e.cover_style || "",
                            b = e.is_disabled || "",
                            w = e.ads && (0, o.escapeAttr)(JSON.stringify(e.ads)),
                            k = r.default.class("audio_item", e.mix) || "audio_item",
                            E = e.action_hash;
                        if (e.track_code, b) return '<div class="audio_item audio_item_disabled"></div>';
                        if (function(e) {
                                var t = window.cur;
                                return !!t.deletedAudios && t.deletedAudios[e]
                            }(i)) {
                            if (n) return "";
                            v += " ai_deleted"
                        }(function(e) {
                            var t = window.cur;
                            return !!t.addedAudios && t.addedAudios[e]
                        })(i) && (v += " ai_added"), vk.id && (A ? (v += " ai_has_btn", g = '<div class="ai_del wia_item" onclick="audioplayer.del(\''.concat(i, "', event);\">").concat(lang.global_delete_audio, "</div>")) : p && (v += " ai_has_btn", g = '<div class="ai_add wia_item" onclick="audioplayer.add(\''.concat(i, "', false, event);\">").concat(lang.global_add_to_audio, "</div>"))), i == F.getCurrentId() && (F.playing() && (v += " ai_playing"), v += " ai_current"), h && (v += " audio_item_explicit");
                        var S = "";
                        g ? S = '<div class="ai_menu_wrap"><i class="i_pointer"></i><a href="#" class="ai_menu_toggle_button" onclick="ActionMenu.toggleMenu(event, this);"></a>\n  <div class="ai_menu wi_actions" id="ai_menu_'.concat(i, '">').concat(g, "</div>\n</div>") : v += " ai_no_menu";
                        var C = f ? " " + a.default.html({
                            tag: "span",
                            class: "ai_subtitle",
                            inner: f
                        }) : "";
                        return '<div id="audio'.concat(i, '" data-id="').concat(i, '" data-ads="').concat(w, '" data-track-code="{track_code}" data-action-hash="').concat(E, '" class="').concat(v, " ").concat(k, '"\n     onclick="audioplayer.playPause(event, \'').concat(i, "' ").concat(t ? ", true" : "", ');">\n  <div class="ai_info">\n    <div class="ai_play" style="').concat(y, '">\n      <i class="i_play"></i>\n    </div>\n    ').concat(S, '\n    <div class="ai_body">\n      <div class="ai_dur" data-dur="').concat(c, '" onclick="audioplayer.switchTimeFormat(this, event);">\n        ').concat(ve(c), '\n      </div>\n      <div class="ai_label">\n        <span class="ai_title">').concat(d).concat(C, "</span>").concat(m, '<span class="ai_artist">').concat(u, '</span>\n      </div>\n      <input type="hidden" value="').concat(s, '">\n    </div>\n  </div>\n  <div class="ai_controls">\n    <table class="row_table">\n      <tr>\n        <td class="aic_progress_wrap">\n          <div class="aic_line" ').concat(_, '="audioplayer.setPosition(this, event);" onclick="cancelEvent(event);">\n            <div class="aic_ln aic_back_line" onclick="cancelEvent(event);"></div>\n            <div class="aic_ln aic_load_line" onclick="cancelEvent(event);"></div>\n            <div class="aic_ln aic_pl_wrap" onclick="cancelEvent(event);">\n              <div class="aic_ln aic_progress_line" onclick="cancelEvent(event);">\n                <div class="aic_slider" onclick="cancelEvent(event);"></div>\n              </div>\n            </div>\n          </div>\n        </td>\n        <td class="aic_volume_wrap">\n          <div class="aic_line" ').concat(_, '="audioplayer.setVolume(this, event);" onclick="cancelEvent(event);">\n            <div class="aic_ln aic_back_line" onclick="cancelEvent(event);"></div>\n            <div class="aic_ln aic_pl_wrap" onclick="cancelEvent(event);">\n              <div class="aic_ln aic_progress_line" onclick="cancelEvent(event);">\n                <div class="aic_slider" onclick="cancelEvent(event);"></div>\n              </div>\n            </div>\n          </div>\n        </td>\n      </tr>\n    </table>\n  </div>\n</div>')
                    },
                    add: function(e, t, i) {
                        var a = A("audio" + e);
                        if (!P("ai_ajax", a)) {
                            var r = domData(a, "track-code") || "",
                                o = P("ai_added", a);
                            we(e, !o), m("ai_ajax", a), z.onAdd(), N.post("/audio", {
                                _ajax: 1,
                                act: o ? "delete" : "add",
                                audio: o ? S(a, "data-deleteid") : e,
                                hash: o ? d : n,
                                access_key: t,
                                track_code: r
                            }, {
                                redirectToLoginPage: !0,
                                onDone: function(t) {
                                    _("ai_ajax", a), t ? S(a, "data-deleteid", t) : we(e, o)
                                },
                                onFail: function() {
                                    _("ai_ajax", a), we(e, o);
                                    var i = Array.prototype.slice.call(arguments),
                                        r = i.shift();
                                    switch (r) {
                                        case 2:
                                            j.go("/audio?act=add&audio=" + e + "&hash=" + n + "&access_key=" + t)
                                    }
                                }
                            }), i && M(i)
                        }
                    },
                    del: function(e, t) {
                        var n = A("audio" + e);
                        if (n) {
                            var i = P("ai_deleted", n);
                            ke(e, !i), i ? be(e) : ye(e), z.onDel(), N.post("/audio", {
                                _ajax: 1,
                                act: i ? "restore" : "delete",
                                audio: e,
                                hash: i ? h : d
                            }, {
                                redirectToLoginPage: !0,
                                onDone: function(t) {
                                    t || ke(e, i)
                                },
                                onFail: function() {
                                    ke(e, i);
                                    var t = Array.prototype.slice.call(arguments),
                                        n = t.shift();
                                    switch (n) {
                                        case 2:
                                            j.go("/audio?act=" + (i ? "restore" : "delete") + "&audio=" + e + "&hash=" + (i ? h : d))
                                    }
                                }
                            }), t && M(t)
                        }
                    },
                    playPause: Se,
                    getFormatedTime: ge,
                    switchTimeFormat: function(e, n) {
                        var i = E("audio_item", e);
                        return !(P("ai_current", i) && !P("ai_select", i)) || (L("audio_time_left", (t = !t) ? "1" : "0"), he(A("audio" + F.getCurrentId()), ge(F.getPosition(), F.duration())), n && M(n), !1)
                    },
                    setPosition: function(e, t) {
                        se || F.isAdsPlaying() || (se = e, ce = !0, de(t))
                    },
                    setVolume: function(e, t) {
                        se || (se = e, ue = !0, de(t))
                    },
                    playback: function(e) {
                        if (K && K.listenedTime) {
                            clearTimeout(W);
                            var t = {
                                    _ajax: 1,
                                    act: "playback",
                                    audio: e,
                                    hash: n,
                                    state: document.hidden ? "background" : "app",
                                    listened: K.listenedTime,
                                    end_stream_reason: "unknown",
                                    from: j.getQuery("from")
                                },
                                i = Y.lastIndexOf(e);
                            K = null, G && (t.auto = 1), i && (t.prev = Y[i - 1]), N.post("/audio", t)
                        }
                    },
                    openPlayer: function(e, t) {
                        var n = j.path,
                            i = j.params,
                            a = n + (i ? "?" + i : "") + "#player";
                        return j.al_go(a, null, {
                            local: !0,
                            target: e,
                            nav: {
                                push: a,
                                path: n,
                                params: i,
                                hash: "#player"
                            },
                            no_push: t
                        })
                    },
                    getCurrentElem: function() {
                        return (0, i.$)(".ai_current")
                    },
                    playFirst: Z,
                    hasArticleWebViewClientAudioSupport: function() {
                        return window.clientWebviewAudioSupport
                    },
                    getAddHash: function() {
                        return n
                    },
                    getPlaybackQueue: function() {
                        return Y
                    },
                    isAutoPlayed: function() {
                        return G
                    },
                    useNewStats: function() {
                        return J
                    },
                    playBlock: function(e, t, n) {
                        n.dataset.id ? Z(t, n) : re(e, function(e) {
                            if (e.length) {
                                var t = e[0].id;
                                F.select(t), F.play(t), n.classList.add("playing"), n.dataset.id = t
                            }
                        })
                    },
                    playShuffledBlock: function(e, t) {
                        e.preventDefault(), F.playNothing(), re(t.dataset.blockId, function(e, n) {
                            if (e.length) {
                                var i = e[0].id;
                                F.play(i)
                            }
                            n && (t.dataset.blockId = n)
                        })
                    },
                    onAdd: (0, s.default)(),
                    onDel: (0, s.default)(),
                    onPlay: (0, s.default)(),
                    onPause: (0, s.default)(),
                    onProgress: (0, s.default)(),
                    onVolume: (0, s.default)(),
                    onSeek: (0, s.default)(),
                    onPlaylistChanged: (0, s.default)(),
                    onEnded: (0, s.default)()
                }
            }();
        window.audioplayer = z
    },
    pOpT: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("Go98")) && i.__esModule ? i : {
            default: i
        };
        var r = a.default;
        t.default = r, window.BookmarksFilterListItem = a.default
    },
    pQDp: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.imageProxyURL = function(e, t) {
            var n = [];
            return a(t, function(e, t) {
                switch (e) {
                    case "size":
                        i = function(e, t) {
                            return function(e) {
                                if (Array.isArray(e)) return e
                            }(e) || function(e, t) {
                                if (Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e)) {
                                    var n = [],
                                        i = !0,
                                        a = !1,
                                        r = void 0;
                                    try {
                                        for (var o, s = e[Symbol.iterator](); !(i = (o = s.next()).done) && (n.push(o.value), !t || n.length !== t); i = !0);
                                    } catch (e) {
                                        a = !0, r = e
                                    } finally {
                                        try {
                                            i || null == s.return || s.return()
                                        } finally {
                                            if (a) throw r
                                        }
                                    }
                                    return n
                                }
                            }(e, t) || function() {
                                throw new TypeError("Invalid attempt to destructure non-iterable instance")
                            }()
                        }(("" + t).split("x"), 2), a = i[0], r = i[1], a = a ? o(a) : "", r = r ? o(r) : "", t = "".concat(a, "x").concat(r)
                }
                var i, a, r;
                t && n.push("".concat(e, "=").concat(t))
            }), n.length ? e + "&" + n.join("&") : e
        };
        var i = window,
            a = i.each,
            r = i.intval;

        function o(e) {
            return 0 < e && e < 1 ? Math.round(100 * e) / 100 : r(e)
        }
    },
    pWCx: function(e, t, n) {
        "use strict";
        var i;
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var a = ((i = n("HV9n")) && i.__esModule ? i : {
            default: i
        }).default;
        t.default = a
    },
    pYST: function(e, t, n) {
        "use strict";
        var i, a, r = n("UxAg"),
            o = n("OcsD"),
            s = (i = n("rUE2")) && i.__esModule ? i : {
                default: i
            };

        function l() {
            var e = (0, r.$)(".messenger__dialog");
            a = null, e.innerHTML = ""
        }
        Object.assign(s.default, {
            open: function(e) {
                a = {}, "function" == typeof e.onConfirm && (a.onConfirm = e.onConfirm, e.onConfirm = "");
                "function" == typeof e.onClose && (a.onClose = e.onClose, e.onClose = "");
                var t = (0, r.$)(".messenger__dialog"),
                    n = (0, s.default)(e),
                    i = (0, o.ceFromString)(n);
                a.onConfirm && ((0, r.$)(".mailDialog__confirmButton", i).onclick = function(e) {
                    return a.onConfirm(e, t)
                });
                a.onClose && (0, r.$$)(".mailDialog__overlay,.mailDialog__close,.mailDialog__closeButton", i).forEach(function(e) {
                    e.onclick = function(e) {
                        return a.onClose(e, t)
                    }
                });
                t.innerHTML = "", t.appendChild(i)
            },
            close: l,
            _onDialogClose: l
        })
    },
    qHA9: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.isContactPeer = function(e) {
            return e > 19e8 && e <= 2e9
        }, t.isCommunityPeer = function(e) {
            return e > -1e9 && e < 0
        }, t.isChatPeer = function(e) {
            return e > 2e9
        }, t.isUser = function(e) {
            return e > 0 && e <= 19e8
        }, t.formatTime = f, t.wrapLinks = h, t.wrapMention = p, t.wrapCommunityUrl = function(e) {
            var t = a.default.getQuery("community");
            t && (e += "&community=".concat(t));
            return e
        }, t.sendDataToMessage = function(e, t) {
            var n, i, a = store.mail,
                o = a.cur,
                s = a.members,
                l = Date.now() / 1e3,
                c = f(l, o.timeShift),
                m = e.message || "";
            "send" !== e.act && e.id && (n = store.mail.msgs[e.id]);
            u || (u = document.createElement("div"));
            u.textContent = m, m = u.innerHTML, u.textContent = "";
            var _, v = {};
            if (e.media && 0 === e.media.indexOf("sticker")) {
                v.sticker = 1;
                var g = +e.media.replace("sticker", "");
                g && (_ = {
                    id: g,
                    url: Stickers.getStickerUrl(g, A()),
                    height: d
                })
            } else
                for (var y, b = 1; y = e["attach".concat(b, "_type")]; b++) v[y] ? v[y] += 1 : v[y] = 1;
            i = e.attached_messages ? (e.attached_messages + "").split(";") : e.mail_edit_attach_fwd && n ? n.forwards.concat() : [];
            var w = !!e.has_reply,
                k = "send" === e.act ? "send" + e.random_id : "edit" + e.id,
                E = m,
                S = E = (E = E.replace(/\n/g, "<br>")).replace(/(@|\*)(\S+)(?: +\(([^\n]+?)\))?/g, function(e, t, n, i) {
                    i || (i = t + n);
                    for (var a = 0, r = "id", o = Object.keys(s), l = 0, c = o.length; l < c; l++) {
                        var u = o[l];
                        if (s[u] && s[u].domain === n) {
                            a = u;
                            break
                        }
                    }
                    return "-" === a[0] && (a = a.slice(1), r = "club"), "[".concat(r).concat(a, "|").concat(i, "]")
                });
            S = p(S = h(S), !0), S = (0, r.emojiToHTML)(S);
            var C = {
                id: "send" === e.act ? k : e.id,
                sendId: k,
                peerId: "send" === e.act ? e.to : e.peerId,
                authorId: o.viewerId,
                adminId: o.groupId ? o.userId : void 0,
                ts: l,
                date: c,
                dateShort: c,
                text: S,
                textInput: m,
                body: E,
                isUnread: !n || n.isUnread,
                isOut: !0,
                edited: "send" !== e.act,
                canEdit: !1,
                attaches: v,
                forwards: w ? [] : i,
                hasReply: w,
                reply: w ? i[0] : void 0,
                pending: !t,
                failed: !!t,
                attachesLoading: !!Object.keys(v).length
            };
            o.groupId && (C.adminName = lang.mobile_mail_you, C.adminUrl = s[o.userId].url);
            _ && (C.sticker = _);
            return C
        }, t.getMsgSendId = function(e) {
            return e.edited ? "edit" + e.id : "send" + e.randomId
        }, t.mailRequest = function(e, t) {
            return new Promise(function(n, i) {
                (0, o.ajaxRequest)(e, t, function(e) {
                    e.error ? i({
                        type: "server",
                        code: e.code || 0,
                        message: e.message || ""
                    }) : n(e.result)
                }, function(e, t, n) {
                    var a = null,
                        r = "unknown",
                        o = 0;
                    if (n instanceof XMLHttpRequest) {
                        var s = n;
                        0 === s.status ? r = "network" : (r = "server_status", o = s.status)
                    } else 0 === e && null == t && null == n ? r = "response_parsing" : e === ajax.RESPONSE_CAPTCHA ? (r = "captcha", a = n) : r = "unknown";
                    i({
                        type: r,
                        code: o,
                        message: "",
                        data: a
                    })
                })
            })
        }, t.getStickerSize = A, t.prepareKeyboard = function(e) {
            var t = e.keyboard,
                n = e.authorId,
                i = e.msgId;
            if (t.buttons && t.buttons.length) {
                t = Object.assign(t, {
                    author_id: n,
                    chat_local_id: i
                });
                var a = document.createElement("div");
                t.buttons.forEach(function(e) {
                    e.forEach(function(e) {
                        var t = e.action.label;
                        a.textContent = t;
                        var n = a.innerHTML;
                        e.action.label = (0, r.emojiToHTML)(n), e.action.rawLabel = t
                    })
                }), a = null
            } else t = null;
            return t
        }, t.isForwardedMessageId = function(e) {
            if (isFinite(e)) return !1;
            if ("string" == typeof e && "~" === e[0]) return !1;
            return !0
        }, t.STICKER_HEIGHT = t.UNKNOWN_ERROR = t.MENTION_CLIENTSIDE_REGEXP = t.MENTION_DOMAIN_REGEXP = t.MENTION_REGEXP = void 0, n("tsGB");
        var i, a = (i = n("wMVj")) && i.__esModule ? i : {
                default: i
            },
            r = n("9M99"),
            o = n("OcsD");
        var s = /\[((id|club)\d+)\|([\S\s]+?)]/g;
        t.MENTION_REGEXP = s;
        t.MENTION_DOMAIN_REGEXP = /\[((id|club)\d+)\|@([\S\s]+?)]/g;
        var l = /\[(().+)\|([\S\s]+?)]/g;
        t.MENTION_CLIENTSIDE_REGEXP = l;
        var c = -180;
        t.UNKNOWN_ERROR = 10;
        var u, d = 128;

        function f(e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0,
                n = new Date(1e3 * e),
                i = n.getTimezoneOffset(),
                a = -t / 60 + c;
            if (i !== a) {
                var r = 60 * (a - i) * 1e3;
                n.setTime(1e3 * e - r)
            }
            var o = n.getHours(),
                s = n.getMinutes();
            return o + ":" + (s < 10 ? "0" : "") + s
        }

        function h(e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0;
            return window.mail.wrapLinks(e, t)
        }

        function p(e, t) {
            var n;
            return n = t ? l : s, e.replace(n, function(e, t, n, i) {
                return '<a href="/'.concat(t, '" class="mem_link">').concat(i, "</a>")
            })
        }

        function A() {
            return hasClass("x2", document.body) ? 2 * d : d
        }
        t.STICKER_HEIGHT = d
    },
    qsX6: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.setBookmarkState = function(e, t) {
            g.bookmarks[e] = t
        }, t.default = void 0;
        var i = d(n("wTbK")),
            a = d(n("JYMJ")),
            r = d(n("Y6JH")),
            o = n("VRji"),
            s = n("MjTa"),
            l = n("OcsD"),
            c = n("UxAg"),
            u = n("j80l");

        function d(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        var f = "/hints?act=a_json_friends&mobile=1&from=imwrite&case=Nom&qs=1",
            h = "ShareConversations",
            p = "ShareGroups",
            A = f + h,
            m = !1,
            _ = 0,
            v = !1,
            g = {
                bookmarks: {}
            };

        function y(e) {
            w(e)
        }

        function b(e) {
            nav.go(e), cur.share.destroy({
                isNavigation: !0
            })
        }

        function w(e) {
            var t = cur.share._els.header,
                n = e.scrollTop;
            t.classList.toggle("ShareHeader--scrolled", n >= 10)
        }

        function k(e, t, n) {
            cur.share._els.content;
            if (cur.share.blocked) return !1;
            if (S(!0), cancelEvent(n), hasClass("inline_item_selected", t)) return cur.shareSearch.toggleAttach(e, !1),
                function(e, t) {
                    cur.share._els.content;
                    for (var n = 0; n < cur.share.selected.length; n++)
                        if (cur.share.selected[n] === e) {
                            cur.share.selected.splice(n, 1);
                            break
                        }
                    return T(!1), !1
                }(e);
            cur.shareSearch.toggleAttach(e, !0);
            for (var i = !1, a = 0; a < cur.share.selected.length; a++)
                if (cur.share.selected[a] === e) {
                    i = !0;
                    break
                }
            return i || cur.share.selected.push(e), S(!1), T(!1), I(), !1
        }

        function E(e, t, n) {
            if (!cur.share.blocked) {
                e = e.closest(".SharePanelRoot");
                var i, a = (0, c.$$)(".SharePanel", e);
                t && (i = (0, c.$)(".".concat(t), e)), a.forEach(function(e) {
                    var t = e === i;
                    e.setAttribute("aria-hidden", !t), e.classList.toggle("SharePanel--active", t), t ? e.removeAttribute("tabindex") : e.setAttribute("tabindex", -1), (0, c.$$)("input, ul", e).forEach(function(e) {
                        e.setAttribute("aria-hidden", !t), t ? (e.removeAttribute("disabled"), e.setAttribute("tabindex", 0)) : (e.setAttribute("disabled", !0), e.setAttribute("tabindex", -1))
                    })
                });
                var r = (0, c.$)("input", i);
                r && n && r.focus(), setStyle(e, {
                    height: i ? i.clientHeight : 0
                })
            }
        }

        function S(e) {
            var t = (0, c.$)(".ShareModal");
            t && t.classList.toggle("ShareModal--disableAnimations", !e)
        }

        function C(e) {
            var t = cur.share._els,
                n = t.header,
                i = t.content,
                a = t.bottom;
            i.classList.add("ShareLists--transition"), S(!0), E(n, e ? "ShareHeaderGroupsPanel" : "ShareHeaderConversationsPanel"), E(i, e ? "ShareGroups" : "ShareConversations"), E(a, e ? "" : "ActionsPanel"), setTimeout(function() {
                i.classList.remove("ShareLists--transition")
            }, 300), (0, c.$)(".SharePanel--active ul", i).focus(), I(), w(e ? (0, c.$)("#ShareGroups .ShareList__container") : (0, c.$)("#ShareConversations .ShareList__container"))
        }

        function M(e) {
            var t = cur.share._els,
                n = t.header,
                i = (t.content, t.bottom),
                a = D();
            m = !0, v = e, I(e), S(!1), E(i, e ? "" : a), e && E(n, "ShareHeaderConversationsSearchPanel", !0), I(e), setTimeout(function() {
                browser.ios && (0, l.scrollTop)(document.activeElement), m = !1
            }, 500)
        }

        function P() {
            var e = cur.share._els,
                t = e.content,
                n = e.bottom,
                i = e.messageTextarea;
            m = !0, E(n, "ExpandedMessagePanel"), t.classList.add("ShareLists--transition"), I(!1), i.focus({
                preventScroll: !0
            })
        }

        function T() {
            var e = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0],
                t = cur.share,
                n = t.selected,
                i = t._els;
            ge(h) && (! function() {
                if (!cur.share) return;
                var e = cur.share.cache._cache,
                    t = (0, c.$)(".ShareHeaderConversationsPanel"),
                    n = (0, c.$)(".ShareHeaderConversationsPanel .SharePanel-headerText__receivers", t),
                    i = cur.share.selected,
                    a = i.length;
                t.classList.toggle("ShareHeaderConversationsPanel--hasReceivers", a > 0);
                var r = "";
                if (1 === a) {
                    r = getLang("mobile_share_box_to_single");
                    var o = e[i[0]][0];
                    r = r.replace("{name}", o)
                } else if (2 === a) {
                    r = getLang("mobile_share_box_to_couple");
                    var s = e[i[0]][6] || e[i[0]][0],
                        l = e[i[1]][6] || e[i[1]][0];
                    r = r.replace("{name1}", s).replace("{name2}", l)
                } else if (a > 2) {
                    r = getLang("mobile_share_box_to_many");
                    var u = e[i[0]][6] || e[i[0]][0];
                    r = r.replace("{name}", u).replace("{count}", a - 1)
                }
                n.innerHTML = r
            }(), x());
            var a, r, o = D();
            E(i.bottom, o, e), a = n.length > 1, r = cur.share._els.messagePanel, (0, c.$)(".Btn", r).innerHTML = a ? getLang("mobile_share_message_many") : getLang("mobile_share_message_single")
        }

        function D() {
            var e = cur.share,
                t = e.selected,
                n = e.content;
            return "ShareHeaderGroupsSearchPanel" === (0, c.$)(".SharePanel--active", n).getAttribute("data-name") ? "" : t.length > 0 ? "MessagePanel" : "ActionsPanel"
        }

        function I(e) {
            if (cur.share && cur.share._els) {
                var t = cur.share._els,
                    n = t.header,
                    i = t.bottom,
                    a = t.content,
                    r = t.groupsList;
                if (n && i && a) {
                    var o = (0, c.$)(".ShareModal"),
                        s = 400;
                    (e = v || e) && (s += cur.share.lastBottomHeight - (0, l.getH)(i)), i.clientHeight && (cur.share.lastBottomHeight = i.clientHeight);
                    var u = [n, i].reduce(function(e, t) {
                            var n = (0, c.$)(".SharePanel--active", t);
                            return n && (e += n.clientHeight, setStyle(t, {
                                height: n.clientHeight
                            })), e
                        }, 0),
                        d = Math.min(s, innerHeight - u);
                    (m || cur.share.blocked) && (browser.ios || browser.ipad || browser.safari) && (d = Math.min(s, document.body.clientHeight - u));
                    var f = u + d !== _;
                    f || (S(!1), a.classList.remove("ShareLists--transition")), setStyle(r, {
                        bottom: -i.clientHeight
                    }), o.classList.contains("ModalMenu--focused") || setStyle(a, {
                        height: d
                    }), f || S(!0), _ = u + d
                }
            }
        }

        function x() {
            cur.share && each(geByClass("inline_item", (0, c.$)("ShareConversations__container")), function(e, t) {
                if (cur.share) {
                    var n = intval((t.id || "").substr(4)),
                        i = -1 !== cur.share.selected.indexOf(n);
                    toggleClass("inline_item_selected", t, i), t.setAttribute("aria-selected", i);
                    var a = (0, c.$)('input[type="checkbox"]', t);
                    a && (a.checked = i)
                }
            })
        }

        function O(e) {
            var t = cur.share._els.bookmarkButton;
            if (t) {
                var n = (0, c.$)(".ActionsPanel-button__icon", t),
                    i = (0, c.$)(".ActionsPanel-button__label", t);
                t.setAttribute("aria-pressed", e), e ? (n.innerHTML = Wd.html((0, r.default)("wall", "favorite_28")), i.innerHTML = getLang("mobile_share_target_bookmark_active")) : (n.innerHTML = Wd.html((0, r.default)("wall", "favorite_outline_28")), i.innerHTML = getLang("mobile_share_target_bookmark")), window.thover.clear()
            }
        }

        function L(e) {
            var t = cur.share._els,
                n = t.bottom,
                i = t.processingPanel,
                a = this.mail_hash,
                o = this.object,
                s = this.list,
                l = (0, c.$)(".ExpandedMessagePanel__textareaWrap textarea");
            S(!0), e && cancelEvent(e), E(n, "ProcessingPanel"), cur.share.blocked = !0, (o.startsWith("story") || o.startsWith("narrative")) && Stories.sendAnalyticsEvent("share_to_message"), setTimeout(function() {
                I()
            }), setTimeout(function() {
                I()
            }, 350), ajax.post("/mail?act=send", {
                _ajax: 1,
                from: "share_box",
                hash: a,
                media: o,
                list: s,
                message: l.value,
                to: cur.share.selected.join(",")
            }, {
                onDone: function(e) {
                    S(!0);
                    var t = (0, c.$)(".ProcessingPanel__icon", i),
                        n = (0, c.$)(".ProcessingPanel__label", i);
                    t.classList.remove("ProcessingPanel__icon--loading");
                    var a = e.error;
                    t.innerHTML = Wd.html(a ? (0, r.default)("wall", "error_circle_40") : (0, r.default)("wall", "done_circle_40")), n.innerText = a ? getLang("mobile_share_state_error") : getLang("mobile_share_state_success"), setTimeout(function() {
                        cur.app && (a && cur.app.hasOwnProperty("vkMiniAppShareFail") ? cur.app.vkMiniAppShareFail() : !a && window.isFunction(cur.app.vkMiniAppShareSuccess) && cur.app.vkMiniAppShareSuccess(0)), cur.share && cur.share.destroy({
                            isFail: a
                        })
                    }, 1e3)
                }
            })
        }

        function B(e, t) {
            var n = arguments.length > 2 && void 0 !== arguments[2] && arguments[2];
            (0, l.preventEvent)(e);
            var i, a, r, o = cur.share._els.header;
            if ("group" === t ? (i = ge("ShareHeaderGroupsSearchPanel__input"), a = "ShareHeaderGroupsPanel", r = cur.shareGroupSearch) : "peers" === t && (i = ge("ShareHeaderConversationsSearchPanel__input"), a = "ShareHeaderConversationsPanel", r = cur.shareSearch), S(!1), i.value) {
                if (n) return void S(!0);
                r.clear()
            } else "peers" === t ? (E(o, a), M(!1)) : (E(o, a), S(!0))
        }

        function R() {
            var e = /^([a-z_]+)(-?\d+)_(\d+)$/.exec(cur.share.options.object),
                t = e[1],
                n = e[2],
                i = e[3],
                a = cur.share.options.object;
            "app" === t && "0" === i && (a = "app".concat(n)), cur.share.options.list && (a += "?list=" + cur.share.options.list), a = a.replace("wall_reply", "wall"), a = cur.share.options.external_url || a;
            var r = navigator.share({
                url: a
            });
            if (!r) return (0, l.statlogsValueEvent)("mvk_share_external", t);
            r.then(function() {
                cur.share && (0, l.statlogsValueEvent)("mvk_share_external", t)
            })
        }
        var N = function(e, t, n) {
            var r = t.can_to_own,
                d = void 0 === r || r,
                _ = t.can_to_club,
                v = void 0 === _ || _,
                w = t.can_bookmark,
                D = t.is_bookmarked,
                N = t.from,
                j = t.post_from,
                F = t.list,
                H = (t.message, t.targetOwnOnClick);
            cur.share && cur.share.destroy(), t.withoutScrollView || (0, s.preventDocumentScroll)(), D = void 0 !== g.bookmarks[e] ? g.bookmarks[e] : D, t.is_bookmarked = D, cancelEvent(n);
            var V = !!navigator.share,
                U = browser.ios ? "iOS" : "Android",
                z = (0, i.default)({
                    on_overlay_click: "cur.share.destroy()",
                    class: "ShareModal",
                    attached: !0,
                    body: (0, a.default)({
                        targetOwnOnClick: !!H && "cur.share.toOwnWall()",
                        can_to_own: d,
                        can_to_club: v,
                        supportsExternalShare: V,
                        platform: U,
                        can_bookmark: w,
                        is_bookmarked: D,
                        list: F,
                        from: N,
                        post_from: j,
                        object: t.object,
                        isVKApp: t.isVKApp
                    })
                }),
                W = t.withoutHash ? null : "share";
            i.default.open(Wd.elem(z), !0, W, {
                swipeDown: !0,
                onClose: function() {
                    cur.share && cur.share.destroy({
                        closeModal: !1
                    })
                }
            });
            var q = (0, c.$)(".ShareModal"),
                $ = (0, c.$)(".ShareHeader"),
                G = (0, c.$)(".ShareLists"),
                Q = (0, c.$)(".ShareBottom"),
                Y = (0, c.$)(".ActionsPanel-button--bookmark"),
                X = (0, c.$)(".ActionsPanel-button--group");
            cur.shareSearch = new QuickSearch, cur.shareSearch.init({
                action: f,
                field: "ShareHeaderConversationsSearchPanel__input",
                container: h,
                top_len: 20,
                tpl: function(e, t) {
                    return '<ul aria-multiselectable="true" aria-hidden="false" class="ScrollView ShareConversations__container ShareList__container" onscroll="cur.share.onScroll(this)">'.concat(e, "</ul>")
                },
                item_tpl: function(e, t) {
                    if (cur.share) {
                        var n = cur.share.cache._cache[this.id][0],
                            i = -1 !== cur.share.selected.indexOf(+this.id) ? "inline_item_selected" : "";
                        return '\n        <label aria-label="'.concat(n, '" tabindex="0" role="checkbox" id="peer').concat(this.id, '" onclick="cur.share.select(').concat(this.id, ', this)" class="inline_item active ').concat(i, '">\n          <input type="checkbox" style="display: none;">\n            <img aria-hidden="true" class="ii_img" src="').concat(t, '" />\n            <div class="ii_body">\n              <div class="ii_owner">\n                 ').concat(this.highlight(n), "\n              </div>\n            </div>\n          </input>\n        </label>\n      ")
                    }
                },
                null_tpl: function(e) {
                    var t = getLang("mobile_friends_search_not_found").replace("%s", htsc(e));
                    return e || (t = getLang("mobile_share_list_no_friends")), '<div class="service_msg_box"><div class="service_msg service_msg_null">'.concat(t, "</div></div>")
                }
            }), x(), addEvent(Y, "click", function(e, t, n) {
                var i = e.split("_"),
                    a = 31,
                    r = 5,
                    o = [a, r].includes((0, l.toInt)(t.bookmark_type));
                ajax.post("/bookmarks.php", {
                    _ajax: 1,
                    wide: 2 === t.bookmark_type ? 1 : 0,
                    from: "share_box",
                    star: o ? 1 : 0,
                    act: t.is_bookmarked ? "bookmark_remove" : "bookmark_add",
                    item_type: t.bookmark_type,
                    item_oid: i[0],
                    item_id: i[1],
                    hash: t.bookmark_hash
                }, {
                    onDone: function(e, t) {
                        var n = (0, c.$)(".".concat(e)),
                            i = (0, l.ceFromString)(t);
                        n && (0, l.replace)(i, n.parentNode)
                    }
                }), t.bookmark_type === r && Article.toggleButton(e, !t.is_bookmarked);
                if (t.bookmark_type === a) {
                    var s = (0, c.$)(".StoryMenu__button");
                    Stories.toggleBookmark(s, !0)
                }
                t.is_bookmarked = !t.is_bookmarked, g.bookmarks[e] = t.is_bookmarked, n()
            }.bind(this, e, t, function() {
                O(t.is_bookmarked)
            }), {
                passive: !0
            }), addEvent(X, "click", function() {
                C(!0)
            }, {
                passive: !0
            });
            var K = (0, c.$)(".ExpandedMessagePanel textarea"),
                J = (0, c.$)(".MessagePanel__input input");
            K.value = t.message || "", J.value = t.message || "", (0, o.initAutogrow)(K), addEvent(K, "input blur focus", function() {
                J.value = K.value.replace(/\n/gi, " "), S(!1)
            }), addEvent((0, c.$)(".ExpandedMessagePanelSend"), "click", function() {
                cur.share.sendMessage()
            }, {
                capture: !0
            }), addEvent(K, "input", function() {
                S(!1), I(!browser.ios), setTimeout(function() {
                    S(!0)
                }, 150)
            }), addEvent(K, "touchmove", function(e) {
                stopEvent(e)
            }, {
                capture: !0
            }), addEvent(K, "focus", function(e) {
                var t = cur.share._els.content;
                cancelEvent(e), !0, t.classList.remove("ShareLists--transition"), q.classList.add("ModalMenu--blocked"), S(!1), I(!1), setTimeout(function() {
                    I(!1), 0 === (0, l.scrollTop)() || browser.ios || (q.classList.add("ModalMenu--focused"), (0, l.scrollTop)(document.body.clientHeight))
                }, 300)
            }), addEvent(K, "blur", function() {
                q.classList.remove("ModalMenu--blocked"), S(!1), !1, setTimeout(function() {
                    q.classList.remove("ModalMenu--focused"), document.activeElement && document.activeElement.blur(), T(), I(!1), m = !1
                }, 100), setTimeout(function() {
                    document.activeElement && document.activeElement.blur(), I(!1)
                }, 250)
            }), addEvent(K, "keydown", function(e) {
                13 === e.keyCode && (e.ctrlKey || e.metaKey && browser.mac) && cur.share.sendMessage(e)
            });
            var Z = {
                act: "publish_box",
                object: "null"
            };
            t.object && (Z.object = t.object, t.list && (Z.list = t.list));
            var ee = (0, u.makeUrl)("/like", Z);
            cur.share = {
                    open: !0,
                    onClose: befall(),
                    go: b,
                    options: t,
                    externalShare: R,
                    actionBox: ee,
                    blocked: !1,
                    _els: {
                        actionsPanel: (0, c.$)(".ActionsPanel"),
                        messagePanel: (0, c.$)(".MessagePanel"),
                        processingPanel: (0, c.$)(".ProcessingPanel"),
                        groupsList: ge("ShareGroups"),
                        conversationsList: ge("ShareConversations"),
                        bookmarkButton: Y,
                        messageTextarea: K,
                        header: $,
                        content: G,
                        bottom: Q
                    },
                    selected: [],
                    cache: QuickSearchCache[A],
                    expandMessage: P,
                    toggleGroupsPanel: C,
                    toggleConversationsSearch: M,
                    select: k,
                    clearSearch: B,
                    setActivePanel: E,
                    onScroll: y,
                    sendMessage: L.bind(t),
                    lastBottomHeight: Q.clientHeight,
                    destroy: function() {
                        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
                        e = extend({
                            closeModal: !0,
                            isFail: !0,
                            isNavigation: !1
                        }, e);
                        var t = (0, c.$)(".ShareModal");
                        e.isFail && cur.app && cur.app.vkMiniAppShareFail && cur.app.vkMiniAppShareFail(), t && e.closeModal && i.default.close(t), cur.share && (cur.share.onClose(e.isNavigation), cur.share.open = !1), cur.share.options.withoutScrollView || (0, s.restoreDocumentScroll)(), delete cur.share, delete cur.shareSearch, delete cur.shareGroupSearch
                    }
                }, H && (cur.share.toOwnWall = H),
                function() {
                    cur.shareGroupSearch = new QuickSearch;
                    var e = Icon({
                        icon: "chevron_right"
                    });
                    cur.shareGroupSearch.init({
                        load_once: !0,
                        field: "ShareHeaderGroupsSearchPanel__input",
                        container: p,
                        action: cur.share.actionBox,
                        tpl: function(e, t) {
                            return '<ul aria-hidden="true"  class="ScrollView ShareGroups__container ShareList__container" onscroll="cur.share.onScroll(this)">'.concat(e, "</ul>")
                        },
                        item_tpl: function(t, n) {
                            var i = function() {
                                    if (!cur.share) return {};
                                    var e = cur.share.actionBox + p;
                                    return QuickSearchCache[e]
                                }()._cache[this.id][0],
                                a = cur.share.options,
                                r = a.object,
                                o = a.list,
                                s = a.from,
                                l = a.post_from,
                                c = {
                                    act: "add",
                                    share_box: "1"
                                };
                            r && (c = extend(c, {
                                object: r,
                                list: o,
                                from: s,
                                post_from: l
                            })), cur.share.options.isVKApp && (c.is_vk_app = +cur.share.options.isVKApp);
                            var d = (0, u.makeUrl)("/wall".concat(this.id), c);
                            return '\n        <li aria-label="'.concat(i, '" tabindex="0" role="link" id="group').concat(this.id, '" onclick="cur.share.go(\'').concat(d, "', ").concat(cur.share.options.isVKApp, ')" class="inline_item " xmlns="http://www.w3.org/1999/html">\n          <img aria-hidden="true" class="ii_img" src="').concat(n, '" />\n          <div class="ii_body">\n            <div class="ii_owner">\n               ').concat(this.highlight(i), '\n            </div>\n            <div class="ii_go">\n               ').concat(e, "\n            </div>\n          </div>\n        </li>\n      ")
                        },
                        null_tpl: function(e) {
                            var t = getLang("mobile_groups_no_groups_found");
                            return e || (t = getLang("mobile_share_list_no_groups")), '<div class="service_msg_box"><div class="service_msg service_msg_null">'.concat(t, "</div></div>")
                        }
                    })
                }(), O(D), I(), $.closest(".Share").focus(), onBodyResize(function() {
                    q.classList.contains("ModalMenu--focused") || (I(), setTimeout(function() {
                        S(!0)
                    }, 150))
                })
        };
        t.default = N
    },
    "r/ag": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), Object.defineProperty(t, "POPUP_DISAPPEAR_TIME", {
            enumerable: !0,
            get: function() {
                return r.POPUP_DISAPPEAR_TIME
            }
        }), Object.defineProperty(t, "POPUP_NAV_PREFIX", {
            enumerable: !0,
            get: function() {
                return r.POPUP_NAV_PREFIX
            }
        }), t.default = void 0;
        var i, a = (i = n("Po+v")) && i.__esModule ? i : {
                default: i
            },
            r = n("TAKr");
        window.Popup = a.default;
        var o = a.default;
        t.default = o
    },
    r2Pq: function(e, t, n) {
        "use strict";
        var i, a = n("UxAg"),
            r = (i = n("z9sQ")) && i.__esModule ? i : {
                default: i
            };
        window.AudioSerp = {
            setView: function(e) {
                return l("view", e)
            },
            setTab: function(e) {
                return l("tab", e)
            },
            toggleTabs: function(e) {
                (0, a.$)(s.serp).classList.toggle(o.noTabs, !e)
            },
            setFoundHtml: function(e) {
                (0, a.$)(s.found).outerHTML = e
            },
            getFoundHtml: function() {
                return (0, a.$)(s.found).outerHTML
            }
        };
        var o = {
                serpMod: function(e) {
                    return "AudioSerp_".concat(e)
                },
                noTabs: "AudioSerp_noTabs"
            },
            s = {
                serp: ".AudioSerp",
                found: ".AudioSerp__found"
            };

        function l(e, t) {
            var n = (0, a.$)(s.serp);
            r.default.setMod(n, o.serpMod(e), t)
        }
    },
    rEJs: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.events = void 0;
        t.events = {
            CURRENT_CHANGED: "curr",
            PLAY: "start",
            PAUSE: "pause",
            STOP: "stop",
            UPDATE: "update",
            LOADED: "loaded",
            ENDED: "ended",
            FAILED: "failed",
            BUFFERED: "buffered",
            PROGRESS: "progress",
            VOLUME: "volume",
            PLAYLIST_CHANGED: "plchange",
            ADDED: "added",
            REMOVED: "removed",
            FREQ_UPDATE: "freq",
            SEEK: "seek",
            PLAY_NEXT: "play_next",
            AD_READY: "ad_ready",
            AD_DEINITED: "ad_deinit",
            AD_STARTED: "ad_started",
            AD_COMPLETED: "ad_completed",
            START_LOADING: "start_load",
            CAN_PLAY: "actual_start"
        }
    },
    rKUZ: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i = function(e) {
            if (e && e.__esModule) return e;
            var t = a();
            if (t && t.has(e)) return t.get(e);
            var n = {};
            if (null != e) {
                var i = Object.defineProperty && Object.getOwnPropertyDescriptor;
                for (var r in e)
                    if (Object.prototype.hasOwnProperty.call(e, r)) {
                        var o = i ? Object.getOwnPropertyDescriptor(e, r) : null;
                        o && (o.get || o.set) ? Object.defineProperty(n, r, o) : n[r] = e[r]
                    }
            }
            n.default = e, t && t.set(e, n);
            return n
        }(n("NSb7"));

        function a() {
            if ("function" != typeof WeakMap) return null;
            var e = new WeakMap;
            return a = function() {
                return e
            }, e
        }
        n("eR1x");
        var r = i.default;
        t.default = r, window.Typing = i.default, Object.assign(window, {
            Typing_renderNames: i.TypingRenderNames,
            Typing_isEmpty: i.TypingIsEmpty
        })
    },
    rKp0: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("FZH1")) && i.__esModule ? i : {
            default: i
        };
        n("UH2D");
        var r = a.default;
        t.default = r, window.MailScrap = a.default
    },
    rUE2: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("bZ/P")) && i.__esModule ? i : {
            default: i
        };

        function r() {
            var e = function(e, t) {
                t || (t = e.slice(0));
                return Object.freeze(Object.defineProperties(e, {
                    raw: {
                        value: Object.freeze(t)
                    }
                }))
            }(['\n    <div class="', '">\n      <div class="mailDialog__overlay" ', '></div>\n      <div class="mailDialog__wrap">\n        <div class="mailDialog__content">\n          <div class="mailDialog__close" ', "></div>\n          ", '\n          <div class="mailDialog__body">', '</div>\n          <div class="mailDialog__footer">\n            <div class="mailDialog__button mailDialog__confirmButton" ', ">", '</div>\n            <div class="mailDialog__button mailDialog__button_secondary mailDialog__closeButton" ', ">", "</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  "]);
            return r = function() {
                return e
            }, e
        }
        var o = function(e) {
            var t = e.onClose || a.default.onClick("MailDialog._onDialogClose"),
                n = a.default.class(e.class, "mailDialog", {}),
                i = "";
            e.title && (i = '<div class="mailDialog__title">'.concat(e.title, "</div>"));
            return a.default.html(r(), n, t, t, i, e.body, e.onConfirm, e.confirmText, t, e.cancelText)
        };
        t.default = o
    },
    rulp: function(e, t, n) {
        "use strict";
        var i, a = (i = n("r/ag")) && i.__esModule ? i : {
            default: i
        };
        window.Podcast = {
            toggleFave: function(e, t, n) {
                var i = "snippet__favorite_active",
                    a = hasClass(e, i);
                ajax.post("fave.php", {
                    act: "fave_podcast",
                    add: !a,
                    hash: n,
                    audio_id: t,
                    ref: cur.module
                }), a ? removeClass(e, i) : addClass(e, i)
            },
            onOpenClick: function(e, t) {
                var n = $(".snippet__popup", e.closest(".snippet")),
                    i = "";
                cur && cur.module ? i = cur.module : nav && "/feed" === nav.cur ? i = "feed" : !nav || "/feed?section=podcasts" !== nav.cur && "/feed/podcasts" !== nav.cur || (i = "feed_podcasts"), statlogsValueEvent("mvk_podcasts_actions", "mvk_open_popup", t, i), a.default.open(n, !0)
            }
        }
    },
    s0Xw: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("gfsL")) && i.__esModule ? i : {
            default: i
        };
        n("gmHQ");
        var r = a.default;
        t.default = r, window.Cart = a.default
    },
    s0aB: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i = function(e) {
            if (e && e.__esModule) return e;
            var t = a();
            if (t && t.has(e)) return t.get(e);
            var n = {};
            if (null != e) {
                var i = Object.defineProperty && Object.getOwnPropertyDescriptor;
                for (var r in e)
                    if (Object.prototype.hasOwnProperty.call(e, r)) {
                        var o = i ? Object.getOwnPropertyDescriptor(e, r) : null;
                        o && (o.get || o.set) ? Object.defineProperty(n, r, o) : n[r] = e[r]
                    }
            }
            n.default = e, t && t.set(e, n);
            return n
        }(n("NJSj"));

        function a() {
            if ("function" != typeof WeakMap) return null;
            var e = new WeakMap;
            return a = function() {
                return e
            }, e
        }
        n("82vK");
        var r = i.default;
        t.default = r, window.Convo = i.default, window.Convo__online = i.Convo__online
    },
    sOYs: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.VoiceMessagePlayer = void 0;
        var i, a = n("n4VL"),
            r = n("5KvX"),
            o = n("X6as"),
            s = n("rEJs"),
            l = n("1V+M");

        function c(e, t) {
            for (var n = 0; n < t.length; n++) {
                var i = t[n];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        }
        var u = !1,
            d = function() {
                function e() {
                    var t = this,
                        n = (arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}).onListened;
                    ! function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, e), this._reattach = !1, this._audioEl = null, this._playing = !1, this._timer = null, this._duration = 0, this._detaching = !1;
                    var o = {
                        onEnd: function() {
                            t.detach()
                        },
                        onFail: function() {
                            o.onEnd()
                        },
                        onCanPlay: function() {},
                        onProgressUpdate: function(e) {
                            t._updateProgress(e)
                        }
                    };
                    i = !1, a.PlayerHTML5.isSupported() ? (a.PlayerHTML5.isSupported('audio/ogg;codecs="opus"') && !a.PlayerHTML5.isSupported('audio/ogg;codecs="codec_check"') && (i = !0), this._impl = new a.PlayerHTML5(o)) : browser.flash && window.renderFlash && (this._impl = new r.PlayerFlash(o)), this.onPlayPause = function(e) {
                        return cancelEvent(e), t.toggle()
                    }, this.onDurationClick = function(e) {
                        t.durationType = !t.durationType, cancelEvent(e)
                    }, this._onListened = function() {
                        n && n(t._audioEl)
                    }, this._initEvents()
                }
                var t, n, d;
                return t = e, d = [{
                    key: "pauseGlobalMedia",
                    value: function() {
                        window.Notifier && (u = !0, Notifier.lcSend("video_start")), window.ap && ap.isPlaying() ? (ap.pause(), ap.pausedByMsg = !0) : window.audio && audio.playing && audio.playing() && (audio.pause(), audio.pausedByMsg = !0)
                    }
                }, {
                    key: "resumeGlobalMedia",
                    value: function() {
                        window.Notifier && u && (u = !1, Notifier.lcSend("video_hide")), window.ap && ap.pausedByMsg ? (ap.play(), delete ap.pausedByMsg) : window.audio && audio.playing && audio.pausedByMsg && ((0, l.wrapAudioPlay)(audio), delete audio.pausedByMsg)
                    }
                }], (n = [{
                    key: "_updateProgress",
                    value: function(e) {
                        this._duration * e >= 1 && this._audioEl && !this._audioEl._listened && (this._audioEl._listened = !0, this._onListened()), this._durationEl && (this.durationType ? this._durationEl.innerHTML = "-" + formatTime(Math.round(this._duration * (1 - e))) : this._durationEl.innerHTML = formatTime(Math.round(this._duration * e))), this._progressSlider && this._progressSlider.setValue(e)
                    }
                }, {
                    key: "_initInterface",
                    value: function() {
                        var e = this;
                        this._el = ce("div", {
                            innerHTML: '<div class="audio-msg-player audio-msg-track"><button class="audio-msg-track--btn"></button><div class="audio-msg-track--duration"></div><div class="audio-msg-track--wave-wrapper"><div class="audio-msg-track--slider"></div></div></div>'
                        }).firstChild, window.getLang && attr(this._el, "aria-label", getLang("mail_audio_message")), this._playBtn = geByClass1("audio-msg-track--btn", this._el), window.getLang && attr(this._playBtn, "aria-label", getLang("global_audio_play")), this._durationEl = geByClass1("audio-msg-track--duration", this._el), this._durationEl.innerHTML = formatTime(this._duration), this._progressSlider = new o.Slider(geByClass1("audio-msg-track--slider", this._el), {
                            value: 0,
                            size: 0,
                            hintClass: "audio_player_hint",
                            formatHint: function(t) {
                                return formatTime(Math.round(t * e._duration))
                            },
                            onEndDragging: function(t) {
                                e._impl.seek(t)
                            }
                        });
                        var t = geByClass1("audio-msg-track--wave-wrapper", this._audioEl).children[0];
                        geByClass1("slider_slide", this._el).appendChild(t.cloneNode(!0)), geByClass1("slider_amount", this._el).appendChild(t.cloneNode(!0)), addEvent(this._playBtn, "click", this.onPlayPause), addEvent(this._durationEl, "click", this.onDurationClick), this._audioEl.parentNode.appendChild(this._el)
                    }
                }, {
                    key: "_destroyInterface",
                    value: function() {
                        hide(this._el), this._audioEl.parentNode.removeChild(this._el), removeEvent(this._playBtn, "click", this.onPlayPause), this._progressSlider && (this._progressSlider.destroy(), this._progressSlider = null), this._playBtn = null, this._durationEl = null, this._el = null
                    }
                }, {
                    key: "attachTo",
                    value: function(e) {
                        var t = this;
                        if (this._audioEl != e) {
                            null != this._audioEl && (this._reattach = !0), this.detach(), this._audioEl = e, addClass(this._audioEl, "audio-msg-track_player-attached"), this._duration = attr(e, "data-duration"), this._initInterface();
                            var n = this._audioEl.id.split("_");
                            if (n && n.length > 1 && (this._owner_id = n[1]), this._reattach = !1, !this._impl.loaded) return new Promise(function(n, a) {
                                t._impl.onReady(function() {
                                    t._impl.setUrl(attr(e, i ? "data-ogg" : "data-mp3"), {
                                        duration: t._duration,
                                        callback: n
                                    })
                                })
                            });
                            this._impl.setUrl(attr(e, i ? "data-ogg" : "data-mp3"), {
                                duration: this._duration
                            })
                        }
                        return !0
                    }
                }, {
                    key: "detach",
                    value: function() {
                        var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0];
                        if (this._audioEl && this._el && !this._detaching) {
                            if (e && this.isAttached()) return;
                            this._detaching = !0, this.stop(), this._destroyInterface(), removeClass(this._audioEl, "audio-msg-track_player-attached"), this._audioEl._listened = !1, this._audioEl = null
                        }
                        this._detaching = !1
                    }
                }, {
                    key: "play",
                    value: function() {
                        this._audioEl && (this._reattach || e.pauseGlobalMedia(), addClass(this._el, "audio-msg-track_playing"), window.getLang && attr(this._playBtn, "aria-label", getLang("global_audio_pause")), this._playing = !0, this._createTimer(), this._owner_id && statlogsValueEvent("audio_message_play", this._owner_id), this._impl.play())
                    }
                }, {
                    key: "pause",
                    value: function() {
                        this._audioEl && (!this._reattach && this._playing && e.resumeGlobalMedia(), window.getLang && attr(this._playBtn, "aria-label", getLang("global_audio_play")), removeClass(this._el, "audio-msg-track_playing"), this._playing = !1, this._impl.pause(), this._killTimer())
                    }
                }, {
                    key: "stop",
                    value: function() {
                        this.pause(), this._impl.stop()
                    }
                }, {
                    key: "toggle",
                    value: function() {
                        this._playing ? this.pause() : this.play()
                    }
                }, {
                    key: "_createTimer",
                    value: function() {
                        var e = this;
                        this._duration > 0 && (this._killTimer(), this._timer = setInterval(function() {
                            var t = e._impl.getCurrentProgress();
                            e._updateProgress(t)
                        }, 100))
                    }
                }, {
                    key: "_killTimer",
                    value: function() {
                        this._timer && (clearInterval(this._timer), this._timer = null)
                    }
                }, {
                    key: "_initEvents",
                    value: function() {
                        var e = this;
                        window.ap ? ap.on(this, s.events.PLAY, function() {
                            delete ap.pausedByMsg, e.pause()
                        }) : window.audio && audio.onPlay(function() {
                            delete audio.pausedByMsg, e.pause()
                        }), window.Notifier && (Notifier.addRecvClbk("audio_start", "audio_msg", function() {
                            e.pause()
                        }), Notifier.addRecvClbk("video_start", "audio_msg", function() {
                            e.pause()
                        }))
                    }
                }, {
                    key: "isAttached",
                    value: function() {
                        if (this._audioEl) {
                            for (var e = this._audioEl; e.parentNode;) e = e.parentNode;
                            return !!e.body
                        }
                        return !1
                    }
                }, {
                    key: "type",
                    get: function() {
                        return this._impl.type
                    }
                }, {
                    key: "durationType",
                    get: function() {
                        return window.AudioPlayer ? !!ls.get(AudioPlayer.LS_PREFIX + AudioPlayer.LS_DURATION_TYPE) : "1" == lsGet("audio_time_left")
                    },
                    set: function(e) {
                        window.AudioPlayer ? ls.set(AudioPlayer.LS_PREFIX + AudioPlayer.LS_DURATION_TYPE, !!e) : lsSet("audio_time_left", e ? "1" : "0")
                    }
                }]) && c(t.prototype, n), d && c(t, d), e
            }();
        t.VoiceMessagePlayer = d
    },
    sVNd: function(e, t, n) {
        "use strict";
        var i, a = n("MjTa"),
            r = (i = n("+cqQ")) && i.__esModule ? i : {
                default: i
            };

        function o(e, t) {
            return function(e) {
                if (Array.isArray(e)) return e
            }(e) || function(e, t) {
                if (!(Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e))) return;
                var n = [],
                    i = !0,
                    a = !1,
                    r = void 0;
                try {
                    for (var o, s = e[Symbol.iterator](); !(i = (o = s.next()).done) && (n.push(o.value), !t || n.length !== t); i = !0);
                } catch (e) {
                    a = !0, r = e
                } finally {
                    try {
                        i || null == s.return || s.return()
                    } finally {
                        if (a) throw r
                    }
                }
                return n
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance")
            }()
        }
        var s = window,
            l = s.preventEvent,
            c = s.val,
            u = s.ce,
            d = s.replaceEntities,
            f = s.elfocus,
            h = s.parseLat,
            p = s.parseCyr,
            A = s.show,
            m = s.hide,
            _ = s.extend,
            v = (s.isEmpty, s.nav),
            g = s.addEvent,
            y = s.trim,
            b = (s.cancelEvent, s.geByClass),
            w = s.getXY,
            k = s.domPS,
            E = s.domNS,
            S = s.browser,
            C = function() {
                var e = {
                        UP: 38,
                        DOWN: 40,
                        RETURN: 13,
                        ESC: 27
                    },
                    t = "MentionContainer_opened",
                    n = "Mention_inited",
                    i = "Mention_noScroll",
                    s = "MentionItem_active",
                    C = {},
                    M = {},
                    P = !1;

                function T() {
                    C = {
                        ignoredTerm: null,
                        curValue: "",
                        curTerm: "",
                        curPos: "",
                        input: {}
                    }, M = {
                        container: null,
                        scroll: null,
                        index: {},
                        cache: {},
                        shown: [],
                        lastQ: null,
                        text: null,
                        requestTimer: null,
                        opts: {}
                    }
                }
                T();
                var D = !0;

                function I() {
                    D = !1
                }

                function x() {
                    var e, t, n, i, a, r = c(C.input),
                        o = Math.max(r.lastIndexOf("@"), r.lastIndexOf("*")),
                        s = !1;
                    if (o > -1) {
                        var l = function(e) {
                                if (void 0 !== e.selectionStart) return e.selectionStart !== e.selectionEnd ? e.selectionEnd : e.selectionStart;
                                if (void 0 !== window.getSelection) {
                                    var t = window.getSelection();
                                    if (!t || !t.rangeCount) return 0;
                                    var n = t.getRangeAt(0),
                                        i = n.cloneRange(),
                                        a = u("div");
                                    return i.selectNodeContents(e), i.setEnd(n.startContainer, n.startOffset), a.appendChild(i.cloneContents()), c(a).replace(/\n$/, "").length
                                }
                                return 0
                            }(C.input),
                            d = r.substr(0, l);
                        o = Math.max(d.lastIndexOf("@"), d.lastIndexOf("*"));
                        var f = d.match(/(^|[\s.,:\'\"\u00BB\u00AB;>\)\(]|\#[\w_\.\u0400-\u04FF]+)[@\*]([^,@\*\(\)\?\!\s\n\r \u00A0]*)$/);
                        f && "." !== f[2].substr(-1) && (s = f[2])
                    }!1 === s && delete C.ignoredTerm, void 0 !== C.ignoredTerm && s == C.ignoredTerm && (s = !1), C.curValue = r, C.curTerm = s, C.curPos = o, M.text = s, !1 === C.curTerm ? B() : (U(!1, C.curTerm), L(), e = ge("mhead").offsetHeight, t = M.container.getBoundingClientRect(), n = C.input.offsetHeight, i = parseInt(getStyle(M.scroll, "maxHeight"), 10), a = !1, a = hasClass("Mention_openToBottom", M.container) ? t.top - n - i < e : t.bottom - i < e, w(C.input)[1] >= e + i && (a = !1), toggleClass("Mention_openToBottom", M.container, a), toggleClass("Mention_openToBottom", M.opts.appendTo, a))
                }

                function O(e) {
                    C.input = e
                }

                function L() {
                    Q(), document.addEventListener("click", R, !0), addClass(t, M.opts.appendTo), A(M.container),
                        function() {
                            if (!P) {
                                var e = S.ipad ? "touchend" : "click";
                                P = !0, g(window, e, B), g(window, "touchmove", I), v.onBeforeGo(B)
                            }
                        }()
                }

                function B(e) {
                    !S.ipad || D ? e && e.target && gpeByClass(n, e.target) && !gpeByClass("uMailWrite__button", e.target) && !hasClass("uMailWrite__button", e.target) || hasClass(t, M.opts.appendTo) && (removeClass(t, M.opts.appendTo), m(M.container), function() {
                        if (P) {
                            var e = S.ipad ? "touchend" : "click";
                            removeEvent(window, e, B), removeEvent(window, "touchmove", I), v.onBeforeGo.off(B), P = !1
                        }
                    }()) : D = !0
                }

                function R(e) {
                    var t = e.target;
                    t && !gpeByClass(n, t) && (e.preventDefault(), e.stopImmediatePropagation(), B()), document.removeEventListener("click", R, !0)
                }

                function N() {
                    var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
                    M.opts = _(M.opts, e), j(), U(!0)
                }

                function j() {
                    var e, t, n = M.opts.defaultItems,
                        i = M.opts.items,
                        a = [];
                    for (e = 0, t = n.length; e < t; ++e) a.push(e);
                    for (M.cache[""] = a, e = 0, t = i.length; e < t; ++e) F(e, i[e])
                }

                function F(e, t) {
                    var n, i, a, r = "",
                        o = M.opts.searchKeys,
                        s = {};
                    for (n = 0, a = o.length; n < a; ++n) r += " " + (t[o[n]] || "").replace(M.opts.delimeter, " ").replace(/<[^>]*>/g, "");
                    for (r += (h(r) || "") + (p(r) || ""), r = y(r.toLowerCase()).split(/\s+/), n = 0; n < r.length; n++)
                        for (i = 1; i <= M.opts.wholeIndex; i++) {
                            var l = r[n].substr(0, i);
                            s[l] || (M.index[l] || (M.index[l] = []), M.index[l].push(e), s[l] = 1)
                        }
                }

                function H() {
                    var e = y(M.text);
                    e && ajax.post(M.opts.url, _({
                        str: e,
                        mobile: 1
                    }, M.opts.params || {}), {
                        onDone: function(t) {
                            M.cache[e] = V(e).concat(t), z(M.cache[e], !0)
                        }
                    })
                }

                function V(e) {
                    if (!(e = y(e.toLowerCase().replace(M.opts.delimeter, " ")))) return M.cache[""];
                    var t = M.opts.wholeIndex;
                    if (e.length <= t && -1 === e.indexOf(" ")) return M.index[e] || [];
                    var n, i, a = 0,
                        r = "";
                    for (n = 0, i = (e = e.split(" ")).length; n < i; ++n) {
                        var o = e[n].substr(0, t),
                            s = M.index[o];
                        if ((!r || !s || s.length < a) && (a = s ? s.length : 0, r = o), !a) return []
                    }
                    var l = [],
                        c = M.opts.searchKeys,
                        u = c.length,
                        d = e.length;
                    for (n = 0, i = M.index[r].length; n < i; ++n) {
                        for (var f = M.index[r][n], A = M.opts.items[f], m = !1, _ = "", v = 0; v < u; ++v) _ += " " + (A[c[v]] || "").replace(M.opts.delimeter, " ").replace(/<[^>]*>/g, "");
                        _ = (_ += (h(_) || "") + (p(_) || "")).toLowerCase();
                        for (var g = 0; g < d; ++g)
                            if (-1 === _.indexOf(" " + e[g])) {
                                m = !0;
                                break
                            }
                        m || l.push(f)
                    }
                    return l
                }

                function U(e, t) {
                    if (M.cache[""])
                        if (t = void 0 !== t ? t : y(M.text), M.lastQ !== t || e) {
                            M.lastQ = t, clearTimeout(M.requestTimer);
                            var n = M.cache[t];
                            n ? z(n, !0) : (z(n = V(t), !M.opts.url), M.opts.url && (M.requestTimer = setTimeout(H, M.opts.requestWait)))
                        } else L()
                }

                function z(e, t) {
                    var n = [];
                    M.shown = [];
                    for (var r = e.slice(0, M.opts.maxItems), o = 0, s = r.length; o < s; ++o) {
                        var d = r[o];
                        isArray(d) || (d = M.opts.items[d]), M.shown[d[0]] || (M.shown[d[0]] = d, n.push(W(d)))
                    }
                    M.container && M.opts.appendTo.contains(M.container) || (M.container = u("div"), addClass("Mention", M.container), M.scroll = u("div"), addClass("ScrollView Mention__scroll", M.scroll), (0, a.setScrollView)(M.scroll, {
                        topBanner: !1
                    }), M.opts.appendTo.appendChild(M.container), M.container.appendChild(M.scroll), g(M.scroll, "touchmove", function(e) {
                        hasClass(i, M.scroll) && l(e)
                    })), toggleClass("Mention_empty", M.container, !n.length), c(M.scroll, n.join("")), M.scroll.scrollTop = 0, $(), setTimeout(function() {
                        toggleClass(i, M.scroll, ! function() {
                            if (!S.ios && !S.ipad) return !0;
                            if (M.scroll.scrollHeight > M.scroll.offsetHeight) return !0;
                            return !1
                        }())
                    }, 0)
                }

                function W(e) {
                    var t = o(e, 4),
                        n = t[0],
                        i = t[1],
                        a = t[2],
                        r = t[3];
                    return '<div class="MentionItem" onclick="Mention.onSelect(\''.concat(n, '\');" onmouseover="Mention.onItemHover(this);">\n              <div class="MentionItem__cell">\n                <img src="').concat(r, '" class="MentionItem__img"/>\n              </div>\n              <div class="MentionItem__cell MentionItem__cell_name">\n                <div class="MentionItem__name">').concat(i, '</div>\n                <div class="MentionItem__tag">').concat(a, "</div>\n              </div>\n            </div>")
                }

                function q() {
                    var e = geByClass1(s, M.container),
                        t = e.offsetTop;
                    M.scroll.scrollTop = t - e.offsetHeight - parseInt(getStyle(M.scroll, "paddingTop"), 10)
                }

                function $() {
                    var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null,
                        t = b("MentionItem", M.container);
                    if (t.length) {
                        var n = t.find(function(e) {
                            return hasClass(s, e)
                        });
                        e ? (removeClass(s, n), addClass(s, e)) : n || addClass(s, t[0])
                    }
                }

                function G(e, t) {
                    setTimeout(function() {
                        O(t), x()
                    }, 0)
                }
                var Q = (0, r.default)();
                return {
                    onKeyUp: function(t, n) {
                        t.keyCode !== e.UP && t.keyCode !== e.DOWN && (U(!0), O(n), x())
                    },
                    onKeyDown: function(n, i) {
                        var a;
                        hasClass(t, M.opts.appendTo) && (n.keyCode === e.UP ? (! function() {
                            var e = geByClass1(s, M.container);
                            if (e) {
                                var t = k(e);
                                t && ($(t), q())
                            } else $(), q()
                        }(), n.preventDefault()) : n.keyCode === e.DOWN ? (! function() {
                            var e = geByClass1(s, M.container);
                            if (e) {
                                var t = E(e);
                                t && ($(t), q())
                            } else $(), q()
                        }(), n.preventDefault()) : n.keyCode === e.RETURN ? (a = geByClass1(s, M.container)) && (a.click(), 1) && n.preventDefault() : n.keyCode === e.ESC && (B(), n.preventDefault()))
                    },
                    onFocus: G,
                    onClick: G,
                    onSelect: function(e) {
                        var t = M.shown[e];
                        t && function(e) {
                            if (!e) return !1;
                            var t, n = e[2].replace("@", ""),
                                i = C.curValue.substr(0, C.curPos),
                                a = C.curValue.substr(C.curPos),
                                r = !!i.match(/\#[\w_\.\u0400-\u04FF]+$/i);
                            M.opts.preferDomain && e[9] && (r = !0);
                            r || (t = d(e[8] || e[1]));
                            var o = new RegExp("^(@|\\*)" + escapeRE(C.curTerm) + "(?:\\s+\\((?:(.*?)\\))?\\s*)?", "");
                            a = a.replace(o, function(e, i, a) {
                                var o = i + n + " ";
                                return r || (o += "(" + t.replace(/[\(\)\]\[]/g, "") + ") "), o
                            }), r || !i || i.match(/[\.\(\)\?\!\s\n\r\'\"\u00BB\u00AB \u00A0]$/) || (a = " " + a);
                            B(), c(C.input, i + a), f(C.input), M.opts.afterInsert && M.opts.afterInsert(C.input)
                        }(t), B()
                    },
                    onItemHover: function(e) {
                        $(e)
                    },
                    onOpen: Q,
                    init: function() {
                        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
                        T(), M.opts = _({
                            appendTo: document.body,
                            url: "hints",
                            params: {
                                act: "a_json_friends",
                                from: "composer"
                            },
                            delimeter: /[\s\(\)\.,\-]+/g,
                            requestWait: 300,
                            wholeIndex: 2,
                            maxItems: 51,
                            searchKeys: [1, 4],
                            preferDomain: !1,
                            defaultItems: [],
                            items: [],
                            afterInsert: function() {}
                        }, e), addClass("Mention_inited", M.opts.appendTo), M.scroll && removeClass(i, M.scroll), j()
                    },
                    update: N,
                    addItems: function(e) {
                        e = M.opts.defaultItems.concat(e);
                        var t = {};
                        e.filter(function(e) {
                            return !t[e[0]] && (t[e[0]] = !0, !0)
                        }), N({
                            defaultItems: e,
                            items: e
                        })
                    }
                }
            }();
        window.Mention = C
    },
    sWID: function(e, t, n) {
        "use strict";

        function i(e) {
            return (i = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.getAppropriateImage = function(e, t, n) {
            var i = [];
            if (o(e, function(e, t) {
                    n && -1 == ["w", "z", "y", "x", "m", "s"].indexOf(e) || i.push(t)
                }), !i.length) return [!1];
            i.sort(function(e, t) {
                return e[1] - t[1]
            }), t *= window.devicePixelRatio >= 2 ? 2 : 1;
            var a = i[i.length - 1];
            return o(i, function(e, n) {
                if (n[1] >= t) return a = n, !1
            }), a
        }, t.preloadImage = function(e, t) {
            if (!0 === s[e]) return t && t(), !0;
            if (isArray(s[e])) return s[e].push(t), !1;
            s[e] = [t];
            var n = new Image;
            return n.onload = function() {
                var t = s[e];
                s[e] = !0, o(t, function(e, t) {
                    t && t()
                })
            }, n.src = e, !1
        }, t.mailruStatsPixel = function(e, t) {
            if (isObject(t) && !isEmpty(t)) {
                var n = "https://vk-callback.go.mail.ru/longread_pxl?action=".concat(e);
                o(t, function(e, t) {
                    n += "&".concat(e, "=").concat(t)
                }), (new Image).src = n
            }
        }, t.getUrlParam = function(e) {
            e = e.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
            var t = new RegExp("[\\?&]" + e + "=([^&#]*)").exec(location.search);
            return null === t ? "" : decodeURIComponent(t[1].replace(/\+/g, " "))
        }, t.changeHeightInstagramEmbed = function(e) {
            if (!/^https?:\/\/([\w-]+\.)*(instagram\.com|instagr\.am)$/.test(e.origin)) return;
            var t = function(e) {
                for (var t, n = document.getElementsByTagName("iframe"), i = n.length - 1; i >= 0; i--) {
                    var a = n[i];
                    if (a.contentWindow === e.source) {
                        t = a;
                        break
                    }
                }
                return t
            }(e);
            if (!t) return;
            try {
                e = JSON.parse(e.data)
            } catch (e) {}
            if ("object" != i(e) || "string" != typeof e.type || "object" != i(e.details)) return;
            setTimeout(function() {
                if ("MEASURE" === e.type) {
                    var n = e.details.height;
                    t.setAttribute("height", n)
                }
            }, 100)
        }, t.ArticleStatsEvents = t.ObjectResizeType = t.ResizableObjectTypes = t.ParagraphType = void 0;
        var a = {
            Text: 1,
            Header1: 2,
            Header2: 3,
            Header3: 4,
            Code: 5,
            NumericList: 6,
            BulletList: 7,
            Quote: 8,
            Quote2: 9,
            ObjectAudioPlaylist: 100,
            ObjectPhoto: 101,
            ObjectVideo: 102,
            ObjectGIF: 103,
            ObjectPodcast: 104,
            ObjectAudio: 105,
            ObjectTwitter: 106,
            ObjectFacebook: 107,
            ObjectInstagram: 108,
            ObjectVK: 109,
            ObjectTelegram: 110,
            ObjectPoll: 111,
            ObjectMarketItem: 112,
            ObjectAliExpressProduct: 113
        };
        t.ParagraphType = a;
        var r = [a.ObjectPhoto, a.ObjectGIF, a.ObjectVideo, a.ObjectTwitter, a.ObjectFacebook, a.ObjectInstagram, a.ObjectVK, a.ObjectTelegram];
        t.ResizableObjectTypes = r;
        t.ObjectResizeType = {
            Normal: 0,
            Float: 1,
            Medium: 2,
            Large: 3
        };

        function o() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                t = arguments.length > 1 ? arguments[1] : void 0;
            for (var n in e)
                if (Object.prototype.hasOwnProperty.call(e, n) && !1 === t.call(e[n], n, e[n])) break;
            return e
        }
        t.ArticleStatsEvents = {
            clickOnVideo: "click_on_video",
            clickOnAudio: "click_on_audio",
            clickOnPhoto: "click_on_photo",
            clickOnExternalLink: "external_link_click",
            clickOnCarouselNext: "click_on_carousel_next",
            clickOnCarouselPrev: "click_on_carousel_prev",
            clickOnMentions: "click_on_mentions",
            nightModeOn: "night_mod_on",
            nightModeOff: "night_mod_off",
            close: "close"
        };
        var s = {}
    },
    sXAB: function(e, t, n) {
        "use strict";
        var i = n("UxAg"),
            a = n("OcsD"),
            r = (0, a.need)("ajax"),
            o = (0, a.need)("onDOMReady"),
            s = (0, a.need)("onBodyResize");
        window.CookiePolicy = {}, o(c), CookiePolicy._onHideClick = d;
        var l = {
            body: "body",
            fixedHeader: "._hfixed",
            cookiePolicy: ".CookiePolicy"
        };

        function c() {
            (0, i.$)(l.cookiePolicy) && (u(), s(u))
        }

        function u() {
            if ((0, i.$)(l.fixedHeader)) {
                var e = (0, i.$)(l.body),
                    t = (0, i.$)(l.cookiePolicy).offsetHeight,
                    n = parseInt(getComputedStyle(e).paddingBottom, 10);
                e.style.paddingBottom = "".concat(n + t + 7, "px")
            }
        }

        function d(e, t) {
            e.preventDefault();
            var n = t.getAttribute("href");
            t.closest(l.cookiePolicy).style.display = "none", s("__clear", u), r.post(n, {
                _ajax: 1
            })
        }
    },
    sXaZ: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("z9sQ")) && i.__esModule ? i : {
            default: i
        };
        var r = function(e) {
            var t = e.style || [],
                n = e.class || e.mix,
                i = e.prefix,
                r = e.postfix,
                o = function(e) {
                    var t = [];
                    isArray(e.on_key_down) ? (e.on_key_down.push("event"), t = e.on_key_down) : e.on_key_down && (t = [e.on_key_down, "event"]);
                    return {
                        class: "TextInput__native",
                        id: e.id,
                        tag: "input",
                        type: e.type,
                        name: e.name,
                        value: e.value,
                        spellcheck: e.spellcheck + "",
                        placeholder: e.placeholder,
                        autocapitalize: !1 === e.autocapitalize ? "off" : null,
                        autocomplete: !1 === e.autocomplete ? "off" : null,
                        tabindex: e.tabindex,
                        readonly: e.readonly,
                        disabled: e.disabled,
                        oninput: e.on_change,
                        onkeydown: t,
                        onblur: e.onblur,
                        onfocus: e.onfocus,
                        maxlength: e.maxlength
                    }
                }(e);
            return {
                class: [a.default.class("TextInput", {
                    style_stretch: t.stretch,
                    prefixed: !!i,
                    hidden: "hidden" === e.type,
                    error: t.error
                }), n],
                tag: "label",
                onclick: e.on_click,
                inner: i || r ? [i ? {
                    class: a.default.class("TextInput__prefix", {
                        rightPadding: i.with_right_padding,
                        gray: i.gray
                    }),
                    inner: i.text
                } : null, {
                    class: "TextInput__nativeWrap",
                    inner: o
                }, r ? {
                    class: "TextInput__postfix",
                    inner: r.text
                } : null] : o
            }
        };
        t.default = r
    },
    sZWN: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.hideHeader = E, t.showHeader = S;
        var i, a, r, o, s, l = n("OcsD"),
            c = ".basis__header",
            u = "basis__header_noshadow",
            d = "basis__header_noshadowAnim",
            f = "basis__header_noTransition",
            h = "basis__header_hidden",
            p = "BottomMenu__updateButton_offset",
            A = 5,
            m = 20,
            _ = 200,
            v = !1,
            g = (0, l.scrollTop)(),
            y = 56,
            b = !1,
            w = !1,
            k = [];

        function E() {
            (arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : P()).classList.add(h)
        }

        function S() {
            (arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : P()).classList.remove(h)
        }

        function C() {
            if (v && (clearInterval(s), (0, l.onBodyScroll)("__clear", a), removeEvent(window, "touchend", r), k.forEach(function(e) {
                    removeEvent(e, "blur", r)
                }), v = !1), !v) {
                i = P(), y = parseInt((0, l.getStyle)(i, "height"), 10), g = (0, l.scrollTop)();
                var e = $(".BottomMenu__updateButton");
                i && (i.classList.add(f), S(i), e && e.classList.remove(p)), M(i, (0, l.scrollTop)()), a = function() {
                    b = !0
                }, r = function() {
                    clearInterval(o), o = setTimeout(function() {
                        var t = (0, l.ge)("mcont");
                        if (t) {
                            var n = Math.max(t.scrollHeight, parseInt((0, l.getStyle)(t, "height"), 10));
                            window.innerHeight > n && n && (S(i), e && e.classList.remove(p))
                        }
                    }, 100)
                }, setTimeout(function() {
                    b = !1
                }, 0), setTimeout(function() {
                    i && i.classList.remove(f)
                }, 200), v || (s = setInterval(function() {
                    b && (function() {
                        var e = (0, l.scrollTop)();
                        if (i) {
                            M(i, e);
                            var t = (0, l.ge)("mcont");
                            if (t) {
                                var n = $(".BottomMenu__updateButton"),
                                    a = Math.max(t.scrollHeight, parseInt((0, l.getStyle)(t, "height"), 10));
                                if (w && e) return;
                                if (Math.abs(g - e) <= y) return;
                                e > g + m && e > y ? (E(i), n && n.classList.add(p), w = !0, setTimeout(function() {
                                    w = !1
                                }, _)) : e + window.innerHeight < a && (S(i), n && n.classList.remove(p))
                            }
                            g = e
                        }
                    }(), b = !1)
                }, 250), (0, l.onBodyScroll)(a), addEvent(window, "touchend", r), (k = Array.from($$("input, textarea") || [])).forEach(function(e) {
                    addEvent(e, "blur", r)
                }), v = !0)
            }
        }

        function M(e, t) {
            t <= A && e && e.classList.contains(u) ? e.classList.add(d) : e && e.classList.remove(d)
        }

        function P() {
            return $(c)
        }

        function T() {
            (i = P()) && (S(i), M(i, (0, l.scrollTop)()))
        }
        onDOMReady(function() {
            C(), window.page.onChange(C), onBodyResize(T), addEvent(window, "orientationchange", T), addEvent(window, "blur", T)
        })
    },
    saGk: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("nJnv")) && i.__esModule ? i : {
            default: i
        };
        var r = window.isMVK ? "mvk" : "web",
            o = {
                start: function(e, t) {
                    var n = this;
                    if (t.stopPropagation(), t.preventDefault(), this.id = window.domData(e, "id"), this.id && (window.statlogsValueEvent("special_event", "click", r, this.id), !this.timeoutHandle)) {
                        var i = Number(window.domData(e, "v")) || 0;
                        this.duration || (this.duration = Number(window.domData(e, "duration")) || 0), this.duration && (!this.animationData || !this.animationData.v || "number" == typeof this.v && this.v !== i ? (this.v = i, this._getAnimation().then(function(e) {
                            n.animationData = JSON.parse(e), n._play()
                        })) : this._play())
                    }
                },
                _getAnimation: function() {
                    var e = this;
                    return new Promise(function(t) {
                        var n = new XMLHttpRequest;
                        n.open("GET", "/images/stickers/special/".concat(e.id, "/animation.json?v=").concat(e.v), !0), n.send(), n.onreadystatechange = function() {
                            4 === n.readyState && t(n.responseText)
                        }
                    })
                },
                _play: function() {
                    var e = this;
                    this.frame || (this.frame = document.createElement("div"), this.frame.className = "special_event_frame", document.body.appendChild(this.frame)), this.frame.style.display = "block";
                    var t = a.default.loadAnimation({
                        container: this.frame,
                        renderer: "svg",
                        loop: !0,
                        autoplay: !0,
                        animationData: this.animationData
                    });
                    this.timeoutHandle = setTimeout(function() {
                        t.stop(), t.destroy(), e.frame.style.display = "none", e.timeoutHandle = null, window.statlogsValueEvent("special_event", "showed", r, e.id)
                    }, this.duration)
                }
            };
        t.default = o
    },
    sc7o: function(e, t, n) {
        "use strict";
        var i, a = (i = n("+cqQ")) && i.__esModule ? i : {
            default: i
        };
        window.uVK = {
            onReady: (0, a.default)(),
            onResize: (0, a.default)(),
            onOrientationChange: (0, a.default)()
        }, onDOMReady(function() {
            if (window.isNewMail && document.body) {
                uVK.onReady();
                var e = document.body.getAttribute("onresize"),
                    t = document.body.getAttribute("onorientationchange");
                document.body.setAttribute("onresize", "uVK.onResize(); ".concat(e)), document.body.setAttribute("onorientationchange", "uVK.onOrientationChange(); ".concat(t))
            }
        })
    },
    sdz3: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.onOpen = function() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "default";
            if (b) return;
            if (k = !1, b = !0, r = !1, s = 0, l = 0, u = 0, d = 0, E = {}, void 0, h = "start", p = 0, S = 0, "top" !== (w = e) && "bottom" !== w) return void document.body.classList.add("ScrollViewsDisabled");
            window.removeEventListener("resize", P), x() < _ && O(0);
            var t = document.body;
            c = t.offsetHeight, t.offsetWidth, (a.default.ipad || (a.default.iphone || a.default.ipod) && a.default.ios >= 8) && (window.addEventListener("scroll", C), "top" === w && L() || (D(), T()), "bottom" === w && a.default.ipad && requestAnimationFrame(function() {
                T(), requestAnimationFrame(function() {
                    T()
                })
            }))
        }, t.onClose = function() {
            if (!b) return;
            "top" === w || "bottom" === w ? (o && clearTimeout(o), window.removeEventListener("resize", P), window.removeEventListener("scroll", C), window.removeEventListener("scroll", M)) : document.body.classList.remove("ScrollViewsDisabled");
            k = !1, w = "", b = !1, r = !1, c = 0, 0
        }, t.isKeyboardOpen = function() {
            return b
        }, t.adjustBottom = function() {
            if ("bottom" !== w) return;
            (a.default.ipad || a.default.wkwebview) && (O(0), T(c))
        }, t.getPosition = function() {
            return w
        };
        var i, a = (i = n("jk6M")) && i.__esModule ? i : {
            default: i
        };
        var r, o, s, l, c, u, d, f, h, p, A = 45,
            m = 85,
            _ = 200,
            v = 60,
            g = 0,
            y = 0,
            b = !1,
            w = "",
            k = !1,
            E = {},
            S = 0;

        function C() {
            if (D(), "top" !== w) {
                if ("bottom" === w) {
                    var e = pageYOffset,
                        t = x();
                    if (r)
                        if (r = !1, t ? I(t) : c, e === u) return;
                    a.default.wkwebview ? d <= 5 && T() : e > _ ? e > t ? (O(e), a.default.safari && !a.default.wkwebview && T()) : e < t ? E[e] || e > I(t) ? (E[e] = !0, T(c)) : T() : e !== I(t) && T() : t || (e < v ? (s === e ? l++ : (s = e, l = 1), l >= 3 && (window.removeEventListener("scroll", C), O(s)), setTimeout(function() {
                        T()
                    }, 300)) : T())
                }
            } else {
                if (L()) return;
                if (a.default.wkwebview) return void(0 !== pageYOffset && T(0));
                var n = innerHeight;
                if ("start" === h && (n < c ? h = "animate" : T(1)), "animate" === h)
                    if (p = c - n, S || (S = Math.max(1, Math.min(4, Math.floor(p / 10)))), p <= 0) h = "stop";
                    else {
                        var i = a.default.ipad ? a.default.version < 11 ? 3 : 2 : 1;
                        T(Math.min(p, S) * i)
                    }
                "stop" === h && T(1)
            }
        }

        function M() {
            D()
        }

        function P() {
            f && clearTimeout(f), window.removeEventListener("scroll", C), f = setTimeout(function() {
                document.activeElement.blur()
            }, 100)
        }

        function T(e) {
            r = !0;
            var t, n = x();
            "bottom" === w ? t = e || (n && !a.default.wkwebview ? I(n) : c) : "top" === w && (t = isFinite(e) ? e : 1), d++, u = t, window.scrollTo(0, t)
        }

        function D() {
            o && clearTimeout(o), k || (o = setTimeout(function() {
                k = !0, o = null, window.removeEventListener("scroll", C), window.removeEventListener("scroll", M), window.addEventListener("resize", P)
            }, 500))
        }

        function I(e) {
            if (a.default.ipad) return e;
            if (!a.default.ipad && !a.default.wkwebview) {
                if (90 === Math.abs(window.orientation) && screen.width >= 375) return e;
                375 === screen.width && 812 === screen.height && 3 === window.devicePixelRatio ? e -= m : e -= A
            }
            return e
        }

        function x() {
            return 90 === Math.abs(window.orientation) ? g : y
        }

        function O(e) {
            90 === Math.abs(window.orientation) ? g = e : y = e
        }

        function L() {
            return 90 === Math.abs(window.orientation) && !a.default.ipad
        }
    },
    seaN: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.SearchHeader = o, t.default = void 0;
        var i = n("n9zS"),
            a = n("NJ1W"),
            r = n("Q47q");

        function o(e) {
            return {
                inner: [(0, a.Row)({
                    inner: [(0, a.Col)({
                        inner: [(0, a.Row)({
                            inner: [(0, a.Col)({
                                inner: [(0, r.Search)({
                                    header: !0
                                })]
                            }), (0, a.Offset)({
                                small: !0
                            }), (0, a.Col)({
                                inner: [(0, i.Circle)({
                                    header: !0,
                                    size: 20
                                })],
                                auto: !0
                            })]
                        })],
                        flexColumn: !0
                    })]
                })],
                class: "SkeletonSearchHeader",
                tag: "div"
            }
        }
        var s = o;
        t.default = s
    },
    sljx: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.StickersSettings = void 0;
        var i = {
            autoplay: 0,
            setAutoplay: function(e) {
                this.autoplay = e
            },
            getAutoplay: function() {
                return i.autoplay
            }
        };
        t.StickersSettings = i
    },
    sn7E: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        s(n("bZ/P"));
        var i = s(n("29dZ")),
            a = s(n("Y6JH")),
            r = s(n("TYsd")),
            o = s(n("z9sQ"));

        function s(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        var l = function(e) {
            var t = e.keyboard,
                n = e.msgId;
            return {
                class: "BotsKeyboard__main",
                inner: t.buttons.map(function(e) {
                    return function(e, t, n) {
                        return {
                            class: "BotsKeyboard__row",
                            inner: e.map(function(e) {
                                return function(e, t, n) {
                                    var s, l = window.lang,
                                        c = e.action.type,
                                        u = o.default.class("BotsKeyboard__button", {
                                            primary: "primary" === e.color || "vkpay" === c,
                                            positive: "positive" === e.color,
                                            negative: "negative" === e.color
                                        }, "--"),
                                        d = ["uMailWrite._onKeyboardButtonClick", "this", "event", {
                                            action: e.action,
                                            authorId: t.author_id,
                                            inline: t.inline,
                                            msgId: n
                                        }];
                                    s = "vkpay" === c ? [{
                                        class: "BotsKeyboard__buttonInner",
                                        inner: [r.default.wrap(l.mobile_mail_keyboard_label_vkpay), r.default.wrap("&nbsp;"), r.default.wrap("&nbsp;"), (0, a.default)("mail/bot_buttons", "vkpay")]
                                    }] : "location" === c ? [{
                                        class: "BotsKeyboard__buttonInner",
                                        inner: [{
                                            tag: "span",
                                            class: "BotsKeyboard__leadingIcon",
                                            inner: (0, a.default)("mail/bot_buttons", "place_24")
                                        }, r.default.wrap("&nbsp;"), r.default.wrap(l.mobile_mail_keyboard_label_location)]
                                    }] : "open_app" === c ? [{
                                        class: "BotsKeyboard__buttonInner",
                                        inner: [{
                                            tag: "span",
                                            class: "BotsKeyboard__leadingIcon",
                                            inner: (0, a.default)("mail/bot_buttons", "service_24")
                                        }, r.default.wrap("&nbsp;"), r.default.wrap(e.action.label)]
                                    }] : [r.default.wrap(e.action.label)];
                                    return (0, i.default)({
                                        class: u,
                                        on_click: d,
                                        use_native_onclick: !0,
                                        inner: s,
                                        theme: "none",
                                        size: "normal",
                                        type: "button"
                                    })
                                }(e, t, n)
                            })
                        }
                    }(e, t, n)
                })
            }
        };
        t.default = l
    },
    t7Ww: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.ModalMenuBtn = function(e) {
            var t = e.class ? " ".concat(e.class) : "";
            return (0, a.default)({
                url: e.url,
                class: "ModalMenu__btn ModalMenu__item".concat(t),
                theme: e.theme ? e.theme : "none",
                size: e.size ? e.size : "",
                inner: e.inner,
                on_click: e.onclick,
                use_native_onclick: !0,
                attrs: e.attrs
            })
        }, t.default = void 0;
        var i = r(n("r/ag")),
            a = r(n("29dZ"));

        function r(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        var o = function(e) {
            var t = e.attached ? "ModalMenu--attached" : "",
                n = window.lang,
                r = [];
            if (e.title && r.push({
                    class: "ModalMenu__title",
                    inner: e.title
                }), e.body && r.push({
                    class: "ModalMenu__body",
                    inner: e.body
                }), isArray(e.items)) {
                var o = e.items.map(function(e) {
                    return e
                });
                r.push(o)
            }
            return e.close && r.push((0, a.default)({
                class: "ModalMenu__btn ModalMenu__cancel",
                theme: "secondary",
                size: "large",
                inner: e.closeText ? e.closeText : n.mobile_cancel,
                on_click: e.onClose ? e.onClose : ["ModalMenu.close", "this"],
                use_native_onclick: !0
            })), (0, i.default)({
                class: "ModalMenu ".concat(e.class, " ").concat(t),
                on_overlay_click_native: e.on_overlay_click ? e.on_overlay_click : ["ModalMenu.close", "this"],
                content: r
            })
        };
        t.default = o
    },
    t7n3: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.vkLocal = l, t.lTimeout = function(e, t) {
            return setTimeout(l(e), t)
        }, t.intval = c, t.floatval = function(e) {
            if (!0 === e) return 1;
            return parseFloat(e) || 0
        }, t.positive = function(e) {
            return (e = c(e)) < 0 ? 0 : e
        }, t.isNumeric = function(e) {
            return !isNaN(e)
        }, t.winToUtf = function(e) {
            return e.replace(/&#(\d\d+);/g, function(e, t) {
                return (t = c(t)) >= 32 ? String.fromCharCode(t) : e
            }).replace(/&quot;/gi, '"').replace(/&lt;/gi, "<").replace(/&gt;/gi, ">").replace(/&amp;/gi, "&")
        }, t.clean = function(e) {
            return e ? e.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&#039;") : ""
        }, t.unclean = function(e) {
            return (0, o.replaceEntities)(e.replace(/\t/g, "\n"))
        }, t.indexOf = u, t.inArray = function(e, t) {
            return -1 !== u(t, e)
        }, t.clone = function e(t, n) {
            var i = (0, o.isObject)(t) || void 0 === t.length ? {} : [];
            for (var a in t)(!/webkit/i.test(_ua) || "layerX" != a && "layerY" != a && "webkitMovementX" != a && "webkitMovementY" != a) && (n && "object" === s(t[a]) && "prototype" !== a && null !== t[a] ? i[a] = e(t[a]) : i[a] = t[a]);
            return i
        }, t.arrayKeyDiff = function(e) {
            var t = {},
                n = arguments.length,
                i = arguments;
            for (var a in e)
                if (e.hasOwnProperty(a)) {
                    for (var r = !1, o = 1; o < n; o++) i[o][a] && i[o][a] === e[a] && (r = !0);
                    r || (t[a] = e[a])
                }
            return t
        }, t.extend = d, t.addTemplates = function(e) {
            window.templates = window.templates || {}, d(window.templates, e)
        }, t.getTemplate = function(e, t) {
            var n = (window.templates = window.templates || {})[e];
            "function" == typeof n && (n = n());
            if (n && t) return (0, i.rs)(n, t);
            return n || ""
        }, t.serializeForm = function(e) {
            if ("object" !== s(e)) return !1;
            var t = {},
                n = function(t) {
                    return (0, i.geByTag)(t, e)
                },
                a = function(n, a) {
                    if (a.name)
                        if ("text" !== a.type && a.type)
                            if (a.getAttribute("bool")) {
                                var o = (0, i.val)(a);
                                if (!o || "0" === o) return;
                                t[a.name] = 1
                            } else t[a.name] = r.browser.msie && !a.value && e[a.name] ? e[a.name].value : a.value;
                    else t[a.name] = (0, i.val)(a)
                };
            return (0, o.each)(n("input"), function(e, t) {
                if ("radio" !== t.type && "checkbox" !== t.type || t.checked) return a(e, t)
            }), (0, o.each)(n("select"), a), (0, o.each)(n("textarea"), a), t
        }, t.extractUrls = function(e, t) {
            var n, i = t ? /(?:([!()?., \n\r\t \u00A0]|^)((https?:\/\/)?((?:[a-z0-9_\-]+\.)+(?:[a-z]{2,10}|xn--p1ai|xn--j1amh|xn--80asehdb|xn--80aswg))(\/.*?)?(\#.*?)?)(?:[\.!:;,\*\(\)&]*(&nbsp;|[ \t\r\n \u00A0]|$))|([!()?., \n\r\t \u00A0]|^)((https?:\/\/)?((?:[a-z0-9-_\-]+\.)+(?:||||))(\/.*?)?(\#.*?)?)(?:[\.!:;,\*\(\)&]*(&nbsp;|[ \t\r\n \u00A0]|$)))/i : /(?:([!()?., \n\r\t \u00A0]|^)((https?:\/\/)?((?:[a-z0-9_\-]+\.)+(?:[a-z]{2,10}|xn--p1ai|xn--j1amh|xn--80asehdb|xn--80aswg))(\/.*?)?(\#.*?)?)(?:[\.!:;,\*\(\)]*(&nbsp;|[ \t\r\n \u00A0]))|([!()?., \n\r\t \u00A0]|^)((https?:\/\/)?((?:[a-z0-9-_\-]+\.)+(?:||||))(\/.*?)?(\#.*?)?)(?:[\.!:;,\*\(\)]*(&nbsp;|[ \t\r\n \u00A0])))/i,
                a = [];
            for (; e && (n = e.match(i));) {
                e = e.substr(n.index + n[0].length);
                var r = 0;
                n[4] || (r = 7), a.push({
                    url: n[2 + r],
                    query: n[5 + r] || "",
                    domain: n[4 + r]
                })
            }
            return a
        }, t.getCaretCharacterOffsetWithin = function(e) {
            if (!e) return [0, 0];
            var t = 0,
                n = 0,
                i = e.ownerDocument || e.document,
                a = i.defaultView || i.parentWindow;
            if (a.getSelection().rangeCount > 0) {
                var r = a.getSelection().getRangeAt(0),
                    o = r.cloneRange();
                o.selectNodeContents(e), o.setEnd(r.startContainer, r.startOffset), t = o.toString().length, o.setEnd(r.endContainer, r.endOffset), n = o.toString().length
            }
            return [t, n]
        }, t.formatCount = function e(t) {
            var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
            var i = n.kLimit || 1e3;
            var r = n.mLimit || 1e6;
            if (t >= r && !n.noCheck) return t = (t = c(t / 1e5)) > 1e3 ? c(t / 10) : t / 10, e(t, d(n, {
                noCheck: !0
            }), !0) + "M";
            if (t >= i && !n.noCheck) return t = (t = c(t / 100)) > 100 ? c(t / 10) : t / 10, e(t, d(n, {
                noCheck: !0
            }), !0) + "K";
            return (0, a.langNumeric)(t, "%s", !0).replace(/,/g, ".")
        }, t.initUtilsCommon = function() {
            window.PageID = window.PageID || 1
        }, Object.defineProperty(t, "rand", {
            enumerable: !0,
            get: function() {
                return o.rand
            }
        }), Object.defineProperty(t, "replaceEntities", {
            enumerable: !0,
            get: function() {
                return o.replaceEntities
            }
        }), Object.defineProperty(t, "isArray", {
            enumerable: !0,
            get: function() {
                return o.isArray
            }
        }), Object.defineProperty(t, "isEmpty", {
            enumerable: !0,
            get: function() {
                return o.isEmpty
            }
        }), Object.defineProperty(t, "isFunction", {
            enumerable: !0,
            get: function() {
                return o.isFunction
            }
        }), Object.defineProperty(t, "isHttpHref", {
            enumerable: !0,
            get: function() {
                return o.isHttpHref
            }
        }), Object.defineProperty(t, "isObject", {
            enumerable: !0,
            get: function() {
                return o.isObject
            }
        }), Object.defineProperty(t, "isString", {
            enumerable: !0,
            get: function() {
                return o.isString
            }
        }), Object.defineProperty(t, "isUndefined", {
            enumerable: !0,
            get: function() {
                return o.isUndefined
            }
        }), Object.defineProperty(t, "irand", {
            enumerable: !0,
            get: function() {
                return o.irand
            }
        }), Object.defineProperty(t, "escapeAttr", {
            enumerable: !0,
            get: function() {
                return o.escapeAttr
            }
        }), Object.defineProperty(t, "escapeRE", {
            enumerable: !0,
            get: function() {
                return o.escapeRE
            }
        }), Object.defineProperty(t, "escapeStr", {
            enumerable: !0,
            get: function() {
                return o.escapeStr
            }
        }), Object.defineProperty(t, "each", {
            enumerable: !0,
            get: function() {
                return o.each
            }
        }), Object.defineProperty(t, "htsc", {
            enumerable: !0,
            get: function() {
                return o.htsc
            }
        }), Object.defineProperty(t, "copy", {
            enumerable: !0,
            get: function() {
                return o.copy
            }
        }), Object.defineProperty(t, "vkNow", {
            enumerable: !0,
            get: function() {
                return o.vkNow
            }
        }), Object.defineProperty(t, "locBase", {
            enumerable: !0,
            get: function() {
                return o.locBase
            }
        }), Object.defineProperty(t, "unescapeAttr", {
            enumerable: !0,
            get: function() {
                return o.unescapeAttr
            }
        }), Object.defineProperty(t, "utf2win", {
            enumerable: !0,
            get: function() {
                return o.utf2win
            }
        }), Object.defineProperty(t, "srand", {
            enumerable: !0,
            get: function() {
                return o.srand
            }
        }), Object.defineProperty(t, "stripTags", {
            enumerable: !0,
            get: function() {
                return o.stripTags
            }
        }), t.decodeHtml = t.encodeHtml = t.isRetina = t.stripHTML = t.trim = t.vkImage = void 0;
        var i = n("zxIV"),
            a = n("4+be"),
            r = n("gdug"),
            o = n("jE6c");

        function s(e) {
            return (s = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }

        function l(e) {
            var t = PageID;
            return function() {
                t === PageID && e.apply(this, arguments)
            }
        }
        t.vkImage = function() {
            return window.Image ? new Image : (0, i.ce)("img")
        };
        t.trim = function(e) {
            return (e || "").replace(/^\s+|\s+$/g, "")
        };

        function c(e) {
            return !0 === e ? 1 : parseInt(e) || 0
        }

        function u(e, t, n) {
            for (var i = n || 0, a = (e || []).length; i < a; i++)
                if (e[i] == t) return i;
            return -1
        }

        function d() {
            var e = arguments,
                t = e.length,
                n = e[0] || {},
                i = 1,
                a = !1;
            for ("boolean" == typeof n && (a = n, n = e[1] || {}, i = 2), "object" === s(n) || (0, o.isFunction)(n) || (n = {}); i < t; i++) {
                var r = e[i];
                if (null != r)
                    for (var l in r)
                        if (r.hasOwnProperty(l)) {
                            var c = n[l],
                                u = r[l];
                            n !== u && (a && u && "object" === s(u) && !u.nodeType ? n[l] = d(a, c || (null != u.length ? [] : {}), u) : void 0 !== u && (n[l] = u))
                        }
            }
            return n
        }
        t.stripHTML = function(e) {
            return e ? e.replace(/<(?:.|\s)*?>/g, "") : ""
        };
        t.isRetina = function() {
            return window.devicePixelRatio >= 2
        };
        var f, h = function(e, t) {
                return function(e) {
                    if (Array.isArray(e)) return e
                }(e) || function(e, t) {
                    if (!(Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e))) return;
                    var n = [],
                        i = !0,
                        a = !1,
                        r = void 0;
                    try {
                        for (var o, s = e[Symbol.iterator](); !(i = (o = s.next()).done) && (n.push(o.value), !t || n.length !== t); i = !0);
                    } catch (e) {
                        a = !0, r = e
                    } finally {
                        try {
                            i || null == s.return || s.return()
                        } finally {
                            if (a) throw r
                        }
                    }
                    return n
                }(e, t) || function() {
                    throw new TypeError("Invalid attempt to destructure non-iterable instance")
                }()
            }((f = null, [function(e) {
                return f || (f = (0, i.se)("<span> </span>")), f.innerText = e, f.innerHTML
            }, function(e) {
                return f || (f = (0, i.se)("<span> </span>")), f.innerHTML = e.replace(/<br\s*\/?>/gim, "\n"), f.innerText
            }]), 2),
            p = h[0],
            A = h[1];
        t.decodeHtml = A, t.encodeHtml = p
    },
    tMHi: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.audioUnmaskSource = function(e) {
            if ((!window.wbopen || !~(window.open + "").indexOf("wbopen")) && ~e.indexOf("audio_api_unavailable")) {
                var t, n, i = e.split("?extra=")[1].split("#"),
                    o = "" === i[1] ? "" : r(i[1]);
                if (i = r(i[0]), "string" != typeof o || !i) return e;
                for (var s = (o = o ? o.split(String.fromCharCode(9)) : []).length; s--;) {
                    if (n = o[s].split(String.fromCharCode(11)), t = n.splice(0, 1, i)[0], !a[t]) return e;
                    i = a[t].apply(null, n)
                }
                if (i && "http" === i.substr(0, 4)) return i
            }
            return e
        };
        var i = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMN0PQRSTUVWXYZO123456789+/=",
            a = {
                v: function(e) {
                    return e.split("").reverse().join("")
                },
                r: function(e, t) {
                    var n;
                    e = e.split("");
                    for (var a = i + i, r = e.length; r--;) ~(n = a.indexOf(e[r])) && (e[r] = a.substr(n - t, 1));
                    return e.join("")
                },
                s: function(e, t) {
                    var n = e.length;
                    if (n) {
                        var i = function(e, t) {
                                var n = e.length,
                                    i = [];
                                if (n) {
                                    var a = n;
                                    for (t = Math.abs(t); a--;) t = (n * (a + 1) ^ t + a) % n, i[a] = t
                                }
                                return i
                            }(e, t),
                            a = 0;
                        for (e = e.split(""); ++a < n;) e[a] = e.splice(i[n - 1 - a], 1, e[a])[0];
                        e = e.join("")
                    }
                    return e
                },
                i: function(e, t) {
                    return a.s(e, t ^ vk.id)
                },
                x: function(e, t) {
                    var n = [];
                    return t = t.charCodeAt(0), each(e.split(""), function(e, i) {
                        n.push(String.fromCharCode(i.charCodeAt(0) ^ t))
                    }), n.join("")
                }
            };

        function r(e) {
            if (!e || e.length % 4 == 1) return !1;
            for (var t, n, a = 0, r = 0, o = ""; n = e.charAt(r++);) ~(n = i.indexOf(n)) && (t = a % 4 ? 64 * t + n : n, a++ % 4) && (o += String.fromCharCode(255 & t >> (-2 * a & 6)));
            return o
        }
    },
    tgcV: function(e, t, n) {
        "use strict";
        var i;

        function a(e, t) {
            var n = document.createElement("script");
            n.src = e, n.onload = function() {
                return t(null, n)
            }, n.onerror = function() {
                return t(new Error("Script load error for ".concat(e)))
            }, document.head.append(n)
        }

        function r(e) {
            return new Promise(function(t, n) {
                var i = document.createElement("link");
                i.rel = "stylesheet", i.type = "text/css", i.href = e, i.onload = function() {
                    return t(i)
                }, i.onerror = function() {
                    return n(new Error("Stylesheet load error for ".concat(e)))
                }, document.head.append(i)
            })
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.addStatic = h, t.preloadStaticForNavigation = function(e) {
            var t = window.vk.stNavMap || {};
            for (var n in t) {
                if (t.hasOwnProperty(n))
                    if (new RegExp(n).test(e)) {
                        h(t[n] || {});
                        break
                    }
            }
        }, t.initStaticManager = function() {
            u(), window.stManager = {
                done: f,
                staticFiles: [],
                registerLoadedScript: c
            }
        };
        var o = [];

        function s(e, t) {
            var n = (function() {
                if (void 0 !== i) return i;
                try {
                    var e = document.createElement("b");
                    e.style.display = "flex", i = "flex" === e.style.display
                } catch (e) {
                    i = !1
                }
                return i
            }() ? r : l)(e + "?" + t).catch(function() {
                return window.stManager.staticFiles[e] = null, Promise.resolve()
            });
            return window.stManager.staticFiles[e] = n, n
        }

        function l(e) {
            var t, n = (t = e, new Promise(function(e, n) {
                var i = new XMLHttpRequest;
                i.open("GET", t), i.onload = function() {
                    200 === i.status ? e(i.response) : n(i.response)
                }, i.onerror = function() {
                    n(i.response)
                }, i.send()
            }));
            return n.then(function(e) {
                var t = document.createElement("style");
                t.innerHTML = e, document.head.append(t)
            }), n
        }

        function c(e) {
            window.stManager.staticFiles[e] = Promise.resolve()
        }

        function u() {
            window.vk && window.vk.stFiles ? (Object.keys(window.vk.stFiles).forEach(function(e) {
                return c(e)
            }), window.vk.stFiles = []) : setTimeout(u, 0)
        }

        function d(e, t) {
            var n = window.stManager.staticFiles[e];
            return n || (e.includes(".js") ? function(e, t) {
                var n = e + "?" + t;
                if (e.includes("cmodules/mobile/b-")) return a(n, function(t) {
                    t || (window.stManager.staticFiles[e] = Promise.resolve())
                }), Promise.resolve();
                var i = new Promise(function(t, i) {
                    a(n, function(t) {
                        t && (window.stManager.staticFiles[e] = null, i(t))
                    }), o[e] = function() {
                        t(), o[e] = null
                    }
                }).catch(function() {
                    return Promise.resolve()
                });
                return window.stManager.staticFiles[e] = i, i
            }(e, t) : e.includes(".css") ? s(e, t) : Promise.resolve())
        }

        function f(e) {
            o[e] && o[e]()
        }

        function h() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
            return Promise.all(Object.keys(e).map(function(t) {
                return d(t, e[t])
            }))
        }
    },
    ti65: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.Msg__restoreInner = L, t.Msg__reply = N, t.Msg__authorName = W, t.Msg__replyAttach = V, t.Msg__replyLink = U, t.Msg__textPreview = j, t.Msg__attachPreview = F, t.Msg__gifWrapper = function(e, t) {
            return i.default.html(A(), t, e)
        }, t.Msg_makeReplyLink = B, t.Msg_detailed = function(e) {
            var t = x(e),
                n = e.keyboard ? z(e) : "",
                a = (0, o.default)({
                    mix: "msg__avatar",
                    url: e.authorUrl,
                    photos: [e.authorPhoto],
                    size: 40
                }),
                r = function(e) {
                    var t = window.lang,
                        n = store.mail,
                        i = n.msgs[e.id],
                        a = n.peers[i.peerId],
                        r = "";
                    if ((0, u.isChatPeer)(i.peerId)) {
                        var o = (0, u.wrapCommunityMailUrl)("/mail?act=show&peer=".concat(i.peerId)),
                            s = '<a href="'.concat(o, '">').concat(a.title, "</a>");
                        r = t.mobile_mail_message_to_chat.replace("{chat}", s)
                    }
                    return r
                }(e);
            return i.default.html(S(), a, e.authorUrl, e.authorName, r, e.date, t, n)
        }, t.default = void 0;
        var i = d(n("bZ/P")),
            a = d(n("TYsd")),
            r = d(n("9y81")),
            o = d(n("KMpi")),
            s = d(n("u33z")),
            l = d(n("B+U2")),
            c = d(n("BoyB")),
            u = n("fdw3");

        function d(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }

        function f() {
            var e = D(['\n    <div class="msg__keyboard">\n      ', "\n    </div>\n  "]);
            return f = function() {
                return e
            }, e
        }

        function h() {
            var e = D(['\n    <a class="', '"\n      href="', '"\n      ', "\n      ", '\n      style="width: ', "px; height: ", 'px;"\n    >\n      <img class="msg__stickerImg sticker_img" height="', '" src="', '">\n    </a>\n  ']);
            return h = function() {
                return e
            }, e
        }

        function p() {
            var e = D(['\n    <div class="msg__stickerWrap">\n      ', "\n    </div>\n  "]);
            return p = function() {
                return e
            }, e
        }

        function A() {
            var e = D(['\n    <div class="msg__gifWrapper">\n      <div style="padding-top: ', '%;"></div>\n      <div class="msg__gifWrapperCont">', "</div>\n    </div>\n  "]);
            return A = function() {
                return e
            }, e
        }

        function m() {
            var e = D(['\n    <a href="', '" class="msg__replyLink" ', ">\n      ", "\n    </a>\n  "]);
            return m = function() {
                return e
            }, e
        }

        function _() {
            var e = D(['\n    <div class="msg__replyAttach">', "</div>\n  "]);
            return _ = function() {
                return e
            }, e
        }

        function v() {
            var e = D(['\n    <div class="msg__bodyPreview">\n      ', "\n      ", "\n    </div>\n  "]);
            return v = function() {
                return e
            }, e
        }

        function g() {
            var e = D(['\n    <div class="msg__reply">\n      ', '\n      <div class="msg__replyInner">\n        <div class="msg__replyHead">\n          <div class="msg__replyHeadRow">\n            <div class="msg__replyName">', '</div>\n            <div class="msg__replyDate">', '</div>\n          </div>\n        </div>\n        <div class="msg__replyBody">\n          ', "\n        </div>\n      </div>\n    </div>\n  "]);
            return g = function() {
                return e
            }, e
        }

        function y() {
            var e = D(['\n    <div class="msg__info msg__restoreText msg__restoreText_remove">\n      ', '\n      <span class="msg__restoreText msg__infoLink" ', ">\n        ", '\n      </span>\n    </div>\n    <div class="msg__info msg__restoreText msg__restoreText_spam">\n      ', '\n      <span class="msg__restoreText msg__infoLink" ', ">\n        ", "\n      </span>\n    </div>\n  "]);
            return y = function() {
                return e
            }, e
        }

        function b() {
            var e = D(['\n    <span class="msg__edited">\n      <span class="msg__editedMiddot">&middot;</span><span class="msg__editedText">', "</span>\n    </span>\n  "]);
            return b = function() {
                return e
            }, e
        }

        function w() {
            var e = D(['\n    <div class="msg__admin">\n      (<a class="msg__adminLink" href="', '">', "</a>)\n    </div>\n  "]);
            return w = function() {
                return e
            }, e
        }

        function k() {
            var e = D(['\n    <div class="msg__actions">\n      ', "\n    </div>\n  "]);
            return k = function() {
                return e
            }, e
        }

        function E() {
            var e = D(['\n    <div class="msg_item', '">\n      <div class="mi_header">\n        ', '\n        <a class="msg__author" href="', '">', '</a>\n        <div class="msg__date">', "</div>\n        ", "\n      </div>\n      ", "\n      ", "\n      ", "\n      ", "\n    </div>\n  "]);
            return E = function() {
                return e
            }, e
        }

        function S() {
            var e = D(['\n    <div class="msg__detailed">\n      <div class="msg__detailedHead">\n        ', '\n        <div class="msg__detailedInfo">\n          <div class="msg__detailedRow">\n            <a class="msg__detailedAuthor" href="', '">', '</a>\n            <span class="msg__detailedPeer">', '</span>\n          </div>\n          <div class="msg__detailedRow">\n            <div class="msg__date">', '</div>\n          </div>\n        </div>\n      </div>\n      <div class="msg__content">\n        <div class="msg__text">\n          ', "\n        </div>\n        ", "\n      </div>\n    </div>\n  "]);
            return S = function() {
                return e
            }, e
        }

        function C() {
            var e = D(['\n    <div class="msg_item _msg single_msg_item msg__text">\n      <div class="msg__giftMedia">', "</div>\n      ", "\n    </div>\n  "]);
            return C = function() {
                return e
            }, e
        }

        function M() {
            var e = D(['\n    <div class="msg_item _msg single_msg_item msg__text">\n      <div class="mi_cont">\n        <div class="mi_body">\n          ', "\n          ", "\n          ", "\n          ", "\n        </div>\n      </div>\n    </div>\n  "]);
            return M = function() {
                return e
            }, e
        }

        function P() {
            var e = D(["\n    ", '\n    <div class="msg__content">\n      <div class="msg__head">\n        <a class="msg__author" href="', '">', "</a>\n        ", "\n        ", "\n        ", "\n        ", "\n        ", "\n        ", "\n        ", "\n        ", "\n      </div>\n      ", '\n      <div class="msg__text">\n        ', "\n      </div>\n      ", '\n    </div>\n    <div class="msg__restore">\n      ', "\n    </div>\n  "]);
            return P = function() {
                return e
            }, e
        }

        function T() {
            var e = D(['\n    <div class="', '" ', ">\n      ", "\n    </div>\n  "]);
            return T = function() {
                return e
            }, e
        }

        function D(e, t) {
            return t || (t = e.slice(0)), Object.freeze(Object.defineProperties(e, {
                raw: {
                    value: Object.freeze(t)
                }
            }))
        }
        var I = function(e) {
            var t = e.id,
                n = e.removed,
                a = e.service,
                l = function(e) {
                    var t = window.lang;
                    if (e.service) return e.text;
                    var n, a = (0, o.default)({
                            mix: "msg__avatar",
                            url: e.authorUrl,
                            photos: [e.authorPhoto],
                            size: 40
                        }),
                        l = (0, r.default)({
                            mix: "msg__check",
                            icon: "check"
                        }),
                        c = (0, r.default)({
                            mix: "msg__star",
                            icon: "star",
                            blue: !0
                        }),
                        u = !!e.attaches.gift,
                        d = store.mail.msgs[e.id];
                    d && d.authorId === d.peerId && (n = store.mail.peers[d.peerId]);
                    var f, h = e.admin ? (S = e.admin, i.default.html(w(), S.url, S.name)) : "",
                        p = e.removed ? L(e.id) : "",
                        A = e.edited ? O() : "",
                        m = e.pending || e.failed ? "" : '<div class="msg__date">'.concat(e.date, "</div>"),
                        _ = e.pending ? '<div class="msg__pending"></div>' : "",
                        v = e.failed ? '<div class="msg__error">'.concat(t.mobile_mail_send_error, "</div>") : "",
                        g = e.channel ? (b = e.id, E = (0, s.default)({
                            class: "msg__actionForward",
                            onClick: i.default.onClick("Msg._onActionClick", "event", "forward", b)
                        }), i.default.html(k(), E)) : "",
                        y = u && n ? '<div class="msg__giftHead">'.concat(langSex(n.sex, t.mobile_mail_sent_gift), "</div>") : "";
                    var b, E;
                    var S;
                    f = u ? function(e) {
                        var t = e.text,
                            n = e.attachesHTML;
                        t && (t = '<div class="msg__giftText">'.concat(t, "</div>"));
                        return i.default.html(C(), n, t)
                    }(e) : x(e);
                    var M = e.keyboard ? z(e) : "";
                    return i.default.html(P(), a, e.authorUrl, e.authorName, y, m, _, v, A, h, l, c, g, f, M, p)
                }(e),
                c = !a && !(!e.attaches || !e.attaches.gift),
                u = i.default.class("msg", {
                    id: t,
                    service: a,
                    unread: e.unread && !e.failed,
                    important: e.important,
                    removed: !!n,
                    spam: "spam" === n,
                    pending: e.pending,
                    failed: e.failed,
                    gift: c
                }),
                d = "";
            a || (d = e.pending || e.failed ? i.default.onClick("Msg._onPendingClick", "event", "this", t, e.sendId || "", !!e.failed) : i.default.onClick("Msg._onClick", "event", "this", t));
            return i.default.html(T(), u, d, l)
        };

        function x(e) {
            var t, n, a = window.lang,
                r = e.text,
                s = 0;
            e.attachesHTML ? t = e.attachesHTML : e.attaches.sticker && e.sticker ? (n = function(e, t, n) {
                var a = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : "",
                    r = !(arguments.length > 4 && void 0 !== arguments[4]) || arguments[4],
                    o = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : "",
                    s = arguments.length > 6 && void 0 !== arguments[6] ? arguments[6] : "",
                    l = Date.now(),
                    c = Math.random(),
                    u = "".concat(l).concat(c),
                    d = "msg__sticker",
                    f = "";
                s && (d += " sticker_animation", f = '\n      data-animation-path="'.concat(s, '"\n      data-uniq-id="').concat(u, '"\n      data-sticker-id="').concat(e, '"\n      data-loop-count="3"\n      ontouchstart="StickersAnimation.touchStartSticker(this);"\n      ontouchend="StickersAnimation.touchEndSticker(this);"\n    '));
                var p = i.default.onClick("Msg._onStickerClick", "event", "this", r, a);
                return i.default.html(h(), d, o, p, f, t, t, t, n)
            }(e.sticker.id, e.sticker.height, e.sticker.url), t = i.default.html(p(), n)) : $(e) && Object.keys(e.attaches).length && (s += 1, t = H(F(e), !e.failed && 1 === s));
            var l, c = e.forwards;
            c.length && ($(e) && q(c) ? (s += 1, l = H(langNumeric(c.length, a.mobile_mail_N_forwards), !e.failed && 1 === s)) : l = (l = c.map(function(t) {
                return function e(t, n, a) {
                    var r = window.lang;
                    var s = store.mail;
                    var l = s.forwards[t] || s.msgs[t];
                    if (!l) return "";
                    var c = s.members[l.authorId];
                    var u = l.peerId;
                    s.peers[u];
                    var d = W(c, u, s.cur.userId);
                    var f = l.edited;
                    var h = c.avatar;
                    var p = c.url;
                    var A = d;
                    var m = l.date;
                    var _ = l.text;
                    var v = l.attachesHTML;
                    var g = l.forwards;
                    var y = l.reply;
                    var b = (0, o.default)({
                        mix: "mi_author_photo",
                        photos: [h],
                        size: 36
                    });
                    var w = f ? O() : "";
                    var k;
                    if (a > 0) {
                        for (var S = [], C = g.length, M = 0; M < C; M++) {
                            var P = e(g[M], n, a - 1);
                            S.push(P)
                        }
                        k = S.join("")
                    } else if (g.length) {
                        var T = langNumeric(g.length, r.mobile_mail_N_forwards);
                        k = '<a href="/mail?act=msg&id='.concat(n, '" class="msg__fwdsLink">').concat(T, "</a>")
                    }
                    v && (v = v.replace(/%top_msg_id%/g, n), v = '<div class="mi_medias">'.concat(v, "</div>"));
                    k && (k = '<div class="mi_forwarded">'.concat(k, "</div>"));
                    _ && (_ = '<div class="mi_text">'.concat(_, "</div>"));
                    var D = y ? R(y, n) : "";
                    var I = !!l.attaches.gift;
                    var x = I ? " msg__forwardGift" : "";
                    return i.default.html(E(), x, b, p, A, m, w, D, _, v, k)
                }(t, e.id, e.maxDepth - 1)
            })).join(""));
            var d, f = e.reply;
            f && ($(e) && (q([f]) || ! function(e) {
                var t = store.mail;
                return (0, u.isForwardedMessageId)(e) ? !!t.replies[e] : !!t.pendingReplies[e]
            }(f)) ? (s += 1, d = H(a.mobile_mail_in_reply_to, !e.failed && 1 === s)) : d = R(f, e.id));
            return t && (t = '<div class="mi_medias">'.concat(t, "</div>")), l && (l = '<div class="mi_forwarded">'.concat(l, "</div>")), r && (r = '<div class="mi_text">'.concat(r, "</div>")), i.default.html(M(), d, r, t, l)
        }

        function O() {
            var e = window.lang;
            return i.default.html(b(), e.mobile_mail_edited_short)
        }

        function L(e) {
            var t = window.lang,
                n = i.default.onClick("Msg._onRestoreClick", "event", e);
            return i.default.html(y(), t.mobile_msg_mail_message_deleted, n, t.mobile_restore, t.mobile_msg_mail_message_marked_as_spam, n, t.mobile_restore)
        }

        function B(e, t, n) {
            var i = "/mail?act=msg";
            return t ? (i = (0, u.concatValues)(i, "&id=".concat(t, "&reply=true")), n && (i = (0, u.concatValues)(i, "&reply_id=".concat(n)))) : i = (0, u.concatValues)(i, "&id=".concat(e)), (0, u.wrapCommunityMailUrl)(i)
        }

        function R(e, t) {
            var n = store.mail.forwards[e] || store.mail.msgs[e],
                i = store.mail.replies[e] || store.mail.pendingReplies[e];
            return U(N(n, W(store.mail.members[n.authorId], n.peerId, store.mail.cur.userId), i.preview_url), i.msg_id, t, e)
        }

        function N(e, t, n) {
            var a = e.body ? j(e.body) : V(e),
                r = "";
            return (e.attaches.photo || e.attaches.video || e.attaches.doc) && (r = n ? '<div class="msg__replyPreview"\n        style="background-image: url('.concat(n, ')"></div>') : e.attaches.doc ? '<div class="msg__replyPreview msg__replyPreview_icon">\n        <div class="msg__replyPreviewDoc"></div>\n      </div>' : '<div class="msg__replyPreview msg__replyPreview_empty"></div>'), i.default.html(g(), r, t, e.date, a)
        }

        function j(e) {
            return e = e.replace(/<br>/g, "\n"), e = (0, u.mailReplaceDomainMentions)(e, "@$3"), e = (0, u.mailReplaceMentions)(e, "$3"), e = (0, u.emojiToHTML)(e)
        }

        function F(e) {
            var t, n = window.lang,
                i = Object.keys(e.attaches),
                a = i.length;
            if (a > 1) {
                for (var r = 0, o = i.length, s = 0; s < o; s++) r += 0 | e.attaches[i[s]];
                t = langNumeric(r, n.mobile_mail_attachments)
            } else if (1 === a) {
                var l = i[0],
                    c = e.attaches[l];
                if (1 === c) switch (l) {
                    case "poll":
                        t = n.mobile_mail_added_poll;
                        break;
                    case "article":
                        t = n.global_article;
                        break;
                    case "photo":
                        t = n.mobile_mail_added_photo;
                        break;
                    case "video":
                        t = n.mobile_mail_added_video;
                        break;
                    case "audio":
                        t = n.mobile_mail_added_audio;
                        break;
                    case "audio_playlist":
                        t = n.mobile_mail_added_audio_playlist;
                        break;
                    case "money_transfer":
                        t = n.mobile_mail_added_money_transfer;
                        break;
                    case "podcast":
                        t = n.mobile_mail_added_podcast;
                        break;
                    case "money_request":
                        t = n.mobile_mail_added_money_request;
                        break;
                    case "vkpay":
                        t = n.mobile_mail_added_vkpay;
                        break;
                    case "story":
                        t = n.mobile_mail_added_story;
                        break;
                    case "graffiti":
                        t = n.mobile_mail_added_graffiti;
                        break;
                    case "audiomsg":
                        t = n.mobile_mail_added_audiomsg;
                        break;
                    case "doc":
                        t = n.mobile_mail_added_doc;
                        break;
                    case "geo":
                    case "map":
                        t = n.mobile_mail_added_geo;
                        break;
                    case "wall":
                        t = n.mobile_mail_added_wall;
                        break;
                    case "wall_reply":
                        t = n.mobile_mail_added_wall_reply;
                        break;
                    case "gift":
                        t = n.mobile_mail_added_gift;
                        break;
                    case "link":
                        t = n.mobile_mail_added_link;
                        break;
                    case "sticker":
                        t = n.mobile_mail_added_sticker;
                        break;
                    case "market":
                        t = n.mobile_mail_added_market_item;
                        break;
                    case "call":
                        t = n.mobile_mail_added_call
                } else if (c > 1) switch (l) {
                    case "photo":
                        t = langNumeric(c, n.mobile_mail_added_photos);
                        break;
                    case "video":
                        t = langNumeric(c, n.mobile_mail_added_videos);
                        break;
                    case "audio":
                        t = langNumeric(c, n.mobile_mail_added_audios);
                        break;
                    case "doc":
                        t = langNumeric(c, n.mobile_mail_added_docs)
                }
            }
            var u = e.forwards && e.forwards.length || e.hasReply;
            return !t && u && (t = e.hasReply ? langNumeric(1, n.mobile_mail_messages) : langNumeric(e.forwards.length, n.mobile_mail_N_forwards)), t || ""
        }

        function H(e, t) {
            var n;
            return t && (n = (0, c.default)({
                large: !0
            }), n = '<div class="msg__loading">'.concat(n, "</div>")), i.default.html(v(), e, n)
        }

        function V(e) {
            var t = F(e);
            return i.default.html(_(), t)
        }

        function U(e, t, n, a) {
            var r = B(t, n, a),
                o = i.default.onClick("Msg._onReplyClick", "event", t, n, a);
            return i.default.html(m(), r, o, e)
        }

        function z(e) {
            var t = a.default.render((0, l.default)({
                keyboard: e.keyboard,
                msgId: e.id
            }));
            return i.default.html(f(), t)
        }

        function W(e, t, n) {
            return t > 2e9 ? e.name : t > -2e9 && t < 0 ? e.id === n ? e.firstName : e.name : e.firstName
        }

        function q(e) {
            for (var t = store.mail.msgs, n = store.mail.members, i = store.mail.forwards, a = e.length, r = 0; r < a; r++) {
                var o = e[r];
                if ((0, u.isForwardedMessageId)(o)) {
                    var s = i[o];
                    if (!s) return !0;
                    if (!s.authorId || !n[s.authorId]) return !0
                } else {
                    var l = t[o];
                    if (!l) return !0;
                    if (!l.authorId || !n[l.authorId]) return !0
                }
            }
            return !1
        }

        function $(e) {
            return e.pending || e.failed || e.waiting
        }
        t.default = I
    },
    "tlL+": function(e, t, n) {
        "use strict";
        var i = window,
            a = i.remove,
            r = i.lockButton,
            o = i.addClass,
            s = i.obj2qs,
            l = i.domCA,
            c = i.intval,
            u = i.geByClass1,
            d = i.getLang,
            f = i.domData,
            h = i.nav,
            p = i.cdf,
            A = i.append,
            m = i.Friends,
            _ = i.ajax,
            v = i.FriendsStats,
            g = i.throttle,
            y = i.cancelEvent;
        window.FriendsRecommendedSlider = {
            init: function() {
                window.cur && (H($(".".concat(O))), cur.destroy.push(function() {
                    N = null, j = null, F = null
                }))
            },
            hideRecommended: function(e, t, n, i) {
                var r = gpeByClass(k, e);
                if (!r) return i && y(i);
                var o = z(r),
                    l = f(r, "code") || f(o, "code"),
                    c = f(o, "ref");
                ! function(e) {
                    var t = z(e);
                    a(e), F = null, j = null, V().length || U(t)
                }(r);
                var u = b + s({
                    act: w,
                    hash: n,
                    id: t,
                    track_code: l,
                    ref: c
                });
                return _.post(u, {
                    _ajax: 1
                }), i && y(i)
            },
            hideBlock: U,
            acceptFriend: function(e, t, n, i) {
                if (hasClass(E, e)) return i && y(i);
                var a = gpeByClass(k, e),
                    s = z(e),
                    c = f(a, "code") || f(s, "code"),
                    p = f(s, "ref");
                return o(S, e), r(e), m.accept(t, n, "user_rec", 0, p, c, function(t) {
                    var n = t || d(M);
                    unlockButton(e), removeClass(S, e), o(E, e), e.textContent = n,
                        function(e) {
                            var t = function(e) {
                                var t = l(e, x);
                                if (!t) return;
                                return u(P, t)
                            }(e);
                            o(T, t)
                        }(e)
                }, function(t, n) {
                    t === R && h.hard_go(n), removeClass(S, e), unlockButton(e)
                }), i && y(i)
            },
            onOpenUser: function(e) {
                var t = gpeByClass(k, e);
                if (!t) return;
                var n = z(t),
                    i = f(t, "uid") || "",
                    a = f(t, "code") || f(n, "code"),
                    r = f(n, "ref");
                v.log(v.EVENTS.EVENT_OPEN_USER, {
                    uid: i,
                    ref: r,
                    trackCode: a
                })
            },
            onScroll: g(H, 50)
        };
        var b = "/friends",
            w = "hide_possible",
            k = "prettyCard",
            E = "prettyCard__button_accepted",
            S = "prettyCard__button_loading",
            C = "recommended_carousel",
            M = "mobile_friends_feed_recom_got_notification",
            P = "prettyCard__closeButton",
            T = "prettyCard__closeButton_hidden",
            D = "Slider__line",
            I = "Slider__scroll",
            x = ".prettyCard",
            O = "friendsRecommendedSliderWrap",
            L = 500,
            B = 3,
            R = 2,
            N = null,
            j = null,
            F = null;

        function H(e) {
            if (!N && e && (N = z(e)), N && (N._lastScroll = N.scrollLeft, !e.ajaxIsRunning)) {
                var t = N.scrollLeft,
                    n = function() {
                        if (j) return j;
                        if (!N) return {};
                        var e = getSize(N)[0],
                            t = getX(N),
                            n = V(),
                            i = getX(n[0]) - t,
                            a = getSize(n[0])[0],
                            r = getX(n[1]) - t - i - a,
                            o = Math.floor(a / 3);
                        return j = {
                            width: e,
                            itemWidth: a + r,
                            leftMargin: i,
                            part: o,
                            scrollWidth: N.scrollWidth
                        }
                    }(),
                    i = Math.max(0, Math.floor((t - n.leftMargin) / n.itemWidth)),
                    a = Math.max(0, Math.floor((t + n.width - n.leftMargin) / n.itemWidth));
                i * n.itemWidth + n.itemWidth - n.part < t && i++, a * n.itemWidth + n.part > t + n.width && a--;
                var r = V();
                i = Math.max(0, i), a = Math.min(r.length, a);
                for (var o = f(N, "ref"), l = f(N, "code"), d = i; d <= a; d++) {
                    var h = r[d];
                    if (h && !h.viewed) {
                        h.viewed = !0;
                        var m = f(h, "uid") || "",
                            g = f(h, "code") || l;
                        v.log(v.EVENTS.EVENT_VIEW_USER, {
                            uid: m,
                            pos: d,
                            ref: o,
                            trackCode: g
                        })
                    }
                }!e.allLoaded && t + n.width >= n.scrollWidth / 2 && function(e) {
                    (e = z(e)).currentPage = e.currentPage || 1;
                    var t = f(e, "next") || "";
                    if (e.allLoaded || !t || e.currentPage++ >= B) return void(e.allLoaded = !0);
                    var n = f(e, "code") || "",
                        i = f(e, "ref") || "",
                        a = c(f(e, "friend-id")),
                        r = b + s({
                            act: C,
                            next: t,
                            ref: i,
                            friendId: a,
                            track_code: n
                        });
                    e.ajaxIsRunning = !0, _.post(r, {
                        _ajax: 1
                    }, {
                        onDone: function(t, n) {
                            if (t) {
                                var i = u(D, e),
                                    a = p(t);
                                A(a, i), j = null, F = null
                            }
                            f(e, "next", n || null), e.allLoaded = !n, e.ajaxIsRunning = !1
                        },
                        onFail: function() {
                            setTimeout(function() {
                                return e.ajaxIsRunning = !1
                            }, L)
                        }
                    })
                }(e)
            }
        }

        function V() {
            return F || (N && (F = geByClass(k, N)), F || [])
        }

        function U(e, t) {
            var n = gpeByClass(O, e);
            if (!n) return t && y(t);
            var i = N;
            if (!i && e && (i = z(n)), i) {
                var r = f(i, "code"),
                    o = f(i, "ref");
                v.log(v.EVENTS.EVENT_HIDE_BLOCK, {
                    ref: o,
                    trackCode: r
                })
            }
            if (a(n)) {
                var l = h.getQuery();
                delete l.recs, h.go(location.pathname + s(l), !1, {
                    replace: !0,
                    push_only: !0
                })
            }
            return t && y(t)
        }

        function z(e) {
            var t;
            return hasClass(e, I) ? t = e : (t = u(I, e)) || (t = gpeByClass(I, e)), t
        }
    },
    tqgD: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), Object.defineProperty(t, "QRPhotoPosting", {
            enumerable: !0,
            get: function() {
                return i.QRPhotoPosting
            }
        }), Object.defineProperty(t, "QRPhotoPostingButton", {
            enumerable: !0,
            get: function() {
                return i.QRPhotoPostingButton
            }
        }), Object.defineProperty(t, "show", {
            enumerable: !0,
            get: function() {
                return a.show
            }
        }), Object.defineProperty(t, "close", {
            enumerable: !0,
            get: function() {
                return a.close
            }
        }), Object.defineProperty(t, "back", {
            enumerable: !0,
            get: function() {
                return a.back
            }
        }), Object.defineProperty(t, "getQRPhotoButton", {
            enumerable: !0,
            get: function() {
                return a.getQRPhotoButton
            }
        }), Object.defineProperty(t, "appendQRPhotoButton", {
            enumerable: !0,
            get: function() {
                return a.appendQRPhotoButton
            }
        });
        var i = n("IrFw"),
            a = n("xwOv");
        window.QRPhotoPosting = i.QRPhotoPosting, extend(i.QRPhotoPosting, {
            show: a.show,
            close: a.close,
            back: a.back,
            getQRPhotoButton: a.getQRPhotoButton,
            QRPhotoPosting: i.QRPhotoPosting,
            QRPhotoPostingButton: i.QRPhotoPostingButton,
            appendQRPhotoButton: a.appendQRPhotoButton
        })
    },
    tqja: function(e, t, n) {
        "use strict";
        var i, a, r = window,
            o = r.nav,
            s = r.attr,
            l = r.ajax,
            c = (i = "_locked", a = {
                1: "SEND_EMAIL",
                2: "CALL_PHONE",
                6: "OPEN_GROUP_APP"
            }, {
                processButton: function(e, t, n, r, c) {
                    var u = arguments.length > 5 && void 0 !== arguments[5] && arguments[5];
                    if (e.classList.contains(i)) return !1;
                    var d = !0;
                    return a[t] && (d = !1), e.classList.add(i), l.post("/groups", {
                        _ajax: 1,
                        act: "proxy_cta_button",
                        action: t,
                        resource: n,
                        group_id: r,
                        hash: c
                    }, {
                        onDone: function() {
                            if (e.classList.remove(i), u) u();
                            else if (d) {
                                var t = s(e, "href");
                                o.go(t)
                            }
                        }
                    }), !d
                }
            });
        window.GroupActionButton = c
    },
    tsGB: function(e, t, n) {
        "use strict";
        n("UxAg");
        var i = n("jk6M"),
            a = n("OcsD"),
            r = window,
            o = r.each,
            s = r.geByClass,
            l = r.attr,
            c = r.replaceClass,
            u = r.ge,
            d = r.val,
            f = r.addClass,
            h = r.toggleClass,
            p = r.removeClass,
            A = r.ce,
            m = r.addEvent,
            _ = r.removeEvent,
            v = r.extend,
            g = (r.qs2obj, r.vkNow),
            y = r.geByClass1,
            b = r.setStyle,
            w = r.remove,
            k = r.intval,
            E = r.isArray,
            S = r.hasClass,
            C = r.after,
            M = r.cdf,
            P = r.stripTags,
            T = r.getHref,
            D = r.indexOf,
            I = r.htsc,
            x = r.replaceEntities,
            O = r.escapeAttr,
            L = r.replace,
            B = r.scrollTop,
            R = r.before,
            N = r.alLoadingFix,
            j = window.ajax,
            F = window.mediaUpload,
            H = window.nav,
            V = function() {
                var e = {},
                    t = {},
                    n = null,
                    r = !1,
                    D = {},
                    I = {},
                    x = {},
                    q = null;

                function $() {
                    if (n) {
                        var t = [],
                            i = !1;
                        if (o(s("_unread"), function() {
                                var e = +l(this, "data-id");
                                e && t.push(e), i = V.getPeerByMsg(e), c("_unread", "_read", this)
                            }), i) {
                            var a = u("messages" + i);
                            a && e[i] && (e[i].messages = d(a))
                        }
                        t.length && V.sendMarkAsRead(n, t)
                    }
                }

                function G(e, t) {
                    t ? (f("lvi", e), h("mlvi", e, !!i.mobPlatforms[t])) : (p("lvi", e), p("mlvi", e))
                }

                function Q(e) {
                    (0, e.updater)(document.body), o(e.caches, function(t, n) {
                        var i = n.storage,
                            a = n.getter,
                            r = function(e, t) {
                                var n, i = t.split("."),
                                    a = i.length,
                                    r = e;
                                for (n = 0; n < a; n++)
                                    if (!(r = r[i[n]])) return null;
                                return r
                            }(i, a);
                        if (r) {
                            var o = "string" == typeof r;
                            o && (r = A("div", {
                                    innerHTML: r
                                })), e.updater(r),
                                function(e, t, n) {
                                    var i, a, r = t.split("."),
                                        o = r.length - 1,
                                        s = e;
                                    for (a = 0; a < o; a++) s = s[i = r[a]] || (s[i] = {});
                                    s[r[o]] = n
                                }(i, a, o ? r.innerHTML : r)
                        }
                    })
                }
                return !window.isNewMail && H && H.onBeforeGo(function(e, t, n) {
                    if (H.getQuery("community") && (!n || !n.ignore_cur_process) && "/mail" === ("string" == typeof e ? e : l(e, "href") || l(e, "data-href"))) return H.go(e, t, {
                        ignore_cur_process: !0
                    }), !0
                }), !window.isNewMail && H && H.onBeforeGo(function() {
                    if (H.getQuery("community")) var e = j.post("/", {
                        _ajax: 1,
                        act: "ping"
                    }, {
                        onDone: function() {
                            try {
                                var t = JSON.parse(e.response),
                                    n = t && t[1] && t[1][2];
                                V.actualizeMessagesCornerCounter(n)
                            } catch (e) {}
                        }
                    })
                }), {
                    wrapLinks: W,
                    wrapMention: z,
                    onShowDialogFromCache: (0, a.se)(),
                    onShowWritePageFromCache: (0, a.se)(),
                    onShowDialogsPageFromCache: (0, a.se)(),
                    onMessagesRepainted: (0, a.se)(),
                    init: function(t, a) {
                        var o = window.im;
                        window.cur.destroy.push(function() {
                            AudioMessagePlayer.detachPlayer()
                        }), a && (cur.ref = a.ref, cur.refSource = a.ref_source), t && (n = t, a && (V.saveDialog(a, t), e[t])), r || (r = !0, m(document, i.isTouch ? "touchstart" : "mousedown", $)), setTimeout(function() {
                            o.on()
                        })
                    },
                    unpinMessage: function(t) {
                        Q({
                            caches: [{
                                storage: e,
                                getter: t + ".write_form"
                            }],
                            updater: function(e) {
                                e.$$(".cm_unpin").forEach(hide), e.$$(".head_actions_wrap").forEach(function(e) {
                                    return e.classList.remove("head_actions_has_pinned")
                                }), e.$$(".pinnedMsg_peer_".concat(t)).forEach(function(e) {
                                    return e.classList.add("pinnedMsg_hidden")
                                })
                            }
                        })
                    },
                    pinMessage: function(t, n) {
                        Q({
                            caches: [{
                                storage: e,
                                getter: t + ".write_form"
                            }],
                            updater: function(e) {
                                e.$$(".cm_unpin").forEach(show), e.$$(".head_actions_wrap").forEach(function(e) {
                                    return e.classList.add("head_actions_has_pinned")
                                }), $$(".pinnedMsg_peer_".concat(t)).forEach(function(e) {
                                    return e.outerHTML = n
                                })
                            }
                        })
                    },
                    clear: function() {
                        H.clear();
                        var a = window.im;
                        e = {}, t = {}, D = {}, n = null, _(document, i.isTouch ? "touchstart" : "mousedown", $), r = !1, a.off()
                    },
                    send: function(e, t) {
                        if (F && !F.checkUploading()) return !1;
                        var n = j.click(e, v({
                            clear: !0,
                            save: !0
                        }, Dialog), {
                            lock: !0,
                            url_params: {
                                ref_source: cur.refSource,
                                ref: cur.ref
                            }
                        });
                        return cur.ref = void 0, cur.refSource = void 0, n
                    },
                    save: function(t) {
                        o(t, function(t, n) {
                            e[t] && n.last_msg == e[t].last_msg && delete n.messages, V.saveDialog(n, t)
                        })
                    },
                    saveDialog: function(t, n) {
                        e[n] || (e[n] = {});
                        var i = e[n];
                        v(i, t), i.msgs && o(i.msgs, function(e, t) {
                            D[t] = n
                        })
                    },
                    getPeerByMsg: function(e) {
                        return D[e] || !1
                    },
                    cacheDialogsPage: function() {
                        H.getQuery("community") && H.getQuery("tab") || (t.page = d("m"), H.getQuery().act ? t.link = U("/mail") : t.link = H.cur)
                    },
                    keyup: function(e, t, n) {
                        var i = q || "",
                            a = e.value || "";
                        i.length == a.length && i == a || (V.myTyping(t, n), q = a)
                    },
                    myTyping: function(e, t) {
                        if (!(e <= -2e9)) {
                            var n = g();
                            x[e] && n - x[e] < 5e3 || (x[e] = n, j.post("/mail", {
                                _ajax: 1,
                                act: "typing",
                                peer: e,
                                hash: t,
                                community: H.getQuery("community")
                            }))
                        }
                    },
                    typing: function(e, t) {
                        t = t || e;
                        e > 2e9 ? (I[e] || (I[e] = {}), I[e][t] = g()) : I[e] = g(), V.updateTyping(e)
                    },
                    updateTyping: function(e) {
                        var t = function(e, t) {
                                return e.getAttribute && e.getAttribute(t)
                            },
                            n = window.lang,
                            i = u("dialog_near" + e),
                            a = y("di_current_peer", i),
                            r = y("di_typing", i);
                        if (i) {
                            var s = [],
                                l = g();
                            if (e > 2e9) o(I[e] || {}, function(e, n) {
                                t(r, "data-u" + e) && n && l - n < 6e3 && s.push(e)
                            });
                            else {
                                var c = I[e];
                                t(r, "data-u" + e) && c && l - c < 6e3 && s.push(e)
                            }
                            if (s.length) {
                                if (1 == s.length) {
                                    var h = s[0],
                                        A = t(r, "data-u" + h),
                                        m = t(r, "data-s" + h);
                                    d(r, '<i class="i_typing"></i>' + (n.mobile_mail_typing[m] || "").replace("{user}", A))
                                } else {
                                    o(s, function(e, n) {
                                        s[e] = t(r, "data-u" + n)
                                    });
                                    var _ = s.pop();
                                    d(r, '<i class="i_typing"></i>' + (n.mobile_mail_multi_typing || "").replace("{users}", s.join(", ")).replace("{last_user}", _))
                                }
                                a.offsetWidth && b(r, "minWidth", a.offsetWidth), f("di_typing_now", i), setTimeout(function() {
                                    f("di_typing_animated", i)
                                }, 10), setTimeout(function() {
                                    V.updateTyping(e)
                                }, 2e3)
                            } else d(r, ""), b(r, "minWidth", 0), p("di_typing_animated", i), p("di_typing_now", i)
                        }
                    },
                    updateOnline: function(t, n) {
                        var i = u("messages" + t);
                        if (i && w(y("di_activity", i)), o(s("_lv" + t, "mcont"), function(e, t) {
                                G(t, n)
                            }), e[t]) {
                            if (e[t].write_form) {
                                var a = A("div", {
                                    innerHTML: e[t].write_form
                                });
                                o(s("_lv" + t, a), function(e, t) {
                                    G(t, n)
                                }), e[t].write_form = d(a)
                            }
                            if (e[t].messages) {
                                a = A("div", {
                                    innerHTML: e[t].messages
                                });
                                w(y("di_activity", a)), e[t].messages = d(a)
                            }
                        }
                    },
                    updateImportantMessages: function(n, i, a) {
                        Q({
                            caches: [{
                                storage: t,
                                getter: "page"
                            }, {
                                storage: H.page_get(U("/mail")),
                                getter: "html"
                            }],
                            updater: function(e) {
                                var t = y("dialogs_filter_button_important", e);
                                if (t) {
                                    var n = k(d(t)) + a;
                                    d(t, n), h("dialogs_filter_without_important", y("dialogs_filter", e), 0 === n)
                                }
                            }
                        }), Q({
                            caches: [{
                                storage: e,
                                getter: n + ".messages"
                            }],
                            updater: function(e) {
                                var t = y("_msg" + i, e);
                                t && h("msg_item_important", t, 1 === a)
                            }
                        })
                    },
                    updateImportantDialog: function(e, n) {
                        H.getQuery("community") && Q({
                            caches: [{
                                storage: t,
                                getter: "page"
                            }, {
                                storage: H.page_get(U("/mail")),
                                getter: "html"
                            }],
                            updater: function(t) {
                                var i = y("_peer".concat(e), t);
                                i && h("dialog_item_important", i, n)
                            }
                        })
                    },
                    sendMarkAsRead: function(t, n) {
                        E(n) || (n = [n]);
                        var i = e[t];
                        i && i.hash && j.post("/mail", {
                            _ajax: 1,
                            act: "mark_read",
                            peer: t,
                            msgs: n.join(","),
                            hash: i.hash,
                            community: H.getQuery("community")
                        }, {
                            onDone: function(e) {
                                e && o(n, function(e, n) {
                                    V.markAsRead(t, n)
                                })
                            }
                        })
                    },
                    markAsRead: function(t, n) {
                        window.im;
                        var i = u("messages" + t);
                        if (i) {
                            var a = y("_msg" + n, i);
                            S("_read", a) || p("mi_unread", a);
                            var r = e[t];
                            if (r && r.messages) {
                                var o = A("div", {
                                    innerHTML: r.messages
                                });
                                a = y("_msg" + n, o);
                                S("_read", a) || p("mi_unread", a), r.messages = d(o)
                            }
                        }
                    },
                    markPeerAsRead: function(n, i, a) {
                        var r = u("messages" + n);
                        if (r && (o(s("msg_item", r), function() {
                                if (!a == !S("_unread", this)) return !0; + l(this, "data-id") <= i && !S("_read", this) && p("mi_unread", this)
                            }), (m = e[n]) && m.messages)) {
                            var c = A("div", {
                                innerHTML: m.messages
                            });
                            o(s("msg_item", c), function() {
                                if (!a == !S("_unread", this)) return !0; + l(this, "data-id") <= i && !S("_read", this) && p("mi_unread", this)
                            }), m.messages = d(c)
                        }
                        var f = u("dialogs"),
                            h = a ? "di_unread_outbox" : "di_unread_inbox";
                        if (f)(m = y("_peer" + n, f)) && S(h, m) && (p(h, m), w(y("di_unread_cnt", m)));
                        else if (t.page) {
                            var m;
                            c = A("div", {
                                innerHTML: t.page
                            });
                            (m = y("_peer" + n, c)) && S(h, m) && (p(h, m), w(y("di_unread_cnt", m))), t.page = d(c)
                        }
                        Q({
                            caches: [{
                                storage: H.page_get(U("/mail")),
                                getter: "html"
                            }],
                            updater: function(e) {
                                var t = y("_peer" + n, e);
                                t && S(h, t) && (p(h, t), w(y("di_unread_cnt", t)))
                            }
                        })
                    },
                    markAsDeleted: function(t, n) {
                        var i = u("messages" + t);
                        if (i) {
                            w(y("_msg" + n, i));
                            var a = e[t];
                            if (a && a.messages) {
                                var r = A("div", {
                                    innerHTML: a.messages
                                });
                                w(y("_msg" + n, r)), a.messages = d(r)
                            }
                        }
                        j.click(U(H.path), v({
                            no_scroll: !0
                        }, Dialogs))
                    },
                    addMessage: function(t, n, i, a) {
                        if (window.isNewNavigation || H.clear(), t < 2e9 ? delete I[t] : I[t] && delete I[t][i], V.updateTyping(t), !0 !== a) {
                            if (t && n && (D[n] = t), !y("_msg" + n)) {
                                var r = e[t];
                                if (r && r.messages) {
                                    r.msgs && r.msgs.push(n);
                                    var o = A("div", {
                                        innerHTML: r.messages
                                    });
                                    (l = y("di_activity", o)) ? (C(M(a), l), r.messages = d(o)) : r.messages = a + r.messages, (s = u("messages" + t)) && (d(s, r.messages), V.onMessagesRepainted(!0))
                                } else {
                                    var s, l;
                                    if (s = u("messages" + t))(l = y("di_activity", s)) ? C(M(a), l) : d(s, a + d(s))
                                }
                            }
                        } else if (u("dialogs") && "/mail" == H.path) {
                            var c = H.getQuery();
                            c.act || c.offset || c.q || j.click(U(H.path), v({
                                no_scroll: !0
                            }, Dialogs))
                        }
                    },
                    replaceMessage: function(t, n, i, a) {
                        var r = u("messages" + t),
                            o = e[t];
                        if (o && o.messages) {
                            var s = A("div", {
                                    innerHTML: o.messages
                                }),
                                l = y("_msg" + n, s);
                            l && (l.outerHTML = a), o.messages = d(s), d(r, o.messages)
                        } else y("_msg" + n).outerHTML = a
                    },
                    getMsgHTML: function(t, n, i, a, r, o, s, c) {
                        var f = window,
                            h = f.vk,
                            p = f.lang,
                            A = 2 & n ? h.id : s && s.from || i;
                        if (!A) return !1;
                        if (!u("messages" + i)) return !0;
                        if (s.attach1 || s.fwd || s.geo || s.emoji) return !1;
                        if (s.source_act) return !1;
                        if (!e[i] || !e[i].hash) return !1;
                        var m = "_u" + A,
                            _ = y(m, "mcont", "a"),
                            v = P(l(_, "data-name") || d(_) || ""),
                            g = T(_),
                            b = y(m, "mcont", "img"),
                            w = b && b.src || "";
                        if (!v || !g || !w) return !1;
                        i = k(i), t = k(t), r = r && -1 == r.toString().indexOf(" ... ") && i < 2e9 ? r : "";
                        var E, S, C, M = 1 & n ? " mi_unread" : "";
                        return !(2 & n) && 1 & n && (M += M ? " _unread" : ""), o = V.wrapLinks(o, n), o = V.wrapMention(o), '<a name="msg{{msgId}}"></a><div  class="msg_item _msg{{msgId}}{{msgClass}}"  data-id="{{msgId}}"  onclick="return MessagesActions.onMessageClick(event);">  <div class="mi_iwrap">    <a class="al{{cl}}" href="{{href}}">      <img src="{{photo}}" class="mi_img {{cl}}" />    </a>  </div>  <div class="mi_cont">    <div class="mi_head">      <a class="mi_date" href="'.concat(U("/mail?act=msg&id={{msgId}}").replace(/\&/g, "&amp;"), '">        {{time}}      </a>      {{edited}}\n      <a class="mi_author al{{cl}} {{cl}}" href="{{href}}" data-name="{{dataName}}">        {{name}}      </a>    </div>    <div class="mi_body">      {{mi_title}}      <div class="mi_text">{{text}}</div>    </div>  </div></div>').replace(/{{msgId}}/g, t).replace(/{{cl}}/g, m).replace(/{{href}}/g, g).replace("{{msgClass}}", M).replace("{{edited}}", c ? '<span class="mi_edited">'.concat(p.mobile_mail_edited, "</span>") : "").replace("{{photo}}", w).replace("{{time}}", (E = new Date(1e3 * a), S = E.getHours(), C = E.getMinutes(), S + ":" + (C < 10 ? "0" : "") + C)).replace("{{dataName}}", O(v)).replace("{{name}}", v.split(" ").shift()).replace("{{mi_title}}", r ? '<div class="mi_title">' + r + "</div>" : "").split("{{text}}").join(o)
                    },
                    updateStickers: function() {
                        var t = window.cur,
                            i = window.post,
                            a = e[n];
                        if (a) {
                            var r = a.write_form ? (t.sticker_panel || "").split("mail-0").join("mail" + n) : "",
                                o = u("stickers_panel");
                            o && (L(M(r), o), o = null, i.stickersInit())
                        }
                    },
                    showDialog: function(i, a, r) {
                        var o = window.cur,
                            s = window,
                            c = s.MessagesActions,
                            u = s.Mention,
                            f = s.Dialog,
                            h = window.post;
                        if (c.hasFwdMessages()) return c.attachFwdMessages(a), !1;
                        t.scroll_top = B();
                        var m = e[a];
                        if (m) {
                            var _ = A("div", {
                                    innerHTML: d("m")
                                }),
                                g = y("mhb_back", _);
                            if (g && m.header) {
                                var b = A("div");
                                d(b, m.header), R(b.firstElementChild, g), w(g)
                            }
                            var k = m.write_form ? (o.sticker_panel || "").split("mail-0").join("mail" + a) : "";
                            d(y("pcont", y("mcont", _)), m.write_form + k + (a ? '<div id="messages' + a + '" class="messages bl_cont">' + (m.messages || "") + '<div id="al_loading"></div></div>' : "")), d("m", _.innerHTML), h.stickersInit(), j.refreshLinks(m.fv_link, m.app_link), N(), n = a, m;
                            var E = T(i);
                            H.go(E, null, {
                                push_only: !0,
                                no_push: r
                            }), a ? (q = null, V.updateTyping(a), j.click(E, v({
                                save: a
                            }, f), {
                                scroll: !0
                            })) : V.onShowWritePageFromCache(!0), V.onShowDialogFromCache(!0), B(0, 10)
                        } else H.al_go(m && m.cur_link || T(i) || H.cur);
                        H.getQuery("community") && "unread" === H.getQuery("ctab") && p("al_back", y("mhb_back"));
                        var S = y("MentionContainer"),
                            C = parseJSON(l(S, "data-mentions")) || [];
                        return C.length && u.init({
                            url: !1,
                            appendTo: S,
                            defaultItems: C,
                            items: C,
                            preferDomain: !0
                        }), !1
                    },
                    backToDialogs: function(e) {
                        if (t.page) H.go(t.link, null, {
                            push_only: !0,
                            no_push: e
                        }), j.click(t.link, v({
                            no_scroll: !0
                        }, Dialogs)), d("m", t.page), j.refreshLinks(l("fv_link", "href") || l("fv_link", "data-href"), "vkontakte://vk.com/mail"), n = null, B(t.scroll_top || 0), V.onShowDialogsPageFromCache(!0);
                        else {
                            var i = U(t.link || "/mail");
                            H.go(i, null, {
                                push_only: !0,
                                no_push: e
                            }), H.al_go(i)
                        }
                    },
                    actualizeMessagesCornerCounter: function(e) {
                        Q({
                            caches: [{
                                storage: t,
                                getter: "page"
                            }, {
                                storage: H.page_get(U("/mail")),
                                getter: "html"
                            }],
                            updater: function(t) {
                                var n = y("mhi_notify", t),
                                    i = y("mh_notify_counter", n);
                                i || (i = A("em", {
                                    className: "mh_notify_counter"
                                }), append(i, n)), e ? i.innerText = e : n.innerHTML = "&nbsp;"
                            }
                        })
                    }
                }
            }();

        function U(e) {
            var t = window.nav.getQuery(),
                n = t.community,
                i = t.ctab,
                a = n && -1 === e.indexOf("community=") ? "community=".concat(n) : "",
                r = n && i && -1 === e.indexOf("ctab=") ? "&ctab=".concat(i) : "";
            return a ? e + (e.indexOf("?") >= 0 ? "&" : "?") + a + r : e
        }

        function z(e) {
            return e.replace(/\[(id|club)(\d+)(?:\:([a-z0-9_\-]+))?\|([^\$]+?)\]/g, function(e, t, n, i, a) {
                return '<a href="/'.concat(t + n, '" class="mem_link">').concat(a, "</a>")
            })
        }

        function W(e, t) {
            var n = 32768 & t;
            return e = (e = e.replace(/([a-zA-Z\-_\.0-9]+@[a-zA-Z\-_0-9]+\.[a-zA-Z\-_\.0-9]+[a-zA-Z\-_0-9]+)/g, function(e) {
                return '<a href="mailto:' + e + '">' + e + "</a>"
            })).replace(/(https?:\/\/)?(([A-Za-z--0-9@][A-Za-z--0-9@\-\_\.]*[A-Za-z--0-9@])(\/([A-Za-z--0-9@\-\_#%&?+\/\.=;:~]*[^\.\,;\(\)\?<\&\s:])?)?)/gi, function() {
                var e = arguments[3],
                    t = arguments[2],
                    i = arguments[0],
                    a = arguments[1] || "http://";
                if (-1 == e.indexOf(".") || -1 != e.indexOf("..")) return i;
                var r = e.split(".").pop();
                if (r.length > 7 || -1 == D("place,camera,info,name,academy,aero,arpa,coop,media,museum,mobi,travel,xxx,asia,biz,com,net,org,gov,mil,edu,int,tel,ac,ad,ae,af,ag,ai,al,am,an,ao,aq,ar,as,at,au,aw,ax,az,ba,bb,bd,be,bf,bg,bh,bi,bj,bm,bn,bo,br,bs,bt,bv,bw,by,bz,ca,cc,cd,cf,cg,ch,ci,ck,cl,cm,cn,co,cr,cu,cv,cx,cy,cz,de,dj,dk,dm,do,dz,ec,ee,eg,eh,er,es,et,eu,fi,fj,fk,fm,fo,fr,ga,gd,ge,gf,gg,gh,gi,gl,gm,gn,gp,gq,gr,gs,gt,gu,gw,gy,hk,hm,hn,hr,ht,hu,id,ie,il,im,in,io,iq,ir,is,it,je,jm,jo,jp,ke,kg,kh,ki,km,kn,kp,kr,kw,ky,kz,la,lb,lc,li,lk,lr,ls,lt,lu,lv,ly,ma,mc,md,me,mg,mh,mk,ml,mm,mn,mo,mp,mq,mr,ms,mt,mu,mv,mw,mx,my,mz,na,nc,ne,nf,ng,ni,nl,no,np,nr,nu,nz,om,pa,pe,pf,pg,ph,pk,pl,pm,pn,pr,ps,pt,pw,py,qa,re,ro,ru,rs,rw,sa,sb,sc,sd,se,sg,sh,si,sj,sk,sl,sm,sn,so,sr,st,su,sv,sy,sz,tc,td,tf,tg,th,tj,tk,tl,tm,tn,to,tp,tr,tt,tv,tw,tz,ua,ug,uk,um,us,uy,uz,va,vc,ve,vg,vi,vn,vu,wf,ws,ye,yt,yu,za,zm,zw,,,,,,cat,pro,local".split(","), r)) return i;
                if (-1 != i.indexOf("@")) return i;
                try {
                    i = decodeURIComponent(i)
                } catch (e) {}
                return i.length > 55 && (i = i.substr(0, 53) + ".."), i = I(i), !n && e.match(/^([a-zA-Z0-9\.\_\-]+\.)?(vkontakte\.ru|vk\.com|vkadre\.ru|vshtate\.ru|userapi\.com|vk\.me)$/) ? '<a href="' + (a + (t = x(t).replace(/([^a-zA-Z0-9#%;_\-.\/?&=\[\]])/g, encodeURIComponent))).replace(/"/g, "&quot;").replace(/</g, "&lt;").replace(/>/g, "&gt;") + '">' + i + "</a>" : '<a href="/away?to=' + encodeURIComponent(a + x(t)) + '" target="_blank">' + i + "</a>"
            })
        }
        window.mail = V, window.makeUrl = U
    },
    "u+Ht": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i = {
            rollback: {
                onDone: function(e) {
                    var t = e.html,
                        n = e.post;
                    e.hash;
                    cur.restored = 0;
                    var i = ge("".concat(n, "__message-archived"));
                    if (t) {
                        var a = "".concat(n, "__message-rollback"),
                            r = ce("div", {
                                className: ["post_message_item", i.className].join(" "),
                                innerHTML: t,
                                id: a
                            });
                        hide(i), ge(r) || after(r, i)
                    } else {
                        var o = ge("".concat(n, "__message-rollback"));
                        show(i), remove(o)
                    }
                }
            },
            set: {
                onStart: function() {
                    var e = this.link;
                    e.classList.contains("wia_item") && addClass(e, "wia_item--loading")
                },
                onDone: function(e) {
                    var t = e.html,
                        n = e.post,
                        i = e.restored,
                        a = e.rollback_hash,
                        r = this.link;
                    cur.restored || (cur.restored = 0), i && "profile" === cur.module && cur.restored++, removeClass(r, "wia_item--loading");
                    var o = ge(n),
                        s = ge("".concat(n, "_replies"));
                    if (t) {
                        if (cur.restored > 3) {
                            var l = "".concat(o.id, "?act=rollback_archive&hash=").concat(a);
                            t += Wd.html({
                                class: "service_msg_row",
                                inner: {
                                    tag: "a",
                                    href: l,
                                    onclick: "return ajax.click(this, Archive.rollback)",
                                    inner: getLang("mobile_archive_restore_bulk")
                                }
                            })
                        }
                        var c = "".concat(o.id, "__message-archived"),
                            u = ce("div", {
                                className: ["post_message_item", o.className].join(" "),
                                innerHTML: t,
                                id: c
                            });
                        hide(o), hide(s), ge(c) || after(u, o)
                    } else if (n) {
                        var d = ge("".concat(n, "__message-archived")),
                            f = ge("".concat(n, "_replies"));
                        show(n), show(f), remove(d)
                    }
                }
            }
        };
        t.default = i
    },
    u33z: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("+CUd")) && i.__esModule ? i : {
            default: i
        };
        var r = a.default;
        t.default = r, window.MailButton = a.default
    },
    uQjJ: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("4O8T")) && i.__esModule ? i : {
            default: i
        };
        window.EventEmitter = a.default;
        var r = a.default;
        t.default = r
    },
    uU5W: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.AdsPlayerAdapter = void 0;
        var i = n("rEJs"),
            a = n("OcsD");

        function r(e, t) {
            return function(e) {
                if (Array.isArray(e)) return e
            }(e) || function(e, t) {
                if (!(Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e))) return;
                var n = [],
                    i = !0,
                    a = !1,
                    r = void 0;
                try {
                    for (var o, s = e[Symbol.iterator](); !(i = (o = s.next()).done) && (n.push(o.value), !t || n.length !== t); i = !0);
                } catch (e) {
                    a = !0, r = e
                } finally {
                    try {
                        i || null == s.return || s.return()
                    } finally {
                        if (a) throw r
                    }
                }
                return n
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance")
            }()
        }

        function o(e, t) {
            for (var n = 0; n < t.length; n++) {
                var i = t[n];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        }

        function s(e, t, n) {
            return t && o(e.prototype, t), n && o(e, n), e
        }
        var l = function() {
            function e(t) {
                ! function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, e), this.audioPage = t
            }
            return s(e, null, [{
                key: "convertAudioInfo",
                value: function(e) {
                    var t = r(e.id.split("_"), 2),
                        n = t[0],
                        i = t[1];
                    return {
                        performer: e.artist,
                        canAdd: e.can_add,
                        canDelete: e.can_del,
                        duration: intval(e.duration),
                        id: i,
                        isClaimed: e.is_disabled,
                        isExplicit: e.is_explicit,
                        title: e.title,
                        subTitle: e.subtitle,
                        ownerId: n,
                        ads: e.ads
                    }
                }
            }]), s(e, [{
                key: "notify",
                value: function(e) {
                    var t = this.audioPage.getCurrent();
                    switch (e) {
                        case i.events.AD_STARTED:
                            this.audioPage.onAdStart(t);
                            break;
                        case i.events.AD_COMPLETED:
                            this.audioPage.onAdComplete(t);
                            break;
                        case i.events.PLAY:
                            this.audioPage.onPlay(t.id);
                            break;
                        case i.events.PAUSE:
                            this.audioPage.onPause(t.id);
                            break;
                        case i.events.PROGRESS:
                            var n = arguments.length <= 1 ? void 0 : arguments[1],
                                a = arguments.length <= 2 ? void 0 : arguments[2];
                            isNaN(n) || isNaN(a) || this.audioPage.onPositionChanged(t.id, n * a, a)
                    }
                }
            }, {
                key: "setIsPlaying",
                value: function(e) {
                    this.audioPage.setIsPlaying(e)
                }
            }, {
                key: "getVolume",
                value: function() {
                    var e = (0, a.ssGet)("audio_vol");
                    return null === e ? 1 : e
                }
            }, {
                key: "_getPlayingContextSection",
                value: function() {
                    return window.playerAdapter.getContext()
                }
            }]), e
        }();
        t.AdsPlayerAdapter = l
    },
    uZo4: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.Pad = c, t.default = void 0;
        var i = l(n("UWnA")),
            a = l(n("8ZMO")),
            r = l(n("KiYr")),
            o = l(n("z9sQ")),
            s = n("fdw3");

        function l(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }

        function c() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
            if (e.content_only) return {
                outerHTML: u(e.content)
            };
            var t = e.title,
                n = e.corner,
                s = e.inner || e.content,
                l = e.anchor,
                c = e.alert,
                f = e.style || {},
                h = e.attrs || {};
            return {
                tag: e.tag,
                class: [e.class || e.mix, o.default.class("Pad", {
                    empty: d(s),
                    noCapsTitle: e.no_caps_for_title,
                    style_extraTopPadding: f.extra_top_padding,
                    style_extraBottomPadding: f.extra_bottom_padding
                })],
                attrs: h,
                "data-id": e.name || e.id,
                inner: [l ? (0, a.default)({
                    mix: "Pad__anchor",
                    id: l
                }) : null, c ? (0, i.default)({
                    inner: [(0, r.default)({
                        inner: [c],
                        class: "Pad__alert",
                        theme: e.alert_theme
                    })],
                    style: {
                        tiny_padding_bottom: !0
                    }
                }) : null, t ? (0, i.default)({
                    inner: [{
                        inner: [t],
                        class: "Pad__title",
                        tag: "h3"
                    }, n ? {
                        inner: [n.text],
                        href: n.url,
                        onClick: n.onclick,
                        attrs: n.attrs,
                        class: ["Pad__corner", n.class],
                        tag: "a"
                    } : null],
                    class: "Pad__header"
                }) : null, t ? {
                    inner: [s],
                    class: ["Pad__content", e.content_mix],
                    tag: "div"
                } : s]
            }
        }

        function u(e) {
            var t = [e];
            return Array.isArray(e) && (t = (0, s.flatten)(e)), Wd.html(t.join(""))
        }

        function d(e) {
            var t = u(e);
            return !t || "<div></div>" === t
        }
        var f = c;
        t.default = f
    },
    uk5P: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.AUDIO_PLAYER_ENUMS = void 0;
        t.AUDIO_PLAYER_ENUMS = {
            AUDIO_ITEM_INDEX_ID: 0,
            AUDIO_ITEM_INDEX_OWNER_ID: 1,
            AUDIO_ITEM_INDEX_URL: 2,
            AUDIO_ITEM_INDEX_TITLE: 3,
            AUDIO_ITEM_INDEX_PERFORMER: 4,
            AUDIO_ITEM_INDEX_DURATION: 5,
            AUDIO_ITEM_INDEX_ALBUM_ID: 6,
            AUDIO_ITEM_INDEX_AUTHOR_LINK: 8,
            AUDIO_ITEM_INDEX_LYRICS: 9,
            AUDIO_ITEM_INDEX_FLAGS: 10,
            AUDIO_ITEM_INDEX_CONTEXT: 11,
            AUDIO_ITEM_INDEX_EXTRA: 12,
            AUDIO_ITEM_INDEX_HASHES: 13,
            AUDIO_ITEM_INDEX_COVER_URL: 14,
            AUDIO_ITEM_INDEX_ADS: 15,
            AUDIO_ITEM_INDEX_SUBTITLE: 16,
            AUDIO_ITEM_INDEX_MAIN_ARTISTS: 17,
            AUDIO_ITEM_INDEX_FEAT_ARTISTS: 18,
            AUDIO_ITEM_INDEX_ALBUM: 19,
            AUDIO_ITEM_INDEX_TRACK_CODE: 20,
            AUDIO_ITEM_INDEX_RESTRICTION: 21,
            AUDIO_ITEM_INDEX_ALBUM_PART: 22,
            AUDIO_ITEM_INDEX_NEW_STATS: 23,
            AUDIO_ITEM_ACCESS_KEY: 24,
            AUDIO_ITEM_HAS_LYRICS_BIT: 1,
            AUDIO_ITEM_CAN_ADD_BIT: 2,
            AUDIO_ITEM_CLAIMED_BIT: 4,
            AUDIO_ITEM_HQ_BIT: 16,
            AUDIO_ITEM_LONG_PERFORMER_BIT: 32,
            AUDIO_ITEM_UMA_BIT: 128,
            AUDIO_ITEM_REPLACEABLE: 512,
            AUDIO_ITEM_EXPLICIT_BIT: 1024,
            AUDIO_ENOUGH_LOCAL_SEARCH_RESULTS: 500,
            AUDIO_RECOMS_TYPE_LISTENED: "recoms6",
            AUDIO_PLAYING_CLS: "audio_row__playing",
            AUDIO_CURRENT_CLS: "audio_row__current",
            AUDIO_DURATION_CLS: "audio_row__duration",
            AUDIO_LAYER_HEIGHT: 550,
            AUDIO_LAYER_MIN_WIDTH: 400,
            AUDIO_LAYER_MAX_WIDTH: 1e3,
            AUDIO_HQ_LABEL_CLS: "audio_hq_label_show",
            AUDIO_MAX_AUDIOS_IN_SNIPPET: 5,
            AUDIO_ROW_COVER_SIZE: 40,
            AUDIO_ROW_PLAY_SIZE: 24,
            AUDIO_ROW_ACTION_ROW_ITEM: '<a role="button" class="audio_row__more_action audio_row__more_action_%0% _audio_row__more_action_%0% %3%">%2%</a>',
            LOG_LS_KEY: "audiolog"
        }
    },
    uo4j: function(e, t, n) {
        "use strict";
        var i = window,
            a = i.ownerPhotoUpload,
            r = i.setStyle,
            o = i.remove,
            s = i.domData,
            l = i.geByClass,
            c = i.geByClass1,
            u = i.getLang,
            d = i.FeedAssistance,
            f = i.FeedAssistanceStats;
        a.onUploadedDone(function(e) {
            var t = c(h);
            if (t) {
                var n = c(p, t),
                    i = c(m, t),
                    a = c(A, t),
                    r = c(_, t);
                (function(e, t) {
                    if (window.Image) {
                        var n = new Image;
                        n.onload = function() {
                            return b(e, t)
                        }, n.src = e
                    } else b(e, t)
                })(e = function(e) {
                    return e.replace(/"/g, "").replace(/'/g, "").replace(/</g, "").replace(/>/g, "")
                }(e), n), a && (a.textContent = u(g)), i && (i.textContent = u(y)), d.setFilled(t), o(r)
            }
        }), f.registerTrackingCls("feedAssistance_profilePhoto");
        var h = "feedAssistance_profilePhoto",
            p = "feedAssistanceProfilePhotoContent__avatar",
            A = "feedAssistanceProfilePhotoContent__title",
            m = "feedAssistanceProfilePhotoContent__desc",
            _ = "feedAssistance__footerButton",
            v = "feedAssistanceProfilePhotoContent__avatar_uploaded",
            g = "mobile_assistance_profile_photo_uploaded_title",
            y = "mobile_assistance_profile_photo_uploaded_desc";

        function b(e, t) {
            var n;
            t && (addClass(v, t), r(t, "background-image", "url(".concat(e, ")"))), n = e, l("al_u" + vk.id).forEach(function(e) {
                s(e, "photo") && s(e, "photo", n);
                var t = c("_u" + vk.id, e);
                t && "IMG" === t.tagName && (t.src = n)
            })
        }
    },
    "v+Uj": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), Object.defineProperty(t, "scrollToElem", {
            enumerable: !0,
            get: function() {
                return r.scrollToElem
            }
        }), Object.defineProperty(t, "_onWheel", {
            enumerable: !0,
            get: function() {
                return r._onWheel
            }
        }), t.default = void 0;
        var i, a = (i = n("/T2O")) && i.__esModule ? i : {
                default: i
            },
            r = n("E7VD");
        var o = a.default;
        t.default = o, window.Slider = a.default, extend(a.default, {
            scrollToElem: r.scrollToElem,
            _onWheel: r._onWheel
        })
    },
    "v/ER": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.submit = s, t.default = void 0;
        var i, a = (i = n("Po+v")) && i.__esModule ? i : {
                default: i
            },
            r = n("W9Tc");

        function o() {
            return (o = Object.assign || function(e) {
                for (var t = 1; t < arguments.length; t++) {
                    var n = arguments[t];
                    for (var i in n) Object.prototype.hasOwnProperty.call(n, i) && (e[i] = n[i])
                }
                return e
            }).apply(this, arguments)
        }

        function s(e, t, n, i, s) {
            "string" == typeof s && (s = JSON.parse(s));
            var l = $("#mcont");
            setStyle(l, {
                "pointer-events": "none"
            }), ajax.post(e, o({
                _ajax: 1,
                reason: n
            }, s)), "story" === s.type && Stories.sendAnalyticsEvent("claim"), (0, r.partConfigEnabled)("mvk_new_info_snackbar") || Snackbar.init({
                text: getLang("mobile_msg_reported")
            }), $$(".Confirm").forEach(function(e) {
                return a.default.close(e)
            })
        }
        t.default = function(e, t, n, i, a, r, o) {
            n ? Confirm(t, "ReportConfirm.submit('".concat(a, "', false, ").concat(i, ", '").concat(r, "', ").concat(JSON.stringify(o), ")"), "", {
                title: e,
                id: "confirm-".concat(i)
            }) : s(a, !0, i, r, JSON.stringify(o))
        }
    },
    vOib: function(e, t, n) {
        "use strict";
        var i;
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var a = ((i = n("uZo4")) && i.__esModule ? i : {
            default: i
        }).default;
        t.default = a
    },
    vOyG: function(e, t) {
        e.exports = ["onclick", "ondblclick", "onmousedown", "onmouseup", "onmouseover", "onmousemove", "onmouseout", "onmouseenter", "onmouseleave", "ontouchcancel", "ontouchend", "ontouchmove", "ontouchstart", "ondragstart", "ondrag", "ondragenter", "ondragleave", "ondragover", "ondrop", "ondragend", "onkeydown", "onkeypress", "onkeyup", "onunload", "onabort", "onerror", "onresize", "onscroll", "onselect", "onchange", "onsubmit", "onreset", "onfocus", "onblur", "oninput", "oncontextmenu", "onfocusin", "onfocusout"]
    },
    vTE6: function(e, t, n) {
        "use strict";
        var i, a = l(n("+cqQ")),
            r = n("DkIl"),
            o = l(n("B5sG")),
            s = n("3dm1");

        function l(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }

        function c() {
            store.mail && store.mail.cur && (store.mail.cur.peerId && u())
        }

        function u() {
            var e = store.mail.cur;
            (e ? e.peerId : null) ? i = setTimeout(function() {
                p(), u()
            }, 3e4): d()
        }

        function d() {
            i && clearTimeout(i)
        }

        function f() {
            $$(".mailHat").forEach(function(e) {
                return e.outerHTML = (0, o.default)()
            })
        }

        function h() {}

        function p() {
            var e = window.lang,
                t = store.mail,
                n = t.cur,
                i = t.peers,
                a = n ? n.peerId : null;
            if (a) {
                var r = i[a];
                if (r.lastActionTime && !r.isOnline) {
                    var o = n.timeShift,
                        l = function(e, t) {
                            var n = window.lang,
                                i = "";
                            e += t;
                            var a = parseInt(Date.now() / 1e3) - e;
                            if (a > 7776e3) return "";
                            if (a < 60) i = n.mobile_profile_status_just_now;
                            else if (a < 3600) {
                                var r = intval(a / 60);
                                i = langWordNumeric(r, n.mobile_profile_status_word_mins_ago, n.mobile_profile_status_mins_ago)
                            } else if (a < 14400) {
                                var o = intval(a / 3600);
                                i = langWordNumeric(o, n.mobile_profile_status_word_hours_ago, n.mobile_profile_status_hours_ago)
                            } else i = function(e) {
                                var t = 1e3 * e,
                                    n = new Date(t),
                                    i = new Date,
                                    a = window.lang;
                                return n.getFullYear() != i.getFullYear() && n.getTime() < i.getTime() - 1728e5 || Math.abs(n.getTime() - i.getTime()) > 157248e5 ? langDate(t, a.mobile_mail_date, 0, a.months_sm_of, !1) : langDate(t, a.mobile_mail_short_date_time, 0, a.months_sm_of, !1)
                            }(e);
                            return i
                        }(r.lastActionTime, o);
                    r.offlineText = l ? langSex(r.sex, e.mobile_mail_last_activity_tip).replace("{time}", l) : ""
                } else r.canSeeOnline || (r.offlineText = (0, s.getLastSeenByStatus)(r.onlineStatus, r.sex));
                f()
            }
        }
        Object.assign(o.default, {
            onUnreadClick: (0, a.default)(),
            onBackClick: (0, a.default)(),
            onBackToDialogClick: (0, a.default)(),
            onCancelEditing: (0, a.default)(),
            setModifiers: r.MailHat_convo.setModifiers,
            redrawCounter: function() {
                var e = store.mail.cur.countUnread;
                if (!nav.getQuery("community")) {
                    var t = geBySel1(".mmi_mail .mm_counter2");
                    t && (e > 0 ? (t.innerText = e, attr(t, "style", "display: inline")) : hide(t))
                }
                window.isNewNavigation ? Tabbar.setCounter(Tabbar.TAB_ID_MESSAGES, e) : r.MailHat_main.setUnreadCount(e)
            },
            redrawOnline: p,
            redraw: f,
            startStatusUpdate: u,
            cancelStatusUpdate: d
        }), r.MailHat_main.onUnreadClick(o.default.onUnreadClick), r.MailHat_main.onBurgerClick(menu.open), r.MailHat_main.onCancelForwardTap(o.default.onBackToDialogClick), r.MailHat_convo.onBackTap(o.default.onBackClick), r.MailHat_convo.onCancelEditingTap(o.default.onCancelEditing), uVK.onReady(c), uVK.onReady(h), page.onChange(h)
    },
    vZUn: function(e, t, n) {
        "use strict";
        var i = window,
            a = i.geByClass1,
            r = i.tag,
            o = i.geByTag1,
            s = i.ce,
            l = i.hasClass,
            c = i.attr,
            u = i.removeEvent,
            d = i.addEvent,
            f = i.qs2obj,
            h = i.each,
            p = i.len,
            A = i.extend,
            m = i.copy,
            _ = i.onDOMReady,
            v = i.scrollTop,
            g = i.getY,
            y = i.scrollToEl,
            b = i.scrollToHash,
            w = i.obj2qs,
            k = i.escapeAttr,
            E = i.remove,
            S = i.val,
            C = i.toggleClass,
            M = i.show,
            P = i.hide,
            T = i.gpeByClass,
            D = i.geByTag,
            I = i.addClass,
            x = i.checkEvent,
            O = i.unescapeAttr,
            L = i.removeClass,
            B = i.ge,
            R = i.cancelEvent,
            N = i.isUndefined,
            j = window.ajax,
            F = window.nav,
            H = window.post,
            V = window.zlayer,
            U = function() {
                var e, t, n, i, z, W, q, $, G, Q, Y, X, K, J, Z = 1,
                    ee = !1,
                    te = {},
                    ne = {},
                    ie = {},
                    ae = null,
                    re = null,
                    oe = !1,
                    se = null,
                    le = null,
                    ce = !0,
                    ue = 0,
                    de = !1;

                function fe() {
                    if (!(e = a("photo_view", "m"))) return F.al_go(F.cur), !1;
                    if (t = a("pv_summary", e), a("photo_msg", e), Y = a("pv_tag_wrap", e), z = a("pv_body", e), W = a("thumb_item", z), i = a("pv_nav", z), G = a("pv_photo_wrap", W), q = "a" == r(W) && W, $ = o("img", W), Q = a("pv_footer", e), (n = a("summary_loading", t)) || (n = s("div", {
                            innerHTML: '<i class="i_loading"></i>',
                            className: "summary_loading"
                        }, {
                            display: "none"
                        }), t.appendChild(n)), ee = l("pv_touch_full", z), i) {
                        var f = a("pv_nav_left", i),
                            h = a("pv_nav_z", i),
                            p = a("pv_nav_right", i);
                        X = a("pv_nav_link", f), J = a("pv_nav_link", h), K = a("pv_nav_link", p), c(X, "onclick", "return photo.prev(event);"), c(K, "onclick", "return photo.next(event);"), c(q, "onclick", !ee && "return photo.next(event);"), j.prepare_click([X, K, q])
                    }
                    return u(window, "orientationchange", ye), d(window, "orientationchange", ye), !0
                }

                function he() {
                    var t = window.photoview;
                    return !!t && (!!de || (de = !0, t.onPhotoChange = function(e, t) {
                        ue = e, we(e, t)
                    }, t.onUpdate = function() {}, t.onClose = function(t) {
                        if (uRegisterFloatBtn.show(), ! function(e) {
                                var t = f(F.params);
                                if (delete t.z, !e.local && !e.crop) {
                                    if (F.tryHistoryBack()) return !1;
                                    var n = F.path + w(t) + F.hash;
                                    F.go(n, null, {
                                        push_only: !0
                                    })
                                }
                                return !0
                            }(t)) return !0;
                        var n = f(F.params);
                        e && n.list == re && be(ue, !0)
                    }, !0))
                }

                function pe(e) {
                    var t = window.photoview,
                        n = [];
                    return h(e, function(e, t) {
                        if (!t) return !0;
                        n.push(te[t.id] = t)
                    }), ae && t && t.saveSource(ve(ae)), n
                }

                function Ae(e) {
                    return te[e] || {}
                }

                function me(e, t, n) {
                    if (null !== t) {
                        ne[e] || (ne[e] = new Array(n || p(t))), pe(t);
                        var i = ne[e];
                        oe && i.reverse(), A(i, t), oe ? (ae = m(i), i.reverse()) : ae = i
                    } else delete ne[e]
                }

                function _e(e) {
                    if ("string" != typeof e) return e;
                    var t = ne[e] || [];
                    return oe ? m(t).reverse() : t
                }

                function ve(e) {
                    var t = _e(e),
                        n = new Array(t.length),
                        i = f(F.params);
                    for (var a in delete i.z, t) {
                        var r = ae[a],
                            o = "",
                            s = "";
                        r.hash && (s = w({
                            hash: r.hash,
                            mp4: !0
                        })), r.isDoc ? (o = "doc" + r.id + s, n[a] = {
                            id: r.id,
                            photo_url: "/" + o,
                            src: r.original_src,
                            isDoc: !0,
                            hasVideo: r.hasVideo
                        }) : (o = "photo" + r.id + "?list=" + re + (oe ? "&rev=1" : "") + (le ? "&from=" + le : ""), n[a] = {
                            id: r.id,
                            photo_url: "/" + o,
                            like_url: "/like?act=" + (r.likes_me ? "del" : "add") + "&object=photo" + r.id + "&from=" + encodeURIComponent(o) + "&list=" + re + "&hash=" + r.like_hash,
                            likes_me: r.likes_me,
                            src: r.original_src,
                            max_src: r.max_src,
                            tags: r.tags,
                            caption: r.caption,
                            likes_cnt: r.likes_cnt,
                            replies_cnt: r.replies_cnt,
                            market_tags: r.market_tags
                        })
                    }
                    return n
                }

                function ge(e, t) {
                    for (var n in t || (t = ae), t)
                        if (ae[n].id == e) return +n;
                    return -1
                }

                function ye() {
                    F.hash || _(function() {
                        if (a("photo_view")) {
                            var e = v();
                            z && g(z) < e && y(z)
                        }
                    })
                }

                function be(n, i, a) {
                    var r = window.cur,
                        s = window.lang,
                        l = ae[n],
                        u = 1 == ae.length;
                    if (l) {
                        F.hash ? b(F.hash) : ye();
                        var d = {};
                        se && (d.list = se), oe && (d.rev = 1), le && (d.from = le);
                        var p = w(d),
                            m = "photo" + l.id + p,
                            _ = l.photo,
                            g = (Ee(n - 1) || {}).id,
                            y = (Ee(n + 1) || {}).id;
                        if (u || (q.href = "/photo" + y + p, X && (X.href = "/photo" + g + p), K && (K.href = "/photo" + y + p), j.prepare_click([X, K, q])), ee) {
                            var M = "photo" + l.id + "/" + se + (oe ? "/rev" : ""),
                                P = A({}, d, {
                                    z: M
                                }),
                                T = "/photo" + l.id + w(P);
                            if (V._lastNav) {
                                var D = V._lastNav;
                                (P = f(D.params)).z = M, T = D.path + w(P) + D.hash
                            }
                            J && (J.href = T), j.prepare_click(J), c(J, "onclick", "return photo.fullscreen('" + k(T) + "', event);")
                        }
                        if ($ && $.src != _) {
                            $.onload = null, E($);
                            var I = "";
                            h(l.tags, function(e, t) {
                                if (!e || 0 == e) return !0;
                                var n = t[0][0],
                                    i = t[0][1],
                                    a = t[0][2],
                                    r = t[0][3];
                                I += '<div class="pv_tag" style="left: ' + n + "%; top: " + i + "%; width: " + a + "%; height: " + r + '%;" id="pv_tag' + e + '" onclick="return photo.selectTag(' + e + ', event, true);"><div class="fill"></div></div>'
                            }), S(G, '<img src="' + _ + '" alt="" class="ph_img" />' + I), $ = o("img", G)
                        }
                        C("photo_deleted", e, !!l.deleted), C("pv_one_photo", z, 1 == ae.length), S(t, (s.mobile_photos_photo_header || "").replace("%s", ue + 1).replace(/%s|{count}/, ae.length)), S(Y, l.tag_info || "");
                        var x = "",
                            O = (r.sticker_panel || "").split("photo-0_0").join("photo" + l.id),
                            L = (l.comments_html || "").split("\x3c!--stickers_panel--\x3e").join(O);
                        if (l.caption && (x += '<div class="mv_description">' + l.caption + "</div>"), l.tags_list && (x += '<dl class="pv_tags_list si_row"><dt>' + s.mobile_photos_on_this_photo + "</dt><dd>" + l.tags_list + "</dd></dl>"), l.was_edited && (x += '<dl class="si_row"><dt>' + s.mobile_photos_photo_was_edited + "</dt></dl>"), l.album_link && (x += '<dl class="si_row"><dt>' + s.mobile_photos_photo_album_label + "</dt><dd>" + l.album_link + "</dd></dl>"), l.author_link && (x += '<dl class="si_row"><dt>' + s.mobile_photos_photo_author_label + "</dt><dd>" + l.author_link + "</dd></dl>"), (l.date || l.likes || l.publish) && (x += '<div class="vi_values">' + (l.date || "") + (l.likes || "") + (l.publish || "") + "</div>"), S(Q, '<div class="like_box bl_cont"><div class="photo_msg bl_none">' + (l.deleted || "") + '</div><div class="mv_details">' + x + '</div><ul class="mv_actions">' + (l.actions || "") + '</ul></div><div class="comments_wrap bl_cont">' + L + "</div>"), H.stickersInit(), r.replyTo = 0, j.refreshLinks(l.fv_link, l.app_link), U.closeTags(), !i) {
                            var R = "/" + m;
                            F.go(R, null, {
                                no_push: i,
                                push_only: !0,
                                replace: a
                            }), window.isNewNavigation && page.save(R, {
                                st: v(),
                                page: B("m"),
                                state: page.stash(),
                                cur: window.cur,
                                options: {
                                    replacePrevPage: !0
                                }
                            }, !1)
                        }
                    }
                    ce || (Se(), function() {
                        for (var e = 0, t = ue + 1; e < Z; e++) {
                            var n = Ee(e + t),
                                i = n && n.photo;
                            if (i && !ie[i]) {
                                var a = ie[i] = new Image;
                                a.src = i, a.onload = function() {
                                    ie[i] = !0
                                }
                            }
                        }
                    }())
                }

                function we(e) {
                    var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},
                        n = t.isDoc,
                        i = t.hash,
                        a = t.hasVideo,
                        r = window.photoview,
                        o = ae[e];
                    ae.length;
                    if (o) {
                        var s = f(F.params);
                        if (s.z = n ? "doc" + o.id + "/" + i : "photo" + o.id + "/" + se + (oe ? "/rev" : ""), t.no_open || r.open(e, ve(ae), {
                                local: t.local,
                                isDoc: n,
                                hasVideo: a
                            }), !t.local && !t.crop) {
                            var l = F.path + w(s) + F.hash;
                            F.go(l, null, {
                                no_push: t.no_push,
                                push_only: !0,
                                replace: t.replace,
                                nav_init: !t.no_open,
                                nav_incr: !0
                            })
                        }
                    }
                    t.local || t.crop || Se(!0, n)
                }
                var ke = !1;

                function Ee(e) {
                    return e > 0 ? e %= ae.length : e = (100 * ae.length + e) % ae.length, ae[e]
                }

                function Se(e) {
                    var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
                    if (!ke) {
                        for (var i = window.photoview, a = !1, r = 1, o = 0; o < 5; o++) {
                            if (!(l = Ee(s = o + ue)) || !l.owner_id) {
                                a = s, r = 1;
                                break
                            }
                        }
                        if (!1 === a)
                            for (o = -1; o > -3; o--) {
                                var s, l;
                                if (!(l = Ee(s = o + ue)) || !l.owner_id) {
                                    a = s, r = -1;
                                    break
                                }
                            }
                        if (!1 !== a) {
                            var c = Ee(ue);
                            if (c) {
                                ke = !0, M(n);
                                var u = window.cur,
                                    d = c.owner_id || (c.id || "").split("_")[0],
                                    f = Gif.isMp4Supports() && c.hasVideo,
                                    h = s == ue && c.id ? (t ? "/doc" : "/photo") + c.id + (c.hash ? "?hash=" + c.hash : "") + (f ? "&mp4" : "") : "/photos.php",
                                    p = {
                                        _ajax: 1,
                                        oid: d,
                                        list: re,
                                        offset: a,
                                        direction: r,
                                        rev: oe ? 1 : 0
                                    };
                                u.stickers || (p.need_stickers = 1), F.getQuery("community") && (p.community = F.getQuery("community")), j.post(h, p, {
                                    onDone: function(t, a, r, o) {
                                        P(n), ke = !1, r && (u.replyNames || (u.replyNames = {}), A(u.replyNames, r)), o && A(u, o), me(re, t, a || ae.length), e ? i && i.saveSource(ve(re), !1, !0) : be(ue, !0)
                                    }
                                })
                            }
                        }
                    }
                }

                function Ce(e, t, n, i, a) {
                    if (ae = [], e) {
                        var r = T("thumbs_list", e) || T("wiki_body", e);
                        r && h(D("img", r), function() {
                            var e = c(this, "data-id"),
                                t = c(this, "data-src_big");
                            if (!e || !t) return !0;
                            var n = (t = t.split("|"))[0],
                                i = +t[1] || 0,
                                a = +t[2] || 0;
                            ae.push({
                                id: e,
                                original_src: n,
                                width: i,
                                height: a
                            })
                        })
                    }
                    ae.length || ae.push({
                        id: t,
                        original_src: !0,
                        isDoc: n,
                        hasVideo: i,
                        hash: a
                    })
                }

                function Me() {
                    I("pv_icons_hide", z)
                }
                return {
                    save: pe,
                    get: Ae,
                    saveSource: me,
                    getSource: _e,
                    clear: function() {
                        u(window, "orientationchange", ye)
                    },
                    open: function(e, t, n, i, a) {
                        if (x(n)) return !0;
                        if (!fe()) return !0;
                        if (oe = !1, "/rev" == t.substr(-4) && (t = t.slice(0, -4), oe = !0), le = i || null, t) re = t;
                        else {
                            var r = Ae(e);
                            re = r.album ? "album" + r.album : ""
                        }
                        if (se = re, ae = _e(re), -1 === (ue = ge(e, ae))) {
                            if (!(r = Ae(e)).id) return !1;
                            ae = [r], ue = 0
                        }
                        ce = ae.length < 2, !1;
                        var o = ae[ue] && e != ae[ue].id;
                        return be(ue, a && !o, o), !1
                    },
                    prev: function(e) {
                        return !!x(e) || !(ke && !Ee(ue - 1)) && (!fe() || (ce ? U.close() : (--ue < 0 && (ue = ae.length - 1), be(ue), Me(), !1)))
                    },
                    next: function(e) {
                        return !!x(e) || !(ke && !Ee(ue + 1)) && (!fe() || !ce && (++ue >= ae.length && (ue = 0), be(ue), Me(), !1))
                    },
                    close: function(e, t) {
                        return !!x(e)
                    },
                    fullscreen: function(e, t) {
                        return !!l("pv_photo_tags_selected", z) || F.go(O(e), t, {
                            need_restore: !0
                        })
                    },
                    showIcons: function() {
                        var e = a("photo_view", "m");
                        if (!e) return !1;
                        var t = a("pv_body", e);
                        if (!t) return !1;
                        setTimeout(function() {
                            L("pv_hidden_icons", t), setTimeout(function() {
                                I("pv_icons_hide", t)
                            }, 2e3)
                        }, 10)
                    },
                    selectTag: function(e, t, n) {
                        if (n && !l("pv_photo_tags_selected", z)) return !0;
                        var i = B("pv_tag" + e),
                            r = a("pv_tag_selected", "pv_photo_tags_wrap"),
                            o = B("pv_tag_label" + e),
                            s = a("pv_tag_label_selected", "pv_tags_list");
                        return l("pv_tag_selected", i) || (L("pv_tag_selected", r), I("pv_tag_selected", i)), l("pv_tag_label_selected", o) ? F.go(o, t) : (L("pv_tag_label_selected", s), I("pv_tag_label_selected", o), I("pv_photo_tags_selected", z), R(t), !1)
                    },
                    closeTags: function(e) {
                        if (!l("pv_photo_tags_selected", z)) return !0;
                        var t = a("pv_tag_selected", "pv_photo_tags_wrap"),
                            n = a("pv_tag_label_selected", "pv_tags_list");
                        return t && L("pv_tag_selected", t), n && L("pv_tag_label_selected", n), L("pv_photo_tags_selected", z), R(e), !1
                    },
                    init: function(e, t, n, i, a, r, o) {
                        Z = N(o.preload) ? 1 : o.preload, oe = !!a, U.saveSource(e, t, n), _(function() {
                            U.open(i, e + (a ? "/rev" : ""), null, r, !0)
                        })
                    },
                    zopen: function(e, t, n, i) {
                        var a = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : {};
                        if (x(t)) return !0;
                        var r = a.isDoc,
                            o = a.hasVideo,
                            s = a.hash;
                        he(), oe = !1, "/rev" == i.substr(-4) && (i = i.slice(0, -4), oe = !0);
                        var l = f(F.params);
                        if (delete l.z, le = a.from || !1, i) re = i;
                        else {
                            var c = Ae(n);
                            re = c.album ? "album" + c.album : ""
                        }
                        if (se = re, (ae = _e(re))[0] && ae[0].isDoc && ae[0].hasVideo !== o && (ae = []), ae.length || Ce(e, n, r, o, s), -1 === (ue = ge(n, ae)) && (Ce(e, n, r, o, s), ue = ge(n, ae)), -1 === ue) {
                            if (!(c = Ae(n)).id) return !0;
                            ae = [c], ue = 0
                        }
                        ce = ae.length < 2, !1;
                        var u = ae[ue] && n != ae[ue].id;
                        return we(ue, {
                            no_push: a.no_push && !u,
                            replace: u,
                            local: a.local,
                            isDoc: r,
                            hasVideo: o,
                            hash: s
                        }), uRegisterFloatBtn.hide(), R(t), !1
                    },
                    zclose: function(e, t) {
                        return uRegisterFloatBtn.show(), !!x(e)
                    }
                }
            }();
        window.photo = U
    },
    vfU8: function(e, t, n) {
        "use strict";
        var i, a = (i = n("EMnU")) && i.__esModule ? i : {
            default: i
        };
        Object.assign(a.default, {
            toggleActive: function(e) {
                e.classList.toggle(r.active)
            }
        });
        var r = {
            active: "Icon_active"
        }
    },
    vkUM: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.open = function(e) {
            r.default.open({
                body: d(e),
                confirmText: lang.mobile_mail_delete_popup_delete,
                cancelText: lang.mobile_mail_delete_popup_cancel,
                onConfirm: i.default.onClick("MsgDeleteDialog.onConfirmDelete"),
                onClose: i.default.onClick("MsgDeleteDialog.close")
            })
        }, t.close = function() {
            var e = $("." + l);
            e && (c = e.checked, lsSet("delete_message_for_all_checked", c));
            r.default.close()
        }, t.isDeleteMessagesForAll = function() {
            var e = $("." + l);
            return !!e && e.checked
        }, t.onConfirmDelete = void 0;
        var i = o(n("bZ/P")),
            a = o(n("+cqQ")),
            r = o(n("iS9e"));

        function o(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }

        function s() {
            var e = function(e, t) {
                t || (t = e.slice(0));
                return Object.freeze(Object.defineProperties(e, {
                    raw: {
                        value: Object.freeze(t)
                    }
                }))
            }(["\n    ", "\n    ", "\n  "]);
            return s = function() {
                return e
            }, e
        }
        var l = "MsgDeleteDialog__checkboxInput",
            c = null,
            u = (0, a.default)();

        function d(e) {
            var t, n, a = e.isEditing,
                r = e.canDeleteForAll;
            if (a) t = lang.mobile_mail_dialog_msg_delete_for_all;
            else {
                var o = Object.keys(store.mail.cur.msgSelected).length;
                t = langNumeric(o, lang.mobile_mail_dialog_msg_delete_N)
            }
            if (!a && r) {
                var u = lang.mobile_mail_delete_for_all,
                    d = function() {
                        if ("boolean" != typeof c) {
                            var e = !!lsGet("delete_message_for_all_checked");
                            c = e
                        }
                        return c
                    }() ? "checked" : "";
                n = '\n      <div class="MsgDeleteDialog__checkbox">\n        <label class="MsgDeleteDialog__checkboxIn">\n          <input type="checkbox" class="'.concat(l, '" ').concat(d, '>\n          <span class="MsgDeleteDialog__checkboxLabel">').concat(u, "</span>\n        </label>\n      </div>\n    ")
            }
            return i.default.html(s(), t, n)
        }
        t.onConfirmDelete = u
    },
    vkmG: function(e, t, n) {
        "use strict";

        function i(e, t) {
            return function(e) {
                if (Array.isArray(e)) return e
            }(e) || function(e, t) {
                if (!(Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e))) return;
                var n = [],
                    i = !0,
                    a = !1,
                    r = void 0;
                try {
                    for (var o, s = e[Symbol.iterator](); !(i = (o = s.next()).done) && (n.push(o.value), !t || n.length !== t); i = !0);
                } catch (e) {
                    a = !0, r = e
                } finally {
                    try {
                        i || null == s.return || s.return()
                    } finally {
                        if (a) throw r
                    }
                }
                return n
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance")
            }()
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.escape = r, t.encodeHTMLEntities = function(e) {
            return r(e).replace(/[\u00A0-\u9999<>\&]/gim, function(e) {
                return "&#".concat(e.charCodeAt(0), ";")
            })
        }, t.symbols = void 0;
        var a = [
            ["&amp;", "&"],
            ["&lt;", "<"],
            ["&gt;", ">"],
            ["&quot;", '"']
        ];

        function r(e) {
            return a.reduce(function(e, t) {
                var n = i(t, 2),
                    a = n[0],
                    r = n[1];
                return e.replace(new RegExp(r, "ig"), a)
            }, e)
        }
        t.symbols = a
    },
    vpQl: function(e, t, n) {
        "use strict";
        var i;
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var a = ((i = n("mmza")) && i.__esModule ? i : {
            default: i
        }).default;
        t.default = a
    },
    vys4: function(e, t, n) {
        "use strict";
        var i = n("f9C2"),
            a = n("y6KD"),
            r = n("w+Cc"),
            o = n("WS06"),
            s = n("OcsD"),
            l = n("W9Tc");

        function c(e, t, n) {
            return t in e ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = n, e
        }
        var u = window,
            d = u.attr,
            f = u.hasClass,
            h = (u.gpeByClass, u.geByClass1),
            p = u.geByTag1,
            A = u.page,
            m = u.extend,
            _ = u.val,
            v = u.ce,
            g = u.append,
            y = u.remove,
            b = u.browser,
            w = function() {
                var e, t = "_BottomMenu__icon_js",
                    n = "BottomMenu__icon_active",
                    u = "BottomMenu__counter",
                    A = "BottomMenu__updateButton",
                    w = "BottomMenu",
                    k = "vk_tabbar_hidden",
                    E = "data-tabbar",
                    S = "data-counter",
                    C = "feed",
                    M = "recommend",
                    P = "messages",
                    T = "notification",
                    D = "menu",
                    I = Math.max(window.innerHeight, window.innerWidth),
                    x = [C, M, P, T, D],
                    O = "",
                    L = {},
                    B = (c(e = {}, C, 0), c(e, M, 0), c(e, P, 0), c(e, T, 0), c(e, D, 0), e);

                function R(e) {
                    var t = geBySel1("[".concat(E, '="').concat(e, '"]'));
                    return d(t, "data-default")
                }

                function N(e) {
                    each(geBySel("[".concat(E, "]")), function(n, i) {
                        var a = h(t, i),
                            r = h(u, a),
                            o = d(i, S),
                            s = d(i, E);
                        e({
                            i: n,
                            tabId: s,
                            counter: o,
                            $link: i,
                            $icon: a,
                            $counter: r
                        })
                    })
                }

                function j() {
                    N(function(e) {
                        var t = e.$counter,
                            n = e.$icon,
                            i = (e.$link, e.tabId),
                            a = B[i];
                        if (a && 0 !== a)
                            if (t) _(t, a);
                            else {
                                var r = v("div", {
                                    className: u,
                                    innerHTML: a
                                });
                                g(r, n)
                            }
                        else _(n, "")
                    })
                }

                function F(e) {
                    setTimeout(function() {
                        H()
                    }, 0), _(h("mcont", e), '<div class="pcont bl_cont"><div id="al_loading" class="BottomMenu__preloader"></div></div>')
                }

                function H() {
                    var e = $(".".concat(A));
                    y(e)
                }
                return {
                    setCurrentId: function(e) {
                        O = e
                    },
                    setHistory: function(e) {
                        L = m({}, e)
                    },
                    setCounter: function(e, t) {
                        B[e] = t ? parseInt(t, 10) : 0, j()
                    },
                    getCurrentId: function() {
                        return O
                    },
                    getDefaultURL: R,
                    getTabCounter: function(e) {
                        return B[e] ? B[e] : 0
                    },
                    drawUI: function() {
                        N(function(e) {
                            var t = e.$icon,
                                i = e.$link,
                                a = e.tabId,
                                r = L[a];
                            if (r) {
                                var o = r.filter(function(e) {
                                    return !0 === e.current
                                }) || [];
                                o.length && a !== P && d(i, "href", o[0].a);
                                var s = d(i, "href");
                                a !== O || !o.length || o[0].a !== s && o[0].d !== s || d(i, "href", R(a))
                            }
                            toggleClass(n, t, a === O)
                        }), j()
                    },
                    drawUICounters: j,
                    drawLoader: F,
                    drawSkeletonLoader: function(e, t) {
                        if (f(document.querySelector(".vk"), "vk_flex_yes") && (0, l.partConfigEnabled)("mvk_skeleton_animation")) switch (setTimeout(function() {
                            H()
                        }, 0), t) {
                            case C:
                                $(".mcont", e).innerHTML = Wd.html((0, r.Feed)());
                                break;
                            case P:
                                $(".mcont", e).innerHTML = Wd.html((0, a.Messages)());
                                break;
                            case T:
                                $(".mcont", e).innerHTML = Wd.html((0, o.Notifications)());
                                break;
                            case M:
                                $(".mcont", e).innerHTML = Wd.html((0, i.Recommended)());
                                break;
                            case D:
                            default:
                                F(e)
                        } else F(e)
                    },
                    showUpdateButton: function(e) {
                        var t = window.lang,
                            n = Wd.html({
                                class: A,
                                inner: {
                                    class: "BottomMenu__updateButton_container",
                                    inner: {
                                        class: "BottomMenu__updateButton_wrap",
                                        onclick: ["nav.updateCurrentPage"],
                                        inner: [{
                                            class: "BottomMenu__updateButton_icon",
                                            inner: {
                                                class: "Icon Icon_whiteArrowTop"
                                            }
                                        }, {
                                            class: "BottomMenu__updateButton_text",
                                            inner: t.mobile_menu_refresh_button
                                        }]
                                    }
                                }
                            }),
                            i = f("vk_custom_scroll", p("body")),
                            a = e.$(i ? ".basis" : ".upanel");
                        a.$(".".concat(A)) || a.insertBefore(ceFromString(n), a.firstChild)
                    },
                    removeUpdateButton: H,
                    onFocusIn: function(e) {
                        var t = geBySel1(".".concat(w)),
                            n = e && e.target;
                        if (n && t && b.android) {
                            var i = !1;
                            "textarea" === n.tagName.toLowerCase() && (i = !0), "input" !== n.tagName.toLowerCase() || ["checkbox", "radio"].includes(n.type) || (i = !0), "select" === n.tagName.toLowerCase() && (i = !0), i && t.classList.add(k)
                        }
                    },
                    onFocusOut: function() {
                        var e = geBySel1(".".concat(w));
                        e && e.classList.remove(k)
                    },
                    onResize: function() {
                        var e = window.bodyNode;
                        $(".Skeleton") && ($(".mcont").innerHTML = '<div class="pcont bl_cont"><div id="al_loading"></div></div>', (0, s.alLoadingFix)()), e && e.classList.contains("vk_tabbar_bottom") && 0 === Math.abs(window.orientation) && I - 180 > window.innerHeight ? e.classList.add(k) : e && e.classList.remove(k)
                    },
                    setDefaultCounters: function() {
                        N(function(e) {
                            var t = e.tabId,
                                n = e.counter;
                            B[t] = n ? parseInt(n, 10) : 0
                        }), j()
                    },
                    TAB_ID_FEED: C,
                    TAB_ID_RECOMMEND: M,
                    TAB_ID_MESSAGES: P,
                    TAB_ID_NOTIFICATION: T,
                    TAB_ID_MENU: D,
                    TAB_IDS: x
                }
            }();
        window.Tabbar = w, window.isNewNavigation && (A.onRestore(w.drawUI), A.onChange(w.drawUI), onDOMReady(function() {
            var e;
            w.setDefaultCounters(), addEvent(window, "resize", function() {
                w.onResize(), clearTimeout(e), e = setTimeout(function() {
                    w.onResize()
                }, 300)
            })
        }))
    },
    "w+Cc": function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.Feed = l, t.default = void 0;
        var i = n("CjAb"),
            a = n("/zOt"),
            r = n("zLYz"),
            o = n("hrk0"),
            s = n("/xuI");

        function l(e) {
            for (var t = Math.ceil((window.innerHeight - s.HEADER_HEIGHT - 180) / 210), n = [], l = 0; l < t; l++) n.push((0, a.WallBlock)());
            return {
                inner: [(0, i.Header)(), (0, r.StoriesBlock)(), (0, o.NewPostBlock)(), n],
                class: "SkeletonFeed Skeleton",
                tag: "div"
            }
        }
        var c = l;
        t.default = c
    },
    w1QQ: function(e, t, n) {
        "use strict";
        var i = window,
            a = i.ajax,
            r = i.domCA,
            o = i.remove,
            s = i.FeedAssistanceStats;
        window.FeedAssistance = {
            hide: function(e, t, n) {
                var i = r(e, d),
                    u = hasClass(i, f);
                o(i), u || function(e, t, n) {
                    var i = s.getFromRef(e);
                    a.post(l, {
                        _ajax: 1,
                        type: t,
                        hash: n,
                        act: c,
                        from: i
                    })
                }(e, t, n);
                return !1
            },
            setFilled: function(e) {
                var t = hasClass(e, u) ? e : r(e, d);
                addClass(f, t)
            }
        };
        var l = "/feed",
            c = "hide_assistance",
            u = "feedAssistance",
            d = "." + u,
            f = "feedAssistance_filled"
    },
    wCFN: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.AlertBox = l;
        var i = n("OcsD"),
            a = s(n("TYsd")),
            r = s(n("Po+v")),
            o = s(n("z9sQ"));

        function s(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }

        function l(e, t, n) {
            var o = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : {},
                s = (0, i.ceFromString)(a.default.html((0, r.default)({
                    id: o.id,
                    class: "AlertBox",
                    scrollable: !0,
                    header: {
                        title: t || getLang("mobile_warning_header")
                    },
                    content: [e, {
                        class: "Popup__buttons",
                        inner: [c(getLang("mobile_close"), "secondary", n || "Popup.close(this)")]
                    }]
                })));
            domInsert(document.body, s), r.default.open(s, !0)
        }

        function c(e, t, n) {
            return {
                class: ["Popup__button", o.default.class("Btn", {
                    theme: t || "regular"
                })],
                tag: "button",
                inner: e,
                onclick: n
            }
        }
        page.onChange(function() {
            $$(".AlertBox").forEach(function(e) {
                return r.default.close(e)
            })
        }), window.AlertBox = l
    },
    wMVj: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i = n("UxAg"),
            a = u(n("+cqQ")),
            r = u(n("jk6M")),
            o = (n("OcsD"), function(e) {
                if (e && e.__esModule) return e;
                var t = c();
                if (t && t.has(e)) return t.get(e);
                var n = {};
                if (null != e) {
                    var i = Object.defineProperty && Object.getOwnPropertyDescriptor;
                    for (var a in e)
                        if (Object.prototype.hasOwnProperty.call(e, a)) {
                            var r = i ? Object.getOwnPropertyDescriptor(e, a) : null;
                            r && (r.get || r.set) ? Object.defineProperty(n, a, r) : n[a] = e[a]
                        }
                }
                n.default = e, t && t.set(e, n);
                return n
            }(n("a0wW"))),
            s = (u(n("K0hv")), n("eGQV")),
            l = n("izth");

        function c() {
            if ("function" != typeof WeakMap) return null;
            var e = new WeakMap;
            return c = function() {
                return e
            }, e
        }

        function u(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        var d = window,
            f = d.se,
            h = d.ce,
            p = d.attr,
            A = d.append,
            m = d.ge,
            _ = d.each,
            v = d.addEvent,
            g = d.removeEvent,
            y = d.remove,
            b = d.unlockButton,
            w = d.lockButton,
            k = d.checkNav,
            E = d.cancelEvent,
            S = d.checkEvent,
            C = d.getHref,
            M = d.extend,
            P = d.stopEvent,
            T = d.tag,
            D = d.gpeByTag,
            I = d.obj2qs,
            x = d.scrollToHash,
            O = d.addClass,
            L = d.hasClass,
            B = (d.toggleClass, d.qs2obj),
            R = d.copy,
            N = d.ajax,
            j = d.isVkWebView,
            F = d.onDOMReady,
            H = d.statlogsValueEvent,
            V = function() {
                var e = !(!window.history || !history.pushState),
                    t = f(function() {
                        return c
                    });
                F(function() {
                    o.default.setFlag(o.FLAG_SUPPORTS_HISTORY_API, e)
                });
                var n = {},
                    c = null,
                    u = [],
                    d = !1,
                    U = 20,
                    z = 30;

                function W() {
                    Tabbar.setHistory(n)
                }

                function q(e) {
                    var t = window.Tabbar;
                    if (e.lm && e.lm.tab && e.lm.is_tab_page || e.options && e.options.forceSetCurrent) {
                        var n = t.getCurrentId(),
                            i = e.lm && e.lm.tab || e.options.tab;
                        t.setCurrentId(i), n !== i && W()
                    } else e.lm && !e.lm.tab && (e.lm.tab = t.getCurrentId())
                }

                function $(e) {
                    return !!n[e] && n[e]
                }

                function G() {
                    return $(Tabbar.getCurrentId())
                }

                function Q(e, t) {
                    var n = (e || []).filter(function(e) {
                        return e.d === t || e.h === t
                    });
                    return !(!n || !n[0]) && n[0]
                }

                function Y() {
                    var e = (G() || []).filter(function(e) {
                        return !0 === e.current
                    });
                    return !(!e || !e[0]) && e[0]
                }

                function X(e, t, i) {
                    var a;
                    t.options && t.options.is_fast && t.options.prev_tab ? a = $(t.options.prev_tab) : (q(t), a = G(), t.lm && t.lm.is_tab_page && (a = !1));
                    var r = function() {
                            var e = Y();
                            return e && e.d && e.d.options && e.d.options.replaceState
                        }() || function(e) {
                            return e && e.options && e.options.replacePrevPage
                        }(t),
                        o = !1;
                    if (a) {
                        for (var s = -1, l = a.length - 1; l >= 0; l--)
                            if (a[l].h === e || a[l].a === e) {
                                s = l;
                                break
                            }
                        s > -1 && a.splice(s + 1, a.length);
                        for (var c = a.length - 1; c >= 0; c--) {
                            var u = a[c];
                            u.h === e || u.a === e ? (a[c] = {
                                h: e,
                                d: t,
                                a: i,
                                current: !0
                            }, o = !0) : a[c].current = !1
                        }
                    }
                    if (!o) {
                        var d = {
                            h: e,
                            d: t,
                            a: i,
                            current: !0
                        };
                        if (a) {
                            var f = a[a.length - 1],
                                h = f && f.d && f.d.options && f.d.options.removeAfterNextResponse;
                            (r || h) && a.pop(), a.push(d), a.length > U && a.shift()
                        } else {
                            var p = Tabbar.getCurrentId(),
                                A = Y();
                            if (A && A.d && A.d.options && A.d.options.need_check_updates && d.d.lm.check_updates) {
                                var m = d.d.html,
                                    _ = A.d.page;
                                d.d.page = _, d.d.newHTML = m
                            }
                            n[p] = [d]
                        }
                    }
                    if (isArray(a)) {
                        for (var v = -1, g = a.length - 1; g >= 0; g--)
                            if (!0 === a[g].current) {
                                v = g;
                                break
                            }
                        if (v > 0) {
                            var y = v - 1;
                            a[y].h.includes("/like?act=publish") && function(e, t) {
                                e.splice(t, 1)
                            }(a, y)
                        }
                    }
                }

                function K(e) {
                    var t;
                    if (t = /^(https?:)\/\/([^:\/]+)?(?::(\d+))?\/?(.*)$/i.exec(e)) {
                        if (t[1] != location.protocol) return !1;
                        if (t[2] && t[2] != location.hostname) return !1;
                        if (t[3] && t[3] != location.port) return !1;
                        e = (t[4] || "").replace(/^\/+/, "/")
                    }
                    return e
                }

                function J(e, t, n) {
                    if (S(t)) return !0;
                    if (n && n.push_only) return !0;
                    if (n && n.replace) location.replace(e);
                    else if (e) {
                        var i = C(e);
                        i === location.href.replace(location.origin, "") ? location.reload() : location.href = i
                    }
                    return !0
                }

                function Z(e, t, n) {
                    var i = window.al;
                    E(t);
                    var a = C(e);
                    if (window.al && i.ver) {
                        if (n && n.push_only) return !0;
                        if (N.nav(a, n)) return document.selection ? document.selection.empty() : window.getSelection && window.getSelection().removeAllRanges(), !0
                    }
                    J(a, t, n)
                }

                function ee(t, n, i) {
                    var a, r, o = window.Tabbar;
                    if (t && t.href) {
                        if (/vk\.com\/vkui\/([a-zA-Z_]+)/.test(t.href)) return J(t.href, n, i), !1;
                        if (r = t.href, t.getAttribute && t.getAttribute("data-change-location-with-post-away")) {
                            var s = {};
                            return (a = oe(t)).post_id && (s.post = a.post_id, a.ad_data && (s.post_ad_data = a.ad_data), a.post_click_cc_key && (s.cc_key = a.post_click_cc_key), r = "/away.php?to=" + encodeURIComponent(r) + "&" + I(s).substr(1)), J(r, n, i), !1
                        }
                    }
                    if (t && t.href && t.dataset && t.dataset.setFrom && (t.href = Url.make(t.href, {
                            from: V.cur
                        })), V.onBeforeGo(t, n, i)) return !1;
                    if (i = M({
                            no_push: !1,
                            push_only: !1,
                            replace: !1
                        }, i), S(n)) return !P(n);
                    if (!t) return !0;
                    e && (i.no_push || i.need_restore) && (d = !1);
                    var c = t,
                        u = "",
                        f = "",
                        k = "";

                    function C(e) {
                        return "a" === T(e) ? e : D("a", e)
                    }!t.href && t.getAttribute && (c = t.getAttribute("data-href"));
                    var N = n && C(n.target) || t && t.tagName && C(t);
                    if (("input" == T(t) || "button" == T(t)) && ("submit" == t.type || "image" == t.type) && t.form) {
                        if (t.disabled) return !0;
                        var j = t.form,
                            F = {},
                            H = j.action || "",
                            U = !1;
                        if (_(j, function(e, n) {
                                return !(n.name && !n.disabled) || ("radio" === n.type && !n.checked || ("button" === n.type || ("submit" === n.type && n !== t || ("image" === n.type && n !== t || ("file" === n.type ? (U = !0, !1) : "checkbox" === n.type ? (F[n.name] = n.checked ? 1 : 0, !0) : void(F[n.name] = n.value))))))
                            }), "image" == t.type && (F[t.name] = t.value, F[t.name + ".x"] = 1, F[t.name + ".y"] = 1), U || "multipart/form-data" == p(j, "enctype")) return function(e) {
                            var t = h("iframe");
                            p(t, "id", "upload_iframe"), p(t, "name", "upload_iframe"), p(t, "width", "0"), p(t, "height", "0"), p(t, "border", "0"), p(t, "style", "width:0;height:0;border:none;position:absolute;left:-1000px;"), A(t, e.parentNode), window.frames.upload_iframe.name = "upload_iframe", t = m("upload_iframe");
                            var n = !1;
                            return _(e, function(e, t) {
                                if ("submit" === t.type) return n = t, !1
                            }), v(t, "load", function e() {
                                g(t, "load", e), setTimeout(function() {
                                    y(t), b(n)
                                }, 2e3)
                            }), (0, l.setDocumentDomain)(), p(e, "target", "upload_iframe"), p(e, "method", "post"), p(e, "enctype", "multipart/form-data"), p(e, "encoding", "multipart/form-data"), A(h("input", {
                                type: "hidden",
                                id: "__extra",
                                name: "__extra",
                                value: 1
                            }), e), e.submit(), w(n), setTimeout(function() {
                                y("__extra")
                            }, 0), !1
                        }(j);
                        if (!(c = K(H))) return !0;
                        j.method && "get" != j.method ? i.params = F : c = c.split("?", 1).shift() + I(F)
                    }
                    if (L("al_need_login", t) && (i.redirectToLoginPage = !0), "string" != typeof c) {
                        if (!c) return !0;
                        "/" !== (u = (c.pathname || "").replace(/^\/+/, "/")).substr(0, 1) && (u = "/" + u), f = c.search.substr(1), k = c.hash, c = u + c.search + k;
                        if (/^(?:%40|@)-?[.a-z0-9_]+-[a-z0-9-]+(?:[\?&]\w+\=[a-z0-9-_]+)*$/.test(u.substr(1)) && window.cur && window.cur.module) {
                            var z = window.cur.module;
                            if ("feed" === z) "search" === B(V.params).section && (z = "feed_search");
                            f += "&ref=".concat(z)
                        }
                    } else {
                        var W = c.split("#"),
                            $ = W.shift();
                        k = W.length ? "#" + W.join("#") : "", u = ($ = $.split("?")).shift(), f = $.join("?"), !k && !f || u || (u = V.path, $ || (f = V.params), c = u + (f ? "?" + f : "") + k)
                    }
                    var G = B(f);

                    function Q(e, t, n) {
                        var i = n && G[t];
                        return !(!e || i) && (G[t] = e, !0)
                    }
                    if (Q((a = oe(N, !!G._post_click_type)).post_id, "_post", !0), Q(a.post_click_type, "_post_click_type", !0), G._post_click_type && (Q(a.post_click_mention_id, "_post_click_mention_id", !0), Q(a.post_click_cc_key, "_post_click_cc_key", !0), Q(a.post_click_url, "_post_click_url", !0), Q(a.ad_data, "_post_ad_data", !0) && Q(a.ad_block_unique_id, "_post_ad_block_unique_id")), 0 !== location.pathname.indexOf("/app") && 0 === u.indexOf("/app") && G && G.act && "app_r" === G.act) return !!n || (J(t, n, i), !1);
                    if (f = I(G).substr(1), n && c.split("#").shift() == V.cur.split("#").shift() && k && !i.force && (x(k), i.push_only = !0), i.no_push && V.cur == c && !i.force) return !1;
                    if (i.push_only) return ie(M(i, {
                        nav: {
                            push: c,
                            path: u,
                            params: f,
                            hash: k
                        }
                    })), !1;
                    if (O("active", i.link || t), L("al_back_history", t)) {
                        if (window.isNewNavigation) return O("al_back", i.link || t), removeClass("al_back_history", i.link || t), V.backToTabHistory(i.link || t);
                        if (V.tryBack()) return !1
                    }
                    if (window.isNewNavigation && (H || i.isForm) && (i.removeAfterNextResponse = null == i.removeAfterNextResponse || i.removeAfterNextResponse), window.isNewNavigation && (L("al_tab", t) || L("SliderTabs__tab", t) || L("replaceState", t)) && (i.replaceState = !0), L("al_back", t)) {
                        var Y = G.act;
                        window.isNewMail && "/mail" === location.pathname && !Y || "show" === Y && !geByClass1("messenger") ? i.need_restore = !1 : i.need_restore = !0
                    }
                    if (window.isNewNavigation) {
                        var X = p(t, "data-tabbar");
                        if (X) {
                            var ee = o.getCurrentId();
                            ee !== X ? (X !== o.TAB_ID_MESSAGES && 0 === o.getTabCounter(X) && (i.need_restore = !0), X === o.TAB_ID_FEED && "/feed" === c && (i.need_check_updates = !0), i.tab = X, i.prev_tab = ee, i.forceSetCurrent = !0) : (i.tab = X, i.prev_tab = X, i.replace = !0), q({
                                lm: {
                                    tab: X,
                                    is_tab_page: !0
                                }
                            })
                        } else if (i.tab) i.native_prev = o.getCurrentId(), i.is_native_back = !0, i.forceSetCurrent = !0, q({
                            lm: {
                                tab: i.tab,
                                is_tab_page: !0
                            }
                        });
                        else {
                            var ne = o.getCurrentId();
                            i.tab = ne;
                            var ae = !(!this || !isString(this.cur)) && this.cur.substr(1);
                            o.TAB_IDS.includes(ae) ? i.prev_tab = ae : i.prev_tab = ne
                        }
                    }
                    var re = function(e) {
                        var t = window.cur,
                            n = window.menu,
                            i = B(e.nav.params),
                            a = B(V.params);
                        if ((a.z || i.z) && a.z != i.z) {
                            if (V.path == e.nav.path) {
                                var r = R(i),
                                    o = R(a);
                                if (delete r.z, delete o.z, r = I(r), o = I(o), r == o) return te(i.z, !1, e), ie(e), n.close(null, !0), !1
                            }
                            e.zProcess = function(t, n) {
                                te(i.z, t, M({}, e, {
                                    no_push: !0
                                }), n)
                            }
                        }
                        if (e.onPreNav = function() {
                                e.zProcess && (e.zProcess(), delete e.zProcess)
                            }, !e.ignore_cur_process && t.processNav && t.processNav(e)) return ie(e), n.close(null, !0), !1;
                        return Z(e.nav.push, null, e), !1
                    }(M(i, t.tagName ? {
                        target: t
                    } : {}, {
                        nav: {
                            push: c,
                            path: u,
                            params: f,
                            hash: k
                        }
                    }));
                    return re || E(n), re
                }

                function te(e, t, n, i) {
                    var a, r = window.photo,
                        o = window.zlayer;
                    if (e) {
                        if (a = /^photo(-?\d+_\d+)(?:\/([a-z0-9_-]+(\/rev)?)?)?$/i.exec(e)) {
                            if (!0 === i) return !1;
                            var s = a[1] || "",
                                l = a[2] || "";
                            return r.zopen(!1, null, s, l, {
                                no_push: (n || {}).no_push
                            }), o && !1 !== t && void 0 !== t && (o._st = t), QRPhotoPosting && QRPhotoPosting.close(), !0
                        }
                        if (a = /^story(-?\d+_\d+)(\/?([a-z0-9_-]+))(\/?[a-z0-9_:]+)?$/i.exec(e)) {
                            var c = window.Stories;
                            if (!0 === i) return !1;
                            var u = a[1] + (a[2] ? a[2] : "/".concat(a[1])) + (a[4] ? a[4] : "");
                            return c.close({
                                isPopState: !0,
                                storyRaw: u
                            }), !0
                        }
                        if (a = /^\/?narrative(-?\d+)_(\d+)(\/?([a-z0-9_-]+))?$/i.exec(e)) {
                            var d = window.Stories;
                            return !0 !== i && (d.init("".concat(a[1], "/narrative").concat(a[1], "_").concat(a[2]), {
                                source: "narrative_link"
                            }), !0)
                        }
                        if (a = /^\/?doc(-?\d+)_(\d+)(\/?([a-z0-9_-]+))?$/i.exec(e)) return !0 !== i && (r.zopen(null, null, "".concat(a[1], "_").concat(a[2]), "", {
                            no_push: (n || {}).no_push,
                            isDoc: !0,
                            hasVideo: !1,
                            hash: a[4]
                        }), o && !1 !== t && void 0 !== t && (o._st = t), !0);
                        if (a = /^\/?publish_photo(-?\d+)?$/i.exec(e)) {
                            if (!0 === i) return !1;
                            QRPhotoPosting && QRPhotoPosting.show()
                        }
                    }
                    return !1 !== i && (o && o.close(), Stories && Stories.close({
                        isPopState: !0,
                        closeAll: !0
                    }), QRPhotoPosting && QRPhotoPosting.close(), !0)
                }

                function ne(t, n) {
                    var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null;
                    if (e) {
                        if (window.isNewNavigation) return void
                        function(e, t, n) {
                            var i = window.Tabbar.getCurrentId(),
                                a = {
                                    nav: {
                                        tab: t.tab || i,
                                        prev_tab: t.prev_tab
                                    }
                                };
                            window.isNewMail ? t.replace ? history.replaceState(M({}, n, a), null, e) : history.pushState(M({}, n, a), null, e) : t.replace ? history.replaceState(a, null, e) : history.pushState(a, null, e)
                        }(t, n, i);
                        t = "/" == t.substr(0, 1) ? t : "/" + t, window.isNewMail ? n.replace ? history.replaceState(i, null, t) : history.pushState(i, null, t) : n.replace ? history.replaceState(null, null, t) : history.pushState(null, null, t)
                    } else {
                        var a = "/" == t.substr(0, 1) ? t : "/" + t,
                            r = "#" + a,
                            o = location.pathname + location.search + r;
                        m("base").href = a, n.replace ? location.replace(o) : (c = r, location.href = o)
                    }
                }

                function ie(t) {
                    if (!t.no_push && V.cur != t.nav.push) {
                        if ((0, s.isOfflineCapable)() && !1 === navigator.onLine && !t.push_only) return J(t.nav.push, null, t);
                        try {
                            window.isNewMail ? ne(t.nav.push, t, t.historyState) : ne(t.nav.push, t), e && !t.no_push && (t.nav_init || t.nav_incr) ? (t.nav_init && (d = 0), t.nav_incr && !1 !== d && d++, d > z && (d = !1)) : d = !1
                        } catch (e) {
                            return J(t.nav.push, null, t)
                        }
                    }
                    V.cur !== t.nav.push && (V.prev_cur = V.cur, V.prev_fv_link = V.fv_link), V.cur = t.nav.push, V.path = t.nav.path, V.params = t.nav.params, V.hash = t.nav.hash, V.path && 0 !== V.path.indexOf("/") && (V.path = "/" + V.path)
                }
                if (e) v(window, "popstate", function(e) {
                    if (window.isNewMail && V.onPopState()) return preventEvent(e), void P(e);
                    var t = M({
                        no_push: !0,
                        need_restore: !0
                    });
                    if (window.isNewNavigation && e.state && e.state.nav) {
                        var n = e.state.nav,
                            i = n.tab,
                            a = n.prev_tab;
                        t = M(t, {
                            tab: i,
                            prev_tab: a
                        })
                    }
                    ee(location, null, t)
                });
                else {
                    var ae = location.hash || "";
                    "#/" == ae.substr(0, 2) && J(ae.substr(1), null, {
                        replace: !0
                    });
                    var re = function(e) {
                        (e = (e || "").substr(1)) && "/" == e.substr(0, 1) || (e = location), ee(e, null, {
                            no_push: !0,
                            need_restore: !0
                        })
                    };
                    "onhashchange" in window ? v(window, "hashchange", function() {
                        re(location.hash || "")
                    }) : (! function e() {
                        var n = location.hash || "";
                        c !== n && (c = n, t(!0)), setTimeout(e, 100)
                    }(), t(function(e) {
                        re(e)
                    }))
                }

                function oe(e, t) {
                    var n = !(!e || !e.getAttribute),
                        i = {};
                    if (!n) return i;
                    var a = e.getAttribute("data-post-id");
                    a && (i.post_id = a);
                    var r = e.getAttribute("data-post-click-type");
                    r && (i.post_click_type = r);
                    var o = e.getAttribute("mention_id");
                    o && (i.post_click_mention_id = o);
                    var s = e.getAttribute("data-post-click-cc-key");
                    s && (i.post_click_cc_key = s);
                    var l = [e.getAttribute("href"), e.getAttribute("data-href")];
                    if (_(l, function(e, t) {
                            if (t && "#" !== t) return i.post_click_url = t, !1
                        }), !!r || t) {
                        var c = gpeByClass("_ads_block_data_w", e),
                            u = (c = c || gpeByClass("_ads_promoted_post_data_w", e)) && c.getAttribute("data-ad"),
                            d = c && c.getAttribute("data-ad-block-uid");
                        u && (i.ad_data = u), d && (i.ad_block_unique_id = d)
                    }
                    return i
                }
                var se = (location.pathname || "").replace(/^\/+/, "/"),
                    le = location.search || "",
                    ce = location.hash || "";
                return {
                    onBeforeGo: (0, a.default)(),
                    onBeforeGo2: (0, a.default)("path", "queryObject", "fullUrl", "opts"),
                    onPopState: (0, a.default)(),
                    go: ee,
                    al_go: Z,
                    app_go: function(e, t, n) {
                        if (!n) return !0;
                        if (S(t)) return !0;
                        y("app_go_frame");
                        var i = C(e),
                            a = h("iframe", {
                                id: "app_go_frame",
                                src: n,
                                onload: function() {
                                    y("app_go_frame"), i && V.hard_go(i)
                                }
                            }, {
                                display: "none"
                            });
                        return window.bodyNode.appendChild(a), !1
                    },
                    hard_go: J,
                    go_after: function(e, t) {
                        var n = window.al;
                        return !window.al || !n.ver || (!!k(t.target, {
                            skip_onclick: !0,
                            skip_clicable: !0
                        }) || !1 !== e && (V.go(e, t) || E(t), !1))
                    },
                    page_set: function(e, t, n) {
                        if (window.isNewNavigation) X(e, t, n);
                        else {
                            for (var i = u.length - 1; i >= 0; --i)
                                if (u[i].h == e || u[i].a == e) return void(u[i] = {
                                    h: e,
                                    d: t,
                                    a: n
                                });
                            u.push({
                                h: e,
                                d: t,
                                a: n
                            }), u.length > U && u.shift()
                        }
                    },
                    page_get: function(e) {
                        var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : Tabbar.getCurrentId();
                        if (window.isNewNavigation) return function(e, t) {
                            for (var n = $(t), i = n.length - 1; i >= 0; --i) {
                                var a = n[i];
                                if (a.h === e || a.a === e) return a.d
                            }
                            return !1
                        }(e, t);
                        for (var n = u.length - 1; n >= 0; --n)
                            if (u[n].h == e || u[n].a == e) return (u = u.slice(0, n + 1))[n].d;
                        return !1
                    },
                    saveScrollPosition: function() {
                        var e = Y();
                        e && e.d && (e.d.st = scrollTop())
                    },
                    set: ie,
                    checkUrl: K,
                    tryHistoryBack: function() {
                        var e = d;
                        return e && history.go(-e), d = !1, !!e
                    },
                    zInit: function() {
                        var e = B(V.params);
                        e.z && te(e.z)
                    },
                    getPostParams: oe,
                    cur: se + le + ce,
                    path: se,
                    params: le.substr(1),
                    hash: ce,
                    clear: function() {
                        window.isNewNavigation ? (n = {}, V.initStore(), u = [], Tabbar.setHistory(n)) : u = []
                    },
                    hasUpdate: function(e, t, n) {
                        if (!e || !e.need_check_updates || !window.isNewNavigation) return !1;
                        var i = t,
                            a = Q($(e.tab), i);
                        if (!a || !n.html) return !1;
                        var r = a.d.lm.check_updates,
                            o = n.lm.check_updates;
                        return !(!r && !o) && (o !== r && {
                            currentCache: a
                        })
                    },
                    needUpdate: function(e, t, n) {
                        if (!e || !e.need_check_updates || !window.isNewNavigation) return !0;
                        var i = t,
                            a = Q($(e.tab), i);
                        if (!a || !n.html) return !0;
                        var r = a.d.lm.check_updates,
                            o = n.lm.check_updates;
                        return !r && !o || o !== r
                    },
                    updateCurrentPage: function() {
                        var e = Y();
                        page.set(e.h, e.d, {
                            forceUpdate: !0
                        })
                    },
                    isTabHaveCache: function(e, t) {
                        var n = $(e);
                        return !!n && !!Q(n, t)
                    },
                    getQuery: function(e) {
                        var t = B(V.params);
                        return e ? t[e] || null : t
                    },
                    getNotifierScrollTop: function() {
                        var e = u.find(function(e) {
                            return "/settings?act=notifier" === e.h
                        });
                        return e ? e.d.st : null
                    },
                    reload: function() {
                        return V.go(V.cur)
                    },
                    tryBack: function() {
                        var e = u.slice(-2)[0];
                        return !!e && (V.go(e.h, null, {
                            need_restore: !0
                        }), !0)
                    },
                    backToTabHistory: function(e) {
                        var t = G(),
                            i = t.findIndex(function(e) {
                                return !0 === e.current
                            }),
                            a = e && L("al_back", e),
                            r = p(e, "href"),
                            o = t[i - 1];
                        if (o) return t.splice(i, t.length), V.go(o.h, null, {
                            need_restore: a
                        });
                        if (r) return V.go(r);
                        var s = Tabbar.getCurrentId(),
                            l = Tabbar.getDefaultURL(s);
                        return n[s] = [], V.go(l)
                    },
                    openInNativeApp: function(e, t, n) {
                        var i = this;
                        if (this._openAppInProgress) return !1;
                        E(t);
                        var a = {
                                android: "https://vk.cc/android",
                                iphone: "https://vk.cc/iphone"
                            },
                            o = "vk://vk.com" + (window.isNewNavigation && m("vk_wrap").offsetWidth < 882 && V.prev_cur ? V.prev_cur : V.cur),
                            s = r.default.mi ? 1500 : 300;
                        r.default.safari && (s = r.default.ios > 10 ? 0 : 1100);
                        var l = Date.now(),
                            c = setTimeout(function() {
                                i._openAppInProgress = !1, Date.now() - l > s + 200 || !document.hasFocus() || (n && n.href ? V.hard_go(n.href) : V.hard_go(a[e]))
                            }, s);
                        if (v(window, "blur", function e() {
                                clearTimeout(c), i._openAppInProgress = !1, g(window, "blur", e)
                            }), r.default.ios) {
                            v(window, "focus", function e() {
                                window.menu && window.menu.close(), g(window, "focus", e)
                            })
                        } else window.menu && window.menu.close();
                        return this._openAppInProgress = !0, V.hard_go(o), H("mvk_open_in_native_link", 1, e), !1
                    },
                    initOpenInNativeAppBtn: function() {
                        if (!j()) {
                            var e = geByClass1("mmi_open_in_app");
                            e && O("supported", e)
                        }
                    },
                    initStore: function() {
                        window.store.tabs = n
                    },
                    getPageJs: function() {
                        var e = (0, i.$)("#page_script");
                        return e ? e.innerText : u.length && u[u.length - 1].d.js || ""
                    },
                    onMenuItemClick: function(e) {
                        var t = window.isNewNavigation ? "tabbar" : "left_menu",
                            n = getW("vk_wrap") >= 882 ? "full_version" : "mobile";
                        if (H("mvk_navigation_pages", "click", t, e, n), "/wall" === V.cur.substr(0, 5) && "add" === V.getQuery("act")) {
                            var a = (0, i.$)("#feed_add_form"),
                                r = B(a.action.split("?")[1]),
                                o = a.getAttribute("data-hash") || r.hash;
                            o && post.saveDraft(null, o)
                        }
                    },
                    setFvLink: function(e) {
                        V.fv_link = e
                    }
                }
            }();
        F(function() {
            V.initOpenInNativeAppBtn(), V.initStore()
        }), window.nav || (window.nav = V);
        var U = V;
        t.default = U
    },
    wRgB: function(e, t, n) {
        "use strict";

        function i(e, t) {
            for (var n = 0; n < t.length; n++) {
                var i = t[n];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var a = window,
            r = a.isObject,
            o = a.extend,
            s = a.ge,
            l = a.geByClass1,
            c = a.val,
            u = a.addClass,
            d = a.addEvent,
            f = a.removeEvent,
            h = a.setStyle,
            p = a.cancelEvent,
            A = a.vkNow,
            m = a.getW,
            _ = function() {
                function e(t, n) {
                    ! function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, e), r(n) || (n = {
                        items: n
                    }), this.opts = o({
                        slideClassName: "",
                        onStartChange: !1,
                        onChange: !1,
                        pointsWrap: !1,
                        slideContFn: !1,
                        shownSlidesNum: 1
                    }, n), this.wrap = s(t), this.parseItems(n.items), this.init()
                }
                var t, n, a;
                return t = e, (n = [{
                    key: "parseItems",
                    value: function(e) {
                        for (var t = [], n = 0; n < e.length; n++) {
                            var i = e[n];
                            "string" == typeof i && (i = {
                                className: i
                            }), i = o({
                                html: "",
                                className: "",
                                pos: t.length
                            }, i), t.push(i)
                        }
                        this.items = t
                    }
                }, {
                    key: "init",
                    value: function() {
                        if (u("landings_slider_wrap", this.wrap), d(this.wrap, "touchstart mousedown", this.touchStart.bind(this)), this.opts.pointsWrap) {
                            var e = "";
                            for (var t in this.items) e += '<div class="landings_slider_point"></div>';
                            u("landings_slider_points", this.opts.pointsWrap), c(this.opts.pointsWrap, e)
                        }
                        this.changeSlide(0)
                    }
                }, {
                    key: "getTouchX",
                    value: function(e) {
                        return e.targetTouches && e.targetTouches.length > 0 ? e.targetTouches[0].pageX : e.pageX
                    }
                }, {
                    key: "getTouchY",
                    value: function(e) {
                        return e.targetTouches && e.targetTouches.length > 0 ? e.touches[0].pageY : e.pageY
                    }
                }, {
                    key: "touchStart",
                    value: function(e) {
                        var t = this.getTouchX(e),
                            n = this.getTouchY(e),
                            i = this,
                            a = !1,
                            r = !1,
                            o = A(),
                            s = 0,
                            l = this.getTouchX(e),
                            c = m(this.wrap);

                        function u(e) {
                            if (!r)
                                if (!a && Math.abs(i.getTouchY(e) - n) > 20) r = !0;
                                else {
                                    i.lock && (a = !0, t = i.getTouchX(e), o = A(), i.changeSlide(i.newPos), p(e), i.lock = 0, clearTimeout(i.changeTimeout));
                                    var u = i.getTouchX(e),
                                        d = t - u;
                                    (Math.abs(d) > 20 || a) && (p(e), a || (t = i.getTouchX(e), d = 0, a = !0), s = d, l = u, d = -(100 + d / c * 100), d -= 100 * i.opts.shownSlidesNum - 100, h(i.helper, "transform", "translateX(" + d + "%)"))
                                }
                        }

                        function _(e) {
                            if (f(bodyNode, "mousemove touchmove", u), f(bodyNode, "mouseup touchend touchcancel", _), !i.lock)
                                if (i.lock = 1, Math.abs(s) > 50) {
                                    var n = s < 0 ? "prev" : "next",
                                        a = Math.abs(l - t) / (o / A());
                                    a += .2 * a;
                                    var r = 100 * i.opts.shownSlidesNum;
                                    r = "next" == n ? 100 + r : r - 100, h(i.helper, {
                                        transition: "transform " + a + "ms",
                                        transform: "translateX(-" + r + "%)"
                                    });
                                    var c = i.items.length - 1,
                                        d = "prev" == n ? i.pos - 1 : i.pos + 1;
                                    d < 0 ? d = c : d > c && (d = 0), i.opts.onStartChange && i.opts.onStartChange(d, n), i.newPos = d, i.changeTimeout = setTimeout(function() {
                                        i.lock = 0, i.changeSlide(d)
                                    }, a)
                                } else h(i.helper, {
                                    transition: "transform 200ms",
                                    transform: "translateX(-" + 100 * i.opts.shownSlidesNum + "%)"
                                }), setTimeout(function() {
                                    i.lock = 0
                                }, 200)
                        }
                        f(bodyNode, "mousemove touchmove", u), f(bodyNode, "mouseup touchend touchcancel", _), d(bodyNode, "mousemove touchmove", u), d(bodyNode, "mouseup touchend touchcancel", _)
                    }
                }, {
                    key: "makeItem",
                    value: function(e) {
                        var t = this.pos == e.pos ? "_active_slide " : "",
                            n = this.opts.slideContFn ? this.opts.slideContFn(e) : e.html;
                        return '<div class="landings_slider_item ' + t + e.className + " " + this.opts.slideClassName + '">' + n + "</div>"
                    }
                }, {
                    key: "getSlidesHtml",
                    value: function(e) {
                        for (var t = this.opts.shownSlidesNum, n = this.items.length - 1, i = "", a = e, r = 0; r < t; r++) --a < 0 && (a = n), i = this.makeItem(this.items[a]) + i;
                        i += this.makeItem(this.items[e]), a = e;
                        for (var o = 0; o < t; o++) ++a > n && (a = 0), i += this.makeItem(this.items[a]);
                        return i
                    }
                }, {
                    key: "changeSlide",
                    value: function(e) {
                        if (this.pos = Math.max(0, Math.min(e, this.items.length - 1)), this.replaceHtml(this.getSlidesHtml(this.pos)), this.opts.onChange && this.opts.onChange(this.pos), this.opts.pointsWrap) {
                            var t = s(this.opts.pointsWrap);
                            removeClass("selected", l("selected", t)), u("selected", t.children[this.pos])
                        }
                    }
                }, {
                    key: "replaceHtml",
                    value: function(e) {
                        c(this.wrap, '<div class="landings_slider_helper">' + e + "</div>"), this.helper = l("landings_slider_helper", this.wrap), h(this.helper, "transform", "translateX(-" + 100 * this.opts.shownSlidesNum + "%)")
                    }
                }, {
                    key: "toSlide",
                    value: function(e, t) {
                        this.lock = 1;
                        var n = this.makeItem(this.items[this.pos]),
                            i = this.makeItem(this.items[e]);
                        e > this.pos ? n += i : n = i + n, this.replaceHtml(n), t || (t = e > this.pos ? "next" : "prev");
                        var a = "next" == t ? 0 : -100;
                        h(this.helper, "transform", "translateX(" + a + "%)"), this.opts.onStartChange && this.opts.onStartChange(e, t);
                        var r = this;
                        clearTimeout(this.toSlideTimer), this.toSlideTimer = setTimeout(function() {
                            a = "next" == t ? -100 : 0, h(r.helper, {
                                transition: "transform 200ms",
                                transform: "translateX(" + a + "%)"
                            }), r.toSlideTimer = setTimeout(function() {
                                r.lock = 0, r.changeSlide(e)
                            }, 200)
                        }, 10)
                    }
                }]) && i(t.prototype, n), a && i(t, a), e
            }();
        t.default = _
    },
    wTbK: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), Object.defineProperty(t, "open", {
            enumerable: !0,
            get: function() {
                return r.open
            }
        }), Object.defineProperty(t, "close", {
            enumerable: !0,
            get: function() {
                return r.close
            }
        }), t.default = void 0;
        var i, a = (i = n("t7Ww")) && i.__esModule ? i : {
                default: i
            },
            r = n("ACAL");
        var o = a.default;
        t.default = o, window.ModalMenu = a.default, extend(a.default, {
            open: r.open,
            close: r.close
        })
    },
    wZtc: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.loadMessage = function(e) {
            s(e)
        };
        var i = n("qHA9"),
            a = null,
            r = null;

        function o(e) {
            if (r && (clearTimeout(r), r = null), a && (a = Object.assign({}, a, {
                    fails: 0
                })), "online" === e.type && a) {
                var t = a;
                a = null, s(t)
            }
        }

        function s(e) {
            if (!1 !== navigator.onLine) return (0, i.mailRequest)("/mail", {
                act: "message",
                message_id: e.msgId,
                forcePinned: e.forcePinned
            }).then(function(t) {
                e.onResult(t)
            }).catch(function(t) {
                if (e.onTryError && e.onTryError(t), !1 !== navigator.onLine) {
                    var n = Math.min(1 + (0 | e.fails), 6),
                        i = Math.pow(2, Math.max(n - 2, 0));
                    a = Object.assign({}, e, {
                        fails: n
                    }), r = setTimeout(function() {
                        r = null, s(a)
                    }, 1e3 * i)
                } else a = Object.assign({}, e, {
                    fails: 0
                })
            });
            a = Object.assign({}, e, {
                fails: 0
            })
        }
        window.addEventListener("online", o), window.addEventListener("offline", o)
    },
    wcVR: function(e, t, n) {
        "use strict";

        function i(e) {
            return (i = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            })(e)
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var a = window.extend,
            r = {
                _def_opts: {
                    enableHighAccuracy: !0,
                    maximumAge: 3e5,
                    timeout: 6e4
                },
                _provider: null,
                initW3C: function() {
                    r._provider = navigator.geolocation, r.getCurrentPosition = function(e, t, n) {
                        r._provider.getCurrentPosition(function(t) {
                            void 0 !== t.latitude ? e(a(t, {
                                coords: a(t.coords || {}, {
                                    latitude: t.latitude,
                                    longitude: t.longitude
                                })
                            })) : e(t)
                        }, t, n)
                    }
                },
                initGears: function() {
                    var e = window.google;
                    r._provider = e.gears.factory.create("beta.geolocation")
                },
                initSymbian: function() {
                    var e = window.device;
                    r._provider = e.getServiceObject("Service.Location", "ILocation"), r.getCurrentPosition = function(e, t) {
                        r._provider.ILocation.GetLocation({
                            LocationInformationClass: "BasicLocationInformation"
                        }, function(n, i, a) {
                            4 == i ? t({
                                code: 2,
                                message: "Position unavailable"
                            }) : e({
                                timestamp: null,
                                coords: {
                                    latitude: a.ReturnValue.Latitude,
                                    longitude: a.ReturnValue.Longitude,
                                    altitude: a.ReturnValue.Altitude,
                                    heading: a.ReturnValue.Heading
                                }
                            })
                        })
                    }
                },
                initPalm: function() {
                    r.getCurrentPosition = function(e, t, n) {
                        var i = {};
                        n && (n.enableHighAccuracy && 1 == n.enableHighAccuracy && (i.accuracy = 1), n.maximumAge && (i.maximumAge = n.maximumAge), n.responseTime && (n.responseTime < 5 ? i.responseTime = 1 : n.responseTime < 20 ? i.responseTime = 2 : i.timeout = 3)), new window.Mojo.Service.Request("palm://com.palm.location", {
                            method: "getCurrentPosition",
                            parameters: i,
                            onSuccess: function(t) {
                                e({
                                    timestamp: t.timestamp,
                                    coords: {
                                        latitude: t.latitude,
                                        longitude: t.longitude,
                                        heading: t.heading
                                    }
                                })
                            },
                            onFailure: function(e) {
                                1 == e.errorCode ? t({
                                    code: 3,
                                    message: "Timeout"
                                }) : 2 == e.errorCode ? t({
                                    code: 2,
                                    message: "Position unavailable"
                                }) : t({
                                    code: 0,
                                    message: "Unknown Error: webOS-code" + e.errorCode
                                })
                            }
                        })
                    }
                },
                getCurrentPosition: function(e, t, n) {
                    r._provider.getCurrentPosition(e, t, a(r._def_opts, n || {}))
                },
                init: function() {
                    var e = window,
                        t = e.google,
                        n = e.device,
                        a = e.Mojo;
                    try {
                        var o = "undefined";
                        if (i(navigator.geolocation) !== o) r.initW3C();
                        else if (i(window.google) !== o && i(t.gears) !== o) r.initGears();
                        else if (i(n) !== o && i(n.getServiceObject) !== o) r.initSymbian();
                        else {
                            if (i(a) === o || "Mojo.Service.Request" == typeof a.Service.Request) return !1;
                            r.initPalm()
                        }
                    } catch (e) {
                        return !1
                    }
                    return !0
                }
            };
        window.geo = r;
        var o = r;
        t.default = o
    },
    wyHI: function(e, t, n) {
        "use strict";
        var i = window,
            a = i.gpeByClass,
            r = i.hasClass,
            o = i.addClass,
            s = i.removeClass,
            l = i.geByClass1,
            c = i.setStyle,
            u = i.tooltip,
            d = i.ajax;
        window.Fave = {
            showActionsTT: function(e, t) {
                cancelEvent(t);
                var n = a("FaveArticles__row", e);
                if (r(n, "wi_actions_opened")) Fave.hideActionsTT();
                else {
                    var i = l("wi_actions_wrap", n),
                        s = l("FaveArticles__row_actions", n);
                    c(i, "top", e.offsetTop + e.offsetHeight + "px"), o(n, "wi_actions_opened"), u.addHandler(Fave.hideActionsTT), u.show(i, s)
                }
            },
            hideActionsTT: function() {
                s("wi_actions_opened", l("wi_actions_opened")), u.hide()
            },
            removeArticle: function(e, t, n) {
                Fave.hideActionsTT();
                var i = a("FaveArticles__row", e);
                o(i, "removed"), d.post("fave.php", {
                    act: "defave_article",
                    link: t,
                    hash: n
                }, {
                    onFail: function() {
                        return s(i, "removed")
                    }
                })
            },
            restoreArticle: function(e, t, n) {
                var i = a("FaveArticles__row", e);
                s(i, "removed"), d.post("fave.php", {
                    act: "enfave_article",
                    link: t,
                    hash: n
                }, {
                    onFail: function() {
                        return o(i, "removed")
                    }
                })
            }
        }
    },
    xk4V: function(e, t, n) {
        var i = n("4fRq"),
            a = n("I2ZF");
        e.exports = function(e, t, n) {
            var r = t && n || 0;
            "string" == typeof e && (t = "binary" === e ? new Array(16) : null, e = null);
            var o = (e = e || {}).random || (e.rng || i)();
            if (o[6] = 15 & o[6] | 64, o[8] = 63 & o[8] | 128, t)
                for (var s = 0; s < 16; ++s) t[r + s] = o[s];
            return t || a(o)
        }
    },
    xwOv: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.back = function() {
            window.history ? window.history.back() : window.location = "/"
        }, t.close = function() {
            i && o.default.close(i)
        }, t.show = function() {
            var e = f(),
                t = "https://vk.com/fest?publish_photo=".concat(e.photo),
                n = s.default.createQR(t, 271, "QRPhotoPosting__svg", {
                    isShowLogo: !0
                });
            i = o.default.open(a.default.elem((0, l.QRPhotoPosting)({
                svg: n,
                title: lang.mobile_photo_qr_popup_title
            })), !0), nav.go("".concat(nav.path, "?z=publish_photo").concat(e.photo), null, {
                push_only: !0,
                nav_init: !1,
                nav_incr: !0
            })
        }, t.getQRPhotoButton = h, t.appendQRPhotoButton = function(e) {
            var t = (0, u.$)("#z_photoview .zpv_values"),
                n = a.default.elem(h(e));
            (0, r.append)(n, t)
        };
        var i, a = d(n("TYsd")),
            r = n("OcsD"),
            o = d(n("r/ag")),
            s = d(n("wZQE")),
            l = n("tqgD"),
            c = n("W9Tc"),
            u = n("UxAg");

        function d(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }

        function f(e) {
            var t = /photo(-?\d+)_(\d+)/i.exec(e || nav.cur);
            return Array.isArray(t) || (t = ["", 0, 0]), {
                album: (0, r.intval)(t[1]),
                photo: (0, r.intval)(t[2])
            }
        }

        function h(e) {
            return -86529522 === f(e).album && (0, c.partConfigEnabled)("mvk_photo_fest_qr_sharing") ? (0, l.QRPhotoPostingButton)() : ""
        }
    },
    y6KD: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.Messages = s, t.default = void 0;
        var i = n("DPXh"),
            a = n("CjAb"),
            r = n("4Oey"),
            o = n("/xuI");

        function s(e) {
            for (var t = Math.ceil((window.innerHeight - o.HEADER_HEIGHT) / 70), n = [], s = 0; s < t; s++) n.push((0, i.ChatBlock)());
            return {
                inner: [(0, a.Header)(), (0, r.SearchBlock)(), n],
                class: "SkeletonMessages Skeleton",
                tag: "div"
            }
        }
        var l = s;
        t.default = l
    },
    yEBz: function(e, t, n) {
        "use strict";
        var i = n("UxAg");
        window.Settings = {
            _privacy: {}
        }, Settings._privacy.onRadioChange = o;
        var a = {
                pad: function(e) {
                    return '.Settings__privacyPad[data-privacy="'.concat(e, '"]')
                },
                submit: ".Settings__privacySubmitRow",
                form: ".Settings__privacyForm",
                forbid: ".Settings__privacySelectForbiddenLink"
            },
            r = {
                padVisible: "Settings__privacyPad_visible",
                submitVisible: "Settings__privacySubmitRow_visible"
            };

        function o(e, t) {
            if ("none" === e) s("allowed", !1), s("forbidden", !1), l(!0);
            else if ("allowed" === e) s("allowed", !0), s("forbidden", !1), l(!1);
            else if ("forbidden" === e) {
                s("allowed", !1), s("forbidden", !0), l(!0);
                var n = (0, i.$)(a.form),
                    r = (0, i.$)(a.forbid),
                    o = t.name,
                    c = t.value,
                    u = n.getAttribute("action"),
                    d = "".concat(u, "&").concat(o, "=").concat(c, "&forbid");
                r.setAttribute("href", d)
            }
        }

        function s(e, t) {
            (0, i.$)(a.pad(e)).classList.toggle(r.padVisible, t)
        }

        function l(e) {
            (0, i.$)(a.submit).classList.toggle(r.submitVisible, e)
        }
    },
    yNeG: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("B5sG")) && i.__esModule ? i : {
            default: i
        };
        n("vTE6");
        var r = a.default;
        t.default = r, window.uMailHat = a.default
    },
    yVRv: function(e, t, n) {
        "use strict";
        var i, a = (i = n("9CLW")) && i.__esModule ? i : {
            default: i
        };

        function r(e, t) {
            return function(e) {
                if (Array.isArray(e)) return e
            }(e) || function(e, t) {
                if (!(Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e))) return;
                var n = [],
                    i = !0,
                    a = !1,
                    r = void 0;
                try {
                    for (var o, s = e[Symbol.iterator](); !(i = (o = s.next()).done) && (n.push(o.value), !t || n.length !== t); i = !0);
                } catch (e) {
                    a = !0, r = e
                } finally {
                    try {
                        i || null == s.return || s.return()
                    } finally {
                        if (a) throw r
                    }
                }
                return n
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance")
            }()
        }
        var o = window,
            s = o.registeredEvents,
            l = o.removeEvent,
            c = ["touchstart", "touchend", "touchmove", "touchcancel"];
        a.default.onIframeReady(function(e) {
            e.is_api && s.forEach(function(e) {
                var t = r(e, 3),
                    n = t[0],
                    i = t[1],
                    a = t[2];
                c.indexOf(i) >= 0 && l(n, i, a)
            })
        })
    },
    yVgc: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.Square = o, t.default = void 0;
        var i, a = n("/xuI"),
            r = (i = n("z9sQ")) && i.__esModule ? i : {
                default: i
            };

        function o() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                t = (0, a.getRandomId)("skeleton-line"),
                n = (0, a.stylesObjectToString)({
                    width: "".concat(e.size, "px"),
                    height: "".concat(e.size, "px")
                }) + (e.style || ""),
                i = [r.default.class("SkeletonSquare", {}), e.class].filter(function(e) {
                    return e
                }).join(" ");
            return (0, a.applyAnimation)(t), {
                id: t,
                class: i,
                style: n,
                tag: "div"
            }
        }
        var s = o;
        t.default = s
    },
    yXty: function(e, t, n) {
        "use strict";
        var i = n("sZWN"),
            a = need("Voting"),
            r = window,
            o = r.attr,
            s = r.removeClass,
            l = r.addClass,
            c = r.hasClass,
            u = r.toggleClass,
            d = r.ge,
            f = r.val,
            h = r.geByClass1,
            p = r.langNumeric,
            A = r.each,
            m = r.lockButton,
            _ = window.browser,
            v = window.ajax,
            g = window.nav,
            y = window.page,
            b = window.mail,
            w = window.im,
            k = function() {
                var e, t, n = [],
                    r = !1,
                    k = !1,
                    S = {};

                function C(e) {
                    return function() {
                        if (!r) return e.apply(this, arguments)
                    }
                }

                function M(e) {
                    return "A" === e.tagName
                }

                function P() {
                    k = n.length > 0, u("vk_messages_actions_visible", document.body, k)
                }

                function T() {
                    k && (S = {}, A(n, function(e, t) {
                        s("mi_selected", h("_msg" + t))
                    }), r = !1, n = [], P())
                }

                function D() {
                    return !!window.getSelection && window.getSelection().toString().length > 0
                }

                function I(e, t, i) {
                    var a = arguments.length > 3 && void 0 !== arguments[3] && arguments[3];
                    r = !0, m(e), w.off(), v.click("/mail", {}, {
                        url_params: {
                            act: a ? "spam" : "delete",
                            peer: t,
                            hash: i,
                            ids: n.join(","),
                            community: E()
                        }
                    })
                }

                function x() {
                    return Boolean(e)
                }

                function O() {
                    d("dialogs") && x() ? l("vk_dialogs_forwarding", document.body) : e = "", T()
                }
                return y.onChange(O), b.onShowDialogsPageFromCache(O), b.onShowDialogFromCache(O), b.onShowDialogsPageFromCache(i.showHeader), b.onShowDialogFromCache(i.showHeader), b.onMessagesRepainted(function() {
                    A(n, function(e, t) {
                        l("mi_selected", h("_msg" + t))
                    })
                }), {
                    onMessageClick: C(function(e) {
                        var t = e.target,
                            i = e.currentTarget,
                            r = M(t) || M(t.parentNode);
                        t.closest(".".concat(a.cls)) ? e.stopPropagation() : (r && T(), _.uc_mini || D() || r || setTimeout(function() {
                            var e, t, a;
                            D() || (t = o(e = i, "data-id"), (a = n.indexOf(t)) >= 0 ? (n.splice(a, 1), s("mi_selected", e), delete S[t]) : (n.push(t), l("mi_selected", e), S[t] = c("msg_item_important", e)), P(), function() {
                                var e = window.lang,
                                    t = Math.max(n.length, 1);
                                f(h("messagesActions__row_counter"), p(t, e.mobile_mail_messages_selected).replace("{count}", t))
                            }())
                        }, 40))
                    }),
                    remove: C(I),
                    reply: C(function(e, t, i) {
                        r = !0, m(e), v.click("/attachments", {}, {
                            url_params: {
                                act: "add",
                                target: "mail" + t,
                                hash: i,
                                object: "mail" + n.join(";"),
                                community: E()
                            }
                        })
                    }),
                    forward: C(function(i, a) {
                        r = !0, m(i), e = "mail" + n.join(";"), t = a;
                        var o = E(),
                            s = o ? "?community=".concat(o) : "";
                        g.go(location.pathname + s, null, {
                            ignore_cur_process: !0
                        })
                    }),
                    spam: C(function(e, t, n) {
                        I(e, t, n, !0)
                    }),
                    close: C(T),
                    toggleImportant: C(function(e) {
                        var t, i = n.length,
                            a = 0;
                        for (t = 0; t < i; t++)
                            if (!S[n[t]]) {
                                a = 1;
                                break
                            }
                        for (t = 0; t < i; t++) u("msg_item_important", h("_msg" + n[t]), 1 === a);
                        v.post("/mail", {
                            _ajax: 1,
                            act: "mark_important",
                            ids: n,
                            val: a,
                            hash: e
                        }), T()
                    }),
                    hasFwdMessages: x,
                    attachFwdMessages: function(n) {
                        v.click("/attachments", {}, {
                            url_params: {
                                act: "add",
                                target: "mail" + n,
                                hash: t,
                                object: e,
                                community: E()
                            }
                        }), e = ""
                    }
                }
            }();

        function E() {
            return g.getQuery("community")
        }
        window.MessagesActions = k
    },
    yZoT: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i = o(n("MjTa")),
            a = o(n("sdz3"));

        function r() {
            if ("function" != typeof WeakMap) return null;
            var e = new WeakMap;
            return r = function() {
                return e
            }, e
        }

        function o(e) {
            if (e && e.__esModule) return e;
            var t = r();
            if (t && t.has(e)) return t.get(e);
            var n = {};
            if (null != e) {
                var i = Object.defineProperty && Object.getOwnPropertyDescriptor;
                for (var a in e)
                    if (Object.prototype.hasOwnProperty.call(e, a)) {
                        var o = i ? Object.getOwnPropertyDescriptor(e, a) : null;
                        o && (o.get || o.set) ? Object.defineProperty(n, a, o) : n[a] = e[a]
                    }
            }
            return n.default = e, t && t.set(e, n), n
        }
        var s = function() {
                function e() {
                    window.isCustomScroll && (document.body.classList.contains("vk__page_mail") || i.restoreDocumentScroll())
                }
                return {
                    init: function() {
                        if (window.isCustomScroll && !document.body.classList.contains("vk__page_mail")) {
                            var t = ge("mcont");
                            t && t.classList.contains("ScrollView") ? i.init() : e(), a.onClose()
                        }
                    },
                    restore: e
                }
            }(),
            l = s;
        t.default = l, onDOMReady(function() {
            s.init(), page.onChange(function() {
                s.init()
            })
        }), window.ContentScrollView = s
    },
    yguo: function(e, t, n) {
        "use strict";
        var i = n("UxAg"),
            a = c(n("+cqQ")),
            r = c(n("jk6M")),
            o = c(n("ZoJ6")),
            s = function(e) {
                if (e && e.__esModule) return e;
                var t = l();
                if (t && t.has(e)) return t.get(e);
                var n = {};
                if (null != e) {
                    var i = Object.defineProperty && Object.getOwnPropertyDescriptor;
                    for (var a in e)
                        if (Object.prototype.hasOwnProperty.call(e, a)) {
                            var r = i ? Object.getOwnPropertyDescriptor(e, a) : null;
                            r && (r.get || r.set) ? Object.defineProperty(n, a, r) : n[a] = e[a]
                        }
                }
                n.default = e, t && t.set(e, n);
                return n
            }(n("sdz3"));

        function l() {
            if ("function" != typeof WeakMap) return null;
            var e = new WeakMap;
            return l = function() {
                return e
            }, e
        }

        function c(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }

        function u(e) {
            requestAnimationFrame(function() {
                var t = e.value;
                h(e.value), o.default.onChange(t)
            })
        }

        function d() {
            s.onOpen("top")
        }

        function f(e) {
            var t = e.closest(".mailFilter").$(".mailFilter__input"),
                n = document.activeElement === t;
            (r.default.ios ? setTimeout : requestAnimationFrame)(function() {
                h(""), t.value = "", n && t.focus(), o.default.onClear(), o.default.onChange("")
            })
        }

        function h(e) {
            (0, i.$$)(".mailFilter").forEach(function(t) {
                return t.classList.toggle("mailFilter_hasQuery", !!e)
            })
        }
        Object.assign(o.default, {
            onChange: (0, a.default)("query"),
            onClear: (0, a.default)(),
            setQuery: function(e) {
                var t = (0, i.$)(".mailFilter__input");
                t && t.value !== e && (t.value = e, o.default.onChange(e), h(e))
            },
            setQuerySilently: function(e) {
                var t = (0, i.$)(".mailFilter__input");
                t && t.value !== e && (t.value = e, h(e))
            }
        }), o.default._onInput = u, o.default._onClearMouseDown = f, o.default._onFocus = d
    },
    ylz1: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i, a = (i = n("29dZ")) && i.__esModule ? i : {
            default: i
        };
        t.default = function e() {
            var t = this;
            ! function(e, t) {
                if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
            }(this, e), this.address = "", this.comment = "", this.setAddress = function(e) {
                t.address = e.value
            }, this.setComment = function(e) {
                t.comment = e.value
            }, this.doOrder = function(e, n, i) {
                var r = i.$btn;
                a.default.setLoading(r, !0), ajax.post("market.php", {
                    act: "cart_do_order",
                    group_id: e,
                    hash: n,
                    address: t.address,
                    comment: t.comment
                }, {
                    onDone: function() {
                        a.default.setLoading(r, !1)
                    },
                    onFail: function() {
                        a.default.setLoading(r, !1)
                    }
                })
            }
        }
    },
    yqpO: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.emojiToHTML = function(e, t) {
            if (browser.ipad || browser.iphone) return e;
            e = (e + "").replace(/&nbsp;/g, " ").replace(/<br>/g, "\n");
            for (var n = 0; n < 2; n++) Object.keys(i.EMOJI_PREFIXED_REPLACES).forEach(function(t) {
                e.replace(i.EMOJI_PREFIXED_REPLACES[t], function(e, n, i, a) {
                    return (n || "") + o(t) + (a || "")
                })
            });
            Object.keys(i.EMOJI_REPLACES).forEach(function(t) {
                e = e.replace(i.EMOJI_REPLACES[t], function(e, n, i) {
                    return o(t) + (i || "")
                })
            }), e = e.replace(/\n/g, "<br>"), t && (e = e.replace(/\uFE0F/g, "").replace((0, i.emojiRegex)(), s));
            return e
        }, t.getEmojiHTML = o, t.emojiReplace = s;
        var i = n("S6+Z"),
            a = n("TxR4"),
            r = n("vkmG");

        function o(e, t, n, i) {
            if (!n && t) return t;
            if (i) {
                var a = t ? ' title="'.concat(t, '"') : "";
                return '<i class="emoji @'.concat(e, '" emoji="').concat(e, '"').concat(a, "></i>")
            }
            var r = window.devicePixelRatio >= 2 ? "_2x" : "",
                o = browser.msie && Number(browser.version) > 8 ? ' contenteditable="false"' : "",
                s = t ? ' alt="'.concat(t, '"') : "";
            return '<img class="emoji" src="/emoji/e/'.concat(e).concat(r, '.png"').concat(s).concat(o, ">")
        }

        function s(e) {
            return o((0, a.emojiSymbolToByteHex)(e), (0, r.encodeHTMLEntities)(e), !0)
        }
    },
    yuVR: function(e, t, n) {
        "use strict";
        var i = window,
            a = i.lsSet,
            r = i.lsGet,
            o = i.ajax,
            s = i.extend,
            l = 1e4,
            c = "friendsStat.events",
            u = "/friends",
            d = "stats",
            f = null;

        function h() {
            clearTimeout(f);
            var e = r(c) || [];
            if (e.length) {
                a(c);
                var t, n = {
                    act: d
                };
                n = s(n, (t = {}, each(e, function() {
                    t[this.type] ? t[this.type].push(this.data) : t[this.type] = [this.data]
                }), t)), o.post(u, n)
            }
        }
        window.FriendsStats = {
            log: function(e, t) {
                var n = function(e, t) {
                    var n = [],
                        i = (new Date).getTime();
                    switch (e) {
                        case FriendsStats.EVENTS.EVENT_VIEW_USER:
                            n = [t.uid, i, t.pos, t.ref, t.blockType, t.trackCode];
                            break;
                        case FriendsStats.EVENTS.EVENT_HIDE_BLOCK:
                            n = [i, t.ref, t.trackCode];
                            break;
                        case FriendsStats.EVENTS.EVENT_OPEN_USER:
                            n = [t.uid, i, t.ref, t.trackCode]
                    }
                    return n.join("|")
                }(e, t);
                if (!n) return;
                var i = r(c) || [];
                i.push({
                    type: e,
                    data: n
                }), a(c, i), clearTimeout(f), f = setTimeout(h, l)
            },
            EVENTS: {
                EVENT_VIEW_USER: "show_user_rec",
                EVENT_HIDE_BLOCK: "hide_block",
                EVENT_OPEN_USER: "open_user"
            }
        }, f = setTimeout(h, l)
    },
    ywff: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.initPhotoCarousel = function(e, t) {
            var n = domQuery1("[data-sizes]", e),
                r = JSON.parse(domData(n, "sizes")),
                o = (domData(n, "media-links") || "").split(",");
            if (r.length <= 1 || domData(e, "carousel-inited")) return;
            if (domData(e, "carousel-inited", 1), t.mobile) return function(e, t) {
                var n, r, o, s = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {},
                    l = geByClass1("article_photo_carousel__controls", t),
                    c = geByClass1("article_photo_carousel__counter", t),
                    u = domData(c, "counter-lang") || getLang("global_article_carousel_counter"),
                    d = getSize(geByClass1("article_figure_content", t)),
                    f = geByClass1("article_photo_carousel_inner", t),
                    h = s.onClick,
                    p = 0,
                    A = 0,
                    m = !1,
                    _ = 0,
                    v = 0,
                    g = !1,
                    y = !1;
                l.addEventListener("touchstart", function(e) {
                    r = e.touches[0].pageX, n = e.touches[0].pageY, addClass(f, "--no_trans"), m = !0, clearTimeout(o)
                });
                var b, w = !1;

                function k(n, i, r) {
                    if (!i || !m) {
                        if (m = !0, i) return f.style.transform = "translateX(-50px)", void(o = setTimeout(function() {
                            f.style.transform = "translateX(0px)"
                        }, 700));
                        clearTimeout(o), p = void 0 === p ? Math.min(e.length - 1, Math.max(0, p + n)) : r, domData(t, "photo-carousel-index", p), a(p, t), c.innerHTML = u.replace("{counter}", p + 1).replace("{total}", e.length), f.style.transform = "translateX(-".concat(p * d[0], "px)")
                    }
                }
                return l.addEventListener("touchmove", function(t) {
                    if (y || !(Math.abs(t.touches[0].pageY - n) > 5 || g)) {
                        if (A = t.touches[0].pageX - r, !(Math.abs(A) < 10) || w) {
                            y || window.addEventListener("touchmove", b = function(e) {
                                return cancelEvent(e)
                            }, {
                                passive: !1
                            }), y = !0, w = !0;
                            var i = Math.min(e.length - 1, Math.max(0, p + (A < 0 ? 1 : -1))),
                                a = 0 === i && 0 === p,
                                o = i === e.length - 1 && p === e.length - 1;
                            _ = i;
                            var s = -p * d[0];
                            s += a || o ? .2 * A : A, f.style.transform = "translateX(".concat(s, "px)")
                        }
                    } else g = !0
                }), l.addEventListener("touchend", function() {
                    w = !1, g = !1, y = !1, v = p, removeClass(f, "--no_trans"), b && window.removeEventListener("touchmove", b), Math.abs(A) < 50 || (p = _), k(0, !1, _), isFunction(h) && v !== _ && h(v < _ ? i.ArticleStatsEvents.clickOnCarouselNext : i.ArticleStatsEvents.clickOnCarouselPrev)
                }), k
            }(r, e, t);
            var s = function(e, t, n, r) {
                var o, s = 0,
                    l = geByClass1("article_photo_carousel__controls", t),
                    c = geByClass1("article_photo_carousel__counter", t),
                    u = domData(c, "counter-lang") || getLang("global_article_carousel_counter"),
                    d = getSize(geByClass1("article_figure_content", t)),
                    f = geByClass1("article_photo_carousel_inner", t),
                    h = geByClass1("article_photo_carousel__left", t),
                    p = geByClass1("article_photo_carousel__right", t),
                    A = n.onClick,
                    m = !1;

                function _(i, l) {
                    if (!l || !m) {
                        if (m = !0, l) return f.style.transform = "translateX(-50px)", void(o = setTimeout(function() {
                            f.style.transform = "translateX(0px)"
                        }, 700));
                        clearTimeout(o), s = Math.min(e.length - 1, Math.max(0, s + i));
                        if (n.moderDeletePhoto) {
                            var A = r[s];
                            '<a href="'.concat(A, '" target="_blank" rel="noopener" class="flat_button article_photo_moder_open"></a>')
                        }
                        f.style.transform = "translateX(-".concat(s * d[0], "px)"), c.innerHTML = u.replace("{counter}", s + 1).replace("{total}", e.length), toggle(h, s > 0), toggle(p, s < e.length - 1), domData(t, "photo-carousel-index", s), a(s, t)
                    }
                }
                return p.addEventListener("click", function(e) {
                    return _(1), A && A(i.ArticleStatsEvents.clickOnCarouselNext), cancelEvent(e)
                }), h.addEventListener("click", function(e) {
                    return _(-1), A && A(i.ArticleStatsEvents.clickOnCarouselPrev), cancelEvent(e)
                }), t.addEventListener("mousemove", function() {
                    l.style.opacity = 1
                }), t.addEventListener("mouseleave", function() {
                    l.style.opacity = 0
                }), _
            }(r, e, t, o);
            return data(e, "changePhotoFunction", s), s
        };
        var i = n("sWID");

        function a(e, t) {
            var n = geByTag1("figcaption", t),
                i = [];
            n && ((i = domData(n, "captions")) && (i = JSON.parse(i)), n.innerHTML = i[e] || "")
        }
    },
    z8PJ: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.gemiusTrackPage = function() {
            if ((0, i.partConfigEnabled)("geminus_counter")) {
                var e = "pzBAVLtpzyiyDVIwmwjmX5a2zSVdA6eUI7mpf0ufDFf.57";
                if (window.pp_gemius_identifier) window.pp_gemius_hit(e);
                else {
                    window.pp_gemius_identifier = e;
                    var t = function(e) {
                        window[e] = window[e] || function() {
                            var t = window[e + "_pdata"] = window[e + "_pdata"] || [];
                            t[t.length] = arguments
                        }
                    };
                    t("gemius_hit"), t("gemius_event"), t("pp_gemius_hit"), t("pp_gemius_event"),
                        function(e, t) {
                            try {
                                var n = e.createElement(t),
                                    i = e.getElementsByTagName(t)[0],
                                    a = "http" + ("https:" == location.protocol ? "s" : "");
                                n.setAttribute("async", "async"), n.setAttribute("defer", "defer"), n.src = a + "://galv.hit.gemius.pl/xgemius.js", i.parentNode.insertBefore(n, i)
                            } catch (e) {}
                        }(document, "script")
                }
            }
        };
        var i = n("W9Tc")
    },
    zEUu: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i = n("OcsD"),
            a = {
                cachedProgress: {}
            },
            r = {
                init: function() {
                    var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : (0, i.srand)(),
                        t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 20;
                    return this.radius = t, {
                        component: this._getLoader(e, a.cachedProgress[e]),
                        id: e
                    }
                },
                update: function(e, t) {
                    var n = $('[data-loader-id="'.concat(e, '"] circle'));
                    if (n) {
                        var i = this.radius,
                            r = Math.PI * (2 * i);
                        a.cachedProgress[e] = t;
                        var o = (100 - Math.max(5, t)) / 100 * r;
                        n.setAttribute("stroke-dashoffset", o)
                    }
                },
                ready: function(e) {
                    var t = $('[data-loader-id="'.concat(e, '"]'));
                    re(t)
                },
                _getLoader: function(e) {
                    var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0,
                        n = this.radius,
                        i = Math.PI * (2 * n),
                        a = (100 - Math.max(5, t)) / 100 * i;
                    return {
                        class: "Loader",
                        inner: [{
                            class: "Loader__progress",
                            "data-loader-id": e,
                            inner: {
                                tag: "svg",
                                viewPort: "0 0 100 100",
                                inner: {
                                    tag: "circle",
                                    r: n,
                                    cx: "30",
                                    cy: "30",
                                    "stroke-dashoffset": a,
                                    "stroke-dasharray": i
                                }
                            }
                        }]
                    }
                }
            };
        t.default = r
    },
    zGVo: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = void 0;
        var i = r(n("jIm5")),
            a = r(n("Jd+f"));

        function r(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        i.default.addToCart = a.default;
        var o = i.default;
        t.default = o, window.MarketItem = i.default
    },
    zHNa: function(e, t, n) {
        "use strict";
        var i = window,
            a = i.cancelEvent,
            r = i.gpeByClass,
            o = i.geByClass1,
            s = i.toggleClass,
            l = i.hasClass,
            c = i.ajax,
            u = i.attr,
            d = need("Control"),
            f = need("Popup"),
            h = {
                init: function() {
                    var e = o("_adultConfirm"),
                        t = o("_adultConfirm__submit", e),
                        n = o("adultConfirm__checkbox", e);
                    s("adultConfirm__submit_disabled", t, !d.isChecked(n))
                },
                toggle: function(e) {
                    var t = r("_adultConfirm", e.$control),
                        n = o("_adultConfirm__submit", t);
                    s("adultConfirm__submit_disabled", n, !e.checked)
                },
                submit: function(e, t) {
                    if (a(e), !l("adultConfirm__submit_disabled", t)) {
                        var n = r("_adultConfirm", t),
                            i = o("_adultConfirm__form", n),
                            s = {
                                _ajax: 1
                            };
                        each(geByTag("input", i), function(e, t) {
                            var n = t.type.toLowerCase(),
                                i = t.name.toLowerCase();
                            "hidden" !== n && "checkbox" !== n && "radio" !== n || (s[i] = t.value)
                        });
                        var d = u(i, "action");
                        c.post(d, s), f.close()
                    }
                },
                back: function(e) {
                    a(e), window.history ? window.history.back() : window.location = "/"
                }
            };
        window.AdultConfirm = h
    },
    zLYz: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.StoriesBlock = r, t.default = void 0;
        var i = n("0ONw"),
            a = n("NJ1W");

        function r() {
            arguments.length > 0 && void 0 !== arguments[0] && arguments[0];
            for (var e = Math.ceil(window.innerWidth / 72), t = [], n = 0; n < e; n++) t.push((0, a.Col)({
                inner: [(0, i.Story)()],
                auto: !0
            })), t.push((0, a.Offset)({
                small: !0
            }));
            return {
                inner: [(0, a.Row)({
                    inner: [t]
                })],
                class: "SkeletonStoriesBlock",
                tag: "div"
            }
        }
        var o = r;
        t.default = o
    },
    zb1z: function(e, t, n) {
        "use strict";
        var i, a = (i = n("SRbS")) && i.__esModule ? i : {
            default: i
        };
        Object.assign(a.default, {
            html: function(e) {
                for (var t = arguments.length, n = new Array(t > 1 ? t - 1 : 0), i = 1; i < t; i++) n[i - 1] = arguments[i];
                var a = "";
                return e.forEach(function(e, t) {
                    var i = n[t];
                    a += e + (i || 0 === i ? i : "")
                }), a
            }
        })
    },
    zouF: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.Confirm = l;
        var i = n("OcsD"),
            a = s(n("TYsd")),
            r = s(n("Po+v")),
            o = s(n("z9sQ"));

        function s(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }

        function l(e, t, n) {
            var o = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : {},
                s = (0, i.ceFromString)(a.default.html((0, r.default)({
                    id: o.id,
                    class: "Confirm",
                    scrollable: !0,
                    header: {
                        title: o.title || getLang("mobile_warning_header")
                    },
                    content: [e, {
                        class: "Popup__buttons",
                        inner: [c(getLang("mobile_continue"), "regular", t), c(getLang("mobile_cancel"), "secondary", n || "Popup.close(this)")]
                    }]
                })));
            domInsert(document.body, s), r.default.open(s, !0)
        }

        function c(e, t, n) {
            return {
                class: ["Popup__button", o.default.class("Btn", {
                    theme: t || "regular"
                })],
                tag: "button",
                inner: e,
                onclick: n
            }
        }
        page.onChange(function() {
            $$(".Confirm").forEach(function(e) {
                return r.default.close(e)
            })
        }), window.Confirm = l
    },
    zq7H: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.DESKTOP_WIDTH = void 0;
        t.DESKTOP_WIDTH = 882
    },
    zxIV: function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.geById = function(e) {
            return document.getElementById(e)
        }, t.$ = function(e, t) {
            return (t || document).querySelector(e)
        }, t.$$ = function(e, t) {
            return (t || document).querySelectorAll(e)
        }, t.setInnerText = function(e, t) {
            e && (e.innerText = t)
        }, t.geByTag = l, t.geByTag1 = c, t.geByClass = u, t.geByClass1 = d, t.gpeByClass = f, t.domQuery = function(e, t) {
            return (t || document).querySelectorAll(e)
        }, t.domQuery1 = function(e, t) {
            return (t || document).querySelector(e)
        }, t.domClosest = function(e, t) {
            if (B(t, e)) return t;
            return f(e, t)
        }, t.domClosestByTag = function(e, t) {
            if (e = e.toUpperCase(), t.nodeType === Node.ELEMENT_NODE && t.tagName.toUpperCase() === e) return t;
            return h(e, t)
        }, t.gpeByTag = h, t.ce = p, t.re = function(e) {
            (e = s(e)) && e.parentNode && e.parentNode.removeChild(e);
            return e
        }, t.rs = function(e, t) {
            return (0, i.each)(t, function(t, n) {
                e = e.replace(new RegExp("%" + t + "%", "g"), (void 0 === n ? "" : n).toString().replace(/\$/g, "&#036;"))
            }), e
        }, t.psr = function(e) {
            if ("https:" !== locProtocol) return e;
            return e = (e = (e = (e = (e = e.replace(/http:\/\/(cs(\d+)\.vk\.me\/c(\d+)\/)/gi, "https://$1")).replace(/http:\/\/cs(\d+)\.(userapi\.com|vk\.com|vk\.me|vkontakte\.ru)\/c(\d+)\/(v\d+\/|[a-z0-9\/_:\-]+\.jpg)/gi, "https://pp.vk.me/c$3/$4")).replace(/http:\/\/cs(\d+)\.(userapi\.com|vk\.com|vk\.me|vkontakte\.ru)\/([a-z0-9\/_:\-]+\.jpg)/gi, "https://pp.vk.me/c$1/$3")).replace(/http:\/\/cs(\d+)\.(userapi\.com|vk\.com|vk\.me|vkontakte\.ru)\//gi, "https://ps.vk.me/c$1/")).replace(/http:\/\/video(\d+)\.vkadre\.ru\//gi, "https://ps.vk.me/v$1/")
        }, t.domReplaceEl = function(e, t) {
            (0, i.isString)(t) && (t = y(t));
            return S(e).replaceChild(t, e), t
        }, t.domEL = b, t.domChildren = C, t.domInsertBefore = function(e, t) {
            var n = S(t);
            return n && n.insertBefore(e, t)
        }, t.domInsertAfter = function(e, t) {
            var n = S(t);
            return n && n.insertBefore(e, w(t))
        }, t.domByClass = function(e, t) {
            if (!e) return e;
            return d(t, e)
        }, t.domData = function(e, t, n) {
            if (!e) return null;
            return void 0 !== n ? (null === n ? e.removeAttribute("data-" + t) : e.setAttribute("data-" + t, n), n) : e.getAttribute("data-" + t)
        }, t.domChildIndex = function(e) {
            var t = 0;
            for (; null != (e = k(e));) t++;
            return t
        }, t.domCA = function(e, t) {
            do {
                e = S(e)
            } while (e && !M(e, t));
            return e
        }, t.domClosestSibling = function(e, t, n) {
            var i = null;
            for (; null === i && e;)(e = -1 === n ? k(e) : w(e)) && M(e, t) && (i = e);
            return i
        }, t.matchesSelector = M, t.isHover = function(e) {
            return M(e, ":hover")
        }, t.isAncestor = function(e, t) {
            var n = s(e);
            if (t = s(t), !e || !t) return !1;
            for (; n = n.parentNode;)
                if (n === t) return !0;
            return !1
        }, t.getScroll = function() {
            var e = r.browser.msie6 ? s("PageContainer") : document.body,
                t = document.documentElement;
            return [e.scrollLeft || t.scrollLeft || window.pageXOffset || 0, e.scrollTop || t.scrollTop || window.pageYOffset || 0, t.clientWidth || e.clientWidth || 0, t.clientHeight || e.clientHeight || 0]
        }, t.domClosestPositioned = function(e, t) {
            var n = (t = t || {}).fromEl || S(e),
                a = t.positions || ["relative", "absolute", "fixed"];
            for (; n && n !== bodyNode;) {
                var r = H(n, "position");
                if ((0, i.inArray)(r, a) && (!t.noOverflow || "hidden" !== H(n, "overflow"))) break;
                n = S(n)
            }
            return n
        }, t.domClosestOverflowHidden = function(e, t) {
            var n, i, a, o = e = s(e),
                l = !1;
            for (; o && o.tagName && o !== bodyNode;) {
                if (n = H(o, "position"), i = H(o, "overflow"), a = H(o, "transform"), t && r.browser.mozilla) {
                    if ("page_wrap" != o.id && o !== e && "visible" !== i && ("static" === n ? !l || "relative" === l : "fixed" !== l)) break
                } else if (o !== e && "visible" !== i && ("static" === n ? !l || "relative" === l : "fixed" !== l)) break;
                "none" !== a ? l = void 0 : "static" !== n && "fixed" !== l && (l = n), o = S(o)
            }
            return o
        }, t.show = P, t.hide = T, t.isVisible = D, t.clientHeight = function() {
            return window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight
        }, t.getClientRectOffsetY = function(e, t, n) {
            e = s(e), n = n || 0;
            var a = O(e)[1],
                r = L(e)[1],
                o = window,
                l = document.documentElement,
                c = Math.max((0, i.intval)(o.innerHeight), (0, i.intval)(l.clientHeight)),
                u = s("page_header_cont"),
                d = l.scrollTop || bodyNode.scrollTop || window.scrollY || 0,
                f = vk.staticheader ? Math.max(0, L(u)[1] - d) : L(u)[1];
            if (t) {
                if (a + r < d + f + n) return a + r - d - f - n;
                if (a > d + c - n) return a - d - c + n
            } else {
                if (a < d + f + n) return a - d - f - n;
                if (a + r > d + c - n) return a + r - d - c + n
            }
            return 0
        }, t.toggle = function(e, t) {
            void 0 === t && (t = !D(e));
            t ? P(e) : T(e);
            return t
        }, t.boundingRectEnabled = I, t.getXYRect = x, t.getXY = O, t.isWindow = function(e) {
            return null != e && e === e.window
        }, t.getSize = L, t.getW = function(e) {
            return L(e)[0]
        }, t.getH = function(e) {
            return L(e)[1]
        }, t.hasClass = B, t.addClass = R, t.removeClass = j, t.toggleClass = function(e, t, n) {
            void 0 === n && (n = !B(e, t));
            return (n ? R : j)(e, t), n
        }, t.toggleClassDelayed = function(e, t, n, a) {
            a = (0, i.positive)(a), void 0 === n && (n = !B(e, t));
            return (n ? N : F)(e, t, a), n
        }, t.replaceClass = function(e, t, n) {
            j(e, t), R(e, n)
        }, t.getStyle = H, t.setStyle = V, t.setPseudoStyle = function(e, t, n) {
            var a = U(e, "pseudo-id");
            a || (a = (0, i.irand)(1e8, 999999999), U(e, "pseudo-id", a), R(e, "_pseudo_" + a));
            var r = t + "-style-" + a,
                o = s(r),
                l = "._pseudo_" + a + ":" + t + "{";
            o || (o = headNode.appendChild(p("style", {
                id: r,
                type: "text/css"
            })));
            (0, i.each)(n, function(e, t) {
                l += e + ": " + t + " !important;"
            }), l += "}", o.sheet ? (o.sheet.cssRules.length && o.sheet.deleteRule(0), o.sheet.insertRule(l, 0)) : o.styleSheet && (o.styleSheet.cssText = l)
        }, t.data = U, t.attr = function(e, t, n) {
            return e = s(e), void 0 === n ? e.getAttribute(t) : (e.setAttribute(t, n), n)
        }, t.removeAttr = z, t.removeData = W, t.cleanElems = function() {
            for (var e = arguments, t = 0; t < e.length; ++t) {
                var n = s(e[t]);
                n && (W(n), z(n, "btnevents"))
            }
        }, t.setTitle = function(e, t, n) {
            if (!(e = s(e)) || e.titleSet) return;
            t || (t = e);
            if (t.scrollWidth > t.clientWidth || t.scrollHeight > t.clientHeight) e.setAttribute("title", n || e.innerText || e.textContent);
            else {
                var i = c("b", e);
                i && (i.scrollWidth > i.clientWidth || i.scrollHeight > i.clientHeight) ? e.setAttribute("title", n || e.innerText || e.textContent) : e.removeAttribute("title")
            }
            e.titleSet = 1
        }, t.getZoom = function() {
            var e = s("zoom_test_1") || document.body.appendChild(p("div", {
                id: "zoom_test_1"
            }, {
                left: "10%",
                position: "absolute",
                visibility: "hidden"
            }));
            return (s("zoom_test_2") || document.body.appendChild(p("div", {
                id: "zoom_test_2"
            }, {
                left: e.offsetLeft + "px",
                position: "absolute",
                visibility: "hidden"
            }))).offsetLeft / e.offsetLeft
        }, t.val = function(e, t, n) {
            if (!(e = s(e))) return;
            void 0 !== t && (e.setValue ? (e.setValue(t), !n && e.phonblur && e.phonblur()) : "INPUT" === e.tagName || "TEXTAREA" === e.tagName ? e.value = t : void 0 !== e.emojiId && window.Emoji ? Emoji.val(e, t) : e.innerHTML = t, !n && (0, a.triggerEvent)(e, "valueChanged"));
            return e.getValue ? e.getValue() : ("INPUT" === e.tagName || "TEXTAREA" === e.tagName ? e.value : e.innerHTML) || ""
        }, t.elfocus = function(e, t, n) {
            e = s(e);
            try {
                if (e.focus(), void 0 !== t && !1 !== t || (t = e.value.length), void 0 !== n && !1 !== n || (n = t), e.setSelectionRange) e.setSelectionRange(t, n);
                else if (window.getSelection && document.createRange) {
                    var i = document.createRange();
                    i.selectNodeContents(e), i.collapse(!1);
                    var a = window.getSelection();
                    a.removeAllRanges(), a.addRange(i)
                }
            } catch (e) {}
        }, t.traverseParent = function(e, t, n) {
            e = s(e), n = n || 999;
            for (; e && !t(e);) {
                if (0 === --n) return !1;
                try {
                    if ((e = S(e)) === document) return !1
                } catch (t) {
                    e = !1
                }
            }
            return e
        }, t.setDocumentTitle = function(e) {
            if (q) return;
            return window.document.title = (0, i.replaceEntities)(e)
        }, t.lockDocumentTitle = function e(t) {
            q = t;
            t && window.cur && window.cur.destroy.push(function() {
                e(!1)
            })
        }, t.initDomScripts = function() {
            window.vkExpand = window.vkExpand || "VK" + (0, i.vkNow)(), window.vkUUID = window.vkUUID || 0, window.vkCache = window.vkCache || {}
        }, t.createElement = t.setStyleDelayed = t.removeClassDelayed = t.addClassDelayed = t.domPN = t.domLC = t.domFC = t.domPS = t.domNS = t.sech = t.se = t.cf = t.ge = void 0;
        var i = n("t7n3"),
            a = n("Egk5"),
            r = n("gdug"),
            o = n("98sY");
        var s = function(e) {
            return "string" == typeof e || "number" == typeof e ? document.getElementById(e) : e
        };

        function l(e, t) {
            return (t = s(t) || document).getElementsByTagName(e)
        }

        function c(e, t) {
            return (t = s(t) || document).querySelector && t.querySelector(e) || l(e, t)[0]
        }

        function u(e, t, n) {
            return t = s(t) || document, n = n || "*", e = ("." + e).replace(/\s+/gm, "."), Array.prototype.slice.call(t.querySelectorAll(n + e))
        }

        function d(e, t, n) {
            return n = n || "*", (t = s(t) || document).querySelector && t.querySelector(n + ("." + e).replace(/\s+/gm, ".")) || u(e, t, n)[0]
        }

        function f(e, t, n) {
            if (!(t = s(t))) return null;
            for (; n !== t && (t = t.parentNode);)
                if (B(t, e)) return t;
            return null
        }

        function h(e, t) {
            if (!(t = s(t))) return null;
            for (e = e.toUpperCase(); t = t.parentNode;)
                if (t.tagName && t.tagName.toUpperCase() === e) return t;
            return null
        }

        function p(e, t, n) {
            var a = document.createElement(e);
            return t && (0, i.extend)(a, t), n && V(a, n), a
        }
        t.ge = s;
        var A, m, _, v, g = (A = document, m = A.createDocumentFragment(), _ = A.createElement("div"), v = A.createRange && A.createRange(), m.appendChild(_), v && v.selectNodeContents(_), v && v.createContextualFragment ? function(e) {
            return e ? v.createContextualFragment(e) : A.createDocumentFragment()
        } : function(e) {
            if (!e) return A.createDocumentFragment();
            _.innerHTML = e;
            for (var t = A.createDocumentFragment(); _.firstChild;) t.appendChild(_.firstChild);
            return t
        });
        t.cf = g;
        var y = function(e) {
            return E(p("div", {
                innerHTML: e
            }))
        };
        t.se = y;

        function b(e, t) {
            for (t = t ? "previousSibling" : "nextSibling"; e && !e.tagName;) e = e[t];
            return e
        }
        t.sech = function(e) {
            return C(p("div", {
                innerHTML: e
            }))
        };
        var w = function(e) {
            return b((e || {}).nextSibling)
        };
        t.domNS = w;
        var k = function(e) {
            return b((e || {}).previousSibling, 1)
        };
        t.domPS = k;
        var E = function(e) {
            return b((e || {}).firstChild)
        };
        t.domFC = E;
        t.domLC = function(e) {
            return b((e || {}).lastChild, 1)
        };
        var S = function(e) {
            return (e || {}).parentNode
        };

        function C(e) {
            for (var t = [], n = e.childNodes, i = 0; i < n.length; i++) n[i].tagName && t.push(n[i]);
            return t
        }

        function M(e, t) {
            return !(!(e = s(e)) || e === document) && (e.matches || e.matchesSelector || e.mozMatchesSelector || e.msMatchesSelector || e.oMatchesSelector || e.webkitMatchesSelector || function(e) {
                for (var t = (this.document || this.ownerDocument).querySelectorAll(e), n = t.length; --n >= 0 && t.item(n) !== this;);
                return n > -1
            }).call(e, t)
        }

        function P(e) {
            var t = arguments.length;
            if (t > 1)
                for (var n = 0; n < t; n++) P(arguments[n]);
            else if ((e = s(e)) && e.style) {
                var i = e.olddisplay,
                    a = e.tagName.toLowerCase(),
                    o = "block";
                e.style.display = i || "", "none" === H(e, "display") && (o = B(e, "inline") || B(e, "_inline") ? "inline" : B(e, "_inline_block") ? "inline-block" : "tr" !== a || r.browser.msie ? "table" !== a || r.browser.msie ? "block" : "table" : "table-row", e.style.display = e.olddisplay = o)
            }
        }

        function T(e) {
            var t = arguments.length;
            if (t > 1)
                for (var n = 0; n < t; n++) T(arguments[n]);
            else if ((e = s(e)) && e.style) {
                var i = H(e, "display");
                e.olddisplay = "none" !== i ? i : "", e.style.display = "none"
            }
        }

        function D(e) {
            return !(!(e = s(e)) || !e.style) && "none" !== H(e, "display")
        }

        function I(e) {
            return void 0 !== e.getBoundingClientRect
        }

        function x(e, t) {
            var n;
            if (t && "inline" === H(e, "display")) {
                var i = e.getClientRects();
                n = i && i[0] || e.getBoundingClientRect()
            } else n = e.getBoundingClientRect();
            return n
        }

        function O(e, t) {
            if (!(e = s(e))) return [0, 0];
            var n = e.ownerDocument,
                i = {
                    top: 0,
                    left: 0
                };
            if (!n) return [0, 0];
            var a = n.documentElement;
            I(e) && (i = x(e, !0));
            var r = n === n.window ? n : 9 === n.nodeType && (n.defaultView || n.parentWindow);
            return [i.left + (t ? 0 : r.pageXOffset || a.scrollLeft) - (a.clientLeft || 0), i.top + (t ? 0 : r.pageYOffset || a.scrollTop) - (a.clientTop || 0)]
        }

        function L(e, t, n) {
            e = s(e);
            var a, r = document.documentElement,
                o = [0, 0];
            if (t && "border-box" === H(e, "boxSizing") && (t = !1), e === document) o = [Math.max(r.clientWidth, bodyNode.scrollWidth, r.scrollWidth, bodyNode.offsetWidth, r.offsetWidth), Math.max(r.clientHeight, bodyNode.scrollHeight, r.scrollHeight, bodyNode.offsetHeight, r.offsetHeight)];
            else if (e) {
                var l = function() {
                    o = I(e) && (a = x(e, n)) && void 0 !== a.width ? [a.width, a.height] : [e.offsetWidth, e.offsetHeight], t && (0, i.each)(o, function(t, n) {
                        var a = t ? ["Top", "Bottom"] : ["Left", "Right"];
                        (0, i.each)(a, function() {
                            o[t] -= parseFloat(H(e, "padding" + this)) || 0, o[t] -= parseFloat(H(e, "border" + this + "Width")) || 0
                        })
                    })
                };
                if (D(e)) l();
                else {
                    var c = {
                            position: "absolute",
                            visibility: "hidden",
                            display: "block"
                        },
                        u = {},
                        d = !1;
                    e.style.cssText.indexOf("!important") > -1 && (d = e.style.cssText), (0, i.each)(c, function(t, n) {
                        u[t] = e.style[t], e.style[t] = n
                    }), l(), (0, i.each)(c, function(t, n) {
                        e.style[t] = u[t]
                    }), d && (e.style.cssText = d)
                }
            }
            return o
        }

        function B(e, t) {
            var n = s(e);
            return n && 1 === n.nodeType && (" " + n.className + " ").replace(window.whitespaceRegex, " ").indexOf(" " + t + " ") >= 0
        }

        function R(e, t) {
            var n = s(e);
            n && !B(n, t) && (n.className = (n.className ? n.className + " " : "") + t)
        }
        t.domPN = S, window.whitespaceRegex = /[\t\r\n\f]/g;
        var N = function(e, t, n) {
            n = (0, i.positive)(n), setTimeout(R.pbind(e, t), n)
        };

        function j(e, t) {
            var n = s(e);
            n && (n.className = (0, i.trim)((n.className || "").replace(new RegExp("(\\s|^)" + t + "(\\s|$)"), " ")))
        }
        t.addClassDelayed = N;
        var F = function(e, t, n) {
            n = (0, i.positive)(n), setTimeout(j.pbind(e, t), n)
        };

        function H(e, t, n) {
            if (e = s(e), (0, i.isArray)(t)) {
                var a = {};
                return (0, i.each)(t, function(t, n) {
                    return a[n] = H(e, n)
                }), a
            }
            if (!e) return "";
            if (void 0 === n && (n = !0), !n && "opacity" === t && r.browser.msie) {
                var o = e.style.filter;
                return o ? o.indexOf("opacity=") >= 0 ? parseFloat(o.match(/opacity=([^)]*)/)[1]) / 100 + "" : "1" : ""
            }
            if (!n && e.style && (e.style[t] || "height" === t)) return e.style[t];
            var l, c = document.defaultView || window;
            if (c.getComputedStyle) {
                t = t.replace(/([A-Z])/g, "-$1").toLowerCase();
                var u = c.getComputedStyle(e, null);
                u && (l = u.getPropertyValue(t))
            } else if (e.currentStyle) {
                if ("opacity" === t && r.browser.msie) {
                    var d = e.currentStyle.filter;
                    return d && d.indexOf("opacity=") >= 0 ? parseFloat(d.match(/opacity=([^)]*)/)[1]) / 100 + "" : "1"
                }
                var f = t.replace(/\-(\w)/g, function(e, t) {
                    return t.toUpperCase()
                });
                "auto" === (l = e.currentStyle[t] || e.currentStyle[f]) && (l = 0), l = (l + "").split(" "), (0, i.each)(l, function(t, n) {
                    if (!/^\d+(px)?$/i.test(n) && /^\d/.test(n)) {
                        var i = e.style,
                            a = i.left,
                            r = e.runtimeStyle.left;
                        e.runtimeStyle.left = e.currentStyle.left, i.left = n || 0, l[t] = i.pixelLeft + "px", i.left = a, e.runtimeStyle.left = r
                    }
                }), l = l.join(" ")
            }
            if (n && ("width" === t || "height" === t)) {
                var h = L(e, !0)[{
                    width: 0,
                    height: 1
                }[t]];
                l = ((0, i.intval)(l) ? Math.max((0, i.floatval)(l), h) : h) + "px"
            }
            return l
        }

        function V(e, t, n) {
            if (e = s(e))
                if ((0, i.isObject)(t))(0, i.each)(t, function(t, n) {
                    return V(e, t, n)
                });
                else if ("opacity" === t) r.browser.msie && ((n + "").length ? e.style.filter = 1 !== n ? "alpha(opacity=" + 100 * n + ")" : "" : e.style.cssText = e.style.cssText.replace(/filter\s*:[^;]*/gi, ""), e.style.zoom = 1), e.style.opacity !== n && (e.style.opacity = n);
            else try {
                var a = "number" == typeof n;
                a && /height|width/i.test(t) && (n = Math.abs(n)), n = a && !/z-?index|font-?weight|opacity|zoom|line-?height/i.test(t) ? n + "px" : n, e.style[t] !== n && (e.style[t] = n)
            } catch (e) {
                (0, o.debugLog)("setStyle error: ", [t, n], e)
            }
        }
        t.removeClassDelayed = F, window.cssTransformProp = function() {
            var e = document.createElement("div");
            if (null == e.style.transform) {
                var t = ["Webkit", "Moz", "ms"];
                for (var n in t)
                    if (void 0 !== e.style[t[n] + "Transform"]) return t[n] + "Transform"
            }
            return "transform"
        }();

        function U(e, t, n) {
            if (!e) return !1;
            var i = e[vkExpand];
            return i || (i = e[vkExpand] = ++vkUUID), void 0 !== n && (vkCache[i] || (vkCache[i] = {}, window.__debugMode && (vkCache[i].__elem = e)), vkCache[i][t] = n), t ? vkCache[i] && vkCache[i][t] : i
        }

        function z(e) {
            for (var t = 0, n = arguments.length; t < n; ++t) {
                var i = arguments[t];
                if (void 0 !== e[i]) try {
                    delete e[i]
                } catch (t) {
                    try {
                        e.removeAttribute(i)
                    } catch (e) {}
                }
            }
        }

        function W(e, t) {
            var n = !!e && e[vkExpand];
            if (n)
                if (t) {
                    if (vkCache[n]) {
                        delete vkCache[n][t], t = "";
                        var i = 0;
                        for (var r in vkCache[n])
                            if ("__elem" !== r) {
                                i++;
                                break
                            }
                        i || W(e)
                    }
                } else(0, a.removeEvent)(e), z(e, vkExpand), delete vkCache[n]
        }
        t.setStyleDelayed = function(e, t, n) {
            return setTimeout(V.pbind(e, t, n), 0)
        };
        var q = !1;
        var $ = p;
        t.createElement = $
    }
});