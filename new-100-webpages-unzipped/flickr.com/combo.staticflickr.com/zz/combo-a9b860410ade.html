YUI.add("photo-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return e.ModelFetchers["flickr-photos-getInfo"].run(t,this.appContext)},update:function(t,i){var
r=[];return("title"in i||"description"in i)&&r.push(e.ModelUpdaters["flickr-photos-setMeta"].run({photoId:t,title:i.title?i.title.newVal:this.getValue(t,"title"),description:i.description?i.description.newVal:this.getValue(t,"description")},this.appContext)),"license"in
i&&r.push(e.ModelUpdaters["flickr-photos-licenses-setLicense"].run({photoId:t,license:i.license.newVal},this.appContext)),"safetyLevel"in i&&r.push(e.ModelUpdaters["flickr-photos-setSafetyLevel"].run({photoId:t,safetyLevel:i.safetyLevel.newVal},this.appContext)),e.Promise.all(r)},batchUpdate:function(t,i){var
r=[];return"safetyLevel"in i&&r.push(e.ModelUpdaters["flickr-photos-setSafetyLevel"].run({photoId:t,safetyLevel:parseInt(i.safetyLevel,10),fullResponse:1},this.appContext)),"title"in i&&"description"in i?r.push(e.ModelUpdaters["flickr-photos-setMeta"].run({photoId:t,title:i.title,description:i.description,fullResponse:1},this.appContext)):"title"in
i?r.push(e.ModelUpdaters["flickr-photos-setMeta"].run({photoId:t,title:i.title,fullResponse:1},this.appContext)):"description"in i&&r.push(e.ModelUpdaters["flickr-photos-setMeta"].run({photoId:t,description:i.description,fullResponse:1},this.appContext)),"license"in
i&&r.push(e.ModelUpdaters["flickr-photos-licenses-setLicense"].run({photoId:t,license:i.license,fullResponse:1},this.appContext)),e.Promise.all(r)}},getLargestSize:e.PhotoModelHelper.getLargestSize,getSizeToFit:e.PhotoModelHelper.getSizeToFit,getSizeIfExact:e.PhotoModelHelper.getSizeIfExact,isSizeSquare:e.PhotoModelHelper.isSizeSquare,isPhotoSquare:e.PhotoModelHelper.isPhotoSquare,getSizeForCanvas:e.PhotoModelHelper.getSizeForCanvas,getGuestpass:function(t){var
i=this;return new e.Promise(function(e,r){i.getValue(t,"guestpass")?e():i.appContext.callAPI("flickr.sharing.createGuestpass",{photo:t}).then(function(r){i.setValue(t,"guestpass",r.guestpass.url),e()})})},canVr:function(t){var i,r=!1;return this.appContext.flipper.isFlipped("enable-vr")?(this&&(i=this.getValue(t,"aspectRatio"))&&i>=1.99&&i<=2.01&&(r=!0),r?e.Promise.all([this.appContext.callAPI(
    "flickr.vr.isEquirectangular",{photo_id:t})]).then(function(t){return e.Promise.resolve(!!t[0].is_equirectangular)}):e.Promise.resolve(!1)):e.Promise.resolve(!1)},attributes:{title:e.PhotoModelHelper.attributes.title,description:e.PhotoModelHelper.attributes.description,mediaType:e.PhotoModelHelper.attributes.mediaType,license:e.PhotoModelHelper.attributes.license,isVideo:e.PhotoModelHelper.attributes.isVideo,isOwner:e.PhotoModelHelper.attributes.isOwner,sizes:e.PhotoModelHelper.attributes.sizes,descendingSizes:e.PhotoModelHelper.attributes.descendingSizes,ascendingSizes:e.PhotoModelHelper.attributes.ascendingSizes,aspectRatio:e.PhotoModelHelper.attributes.aspectRatio,needsInterstitial:e.PhotoModelHelper.attributes.needsInterstitial,canComment:e.PhotoModelHelper.attributes.canComment,canPublicComment:e.PhotoModelHelper.attributes.canPublicComment,url:e.PhotoModelHelper.attributes.url,rotation:e.PhotoModelHelper.attributes.rotation,similaritySearchURL:e.PhotoModelHelper.attributes.similaritySearchURL,basicSimilaritySearchURL:e.PhotoModelHelper.attributes.basicSimilaritySearchURL,owner:{isModel:!0},engagement:{isModel:!0},isHD:{},secret:{},canAddMeta:{validator:function(t){return
    e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!0},oWidth:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultValue:0},oHeight:{validator:function(t){return
    e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultValue:0},safetyLevel:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},guestpass:{},sizesForAlbum:{readOnly:!0,derivedBy:[
    "sizes"],defaultFn:function(t){var i=this.getValue(t, "sizes");return e.Object.each(i,function(e,t){e.src=e.url}),i}},stats:{isModel:!0},visibilitySource:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultValue:1},isVideoPending:{validator:function(t){return
    e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},isVideoFailed:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1}}})},
    "@VERSION@",{requires:[ "flickr-model-registry", "flickr-promise", "photo-model-helper", "flickr-photos-getInfo-fetcher", "flickr-photos-setPerms-updater", "flickr-photos-setMeta-updater", "flickr-photos-licenses-setLicense-updater",
    "flickr-photos-setSafetyLevel-updater", "attribute-helpers"]});YUI.add( "notification-group-discussion-models",function(r){function o(r){o.superclass.constructor.call(this,r)}r.Models[this.name]=o,r.extend(o,r.FlickrModelRegistry,{name:this.name,parseDiscussionModel:function(o,e,i,s){return{id:o,pathAlias:e,title:i.name,replyCount:i.replies,groupID:i.group_id,groupName:i.groupName,iconUrls:r.APIHelper.response.removeProtocolFromURL(i.iconurls),coverPhotoUrls:r.APIHelper.response.removeProtocolFromURL(i.coverphoto_url),group:s}},attributes:{id:{},pathAlias:{},title:{},replyCount:{},groupID:{},groupName:{},iconUrls:{},coverPhotoUrls:{},url:{readOnly:!0,derivedBy:[
    "id", "groupID"],defaultFn:function(r){return "/groups/"+this.getValue(r, "groupID")+ "/discuss/"+r}},groupUrl:{readOnly:!0,derivedBy:[ "id", "groupID"],defaultFn:function(r){return "/groups/"+this.getValue(r, "groupID")}},group:{isModel:!0}}})},
    "@VERSION@",{requires:[ "flickr-model-registry"]});YUI.add( "notification-gallery-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,parseGalleryModel:function(t){return{id:t.id,pathAlias:t.pathalias,title:t.title._content,iconUrls:e.APIHelper.response.removeProtocolFromURL(t.iconurls),owner:{id:t.owner,username:t.ownername,displayname:t.realname}}},attributes:{id:{},title:{},pathAlias:{},url:{readOnly:!0,derivedBy:[
    "id", "owner", "pathAlias"],defaultFn:function(e){return "/photos/"+(this.getValue(e, "pathAlias")||this.getValue(e, "owner").id)+ "/galleries/"+e}},iconUrls:{},owner:{}}})}, "@VERSION@",{requires:[ "flickr-model-registry"]});YUI.add(
    "notification-flickrmail-models",function(i){function e(i){e.superclass.constructor.call(this,i)}i.Models[this.name]=e,i.extend(e,i.FlickrModelRegistry,{name:this.name,parseFlickrMailModel:function(i){return{id:i.id,isMuted:i.is_muted}},attributes:{id:{},isMuted:{}}})}, "@VERSION@",{requires:[
    "flickr-model-registry"]});YUI.add( "notification-event-fave-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,attributes:{id:{},type:{},owner:{isModel:!0},timestamp:{}}})},
    "@VERSION@",{requires:[ "flickr-model-registry"]});YUI.add( "notification-event-comment-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,attributes:{id:{},type:{},owner:{isModel:!0},timestamp:{},content:{}}})},
    "@VERSION@",{requires:[ "flickr-model-registry"]});YUI.add( "notification-event-follower-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,attributes:{type:{},owner:{isModel:!0},timestamp:{}}})},
    "@VERSION@",{requires:[ "flickr-model-registry"]});